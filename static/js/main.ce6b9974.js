/*! For license information please see main.ce6b9974.js.LICENSE.txt */
(()=>{var e={5513:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function A(e){return e.length}function h(e){return e.length}function f(e,t){return t.push(e),e}var p=1,g=1,m=0,v=0,b=0,y="";function x(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:p,column:g,length:s,return:""}}function w(e,t){return s(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function _(){return b=v>0?u(y,--v):0,g--,10===b&&(g=1,p--),b}function S(){return b=v<m?u(y,v++):0,g++,10===b&&(g=1,p++),b}function C(){return u(y,v)}function E(){return v}function M(e,t){return d(y,e,t)}function P(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T(e){return p=g=1,m=A(y=e),v=0,[]}function k(e){return y="",e}function B(e){return a(M(v-1,R(91===e?e+2:40===e?e+1:e)))}function O(e){for(;(b=C())&&b<33;)S();return P(e)>2||P(b)>3?"":" "}function I(e,t){for(;--t&&S()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return M(e,E()+(t<6&&32==C()&&32==S()))}function R(e){for(;S();)switch(b){case e:return v;case 34:case 39:34!==e&&39!==e&&R(b);break;case 40:41===e&&R(e);break;case 92:S()}return v}function L(e,t){for(;S()&&e+b!==57&&(e+b!==84||47!==C()););return"/*"+M(t,v-1)+"*"+o(47===e?e:S())}function D(e){for(;!P(C());)S();return M(e,v)}var F="-ms-",N="-moz-",z="-webkit-",j="comm",U="rule",G="decl",V="@keyframes";function H(e,t){for(var n="",r=h(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function W(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case G:return e.return=e.return||e.value;case j:return"";case V:return e.return=e.value+"{"+H(e.children,r)+"}";case U:e.value=e.props.join(",")}return A(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function Q(e){return k(J("",null,null,null,[""],e=T(e),0,[0],e))}function J(e,t,n,r,i,s,a,d,h){for(var p=0,g=0,m=a,v=0,b=0,y=0,x=1,w=1,M=1,P=0,T="",k=i,R=s,F=r,N=T;w;)switch(y=P,P=S()){case 40:if(108!=y&&58==u(N,m-1)){-1!=c(N+=l(B(P),"&","&\f"),"&\f")&&(M=-1);break}case 34:case 39:case 91:N+=B(P);break;case 9:case 10:case 13:case 32:N+=O(y);break;case 92:N+=I(E()-1,7);continue;case 47:switch(C()){case 42:case 47:f(X(L(S(),E()),t,n),h);break;default:N+="/"}break;case 123*x:d[p++]=A(N)*M;case 125*x:case 59:case 0:switch(P){case 0:case 125:w=0;case 59+g:-1==M&&(N=l(N,/\f/g,"")),b>0&&A(N)-m&&f(b>32?Y(N+";",r,n,m-1):Y(l(N," ","")+";",r,n,m-2),h);break;case 59:N+=";";default:if(f(F=K(N,t,n,p,g,i,d,T,k=[],R=[],m),s),123===P)if(0===g)J(N,t,F,F,k,s,m,d,R);else switch(99===v&&110===u(N,3)?100:v){case 100:case 108:case 109:case 115:J(e,F,F,r&&f(K(e,F,F,0,0,i,d,T,i,k=[],m),R),i,R,m,d,r?k:R);break;default:J(N,F,F,F,[""],R,0,d,R)}}p=g=b=0,x=M=1,T=N="",m=a;break;case 58:m=1+A(N),b=y;default:if(x<1)if(123==P)--x;else if(125==P&&0==x++&&125==_())continue;switch(N+=o(P),P*x){case 38:M=g>0?1:(N+="\f",-1);break;case 44:d[p++]=(A(N)-1)*M,M=1;break;case 64:45===C()&&(N+=B(S())),v=C(),g=m=A(T=N+=D(E())),P++;break;case 45:45===y&&2==A(N)&&(x=0)}}return s}function K(e,t,n,r,o,s,c,u,A,f,p){for(var g=o-1,m=0===o?s:[""],v=h(m),b=0,y=0,w=0;b<r;++b)for(var _=0,S=d(e,g+1,g=i(y=c[b])),C=e;_<v;++_)(C=a(y>0?m[_]+" "+S:l(S,/&\f/g,m[_])))&&(A[w++]=C);return x(e,t,n,0===o?U:u,A,f,p)}function X(e,t,n){return x(e,t,n,j,o(b),d(e,2,-2),0)}function Y(e,t,n,r){return x(e,t,n,G,d(e,0,r),d(e,r+1,-1),r)}var q=function(e,t,n){for(var r=0,i=0;r=i,i=C(),38===r&&12===i&&(t[n]=1),!P(i);)S();return M(e,v)},Z=function(e,t){return k(function(e,t){var n=-1,r=44;do{switch(P(r)){case 0:38===r&&12===C()&&(t[n]=1),e[n]+=q(v-1,t,n);break;case 2:e[n]+=B(r);break;case 4:if(44===r){e[++n]=58===C()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=S());return e}(T(e),t))},$=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||$.get(n))&&!r){$.set(e,!0);for(var i=[],o=Z(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+N+e+F+e+e;case 6828:case 4268:return z+e+F+e+e;case 6165:return z+e+F+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return z+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+F+l(e,"shrink","negative")+e;case 5292:return z+e+F+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+F+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(A(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+N+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,A(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===u(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+F+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case G:e.return=ne(e.value,e.length);break;case V:return H([w(e,{value:l(e.value,"@","@"+z)})],r);case U:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([w(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return H([w(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,s,a={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)}));var c,u,d=[W,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],A=function(e){var t=h(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([ee,te].concat(i,d));s=function(e,t,n,r){c=n,H(Q(e?e+"{"+t.styles+"}":t.styles),A),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:s};return f.sheet.hydrate(l),f}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},5756:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>c,i:()=>o,w:()=>l});var r=n(5043),i=n(5513),o=(n(2830),n(9436),!0),s=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=s.Provider,l=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(s);return e(t,i,n)}))};o||(l=function(e){return function(t){var n=(0,r.useContext)(s);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(s.Provider,{value:n},e(t,n))):e(t,n)}});var c=r.createContext({})},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>c,i7:()=>u,mL:()=>l});var r=n(5756),i=n(5043),o=n(1722),s=n(9436),a=n(2830),l=(n(5513),n(219),(0,r.w)((function(e,t){var n=e.styles,l=(0,a.J)([n],void 0,i.useContext(r.T));if(!r.i){for(var c,u=l.name,d=l.styles,A=l.next;void 0!==A;)u+=" "+A.name,d+=A.styles,A=A.next;var h=!0===t.compat,f=t.insert("",{name:u,styles:d},t.sheet,h);return h?null:i.createElement("style",((c={})["data-emotion"]=t.key+"-global "+u,c.dangerouslySetInnerHTML={__html:f},c.nonce=t.sheet.nonce,c))}var p=i.useRef();return(0,s.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),p.current=[n,r],function(){n.flush()}}),[t]),(0,s.i)((function(){var e=p.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null})));function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}var u=function(){var e=c.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2830:(e,t,n)=>{"use strict";n.d(t,{J:()=>f});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,i.A)((function(e){return a(e)?e:e.replace(o,"-$&").toLowerCase()})),u=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return A={name:t,styles:n,next:A},t}))}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return A={name:n.name,styles:n.styles,next:A},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)A={name:r.name,styles:r.styles,next:A},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":l(s)&&(r+=c(o)+":"+u(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=d(e,t,s);switch(o){case"animation":case"animationName":r+=c(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var A=0;A<s.length;A++)l(s[A])&&(r+=c(o)+":"+u(o,s[A])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=A,o=n(e);return A=i,d(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var A,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";A=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=d(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=d(n,t,e[s]),r&&(i+=o[s]);h.lastIndex=0;for(var a,l="";null!==(a=h.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:A}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>s});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},2954:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload")},3471:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},6577:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3zm2-8h6v8H5zm5-6H6L5 5H2v2h12V5h-3z"}),"DeleteSweepOutlined")},5540:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},7948:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline")},6191:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r)}(n(5043));var i=r(n(39)),o=n(579);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}t.A=(0,i.default)((0,o.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub")},7058:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-6.99 15c-.7 0-1.26-.56-1.26-1.26 0-.71.56-1.25 1.26-1.25.71 0 1.25.54 1.25 1.25-.01.69-.54 1.26-1.25 1.26m3.01-7.4c-.76 1.11-1.48 1.46-1.87 2.17-.16.29-.22.48-.22 1.41h-1.82c0-.49-.08-1.29.31-1.98.49-.87 1.42-1.39 1.96-2.16.57-.81.25-2.33-1.37-2.33-1.06 0-1.58.8-1.8 1.48l-1.65-.7C9.01 7.15 10.22 6 11.99 6c1.48 0 2.49.67 3.01 1.52.44.72.7 2.07.02 3.08"}),"HelpCenter")},4681:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7.17L18 8.83zm-9.55-9.43L7.28 9.4V13h3.6l-1.44-1.44c.52-1.01 1.58-1.71 2.79-1.71 1.74 0 3.15 1.41 3.15 3.15s-1.41 3.15-3.15 3.15c-1.07 0-2.02-.54-2.58-1.35H8.1c.69 1.58 2.28 2.7 4.12 2.7 2.48 0 4.5-2.02 4.5-4.5s-2.02-4.5-4.5-4.5c-1.59 0-2.97.83-3.77 2.07"}),"RestorePageOutlined")},39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(1512)},7344:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var r=n(8168),i=n(8587),o=n(6632),s=n(3216),a=n(7758),l=n(8812),c=n(8280);var u=n(7266);const d={black:"#000",white:"#fff"},A={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},h={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},p={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},m={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],y={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,i):"dark"===t&&(e.dark=(0,u.e$)(e.main,o)))}function _(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,l=(0,i.A)(e,b),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),_=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:h[200],light:h[50],dark:h[400]}:{main:h[500],light:h[300],dark:h[700]}}(t),S=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(t),C=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:m[700],light:m[500],dark:m[900]}}(t),E=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[800],light:v[500],dark:v[900]}}(t),M=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[400],light:p[300],dark:p[700]}:{main:"#ed6c02",light:p[500],dark:p[900]}}(t);function P(e){return(0,u.eM)(e,x.text.primary)>=n?x.text.primary:y.text.primary}const T=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,o.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return w(t,"light",s,a),w(t,"dark",l,a),t.contrastText||(t.contrastText=P(t.main)),t},k={dark:x,light:y};return(0,s.A)((0,r.A)({common:(0,r.A)({},d),mode:t,primary:T({color:c,name:"primary"}),secondary:T({color:_,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:T({color:S,name:"error"}),warning:T({color:M,name:"warning"}),info:T({color:C,name:"info"}),success:T({color:E,name:"success"}),grey:A,contrastThreshold:n,getContrastText:P,augmentColor:T,tonalOffset:a},k[t]),l)}const S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const C={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function M(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=E,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:A=16,allVariants:h,pxToRem:f}=n,p=(0,i.A)(n,S);const g=a/14,m=f||(e=>"".concat(e/A*g,"rem")),v=(e,t,n,i,s)=>{return(0,r.A)({fontFamily:o,fontWeight:e,fontSize:m(t),lineHeight:n},o===E?{letterSpacing:"".concat((a=i/t,Math.round(1e5*a)/1e5),"em")}:{},s,h);var a},b={h1:v(l,96,1.167,-1.5),h2:v(l,60,1.2,-.5),h3:v(c,48,1.167,0),h4:v(c,34,1.235,.25),h5:v(c,24,1.334,0),h6:v(u,20,1.6,.15),subtitle1:v(c,16,1.75,.15),subtitle2:v(u,14,1.57,.1),body1:v(c,16,1.5,.15),body2:v(c,14,1.43,.15),button:v(u,14,1.75,.4,C),caption:v(c,12,1.66,.4),overline:v(c,12,2.66,1,C),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,s.A)((0,r.A)({htmlFontSize:A,pxToRem:m,fontFamily:o,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},b),p,{clone:!1})}function P(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const T=["none",P(0,2,1,-1,0,1,1,0,0,1,3,0),P(0,3,1,-2,0,2,2,0,0,1,5,0),P(0,3,3,-2,0,3,4,0,0,1,8,0),P(0,2,4,-1,0,4,5,0,0,1,10,0),P(0,3,5,-1,0,5,8,0,0,1,14,0),P(0,3,5,-1,0,6,10,0,0,1,18,0),P(0,4,5,-2,0,7,10,1,0,2,16,1),P(0,5,5,-3,0,8,10,1,0,3,14,2),P(0,5,6,-3,0,9,12,1,0,3,16,2),P(0,6,6,-3,0,10,14,1,0,4,18,3),P(0,6,7,-4,0,11,15,1,0,4,20,3),P(0,7,8,-4,0,12,17,2,0,5,22,4),P(0,7,8,-4,0,13,19,2,0,5,24,4),P(0,7,9,-4,0,14,21,2,0,5,26,4),P(0,8,9,-5,0,15,22,2,0,6,28,5),P(0,8,10,-5,0,16,24,2,0,6,30,5),P(0,8,11,-5,0,17,26,2,0,6,32,5),P(0,9,11,-5,0,18,28,2,0,7,34,6),P(0,9,12,-6,0,19,29,2,0,7,36,6),P(0,10,13,-6,0,20,31,3,0,8,38,7),P(0,10,13,-6,0,21,33,3,0,8,40,7),P(0,10,14,-6,0,22,35,3,0,8,42,7),P(0,11,14,-7,0,23,36,3,0,9,44,8),P(0,11,15,-7,0,24,38,3,0,9,46,8)];var k=n(4318);const B={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},O=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:d={}}=e,A=(0,i.A)(e,O);if(e.vars)throw new Error((0,o.A)(18));const h=_(n),f=(0,c.A)(e);let p=(0,s.A)(f,{mixins:(g=f.breakpoints,m=t,(0,r.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},m)),palette:h,shadows:T.slice(),typography:M(h,d),transitions:(0,k.Ay)(u),zIndex:(0,r.A)({},B)});var g,m;p=(0,s.A)(p,A);for(var v=arguments.length,b=new Array(v>1?v-1:0),y=1;y<v;y++)b[y-1]=arguments[y];return p=b.reduce(((e,t)=>(0,s.A)(e,t)),p),p.unstable_sxConfig=(0,r.A)({},a.A,null==A?void 0:A.unstable_sxConfig),p.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},p}const R=I},4318:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,p0:()=>a});var r=n(8587),i=n(8168);const o=["duration","easing","delay"],s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return"".concat(Math.round(e),"ms")}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.A)({},s,e.easing),n=(0,i.A)({},a,e.duration);return(0,i.A)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:a=t.easeInOut,delay:c=0}=i;(0,r.A)(i,o);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof s?s:l(s)," ").concat(a," ").concat("string"===typeof c?c:l(c)))).join(",")}},e,{easing:t,duration:n})}},5170:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7344).A)()},3375:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="$$material"},1475:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7123);const i=e=>(0,r.A)(e)&&"classes"!==e},7123:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},4535:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a});var r=n(8052),i=n(5170),o=n(3375),s=n(1475);const a=(0,r.Ay)({themeId:o.A,defaultTheme:i.A,rootShouldForwardProp:s.A})},2876:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2919),i=n(5170),o=n(3375);function s(e){let{props:t,name:n}=e;return(0,r.A)({props:t,name:n,defaultTheme:i.A,themeId:o.A})}},6803:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(410).A},6593:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(4708).A},9662:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(8168),i=n(5043),o=n(8587),s=n(8387),a=n(8606),l=n(6803),c=n(2876),u=n(4535),d=n(7056),A=n(2400);function h(e){return(0,A.Ay)("MuiSvgIcon",e)}(0,d.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(579);const p=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat((0,l.A)(n.color))],t["fontSize".concat((0,l.A)(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,s,a,l,c,u,d,A,h,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(A=null==(h=(t.vars||t).palette)||null==(h=h[n.color])?void 0:h.main)?A:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(p=(t.vars||t).palette)||null==(p=p.action)?void 0:p.disabled,inherit:void 0}[n.color]}})),m=i.forwardRef((function(e,t){const n=(0,c.A)({props:e,name:"MuiSvgIcon"}),{children:u,className:d,color:A="inherit",component:m="svg",fontSize:v="medium",htmlColor:b,inheritViewBox:y=!1,titleAccess:x,viewBox:w="0 0 24 24"}=n,_=(0,o.A)(n,p),S=i.isValidElement(u)&&"svg"===u.type,C=(0,r.A)({},n,{color:A,component:m,fontSize:v,instanceFontSize:e.fontSize,inheritViewBox:y,viewBox:w,hasSvgAsChild:S}),E={};y||(E.viewBox=w);const M=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&"color".concat((0,l.A)(t)),"fontSize".concat((0,l.A)(n))]};return(0,a.A)(i,h,r)})(C);return(0,f.jsxs)(g,(0,r.A)({as:m,className:(0,s.A)(M.root,d),focusable:"false",color:b,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:t},E,_,S&&u.props,{ownerState:C,children:[S?u.props.children:u,x?(0,f.jsx)("title",{children:x}):null]}))}));m.muiName="SvgIcon";const v=m;function b(e,t){function n(n,i){return(0,f.jsx)(v,(0,r.A)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))}return n.muiName=v.muiName,i.memo(i.forwardRef(n))}},950:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(6440).A},1512:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.A,createChainedFunction:()=>o.A,createSvgIcon:()=>s.A,debounce:()=>a.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>d.A,requirePropFactory:()=>A,setRef:()=>h,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>p.A,unsupportedProp:()=>g,useControlled:()=>m.A,useEventCallback:()=>v.A,useForkRef:()=>b.A,useIsFocusVisible:()=>y.A});var r=n(5430),i=n(6803),o=n(6593),s=n(9662),a=n(950);const l=function(e,t){return()=>null};var c=n(154),u=n(2427),d=n(6078);n(8168);const A=function(e,t){return()=>null};const h=n(9184).A;var f=n(5013),p=n(5879);const g=function(e,t,n,r,i){return null};var m=n(4516),v=n(3319),b=n(5849),y=n(7844);const x={configure:e=>{r.A.configure(e)}}},154:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i=function(e,t){var n,i;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}},2427:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(2144).A},6078:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(6288).A},4516:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1944).A},5013:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3844).A},3319:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(4626).A},5849:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(7042).A},5879:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(992).A},7844:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(932).A},869:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(5043);var r=n(3290),i=n(579);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.mL,{styles:o})}},3174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>_.A,StyledEngineProvider:()=>w,ThemeContext:()=>l.T,css:()=>v.AH,default:()=>S,internal_processStyles:()=>C,keyframes:()=>v.i7});var r=n(8168),i=n(5043),o=n(918),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.A)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(5756),c=n(1722),u=n(2830),d=n(9436),A=a,h=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?A:h},p=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,c.SF)(t,n,r),(0,d.s)((function(){return(0,c.sk)(t,n,r)})),null},m=function e(t,n){var o,s,a=t.__emotion_real===t,d=a&&t.__emotion_base||t;void 0!==n&&(o=n.label,s=n.target);var A=p(t,n,a),h=A||f(d),m=!h("as");return function(){var v=arguments,b=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&b.push("label:"+o+";"),null==v[0]||void 0===v[0].raw)b.push.apply(b,v);else{0,b.push(v[0][0]);for(var y=v.length,x=1;x<y;x++)b.push(v[x],v[0][x])}var w=(0,l.w)((function(e,t,n){var r=m&&e.as||d,o="",a=[],p=e;if(null==e.theme){for(var v in p={},e)p[v]=e[v];p.theme=i.useContext(l.T)}"string"===typeof e.className?o=(0,c.Rk)(t.registered,a,e.className):null!=e.className&&(o=e.className+" ");var y=(0,u.J)(b.concat(a),t.registered,p);o+=t.key+"-"+y.name,void 0!==s&&(o+=" "+s);var x=m&&void 0===A?f(r):h,w={};for(var _ in e)m&&"as"===_||x(_)&&(w[_]=e[_]);return w.className=o,w.ref=n,i.createElement(i.Fragment,null,i.createElement(g,{cache:t,serialized:y,isStringTag:"string"===typeof r}),i.createElement(r,w))}));return w.displayName=void 0!==o?o:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=d,w.__emotion_styles=b,w.__emotion_forwardProp=A,Object.defineProperty(w,"toString",{value:function(){return"."+s}}),w.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:p(w,i,!0)})).apply(void 0,b)},w}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){m[e]=m(e)}));var v=n(3290),b=n(5513),y=n(579);let x;function w(e){const{injectFirst:t,children:n}=e;return t&&x?(0,y.jsx)(l.C,{value:x,children:n}):n}"object"===typeof document&&(x=(0,b.A)({key:"css",prepend:!0}));var _=n(869);function S(e,t){return m(e,t)}const C=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.X4=h,t.e$=f,t.eM=function(e,t){const n=A(e),r=A(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=p;var i=r(n(7245)),o=r(n(5383));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function d(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",c.push(t[3])),u({type:a,values:c})}function A(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(d(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function h(e,t){return e=l(e),t=s(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,u(e)}function f(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function p(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return A(e)>.5?f(e,t):p(e,t)}},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=p,rootShouldForwardProp:r=f,slotShouldForwardProp:l=f}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:m((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:d,slot:h,skipVariantsResolver:p,skipSx:y,overridesResolver:x=v(g(h))}=c,w=(0,o.default)(c,A),_=void 0!==p?p:h&&"Root"!==h&&"root"!==h||!1,S=y||!1;let C=f;"Root"===h||"root"===h?C=r:h?C=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(C=void 0);const E=(0,s.default)(e,(0,i.default)({shouldForwardProp:C,label:undefined},w)),M=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>b(e,(0,i.default)({},r,{theme:m({theme:r.theme,defaultTheme:n,themeId:t})})):e,P=function(r){let o=M(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];const c=a?a.map(M):[];d&&x&&c.push((e=>{const r=m((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,s={};return Object.entries(o).forEach((t=>{let[n,o]=t;s[n]=b(o,(0,i.default)({},e,{theme:r}))})),x(e,s)})),d&&!_&&c.push((e=>{var r;const o=m((0,i.default)({},e,{defaultTheme:n,themeId:t}));return b({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),S||c.push(u);const A=c.length-a.length;if(Array.isArray(r)&&A>0){const e=new Array(A).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const h=E(o,...c);return e.muiName&&(h.muiName=e.muiName),h};return E.withConfig&&(P.withConfig=E.withConfig),P}};var i=r(n(4634)),o=r(n(4893)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(3174)),a=n(4534),l=(r(n(578)),r(n(2046)),r(n(4989))),c=r(n(3234));const u=["ownerState"],d=["variants"],A=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const p=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function m(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function v(e){return e?(t,n)=>n[e]:null}function b(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const s="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(s))return s.flatMap((e=>b(e,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:e=[]}=s;let t=(0,o.default)(s,d);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return s}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>a,NI:()=>s,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>i});var r=n(3216);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(i[e],"px)")};function s(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||o;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||o;return Object.keys(t).reduce(((r,o)=>{if(-1!==Object.keys(e.values||i).indexOf(o)){r[e.up(o)]=n(t[o],o)}else{const e=o;r[e]=t[e]}return r}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){const t=a(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const s=[t,...i].reduce(((e,t)=>(0,r.A)(e,t)),{});return l(Object.keys(t),s)}function u(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let s;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[s],s=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const o=["values","unit","step"],s=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,l=(0,r.A)(e,o),c=s(t),u=Object.keys(c);function d(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function A(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function h(e,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:u,values:c,up:d,down:A,between:h,only:function(e){return u.indexOf(e)+1<u.length?h(e,u[u.indexOf(e)+1]):d(e)},not:function(e){const t=u.indexOf(e);return 0===t?d(u[1]):t===u.length-1?A(u[t]):h(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(8168),i=n(8587),o=n(3216),s=n(4853);const a={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),d=n(9703);const A=["breakpoints","palette","spacing","shape"];const h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:h,shape:f={}}=e,p=(0,i.A)(e,A),g=(0,s.A)(t),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(h);let v=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:m,shape:(0,r.A)({},a,f)},p);v.applyStyles=d.A;for(var b=arguments.length,y=new Array(b>1?b-1:0),x=1;x<b;x++)y[x-1]=arguments[x];return v=y.reduce(((e,t)=>(0,o.A)(e,t)),v),v.unstable_sxConfig=(0,r.A)({},u.A,null==p?void 0:p.unstable_sxConfig),v.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},v}},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(8280),i=n(4853),o=n(9703)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3216);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>h,_W:()=>p,Lc:()=>v,Ms:()=>b});var r=n(9751),i=n(7162),o=n(3815);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],A=[...u,...d];function h(e,t,n,r){var o;const s=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function f(e){return h(e,"spacing",8)}function p(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=p(t,n),e)),{})}(c(n),i),s=e[n];return(0,r.NI)(e,s,o)}function m(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function v(e){return m(e,u)}function b(e){return m(e,d)}function y(e){return m(e,A)}v.propTypes={},v.filterProps=u,b.propTypes={},b.filterProps=d,y.propTypes={},y.filterProps=A},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(410),i=n(9751);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function s(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,a)||{};return(0,i.NI)(e,c,(e=>{let i=s(u,l,e);return e===i&&"string"===typeof e&&(i=s(u,l,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var r=n(8604),i=n(7162),o=n(3815);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),d=c("borderTop",l),A=c("borderRight",l),h=c("borderBottom",l),f=c("borderLeft",l),p=c("borderColor"),g=c("borderTopColor"),m=c("borderRightColor"),v=c("borderBottomColor"),b=c("borderLeftColor"),y=c("outline",l),x=c("outlineColor"),w=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};w.propTypes={},w.filterProps=["borderRadius"];s(u,d,A,h,f,p,g,m,v,b,w,y,x);const _=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};_.propTypes={},_.filterProps=["gap"];const S=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};S.propTypes={},S.filterProps=["columnGap"];const C=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};C.propTypes={},C.filterProps=["rowGap"];s(_,S,C,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function E(e,t){return"grey"===t?t:e}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:E}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:E}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:E}));function M(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const P=(0,i.Ay)({prop:"width",transform:M}),T=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:M(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};T.filterProps=["maxWidth"];const k=(0,i.Ay)({prop:"minWidth",transform:M}),B=(0,i.Ay)({prop:"height",transform:M}),O=(0,i.Ay)({prop:"maxHeight",transform:M}),I=(0,i.Ay)({prop:"minHeight",transform:M}),R=((0,i.Ay)({prop:"size",cssProperty:"width",transform:M}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:M}),s(P,T,k,B,O,I,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:w},color:{themeKey:"palette",transform:E},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:E},backgroundColor:{themeKey:"palette",transform:E},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:_},rowGap:{style:C},columnGap:{style:S},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:M},maxWidth:{style:T},minWidth:{transform:M},height:{transform:M},maxHeight:{transform:M},minHeight:{transform:M},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8698:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(8168),i=n(8587),o=n(3216),s=n(7758);const a=["sx"],l=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function c(e){const{sx:t}=e,n=(0,i.A)(e,a),{systemProps:s,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,r.A)({},s,e):s}:(0,r.A)({},s,t),(0,r.A)({},c,{sx:u})}},3234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(8812),i=n(8698),o=n(7758)},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(410),i=n(3815),o=n(7162),s=n(9751),a=n(7758);function l(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:A}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const h=(0,o.Yn)(n,u)||{};if(A)return A(a);return(0,s.NI)(a,t,(t=>{let n=(0,o.BO)(h,d,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(h,d,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(l.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],d=l,"function"===typeof a?a(d):a);var a,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,e(n,o,l,c));else{const e=(0,s.NI)({theme:l},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.A)(u,e(n,o,l,c))})),(0,s.vf)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},5527:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8280),i=n(7082);const o=(0,r.A)();const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,i.A)(e)}},2919:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(2018);var i=n(5527);function o(e){let{props:t,name:n,defaultTheme:o,themeId:s}=e,a=(0,i.A)(o);s&&(a=a[s]||a);const l=function(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.A)(t.components[n].defaultProps,i):i}({theme:a,name:n,props:t});return l}},7082:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043),i=n(5756);const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(i.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},2374:(e,t,n)=>{"use strict";t.A=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(5043)),i=n(3174);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(i.ThemeContext);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},5430:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6632);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(410)},7040:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},5383:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(7040)},8606:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{A:()=>r})},4708:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{A:()=>r})},6440:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{A:()=>r})},3216:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>i});var r=n(8168);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function o(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=o(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=s(e[r],t[r],n):n.clone?a[r]=i(t[r])?o(t[r]):t[r]:a[r]=t[r])})),a}},4534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},7245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6632)},2400:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o,li:()=>i});var r=n(5430);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[t];return o?"".concat(n,"-").concat(o):"".concat(r.A.generate(e),"-").concat(t)}},7056:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2400);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.Ay)(e,t,n)})),i}},2046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var r=n(2086);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t="".concat(e).match(i);return t&&t[1]||""}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function a(e,t,n){const r=s(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return s(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return a(e,e.render,"ForwardRef");case r.Memo:return a(e,e.type,"memo");default:return}}}},2144:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},6288:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2144);function i(e){return(0,r.A)(e).defaultView||window}},2018:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8168);function i(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach((o=>{if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.A)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},a=t[o];n[o]={},a&&Object.keys(a)?s&&Object.keys(s)?(n[o]=(0,r.A)({},a),Object.keys(s).forEach((e=>{n[o][e]=i(s[e],a[e])}))):n[o]=a:n[o]=s}else void 0===n[o]&&(n[o]=e[o])})),n}},9184:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},1944:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);function i(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:s}=r.useRef(void 0!==t),[a,l]=r.useState(n);return[s?t:a,r.useCallback((e=>{s||l(e)}),[])]}},3844:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},4626:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043),i=n(3844);const o=function(e){const t=r.useRef(e);return(0,i.A)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},7042:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043),i=n(9184);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.A)(t,e)}))}),t)}},992:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>a});var i=n(5043);let o=0;const s=(r||(r=n.t(i,2)))["useId".toString()];function a(e){if(void 0!==s){const t=s();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect((()=>{null==t&&(o+=1,n("mui-".concat(o)))}),[t]),r}(e)}},932:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(5043),i=n(1140);let o=!0,s=!1;const a=new i.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function u(){o=!1}function d(){"hidden"===this.visibilityState&&s&&(o=!0)}function A(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function h(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",d,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!A(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(s=!0,a.start(100,(()=>{s=!1})),t.current=!1,!0)},ref:e}}},1140:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,A:()=>a});var r=n(5043);const i={};const o=[];class s{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new s}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function a(){const e=function(e,t){const n=r.useRef(i);return n.current===i&&(n.current=e(t)),n}(s.create).current;var t;return t=e.disposeEffect,r.useEffect(t,o),e}},5707:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),r=new RegExp("("+t+")+","gi");function i(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n)||[],r=1;r<t.length;r++)t=(e=i(t,r).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},i=r.exec(e);i;){try{n[i[0]]=decodeURIComponent(i[0])}catch(t){var s=o(i[0]);s!==i[0]&&(n[i[0]]=s)}i=r.exec(e)}n["%C2"]="\ufffd";for(var a=Object.keys(n),l=0;l<a.length;l++){var c=a[l];e=e.replace(new RegExp(c,"g"),n[c])}return e}(e)}}},973:e=>{"use strict";function t(e,t,r){r=r||2;var o,s,a,l,d,A,f,p=t&&t.length,g=p?t[0]*r:e.length,m=n(e,0,g,r,!0),v=[];if(!m||m.next===m.prev)return v;if(p&&(m=function(e,t,r,i){var o,s,a,l=[];for(o=0,s=t.length;o<s;o++)(a=n(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),l.push(h(a));for(l.sort(c),o=0;o<l.length;o++)r=u(l[o],r);return r}(e,t,m,r)),e.length>80*r){o=a=e[0],s=l=e[1];for(var b=r;b<g;b+=r)(d=e[b])<o&&(o=d),(A=e[b+1])<s&&(s=A),d>a&&(a=d),A>l&&(l=A);f=0!==(f=Math.max(a-o,l-s))?32767/f:0}return i(m,v,r,o,s,f,0),v}function n(e,t,n,r,i){var o,s;if(i===E(e,t,n,r)>0)for(o=t;o<n;o+=r)s=_(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=_(o,e[o],e[o+1],s);return s&&m(s,s.next)&&(S(s),s=s.next),s}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(S(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,c,u,d,h){if(e){!h&&d&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=A(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(e,c,u,d);for(var f,p,g=e;e.prev!==e.next;)if(f=e.prev,p=e.next,d?s(e,c,u,d):o(e))t.push(f.i/n|0),t.push(e.i/n|0),t.push(p.i/n|0),S(e),e=p.next,g=p.next;else if((e=p)===g){h?1===h?i(e=a(r(e),t,n),t,n,c,u,d,2):2===h&&l(e,t,n,c,u,d):i(r(e),t,n,c,u,d,1);break}}}function o(e){var t=e.prev,n=e,r=e.next;if(g(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,s=r.x,a=t.y,l=n.y,c=r.y,u=i<o?i<s?i:s:o<s?o:s,d=a<l?a<c?a:c:l<c?l:c,A=i>o?i>s?i:s:o>s?o:s,h=a>l?a>c?a:c:l>c?l:c,p=r.next;p!==t;){if(p.x>=u&&p.x<=A&&p.y>=d&&p.y<=h&&f(i,a,o,l,s,c,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function s(e,t,n,r){var i=e.prev,o=e,s=e.next;if(g(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,c=s.x,u=i.y,d=o.y,h=s.y,p=a<l?a<c?a:c:l<c?l:c,m=u<d?u<h?u:h:d<h?d:h,v=a>l?a>c?a:c:l>c?l:c,b=u>d?u>h?u:h:d>h?d:h,y=A(p,m,t,n,r),x=A(v,b,t,n,r),w=e.prevZ,_=e.nextZ;w&&w.z>=y&&_&&_.z<=x;){if(w.x>=p&&w.x<=v&&w.y>=m&&w.y<=b&&w!==i&&w!==s&&f(a,u,l,d,c,h,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,_.x>=p&&_.x<=v&&_.y>=m&&_.y<=b&&_!==i&&_!==s&&f(a,u,l,d,c,h,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;w&&w.z>=y;){if(w.x>=p&&w.x<=v&&w.y>=m&&w.y<=b&&w!==i&&w!==s&&f(a,u,l,d,c,h,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;_&&_.z<=x;){if(_.x>=p&&_.x<=v&&_.y>=m&&_.y<=b&&_!==i&&_!==s&&f(a,u,l,d,c,h,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function a(e,t,n){var i=e;do{var o=i.prev,s=i.next.next;!m(o,s)&&v(o,i,i.next,s)&&x(o,s)&&x(s,o)&&(t.push(o.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),S(i),S(i.next),i=e=s),i=i.next}while(i!==e);return r(i)}function l(e,t,n,o,s,a){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&p(l,c)){var u=w(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,t,n,o,s,a,0),void i(u,t,n,o,s,a,0)}c=c.next}l=l.next}while(l!==e)}function c(e,t){return e.x-t.x}function u(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,c=n,u=n.x,A=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&f(o<A?i:s,o,u,A,o<A?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),x(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&d(n,r)))&&(n=r,h=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var i=w(n,e);return r(i,i.next),r(n,n.next)}function d(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function A(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function h(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function f(e,t,n,r,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(r-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function p(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&v(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||m(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function v(e,t,n,r){var i=y(g(e,t,n)),o=y(g(e,t,r)),s=y(g(n,r,e)),a=y(g(n,r,t));return i!==o&&s!==a||(!(0!==i||!b(e,n,t))||(!(0!==o||!b(e,r,t))||(!(0!==s||!b(n,e,r))||!(0!==a||!b(n,t,r)))))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function y(e){return e>0?1:e<0?-1:0}function x(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function w(e,t){var n=new C(e.i,e.x,e.y),r=new C(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function _(e,t,n,r){var i=new C(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(E(e,0,o,n));if(i)for(var a=0,l=t.length;a<l;a++){var c=t[a]*n,u=a<l-1?t[a+1]*n:e.length;s-=Math.abs(E(e,c,u,n))}var d=0;for(a=0;a<r.length;a+=3){var A=r[a]*n,h=r[a+1]*n,f=r[a+2]*n;d+=Math.abs((e[A]-e[f])*(e[h+1]-e[A+1])-(e[A]-e[h])*(e[f+1]-e[A+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},38:e=>{"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var s=r[o],a=e[s];(i?-1!==t.indexOf(s):t(s,a,e))&&(n[s]=a)}return n}},6895:(e,t,n)=>{var r;!function(i,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),d="function",A=Math.round,h=Math.abs,f=Date.now;function p(e,t,n){return setTimeout(w(e,n),t)}function g(e,t,n){return!!Array.isArray(e)&&(m(e,n[t],n),!0)}function m(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==a)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function v(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}l="function"!==typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var b=v((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===a)&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),y=v((function(e,t){return b(e,t,!0)}),"merge","Use `assign`.");function x(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&l(r,n)}function w(e,t){return function(){return e.apply(t,arguments)}}function _(e,t){return typeof e==d?e.apply(t&&t[0]||a,t):e}function S(e,t){return e===a?t:e}function C(e,t,n){m(T(t),(function(t){e.addEventListener(t,n,!1)}))}function E(e,t,n){m(T(t),(function(t){e.removeEventListener(t,n,!1)}))}function M(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function P(e,t){return e.indexOf(t)>-1}function T(e){return e.trim().split(/\s+/g)}function k(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function B(e){return Array.prototype.slice.call(e,0)}function O(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];k(i,s)<0&&r.push(e[o]),i[o]=s,o++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function I(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:t)in e)return r;o++}return a}var R=1;function L(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var D="ontouchstart"in i,F=I(i,"PointerEvent")!==a,N=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),z="touch",j="mouse",U=25,G=1,V=4,H=8,W=1,Q=2,J=4,K=8,X=16,Y=Q|J,q=K|X,Z=Y|q,$=["x","y"],ee=["clientX","clientY"];function te(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){_(e.options.enable,[e])&&n.handler(t)},this.init()}function ne(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&G&&r-i===0,s=t&(V|H)&&r-i===0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=re(t));i>1&&!n.firstMultiple?n.firstMultiple=re(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=t.center=ie(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=le(l,c),t.distance=ae(l,c),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==G&&o.eventType!==V||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=se(t.deltaX,t.deltaY);var u=oe(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=h(u.x)>h(u.y)?u.x:u.y,t.scale=s?(d=s.pointers,A=r,ae(A[0],A[1],ee)/ae(d[0],d[1],ee)):1,t.rotation=s?function(e,t){return le(t[1],t[0],ee)+le(e[1],e[0],ee)}(s.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,o,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(t.eventType!=H&&(l>U||s.velocity===a)){var c=t.deltaX-s.deltaX,u=t.deltaY-s.deltaY,d=oe(l,c,u);r=d.x,i=d.y,n=h(d.x)>h(d.y)?d.x:d.y,o=se(c,u),e.lastInterval=t}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}(n,t);var d,A;var p=e.element;M(t.srcEvent.target,p)&&(p=t.srcEvent.target);t.target=p}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function re(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:A(e.pointers[n].clientX),clientY:A(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:ie(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ie(e){var t=e.length;if(1===t)return{x:A(e[0].clientX),y:A(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:A(n/t),y:A(r/t)}}function oe(e,t,n){return{x:t/e||0,y:n/e||0}}function se(e,t){return e===t?W:h(e)>=h(t)?e<0?Q:J:t<0?K:X}function ae(e,t,n){n||(n=$);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function le(e,t,n){n||(n=$);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}te.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(L(this.element),this.evWin,this.domHandler)}};var ce={mousedown:G,mousemove:2,mouseup:V},ue="mousedown",de="mousemove mouseup";function Ae(){this.evEl=ue,this.evWin=de,this.pressed=!1,te.apply(this,arguments)}x(Ae,te,{handler:function(e){var t=ce[e.type];t&G&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=V),this.pressed&&(t&V&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:j,srcEvent:e}))}});var he={pointerdown:G,pointermove:2,pointerup:V,pointercancel:H,pointerout:H},fe={2:z,3:"pen",4:j,5:"kinect"},pe="pointerdown",ge="pointermove pointerup pointercancel";function me(){this.evEl=pe,this.evWin=ge,te.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(pe="MSPointerDown",ge="MSPointerMove MSPointerUp MSPointerCancel"),x(me,te,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=he[r],o=fe[e.pointerType]||e.pointerType,s=o==z,a=k(t,e.pointerId,"pointerId");i&G&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):i&(V|H)&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var ve={touchstart:G,touchmove:2,touchend:V,touchcancel:H};function be(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,te.apply(this,arguments)}function ye(e,t){var n=B(e.touches),r=B(e.changedTouches);return t&(V|H)&&(n=O(n.concat(r),"identifier",!0)),[n,r]}x(be,te,{handler:function(e){var t=ve[e.type];if(t===G&&(this.started=!0),this.started){var n=ye.call(this,e,t);t&(V|H)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:z,srcEvent:e})}}});var xe={touchstart:G,touchmove:2,touchend:V,touchcancel:H},we="touchstart touchmove touchend touchcancel";function _e(){this.evTarget=we,this.targetIds={},te.apply(this,arguments)}function Se(e,t){var n=B(e.touches),r=this.targetIds;if(t&(2|G)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=B(e.changedTouches),a=[],l=this.target;if(o=n.filter((function(e){return M(e.target,l)})),t===G)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),t&(V|H)&&delete r[s[i].identifier],i++;return a.length?[O(o.concat(a),"identifier",!0),a]:void 0}x(_e,te,{handler:function(e){var t=xe[e.type],n=Se.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:z,srcEvent:e})}});var Ce=2500;function Ee(){te.apply(this,arguments);var e=w(this.handler,this);this.touch=new _e(this.manager,e),this.mouse=new Ae(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Me(e,t){e&G?(this.primaryTouch=t.changedPointers[0].identifier,Pe.call(this,t)):e&(V|H)&&Pe.call(this,t)}function Pe(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),Ce)}}function Te(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}x(Ee,te,{handler:function(e,t,n){var r=n.pointerType==z,i=n.pointerType==j;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Me.call(this,t,n);else if(i&&Te.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ke=I(u.style,"touchAction"),Be=ke!==a,Oe="compute",Ie="auto",Re="manipulation",Le="none",De="pan-x",Fe="pan-y",Ne=function(){if(!Be)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function ze(e,t){this.manager=e,this.set(t)}ze.prototype={set:function(e){e==Oe&&(e=this.compute()),Be&&this.manager.element.style&&Ne[e]&&(this.manager.element.style[ke]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return m(this.manager.recognizers,(function(t){_(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(P(e,Le))return Le;var t=P(e,De),n=P(e,Fe);if(t&&n)return Le;if(t||n)return t?De:Fe;if(P(e,Re))return Re;return Ie}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=P(r,Le)&&!Ne[Le],o=P(r,Fe)&&!Ne[Fe],s=P(r,De)&&!Ne[De];if(i){var a=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return i||o&&n&Y||s&&n&q?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var je=1,Ue=32;function Ge(e){this.options=l({},this.defaults,e||{}),this.id=R++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=je,this.simultaneous={},this.requireFail=[]}function Ve(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function He(e){return e==X?"down":e==K?"up":e==Q?"left":e==J?"right":""}function We(e,t){var n=t.manager;return n?n.get(e):e}function Qe(){Ge.apply(this,arguments)}function Je(){Qe.apply(this,arguments),this.pX=null,this.pY=null}function Ke(){Qe.apply(this,arguments)}function Xe(){Ge.apply(this,arguments),this._timer=null,this._input=null}function Ye(){Qe.apply(this,arguments)}function qe(){Qe.apply(this,arguments)}function Ze(){Ge.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function $e(e,t){return(t=t||{}).recognizers=S(t.recognizers,$e.defaults.preset),new et(e,t)}Ge.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=We(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)||(e=We(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===k(t,e=We(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=We(e,this);var t=k(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Ve(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Ve(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Ue},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Ue|je)))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!_(this.options.enable,[this,t]))return this.reset(),void(this.state=Ue);56&this.state&&(this.state=je),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},x(Qe,Ge,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(n&H||!i)?16|t:r||i?n&V?8|t:2&t?4|t:2:Ue}}),x(Je,Qe,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var e=this.options.direction,t=[];return e&Y&&t.push(Fe),e&q&&t.push(De),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,s=e.deltaY;return i&t.direction||(t.direction&Y?(i=0===o?W:o<0?Q:J,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===s?W:s<0?K:X,n=s!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Qe.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=He(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),x(Ke,Qe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Le]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),x(Xe,Ge,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ie]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(V|H)&&!i)this.reset();else if(e.eventType&G)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),t.time,this);else if(e.eventType&V)return 8;return Ue},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&V?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),x(Ye,Qe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Le]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),x(qe,Qe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Y|q,pointers:1},getTouchAction:function(){return Je.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Y|q)?t=e.overallVelocity:n&Y?t=e.overallVelocityX:n&q&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(t)>this.options.velocity&&e.eventType&V},emit:function(e){var t=He(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),x(Ze,Ge,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Re]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&G&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=V)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||ae(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Ue},failTimeout:function(){return this._timer=p((function(){this.state=Ue}),this.options.interval,this),Ue},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),$e.VERSION="2.0.7",$e.defaults={domEvents:!1,touchAction:Oe,enable:!0,inputTarget:null,inputClass:null,preset:[[Ye,{enable:!1}],[Ke,{enable:!1},["rotate"]],[qe,{direction:Y}],[Je,{direction:Y},["swipe"]],[Ze],[Ze,{event:"doubletap",taps:2},["tap"]],[Xe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function et(e,t){var n;this.options=l({},$e.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(F?me:N?_e:D?Ee:Ae))(n,ne),this.touchAction=new ze(this,this.options.touchAction),tt(this,!0),m(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function tt(e,t){var n,r=e.element;r.style&&(m(e.options.cssProps,(function(i,o){n=I(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}et.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Ge)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=k(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==a&&t!==a){var n=this.handlers;return m(T(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==a){var n=this.handlers;return m(T(e),(function(e){t?n[e]&&n[e].splice(k(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&tt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l($e,{INPUT_START:G,INPUT_MOVE:2,INPUT_END:V,INPUT_CANCEL:H,STATE_POSSIBLE:je,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ue,DIRECTION_NONE:W,DIRECTION_LEFT:Q,DIRECTION_RIGHT:J,DIRECTION_UP:K,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:q,DIRECTION_ALL:Z,Manager:et,Input:te,TouchAction:ze,TouchInput:_e,MouseInput:Ae,PointerEventInput:me,TouchMouseInput:Ee,SingleTouchInput:be,Recognizer:Ge,AttrRecognizer:Qe,Tap:Ze,Pan:Je,Swipe:qe,Pinch:Ke,Rotate:Ye,Press:Xe,on:C,off:E,each:m,merge:y,extend:b,assign:l,inherit:x,bindFn:w,prefixed:I}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=$e,(r=function(){return $e}.call(t,n,t,e))===a||(e.exports=r)}(window,document)},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=h(n);i&&i!==f&&e(t,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(t),p=l(n),g=0;g<s.length;++g){var m=s[g];if(!o[m]&&(!r||!r[m])&&(!p||!p[m])&&(!a||!a[m])){var v=A(n,m);try{c(t,m,v)}catch(b){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,A=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,y=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case h:return e;default:switch(e=e&&e.$$typeof){case c:case A:case g:case p:case l:return e;default:return t}}case i:return t}}}function w(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=A,t.Fragment=o,t.Lazy=g,t.Memo=p,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return w(e)||x(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===A},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===p},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===s||e===h||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===p||e.$$typeof===l||e.$$typeof===c||e.$$typeof===A||e.$$typeof===v||e.$$typeof===b||e.$$typeof===y||e.$$typeof===m)},t.typeOf=x},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},9370:(e,t,n)=>{"use strict";const r=n(7491),i=n(5707),o=n(1289),s=n(38),a=Symbol("encodeFragmentIdentifier");function l(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?i(e):e}function d(e){return Array.isArray(e)?e.sort():"object"===typeof e?d(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function A(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=A(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return(e,n,r)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"===typeof n&&n.includes(e.arrayFormatSeparator),o="string"===typeof n&&!i&&u(n,e).includes(e.arrayFormatSeparator);n=o?u(n,e):n;const s=i||o?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);r[t]=s};case"bracket-separator":return(t,n,r)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(r[t]=n?u(n,e):n);const o=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],o):r[t]=o};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!==typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const i of e.split("&")){if(""===i)continue;let[e,s]=o(t.decode?i.replace(/\+/g," "):i,"=");s=void 0===s?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:u(s,t),n(u(e,t),s,r)}for(const i of Object.keys(r)){const e=r[i];if("object"===typeof e&&null!==e)for(const n of Object.keys(e))e[n]=f(e[n],t);else r[i]=f(e,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=d(n):e[t]=n,e}),Object.create(null))}t.extract=h,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>{return t.skipNull&&(null===(r=e[n])||void 0===r)||t.skipEmptyString&&""===e[n];var r},r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[c(t,e),"[",i,"]"].join("")]:[...n,[c(t,e),"[",c(i,e),"]=",c(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[c(t,e),"[]"].join("")]:[...n,[c(t,e),"[]=",c(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[c(t,e),":list="].join("")]:[...n,[c(t,e),":list=",c(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[c(n,e),t,c(i,e)].join("")]:[[r,c(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,c(t,e)]:[...n,[c(t,e),"=",c(r,e)].join("")]}}(t),i={};for(const s of Object.keys(e))n(s)||(i[s]=e[s]);const o=Object.keys(i);return!1!==t.sort&&o.sort(t.sort),o.map((n=>{const i=e[n];return void 0===i?"":null===i?c(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?c(n,t)+"[]":i.reduce(r(n),[]).join("&"):c(n,t)+"="+c(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(h(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const r=A(e.url).split("?")[0]||"",i=t.extract(e.url),o=t.parse(i,{sort:!1}),s=Object.assign(o,e.query);let l=t.stringify(s,n);l&&(l="?".concat(l));let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u="#".concat(n[a]?c(e.fragmentIdentifier,n):e.fragmentIdentifier)),"".concat(r).concat(l).concat(u)},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[a]:!1},r);const{url:i,query:o,fragmentIdentifier:l}=t.parseUrl(e,r);return t.stringifyUrl({url:i,query:s(o,n),fragmentIdentifier:l},r)},t.exclude=(e,n,r)=>{const i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,i,r)}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function p(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(h,e)&&(A.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,v);g[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),M=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D,F=Object.assign;function N(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function U(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function Ae(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,_e=null,Se=null;function Ce(e){if(e=bi(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Ee(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Me(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Pe(e,t){return e(t)}function Te(){}var ke=!1;function Be(e,t,n){if(ke)return e(t,n);ke=!0;try{return Pe(e,t,n)}finally{ke=!1,(null!==_e||null!==Se)&&(Te(),Me())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Ie=!1}function Le(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Fe=null,Ne=!1,ze=null,je={onError:function(e){De=!0,Fe=e}};function Ue(e,t,n,r,i,o,s,a,l){De=!1,Fe=null,Le.apply(je,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ge(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var Je=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function At(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,_t,St,Ct,Et=!1,Mt=[],Pt=null,Tt=null,kt=null,Bt=new Map,Ot=new Map,It=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Dt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ye=r,n.target.dispatchEvent(r),ye=null,t.shift()}return!0}function zt(e,t,n){Nt(e)&&n.delete(t)}function jt(){Et=!1,null!==Pt&&Nt(Pt)&&(Pt=null),null!==Tt&&Nt(Tt)&&(Tt=null),null!==kt&&Nt(kt)&&(kt=null),Bt.forEach(zt),Ot.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Gt(e){function t(t){return Ut(t,e)}if(0<Mt.length){Ut(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pt&&Ut(Pt,e),null!==Tt&&Ut(Tt,e),null!==kt&&Ut(kt,e),Bt.forEach(t),Ot.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Ft(n),null===n.blockedOn&&It.shift()}var Vt=y.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Jt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Qt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Jt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Jt(e,t,n,r){if(Ht){var i=Xt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Pt=Dt(Pt,e,t,n,r,i),!0;case"dragenter":return Tt=Dt(Tt,e,t,n,r,i),!0;case"mouseover":return kt=Dt(kt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Bt.set(o,Dt(Bt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Dt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=Xt(e,t,n,r))&&Hr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Xt(e,t,n,r){if(Kt=null,null!==(e=vi(e=xe(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var qt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in qt?qt.value:qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=F({},cn,{view:0,detail:0}),An=on(dn),hn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(hn),pn=on(F({},hn,{dataTransfer:0})),gn=on(F({},dn,{relatedTarget:0})),mn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),yn=on(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Cn(){return Sn}var En=F({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=on(En),Pn=on(F({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),kn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=F({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Bn),In=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Dn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Rn||Ln&&8<Ln&&11>=Ln),Nn=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Jn=null;function Kn(e){Nr(e,0)}function Xn(e){if(J(yi(e)))return e}function Yn(e,t){if("change"===e)return t}var qn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Jn=Qn=null)}function nr(e){if("value"===e.propertyName&&Xn(Jn)){var t=[];Wn(t,Jn,e,xe(e)),Be(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Jn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Jn)}function or(e,t){if("click"===e)return Xn(t)}function sr(e,t){if("input"===e||"change"===e)return Xn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ar(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=Ar(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,vr=null,br=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Qr(mr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},Sr={};function Cr(e){if(_r[e])return _r[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Cr("animationend"),Mr=Cr("animationiteration"),Pr=Cr("animationstart"),Tr=Cr("transitionend"),kr=new Map,Br="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){kr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Br.length;Ir++){var Rr=Br[Ir];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Er,"onAnimationEnd"),Or(Mr,"onAnimationIteration"),Or(Pr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ue.apply(this,arguments),De){if(!De)throw Error(o(198));var u=Fe;De=!1,Fe=null,Ne||(Ne=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,c),o=l}}}if(Ne)throw e=ze,Ne=!1,ze=null,e}function zr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Ur]){e[Ur]=!0,s.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,jr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Qt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Be((function(){var r=o,i=xe(n),s=[];e:{var a=kr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Er:case Mr:case Pr:l=mn;break;case Tr:l=kn;break;case"scroll":l=An;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var u=0!==(4&t),d=!u&&"scroll"===e,A=u?null!==a?a+"Capture":null:a;u=[];for(var h,f=r;null!==f;){var p=(h=f).stateNode;if(5===h.tag&&null!==p&&(h=p,null!==A&&(null!=(p=Oe(f,A))&&u.push(Wr(f,p,h)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,p="onMouseLeave",A="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,p="onPointerLeave",A="onPointerEnter",f="pointer"),d=null==l?a:yi(l),h=null==c?a:yi(c),(a=new u(p,f+"leave",l,n,i)).target=d,a.relatedTarget=h,p=null,vi(i)===r&&((u=new u(A,f+"enter",c,n,i)).target=h,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(A=c,f=0,h=u=l;h;h=Jr(h))f++;for(h=0,p=A;p;p=Jr(p))h++;for(;0<f-h;)u=Jr(u),f--;for(;0<h-f;)A=Jr(A),h--;for(;f--;){if(u===A||null!==A&&u===A.alternate)break e;u=Jr(u),A=Jr(A)}u=null}else u=null;null!==l&&Kr(s,a,l,u,!1),null!==c&&null!==d&&Kr(s,d,c,u,!0)}if("select"===(l=(a=r?yi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Hn(a))if(qn)g=sr;else{g=ir;var m=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(m&&m(e,a,r),"focusout"===e&&(m=a._wrapperState)&&m.controlled&&"number"===a.type&&ee(a,"number",a.value)),m=r?yi(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,vr=null);break;case"focusout":vr=mr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,yr(s,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":yr(s,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(v=en()):(Zt="value"in(qt=i)?qt.value:qt.textContent,Gn=!0)),0<(m=Qr(r,b)).length&&(b=new yn(b,e,null,n,i),s.push({event:b,listeners:m}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Nn);case"textInput":return(e=t.data)===Nn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Rn&&jn(e,t)?(e=en(),$t=Zt=qt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new yn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Nr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Oe(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Oe(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=qr(t),qr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),Ai="__reactFiber$"+di,hi="__reactProps$"+di,fi="__reactContainer$"+di,pi="__reactEvents$"+di,gi="__reactListeners$"+di,mi="__reactHandles$"+di;function vi(e){var t=e[Ai];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[Ai]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[Ai])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[Ai]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[hi]||null}var wi=[],_i=-1;function Si(e){return{current:e}}function Ci(e){0>_i||(e.current=wi[_i],wi[_i]=null,_i--)}function Ei(e,t){_i++,wi[_i]=e.current,e.current=t}var Mi={},Pi=Si(Mi),Ti=Si(!1),ki=Mi;function Bi(e,t){var n=e.type.contextTypes;if(!n)return Mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){Ci(Ti),Ci(Pi)}function Ri(e,t,n){if(Pi.current!==Mi)throw Error(o(168));Ei(Pi,t),Ei(Ti,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return F({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mi,ki=Pi.current,Ei(Pi,e),Ei(Ti,Ti.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,ki),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ti),Ci(Pi),Ei(Pi,e)):Ci(Ti),Ei(Ti,n)}var Ni=null,zi=!1,ji=!1;function Ui(e){null===Ni?Ni=[e]:Ni.push(e)}function Gi(){if(!ji&&null!==Ni){ji=!0;var e=0,t=bt;try{var n=Ni;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ni=null,zi=!1}catch(i){throw null!==Ni&&(Ni=Ni.slice(e+1)),Je($e,Gi),i}finally{bt=t,ji=!1}}return null}var Vi=[],Hi=0,Wi=null,Qi=0,Ji=[],Ki=0,Xi=null,Yi=1,qi="";function Zi(e,t){Vi[Hi++]=Qi,Vi[Hi++]=Wi,Wi=e,Qi=t}function $i(e,t,n){Ji[Ki++]=Yi,Ji[Ki++]=qi,Ji[Ki++]=Xi,Xi=e;var r=Yi;e=qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-st(t)+i|n<<i|r,qi=o+e}else Yi=1<<o|n<<i|r,qi=e}function eo(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function to(e){for(;e===Wi;)Wi=Vi[--Hi],Vi[Hi]=null,Qi=Vi[--Hi],Vi[Hi]=null;for(;e===Xi;)Xi=Ji[--Ki],Ji[Ki]=null,qi=Ji[--Ki],Ji[Ki]=null,Yi=Ji[--Ki],Ji[Ki]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function Ao(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw ho(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function po(e){null===oo?oo=[e]:oo.push(e)}var go=y.ReactCurrentBatchConfig;function mo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vo=Si(null),bo=null,yo=null,xo=null;function wo(){xo=yo=bo=null}function _o(e){var t=vo.current;Ci(vo),e._currentValue=t}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Co(e,t){bo=e,xo=yo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function Eo(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===yo){if(null===bo)throw Error(o(308));yo=e,bo.dependencies={lanes:0,firstContext:e}}else yo=yo.next=e;return t}var Mo=null;function Po(e){null===Mo?Mo=[e]:Mo.push(e)}function To(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Po(t)):(n.next=i.next,i.next=n),t.interleaved=n,ko(e,r)}function ko(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Bo=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ro(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ko(e,n)}return null===(i=r.interleaved)?(t.next=t,Po(r)):(t.next=i.next,i.next=t),r.interleaved=t,ko(e,n)}function Do(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function No(e,t,n,r){var i=e.updateQueue;Bo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var A=a.lane,h=a.eventTime;if((r&A)===A){null!==u&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,p=a;switch(A=t,h=n,p.tag){case 1:if("function"===typeof(f=p.payload)){d=f.call(h,d,A);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(A="function"===typeof(f=p.payload)?f.call(h,d,A):f)||void 0===A)break e;d=F({},d,A);break e;case 2:Bo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(A=i.effects)?i.effects=[a]:A.push(a))}else h={eventTime:h,lane:A,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,s|=A;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(A=a).next,A.next=null,i.lastBaseUpdate=A,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=d}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Uo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Go={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Ro(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(rc(t,e,i,r),Do(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Ro(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(rc(t,e,i,r),Do(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ro(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(rc(t,e,r,n),Do(t,e,r))}};function Vo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Ho(e,t,n){var r=!1,i=Mi,o=t.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(i=Oi(t)?ki:Pi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Bi(e,i):Mi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Go,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function Qo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Eo(o):(o=Oi(t)?ki:Pi.current,i.context=Bi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Go.enqueueReplaceState(i,i.state,null),No(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Jo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ko(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Nc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Xo(o)===t.type)?((r=i(t,n.props)).ref=Jo(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Jo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function A(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Nc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Jo(e,null,t),n.return=e,n;case w:return(t=zc(t,e.mode,n)).return=e,t;case O:return A(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Dc(t,e.mode,n,null)).return=e,t;Ko(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case O:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);Ko(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);Ko(t,r)}return null}function p(i,o,a,l){for(var c=null,u=null,d=o,p=o=0,g=null;null!==d&&p<a.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var m=h(i,d,a[p],l);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m,d=g}if(p===a.length)return n(i,d),io&&Zi(i,p),c;if(null===d){for(;p<a.length;p++)null!==(d=A(i,a[p],l))&&(o=s(d,o,p),null===u?c=d:u.sibling=d,u=d);return io&&Zi(i,p),c}for(d=r(i,d);p<a.length;p++)null!==(g=f(d,i,p,a[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Zi(i,p),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,p=a,g=a=0,m=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=h(i,p,v.value,c);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(i,p),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,p=m}if(v.done)return n(i,p),io&&Zi(i,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=A(i,v.value,c))&&(a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return io&&Zi(i,g),u}for(p=r(i,p);!v.done;g++,v=l.next())null!==(v=f(p,i,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach((function(e){return t(i,e)})),io&&Zi(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===_&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===_){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Xo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Jo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===_?((o=Dc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Lc(s.type,s.key,s.props,null,r.mode,l)).ref=Jo(r,o,s),l.return=r,r=l)}return a(r);case w:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(s,r.mode,l)).return=r,r=o}return a(r);case O:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return p(r,o,s,l);if(L(s))return g(r,o,s,l);Ko(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Nc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var qo=Yo(!0),Zo=Yo(!1),$o={},es=Si($o),ts=Si($o),ns=Si($o);function rs(e){if(e===$o)throw Error(o(174));return e}function is(e,t){switch(Ei(ns,t),Ei(ts,e),Ei(es,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(es),Ei(es,t)}function os(){Ci(es),Ci(ts),Ci(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ei(ts,e),Ei(es,n))}function as(e){ts.current===e&&(Ci(es),Ci(ts))}var ls=Si(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function ds(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var As=y.ReactCurrentDispatcher,hs=y.ReactCurrentBatchConfig,fs=0,ps=null,gs=null,ms=null,vs=!1,bs=!1,ys=0,xs=0;function ws(){throw Error(o(321))}function _s(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Ss(e,t,n,r,i,s){if(fs=s,ps=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,As.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bs){s=0;do{if(bs=!1,ys=0,25<=s)throw Error(o(301));s+=1,ms=gs=null,t.updateQueue=null,As.current=ca,e=n(r,i)}while(bs)}if(As.current=sa,t=null!==gs&&null!==gs.next,fs=0,ms=gs=ps=null,vs=!1,t)throw Error(o(300));return e}function Cs(){var e=0!==ys;return ys=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ms?ps.memoizedState=ms=e:ms=ms.next=e,ms}function Ms(){if(null===gs){var e=ps.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===ms?ps.memoizedState:ms.next;if(null!==t)ms=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ms?ps.memoizedState=ms=e:ms=ms.next=e}return ms}function Ps(e,t){return"function"===typeof t?t(e):t}function Ts(e){var t=Ms(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((fs&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var A={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=A,a=r):c=c.next=A,ps.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ya=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ps.lanes|=s,Fl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ks(e){var t=Ms(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ya=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Bs(){}function Os(e,t){var n=ps,r=Ms(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ya=!0),r=r.queue,Hs(Ls.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ms&&1&ms.memoizedState.tag){if(n.flags|=2048,zs(9,Rs.bind(null,n,r,i,t),void 0,null),null===kl)throw Error(o(349));0!==(30&fs)||Is(n,t,i)}return i}function Is(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Rs(e,t,n,r){t.value=n,t.getSnapshot=r,Ds(t)&&Fs(e)}function Ls(e,t,n){return n((function(){Ds(t)&&Fs(e)}))}function Ds(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fs(e){var t=ko(e,1);null!==t&&rc(t,e,1,-1)}function Ns(e){var t=Es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ps,e),[t.memoizedState,e]}function zs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function js(){return Ms().memoizedState}function Us(e,t,n,r){var i=Es();ps.flags|=e,i.memoizedState=zs(1|t,n,void 0,void 0===r?null:r)}function Gs(e,t,n,r){var i=Ms();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&_s(r,s.deps))return void(i.memoizedState=zs(t,n,o,r))}ps.flags|=e,i.memoizedState=zs(1|t,n,o,r)}function Vs(e,t){return Us(8390656,8,e,t)}function Hs(e,t){return Gs(2048,8,e,t)}function Ws(e,t){return Gs(4,2,e,t)}function Qs(e,t){return Gs(4,4,e,t)}function Js(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ks(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Gs(4,4,Js.bind(null,t,e),n)}function Xs(){}function Ys(e,t){var n=Ms();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_s(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qs(e,t){var n=Ms();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_s(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n):(ar(n,t)||(n=pt(),ps.lanes|=n,Fl|=n,e.baseState=!0),t)}function $s(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=hs.transition;hs.transition={};try{e(!1),t()}finally{bt=n,hs.transition=r}}function ea(){return Ms().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=To(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Po(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=To(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===ps||null!==t&&t===ps}function ia(e,t){bs=vs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var sa={readContext:Eo,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},aa={readContext:Eo,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:Eo,useEffect:Vs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4194308,4,Js.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Us(4194308,4,e,t)},useInsertionEffect:function(e,t){return Us(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Es();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,ps,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ns,useDebugValue:Xs,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ns(!1),t=e[0];return e=$s.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ps,i=Es();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===kl)throw Error(o(349));0!==(30&fs)||Is(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Vs(Ls.bind(null,r,s,e),[e]),r.flags|=2048,zs(9,Rs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Es(),t=kl.identifierPrefix;if(io){var n=qi;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=ys++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Eo,useCallback:Ys,useContext:Eo,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:Ws,useLayoutEffect:Qs,useMemo:qs,useReducer:Ts,useRef:js,useState:function(){return Ts(Ps)},useDebugValue:Xs,useDeferredValue:function(e){return Zs(Ms(),gs.memoizedState,e)},useTransition:function(){return[Ts(Ps)[0],Ms().memoizedState]},useMutableSource:Bs,useSyncExternalStore:Os,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Eo,useCallback:Ys,useContext:Eo,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:Ws,useLayoutEffect:Qs,useMemo:qs,useReducer:ks,useRef:js,useState:function(){return ks(Ps)},useDebugValue:Xs,useDeferredValue:function(e){var t=Ms();return null===gs?t.memoizedState=e:Zs(t,gs.memoizedState,e)},useTransition:function(){return[ks(Ps)[0],Ms().memoizedState]},useMutableSource:Bs,useSyncExternalStore:Os,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function Aa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Ql=r),Aa(0,t)},n}function pa(e,t,n){(n=Ro(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Aa(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){Aa(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ro(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=y.ReactCurrentOwner,ya=!1;function xa(e,t,n,r){t.child=null===e?Zo(t,null,n,r):qo(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var o=t.ref;return Co(t,i),r=Ss(e,t,n,r,o,i),n=Cs(),null===e||ya?(io&&n&&eo(t),t.flags|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function _a(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ic(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Rc(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ya=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ya=!0)}}return Ma(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Rl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Rl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ei(Rl,Il),Il|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ei(Rl,Il),Il|=r;return xa(e,t,i,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ma(e,t,n,r,i){var o=Oi(n)?ki:Pi.current;return o=Bi(t,o),Co(t,i),n=Ss(e,t,n,r,o,i),r=Cs(),null===e||ya?(io&&r&&eo(t),t.flags|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Pa(e,t,n,r,i){if(Oi(n)){var o=!0;Di(t)}else o=!1;if(Co(t,i),null===t.stateNode)Ha(e,t),Ho(t,n,r),Qo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Eo(c):c=Bi(t,c=Oi(n)?ki:Pi.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Wo(t,s,r,c),Bo=!1;var A=t.memoizedState;s.state=A,No(t,r,s,i),l=t.memoizedState,a!==r||A!==l||Ti.current||Bo?("function"===typeof u&&(Uo(t,n,u,r),l=t.memoizedState),(a=Bo||Vo(t,n,a,r,A,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Io(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:mo(t.type,a),s.props=c,d=t.pendingProps,A=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Eo(l):l=Bi(t,l=Oi(n)?ki:Pi.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||A!==l)&&Wo(t,s,r,l),Bo=!1,A=t.memoizedState,s.state=A,No(t,r,s,i);var f=t.memoizedState;a!==d||A!==f||Ti.current||Bo?("function"===typeof h&&(Uo(t,n,h,r),f=t.memoizedState),(c=Bo||Vo(t,n,c,r,A,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),r=!1)}return Ta(e,t,n,r,o,i)}function Ta(e,t,n,r,i,o){Ea(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Wa(e,t,o);r=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=qo(t,e.child,null,o),t.child=qo(t,null,a,o)):xa(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function ka(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),is(e,t.containerInfo)}function Ba(e,t,n,r,i){return fo(),po(i),t.flags|=256,xa(e,t,n,r),t.child}var Oa,Ia,Ra,La,Da={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Na(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ei(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Dc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Da,e):za(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=da(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(s=Dc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&qo(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Da,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,ja(e,t,a,r=da(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ya||l){if(null!==(r=kl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,ko(e,i),rc(r,e,i,-1))}return gc(),ja(e,t,a,r=da(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ji[Ki++]=Yi,Ji[Ki++]=qi,Ji[Ki++]=Xi,Yi=e.id,qi=e.overflow,Xi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Rc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&po(r),qo(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function Ga(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Va(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,o);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ja(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ja(t),null;case 1:case 17:return Oi(t.type)&&Ii(),Ja(t),null;case 3:return r=t.stateNode,os(),Ci(Ti),Ci(Pi),ds(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ao(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ia(e,t),Ja(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ja(t),null}if(e=rs(es.current),Ao(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ai]=t,r[hi]=s,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":ie(r,s),zr("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":Q(r),$(r,s,!0);break;case"textarea":Q(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Ai]=t,e[hi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&Ae(e,u):"number"===typeof u&&Ae(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":Q(e),$(e,r,!1);break;case"textarea":Q(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ja(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),Ao(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ai]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Ai]=t,t.stateNode=r}return Ja(t),null;case 13:if(Ci(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),fo(),t.flags|=98560,s=!1;else if(s=Ao(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[Ai]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ja(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ja(t),null);case 4:return os(),Ia(e,t),null===e&&Gr(t.stateNode.containerInfo),Ja(t),null;case 10:return _o(t.type._context),Ja(t),null;case 19:if(Ci(ls),null===(s=t.memoizedState))return Ja(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Qa(s,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Qa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&qe()>Vl&&(t.flags|=128,r=!0,Qa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ja(t),null}else 2*qe()-s.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Qa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=qe(),t.sibling=null,n=ls.current,Ei(ls,r?1&n|2:1&n),t):(Ja(t),null);case 22:case 23:return Ac(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Ja(t),6&t.subtreeFlags&&(t.flags|=8192)):Ja(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xa(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ci(Ti),Ci(Pi),ds(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ci(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ls),null;case 4:return os(),null;case 10:return _o(t.type._context),null;case 22:case 23:return Ac(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ia=function(){},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=X(e,i),r=X(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,qa=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Ai],delete t[hi],delete t[pi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,Al=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:qa||el(n,t);case 6:var r=dl,i=Al;dl=null,hl(e,t,n),Al=i,null!==(dl=r)&&(Al?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(Al?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Gt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=Al,dl=n.stateNode.containerInfo,Al=!0,hl(e,t,n),dl=r,Al=i;break;case 0:case 11:case 14:case 15:if(!qa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!qa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(qa=(r=qa)||null!==n.memoizedState,hl(e,t,n),qa=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,Al=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===dl)throw Error(o(160));fl(s,a,i),dl=null,Al=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Cc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{Ae(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&q(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],A=c[a+1];"style"===d?ge(i,A):"dangerouslySetInnerHTML"===d?de(i,A):"children"===d?Ae(i,A):b(i,d,A,u)}switch(l){case"input":Z(i,s);break;case"textarea":oe(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):h!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[hi]=s}catch(g){Cc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Cc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Gl=qe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(qa=(u=qa)||d,gl(t,e),qa=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($a=e,d=e.child;null!==d;){for(A=$a=d;null!==$a;){switch(f=(h=$a).child,h.tag){case 0:case 11:case 14:case 15:rl(4,h,h.return);break;case 1:el(h,h.return);var p=h.stateNode;if("function"===typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:el(h,h.return);break;case 22:if(null!==h.memoizedState){wl(A);continue}}null!==f?(f.return=h,$a=f):wl(A)}d=d.sibling}e:for(d=null,A=e;;){if(5===A.tag){if(null===d){d=A;try{i=A.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=A.stateNode,a=void 0!==(c=A.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",a))}catch(g){Cc(e,e.return,g)}}}else if(6===A.tag){if(null===d)try{A.stateNode.nodeValue=u?"":A.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==A.tag&&23!==A.tag||null===A.memoizedState||A===e)&&null!==A.child){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;null===A.sibling;){if(null===A.return||A.return===e)break e;d===A&&(d=null),A=A.return}d===A&&(d=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:gl(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(Ae(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){$a=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||qa;a=Ya;var c=qa;if(Ya=s,(qa=l)&&!c)for($a=i;null!==$a;)l=(s=$a).child,22===s.tag&&null!==s.memoizedState?_l(i):null!==l?(l.return=s,$a=l):_l(i);for(;null!==o;)$a=o,yl(o,t,n),o=o.sibling;$a=i,Ya=a,qa=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$a=o):xl(e)}}function xl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&zo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var A=d.dehydrated;null!==A&&Gt(A)}}}break;default:throw Error(o(163))}qa||512&t.flags&&ol(t)}catch(h){Cc(t,t.return,h)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function wl(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function _l(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cc(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Cc(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Cc(t,s,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sl,Cl=Math.ceil,El=y.ReactCurrentDispatcher,Ml=y.ReactCurrentOwner,Pl=y.ReactCurrentBatchConfig,Tl=0,kl=null,Bl=null,Ol=0,Il=0,Rl=Si(0),Ll=0,Dl=null,Fl=0,Nl=0,zl=0,jl=null,Ul=null,Gl=0,Vl=1/0,Hl=null,Wl=!1,Ql=null,Jl=null,Kl=!1,Xl=null,Yl=0,ql=0,Zl=null,$l=-1,ec=0;function tc(){return 0!==(6&Tl)?qe():-1!==$l?$l:$l=qe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Ol?Ol&-Ol:null!==go.transition?(0===ec&&(ec=pt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<ql)throw ql=0,Zl=null,Error(o(185));mt(e,n,r),0!==(2&Tl)&&e===kl||(e===kl&&(0===(2&Tl)&&(Nl|=n),4===Ll&&lc(e,Ol)),ic(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Vl=qe()+500,zi&&Gi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ht(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=At(e,e===kl?Ol:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){zi=!0,Ui(e)}(cc.bind(null,e)):Ui(cc.bind(null,e)),si((function(){0===(6&Tl)&&Gi()})),n=null;else{switch(yt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=kc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if($l=-1,ec=0,0!==(6&Tl))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=At(e,e===kl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Tl;Tl|=2;var s=pc();for(kl===e&&Ol===t||(Hl=null,Vl=qe()+500,hc(e,t));;)try{bc();break}catch(l){fc(e,l)}wo(),El.current=s,Tl=i,null!==Bl?t=0:(kl=null,Ol=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=sc(e,i))),1===t)throw n=Dl,hc(e,0),lc(e,r),ic(e,qe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(s=ft(e))&&(r=s,t=sc(e,s))),1===t))throw n=Dl,hc(e,0),lc(e,r),ic(e,qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Ul,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Gl+500-qe())){if(0!==At(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Ul,Hl),t);break}wc(e,Ul,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Ul,Hl),r);break}wc(e,Ul,Hl);break;default:throw Error(o(329))}}}return ic(e,qe()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~zl,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Tl))throw Error(o(327));_c();var t=At(e,0);if(0===(1&t))return ic(e,qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Dl,hc(e,0),lc(e,t),ic(e,qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Hl),ic(e,qe()),null}function uc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Vl=qe()+500,zi&&Gi())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Tl=t))&&Gi()}}function Ac(){Il=Rl.current,Ci(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Bl)for(n=Bl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:os(),Ci(Ti),Ci(Pi),ds();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ci(ls);break;case 10:_o(r.type._context);break;case 22:case 23:Ac()}n=n.return}if(kl=e,Bl=e=Rc(e.current,null),Ol=Il=t,Ll=0,Dl=null,zl=Nl=Fl=0,Ul=jl=null,null!==Mo){for(t=0;t<Mo.length;t++)if(null!==(r=(n=Mo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Mo=null}return e}function fc(e,t){for(;;){var n=Bl;try{if(wo(),As.current=sa,vs){for(var r=ps.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vs=!1}if(fs=0,ms=gs=ps=null,bs=!1,ys=0,Ml.current=null,null===n||null===n.return){Ll=1,Dl=t,Bl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,A=d.tag;if(0===(1&d.mode)&&(0===A||11===A||15===A)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ma(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ga(s,u,t),c=u;var p=(t=f).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var m=ma(a);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),va(m,a,l,0,t),po(ua(c,l));break e}}s=c=ua(c,l),4!==Ll&&(Ll=2),null===jl?jl=[s]:jl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,fa(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(y){t=y,Bl===n&&null!==n&&(Bl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=sa,null===e?sa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===kl||0===(268435455&Fl)&&0===(268435455&Nl)||lc(kl,Ol)}function mc(e,t){var n=Tl;Tl|=2;var r=pc();for(kl===e&&Ol===t||(Hl=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(wo(),Tl=n,El.current=r,null!==Bl)throw Error(o(261));return kl=null,Ol=0,Ll}function vc(){for(;null!==Bl;)yc(Bl)}function bc(){for(;null!==Bl&&!Xe();)yc(Bl)}function yc(e){var t=Sl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?xc(e):Bl=t,Ml.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Il)))return void(Bl=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Bl=n);if(null===e)return Ll=6,void(Bl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Bl=t);Bl=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Xl);if(0!==(6&Tl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===kl&&(Bl=kl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,kc(tt,(function(){return _c(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Pl.transition,Pl.transition=null;var a=bt;bt=1;var l=Tl;Tl|=4,Ml.current=null,function(e,t){if(ei=Ht,hr(e=Ar())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,A=e,h=null;t:for(;;){for(var f;A!==n||0!==i&&3!==A.nodeType||(l=a+i),A!==s||0!==r&&3!==A.nodeType||(c=a+r),3===A.nodeType&&(a+=A.nodeValue.length),null!==(f=A.firstChild);)h=A,A=f;for(;;){if(A===e)break t;if(h===n&&++u===i&&(l=a),h===s&&++d===r&&(c=a),null!==(f=A.nextSibling))break;h=(A=h).parentNode}A=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,m=p.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:mo(t.type,g),m);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(o(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}p=nl,nl=!1}(e,n),ml(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Ye(),Tl=l,bt=a,Pl.transition=s}else e.current=n;if(Kl&&(Kl=!1,Xl=e,Yl=i),s=e.pendingLanes,0===s&&(Jl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Ql,Ql=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),s=e.pendingLanes,0!==(1&s)?e===Zl?ql++:(ql=0,Zl=e):ql=0,Gi()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function _c(){if(null!==Xl){var e=yt(Yl),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,$a=e.current;null!==$a;){var s=$a,a=s.child;if(0!==(16&$a.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var d=$a;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var A=d.child;if(null!==A)A.return=d,$a=A;else for(;null!==$a;){var h=(d=$a).sibling,f=d.return;if(sl(d),d===u){$a=null;break}if(null!==h){h.return=f,$a=h;break}$a=f}}}var p=s.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}$a=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,$a=a;else e:for(;null!==$a;){if(0!==(2048&(s=$a).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,$a=v;break e}$a=s.return}}var b=e.current;for($a=b;null!==$a;){var y=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==y)y.return=a,$a=y;else e:for(a=b;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Cc(l,l.return,w)}if(l===a){$a=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,$a=x;break e}$a=l.return}}if(Tl=i,Gi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Sc(e,t,n){e=Lo(e,t=fa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=Lo(t,e=pa(t,e=ua(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,kl===e&&(Ol&n)===n&&(4===Ll||3===Ll&&(130023424&Ol)===Ol&&500>qe()-Gl?hc(e,0):zl|=n),ic(e,t)}function Mc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=ko(e,t))&&(mt(e,t,n),ic(e,n))}function Pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Mc(e,n)}function kc(e,t){return Je(e,t)}function Bc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Bc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Ic(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return Dc(n.children,i,s,t);case S:a=8,i|=8;break;case C:return(e=Oc(12,n,t,2|i)).elementType=C,e.lanes=s,e;case T:return(e=Oc(13,n,t,i)).elementType=T,e.lanes=s,e;case k:return(e=Oc(19,n,t,i)).elementType=k,e.lanes=s,e;case I:return Fc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case M:a=9;break e;case P:a=11;break e;case B:a=14;break e;case O:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Oc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Dc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Nc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,o,s,a,l){return e=new jc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Oc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Gc(e){if(!e)return Mi;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Vc(e,t,n,r,i,o,s,a,l){return(e=Uc(n,r,!0,e,0,o,0,a,l)).context=Gc(null),n=e.current,(o=Ro(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ro(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,s))&&(rc(e,i,s,o),Do(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)ya=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ya=!1,function(e,t,n){switch(t.tag){case 3:ka(t),fo();break;case 5:ss(t);break;case 1:Oi(t.type)&&Di(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Na(e,t,n):(Ei(ls,1&ls.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ei(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Va(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Wa(e,t,n)}(e,t,n);ya=0!==(131072&e.flags)}else ya=!1,io&&0!==(1048576&t.flags)&&$i(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Bi(t,Pi.current);Co(t,n),i=Ss(null,t,r,e,i,n);var s=Cs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,Di(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=Go,t.stateNode=i,i._reactInternals=t,Qo(t,r,e,n),t=Ta(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===B)return 14}return 2}(r),e=mo(r,e),i){case 0:t=Ma(null,t,r,e,n);break e;case 1:t=Pa(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=_a(null,t,r,mo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ma(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Pa(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 3:e:{if(ka(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Io(e,t),No(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ba(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ba(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Zo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Wa(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ea(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Na(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=qo(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ei(vo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ti.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ro(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),So(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),So(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Co(t,n),r=r(i=Eo(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=mo(r=t.type,t.pendingProps),_a(e,t,r,i=mo(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mo(r,i),Ha(e,t),t.tag=1,Oi(r)?(e=!0,Di(t)):e=!1,Co(t,n),Ho(t,r,i),Qo(t,r,i,n),Ta(null,t,r,!0,e,n);case 19:return Va(e,t,n);case 22:return Ca(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}Hc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=Vc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[fi]=s.current,Gr(8===e.nodeType?e.parentNode:e),dc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[fi]=l.current,Gr(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,qe()),0===(6&Tl)&&(Vl=qe()+500,Gi()))}break;case 13:dc((function(){var t=ko(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Jc(e,1)}},wt=function(e){if(13===e.tag){var t=ko(e,134217728);if(null!==t)rc(t,e,134217728,tc());Jc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=ko(e,t);if(null!==n)rc(n,e,t,tc());Jc(e,t)}},St=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));J(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=uc,Te=dc;var tu={usingClientEntryPoint:!1,Events:[bi,yi,xi,Ee,Me,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!qc(e))throw Error(o(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(o(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.H=r.createRoot,r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},5082:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case A:case h:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case p:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=d,t.Memo=f},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},5332:(e,t,n)=>{"use strict";t.vj=t.Ay=void 0;var r=n(4061);Object.defineProperty(t,"Ay",{enumerable:!0,get:function(){return r.useWebSocket}});var i=n(2690);var o=n(7205);Object.defineProperty(t,"vj",{enumerable:!0,get:function(){return o.ReadyState}});var s=n(4386);var a=n(858)},1360:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachListeners=void 0;var i=n(5304),o=n(8540),s=n(7205),a=n(858);t.attachListeners=function(e,t,n,l,c,u){var d,A,h,f=t.setLastMessage,p=t.setReadyState;return n.current.fromSocketIO&&(d=(0,i.setUpSocketIOPing)(u)),function(e,t,n){var r;if(t.current.heartbeat&&e instanceof WebSocket){var i="boolean"===typeof t.current.heartbeat?void 0:t.current.heartbeat;r=(0,o.heartbeat)(e,i)}e.onmessage=function(e){var i;null===r||void 0===r||r(),t.current.onMessage&&t.current.onMessage(e),"function"===typeof t.current.filter&&!0!==t.current.filter(e)||t.current.heartbeat&&"boolean"!==typeof t.current.heartbeat&&(null===(i=t.current.heartbeat)||void 0===i?void 0:i.returnMessage)===e.data||n(e)}}(e,n,f),function(e,t,n,r){e.onopen=function(e){t.current.onOpen&&t.current.onOpen(e),r.current=0,n(s.ReadyState.OPEN)}}(e,n,p,c),A=function(e,t,n,r,i){return s.isEventSourceSupported&&e instanceof EventSource?function(){}:((0,a.assertIsWebSocket)(e,t.current.skipAssert),e.onclose=function(e){var a;if(t.current.onClose&&t.current.onClose(e),n(s.ReadyState.CLOSED),t.current.shouldReconnect&&t.current.shouldReconnect(e)){var l=null!==(a=t.current.reconnectAttempts)&&void 0!==a?a:s.DEFAULT_RECONNECT_LIMIT;if(i.current<l){var c="function"===typeof t.current.reconnectInterval?t.current.reconnectInterval(i.current):t.current.reconnectInterval;o=window.setTimeout((function(){i.current++,r()}),null!==c&&void 0!==c?c:s.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(l),console.warn("Max reconnect attempts of ".concat(l," exceeded"))}},function(){return o&&window.clearTimeout(o)});var o}(e,n,p,l,c),h=function(e,t,n,i,o){var a;return e.onerror=function(l){var c;if(t.current.onError&&t.current.onError(l),s.isEventSourceSupported&&e instanceof EventSource&&(t.current.onClose&&t.current.onClose(r(r({},l),{code:1006,reason:"An error occurred with the EventSource: ".concat(l),wasClean:!1})),n(s.ReadyState.CLOSED),e.close()),t.current.retryOnError)if(o.current<(null!==(c=t.current.reconnectAttempts)&&void 0!==c?c:s.DEFAULT_RECONNECT_LIMIT)){var u="function"===typeof t.current.reconnectInterval?t.current.reconnectInterval(o.current):t.current.reconnectInterval;a=window.setTimeout((function(){o.current++,i()}),null!==u&&void 0!==u?u:s.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(t.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(t.current.reconnectAttempts," exceeded"))},function(){return a&&window.clearTimeout(a)}}(e,n,p,l,c),function(){p(s.ReadyState.CLOSING),A(),h(),e.close(),d&&clearInterval(d)}}},1961:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachSharedListeners=void 0;var i=n(9596),o=n(7205),s=n(1875),a=n(5304),l=n(8540);t.attachSharedListeners=function(e,t,n,c){var u;return n.current.fromSocketIO&&(u=(0,a.setUpSocketIOPing)(c)),function(e,t,n){var r;n&&e instanceof WebSocket&&(r=(0,l.heartbeat)(e,"boolean"===typeof n?void 0:n)),e.onmessage=function(e){null===r||void 0===r||r(),(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onMessage&&t.optionsRef.current.onMessage(e),"function"===typeof t.optionsRef.current.filter&&!0!==t.optionsRef.current.filter(e)||n&&"boolean"!==typeof n&&(null===n||void 0===n?void 0:n.returnMessage)===e.data||t.setLastMessage(e)}))}}(e,t,n.current.heartbeat),function(e,t){e instanceof WebSocket&&(e.onclose=function(e){(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onClose&&t.optionsRef.current.onClose(e),t.setReadyState(o.ReadyState.CLOSED)})),delete i.sharedWebSockets[t],(0,s.getSubscribers)(t).forEach((function(t){var n;if(t.optionsRef.current.shouldReconnect&&t.optionsRef.current.shouldReconnect(e)){var r=null!==(n=t.optionsRef.current.reconnectAttempts)&&void 0!==n?n:o.DEFAULT_RECONNECT_LIMIT;if(t.reconnectCount.current<r){var i="function"===typeof t.optionsRef.current.reconnectInterval?t.optionsRef.current.reconnectInterval(t.reconnectCount.current):t.optionsRef.current.reconnectInterval;setTimeout((function(){t.reconnectCount.current++,t.reconnect.current()}),null!==i&&void 0!==i?i:o.DEFAULT_RECONNECT_INTERVAL_MS)}else t.optionsRef.current.onReconnectStop&&t.optionsRef.current.onReconnectStop(t.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(r," exceeded"))}}))})}(e,t),function(e,t){e.onopen=function(e){(0,s.getSubscribers)(t).forEach((function(t){t.reconnectCount.current=0,t.optionsRef.current.onOpen&&t.optionsRef.current.onOpen(e),t.setReadyState(o.ReadyState.OPEN)}))}}(e,t),function(e,t){e.onerror=function(n){(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onError&&t.optionsRef.current.onError(n),o.isEventSourceSupported&&e instanceof EventSource&&(t.optionsRef.current.onClose&&t.optionsRef.current.onClose(r(r({},n),{code:1006,reason:"An error occurred with the EventSource: ".concat(n),wasClean:!1})),t.setReadyState(o.ReadyState.CLOSED))})),o.isEventSourceSupported&&e instanceof EventSource&&e.close()}}(e,t),function(){u&&clearInterval(u)}}},7205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEventSourceSupported=t.isReactNative=t.ReadyState=t.DEFAULT_HEARTBEAT=t.UNPARSABLE_JSON_OBJECT=t.DEFAULT_RECONNECT_INTERVAL_MS=t.DEFAULT_RECONNECT_LIMIT=t.SOCKET_IO_PING_CODE=t.SOCKET_IO_PATH=t.SOCKET_IO_PING_INTERVAL=t.DEFAULT_EVENT_SOURCE_OPTIONS=t.EMPTY_EVENT_HANDLERS=t.DEFAULT_OPTIONS=void 0;t.DEFAULT_OPTIONS={},t.EMPTY_EVENT_HANDLERS={},t.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:t.EMPTY_EVENT_HANDLERS},t.SOCKET_IO_PING_INTERVAL=25e3,t.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",t.SOCKET_IO_PING_CODE="2",t.DEFAULT_RECONNECT_LIMIT=20,t.DEFAULT_RECONNECT_INTERVAL_MS=5e3,t.UNPARSABLE_JSON_OBJECT={},t.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3},function(e){e[e.UNINSTANTIATED=-1]="UNINSTANTIATED",e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t.ReadyState||(t.ReadyState={}));t.isReactNative="undefined"!==typeof navigator&&"ReactNative"===navigator.product,t.isEventSourceSupported=!t.isReactNative&&function(){try{return"EventSource"in globalThis}catch(e){return!1}}()},3791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrJoinSocket=void 0;var r=n(9596),i=n(7205),o=n(1360),s=n(1961),a=n(1875);t.createOrJoinSocket=function(e,t,n,l,c,u,d,A){if(!i.isEventSourceSupported&&l.current.eventSourceOptions)throw i.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(l.current.share){var h=null;void 0===r.sharedWebSockets[t]?(r.sharedWebSockets[t]=l.current.eventSourceOptions?new EventSource(t,l.current.eventSourceOptions):new WebSocket(t,l.current.protocols),e.current=r.sharedWebSockets[t],n(i.ReadyState.CONNECTING),h=(0,s.attachSharedListeners)(r.sharedWebSockets[t],t,l,A)):(e.current=r.sharedWebSockets[t],n(r.sharedWebSockets[t].readyState));var f={setLastMessage:c,setReadyState:n,optionsRef:l,reconnectCount:d,reconnect:u};return(0,a.addSubscriber)(t,f),function(e,t,n,o,s){return function(){if((0,a.removeSubscriber)(e,t),!(0,a.hasSubscribers)(e)){try{var l=r.sharedWebSockets[e];l instanceof WebSocket&&(l.onclose=function(e){n.current.onClose&&n.current.onClose(e),o(i.ReadyState.CLOSED)}),l.close()}catch(c){}s&&s(),delete r.sharedWebSockets[e]}}}(t,f,l,n,h)}if(e.current=l.current.eventSourceOptions?new EventSource(t,l.current.eventSourceOptions):new WebSocket(t,l.current.protocols),n(i.ReadyState.CONNECTING),!e.current)throw new Error("WebSocket failed to be created");return(0,o.attachListeners)(e.current,{setLastMessage:c,setReadyState:n},l,u.current,d,A)}},2852:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=void 0;var o=n(5304),s=n(7205);t.getUrl=function(e,n,a){return void 0===a&&(a=0),r(void 0,void 0,void 0,(function(){var r,l,c,u,d,A,h;return i(this,(function(i){switch(i.label){case 0:if("function"!==typeof e)return[3,10];i.label=1;case 1:return i.trys.push([1,3,,9]),[4,e()];case 2:return r=i.sent(),[3,9];case 3:return i.sent(),n.current.retryOnError?(l=null!==(d=n.current.reconnectAttempts)&&void 0!==d?d:s.DEFAULT_RECONNECT_LIMIT,a<l?(c="function"===typeof n.current.reconnectInterval?n.current.reconnectInterval(a):n.current.reconnectInterval,[4,(f=null!==c&&void 0!==c?c:s.DEFAULT_RECONNECT_INTERVAL_MS,new Promise((function(e){return window.setTimeout(e,f)})))]):[3,5]):[3,7];case 4:return i.sent(),[2,(0,t.getUrl)(e,n,a+1)];case 5:return null===(h=(A=n.current).onReconnectStop)||void 0===h||h.call(A,a),[2,null];case 6:return[3,8];case 7:return[2,null];case 8:return[3,9];case 9:return[3,11];case 10:r=e,i.label=11;case 11:return u=n.current.fromSocketIO?(0,o.parseSocketIOUrl)(r):r,[2,n.current.queryParams?(0,o.appendQueryParams)(u,n.current.queryParams):u]}var f}))}))}},9596:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetWebSockets=t.sharedWebSockets=void 0,t.sharedWebSockets={};t.resetWebSockets=function(e){if(e&&t.sharedWebSockets.hasOwnProperty(e))delete t.sharedWebSockets[e];else for(var n in t.sharedWebSockets)t.sharedWebSockets.hasOwnProperty(n)&&delete t.sharedWebSockets[n]}},8540:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heartbeat=void 0;var r=n(7205);t.heartbeat=function(e,t){var n=t||{},i=n.interval,o=void 0===i?r.DEFAULT_HEARTBEAT.interval:i,s=n.timeout,a=void 0===s?r.DEFAULT_HEARTBEAT.timeout:s,l=n.message,c=void 0===l?r.DEFAULT_HEARTBEAT.message:l,u=!1,d=setInterval((function(){try{"function"===typeof c?e.send(c()):e.send(c)}catch(t){}}),o),A=setInterval((function(){u?u=!1:e.close()}),a);return e.addEventListener("close",(function(){clearInterval(d),clearInterval(A)})),function(){u=!0}}},1875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetSubscribers=t.removeSubscriber=t.addSubscriber=t.hasSubscribers=t.getSubscribers=void 0;var n={},r=[];t.getSubscribers=function(e){return(0,t.hasSubscribers)(e)?Array.from(n[e]):r};t.hasSubscribers=function(e){var t;return(null===(t=n[e])||void 0===t?void 0:t.size)>0};t.addSubscriber=function(e,t){n[e]=n[e]||new Set,n[e].add(t)};t.removeSubscriber=function(e,t){n[e].delete(t)};t.resetSubscribers=function(e){if(e&&n.hasOwnProperty(e))delete n[e];else for(var t in n)n.hasOwnProperty(t)&&delete n[t]}},1808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.websocketWrapper=void 0;t.websocketWrapper=function(e,t){return new Proxy(e,{get:function(e,n){var r=e[n];return"reconnect"===n?t:"function"===typeof r?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):r},set:function(e,t,n){return/^on/.test(t)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(e[t]=n,!0)}})},t.default=t.websocketWrapper},5304:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setUpSocketIOPing=t.appendQueryParams=t.parseSocketIOUrl=void 0;var r=n(7205);t.parseSocketIOUrl=function(e){if(e){var t=/^https|wss/.test(e),n=e.replace(/^(https?|wss?)(:\/\/)?/,"").replace(/\/$/,"");return"".concat(i=t?"wss":"ws","://").concat(n).concat(r.SOCKET_IO_PATH)}if(""===e){var i=(t=/^https/.test(window.location.protocol))?"wss":"ws",o=window.location.port?":".concat(window.location.port):"";return"".concat(i,"://").concat(window.location.hostname).concat(o).concat(r.SOCKET_IO_PATH)}return e};t.appendQueryParams=function(e,t){void 0===t&&(t={});var n=/\?([\w]+=[\w]+)/.test(e),r="".concat(Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1];return e+"".concat(n,"=").concat(r,"&")}),"").slice(0,-1));return"".concat(e).concat(n?"&":"?").concat(r)};t.setUpSocketIOPing=function(e,t){void 0===t&&(t=r.SOCKET_IO_PING_INTERVAL);return window.setInterval((function(){return e(r.SOCKET_IO_PING_CODE)}),t)}},4386:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSource=void 0;var o=n(5043),s=n(4061),a=n(7205);t.useEventSource=function(e,t,n){void 0===t&&(t=a.DEFAULT_EVENT_SOURCE_OPTIONS);var l=t.withCredentials,c=t.events,u=i(t,["withCredentials","events"]);void 0===n&&(n=!0);var d=r(r({},u),{eventSourceOptions:{withCredentials:l}}),A=(0,o.useRef)(a.EMPTY_EVENT_HANDLERS);c&&(A.current=c);var h=(0,s.useWebSocket)(e,d,n),f=h.lastMessage,p=h.readyState,g=h.getWebSocket;return(0,o.useEffect)((function(){(null===f||void 0===f?void 0:f.type)&&Object.entries(A.current).forEach((function(e){var t=e[0],n=e[1];t===f.type&&n(f)}))}),[f]),{lastEvent:f,readyState:p,getEventSource:g}}},2690:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useSocketIO=void 0;var i=n(5043),o=n(4061),s=n(7205),a={type:"empty",payload:null};t.useSocketIO=function(e,t,n){void 0===t&&(t=s.DEFAULT_OPTIONS),void 0===n&&(n=!0);var l=(0,i.useMemo)((function(){return r(r({},t),{fromSocketIO:!0})}),[]),c=(0,o.useWebSocket)(e,l,n),u=c.sendMessage,d=c.sendJsonMessage,A=c.lastMessage,h=c.readyState,f=c.getWebSocket,p=(0,i.useMemo)((function(){return function(e){if(!e||!e.data)return a;var t=e.data.match(/\[.*]/);if(!t)return a;var n=JSON.parse(t);return Array.isArray(n)&&n[1]?{type:n[0],payload:n[1]}:a}(A)}),[A]);return{sendMessage:u,sendJsonMessage:d,lastMessage:p,lastJsonMessage:p,readyState:h,getWebSocket:f}}},4061:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useWebSocket=void 0;var a=n(5043),l=n(7950),c=n(7205),u=n(3791),d=n(2852),A=s(n(1808)),h=n(858);t.useWebSocket=function(e,t,n){void 0===t&&(t=c.DEFAULT_OPTIONS),void 0===n&&(n=!0);var s=(0,a.useState)(null),f=s[0],p=s[1],g=(0,a.useState)({}),m=g[0],v=g[1],b=(0,a.useMemo)((function(){if(f)try{return JSON.parse(f.data)}catch(e){return c.UNPARSABLE_JSON_OBJECT}return null}),[f]),y=(0,a.useRef)(null),x=(0,a.useRef)(null),w=(0,a.useRef)((function(){})),_=(0,a.useRef)(0),S=(0,a.useRef)([]),C=(0,a.useRef)(null),E=(0,a.useRef)(t);E.current=t;var M=y.current&&void 0!==m[y.current]?m[y.current]:null!==e&&!0===n?c.ReadyState.CONNECTING:c.ReadyState.UNINSTANTIATED,P=t.queryParams?JSON.stringify(t.queryParams):null,T=(0,a.useCallback)((function(e,t){var n;void 0===t&&(t=!0),c.isEventSourceSupported&&x.current instanceof EventSource?console.warn("Unable to send a message from an eventSource"):(null===(n=x.current)||void 0===n?void 0:n.readyState)===c.ReadyState.OPEN?((0,h.assertIsWebSocket)(x.current,E.current.skipAssert),x.current.send(e)):t&&S.current.push(e)}),[]),k=(0,a.useCallback)((function(e,t){void 0===t&&(t=!0),T(JSON.stringify(e),t)}),[T]),B=(0,a.useCallback)((function(){return!0!==E.current.share||c.isEventSourceSupported&&x.current instanceof EventSource?x.current:(null===C.current&&x.current&&((0,h.assertIsWebSocket)(x.current,E.current.skipAssert),C.current=(0,A.default)(x.current,w)),C.current)}),[]);return(0,a.useEffect)((function(){if(null!==e&&!0===n){var t,s=!1,a=!0,A=function(){return i(void 0,void 0,void 0,(function(){var n,i,A;return o(this,(function(o){switch(o.label){case 0:return n=y,[4,(0,d.getUrl)(e,E)];case 1:return n.current=o.sent(),null===y.current?(console.error("Failed to get a valid URL. WebSocket connection aborted."),y.current="ABORTED",(0,l.flushSync)((function(){return v((function(e){return r(r({},e),{ABORTED:c.ReadyState.CLOSED})}))})),[2]):(i=function(e){s||(0,l.flushSync)((function(){return p(e)}))},A=function(e){s||(0,l.flushSync)((function(){return v((function(t){var n;return r(r({},t),y.current&&((n={})[y.current]=e,n))}))}))},a&&(t=(0,u.createOrJoinSocket)(x,y.current,A,E,i,w,_,T)),[2])}}))}))};return w.current=function(){s||(C.current&&(C.current=null),null===t||void 0===t||t(),A())},A(),function(){s=!0,a=!1,C.current&&(C.current=null),null===t||void 0===t||t(),p(null)}}null!==e&&!1!==n||(_.current=0,v((function(e){var t;return r(r({},e),y.current&&((t={})[y.current]=c.ReadyState.CLOSED,t))})))}),[e,n,P,T]),(0,a.useEffect)((function(){M===c.ReadyState.OPEN&&S.current.splice(0).forEach((function(e){T(e)}))}),[M]),{sendMessage:T,sendJsonMessage:k,lastMessage:f,lastJsonMessage:b,readyState:M,getWebSocket:B}}},858:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetGlobalState=t.assertIsWebSocket=void 0;var r=n(9596),i=n(1875);t.assertIsWebSocket=function(e,t){if(!t&&e instanceof WebSocket===!1)throw new Error("")},t.resetGlobalState=function(e){(0,i.resetSubscribers)(e),(0,r.resetWebSockets)(e)}},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var y=b.prototype=new v;y.constructor=b,p(y,m.prototype),y.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+P(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(M,"$&/")+"/"),T(s,t,i,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(M,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+P(a=e[c],c);l+=T(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=T(a=a.value,t,i,u=o+P(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},I={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:I,ReactCurrentOwner:_};t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:A,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,A=null,h=3,f=!1,p=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,y(e),!p)if(null!==r(c))p=!0,I(w);else{var t=r(u);null!==t&&R(x,t.startTime-e)}}function w(e,n){p=!1,g&&(g=!1,v(E),E=-1),f=!0;var o=h;try{for(y(n),A=r(c);null!==A&&(!(A.expirationTime>n)||e&&!T());){var s=A.callback;if("function"===typeof s){A.callback=null,h=A.priorityLevel;var a=s(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?A.callback=a:A===r(c)&&i(c),y(n)}else i(c);A=r(c)}if(null!==A)var l=!0;else{var d=r(u);null!==d&&R(x,d.startTime-n),l=!1}return l}finally{A=null,h=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,C=null,E=-1,M=5,P=-1;function T(){return!(t.unstable_now()-P<M)}function k(){if(null!==C){var e=t.unstable_now();P=e;var n=!0;try{n=C(!0,e)}finally{n?_():(S=!1,C=null)}}else S=!1}if("function"===typeof b)_=function(){b(k)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,O=B.port2;B.port1.onmessage=k,_=function(){O.postMessage(null)}}else _=function(){m(k,0)};function I(e){C=e,S||(S=!0,_())}function R(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,R(x,o-s))):(e.sortIndex=a,n(c,e),p||f||(p=!0,I(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},1289:e=>{"use strict";e.exports=(e,t)=>{if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},7491:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%".concat(e.charCodeAt(0).toString(16).toUpperCase())))},5956:(e,t,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),s((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},5039:(e,t,n)=>{"use strict";var r=n(5043),i=n(9461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=a(null);if(null===d.current){var A={hasValue:!1,value:null};d.current=A}else A=d.current;d=c((function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&A.hasValue){var t=A.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var h=s(e,d[0],d[1]);return l((function(){A.hasValue=!0,A.value=h}),[h]),u(h),h}},9461:(e,t,n)=>{"use strict";e.exports=n(5956)},8443:(e,t,n)=>{"use strict";e.exports=n(5039)},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})},8387:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".18025603.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="cityscopejs:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var A=(t,n)=>{a.onerror=a.onload=null,clearTimeout(h);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},h=setTimeout(A.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=A.bind(null,a.onerror),a.onload=A.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="https://cityscope.media.mit.edu/CS_cityscopeJS/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkcityscopejs=self.webpackChunkcityscopejs||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{readFileAsArrayBuffer:()=>LN,readFileAsText:()=>DN,requireFromFile:()=>FN,requireFromString:()=>NN});var t={};n.r(t),n.d(t,{decode:()=>Zz,name:()=>qz});var r={};n.r(r),n.d(r,{name:()=>ij,preprocess:()=>oj});var i={};n.r(i),n.d(i,{name:()=>aj,preprocess:()=>lj});var o={};n.r(o),n.d(o,{decode:()=>Tj,encode:()=>kj,name:()=>Mj,preprocess:()=>Pj});var s={};n.r(s),n.d(s,{decode:()=>Uj,name:()=>Fj});var a={};n.r(a),n.d(a,{decode:()=>Jj,encode:()=>Kj,name:()=>Qj});var l={};n.r(l),n.d(l,{decode:()=>qj,encode:()=>Zj,name:()=>Yj});var c={};n.r(c),n.d(c,{decode:()=>tU,encode:()=>nU,name:()=>eU});var u={};n.r(u),n.d(u,{decode:()=>sU,name:()=>oU});var d={};n.r(d),n.d(d,{hasBrowserEnv:()=>eZ,hasStandardBrowserEnv:()=>tZ,hasStandardBrowserWebWorkerEnv:()=>rZ});var A=n(5043),h=n(8168),f=n(2876),p=n(869),g=n(5527),m=n(579);const v=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=(0,g.A)(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,m.jsx)(p.A,{styles:o})};var b=n(5170),y=n(3375);const x=function(e){return(0,m.jsx)(v,(0,h.A)({},e,{defaultTheme:b.A,themeId:y.A}))},w=(e,t)=>(0,h.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),_=e=>(0,h.A)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});const S=function(e){const t=(0,f.A)({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(x,{styles:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[n,i]=t;var o;r[e.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(o=i.palette)?void 0:o.mode}}));let i=(0,h.A)({html:w(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,h.A)({margin:0},_(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const o=null==(n=e.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return o&&(i=[i,o]),i}(e,r)}),n]})};var C=n(8587);const E=A.createContext(null);function M(){return A.useContext(E)}const P="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const T=function(e){const{children:t,theme:n}=e,r=M(),i=A.useMemo((()=>{const e=null===r?n:function(e,t){if("function"===typeof t)return t(e);return(0,h.A)({},e,t)}(r,n);return null!=e&&(e[P]=null!==r),e}),[n,r]);return(0,m.jsx)(E.Provider,{value:i,children:t})};var k=n(5756),B=n(7082);const O=["value"],I=A.createContext();const R=()=>{const e=A.useContext(I);return null!=e&&e},L=function(e){let{value:t}=e,n=(0,C.A)(e,O);return(0,m.jsx)(I.Provider,(0,h.A)({value:null==t||t},n))},D={};function F(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return A.useMemo((()=>{const i=e&&t[e]||t;if("function"===typeof n){const o=n(i),s=e?(0,h.A)({},t,{[e]:o}):o;return r?()=>s:s}return e?(0,h.A)({},t,{[e]:n}):(0,h.A)({},t,n)}),[e,t,n,r])}const N=function(e){const{children:t,theme:n,themeId:r}=e,i=(0,B.A)(D),o=M()||D,s=F(r,i,n),a=F(r,o,n,!0),l="rtl"===s.direction;return(0,m.jsx)(T,{theme:a,children:(0,m.jsx)(k.T.Provider,{value:s,children:(0,m.jsx)(L,{value:l,children:t})})})},z=["theme"];function j(e){let{theme:t}=e,n=(0,C.A)(e,z);const r=t[y.A];return(0,m.jsx)(N,(0,h.A)({},n,{themeId:r?y.A:void 0,theme:r||t}))}var U=n(9461),G=n(8443),V=n(7950);let H=function(e){e()};const W=()=>H,Q=Symbol.for("react-redux-context"),J="undefined"!==typeof globalThis?globalThis:{};function K(){var e;if(!A.createContext)return{};const t=null!=(e=J[Q])?e:J[Q]=new Map;let n=t.get(A.createContext);return n||(n=A.createContext(null),t.set(A.createContext,n)),n}const X=K();function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;return function(){return(0,A.useContext)(e)}}const q=Y();let Z=()=>{throw new Error("uSES not initialized!")};const $=(e,t)=>e===t;function ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;const t=e===X?q:Y(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=$,stabilityCheck:i,noopCheck:o}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:a,getServerState:l,stabilityCheck:c,noopCheck:u}=t(),d=((0,A.useRef)(!0),(0,A.useCallback)({[e.name]:t=>e(t)}[e.name],[e,c,i])),h=Z(a.addNestedSub,s.getState,l||s.getState,d,r);return(0,A.useDebugValue)(h),h}}const te=ee();n(219),n(2086);const ne={notify(){},get:()=>[]};function re(e,t){let n,r=ne,i=0,o=!1;function s(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(s):e.subscribe(s),r=function(){const e=W();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=ne)}const c={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,a())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return c}const ie=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?A.useLayoutEffect:A.useEffect;let oe=null;const se=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:o="once",noopCheck:s="once"}=e;const a=A.useMemo((()=>{const e=re(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,noopCheck:s}}),[t,i,o,s]),l=A.useMemo((()=>t.getState()),[t]);ie((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,l]);const c=n||X;return A.createElement(c.Provider,{value:a},r)};function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;const t=e===X?q:Y(e);return function(){const{store:e}=t();return e}}const le=ae();function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;const t=e===X?le:ae(e);return function(){return t().dispatch}}const ue=ce();var de;function Ae(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function he(e){return!!e&&!!e[nt]}function fe(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===rt}(e)||Array.isArray(e)||!!e[tt]||!!(null===(t=e.constructor)||void 0===t?void 0:t[tt])||xe(e)||we(e))}function pe(e,t,n){void 0===n&&(n=!1),0===ge(e)?(n?Object.keys:it)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function ge(e){var t=e[nt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:xe(e)?2:we(e)?3:0}function me(e,t){return 2===ge(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ve(e,t){return 2===ge(e)?e.get(t):e[t]}function be(e,t,n){var r=ge(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function ye(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function xe(e){return qe&&e instanceof Map}function we(e){return Ze&&e instanceof Set}function _e(e){return e.o||e.t}function Se(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ot(e);delete t[nt];for(var n=it(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Ce(e,t){return void 0===t&&(t=!1),Me(e)||he(e)||!fe(e)||(ge(e)>1&&(e.set=e.add=e.clear=e.delete=Ee),Object.freeze(e),t&&pe(e,(function(e,t){return Ce(t,!0)}),!0)),e}function Ee(){Ae(2)}function Me(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Pe(e){var t=st[e];return t||Ae(18,e),t}function Te(e,t){st[e]||(st[e]=t)}function ke(){return Xe}function Be(e,t){t&&(Pe("Patches"),e.u=[],e.s=[],e.v=t)}function Oe(e){Ie(e),e.p.forEach(Le),e.p=null}function Ie(e){e===Xe&&(Xe=e.l)}function Re(e){return Xe={p:[],l:Xe,h:e,m:!0,_:0}}function Le(e){var t=e[nt];0===t.i||1===t.i?t.j():t.g=!0}function De(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||Pe("ES5").S(t,e,r),r?(n[nt].P&&(Oe(t),Ae(4)),fe(e)&&(e=Fe(t,e),t.l||ze(t,e)),t.u&&Pe("Patches").M(n[nt].t,e,t.u,t.s)):e=Fe(t,n,[]),Oe(t),t.u&&t.v(t.u,t.s),e!==et?e:void 0}function Fe(e,t,n){if(Me(t))return t;var r=t[nt];if(!r)return pe(t,(function(i,o){return Ne(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return ze(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Se(r.k):r.o,o=i,s=!1;3===r.i&&(o=new Set(i),i.clear(),s=!0),pe(o,(function(t,o){return Ne(e,r,i,t,o,n,s)})),ze(e,i,!1),n&&e.u&&Pe("Patches").N(r,n,e.u,e.s)}return r.o}function Ne(e,t,n,r,i,o,s){if(he(i)){var a=Fe(e,i,o&&t&&3!==t.i&&!me(t.R,r)?o.concat(r):void 0);if(be(n,r,a),!he(a))return;e.m=!1}else s&&n.add(i);if(fe(i)&&!Me(i)){if(!e.h.D&&e._<1)return;Fe(e,i),t&&t.A.l||ze(e,i)}}function ze(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&Ce(t,n)}function je(e,t){var n=e[nt];return(n?_e(n):e)[t]}function Ue(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ge(e){e.P||(e.P=!0,e.l&&Ge(e.l))}function Ve(e){e.o||(e.o=Se(e.t))}function He(e,t,n){var r=xe(t)?Pe("MapSet").F(t,n):we(t)?Pe("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:ke(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=at;n&&(i=[r],o=lt);var s=Proxy.revocable(i,o),a=s.revoke,l=s.proxy;return r.k=l,r.j=a,l}(t,n):Pe("ES5").J(t,n);return(n?n.A:ke()).p.push(r),r}function We(e){return he(e)||Ae(22,e),function e(t){if(!fe(t))return t;var n,r=t[nt],i=ge(t);if(r){if(!r.P&&(r.i<4||!Pe("ES5").K(r)))return r.t;r.I=!0,n=Qe(t,i),r.I=!1}else n=Qe(t,i);return pe(n,(function(t,i){r&&ve(r.t,t)===i||be(n,t,e(i))})),3===i?new Set(n):n}(e)}function Qe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Se(e)}function Je(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[nt];return at.get(t,e)},set:function(t){var n=this[nt];at.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][nt];if(!i.P)switch(i.i){case 5:r(i)&&Ge(i);break;case 4:n(i)&&Ge(i)}}}function n(e){for(var t=e.t,n=e.k,r=it(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==nt){var s=t[o];if(void 0===s&&!me(t,o))return!0;var a=n[o],l=a&&a[nt];if(l?l.t!==s:!ye(a,s))return!0}}var c=!!t[nt];return r.length!==it(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Te("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=ot(n);delete o[nt];for(var s=it(o),a=0;a<s.length;a++){var l=s[a];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:ke(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,nt,{value:o,writable:!0}),i},S:function(e,n,i){i?he(n)&&n[nt].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[nt];if(n){var i=n.t,o=n.k,s=n.R,a=n.i;if(4===a)pe(o,(function(t){t!==nt&&(void 0!==i[t]||me(i,t)?s[t]||e(o[t]):(s[t]=!0,Ge(n)))})),pe(i,(function(e){void 0!==o[e]||me(o,e)||(s[e]=!1,Ge(n))}));else if(5===a){if(r(n)&&(Ge(n),s.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)s[l]=!1;else for(var c=i.length;c<o.length;c++)s[c]=!0;for(var u=Math.min(o.length,i.length),d=0;d<u;d++)o.hasOwnProperty(d)||(s[d]=!0),void 0===s[d]&&e(o[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}(e=>{Z=e})(G.useSyncExternalStoreWithSelector),(e=>{oe=e})(U.useSyncExternalStore),de=V.unstable_batchedUpdates,H=de;var Ke,Xe,Ye="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),qe="undefined"!=typeof Map,Ze="undefined"!=typeof Set,$e="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,et=Ye?Symbol.for("immer-nothing"):((Ke={})["immer-nothing"]=!0,Ke),tt=Ye?Symbol.for("immer-draftable"):"__$immer_draftable",nt=Ye?Symbol.for("immer-state"):"__$immer_state",rt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),it="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ot=Object.getOwnPropertyDescriptors||function(e){var t={};return it(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},st={},at={get:function(e,t){if(t===nt)return e;var n=_e(e);if(!me(n,t))return function(e,t,n){var r,i=Ue(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!fe(r)?r:r===je(e.t,t)?(Ve(e),e.o[t]=He(e.A.h,r,e)):r},has:function(e,t){return t in _e(e)},ownKeys:function(e){return Reflect.ownKeys(_e(e))},set:function(e,t,n){var r=Ue(_e(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=je(_e(e),t),o=null==i?void 0:i[nt];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(ye(n,i)&&(void 0!==n||me(e.t,t)))return!0;Ve(e),Ge(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==je(e.t,t)||t in e.t?(e.R[t]=!1,Ve(e),Ge(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=_e(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Ae(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ae(12)}},lt={};pe(at,(function(e,t){lt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),lt.deleteProperty=function(e,t){return lt.set.call(this,e,t,void 0)},lt.set=function(e,t,n){return at.set.call(this,e[0],t,n,e[0])};var ct=function(){function e(e){var t=this;this.O=$e,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,s=Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(s))}))}}var s;if("function"!=typeof n&&Ae(6),void 0!==r&&"function"!=typeof r&&Ae(7),fe(e)){var a=Re(t),l=He(t,e,void 0),c=!0;try{s=n(l),c=!1}finally{c?Oe(a):Ie(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return Be(a,r),De(e,a)}),(function(e){throw Oe(a),e})):(Be(a,r),De(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=n(e))&&(s=e),s===et&&(s=void 0),t.D&&Ce(s,!0),r){var u=[],d=[];Pe("Patches").M(e,s,u,d),r(u,d)}return s}Ae(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){fe(e)||Ae(8),he(e)&&(e=We(e));var t=Re(this),n=He(this,e,void 0);return n[nt].C=!0,Ie(t),n},t.finishDraft=function(e,t){var n=(e&&e[nt]).A;return Be(n,t),De(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!$e&&Ae(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Pe("Patches").$;return he(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),ut=new ct,dt=ut.produce;ut.produceWithPatches.bind(ut),ut.setAutoFreeze.bind(ut),ut.setUseProxies.bind(ut),ut.applyPatches.bind(ut),ut.createDraft.bind(ut),ut.finishDraft.bind(ut);const At=dt;function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function ft(e){var t=function(e,t){if("object"!=ht(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ht(t)?t:t+""}function pt(e,t,n){return(t=ft(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var bt="function"===typeof Symbol&&Symbol.observable||"@@observable",yt=function(){return Math.random().toString(36).substring(7).split("").join(".")},xt={INIT:"@@redux/INIT"+yt(),REPLACE:"@@redux/REPLACE"+yt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yt()}};function wt(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _t(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(vt(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(vt(1));return n(_t)(e,t)}if("function"!==typeof e)throw new Error(vt(2));var i=e,o=t,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(vt(3));return o}function d(e){if("function"!==typeof e)throw new Error(vt(4));if(l)throw new Error(vt(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(vt(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),s=null}}}function A(e){if(!wt(e))throw new Error(vt(7));if("undefined"===typeof e.type)throw new Error(vt(8));if(l)throw new Error(vt(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}return A({type:xt.INIT}),(r={dispatch:A,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(vt(10));i=e,A({type:xt.REPLACE})}})[bt]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(vt(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[bt]=function(){return this},e},r}function St(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:xt.INIT}))throw new Error(vt(12));if("undefined"===typeof n(void 0,{type:xt.PROBE_UNKNOWN_ACTION()}))throw new Error(vt(13))}))}(n)}catch(a){o=a}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var l=s[a],c=n[l],u=e[l],d=c(u,t);if("undefined"===typeof d){t&&t.type;throw new Error(vt(14))}i[l]=d,r=r||d!==u}return(r=r||s.length!==Object.keys(e).length)?i:e}}function Ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Et(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(vt(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=Ct.apply(void 0,o)(n.dispatch),mt(mt({},n),{},{dispatch:r})}}}function Mt(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Pt=Mt();Pt.withExtraArgument=Mt;const Tt=Pt;var kt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ot=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},It=Object.defineProperty,Rt=Object.defineProperties,Lt=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,zt=function(e,t,n){return t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jt=function(e,t){for(var n in t||(t={}))Ft.call(t,n)&&zt(e,n,t[n]);if(Dt)for(var r=0,i=Dt(t);r<i.length;r++){n=i[r];Nt.call(t,n)&&zt(e,n,t[n])}return e},Ut=function(e,t){return Rt(e,Lt(t))},Gt=function(e,t,n){return new Promise((function(r,i){var o=function(e){try{a(n.next(e))}catch(t){i(t)}},s=function(e){try{a(n.throw(e))}catch(t){i(t)}},a=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(o,s)};a((n=n.apply(e,t)).next())}))},Vt="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Ct:Ct.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Ht(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function Wt(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return jt(jt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var Qt=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return kt(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Ot([void 0],e[0].concat(this)))):new(t.bind.apply(t,Ot([void 0],e.concat(this))))},t}(Array),Jt=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return kt(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Ot([void 0],e[0].concat(this)))):new(t.bind.apply(t,Ot([void 0],e.concat(this))))},t}(Array);function Kt(e){return fe(e)?At(e,(function(){})):e}function Xt(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new Qt);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Tt.withExtraArgument(n.extraArgument)):r.push(Tt));0;return r}(e)}}function Yt(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function qt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Kt(e.initialState),i=e.reducers||{},o=Object.keys(i),s={},a={},l={};function c(){var t="function"===typeof e.extraReducers?Yt(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],s=void 0===o?[]:o,l=t[2],c=void 0===l?void 0:l,u=jt(jt({},i),a);return function(e,t,n,r){void 0===n&&(n=[]);var i,o="function"===typeof t?Yt(t):[t,n,r],s=o[0],a=o[1],l=o[2];if(function(e){return"function"===typeof e}(e))i=function(){return Kt(e())};else{var c=Kt(e);i=function(){return c}}function u(e,t){void 0===e&&(e=i());var n=Ot([s[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[l]),n.reduce((function(e,n){if(n){var r;if(he(e))return void 0===(r=n(e,t))?e:r;if(fe(e))return At(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return u.getInitialState=i,u}(r,(function(e){for(var t in u)e.addCase(t,u[t]);for(var n=0,r=s;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return o.forEach((function(e){var n,r,o=i[e],c=t+"/"+e;"reducer"in o?(n=o.reducer,r=o.prepare):n=o,s[e]=n,a[c]=n,l[e]=r?Wt(c,r):Wt(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:l,caseReducers:s,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var Zt=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},$t=["name","message","stack","code"],en=function(e,t){this.payload=e,this.meta=t},tn=function(e,t){this.payload=e,this.meta=t},nn=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=$t;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=Wt(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:Ut(jt({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=Wt(e+"/pending",(function(e,t,n){return{payload:void 0,meta:Ut(jt({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),o=Wt(e+"/rejected",(function(e,t,r,i,o){return{payload:i,error:(n&&n.serializeError||nn)(e||"Rejected"),meta:Ut(jt({},o||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),s="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(a,l,c){var u,d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Zt(),A=new s;function h(e){u=e,A.abort()}var f=function(){return Gt(this,null,(function(){var s,f,p,g,m,v;return Bt(this,(function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),g=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,e,{getState:l,extra:c}),null===(y=g)||"object"!==typeof y||"function"!==typeof y.then?[3,2]:[4,g];case 1:g=b.sent(),b.label=2;case 2:if(!1===g||A.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,m=new Promise((function(e,t){return A.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:u||"Aborted"})}))})),a(i(d,e,null==(f=null==n?void 0:n.getPendingMeta)?void 0:f.call(n,{requestId:d,arg:e},{getState:l,extra:c}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:a,getState:l,extra:c,requestId:d,signal:A.signal,abort:h,rejectWithValue:function(e,t){return new en(e,t)},fulfillWithValue:function(e,t){return new tn(e,t)}})).then((function(t){if(t instanceof en)throw t;return t instanceof tn?r(t.payload,d,e,t.meta):r(t,d,e)}))])];case 3:return p=b.sent(),[3,5];case 4:return v=b.sent(),p=v instanceof en?o(null,d,e,v.payload,v.meta):o(v,d,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(p)&&p.meta.condition||a(p),[2,p]}var y}))}))}();return Object.assign(f,{abort:h,requestId:d,arg:e,unwrap:function(){return f.then(rn)}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function rn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var on="listenerMiddleware";Wt(on+"/add"),Wt(on+"/removeAll"),Wt(on+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var sn,an=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:an(10);Je();const ln=qt({name:"cityIOdataState",initialState:{},cityIOisDone:!1,cityIOtableName:"",reducers:{updateCityIOdata:(e,t)=>{e.cityIOdata=t.payload},toggleCityIOisDone:(e,t)=>{e.cityIOisDone=t.payload},updateCityIOtableName:(e,t)=>{e.cityIOtableName=t.payload}}}),{updateCityIOdata:cn,toggleCityIOisDone:un,updateCityIOtableName:dn}=ln.actions,An=ln.reducer;var hn=n(9370);const fn={fontFamily:'"Roboto Mono", sans-serif',fontSize:11,fontWeightLight:100,fontWeightRegular:500,fontWeightMedium:700,h1:{fontWeight:700,fontSize:45,letterSpacing:"-1px"},h2:{fontWeight:800,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:700,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}};var pn=n(7344);const gn=(0,pn.A)({typography:fn,palette:{mode:"dark"}}),mn={csjsURL:(()=>{const e=window.location,t="cityscopejs_local"in hn.parse(e.search)?"http://localhost:3000":"https://cityscope.media.mit.edu/CS_cityscopeJS";return console.log("cityScopeJS location: ",t),t})()},vn={docsURL:"https://raw.githubusercontent.com/CityScope/CS_cityscopeJS/master/docs/",cityIO:{baseURL:(()=>{const e=window.location,t="cityio_local"in hn.parse(e.search)?"http://localhost:8080/api/":"https://cityio.media.mit.edu/cityio/api/";return console.log("cityIO server location: ",t),t})(),websocketURL:(()=>{const e=window.location,t="cityio_local"in hn.parse(e.search)?"ws://localhost:8080/interface":"wss://cityio.media.mit.edu/cityio/interface";return console.log("cityIO websocket server location: ",t),t})(),ListOfTables:"table/list/",headers:"table/headers/",interval:500,cityIOmodules:[{name:"header",expectUpdate:!1},{name:"GEOGRID",expectUpdate:!1},{name:"ABM2",expectUpdate:!0},{name:"geojson",expectUpdate:!0},{name:"grid",expectUpdate:!1},{name:"access",expectUpdate:!0},{name:"GEOGRIDDATA",expectUpdate:!1},{name:"indicators",expectUpdate:!0},{name:"textual",expectUpdate:!0},{name:"scenarios",expectUpdate:!0},{name:"tui",expectUpdate:!0},{name:"geo_heatmap",expectUpdate:!0},{name:"traffic",expectUpdate:!0}]}},bn={map:{mapboxLink:"mapbox://styles/relnox/",mapboxRefreshString:"?fresh=true",mapStyles:{Dark:"ck0h5xn701bpr1dqs3he2lecq",Inverse:"cjlu6w5sc1dy12rmn4kl2zljn",Normal:"cl8dv36nv000t14qik9yg4ys6"},layers:{ABM:{endTime:86400,startTime:43200,animationSpeed:100}},initialViewState:{maxZoom:22,pitch:0,bearing:0,longitude:-122.41669,latitude:37.7853,zoom:13}}},yn={GRID_LAYER_CHECKBOX:{displayName:"CS Grid",cityIOmoduleName:"GEOGRID",initState:!0,initSliderValue:50},ABM_LAYER_CHECKBOX:{displayName:"Trips Volume",cityIOmoduleName:"ABM2",initState:!1,initSliderValue:5},AGGREGATED_TRIPS_LAYER_CHECKBOX:{displayName:"Origin-Destination",cityIOmoduleName:"ABM2",initState:!1,initSliderValue:20},ACCESS_LAYER_CHECKBOX:{displayName:"Heatmap",cityIOmoduleName:"access",initState:!1,initSliderValue:50,selected:0}},xn={RESET_VIEW_BUTTON:{displayName:"Reset View",initState:!1},ORTHO_VIEW_BUTTON:{displayName:"Ortho View",initState:!1},NORTH_VIEW_BUTTON:{displayName:"North View",initState:!1}};var wn=n(5332),_n=n(8387),Sn=n(3174),Cn=n(8812),En=n(8698);const Mn=["className","component"];var Pn=n(5430),Tn=n(7056);const kn=(0,Tn.A)("MuiBox",["root"]),Bn=(0,pn.A)(),On=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=e,o=(0,Sn.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Cn.A),s=A.forwardRef((function(e,s){const a=(0,g.A)(n),l=(0,En.A)(e),{className:c,component:u="div"}=l,d=(0,C.A)(l,Mn);return(0,m.jsx)(o,(0,h.A)({as:u,ref:s,className:(0,_n.A)(c,i?i(r):r),theme:t&&a[t]||a},d))}));return s}({themeId:y.A,defaultTheme:Bn,defaultClassName:kn.root,generateClassName:Pn.A.generate}),In=On;var Rn=n(8606),Ln=n(4535),Dn=n(6803),Fn=n(2400);function Nn(e){return(0,Fn.Ay)("MuiTypography",e)}(0,Tn.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const zn=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],jn=(0,Ln.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,Dn.A)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Un={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Gn={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Vn=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiTypography"}),r=(e=>Gn[e]||e)(n.color),i=(0,En.A)((0,h.A)({},n,{color:r})),{align:o="inherit",className:s,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:A=Un}=i,p=(0,C.A)(i,zn),g=(0,h.A)({},i,{align:o,color:r,className:s,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:A}),v=a||(u?"p":A[d]||Un[d])||"span",b=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e,a={root:["root",o,"inherit"!==e.align&&"align".concat((0,Dn.A)(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,Rn.A)(a,Nn,s)})(g);return(0,m.jsx)(jn,(0,h.A)({as:v,ref:t,ownerState:g,className:(0,_n.A)(b.root,s)},p))})),Hn=Vn;function Wn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Qn=n(3290),Jn=n(7266);function Kn(e){return(0,Fn.Ay)("MuiLinearProgress",e)}(0,Tn.A)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var Xn,Yn,qn,Zn,$n,er;const tr=["className","color","value","valueBuffer","variant"];let nr,rr,ir,or,sr,ar;const lr=(0,Qn.i7)(nr||(nr=Xn||(Xn=Wn(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),cr=(0,Qn.i7)(rr||(rr=Yn||(Yn=Wn(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),ur=(0,Qn.i7)(ir||(ir=qn||(qn=Wn(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),dr=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress["".concat(t,"Bg")]:"light"===e.palette.mode?(0,Jn.a)(e.palette[t].main,.62):(0,Jn.e$)(e.palette[t].main,.5),Ar=(0,Ln.Ay)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["color".concat((0,Dn.A)(n.color))],t[n.variant]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,h.A)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:dr(n,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),hr=(0,Ln.Ay)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t["dashedColor".concat((0,Dn.A)(n.color))]]}})((e=>{let{ownerState:t,theme:n}=e;const r=dr(n,t.color);return(0,h.A)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,Qn.AH)(or||(or=Zn||(Zn=Wn(["\n    animation: "," 3s infinite linear;\n  "]))),ur)),fr=(0,Ln.Ay)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t["barColor".concat((0,Dn.A)(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,h.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===t.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,Qn.AH)(sr||(sr=$n||($n=Wn(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),lr)})),pr=(0,Ln.Ay)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t["barColor".concat((0,Dn.A)(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((e=>{let{ownerState:t,theme:n}=e;return(0,h.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(n.vars||n).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:dr(n,t.color),transition:"transform .".concat(4,"s linear")})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,Qn.AH)(ar||(ar=er||(er=Wn(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),cr)})),gr=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiLinearProgress"}),{className:r,color:i="primary",value:o,valueBuffer:s,variant:a="indeterminate"}=n,l=(0,C.A)(n,tr),c=(0,h.A)({},n,{color:i,variant:a}),u=(e=>{const{classes:t,variant:n,color:r}=e,i={root:["root","color".concat((0,Dn.A)(r)),n],dashed:["dashed","dashedColor".concat((0,Dn.A)(r))],bar1:["bar","barColor".concat((0,Dn.A)(r)),("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&"barColor".concat((0,Dn.A)(r)),"buffer"===n&&"color".concat((0,Dn.A)(r)),("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,Rn.A)(i,Kn,t)})(c),d=R(),A={},p={bar1:{},bar2:{}};if("determinate"===a||"buffer"===a)if(void 0!==o){A["aria-valuenow"]=Math.round(o),A["aria-valuemin"]=0,A["aria-valuemax"]=100;let e=o-100;d&&(e=-e),p.bar1.transform="translateX(".concat(e,"%)")}else 0;if("buffer"===a)if(void 0!==s){let e=(s||0)-100;d&&(e=-e),p.bar2.transform="translateX(".concat(e,"%)")}else 0;return(0,m.jsxs)(Ar,(0,h.A)({className:(0,_n.A)(u.root,r),ownerState:c,role:"progressbar"},A,{ref:t},l,{children:["buffer"===a?(0,m.jsx)(hr,{className:u.dashed,ownerState:c}):null,(0,m.jsx)(fr,{className:u.bar1,ownerState:c,style:p.bar1}),"determinate"===a?null:(0,m.jsx)(pr,{className:u.bar2,ownerState:c,style:p.bar2})]}))})),mr=gr,vr=e=>{let{loadingModules:t,barHeight:n}=e;const r=n||2;return(0,m.jsx)(m.Fragment,{children:t.map(((e,t)=>{const n=10+t*r*10;return(0,m.jsxs)(In,{sx:{bottom:"".concat(n,"px"),width:"15vw",zIndex:999,position:"fixed",left:"1vw"},children:[(0,m.jsxs)(Hn,{variant:"caption",color:"secondary",style:{marginRight:"1vw"},children:[e,"..."]}),(0,m.jsx)(mr,{sx:{height:r},color:"secondary"})]},"box_"+e)}))})},br=e=>{const t=ue(),n=te((e=>e.cityIOdataState.cityIOdata)),{tableName:r}=e,i=vn.cityIO.cityIOmodules.map((e=>e.name)),[o,s]=(0,A.useState)([]),{sendJsonMessage:a,lastJsonMessage:l,readyState:c}=(0,wn.Ay)(vn.cityIO.websocketURL,{share:!0,shouldReconnect:()=>!0});return(0,A.useEffect)((()=>{console.log("Connection state changed"),c===wn.vj.OPEN&&(a({type:"LISTEN",content:{gridId:r}}),s(["Loading ".concat(r," data.")]))}),[c]),(0,A.useEffect)((()=>{if(null==l)return;console.log("Got a new message: ".concat(JSON.stringify(l)));let e=l.type;if("TABLE_SNAPSHOT"===e){console.log(" --- trying to update GEOGRID --- ".concat(JSON.stringify(l.content))),s([]);let e={...n,GEOGRID:l.content.GEOGRID,GEOGRIDDATA:l.content.GEOGRIDDATA,tableName:r};Object.keys(l.content).forEach((t=>{i.includes(t)&&"scenarios"!==t&&"indicators"!==t?e[t]=l.content[t]:"LAYERS"===t?e={...e,layers:l.content[t]}:"NUMERICINDICATORS"===t&&(e={...e,indicators:l.content[t]})})),a({type:"REQUEST_CORE_MODULES_LIST",content:{}}),a({type:"LIST_SCENARIOS",content:{}}),t(cn(e)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),t(un(!0))}else if("GEOGRIDDATA_UPDATE"===e){console.log(" --- trying to update GEOGRIDDATA --- ".concat(JSON.stringify(l.content)));let e={...n,GEOGRIDDATA:l.content};t(cn(e)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),t(un(!0))}else if("MODULE"===e){console.log(" --- trying to update MODULE data --- ".concat(JSON.stringify(l.content)));let e={...n};if("numeric"in l.content.moduleData){var o=[],c=[];l.content.moduleData.numeric.forEach((e=>{c.push(e),o.push(e.name)}));const t=e.indicators;t&&t.forEach((e=>{o.includes(e.name)||c.push(e)})),e={...e,indicators:c}}if("layers"in l.content.moduleData){var u=[],d=[];l.content.moduleData.layers.forEach((e=>{d.push(e),u.push(e.id)}));const t=e.layers;t&&t.forEach((e=>{u.includes(e.id)||d.push(e)})),e={...e,layers:d}}t(cn(e)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),t(un(!0))}else if("CORE_MODULES_LIST"===e){console.log(" --- trying to update CORE_MODULES_LIST --- ".concat(JSON.stringify(l.content)));let e={...n,core_modules:l.content};t(cn(e)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),t(un(!0))}else if("SCENARIOS"===e){console.log(" --- trying to update SCENARIOS --- ".concat(JSON.stringify(l.content)));let e={...n,scenarios:l.content};t(cn(e)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),t(un(!0))}}),[l]),(0,m.jsx)(vr,{loadingModules:o})};var yr=n(9751);function xr(){const e=(0,g.A)(b.A);return e[y.A]||e}const wr=A.createContext();function _r(e){return(0,Fn.Ay)("MuiGrid",e)}const Sr=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Cr=(0,Tn.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>"spacing-xs-".concat(e))),...["column-reverse","column","row-reverse","row"].map((e=>"direction-xs-".concat(e))),...["nowrap","wrap-reverse","wrap"].map((e=>"wrap-xs-".concat(e))),...Sr.map((e=>"grid-xs-".concat(e))),...Sr.map((e=>"grid-sm-".concat(e))),...Sr.map((e=>"grid-md-".concat(e))),...Sr.map((e=>"grid-lg-".concat(e))),...Sr.map((e=>"grid-xl-".concat(e)))]),Er=Cr,Mr=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Pr(e){const t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function Tr(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const kr=(0,Ln.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n["spacing-".concat(t,"-").concat(String(i))])})),r}(s,c,t));const d=[];return c.forEach((e=>{const r=n[e];r&&d.push(t["grid-".concat(e,"-").concat(String(r))])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,"row"!==i&&t["direction-xs-".concat(String(i))],"wrap"!==a&&t["wrap-xs-".concat(String(a))],...d]}})((e=>{let{ownerState:t}=e;return(0,h.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,yr.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,yr.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(Er.item)]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,yr.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=Tr({breakpoints:t.breakpoints.values,values:e})),o=(0,yr.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{marginTop:"-".concat(Pr(o)),["& > .".concat(Er.item)]:{paddingTop:Pr(o)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,["& > .".concat(Er.item)]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=(0,yr.kW)({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=Tr({breakpoints:t.breakpoints.values,values:e})),o=(0,yr.NI)({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{width:"calc(100% + ".concat(Pr(o),")"),marginLeft:"-".concat(Pr(o)),["& > .".concat(Er.item)]:{paddingLeft:Pr(o)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,["& > .".concat(Er.item)]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=(0,yr.kW)({values:r.columns,breakpoints:n.breakpoints.values}),a="object"===typeof s?s[i]:s;if(void 0===a||null===a)return e;const l="".concat(Math.round(t/a*1e8)/1e6,"%");let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t="calc(".concat(l," + ").concat(Pr(e),")");c={flexBasis:t,maxWidth:t}}}o=(0,h.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const Br=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e="spacing-".concat(t,"-").concat(String(r));n.push(e)}})),n}(o,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push("grid-".concat(t,"-").concat(String(n)))}));const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,"row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==s&&"wrap-xs-".concat(String(s)),...u]};return(0,Rn.A)(d,_r,t)},Or=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiGrid"}),{breakpoints:r}=xr(),i=(0,En.A)(n),{className:o,columns:s,columnSpacing:a,component:l="div",container:c=!1,direction:u="row",item:d=!1,rowSpacing:p,spacing:g=0,wrap:v="wrap",zeroMinWidth:b=!1}=i,y=(0,C.A)(i,Mr),x=p||g,w=a||g,_=A.useContext(wr),S=c?s||12:_,E={},M=(0,h.A)({},y);r.keys.forEach((e=>{null!=y[e]&&(E[e]=y[e],delete M[e])}));const P=(0,h.A)({},i,{columns:S,container:c,direction:u,item:d,rowSpacing:x,columnSpacing:w,wrap:v,zeroMinWidth:b,spacing:g},E,{breakpoints:r.keys}),T=Br(P);return(0,m.jsx)(wr.Provider,{value:S,children:(0,m.jsx)(kr,(0,h.A)({ownerState:P,className:(0,_n.A)(T.root,o),as:l,ref:t},M))})}));const Ir=Or;function Rr(e){return"string"===typeof e}var Lr=n(5849),Dr=n(3319),Fr=n(7844);function Nr(e,t){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nr(e,t)}function zr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Nr(e,t)}const jr=A.createContext(null);function Ur(e,t){var n=Object.create(null);return e&&A.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,A.isValidElement)(e)?t(e):e}(e)})),n}function Gr(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Vr(e,t,n){var r=Ur(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,r);return Object.keys(i).forEach((function(o){var s=i[o];if((0,A.isValidElement)(s)){var a=o in t,l=o in r,c=t[o],u=(0,A.isValidElement)(c)&&!c.props.in;!l||a&&!u?l||!a||u?l&&a&&(0,A.isValidElement)(c)&&(i[o]=(0,A.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:Gr(s,"exit",e),enter:Gr(s,"enter",e)})):i[o]=(0,A.cloneElement)(s,{in:!1}):i[o]=(0,A.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:Gr(s,"exit",e),enter:Gr(s,"enter",e)})}})),i}var Hr=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Wr=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}zr(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,Ur(n.children,(function(e){return(0,A.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:Gr(e,"appear",n),enter:Gr(e,"enter",n),exit:Gr(e,"exit",n)})}))):Vr(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=Ur(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,h.A)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,C.A)(e,["component","childFactory"]),i=this.state.contextValue,o=Hr(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?A.createElement(jr.Provider,{value:i},o):A.createElement(jr.Provider,{value:i},A.createElement(t,r,o))},t}(A.Component);Wr.propTypes={},Wr.defaultProps={component:"div",childFactory:function(e){return e}};const Qr=Wr;var Jr=n(1140);const Kr=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:l,timeout:c}=e,[u,d]=A.useState(!1),h=(0,_n.A)(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:s,height:s,top:-s/2+o,left:-s/2+i},p=(0,_n.A)(n.child,u&&n.childLeaving,r&&n.childPulsate);return a||u||d(!0),A.useEffect((()=>{if(!a&&null!=l){const e=setTimeout(l,c);return()=>{clearTimeout(e)}}}),[l,a,c]),(0,m.jsx)("span",{className:h,style:f,children:(0,m.jsx)("span",{className:p})})};const Xr=(0,Tn.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var Yr,qr,Zr,$r;const ei=["center","classes","className"];let ti,ni,ri,ii;const oi=(0,Qn.i7)(ti||(ti=Yr||(Yr=Wn(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),si=(0,Qn.i7)(ni||(ni=qr||(qr=Wn(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),ai=(0,Qn.i7)(ri||(ri=Zr||(Zr=Wn(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),li=(0,Ln.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ci=(0,Ln.Ay)(Kr,{name:"MuiTouchRipple",slot:"Ripple"})(ii||(ii=$r||($r=Wn(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Xr.rippleVisible,oi,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Xr.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),Xr.child,Xr.childLeaving,si,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Xr.childPulsate,ai,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),ui=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o}=n,s=(0,C.A)(n,ei),[a,l]=A.useState([]),c=A.useRef(0),u=A.useRef(null);A.useEffect((()=>{u.current&&(u.current(),u.current=null)}),[a]);const d=A.useRef(!1),p=(0,Jr.A)(),g=A.useRef(null),v=A.useRef(null),b=A.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:o,cb:s}=e;l((e=>[...e,(0,m.jsx)(ci,{classes:{ripple:(0,_n.A)(i.ripple,Xr.ripple),rippleVisible:(0,_n.A)(i.rippleVisible,Xr.rippleVisible),ripplePulsate:(0,_n.A)(i.ripplePulsate,Xr.ripplePulsate),child:(0,_n.A)(i.child,Xr.child),childLeaving:(0,_n.A)(i.childLeaving,Xr.childLeaving),childPulsate:(0,_n.A)(i.childPulsate,Xr.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},c.current)])),c.current+=1,u.current=s}),[i]),y=A.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&d.current)return void(d.current=!1);"touchstart"===(null==e?void 0:e.type)&&(d.current=!0);const a=s?null:v.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,A;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)A=Math.sqrt((2*l.width**2+l.height**2)/3),A%2===0&&(A+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;A=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===g.current&&(g.current=()=>{b({pulsate:i,rippleX:c,rippleY:u,rippleSize:A,cb:n})},p.start(80,(()=>{g.current&&(g.current(),g.current=null)}))):b({pulsate:i,rippleX:c,rippleY:u,rippleSize:A,cb:n})}),[r,b,p]),x=A.useCallback((()=>{y({},{pulsate:!0})}),[y]),w=A.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&g.current)return g.current(),g.current=null,void p.start(0,(()=>{w(e,t)}));g.current=null,l((e=>e.length>0?e.slice(1):e)),u.current=t}),[p]);return A.useImperativeHandle(t,(()=>({pulsate:x,start:y,stop:w})),[x,y,w]),(0,m.jsx)(li,(0,h.A)({className:(0,_n.A)(Xr.root,i.root,o),ref:v},s,{children:(0,m.jsx)(Qr,{component:null,exit:!0,children:a})}))})),di=ui;function Ai(e){return(0,Fn.Ay)("MuiButtonBase",e)}const hi=(0,Tn.A)("MuiButtonBase",["root","disabled","focusVisible"]),fi=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],pi=(0,Ln.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(hi.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),gi=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:s,component:a="button",disabled:l=!1,disableRipple:c=!1,disableTouchRipple:u=!1,focusRipple:d=!1,LinkComponent:p="a",onBlur:g,onClick:v,onContextMenu:b,onDragLeave:y,onFocus:x,onFocusVisible:w,onKeyDown:_,onKeyUp:S,onMouseDown:E,onMouseLeave:M,onMouseUp:P,onTouchEnd:T,onTouchMove:k,onTouchStart:B,tabIndex:O=0,TouchRippleProps:I,touchRippleRef:R,type:L}=n,D=(0,C.A)(n,fi),F=A.useRef(null),N=A.useRef(null),z=(0,Lr.A)(N,R),{isFocusVisibleRef:j,onFocus:U,onBlur:G,ref:V}=(0,Fr.A)(),[H,W]=A.useState(!1);l&&H&&W(!1),A.useImperativeHandle(r,(()=>({focusVisible:()=>{W(!0),F.current.focus()}})),[]);const[Q,J]=A.useState(!1);A.useEffect((()=>{J(!0)}),[]);const K=Q&&!c&&!l;function X(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return(0,Dr.A)((r=>{t&&t(r);return!n&&N.current&&N.current[e](r),!0}))}A.useEffect((()=>{H&&d&&!c&&Q&&N.current.pulsate()}),[c,d,H,Q]);const Y=X("start",E),q=X("stop",b),Z=X("stop",y),$=X("stop",P),ee=X("stop",(e=>{H&&e.preventDefault(),M&&M(e)})),te=X("start",B),ne=X("stop",T),re=X("stop",k),ie=X("stop",(e=>{G(e),!1===j.current&&W(!1),g&&g(e)}),!1),oe=(0,Dr.A)((e=>{F.current||(F.current=e.currentTarget),U(e),!0===j.current&&(W(!0),w&&w(e)),x&&x(e)})),se=()=>{const e=F.current;return a&&"button"!==a&&!("A"===e.tagName&&e.href)},ae=A.useRef(!1),le=(0,Dr.A)((e=>{d&&!ae.current&&H&&N.current&&" "===e.key&&(ae.current=!0,N.current.stop(e,(()=>{N.current.start(e)}))),e.target===e.currentTarget&&se()&&" "===e.key&&e.preventDefault(),_&&_(e),e.target===e.currentTarget&&se()&&"Enter"===e.key&&!l&&(e.preventDefault(),v&&v(e))})),ce=(0,Dr.A)((e=>{d&&" "===e.key&&N.current&&H&&!e.defaultPrevented&&(ae.current=!1,N.current.stop(e,(()=>{N.current.pulsate(e)}))),S&&S(e),v&&e.target===e.currentTarget&&se()&&" "===e.key&&!e.defaultPrevented&&v(e)}));let ue=a;"button"===ue&&(D.href||D.to)&&(ue=p);const de={};"button"===ue?(de.type=void 0===L?"button":L,de.disabled=l):(D.href||D.to||(de.role="button"),l&&(de["aria-disabled"]=l));const Ae=(0,Lr.A)(t,V,F);const he=(0,h.A)({},n,{centerRipple:i,component:a,disabled:l,disableRipple:c,disableTouchRipple:u,focusRipple:d,tabIndex:O,focusVisible:H}),fe=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},s=(0,Rn.A)(o,Ai,i);return n&&r&&(s.root+=" ".concat(r)),s})(he);return(0,m.jsxs)(pi,(0,h.A)({as:ue,className:(0,_n.A)(fe.root,s),ownerState:he,onBlur:ie,onClick:v,onContextMenu:q,onFocus:oe,onKeyDown:le,onKeyUp:ce,onMouseDown:Y,onMouseLeave:ee,onMouseUp:$,onDragLeave:Z,onTouchEnd:ne,onTouchMove:re,onTouchStart:te,ref:Ae,tabIndex:l?-1:O,type:L},de,D,{children:[o,K?(0,m.jsx)(di,(0,h.A)({ref:z,center:i},I)):null]}))}));var mi=n(154),vi=n(5013);const bi=A.createContext({});function yi(e){return(0,Fn.Ay)("MuiListItem",e)}const xi=(0,Tn.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);const wi=(0,Tn.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function _i(e){return(0,Fn.Ay)("MuiListItemSecondaryAction",e)}(0,Tn.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const Si=["className"],Ci=(0,Ln.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((e=>{let{ownerState:t}=e;return(0,h.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),Ei=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiListItemSecondaryAction"}),{className:r}=n,i=(0,C.A)(n,Si),o=A.useContext(bi),s=(0,h.A)({},n,{disableGutters:o.disableGutters}),a=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,Rn.A)(r,_i,n)})(s);return(0,m.jsx)(Ci,(0,h.A)({className:(0,_n.A)(a.root,r),ownerState:s,ref:t},i))}));Ei.muiName="ListItemSecondaryAction";const Mi=Ei,Pi=["className"],Ti=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],ki=(0,Ln.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,h.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(wi.root)]:{paddingRight:48}},{["&.".concat(xi.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(xi.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Jn.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(xi.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Jn.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(xi.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(xi.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Jn.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Jn.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),Bi=(0,Ln.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Oi=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiListItem"}),{alignItems:r="center",autoFocus:i=!1,button:o=!1,children:s,className:a,component:l,components:c={},componentsProps:u={},ContainerComponent:d="li",ContainerProps:{className:p}={},dense:g=!1,disabled:v=!1,disableGutters:b=!1,disablePadding:y=!1,divider:x=!1,focusVisibleClassName:w,secondaryAction:_,selected:S=!1,slotProps:E={},slots:M={}}=n,P=(0,C.A)(n.ContainerProps,Pi),T=(0,C.A)(n,Ti),k=A.useContext(bi),B=A.useMemo((()=>({dense:g||k.dense||!1,alignItems:r,disableGutters:b})),[r,k.dense,g,b]),O=A.useRef(null);(0,vi.A)((()=>{i&&O.current&&O.current.focus()}),[i]);const I=A.Children.toArray(s),R=I.length&&(0,mi.A)(I[I.length-1],["ListItemSecondaryAction"]),L=(0,h.A)({},n,{alignItems:r,autoFocus:i,button:o,dense:B.dense,disabled:v,disableGutters:b,disablePadding:y,divider:x,hasSecondaryAction:R,selected:S}),D=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=e,d={root:["root",i&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,Rn.A)(d,yi,r)})(L),F=(0,Lr.A)(O,t),N=M.root||c.Root||ki,z=E.root||u.root||{},j=(0,h.A)({className:(0,_n.A)(D.root,z.className,a),disabled:v},T);let U=l||"li";return o&&(j.component=l||"div",j.focusVisibleClassName=(0,_n.A)(xi.focusVisible,w),U=gi),R?(U=j.component||l?U:"div","li"===d&&("li"===U?U="div":"li"===j.component&&(j.component="div")),(0,m.jsx)(bi.Provider,{value:B,children:(0,m.jsxs)(Bi,(0,h.A)({as:d,className:(0,_n.A)(D.container,p),ref:F,ownerState:L},P,{children:[(0,m.jsx)(N,(0,h.A)({},z,!Rr(N)&&{as:U,ownerState:(0,h.A)({},L,z.ownerState)},j,{children:I})),I.pop()]}))})):(0,m.jsx)(bi.Provider,{value:B,children:(0,m.jsxs)(N,(0,h.A)({},z,{as:U,ref:F},!Rr(N)&&{ownerState:(0,h.A)({},L,z.ownerState)},j,{children:[I,_&&(0,m.jsx)(Mi,{children:_})]}))})})),Ii=Oi;var Ri=n(2018),Li=n(1475);function Di(e){return(0,Fn.Ay)("MuiButton",e)}const Fi=(0,Tn.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const Ni=A.createContext({});const zi=A.createContext(void 0),ji=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ui=e=>(0,h.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Gi=(0,Ln.Ay)(gi,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,Dn.A)(n.color))],t["size".concat((0,Dn.A)(n.size))],t["".concat(n.variant,"Size").concat((0,Dn.A)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;const o="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],s="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,h.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,h.A)({textDecoration:"none",backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((t.vars||t).palette[n.color].main),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,h.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),["&.".concat(Fi.focusVisible)]:(0,h.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),["&.".concat(Fi.disabled)]:(0,h.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?"1px solid rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,Jn.X4)(t.palette[n.color].main,.5))},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:o,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(Fi.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(Fi.disabled)]:{boxShadow:"none"}}})),Vi=(0,Ln.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t["iconSize".concat((0,Dn.A)(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,h.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Ui(t))})),Hi=(0,Ln.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t["iconSize".concat((0,Dn.A)(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,h.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Ui(t))})),Wi=A.forwardRef((function(e,t){const n=A.useContext(Ni),r=A.useContext(zi),i=(0,Ri.A)(n,e),o=(0,f.A)({props:i,name:"MuiButton"}),{children:s,color:a="primary",component:l="button",className:c,disabled:u=!1,disableElevation:d=!1,disableFocusRipple:p=!1,endIcon:g,focusVisibleClassName:v,fullWidth:b=!1,size:y="medium",startIcon:x,type:w,variant:_="text"}=o,S=(0,C.A)(o,ji),E=(0,h.A)({},o,{color:a,component:l,disabled:u,disableElevation:d,disableFocusRipple:p,fullWidth:b,size:y,type:w,variant:_}),M=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=e,a={root:["root",o,"".concat(o).concat((0,Dn.A)(t)),"size".concat((0,Dn.A)(i)),"".concat(o,"Size").concat((0,Dn.A)(i)),"color".concat((0,Dn.A)(t)),n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon","iconSize".concat((0,Dn.A)(i))],endIcon:["icon","endIcon","iconSize".concat((0,Dn.A)(i))]},l=(0,Rn.A)(a,Di,s);return(0,h.A)({},s,l)})(E),P=x&&(0,m.jsx)(Vi,{className:M.startIcon,ownerState:E,children:x}),T=g&&(0,m.jsx)(Hi,{className:M.endIcon,ownerState:E,children:g}),k=r||"";return(0,m.jsxs)(Gi,(0,h.A)({ownerState:E,className:(0,_n.A)(n.className,M.root,c,k),component:l,disabled:u,focusRipple:!p,focusVisibleClassName:(0,_n.A)(M.focusVisible,v),ref:t,type:w},S,{classes:M,children:[P,s,T]}))})),Qi=Wi,Ji=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function Ki(e){return(0,Fn.Ay)("MuiPaper",e)}(0,Tn.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Xi=["className","component","elevation","square","variant"],Yi=(0,Ln.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,h.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&(0,h.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Jn.X4)("#fff",Ji(n.elevation)),", ").concat((0,Jn.X4)("#fff",Ji(n.elevation)),")")},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),qi=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=(0,C.A)(n,Xi),c=(0,h.A)({},n,{component:i,elevation:o,square:s,variant:a}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,Rn.A)(o,Ki,i)})(c);return(0,m.jsx)(Yi,(0,h.A)({as:i,ownerState:c,className:(0,_n.A)(u.root,r),ref:t},l))}));function Zi(e){return(0,Fn.Ay)("MuiCard",e)}(0,Tn.A)("MuiCard",["root"]);const $i=["className","raised"],eo=(0,Ln.Ay)(qi,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),to=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=n,o=(0,C.A)(n,$i),s=(0,h.A)({},n,{raised:i}),a=(e=>{const{classes:t}=e;return(0,Rn.A)({root:["root"]},Zi,t)})(s);return(0,m.jsx)(eo,(0,h.A)({className:(0,_n.A)(a.root,r),elevation:i?8:void 0,ref:t,ownerState:s},o))}));function no(e){return(0,Fn.Ay)("MuiCardContent",e)}(0,Tn.A)("MuiCardContent",["root"]);const ro=["className","component"],io=(0,Ln.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),oo=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=n,o=(0,C.A)(n,ro),s=(0,h.A)({},n,{component:i}),a=(e=>{const{classes:t}=e;return(0,Rn.A)({root:["root"]},no,t)})(s);return(0,m.jsx)(io,(0,h.A)({as:i,className:(0,_n.A)(a.root,r),ownerState:s,ref:t},o))}));function so(e){return(0,Fn.Ay)("MuiDivider",e)}(0,Tn.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const ao=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],lo=(0,Ln.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,Jn.X4)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,h.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider)}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider)}})}),(e=>{let{ownerState:t}=e;return(0,h.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),co=(0,Ln.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),uo=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:o,component:s=(i?"div":"hr"),flexItem:a=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==s?"separator":void 0),textAlign:d="center",variant:A="fullWidth"}=n,p=(0,C.A)(n,ao),g=(0,h.A)({},n,{absolute:r,component:s,flexItem:a,light:l,orientation:c,role:u,textAlign:d,variant:A}),v=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:l}=e,c={root:["root",t&&"absolute",l,o&&"light","vertical"===s&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===s&&"withChildrenVertical","right"===a&&"vertical"!==s&&"textAlignRight","left"===a&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,Rn.A)(c,so,r)})(g);return(0,m.jsx)(lo,(0,h.A)({as:s,className:(0,_n.A)(v.root,o),role:u,ref:t,ownerState:g},p,{children:i?(0,m.jsx)(co,{className:v.wrapper,ownerState:g,children:i}):null}))}));uo.muiSkipListHighlight=!0;const Ao=uo;var ho=n(7042);function fo(e,t,n){return void 0===e||Rr(e)?t:(0,h.A)({},t,{ownerState:(0,h.A)({},t.ownerState,n)})}function po(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}function go(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}const mo=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function vo(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,s=(0,C.A)(e,mo),a=o?{}:function(e,t,n){return"function"===typeof e?e(t,n):e}(r,i),{props:l,internalRef:c}=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=(0,_n.A)(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),t=(0,h.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),s=(0,h.A)({},n,i,r);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=po((0,h.A)({},i,r)),a=go(r),l=go(i),c=t(s),u=(0,_n.A)(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,h.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),A=(0,h.A)({},c,n,l,a);return u.length>0&&(A.className=u),Object.keys(d).length>0&&(A.style=d),{props:A,internalRef:c.ref}}((0,h.A)({},s,{externalSlotProps:a})),u=(0,ho.A)(c,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref);return fo(n,(0,h.A)({},l,{ref:u}),i)}var bo=n(2144),yo=n(1944),xo=n(7040),wo=n(932),_o=n(3844),So=n(4626);const Co={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Eo(e,t){return e-t}function Mo(e,t){var n;const{index:r}=null!=(n=e.reduce(((e,n,r)=>{const i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null))?n:{};return r}function Po(e,t){if(void 0!==t.current&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function To(e,t,n){return 100*(e-t)/(n-t)}function ko(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function Bo(e){let{values:t,newValue:n,index:r}=e;const i=t.slice();return i[r]=n,i.sort(Eo)}function Oo(e){let{sliderRef:t,activeIndex:n,setActive:r}=e;var i,o;const s=(0,bo.A)(t.current);var a;null!=(i=t.current)&&i.contains(s.activeElement)&&Number(null==s||null==(o=s.activeElement)?void 0:o.getAttribute("data-index"))===n||(null==(a=t.current)||a.querySelector('[type="range"][data-index="'.concat(n,'"]')).focus());r&&r(n)}function Io(e,t){return"number"===typeof e&&"number"===typeof t?e===t:"object"===typeof e&&"object"===typeof t&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}(e,t)}const Ro={horizontal:{offset:e=>({left:"".concat(e,"%")}),leap:e=>({width:"".concat(e,"%")})},"horizontal-reverse":{offset:e=>({right:"".concat(e,"%")}),leap:e=>({width:"".concat(e,"%")})},vertical:{offset:e=>({bottom:"".concat(e,"%")}),leap:e=>({height:"".concat(e,"%")})}},Lo=e=>e;let Do;function Fo(){return void 0===Do&&(Do="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),Do}function No(e){const{"aria-labelledby":t,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:s=!1,max:a=100,min:l=0,name:c,onChange:u,onChangeCommitted:d,orientation:f="horizontal",rootRef:p,scale:g=Lo,step:m=1,shiftStep:v=10,tabIndex:b,value:y}=e,x=A.useRef(),[w,_]=A.useState(-1),[S,C]=A.useState(-1),[E,M]=A.useState(!1),P=A.useRef(0),[T,k]=(0,yo.A)({controlled:y,default:null!=n?n:l,name:"Slider"}),B=u&&((e,t,n)=>{const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:c}}),u(i,t,n)}),O=Array.isArray(T);let I=O?T.slice().sort(Eo):[T];I=I.map((e=>null==e?l:(0,xo.A)(e,l,a)));const R=!0===s&&null!==m?[...Array(Math.floor((a-l)/m)+1)].map(((e,t)=>({value:l+m*t}))):s||[],L=R.map((e=>e.value)),{isFocusVisibleRef:D,onBlur:F,onFocus:N,ref:z}=(0,wo.A)(),[j,U]=A.useState(-1),G=A.useRef(),V=(0,ho.A)(z,G),H=(0,ho.A)(p,V),W=e=>t=>{var n;const r=Number(t.currentTarget.getAttribute("data-index"));N(t),!0===D.current&&U(r),C(r),null==e||null==(n=e.onFocus)||n.call(e,t)},Q=e=>t=>{var n;F(t),!1===D.current&&U(-1),C(-1),null==e||null==(n=e.onBlur)||n.call(e,t)},J=(e,t)=>{const n=Number(e.currentTarget.getAttribute("data-index")),r=I[n],o=L.indexOf(r);let s=t;if(R&&null==m){const e=L[L.length-1];s=s>e?e:s<L[0]?L[0]:s<r?L[o-1]:L[o+1]}if(s=(0,xo.A)(s,l,a),O){i&&(s=(0,xo.A)(s,I[n-1]||-1/0,I[n+1]||1/0));const e=s;s=Bo({values:I,newValue:s,index:n});let t=n;i||(t=s.indexOf(e)),Oo({sliderRef:G,activeIndex:t})}k(s),U(n),B&&!Io(s,T)&&B(e,s,n),d&&d(e,s)},K=e=>t=>{var n;if(null!==m){const e=Number(t.currentTarget.getAttribute("data-index")),n=I[e];let r=null;("ArrowLeft"===t.key||"ArrowDown"===t.key)&&t.shiftKey||"PageDown"===t.key?r=Math.max(n-v,l):(("ArrowRight"===t.key||"ArrowUp"===t.key)&&t.shiftKey||"PageUp"===t.key)&&(r=Math.min(n+v,a)),null!==r&&(J(t,r),t.preventDefault())}null==e||null==(n=e.onKeyDown)||n.call(e,t)};(0,_o.A)((()=>{var e;r&&G.current.contains(document.activeElement)&&(null==(e=document.activeElement)||e.blur())}),[r]),r&&-1!==w&&_(-1),r&&-1!==j&&U(-1);const X=A.useRef();let Y=f;o&&"horizontal"===f&&(Y+="-reverse");const q=e=>{let{finger:t,move:n=!1}=e;const{current:r}=G,{width:o,height:s,bottom:c,left:u}=r.getBoundingClientRect();let d,A;if(d=0===Y.indexOf("vertical")?(c-t.y)/s:(t.x-u)/o,-1!==Y.indexOf("-reverse")&&(d=1-d),A=function(e,t,n){return(n-t)*e+t}(d,l,a),m)A=ko(A,m,l);else{const e=Mo(L,A);A=L[e]}A=(0,xo.A)(A,l,a);let h=0;if(O){h=n?X.current:Mo(I,A),i&&(A=(0,xo.A)(A,I[h-1]||-1/0,I[h+1]||1/0));const e=A;A=Bo({values:I,newValue:A,index:h}),i&&n||(h=A.indexOf(e),X.current=h)}return{newValue:A,activeIndex:h}},Z=(0,So.A)((e=>{const t=Po(e,x);if(!t)return;if(P.current+=1,"mousemove"===e.type&&0===e.buttons)return void $(e);const{newValue:n,activeIndex:r}=q({finger:t,move:!0});Oo({sliderRef:G,activeIndex:r,setActive:_}),k(n),!E&&P.current>2&&M(!0),B&&!Io(n,T)&&B(e,n,r)})),$=(0,So.A)((e=>{const t=Po(e,x);if(M(!1),!t)return;const{newValue:n}=q({finger:t,move:!0});_(-1),"touchend"===e.type&&C(-1),d&&d(e,n),x.current=void 0,te()})),ee=(0,So.A)((e=>{if(r)return;Fo()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(x.current=t.identifier);const n=Po(e,x);if(!1!==n){const{newValue:t,activeIndex:r}=q({finger:n});Oo({sliderRef:G,activeIndex:r,setActive:_}),k(t),B&&!Io(t,T)&&B(e,t,r)}P.current=0;const i=(0,bo.A)(G.current);i.addEventListener("touchmove",Z,{passive:!0}),i.addEventListener("touchend",$,{passive:!0})})),te=A.useCallback((()=>{const e=(0,bo.A)(G.current);e.removeEventListener("mousemove",Z),e.removeEventListener("mouseup",$),e.removeEventListener("touchmove",Z),e.removeEventListener("touchend",$)}),[$,Z]);A.useEffect((()=>{const{current:e}=G;return e.addEventListener("touchstart",ee,{passive:Fo()}),()=>{e.removeEventListener("touchstart",ee),te()}}),[te,ee]),A.useEffect((()=>{r&&te()}),[r,te]);const ne=To(O?I[0]:l,l,a),re=To(I[I.length-1],l,a)-ne,ie=e=>t=>{var n;null==(n=e.onMouseLeave)||n.call(e,t),C(-1)};return{active:w,axis:Y,axisProps:Ro,dragging:E,focusedThumbIndex:j,getHiddenInputProps:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const s=po(n),u={onChange:(d=s||{},e=>{var t;null==(t=d.onChange)||t.call(d,e),J(e,e.target.valueAsNumber)}),onFocus:W(s||{}),onBlur:Q(s||{}),onKeyDown:K(s||{})};var d;const A=(0,h.A)({},s,u);return(0,h.A)({tabIndex:b,"aria-labelledby":t,"aria-orientation":f,"aria-valuemax":g(a),"aria-valuemin":g(l),name:c,type:"range",min:e.min,max:e.max,step:null===e.step&&e.marks?"any":null!=(i=e.step)?i:void 0,disabled:r},n,A,{style:(0,h.A)({},Co,{direction:o?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=po(e),n={onMouseDown:(i=t||{},e=>{var t;if(null==(t=i.onMouseDown)||t.call(i,e),r)return;if(e.defaultPrevented)return;if(0!==e.button)return;e.preventDefault();const n=Po(e,x);if(!1!==n){const{newValue:t,activeIndex:r}=q({finger:n});Oo({sliderRef:G,activeIndex:r,setActive:_}),k(t),B&&!Io(t,T)&&B(e,t,r)}P.current=0;const o=(0,bo.A)(G.current);o.addEventListener("mousemove",Z,{passive:!0}),o.addEventListener("mouseup",$)})};var i;const o=(0,h.A)({},t,n);return(0,h.A)({},e,{ref:H},o)},getThumbProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=po(e),n={onMouseOver:(r=t||{},e=>{var t;null==(t=r.onMouseOver)||t.call(r,e);const n=Number(e.currentTarget.getAttribute("data-index"));C(n)}),onMouseLeave:ie(t||{})};var r;return(0,h.A)({},e,t,n)},marks:R,open:S,range:O,rootRef:H,trackLeap:re,trackOffset:ne,values:I,getThumbStyle:e=>({pointerEvents:-1!==w&&w!==e?"none":void 0})}}function zo(e){return f.A}var jo=n(7123);const Uo=e=>!e||!Rr(e);function Go(e){return(0,Fn.Ay)("MuiSlider",e)}const Vo=(0,Tn.A)("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);const Ho=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"],Wo=zo();function Qo(e){return e}const Jo=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["color".concat((0,Dn.A)(n.color))],"medium"!==n.size&&t["size".concat((0,Dn.A)(n.size))],n.marked&&t.marked,"vertical"===n.orientation&&t.vertical,"inverted"===n.track&&t.trackInverted,!1===n.track&&t.trackFalse]}})((e=>{let{theme:t}=e;var n;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},["&.".concat(Vo.disabled)]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},["&.".concat(Vo.dragging)]:{["& .".concat(Vo.thumb,", & .").concat(Vo.track)]:{transition:"none"}},variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}})),Ko=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Xo=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;var n;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e,track:"inverted"},style:(0,h.A)({},t.vars?{backgroundColor:t.vars.palette.Slider["".concat(e,"Track")],borderColor:t.vars.palette.Slider["".concat(e,"Track")]}:(0,h.A)({backgroundColor:(0,Jn.a)(t.palette[e].main,.62),borderColor:(0,Jn.a)(t.palette[e].main,.62)},t.applyStyles("dark",{backgroundColor:(0,Jn.e$)(t.palette[e].main,.5)}),t.applyStyles("dark",{borderColor:(0,Jn.e$)(t.palette[e].main,.5)})))})))]}})),Yo=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t["thumbColor".concat((0,Dn.A)(n.color))],"medium"!==n.size&&t["thumbSize".concat((0,Dn.A)(n.size))]]}})((e=>{let{theme:t}=e;var n;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},["&.".concat(Vo.disabled)]:{"&:hover":{boxShadow:"none"}},variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n;return(null!=(n=t.vars)?n:t).palette[e].main})).map((e=>({props:{color:e},style:{["&:hover, &.".concat(Vo.focusVisible)]:(0,h.A)({},t.vars?{boxShadow:"0px 0px 0px 8px rgba(".concat(t.vars.palette[e].mainChannel," / 0.16)")}:{boxShadow:"0px 0px 0px 8px ".concat((0,Jn.X4)(t.palette[e].main,.16))},{"@media (hover: none)":{boxShadow:"none"}}),["&.".concat(Vo.active)]:(0,h.A)({},t.vars?{boxShadow:"0px 0px 0px 14px rgba(".concat(t.vars.palette[e].mainChannel," / 0.16)}")}:{boxShadow:"0px 0px 0px 14px ".concat((0,Jn.X4)(t.palette[e].main,.16))})}}))),{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}}]}})),qo=(0,Ln.Ay)((function(e){const{children:t,className:n,value:r}=e,i=(e=>{const{open:t}=e;return{offset:(0,_n.A)(t&&Vo.valueLabelOpen),circle:Vo.valueLabelCircle,label:Vo.valueLabelLabel}})(e);return t?A.cloneElement(t,{className:(0,_n.A)(t.props.className)},(0,m.jsxs)(A.Fragment,{children:[t.props.children,(0,m.jsx)("span",{className:(0,_n.A)(i.offset,n),"aria-hidden":!0,children:(0,m.jsx)("span",{className:i.circle,children:(0,m.jsx)("span",{className:i.label,children:r})})})]})):null}),{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})((e=>{let{theme:t}=e;return(0,h.A)({zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},["&.".concat(Vo.valueLabelOpen)]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},["&.".concat(Vo.valueLabelOpen)]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})})),Zo=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>(0,jo.A)(e)&&"markActive"!==e,overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})((e=>{let{theme:t}=e;return{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}})),$o=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>(0,jo.A)(e)&&"markLabelActive"!==e,overridesResolver:(e,t)=>t.markLabel})((e=>{let{theme:t}=e;return(0,h.A)({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]})})),es=e=>{let{children:t}=e;return t},ts=A.forwardRef((function(e,t){var n,r,i,o,s,a,l,c,u,d,f,p,g,v,b,y,x,w,_,S,E,M,P,T;const k=Wo({props:e,name:"MuiSlider"}),B=R(),{"aria-label":O,"aria-valuetext":I,"aria-labelledby":L,component:D="span",components:F={},componentsProps:N={},color:z="primary",classes:j,className:U,disableSwap:G=!1,disabled:V=!1,getAriaLabel:H,getAriaValueText:W,marks:Q=!1,max:J=100,min:K=0,orientation:X="horizontal",shiftStep:Y=10,size:q="medium",step:Z=1,scale:$=Qo,slotProps:ee,slots:te,track:ne="normal",valueLabelDisplay:re="off",valueLabelFormat:ie=Qo}=k,oe=(0,C.A)(k,Ho),se=(0,h.A)({},k,{isRtl:B,max:J,min:K,classes:j,disabled:V,disableSwap:G,orientation:X,marks:Q,color:z,size:q,step:Z,shiftStep:Y,scale:$,track:ne,valueLabelDisplay:re,valueLabelFormat:ie}),{axisProps:ae,getRootProps:le,getHiddenInputProps:ce,getThumbProps:ue,open:de,active:Ae,axis:he,focusedThumbIndex:fe,range:pe,dragging:ge,marks:me,values:ve,trackOffset:be,trackLeap:ye,getThumbStyle:xe}=No((0,h.A)({},se,{rootRef:t}));se.marked=me.length>0&&me.some((e=>e.label)),se.dragging=ge,se.focusedThumbIndex=fe;const we=(e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:o,classes:s,color:a,size:l}=e,c={root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===o&&"trackInverted",!1===o&&"trackFalse",a&&"color".concat((0,Dn.A)(a)),l&&"size".concat((0,Dn.A)(l))],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&"thumbSize".concat((0,Dn.A)(l)),a&&"thumbColor".concat((0,Dn.A)(a))],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,Rn.A)(c,Go,s)})(se),_e=null!=(n=null!=(r=null==te?void 0:te.root)?r:F.Root)?n:Jo,Se=null!=(i=null!=(o=null==te?void 0:te.rail)?o:F.Rail)?i:Ko,Ce=null!=(s=null!=(a=null==te?void 0:te.track)?a:F.Track)?s:Xo,Ee=null!=(l=null!=(c=null==te?void 0:te.thumb)?c:F.Thumb)?l:Yo,Me=null!=(u=null!=(d=null==te?void 0:te.valueLabel)?d:F.ValueLabel)?u:qo,Pe=null!=(f=null!=(p=null==te?void 0:te.mark)?p:F.Mark)?f:Zo,Te=null!=(g=null!=(v=null==te?void 0:te.markLabel)?v:F.MarkLabel)?g:$o,ke=null!=(b=null!=(y=null==te?void 0:te.input)?y:F.Input)?b:"input",Be=null!=(x=null==ee?void 0:ee.root)?x:N.root,Oe=null!=(w=null==ee?void 0:ee.rail)?w:N.rail,Ie=null!=(_=null==ee?void 0:ee.track)?_:N.track,Re=null!=(S=null==ee?void 0:ee.thumb)?S:N.thumb,Le=null!=(E=null==ee?void 0:ee.valueLabel)?E:N.valueLabel,De=null!=(M=null==ee?void 0:ee.mark)?M:N.mark,Fe=null!=(P=null==ee?void 0:ee.markLabel)?P:N.markLabel,Ne=null!=(T=null==ee?void 0:ee.input)?T:N.input,ze=vo({elementType:_e,getSlotProps:le,externalSlotProps:Be,externalForwardedProps:oe,additionalProps:(0,h.A)({},Uo(_e)&&{as:D}),ownerState:(0,h.A)({},se,null==Be?void 0:Be.ownerState),className:[we.root,U]}),je=vo({elementType:Se,externalSlotProps:Oe,ownerState:se,className:we.rail}),Ue=vo({elementType:Ce,externalSlotProps:Ie,additionalProps:{style:(0,h.A)({},ae[he].offset(be),ae[he].leap(ye))},ownerState:(0,h.A)({},se,null==Ie?void 0:Ie.ownerState),className:we.track}),Ge=vo({elementType:Ee,getSlotProps:ue,externalSlotProps:Re,ownerState:(0,h.A)({},se,null==Re?void 0:Re.ownerState),className:we.thumb}),Ve=vo({elementType:Me,externalSlotProps:Le,ownerState:(0,h.A)({},se,null==Le?void 0:Le.ownerState),className:we.valueLabel}),He=vo({elementType:Pe,externalSlotProps:De,ownerState:se,className:we.mark}),We=vo({elementType:Te,externalSlotProps:Fe,ownerState:se,className:we.markLabel}),Qe=vo({elementType:ke,getSlotProps:ce,externalSlotProps:Ne,ownerState:se});return(0,m.jsxs)(_e,(0,h.A)({},ze,{children:[(0,m.jsx)(Se,(0,h.A)({},je)),(0,m.jsx)(Ce,(0,h.A)({},Ue)),me.filter((e=>e.value>=K&&e.value<=J)).map(((e,t)=>{const n=To(e.value,K,J),r=ae[he].offset(n);let i;return i=!1===ne?-1!==ve.indexOf(e.value):"normal"===ne&&(pe?e.value>=ve[0]&&e.value<=ve[ve.length-1]:e.value<=ve[0])||"inverted"===ne&&(pe?e.value<=ve[0]||e.value>=ve[ve.length-1]:e.value>=ve[0]),(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(Pe,(0,h.A)({"data-index":t},He,!Rr(Pe)&&{markActive:i},{style:(0,h.A)({},r,He.style),className:(0,_n.A)(He.className,i&&we.markActive)})),null!=e.label?(0,m.jsx)(Te,(0,h.A)({"aria-hidden":!0,"data-index":t},We,!Rr(Te)&&{markLabelActive:i},{style:(0,h.A)({},r,We.style),className:(0,_n.A)(we.markLabel,We.className,i&&we.markLabelActive),children:e.label})):null]},t)})),ve.map(((e,t)=>{const n=To(e,K,J),r=ae[he].offset(n),i="off"===re?es:Me;return(0,m.jsx)(i,(0,h.A)({},!Rr(i)&&{valueLabelFormat:ie,valueLabelDisplay:re,value:"function"===typeof ie?ie($(e),t):ie,index:t,open:de===t||Ae===t||"on"===re,disabled:V},Ve,{children:(0,m.jsx)(Ee,(0,h.A)({"data-index":t},Ge,{className:(0,_n.A)(we.thumb,Ge.className,Ae===t&&we.active,fe===t&&we.focusVisible),style:(0,h.A)({},r,xe(t),Ge.style),children:(0,m.jsx)(ke,(0,h.A)({"data-index":t,"aria-label":H?H(t):O,"aria-valuenow":$(e),"aria-labelledby":L,"aria-valuetext":W?W($(e),t):I,value:ve[t]},Qe))}))}),t)}))]}))})),ns=ts;function rs(e){return(0,Fn.Ay)("MuiList",e)}(0,Tn.A)("MuiList",["root","padding","dense","subheader"]);const is=["children","className","component","dense","disablePadding","subheader"],os=(0,Ln.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,h.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),ss=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiList"}),{children:r,className:i,component:o="ul",dense:s=!1,disablePadding:a=!1,subheader:l}=n,c=(0,C.A)(n,is),u=A.useMemo((()=>({dense:s})),[s]),d=(0,h.A)({},n,{component:o,dense:s,disablePadding:a}),p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,Rn.A)(o,rs,t)})(d);return(0,m.jsx)(bi.Provider,{value:u,children:(0,m.jsxs)(os,(0,h.A)({as:o,className:(0,_n.A)(p.root,i),ref:t,ownerState:d},c,{children:[l,r]}))})})),as=qt({name:"menuState",initialState:{editMenuState:{},typesMenuState:{},layersMenuState:{},viewSettingsMenuState:{},animationMenuState:{toggleAnimationState:!1,animationSpeedSliderValue:10}},reducers:{updateLayersMenuState:(e,t)=>{e.layersMenuState=t.payload},updateTypesMenuState:(e,t)=>{e.typesMenuState=t.payload},updateEditMenuState:(e,t)=>{e.editMenuState=t.payload},updateViewSettingsMenuState:(e,t)=>{e.viewSettingsMenuState=t.payload},updateAnimationMenuState:(e,t)=>{e.animationMenuState=t.payload}}}),{updateLayersMenuState:ls,updateTypesMenuState:cs,updateEditMenuState:us,updateViewSettingsMenuState:ds,updateAnimationMenuState:As}=as.actions,hs=as.reducer;function fs(){var e,t,n;const r=ue(),i=te((e=>e.cityIOdataState.cityIOdata)),o=i.GEOGRID.properties.types,s=null===i||void 0===i||null===(e=i.GEOGRID)||void 0===e||null===(t=e.properties)||void 0===t||null===(n=t.header)||void 0===n?void 0:n.cellSize,a=s*s,[l,c]=(0,A.useState)(),[u,d]=(0,A.useState)();(0,A.useEffect)((()=>{r(cs({SELECTED_TYPE:l}))}),[l]);const h=l&&l.LBCS,f=l&&l.NAICS;let p=l&&l.description?l.description:null;return(0,m.jsx)(m.Fragment,{children:(e=>{let t=[];return Object.keys(e).forEach(((n,r)=>{let i=e[n].color;"string"!==typeof i&&(i="rgb("+e[n].color[0]+","+e[n].color[1]+","+e[n].color[2]+")"),t.push((0,m.jsxs)("div",{children:[(0,m.jsx)(Ii,{children:(0,m.jsx)(Qi,{fullWidth:!0,size:"small",variant:"outlined",sx:{"&.MuiButton-text":{color:{col:i}},border:"solid 1px "+i},onClick:()=>{return t=e[n],r=n,t={...t,thisTypeName:r},void c(t);var t,r},children:(0,m.jsx)(Hn,{color:i,variant:"caption",children:n})},Math.random())},"li_menu_".concat(r)),l&&l.thisTypeName===n&&(0,m.jsx)(Ii,{children:(0,m.jsx)(to,{variant:"outlined",sx:{width:"100%"},children:(0,m.jsxs)(oo,{children:[p&&(0,m.jsx)(Hn,{variant:"caption",children:p}),(0,m.jsx)(Ao,{sx:{marginTop:"10px",marginBottom:"10px"}}),l&&l.thisTypeName&&l.height&&(0,m.jsxs)("div",{children:[(0,m.jsx)(Hn,{children:"Set Floors"}),u&&Array.isArray(u.height)&&(0,m.jsxs)(Hn,{variant:"caption",children:["Each cell adds"," ",a*u.height[1],"m\xb2"]}),(0,m.jsx)(ns,{valueLabelDisplay:"auto",size:"small",onChange:(e,t)=>d((e=>{const n={...e},r=[l.height[0],t,l.height[2]];return Object.assign(n,{height:r}),n})),onChangeCommitted:(e,t)=>{c({...l,height:[l.height[0],t,l.height[2]]})},min:l.height[0],value:u&&u[l]&&u[l].height[1],max:l.height[2]},"li_types_slider_".concat(l.thisTypeName))]},"li_types_div_".concat(r)),h&&(0,m.jsxs)("div",{children:[(0,m.jsx)(Hn,{children:"LBCS"}),(0,m.jsx)(Hn,{variant:"caption",children:JSON.stringify(h,null,"\t")})]}),f&&(0,m.jsxs)("div",{children:[(0,m.jsx)(Hn,{children:"NAICS"}),(0,m.jsx)(Hn,{variant:"caption",children:JSON.stringify(f,null,"\t")})]})]})},"li_types_card_".concat(r))},"li_types_".concat(r))]},"li_types_top_div_".concat(r)))})),(0,m.jsx)(ss,{sx:{display:"flex",flexDirection:"column",maxHeight:400,overflow:"hidden",overflowY:"scroll"},children:t})})(o)})}const ps=A.createContext(void 0);function gs(){return A.useContext(ps)}var ms=n(3216),vs=n(8280);const bs=["ownerState"],ys=["variants"],xs=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function ws(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const _s=(0,vs.A)(),Ss=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function Cs(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function Es(e){return e?(t,n)=>n[e]:null}function Ms(e,t){let{ownerState:n}=t,r=(0,C.A)(t,bs);const i="function"===typeof e?e((0,h.A)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>Ms(e,(0,h.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,C.A)(i,ys);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,h.A)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,h.A)({ownerState:n},r,n)):e.style))})),t}return i}const Ps=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=_s,rootShouldForwardProp:r=ws,slotShouldForwardProp:i=ws}=e,o=e=>(0,Cn.A)((0,h.A)({},e,{theme:Cs((0,h.A)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Sn.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=Es(Ss(l))}=s,A=(0,C.A)(s,xs),f=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,p=u||!1;let g=ws;"Root"===l||"root"===l?g=r:l?g=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(g=void 0);const m=(0,Sn.default)(e,(0,h.A)({shouldForwardProp:g,label:undefined},A)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,ms.Q)(e)?r=>Ms(e,(0,h.A)({},r,{theme:Cs({theme:r.theme,defaultTheme:n,themeId:t})})):e,b=function(r){let i=v(r);for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];const u=l?l.map(v):[];a&&d&&u.push((e=>{const r=Cs((0,h.A)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=Ms(i,(0,h.A)({},e,{theme:r}))})),d(e,o)})),a&&!f&&u.push((e=>{var r;const i=Cs((0,h.A)({},e,{defaultTheme:n,themeId:t}));return Ms({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,h.A)({},e,{theme:i}))})),p||u.push(o);const A=u.length-l.length;if(Array.isArray(r)&&A>0){const e=new Array(A).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const g=m(i,...u);return e.muiName&&(g.muiName=e.muiName),g};return m.withConfig&&(b.withConfig=m.withConfig),b}}(),Ts=Ps;var ks=n(2919),Bs=n(8604);const Os=["component","direction","spacing","divider","children","className","useFlexGap"],Is=(0,vs.A)(),Rs=Ts("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Ls(e){return(0,ks.A)({props:e,name:"MuiStack",defaultTheme:Is})}function Ds(e,t){const n=A.Children.toArray(e).filter(Boolean);return n.reduce(((e,r,i)=>(e.push(r),i<n.length-1&&e.push(A.cloneElement(t,{key:"separator-".concat(i)})),e)),[])}const Fs=e=>{let{ownerState:t,theme:n}=e,r=(0,h.A)({display:"flex",flexDirection:"column"},(0,yr.NI)({theme:n},(0,yr.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,Bs.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,yr.kW)({values:t.direction,base:i}),s=(0,yr.kW)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const a=(n,r)=>{return t.useFlexGap?{gap:(0,Bs._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:(0,Bs._W)(e,n)}};var i};r=(0,ms.A)(r,(0,yr.NI)({theme:n},s,a))}return r=(0,yr.iZ)(n.breakpoints,r),r};const Ns=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=Rs,useThemeProps:n=Ls,componentName:r="MuiStack"}=e,i=t(Fs),o=A.forwardRef((function(e,t){const o=n(e),s=(0,En.A)(o),{component:a="div",direction:l="column",spacing:c=0,divider:u,children:d,className:A,useFlexGap:f=!1}=s,p=(0,C.A)(s,Os),g={direction:l,spacing:c,useFlexGap:f},v=(0,Rn.A)({root:["root"]},(e=>(0,Fn.Ay)(r,e)),{});return(0,m.jsx)(i,(0,h.A)({as:a,ownerState:g,ref:t,className:(0,_n.A)(v.root,A)},p,{children:u?Ds(d,u):d}))}));return o}({createStyledComponent:(0,Ln.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,f.A)({props:e,name:"MuiStack"})}),zs=Ns;function js(e){return(0,Fn.Ay)("MuiFormControlLabel",e)}const Us=(0,Tn.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);function Gs(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const Vs=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Hs=(0,Ln.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Us.label)]:t.label},t.root,t["labelPlacement".concat((0,Dn.A)(n.labelPlacement))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(Us.disabled)]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(Us.label)]:{["&.".concat(Us.disabled)]:{color:(t.vars||t).palette.text.disabled}}})})),Ws=(0,Ln.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{["&.".concat(Us.error)]:{color:(t.vars||t).palette.error.main}}})),Qs=A.forwardRef((function(e,t){var n,r;const i=(0,f.A)({props:e,name:"MuiFormControlLabel"}),{className:o,componentsProps:s={},control:a,disabled:l,disableTypography:c,label:u,labelPlacement:d="end",required:p,slotProps:g={}}=i,v=(0,C.A)(i,Vs),b=gs(),y=null!=(n=null!=l?l:a.props.disabled)?n:null==b?void 0:b.disabled,x=null!=p?p:a.props.required,w={disabled:y,required:x};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof a.props[e]&&"undefined"!==typeof i[e]&&(w[e]=i[e])}));const _=Gs({props:i,muiFormControl:b,states:["error"]}),S=(0,h.A)({},i,{disabled:y,labelPlacement:d,required:x,error:_.error}),E=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e,s={root:["root",n&&"disabled","labelPlacement".concat((0,Dn.A)(r)),i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return(0,Rn.A)(s,js,t)})(S),M=null!=(r=g.typography)?r:s.typography;let P=u;return null==P||P.type===Hn||c||(P=(0,m.jsx)(Hn,(0,h.A)({component:"span"},M,{className:(0,_n.A)(E.label,null==M?void 0:M.className),children:P}))),(0,m.jsxs)(Hs,(0,h.A)({className:(0,_n.A)(E.root,o),ownerState:S,ref:t},v,{children:[A.cloneElement(a,w),x?(0,m.jsxs)(zs,{display:"block",children:[P,(0,m.jsxs)(Ws,{ownerState:S,"aria-hidden":!0,className:E.asterisk,children:["\u2009","*"]})]}):P]}))})),Js=Qs;var Ks=n(4516);function Xs(e){return(0,Fn.Ay)("PrivateSwitchBase",e)}(0,Tn.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ys=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],qs=(0,Ln.Ay)(gi)((e=>{let{ownerState:t}=e;return(0,h.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),Zs=(0,Ln.Ay)("input",{shouldForwardProp:Li.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),$s=A.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,className:o,defaultChecked:s,disabled:a,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:A,inputRef:f,name:p,onBlur:g,onChange:v,onFocus:b,readOnly:y,required:x=!1,tabIndex:w,type:_,value:S}=e,E=(0,C.A)(e,Ys),[M,P]=(0,Ks.A)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),T=gs();let k=a;T&&"undefined"===typeof k&&(k=T.disabled);const B="checkbox"===_||"radio"===_,O=(0,h.A)({},e,{checked:M,disabled:k,disableFocusRipple:l,edge:c}),I=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&"edge".concat((0,Dn.A)(i))],input:["input"]};return(0,Rn.A)(o,Xs,t)})(O);return(0,m.jsxs)(qs,(0,h.A)({component:"span",className:(0,_n.A)(I.root,o),centerRipple:!0,focusRipple:!l,disabled:k,tabIndex:null,role:void 0,onFocus:e=>{b&&b(e),T&&T.onFocus&&T.onFocus(e)},onBlur:e=>{g&&g(e),T&&T.onBlur&&T.onBlur(e)},ownerState:O,ref:t},E,{children:[(0,m.jsx)(Zs,(0,h.A)({autoFocus:n,checked:r,defaultChecked:s,className:I.input,disabled:k,id:B?d:void 0,name:p,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;P(t),v&&v(e,t)},readOnly:y,ref:f,required:x,ownerState:O,tabIndex:w,type:_},"checkbox"===_&&void 0===S?{}:{value:S},A)),M?i:u]}))}));var ea=n(9662);const ta=(0,ea.A)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),na=(0,ea.A)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ra=(0,ea.A)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function ia(e){return(0,Fn.Ay)("MuiCheckbox",e)}const oa=(0,Tn.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),sa=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],aa=(0,Ln.Ay)($s,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t["size".concat((0,Dn.A)(n.size))],"default"!==n.color&&t["color".concat((0,Dn.A)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(oa.checked,", &.").concat(oa.indeterminate)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(oa.disabled)]:{color:(t.vars||t).palette.action.disabled}})})),la=(0,m.jsx)(na,{}),ca=(0,m.jsx)(ta,{}),ua=(0,m.jsx)(ra,{}),da=A.forwardRef((function(e,t){var n,r;const i=(0,f.A)({props:e,name:"MuiCheckbox"}),{checkedIcon:o=la,color:s="primary",icon:a=ca,indeterminate:l=!1,indeterminateIcon:c=ua,inputProps:u,size:d="medium",className:p}=i,g=(0,C.A)(i,sa),v=l?c:a,b=l?c:o,y=(0,h.A)({},i,{color:s,indeterminate:l,size:d}),x=(e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,o={root:["root",n&&"indeterminate","color".concat((0,Dn.A)(r)),"size".concat((0,Dn.A)(i))]},s=(0,Rn.A)(o,ia,t);return(0,h.A)({},t,s)})(y);return(0,m.jsx)(aa,(0,h.A)({type:"checkbox",inputProps:(0,h.A)({"data-indeterminate":l},u),icon:A.cloneElement(v,{fontSize:null!=(n=v.props.fontSize)?n:d}),checkedIcon:A.cloneElement(b,{fontSize:null!=(r=b.props.fontSize)?r:d}),ownerState:y,ref:t,className:(0,_n.A)(x.root,p)},g,{classes:x}))})),Aa=da;const ha=function(){const e=ue(),t=te((e=>e.cityIOdataState.cityIOdata)),n=te((e=>e.menuState.layersMenuState)),r=Object.keys(t),[i,o]=(0,A.useState)((()=>{const e={};for(const t in yn)e[t]=yn[t].initSliderValue;return e}));let s={};const[a,l]=(0,A.useState)((()=>{for(const e in yn)s[e]={isOn:yn[e].initState,slider:yn[e].initSliderValue};return s}));(0,A.useEffect)((()=>{e(ls(a))}),[a]);const c=(e,t)=>{o({...i,[e]:t})},u=(e,t)=>{l({...n,[e]:{...n[e],isOn:t}})},d=(e,t)=>{l({...n,[e]:{...n[e],slider:t}})},h=[];return(()=>{for(const t in yn){const n=yn[t].cityIOmoduleName;var e;if(r.includes(n))h.push((0,m.jsxs)(In,{children:[(0,m.jsx)(Js,{control:(0,m.jsx)(Aa,{checked:a[t]&&a[t].isOn||!1,color:"primary",onChange:e=>u(t,e.target.checked)},"checkbox_"+t),label:(0,m.jsx)(Hn,{variant:"caption",children:yn[t].displayName},"label_"+t)},"formControl_"+t),a[t]&&a[t].isOn&&(0,m.jsx)(ns,{size:"small",valueLabelDisplay:"auto",onChangeCommitted:(e,n)=>d(t,n),onChange:(e,n)=>c(t,n),value:null!==(e=i[t])&&void 0!==e?e:0},"slider_"+t)]},"box_"+t))}if(t.layers)for(let r=0;r<t.layers.length;r++){var n;const e=t.layers[r].id;a[e]||l({...a,[e]:{isOn:!0,slider:50}}),h.push((0,m.jsxs)(In,{children:[(0,m.jsx)(Js,{control:(0,m.jsx)(Aa,{checked:a[e]&&a[e].isOn||!1,color:"primary",onChange:t=>u(e,t.target.checked)},"checkbox_"+e),label:(0,m.jsx)(Hn,{variant:"caption",children:e},"label_"+e)},"formControl_"+e),a[e]&&a[e].isOn&&(0,m.jsx)(ns,{size:"small",valueLabelDisplay:"auto",onChangeCommitted:(t,n)=>d(e,n),onChange:(t,n)=>c(e,n),value:null!==(n=i[e])&&void 0!==n?n:50},"slider_"+e)]},"box_"+e))}return h})()};function fa(e){return(0,Fn.Ay)("MuiButtonGroup",e)}const pa=(0,Tn.A)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),ga=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],ma=(0,Ln.Ay)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(pa.grouped)]:t.grouped},{["& .".concat(pa.grouped)]:t["grouped".concat((0,Dn.A)(n.orientation))]},{["& .".concat(pa.grouped)]:t["grouped".concat((0,Dn.A)(n.variant))]},{["& .".concat(pa.grouped)]:t["grouped".concat((0,Dn.A)(n.variant)).concat((0,Dn.A)(n.orientation))]},{["& .".concat(pa.grouped)]:t["grouped".concat((0,Dn.A)(n.variant)).concat((0,Dn.A)(n.color))]},{["& .".concat(pa.firstButton)]:t.firstButton},{["& .".concat(pa.lastButton)]:t.lastButton},{["& .".concat(pa.middleButton)]:t.middleButton},t.root,t[n.variant],!0===n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,"vertical"===n.orientation&&t.vertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[2]},n.disableElevation&&{boxShadow:"none"},n.fullWidth&&{width:"100%"},"vertical"===n.orientation&&{flexDirection:"column"},{["& .".concat(pa.grouped)]:(0,h.A)({minWidth:40,"&:hover":(0,h.A)({},"contained"===n.variant&&{boxShadow:"none"})},"contained"===n.variant&&{boxShadow:"none"}),["& .".concat(pa.firstButton,",& .").concat(pa.middleButton)]:(0,h.A)({},"horizontal"===n.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===n.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===n.variant&&"horizontal"===n.orientation&&{borderRight:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(pa.disabled)]:{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"text"===n.variant&&"vertical"===n.orientation&&{borderBottom:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(pa.disabled)]:{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"text"===n.variant&&"inherit"!==n.color&&{borderColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):(0,Jn.X4)(t.palette[n.color].main,.5)},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"transparent"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"transparent"},"contained"===n.variant&&"horizontal"===n.orientation&&{borderRight:"1px solid ".concat((t.vars||t).palette.grey[400]),["&.".concat(pa.disabled)]:{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"contained"===n.variant&&"vertical"===n.orientation&&{borderBottom:"1px solid ".concat((t.vars||t).palette.grey[400]),["&.".concat(pa.disabled)]:{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}},"contained"===n.variant&&"inherit"!==n.color&&{borderColor:(t.vars||t).palette[n.color].dark},{"&:hover":(0,h.A)({},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"currentColor"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"currentColor"})}),["& .".concat(pa.lastButton,",& .").concat(pa.middleButton)]:(0,h.A)({},"horizontal"===n.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===n.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===n.variant&&"horizontal"===n.orientation&&{marginLeft:-1},"outlined"===n.variant&&"vertical"===n.orientation&&{marginTop:-1})})})),va=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiButtonGroup"}),{children:r,className:i,color:o="primary",component:s="div",disabled:a=!1,disableElevation:l=!1,disableFocusRipple:c=!1,disableRipple:u=!1,fullWidth:d=!1,orientation:p="horizontal",size:g="medium",variant:v="outlined"}=n,b=(0,C.A)(n,ga),y=(0,h.A)({},n,{color:o,component:s,disabled:a,disableElevation:l,disableFocusRipple:c,disableRipple:u,fullWidth:d,orientation:p,size:g,variant:v}),x=(e=>{const{classes:t,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:s,variant:a}=e,l={root:["root",a,"vertical"===s&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped","grouped".concat((0,Dn.A)(s)),"grouped".concat((0,Dn.A)(a)),"grouped".concat((0,Dn.A)(a)).concat((0,Dn.A)(s)),"grouped".concat((0,Dn.A)(a)).concat((0,Dn.A)(n)),r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,Rn.A)(l,fa,t)})(y),w=A.useMemo((()=>({className:x.grouped,color:o,disabled:a,disableElevation:l,disableFocusRipple:c,disableRipple:u,fullWidth:d,size:g,variant:v})),[o,a,l,c,u,d,g,v,x.grouped]),_=function(e){return A.Children.toArray(e).filter((e=>A.isValidElement(e)))}(r),S=_.length,E=e=>{const t=0===e,n=e===S-1;return t&&n?"":t?x.firstButton:n?x.lastButton:x.middleButton};return(0,m.jsx)(ma,(0,h.A)({as:s,role:"group",className:(0,_n.A)(x.root,i),ref:t,ownerState:y},b,{children:(0,m.jsx)(Ni.Provider,{value:w,children:_.map(((e,t)=>(0,m.jsx)(zi.Provider,{value:E(t),children:e},t)))})}))})),ba=va;const ya=function(){const e=ue(),[t,n]=(0,A.useState)();(0,A.useLayoutEffect)((()=>{e(ds(t))}),[t]);const r=e=>{n({...t,VIEW_CONTROL_BUTTONS:e})};return(0,m.jsx)(ss,{children:(e=>{const t=[];for(const n in e)t.push((0,m.jsx)(Qi,{size:"small",onClick:()=>r(n),children:e[n].displayName},Math.random()));return(0,m.jsx)(ba,{fullWidth:!0,sx:{width:"100%"},color:"primary",children:t})})(xn)})};const xa=function(){return(0,m.jsx)(ss,{children:(0,m.jsx)(ya,{})})},wa=!1;var _a="unmounted",Sa="exited",Ca="entering",Ea="entered",Ma="exiting",Pa=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Sa,r.appearStatus=Ca):i=Ea:i=t.unmountOnExit||t.mountOnEnter?_a:Sa,r.state={status:i},r.nextCallback=null,r}zr(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===_a?{status:Sa}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ca&&n!==Ea&&(t=Ca):n!==Ca&&n!==Ea||(t=Ma)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ca){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:V.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Sa&&this.setState({status:_a})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[V.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||wa?this.safeSetState({status:Ea},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:Ca},(function(){t.props.onEntering(o,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:Ea},(function(){t.props.onEntered(o,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:V.findDOMNode(this);t&&!wa?(this.props.onExit(r),this.safeSetState({status:Ma},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Sa},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Sa},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:V.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===_a)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,C.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return A.createElement(jr.Provider,{value:null},"function"===typeof n?n(e,r):A.cloneElement(A.Children.only(n),r))},t}(A.Component);function Ta(){}Pa.contextType=jr,Pa.propTypes={},Pa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ta,onEntering:Ta,onEntered:Ta,onExit:Ta,onExiting:Ta,onExited:Ta},Pa.UNMOUNTED=_a,Pa.EXITED=Sa,Pa.ENTERING=Ca,Pa.ENTERED=Ea,Pa.EXITING=Ma;const ka=Pa,Ba=e=>e.scrollTop;function Oa(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}const Ia=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Ra(e){return"scale(".concat(e,", ").concat(e**2,")")}const La={entering:{opacity:1,transform:Ra(1)},entered:{opacity:1,transform:"none"}},Da="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Fa=A.forwardRef((function(e,t){const{addEndListener:n,appear:r=!0,children:i,easing:o,in:s,onEnter:a,onEntered:l,onEntering:c,onExit:u,onExited:d,onExiting:f,style:p,timeout:g="auto",TransitionComponent:v=ka}=e,b=(0,C.A)(e,Ia),y=(0,Jr.A)(),x=A.useRef(),w=xr(),_=A.useRef(null),S=(0,Lr.A)(_,i.ref,t),E=e=>t=>{if(e){const n=_.current;void 0===t?e(n):e(n,t)}},M=E(c),P=E(((e,t)=>{Ba(e);const{duration:n,delay:r,easing:i}=Oa({style:p,timeout:g,easing:o},{mode:"enter"});let s;"auto"===g?(s=w.transitions.getAutoHeightDuration(e.clientHeight),x.current=s):s=n,e.style.transition=[w.transitions.create("opacity",{duration:s,delay:r}),w.transitions.create("transform",{duration:Da?s:.666*s,delay:r,easing:i})].join(","),a&&a(e,t)})),T=E(l),k=E(f),B=E((e=>{const{duration:t,delay:n,easing:r}=Oa({style:p,timeout:g,easing:o},{mode:"exit"});let i;"auto"===g?(i=w.transitions.getAutoHeightDuration(e.clientHeight),x.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:Da?i:.666*i,delay:Da?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=Ra(.75),u&&u(e)})),O=E(d);return(0,m.jsx)(v,(0,h.A)({appear:r,in:s,nodeRef:_,onEnter:P,onEntered:T,onEntering:M,onExit:B,onExited:O,onExiting:k,addEndListener:e=>{"auto"===g&&y.start(x.current||0,e),n&&n(_.current,e)},timeout:"auto"===g?null:g},b,{children:(e,t)=>A.cloneElement(i,(0,h.A)({style:(0,h.A)({opacity:0,transform:Ra(.75),visibility:"exited"!==e||s?void 0:"hidden"},La[e],p,i.props.style),ref:S},t))}))}));Fa.muiSupportAuto=!0;const Na=Fa;function za(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ja(e){return e instanceof za(e).Element||e instanceof Element}function Ua(e){return e instanceof za(e).HTMLElement||e instanceof HTMLElement}function Ga(e){return"undefined"!==typeof ShadowRoot&&(e instanceof za(e).ShadowRoot||e instanceof ShadowRoot)}var Va=Math.max,Ha=Math.min,Wa=Math.round;function Qa(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Ja(){return!/^((?!chrome|android).)*safari/i.test(Qa())}function Ka(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&Ua(e)&&(i=e.offsetWidth>0&&Wa(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Wa(r.height)/e.offsetHeight||1);var s=(ja(e)?za(e):window).visualViewport,a=!Ja()&&n,l=(r.left+(a&&s?s.offsetLeft:0))/i,c=(r.top+(a&&s?s.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function Xa(e){var t=za(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ya(e){return e?(e.nodeName||"").toLowerCase():null}function qa(e){return((ja(e)?e.ownerDocument:e.document)||window.document).documentElement}function Za(e){return Ka(qa(e)).left+Xa(e).scrollLeft}function $a(e){return za(e).getComputedStyle(e)}function el(e){var t=$a(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function tl(e,t,n){void 0===n&&(n=!1);var r=Ua(t),i=Ua(t)&&function(e){var t=e.getBoundingClientRect(),n=Wa(t.width)/e.offsetWidth||1,r=Wa(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=qa(t),s=Ka(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==Ya(t)||el(o))&&(a=function(e){return e!==za(e)&&Ua(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Xa(e);var t}(t)),Ua(t)?((l=Ka(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Za(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function nl(e){var t=Ka(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function rl(e){return"html"===Ya(e)?e:e.assignedSlot||e.parentNode||(Ga(e)?e.host:null)||qa(e)}function il(e){return["html","body","#document"].indexOf(Ya(e))>=0?e.ownerDocument.body:Ua(e)&&el(e)?e:il(rl(e))}function ol(e,t){var n;void 0===t&&(t=[]);var r=il(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=za(r),s=i?[o].concat(o.visualViewport||[],el(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(ol(rl(s)))}function sl(e){return["table","td","th"].indexOf(Ya(e))>=0}function al(e){return Ua(e)&&"fixed"!==$a(e).position?e.offsetParent:null}function ll(e){for(var t=za(e),n=al(e);n&&sl(n)&&"static"===$a(n).position;)n=al(n);return n&&("html"===Ya(n)||"body"===Ya(n)&&"static"===$a(n).position)?t:n||function(e){var t=/firefox/i.test(Qa());if(/Trident/i.test(Qa())&&Ua(e)&&"fixed"===$a(e).position)return null;var n=rl(e);for(Ga(n)&&(n=n.host);Ua(n)&&["html","body"].indexOf(Ya(n))<0;){var r=$a(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var cl="top",ul="bottom",dl="right",Al="left",hl="auto",fl=[cl,ul,dl,Al],pl="start",gl="end",ml="clippingParents",vl="viewport",bl="popper",yl="reference",xl=fl.reduce((function(e,t){return e.concat([t+"-"+pl,t+"-"+gl])}),[]),wl=[].concat(fl,[hl]).reduce((function(e,t){return e.concat([t,t+"-"+pl,t+"-"+gl])}),[]),_l=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Sl(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function Cl(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var El={placement:"bottom",modifiers:[],strategy:"absolute"};function Ml(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Pl(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?El:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},El,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,l={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:ja(e)?ol(e):e.contextElement?ol(e.contextElement):[],popper:ol(t)};var u=function(e){var t=Sl(e);return _l.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:i,name:t,instance:l,options:r}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(Ml(t,n)){i.rects={reference:tl(t,ll(n),"fixed"===i.options.strategy),popper:nl(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:Cl((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),a=!0}};if(!Ml(e,t))return l;function c(){s.forEach((function(e){return e()})),s=[]}return l.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var Tl={passive:!0};const kl={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,l=za(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,Tl)})),a&&l.addEventListener("resize",n.update,Tl),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Tl)})),a&&l.removeEventListener("resize",n.update,Tl)}},data:{}};function Bl(e){return e.split("-")[0]}function Ol(e){return e.split("-")[1]}function Il(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Rl(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?Bl(i):null,s=i?Ol(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case cl:t={x:a,y:n.y-r.height};break;case ul:t={x:a,y:n.y+n.height};break;case dl:t={x:n.x+n.width,y:l};break;case Al:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?Il(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case pl:t[c]=t[c]-(n[u]/2-r[u]/2);break;case gl:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var Ll={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Dl(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,A=s.x,h=void 0===A?0:A,f=s.y,p=void 0===f?0:f,g="function"===typeof u?u({x:h,y:p}):{x:h,y:p};h=g.x,p=g.y;var m=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),b=Al,y=cl,x=window;if(c){var w=ll(n),_="clientHeight",S="clientWidth";if(w===za(n)&&"static"!==$a(w=qa(n)).position&&"absolute"===a&&(_="scrollHeight",S="scrollWidth"),i===cl||(i===Al||i===dl)&&o===gl)y=ul,p-=(d&&w===x&&x.visualViewport?x.visualViewport.height:w[_])-r.height,p*=l?1:-1;if(i===Al||(i===cl||i===ul)&&o===gl)b=dl,h-=(d&&w===x&&x.visualViewport?x.visualViewport.width:w[S])-r.width,h*=l?1:-1}var C,E=Object.assign({position:a},c&&Ll),M=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Wa(n*i)/i||0,y:Wa(r*i)/i||0}}({x:h,y:p},za(n)):{x:h,y:p};return h=M.x,p=M.y,l?Object.assign({},E,((C={})[y]=v?"0":"",C[b]=m?"0":"",C.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+p+"px)":"translate3d("+h+"px, "+p+"px, 0)",C)):Object.assign({},E,((t={})[y]=v?p+"px":"",t[b]=m?h+"px":"",t.transform="",t))}const Fl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:Bl(t.placement),variation:Ol(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Dl(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Dl(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};const Nl={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];Ua(i)&&Ya(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Ua(r)&&Ya(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const zl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=wl.reduce((function(e,n){return e[n]=function(e,t,n){var r=Bl(e),i=[Al,cl].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Al,dl].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}};var jl={left:"right",right:"left",bottom:"top",top:"bottom"};function Ul(e){return e.replace(/left|right|bottom|top/g,(function(e){return jl[e]}))}var Gl={start:"end",end:"start"};function Vl(e){return e.replace(/start|end/g,(function(e){return Gl[e]}))}function Hl(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Ga(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Wl(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ql(e,t,n){return t===vl?Wl(function(e,t){var n=za(e),r=qa(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=Ja();(c||!c&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+Za(e),y:l}}(e,n)):ja(t)?function(e,t){var n=Ka(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Wl(function(e){var t,n=qa(e),r=Xa(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=Va(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Va(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Za(e),l=-r.scrollTop;return"rtl"===$a(i||n).direction&&(a+=Va(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(qa(e)))}function Jl(e,t,n,r){var i="clippingParents"===t?function(e){var t=ol(rl(e)),n=["absolute","fixed"].indexOf($a(e).position)>=0&&Ua(e)?ll(e):e;return ja(n)?t.filter((function(e){return ja(e)&&Hl(e,n)&&"body"!==Ya(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=Ql(e,n,r);return t.top=Va(i.top,t.top),t.right=Ha(i.right,t.right),t.bottom=Ha(i.bottom,t.bottom),t.left=Va(i.left,t.left),t}),Ql(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Kl(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Xl(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Yl(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,l=void 0===a?ml:a,c=n.rootBoundary,u=void 0===c?vl:c,d=n.elementContext,A=void 0===d?bl:d,h=n.altBoundary,f=void 0!==h&&h,p=n.padding,g=void 0===p?0:p,m=Kl("number"!==typeof g?g:Xl(g,fl)),v=A===bl?yl:bl,b=e.rects.popper,y=e.elements[f?v:A],x=Jl(ja(y)?y:y.contextElement||qa(e.elements.popper),l,u,s),w=Ka(e.elements.reference),_=Rl({reference:w,element:b,strategy:"absolute",placement:i}),S=Wl(Object.assign({},b,_)),C=A===bl?S:w,E={top:x.top-C.top+m.top,bottom:C.bottom-x.bottom+m.bottom,left:x.left-C.left+m.left,right:C.right-x.right+m.right},M=e.modifiersData.offset;if(A===bl&&M){var P=M[i];Object.keys(E).forEach((function(e){var t=[dl,ul].indexOf(e)>=0?1:-1,n=[cl,ul].indexOf(e)>=0?"y":"x";E[e]+=P[n]*t}))}return E}const ql={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,A=n.altBoundary,h=n.flipVariations,f=void 0===h||h,p=n.allowedAutoPlacements,g=t.options.placement,m=Bl(g),v=l||(m===g||!f?[Ul(g)]:function(e){if(Bl(e)===hl)return[];var t=Ul(e);return[Vl(e),t,Vl(t)]}(g)),b=[g].concat(v).reduce((function(e,n){return e.concat(Bl(n)===hl?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?wl:l,u=Ol(r),d=u?a?xl:xl.filter((function(e){return Ol(e)===u})):fl,A=d.filter((function(e){return c.indexOf(e)>=0}));0===A.length&&(A=d);var h=A.reduce((function(t,n){return t[n]=Yl(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[Bl(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:p}):n)}),[]),y=t.rects.reference,x=t.rects.popper,w=new Map,_=!0,S=b[0],C=0;C<b.length;C++){var E=b[C],M=Bl(E),P=Ol(E)===pl,T=[cl,ul].indexOf(M)>=0,k=T?"width":"height",B=Yl(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:A,padding:c}),O=T?P?dl:Al:P?ul:cl;y[k]>x[k]&&(O=Ul(O));var I=Ul(O),R=[];if(o&&R.push(B[M]<=0),a&&R.push(B[O]<=0,B[I]<=0),R.every((function(e){return e}))){S=E,_=!1;break}w.set(E,R)}if(_)for(var L=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return S=t,"break"},D=f?3:1;D>0;D--){if("break"===L(D))break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Zl(e,t,n){return Va(e,Ha(t,n))}const $l={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,A=n.tether,h=void 0===A||A,f=n.tetherOffset,p=void 0===f?0:f,g=Yl(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),m=Bl(t.placement),v=Ol(t.placement),b=!v,y=Il(m),x="x"===y?"y":"x",w=t.modifiersData.popperOffsets,_=t.rects.reference,S=t.rects.popper,C="function"===typeof p?p(Object.assign({},t.rects,{placement:t.placement})):p,E="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),M=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(w){if(o){var T,k="y"===y?cl:Al,B="y"===y?ul:dl,O="y"===y?"height":"width",I=w[y],R=I+g[k],L=I-g[B],D=h?-S[O]/2:0,F=v===pl?_[O]:S[O],N=v===pl?-S[O]:-_[O],z=t.elements.arrow,j=h&&z?nl(z):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=U[k],V=U[B],H=Zl(0,_[O],j[O]),W=b?_[O]/2-D-H-G-E.mainAxis:F-H-G-E.mainAxis,Q=b?-_[O]/2+D+H+V+E.mainAxis:N+H+V+E.mainAxis,J=t.elements.arrow&&ll(t.elements.arrow),K=J?"y"===y?J.clientTop||0:J.clientLeft||0:0,X=null!=(T=null==M?void 0:M[y])?T:0,Y=I+Q-X,q=Zl(h?Ha(R,I+W-X-K):R,I,h?Va(L,Y):L);w[y]=q,P[y]=q-I}if(a){var Z,$="x"===y?cl:Al,ee="x"===y?ul:dl,te=w[x],ne="y"===x?"height":"width",re=te+g[$],ie=te-g[ee],oe=-1!==[cl,Al].indexOf(m),se=null!=(Z=null==M?void 0:M[x])?Z:0,ae=oe?re:te-_[ne]-S[ne]-se+E.altAxis,le=oe?te+_[ne]+S[ne]-se-E.altAxis:ie,ce=h&&oe?function(e,t,n){var r=Zl(e,t,n);return r>n?n:r}(ae,te,le):Zl(h?ae:re,te,h?le:ie);w[x]=ce,P[x]=ce-te}t.modifiersData[r]=P}},requiresIfExists:["offset"]};const ec={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Bl(n.placement),l=Il(a),c=[Al,dl].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return Kl("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Xl(e,fl))}(i.padding,n),d=nl(o),A="y"===l?cl:Al,h="y"===l?ul:dl,f=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],p=s[l]-n.rects.reference[l],g=ll(o),m=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-p/2,b=u[A],y=m-d[c]-u[h],x=m/2-d[c]/2+v,w=Zl(b,x,y),_=l;n.modifiersData[r]=((t={})[_]=w,t.centerOffset=w-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&Hl(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tc(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function nc(e){return[cl,dl,ul,Al].some((function(t){return e[t]>=0}))}var rc=Pl({defaultModifiers:[kl,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Rl({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Fl,Nl,zl,ql,$l,ec,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=Yl(t,{elementContext:"reference"}),a=Yl(t,{altBoundary:!0}),l=tc(s,r),c=tc(a,i,o),u=nc(l),d=nc(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),ic=n(9184);const oc=A.forwardRef((function(e,t){const{children:n,container:r,disablePortal:i=!1}=e,[o,s]=A.useState(null),a=(0,ho.A)(A.isValidElement(n)?n.ref:null,t);if((0,_o.A)((()=>{i||s(function(e){return"function"===typeof e?e():e}(r)||document.body)}),[r,i]),(0,_o.A)((()=>{if(o&&!i)return(0,ic.A)(t,o),()=>{(0,ic.A)(t,null)}}),[t,o,i]),i){if(A.isValidElement(n)){const e={ref:a};return A.cloneElement(n,e)}return(0,m.jsx)(A.Fragment,{children:n})}return(0,m.jsx)(A.Fragment,{children:o?V.createPortal(n,o):o})}));const sc="base";function ac(e,t){const n=Fn.li[t];return n?(r=n,"".concat(sc,"--").concat(r)):function(e,t){return"".concat(sc,"-").concat(e,"-").concat(t)}(e,t);var r}const lc="Popper";function cc(e){return ac(lc,e)}!function(e,t){const n={};t.forEach((t=>{n[t]=ac(e,t)}))}(lc,["root"]);const uc={disableDefaultClasses:!1},dc=A.createContext(uc);const Ac=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],hc=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function fc(e){return"function"===typeof e?e():e}function pc(e){return void 0!==e.nodeType}const gc=()=>(0,Rn.A)({root:["root"]},function(e){const{disableDefaultClasses:t}=A.useContext(dc);return n=>t?"":e(n)}(cc)),mc={},vc=A.forwardRef((function(e,t){var n;const{anchorEl:r,children:i,direction:o,disablePortal:s,modifiers:a,open:l,placement:c,popperOptions:u,popperRef:d,slotProps:f={},slots:p={},TransitionProps:g}=e,v=(0,C.A)(e,Ac),b=A.useRef(null),y=(0,ho.A)(b,t),x=A.useRef(null),w=(0,ho.A)(x,d),_=A.useRef(w);(0,_o.A)((()=>{_.current=w}),[w]),A.useImperativeHandle(d,(()=>x.current),[]);const S=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(c,o),[E,M]=A.useState(S),[P,T]=A.useState(fc(r));A.useEffect((()=>{x.current&&x.current.forceUpdate()})),A.useEffect((()=>{r&&T(fc(r))}),[r]),(0,_o.A)((()=>{if(!P||!l)return;let e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;M(t.placement)}}];null!=a&&(e=e.concat(a)),u&&null!=u.modifiers&&(e=e.concat(u.modifiers));const t=rc(P,b.current,(0,h.A)({placement:S},u,{modifiers:e}));return _.current(t),()=>{t.destroy(),_.current(null)}}),[P,s,a,l,u,S]);const k={placement:E};null!==g&&(k.TransitionProps=g);const B=gc(),O=null!=(n=p.root)?n:"div",I=vo({elementType:O,externalSlotProps:f.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:B.root});return(0,m.jsx)(O,(0,h.A)({},I,{children:"function"===typeof i?i(k):i}))})),bc=A.forwardRef((function(e,t){const{anchorEl:n,children:r,container:i,direction:o="ltr",disablePortal:s=!1,keepMounted:a=!1,modifiers:l,open:c,placement:u="bottom",popperOptions:d=mc,popperRef:f,style:p,transition:g=!1,slotProps:v={},slots:b={}}=e,y=(0,C.A)(e,hc),[x,w]=A.useState(!0);if(!a&&!c&&(!g||x))return null;let _;if(i)_=i;else if(n){const e=fc(n);_=e&&pc(e)?(0,bo.A)(e).body:(0,bo.A)(null).body}const S=c||!a||g&&!x?void 0:"none",E=g?{in:c,onEnter:()=>{w(!1)},onExited:()=>{w(!0)}}:void 0;return(0,m.jsx)(oc,{disablePortal:s,container:_,children:(0,m.jsx)(vc,(0,h.A)({anchorEl:n,direction:o,disablePortal:s,modifiers:l,ref:t,open:g?!x:c,placement:u,popperOptions:d,popperRef:f,slotProps:v,slots:b},y,{style:(0,h.A)({position:"fixed",top:0,left:0,display:S},p),TransitionProps:E,children:r}))})}));var yc=n(2374);const xc=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],wc=(0,Ln.Ay)(bc,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),_c=A.forwardRef((function(e,t){var n;const r=(0,yc.A)(),i=(0,f.A)({props:e,name:"MuiPopper"}),{anchorEl:o,component:s,components:a,componentsProps:l,container:c,disablePortal:u,keepMounted:d,modifiers:A,open:p,placement:g,popperOptions:v,popperRef:b,transition:y,slots:x,slotProps:w}=i,_=(0,C.A)(i,xc),S=null!=(n=null==x?void 0:x.root)?n:null==a?void 0:a.Root,E=(0,h.A)({anchorEl:o,container:c,disablePortal:u,keepMounted:d,modifiers:A,open:p,placement:g,popperOptions:v,popperRef:b,transition:y},_);return(0,m.jsx)(wc,(0,h.A)({as:s,direction:null==r?void 0:r.direction,slots:{root:S},slotProps:null!=w?w:l},E,{ref:t}))})),Sc=_c;var Cc=n(5879);function Ec(e){return(0,Fn.Ay)("MuiTooltip",e)}const Mc=(0,Tn.A)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Pc=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const Tc=(0,Ln.Ay)(Sc,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((e=>{let{theme:t,ownerState:n,open:r}=e;return(0,h.A)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{['&[data-popper-placement*="bottom"] .'.concat(Mc.arrow)]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},['&[data-popper-placement*="top"] .'.concat(Mc.arrow)]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},['&[data-popper-placement*="right"] .'.concat(Mc.arrow)]:(0,h.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),['&[data-popper-placement*="left"] .'.concat(Mc.arrow)]:(0,h.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),kc=(0,Ln.Ay)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t["tooltipPlacement".concat((0,Dn.A)(n.placement.split("-")[0]))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:(0,Jn.X4)(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:"".concat((r=16/14,Math.round(1e5*r)/1e5),"em"),fontWeight:t.typography.fontWeightRegular},{[".".concat(Mc.popper,'[data-popper-placement*="left"] &')]:(0,h.A)({transformOrigin:"right center"},n.isRtl?(0,h.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,h.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[".".concat(Mc.popper,'[data-popper-placement*="right"] &')]:(0,h.A)({transformOrigin:"left center"},n.isRtl?(0,h.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,h.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[".".concat(Mc.popper,'[data-popper-placement*="top"] &')]:(0,h.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[".".concat(Mc.popper,'[data-popper-placement*="bottom"] &')]:(0,h.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var r})),Bc=(0,Ln.Ay)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,Jn.X4)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let Oc=!1;const Ic=new Jr.E;let Rc={x:0,y:0};function Lc(e,t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t&&t(n,...i),e(n,...i)}}const Dc=A.forwardRef((function(e,t){var n,r,i,o,s,a,l,c,u,d,p,g,v,b,y,x,w,_,S;const E=(0,f.A)({props:e,name:"MuiTooltip"}),{arrow:M=!1,children:P,components:T={},componentsProps:k={},describeChild:B=!1,disableFocusListener:O=!1,disableHoverListener:I=!1,disableInteractive:L=!1,disableTouchListener:D=!1,enterDelay:F=100,enterNextDelay:N=0,enterTouchDelay:z=700,followCursor:j=!1,id:U,leaveDelay:G=0,leaveTouchDelay:V=1500,onClose:H,onOpen:W,open:Q,placement:J="bottom",PopperComponent:K,PopperProps:X={},slotProps:Y={},slots:q={},title:Z,TransitionComponent:$=Na,TransitionProps:ee}=E,te=(0,C.A)(E,Pc),ne=A.isValidElement(P)?P:(0,m.jsx)("span",{children:P}),re=xr(),ie=R(),[oe,se]=A.useState(),[ae,le]=A.useState(null),ce=A.useRef(!1),ue=L||j,de=(0,Jr.A)(),Ae=(0,Jr.A)(),he=(0,Jr.A)(),fe=(0,Jr.A)(),[pe,ge]=(0,Ks.A)({controlled:Q,default:!1,name:"Tooltip",state:"open"});let me=pe;const ve=(0,Cc.A)(U),be=A.useRef(),ye=(0,Dr.A)((()=>{void 0!==be.current&&(document.body.style.WebkitUserSelect=be.current,be.current=void 0),fe.clear()}));A.useEffect((()=>ye),[ye]);const xe=e=>{Ic.clear(),Oc=!0,ge(!0),W&&!me&&W(e)},we=(0,Dr.A)((e=>{Ic.start(800+G,(()=>{Oc=!1})),ge(!1),H&&me&&H(e),de.start(re.transitions.duration.shortest,(()=>{ce.current=!1}))})),_e=e=>{ce.current&&"touchstart"!==e.type||(oe&&oe.removeAttribute("title"),Ae.clear(),he.clear(),F||Oc&&N?Ae.start(Oc?N:F,(()=>{xe(e)})):xe(e))},Se=e=>{Ae.clear(),he.start(G,(()=>{we(e)}))},{isFocusVisibleRef:Ce,onBlur:Ee,onFocus:Me,ref:Pe}=(0,Fr.A)(),[,Te]=A.useState(!1),ke=e=>{Ee(e),!1===Ce.current&&(Te(!1),Se(e))},Be=e=>{oe||se(e.currentTarget),Me(e),!0===Ce.current&&(Te(!0),_e(e))},Oe=e=>{ce.current=!0;const t=ne.props;t.onTouchStart&&t.onTouchStart(e)},Ie=e=>{Oe(e),he.clear(),de.clear(),ye(),be.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",fe.start(z,(()=>{document.body.style.WebkitUserSelect=be.current,_e(e)}))},Re=e=>{ne.props.onTouchEnd&&ne.props.onTouchEnd(e),ye(),he.start(V,(()=>{we(e)}))};A.useEffect((()=>{if(me)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||we(e)}}),[we,me]);const Le=(0,Lr.A)(ne.ref,Pe,se,t);Z||0===Z||(me=!1);const De=A.useRef(),Fe={},Ne="string"===typeof Z;B?(Fe.title=me||!Ne||I?null:Z,Fe["aria-describedby"]=me?ve:null):(Fe["aria-label"]=Ne?Z:null,Fe["aria-labelledby"]=me&&!Ne?ve:null);const ze=(0,h.A)({},Fe,te,ne.props,{className:(0,_n.A)(te.className,ne.props.className),onTouchStart:Oe,ref:Le},j?{onMouseMove:e=>{const t=ne.props;t.onMouseMove&&t.onMouseMove(e),Rc={x:e.clientX,y:e.clientY},De.current&&De.current.update()}}:{});const je={};D||(ze.onTouchStart=Ie,ze.onTouchEnd=Re),I||(ze.onMouseOver=Lc(_e,ze.onMouseOver),ze.onMouseLeave=Lc(Se,ze.onMouseLeave),ue||(je.onMouseOver=_e,je.onMouseLeave=Se)),O||(ze.onFocus=Lc(Be,ze.onFocus),ze.onBlur=Lc(ke,ze.onBlur),ue||(je.onFocus=Be,je.onBlur=ke));const Ue=A.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(ae),options:{element:ae,padding:4}}];return null!=(e=X.popperOptions)&&e.modifiers&&(t=t.concat(X.popperOptions.modifiers)),(0,h.A)({},X.popperOptions,{modifiers:t})}),[ae,X]),Ge=(0,h.A)({},E,{isRtl:ie,arrow:M,disableInteractive:ue,placement:J,PopperComponentProp:K,touch:ce.current}),Ve=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,s={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch","tooltipPlacement".concat((0,Dn.A)(o.split("-")[0]))],arrow:["arrow"]};return(0,Rn.A)(s,Ec,t)})(Ge),He=null!=(n=null!=(r=q.popper)?r:T.Popper)?n:Tc,We=null!=(i=null!=(o=null!=(s=q.transition)?s:T.Transition)?o:$)?i:Na,Qe=null!=(a=null!=(l=q.tooltip)?l:T.Tooltip)?a:kc,Je=null!=(c=null!=(u=q.arrow)?u:T.Arrow)?c:Bc,Ke=fo(He,(0,h.A)({},X,null!=(d=Y.popper)?d:k.popper,{className:(0,_n.A)(Ve.popper,null==X?void 0:X.className,null==(p=null!=(g=Y.popper)?g:k.popper)?void 0:p.className)}),Ge),Xe=fo(We,(0,h.A)({},ee,null!=(v=Y.transition)?v:k.transition),Ge),Ye=fo(Qe,(0,h.A)({},null!=(b=Y.tooltip)?b:k.tooltip,{className:(0,_n.A)(Ve.tooltip,null==(y=null!=(x=Y.tooltip)?x:k.tooltip)?void 0:y.className)}),Ge),qe=fo(Je,(0,h.A)({},null!=(w=Y.arrow)?w:k.arrow,{className:(0,_n.A)(Ve.arrow,null==(_=null!=(S=Y.arrow)?S:k.arrow)?void 0:_.className)}),Ge);return(0,m.jsxs)(A.Fragment,{children:[A.cloneElement(ne,ze),(0,m.jsx)(He,(0,h.A)({as:null!=K?K:Sc,placement:J,anchorEl:j?{getBoundingClientRect:()=>({top:Rc.y,left:Rc.x,right:Rc.x,bottom:Rc.y,width:0,height:0})}:oe,popperRef:De,open:!!oe&&me,id:ve,transition:!0},je,Ke,{popperOptions:Ue,children:e=>{let{TransitionProps:t}=e;return(0,m.jsx)(We,(0,h.A)({timeout:re.transitions.duration.shorter},t,Xe,{children:(0,m.jsxs)(Qe,(0,h.A)({},Ye,{children:[Z,M?(0,m.jsx)(Je,(0,h.A)({},qe,{ref:le})):null]}))}))}}))]})})),Fc=Dc;function Nc(e){return(0,Fn.Ay)("MuiIconButton",e)}const zc=(0,Tn.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),jc=["edge","children","className","color","disabled","disableFocusRipple","size"],Uc=(0,Ln.Ay)(gi,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat((0,Dn.A)(n.color))],n.edge&&t["edge".concat((0,Dn.A)(n.edge))],t["size".concat((0,Dn.A)(n.size))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var r;const i=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,h.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,h.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,h.A)({},i&&{backgroundColor:t.vars?"rgba(".concat(i.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{["&.".concat(zc.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),Gc=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:s="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,C.A)(n,jc),d=(0,h.A)({},n,{edge:r,color:s,disabled:a,disableFocusRipple:l,size:c}),A=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,s={root:["root",n&&"disabled","default"!==r&&"color".concat((0,Dn.A)(r)),i&&"edge".concat((0,Dn.A)(i)),"size".concat((0,Dn.A)(o))]};return(0,Rn.A)(s,Nc,t)})(d);return(0,m.jsx)(Uc,(0,h.A)({className:(0,_n.A)(A.root,o),centerRipple:!0,focusRipple:!l,disabled:a,ref:t},u,{ownerState:d,children:i}))})),Vc=Gc,Hc=e=>{const t=A.useRef({});return A.useEffect((()=>{t.current=e})),t.current};function Wc(e){return(0,Fn.Ay)("MuiBadge",e)}const Qc=(0,Tn.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Jc=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Kc=zo(),Xc=(0,Ln.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Yc=(0,Ln.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t["anchorOrigin".concat((0,Dn.A)(n.anchorOrigin.vertical)).concat((0,Dn.A)(n.anchorOrigin.horizontal)).concat((0,Dn.A)(n.overlap))],"default"!==n.color&&t["color".concat((0,Dn.A)(n.color))],n.invisible&&t.invisible]}})((e=>{let{theme:t}=e;var n;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(n=t.vars)?n:t).palette).filter((e=>{var n,r;return(null!=(n=t.vars)?n:t).palette[e].main&&(null!=(r=t.vars)?r:t).palette[e].contrastText})).map((e=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(Qc.invisible)]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(Qc.invisible)]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(Qc.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(Qc.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(Qc.invisible)]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(Qc.invisible)]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(Qc.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(Qc.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})),qc=A.forwardRef((function(e,t){var n,r,i,o,s,a;const l=Kc({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:A={},componentsProps:f={},children:p,overlap:g="rectangular",color:v="default",invisible:b=!1,max:y=99,badgeContent:x,slots:w,slotProps:_,showZero:S=!1,variant:E="standard"}=l,M=(0,C.A)(l,Jc),{badgeContent:P,invisible:T,max:k,displayValue:B}=function(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=Hc({badgeContent:t,max:r});let s=n;!1!==n||0!==t||i||(s=!0);const{badgeContent:a,max:l=r}=s?o:e;return{badgeContent:a,invisible:s,max:l,displayValue:a&&Number(a)>l?"".concat(l,"+"):a}}({max:y,invisible:b,badgeContent:x,showZero:S}),O=Hc({anchorOrigin:c,color:v,overlap:g,variant:E,badgeContent:x}),I=T||null==P&&"dot"!==E,{color:R=v,overlap:L=g,anchorOrigin:D=c,variant:F=E}=I?O:l,N="dot"!==F?B:void 0,z=(0,h.A)({},l,{badgeContent:P,invisible:I,max:k,displayValue:N,showZero:S,anchorOrigin:D,color:R,overlap:L,variant:F}),j=(e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:s={}}=e,a={root:["root"],badge:["badge",o,r&&"invisible","anchorOrigin".concat((0,Dn.A)(n.vertical)).concat((0,Dn.A)(n.horizontal)),"anchorOrigin".concat((0,Dn.A)(n.vertical)).concat((0,Dn.A)(n.horizontal)).concat((0,Dn.A)(i)),"overlap".concat((0,Dn.A)(i)),"default"!==t&&"color".concat((0,Dn.A)(t))]};return(0,Rn.A)(a,Wc,s)})(z),U=null!=(n=null!=(r=null==w?void 0:w.root)?r:A.Root)?n:Xc,G=null!=(i=null!=(o=null==w?void 0:w.badge)?o:A.Badge)?i:Yc,V=null!=(s=null==_?void 0:_.root)?s:f.root,H=null!=(a=null==_?void 0:_.badge)?a:f.badge,W=vo({elementType:U,externalSlotProps:V,externalForwardedProps:M,additionalProps:{ref:t,as:d},ownerState:z,className:(0,_n.A)(null==V?void 0:V.className,j.root,u)}),Q=vo({elementType:G,externalSlotProps:H,ownerState:z,className:(0,_n.A)(j.badge,null==H?void 0:H.className)});return(0,m.jsxs)(U,(0,h.A)({},W,{children:[p,(0,m.jsx)(G,(0,h.A)({},Q,{children:N}))]}))})),Zc=qc;var $c=n(992),eu=n(4708),tu=n(6288);function nu(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function ru(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function iu(e){return parseInt((0,tu.A)(e).getComputedStyle(e).paddingRight,10)||0}function ou(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&ru(e,i)}))}function su(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function au(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,bo.A)(e);return t.body===e?(0,tu.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=nu((0,bo.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(iu(r)+e,"px");const t=(0,bo.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(iu(t)+e,"px")}))}let e;if(r.parentNode instanceof DocumentFragment)e=(0,bo.A)(r).body;else{const t=r.parentElement,n=(0,tu.A)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const lu=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&ru(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);ou(t,e.mount,e.modalRef,r,!0);const i=su(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=su(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=au(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=su(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&ru(e.modalRef,t),ou(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&ru(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};function cu(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=lu,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=e,f=A.useRef({}),p=A.useRef(null),g=A.useRef(null),m=(0,ho.A)(g,d),[v,b]=A.useState(!u),y=function(e){return!!e&&e.props.hasOwnProperty("in")}(l);let x=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(x=!1);const w=()=>(f.current.modalRef=g.current,f.current.mount=p.current,f.current),_=()=>{i.mount(w(),{disableScrollLock:r}),g.current&&(g.current.scrollTop=0)},S=(0,So.A)((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||(0,bo.A)(p.current).body;i.add(w(),e),g.current&&_()})),C=A.useCallback((()=>i.isTopModal(w())),[i]),E=(0,So.A)((e=>{p.current=e,e&&(u&&C()?_():g.current&&ru(g.current,x))})),M=A.useCallback((()=>{i.remove(w(),x)}),[x,i]);A.useEffect((()=>()=>{M()}),[M]),A.useEffect((()=>{u?S():y&&o||M()}),[u,M,y,o,S]);const P=e=>t=>{var r;null==(r=e.onKeyDown)||r.call(e,t),"Escape"===t.key&&229!==t.which&&C()&&(n||(t.stopPropagation(),c&&c(t,"escapeKeyDown")))},T=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&c&&c(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=po(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,h.A)({},n,t);return(0,h.A)({role:"presentation"},r,{onKeyDown:P(r),ref:m})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,h.A)({"aria-hidden":!0},e,{onClick:T(e),open:u})},getTransitionProps:()=>({onEnter:(0,eu.A)((()=>{b(!1),s&&s()}),null==l?void 0:l.props.onEnter),onExited:(0,eu.A)((()=>{b(!0),a&&a(),o&&M()}),null==l?void 0:l.props.onExited)}),rootRef:m,portalRef:E,isTopModal:C,exited:v,hasTransition:y}}const uu=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function du(e){const t=[],n=[];return Array.from(e.querySelectorAll(uu)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function Au(){return!0}function hu(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=du,isEnabled:s=Au,open:a}=e,l=A.useRef(!1),c=A.useRef(null),u=A.useRef(null),d=A.useRef(null),h=A.useRef(null),f=A.useRef(!1),p=A.useRef(null),g=(0,ho.A)(t.ref,p),v=A.useRef(null);A.useEffect((()=>{a&&p.current&&(f.current=!n)}),[n,a]),A.useEffect((()=>{if(!a||!p.current)return;const e=(0,bo.A)(p.current);return p.current.contains(e.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}}),[a]),A.useEffect((()=>{if(!a||!p.current)return;const e=(0,bo.A)(p.current),t=t=>{v.current=t,!r&&s()&&"Tab"===t.key&&e.activeElement===p.current&&t.shiftKey&&(l.current=!0,u.current&&u.current.focus())},n=()=>{const t=p.current;if(null===t)return;if(!e.hasFocus()||!s()||l.current)return void(l.current=!1);if(t.contains(e.activeElement))return;if(r&&e.activeElement!==c.current&&e.activeElement!==u.current)return;if(e.activeElement!==h.current)h.current=null;else if(null!==h.current)return;if(!f.current)return;let n=[];if(e.activeElement!==c.current&&e.activeElement!==u.current||(n=o(p.current)),n.length>0){var i,a;const e=Boolean((null==(i=v.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=v.current)?void 0:a.key)),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const i=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(i),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,r,i,s,a,o]);const b=e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0};return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)("div",{tabIndex:a?0:-1,onFocus:b,ref:c,"data-testid":"sentinelStart"}),A.cloneElement(t,{ref:g,onFocus:e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0,h.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,m.jsx)("div",{tabIndex:a?0:-1,onFocus:b,ref:u,"data-testid":"sentinelEnd"})]})}const fu=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],pu={entering:{opacity:1},entered:{opacity:1}},gu=A.forwardRef((function(e,t){const n=xr(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,easing:a,in:l,onEnter:c,onEntered:u,onEntering:d,onExit:f,onExited:p,onExiting:g,style:v,timeout:b=r,TransitionComponent:y=ka}=e,x=(0,C.A)(e,fu),w=A.useRef(null),_=(0,Lr.A)(w,s.ref,t),S=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},E=S(d),M=S(((e,t)=>{Ba(e);const r=Oa({style:v,timeout:b,easing:a},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),c&&c(e,t)})),P=S(u),T=S(g),k=S((e=>{const t=Oa({style:v,timeout:b,easing:a},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),f&&f(e)})),B=S(p);return(0,m.jsx)(y,(0,h.A)({appear:o,in:l,nodeRef:w,onEnter:M,onEntered:P,onEntering:E,onExit:k,onExited:B,onExiting:T,addEndListener:e=>{i&&i(w.current,e)},timeout:b},x,{children:(e,t)=>A.cloneElement(s,(0,h.A)({style:(0,h.A)({opacity:0,visibility:"exited"!==e||l?void 0:"hidden"},pu[e],v,s.props.style),ref:_},t))}))})),mu=gu;function vu(e){return(0,Fn.Ay)("MuiBackdrop",e)}(0,Tn.A)("MuiBackdrop",["root","invisible"]);const bu=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],yu=(0,Ln.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,h.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),xu=A.forwardRef((function(e,t){var n,r,i;const o=(0,f.A)({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:A,slotProps:p={},slots:g={},TransitionComponent:v=mu,transitionDuration:b}=o,y=(0,C.A)(o,bu),x=(0,h.A)({},o,{component:l,invisible:d}),w=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,Rn.A)(r,vu,t)})(x),_=null!=(n=p.root)?n:u.root;return(0,m.jsx)(v,(0,h.A)({in:A,timeout:b},y,{children:(0,m.jsx)(yu,(0,h.A)({"aria-hidden":!0},_,{as:null!=(r=null!=(i=g.root)?i:c.Root)?r:l,className:(0,_n.A)(w.root,a,null==_?void 0:_.className),ownerState:(0,h.A)({},x,null==_?void 0:_.ownerState),classes:w,ref:t,children:s}))}))}));function wu(e){return(0,Fn.Ay)("MuiModal",e)}(0,Tn.A)("MuiModal",["root","hidden","backdrop"]);const _u=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Su=(0,Ln.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Cu=(0,Ln.Ay)(xu,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Eu=A.forwardRef((function(e,t){var n,r,i,o,s,a;const l=(0,f.A)({name:"MuiModal",props:e}),{BackdropComponent:c=Cu,BackdropProps:u,className:d,closeAfterTransition:p=!1,children:g,container:v,component:b,components:y={},componentsProps:x={},disableAutoFocus:w=!1,disableEnforceFocus:_=!1,disableEscapeKeyDown:S=!1,disablePortal:E=!1,disableRestoreFocus:M=!1,disableScrollLock:P=!1,hideBackdrop:T=!1,keepMounted:k=!1,onBackdropClick:B,open:O,slotProps:I,slots:R}=l,L=(0,C.A)(l,_u),D=(0,h.A)({},l,{closeAfterTransition:p,disableAutoFocus:w,disableEnforceFocus:_,disableEscapeKeyDown:S,disablePortal:E,disableRestoreFocus:M,disableScrollLock:P,hideBackdrop:T,keepMounted:k}),{getRootProps:F,getBackdropProps:N,getTransitionProps:z,portalRef:j,isTopModal:U,exited:G,hasTransition:V}=cu((0,h.A)({},D,{rootRef:t})),H=(0,h.A)({},D,{exited:G}),W=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,Rn.A)(i,wu,r)})(H),Q={};if(void 0===g.props.tabIndex&&(Q.tabIndex="-1"),V){const{onEnter:e,onExited:t}=z();Q.onEnter=e,Q.onExited=t}const J=null!=(n=null!=(r=null==R?void 0:R.root)?r:y.Root)?n:Su,K=null!=(i=null!=(o=null==R?void 0:R.backdrop)?o:y.Backdrop)?i:c,X=null!=(s=null==I?void 0:I.root)?s:x.root,Y=null!=(a=null==I?void 0:I.backdrop)?a:x.backdrop,q=vo({elementType:J,externalSlotProps:X,externalForwardedProps:L,getSlotProps:F,additionalProps:{ref:t,as:b},ownerState:H,className:(0,_n.A)(d,null==X?void 0:X.className,null==W?void 0:W.root,!H.open&&H.exited&&(null==W?void 0:W.hidden))}),Z=vo({elementType:K,externalSlotProps:Y,additionalProps:u,getSlotProps:e=>N((0,h.A)({},e,{onClick:t=>{B&&B(t),null!=e&&e.onClick&&e.onClick(t)}})),className:(0,_n.A)(null==Y?void 0:Y.className,null==u?void 0:u.className,null==W?void 0:W.backdrop),ownerState:H});return k||O||V&&!G?(0,m.jsx)(oc,{ref:j,container:v,disablePortal:E,children:(0,m.jsxs)(J,(0,h.A)({},q,{children:[!T&&c?(0,m.jsx)(K,(0,h.A)({},Z)):null,(0,m.jsx)(hu,{disableEnforceFocus:_,disableAutoFocus:w,disableRestoreFocus:M,isEnabled:U,open:O,children:A.cloneElement(g,Q)})]}))}):null})),Mu=Eu;function Pu(e){return(0,Fn.Ay)("MuiDialog",e)}const Tu=(0,Tn.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const ku=A.createContext({}),Bu=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Ou=(0,Ln.Ay)(xu,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Iu=(0,Ln.Ay)(Mu,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Ru=(0,Ln.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t["scroll".concat((0,Dn.A)(n.scroll))]]}})((e=>{let{ownerState:t}=e;return(0,h.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),Lu=(0,Ln.Ay)(qi,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["scrollPaper".concat((0,Dn.A)(n.scroll))],t["paperWidth".concat((0,Dn.A)(String(n.maxWidth)))],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(Tu.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit),["&.".concat(Tu.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(Tu.paperScrollBody)]:{margin:0,maxWidth:"100%"}})})),Du=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiDialog"}),r=xr(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":s,BackdropComponent:a,BackdropProps:l,children:c,className:u,disableEscapeKeyDown:d=!1,fullScreen:p=!1,fullWidth:g=!1,maxWidth:v="sm",onBackdropClick:b,onClose:y,open:x,PaperComponent:w=qi,PaperProps:_={},scroll:S="paper",TransitionComponent:E=mu,transitionDuration:M=i,TransitionProps:P}=n,T=(0,C.A)(n,Bu),k=(0,h.A)({},n,{disableEscapeKeyDown:d,fullScreen:p,fullWidth:g,maxWidth:v,scroll:S}),B=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,s={root:["root"],container:["container","scroll".concat((0,Dn.A)(n))],paper:["paper","paperScroll".concat((0,Dn.A)(n)),"paperWidth".concat((0,Dn.A)(String(r))),i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,Rn.A)(s,Pu,t)})(k),O=A.useRef(),I=(0,$c.A)(s),R=A.useMemo((()=>({titleId:I})),[I]);return(0,m.jsx)(Iu,(0,h.A)({className:(0,_n.A)(B.root,u),closeAfterTransition:!0,components:{Backdrop:Ou},componentsProps:{backdrop:(0,h.A)({transitionDuration:M,as:a},l)},disableEscapeKeyDown:d,onClose:y,open:x,ref:t,onClick:e=>{O.current&&(O.current=null,b&&b(e),y&&y(e,"backdropClick"))},ownerState:k},T,{children:(0,m.jsx)(E,(0,h.A)({appear:!0,in:x,timeout:M,role:"presentation"},P,{children:(0,m.jsx)(Ru,{className:(0,_n.A)(B.container),onMouseDown:e=>{O.current=e.target===e.currentTarget},ownerState:k,children:(0,m.jsx)(Lu,(0,h.A)({as:w,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":I},_,{className:(0,_n.A)(B.paper,_.className),ownerState:k,children:(0,m.jsx)(ku.Provider,{value:R,children:c})}))})}))}))})),Fu=Du;function Nu(e){return(0,Fn.Ay)("MuiDialogTitle",e)}const zu=(0,Tn.A)("MuiDialogTitle",["root"]),ju=["className","id"],Uu=(0,Ln.Ay)(Hn,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Gu=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiDialogTitle"}),{className:r,id:i}=n,o=(0,C.A)(n,ju),s=n,a=(e=>{const{classes:t}=e;return(0,Rn.A)({root:["root"]},Nu,t)})(s),{titleId:l=i}=A.useContext(ku);return(0,m.jsx)(Uu,(0,h.A)({component:"h2",className:(0,_n.A)(a.root,r),ownerState:s,ref:t,variant:"h6",id:null!=i?i:l},o))}));function Vu(e){return(0,Fn.Ay)("MuiDialogContent",e)}(0,Tn.A)("MuiDialogContent",["root","dividers"]);const Hu=["className","dividers"],Wu=(0,Ln.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}:{[".".concat(zu.root," + &")]:{paddingTop:0}})})),Qu=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=(0,C.A)(n,Hu),s=(0,h.A)({},n,{dividers:i}),a=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,Rn.A)(r,Vu,t)})(s);return(0,m.jsx)(Wu,(0,h.A)({className:(0,_n.A)(a.root,r),ownerState:s,ref:t},o))}));function Ju(e){return(0,Fn.Ay)("MuiDialogContentText",e)}(0,Tn.A)("MuiDialogContentText",["root"]);const Ku=["children","className"],Xu=(0,Ln.Ay)(Hn,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yu=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiDialogContentText"}),{className:r}=n,i=(0,C.A)(n,Ku),o=(e=>{const{classes:t}=e,n=(0,Rn.A)({root:["root"]},Ju,t);return(0,h.A)({},t,n)})(i);return(0,m.jsx)(Xu,(0,h.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:i,className:(0,_n.A)(o.root,r)},n,{classes:o}))}));var qu=n(6632),Zu=n(6440);const $u=["onChange","maxRows","minRows","style","value"];function ed(e){return parseInt(e,10)||0}const td={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const nd=A.forwardRef((function(e,t){const{onChange:n,maxRows:r,minRows:i=1,style:o,value:s}=e,a=(0,C.A)(e,$u),{current:l}=A.useRef(null!=s),c=A.useRef(null),u=(0,ho.A)(t,c),d=A.useRef(null),f=A.useCallback((()=>{const t=c.current,n=(0,tu.A)(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const o=d.current;o.style.width=n.width,o.value=t.value||e.placeholder||"x","\n"===o.value.slice(-1)&&(o.value+=" ");const s=n.boxSizing,a=ed(n.paddingBottom)+ed(n.paddingTop),l=ed(n.borderBottomWidth)+ed(n.borderTopWidth),u=o.scrollHeight;o.value="x";const A=o.scrollHeight;let h=u;i&&(h=Math.max(Number(i)*A,h)),r&&(h=Math.min(Number(r)*A,h)),h=Math.max(h,A);return{outerHeightStyle:h+("border-box"===s?a+l:0),overflowing:Math.abs(h-u)<=1}}),[r,i,e.placeholder]),p=A.useCallback((()=>{const e=f();if(void 0===(t=e)||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflowing)return;var t;const n=c.current;n.style.height="".concat(e.outerHeightStyle,"px"),n.style.overflow=e.overflowing?"hidden":""}),[f]);(0,_o.A)((()=>{const e=()=>{p()};let t;const n=(0,Zu.A)(e),r=c.current,i=(0,tu.A)(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(e),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(t),i.removeEventListener("resize",n),o&&o.disconnect()}}),[f,p]),(0,_o.A)((()=>{p()}));return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)("textarea",(0,h.A)({value:s,onChange:e=>{l||p(),n&&n(e)},ref:u,rows:i,style:o},a)),(0,m.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,h.A)({},td,o,{paddingTop:0,paddingBottom:0})})]})}));function rd(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function id(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(rd(e.value)&&""!==e.value||t&&rd(e.defaultValue)&&""!==e.defaultValue)}function od(e){return(0,Fn.Ay)("MuiInputBase",e)}const sd=(0,Tn.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),ad=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],ld=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,Dn.A)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},cd=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},ud=(0,Ln.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ld})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(sd.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,h.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),dd=(0,Ln.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:cd})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,h.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,h.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(sd.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(sd.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Ad=(0,m.jsx)(x,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),hd=A.forwardRef((function(e,t){var n;const r=(0,f.A)({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:s,className:a,components:l={},componentsProps:c={},defaultValue:u,disabled:d,disableInjectingGlobalStyles:p,endAdornment:g,fullWidth:v=!1,id:b,inputComponent:y="input",inputProps:x={},inputRef:w,maxRows:_,minRows:S,multiline:E=!1,name:M,onBlur:P,onChange:T,onClick:k,onFocus:B,onKeyDown:O,onKeyUp:I,placeholder:R,readOnly:L,renderSuffix:D,rows:F,slotProps:N={},slots:z={},startAdornment:j,type:U="text",value:G}=r,V=(0,C.A)(r,ad),H=null!=x.value?x.value:G,{current:W}=A.useRef(null!=H),Q=A.useRef(),J=A.useCallback((e=>{0}),[]),K=(0,Lr.A)(Q,w,x.ref,J),[X,Y]=A.useState(!1),q=gs();const Z=Gs({props:r,muiFormControl:q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Z.focused=q?q.focused:X,A.useEffect((()=>{!q&&d&&X&&(Y(!1),P&&P())}),[q,d,X,P]);const $=q&&q.onFilled,ee=q&&q.onEmpty,te=A.useCallback((e=>{id(e)?$&&$():ee&&ee()}),[$,ee]);(0,vi.A)((()=>{W&&te({value:H})}),[H,te,W]);A.useEffect((()=>{te(Q.current)}),[]);let ne=y,re=x;E&&"input"===ne&&(re=F?(0,h.A)({type:void 0,minRows:F,maxRows:F},re):(0,h.A)({type:void 0,maxRows:_,minRows:S},re),ne=nd);A.useEffect((()=>{q&&q.setAdornedStart(Boolean(j))}),[q,j]);const ie=(0,h.A)({},r,{color:Z.color||"primary",disabled:Z.disabled,endAdornment:g,error:Z.error,focused:Z.focused,formControl:q,fullWidth:v,hiddenLabel:Z.hiddenLabel,multiline:E,size:Z.size,startAdornment:j,type:U}),oe=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:A,startAdornment:h,type:f}=e,p={root:["root","color".concat((0,Dn.A)(n)),r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",A&&"medium"!==A&&"size".concat((0,Dn.A)(A)),u&&"multiline",h&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===A&&"inputSizeSmall",c&&"inputHiddenLabel",h&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return(0,Rn.A)(p,od,t)})(ie),se=z.root||l.Root||ud,ae=N.root||c.root||{},le=z.input||l.Input||dd;return re=(0,h.A)({},re,null!=(n=N.input)?n:c.input),(0,m.jsxs)(A.Fragment,{children:[!p&&Ad,(0,m.jsxs)(se,(0,h.A)({},ae,!Rr(se)&&{ownerState:(0,h.A)({},ie,ae.ownerState)},{ref:t,onClick:e=>{Q.current&&e.currentTarget===e.target&&Q.current.focus(),k&&k(e)}},V,{className:(0,_n.A)(oe.root,ae.className,a,L&&"MuiInputBase-readOnly"),children:[j,(0,m.jsx)(ps.Provider,{value:null,children:(0,m.jsx)(le,(0,h.A)({ownerState:ie,"aria-invalid":Z.error,"aria-describedby":i,autoComplete:o,autoFocus:s,defaultValue:u,disabled:Z.disabled,id:b,onAnimationStart:e=>{te("mui-auto-fill-cancel"===e.animationName?Q.current:{value:"x"})},name:M,placeholder:R,readOnly:L,required:Z.required,rows:F,value:H,onKeyDown:O,onKeyUp:I,type:U},re,!Rr(le)&&{as:ne,ownerState:(0,h.A)({},ie,re.ownerState)},{ref:K,className:(0,_n.A)(oe.input,re.className,L&&"MuiInputBase-readOnly"),onBlur:e=>{P&&P(e),x.onBlur&&x.onBlur(e),q&&q.onBlur?q.onBlur(e):Y(!1)},onChange:function(e){if(!W){const t=e.target||Q.current;if(null==t)throw new Error((0,qu.A)(1));te({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];x.onChange&&x.onChange(e,...n),T&&T(e,...n)},onFocus:e=>{Z.disabled?e.stopPropagation():(B&&B(e),x.onFocus&&x.onFocus(e),q&&q.onFocus?q.onFocus(e):Y(!0))}}))}),g,D?D((0,h.A)({},Z,{startAdornment:j})):null]}))]})})),fd=hd;function pd(e){return(0,Fn.Ay)("MuiInput",e)}const gd=(0,h.A)({},sd,(0,Tn.A)("MuiInput",["root","underline","input"])),md=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],vd=(0,Ln.Ay)(ud,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ld(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),(0,h.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(gd.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(gd.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(gd.disabled,", .").concat(gd.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},["&.".concat(gd.disabled,":before")]:{borderBottomStyle:"dotted"}})})),bd=(0,Ln.Ay)(dd,{name:"MuiInput",slot:"Input",overridesResolver:cd})({}),yd=A.forwardRef((function(e,t){var n,r,i,o;const s=(0,f.A)({props:e,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:A=!1,slotProps:p,slots:g={},type:v="text"}=s,b=(0,C.A)(s,md),y=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,Rn.A)(r,pd,t);return(0,h.A)({},t,i)})(s),x={root:{ownerState:{disableUnderline:a}}},w=(null!=p?p:c)?(0,ms.A)(null!=p?p:c,x):x,_=null!=(n=null!=(r=g.root)?r:l.Root)?n:vd,S=null!=(i=null!=(o=g.input)?o:l.Input)?i:bd;return(0,m.jsx)(fd,(0,h.A)({slots:{root:_,input:S},slotProps:w,fullWidth:u,inputComponent:d,multiline:A,ref:t,type:v},b,{classes:y}))}));yd.muiName="Input";const xd=yd;function wd(e){return(0,Fn.Ay)("MuiFilledInput",e)}const _d=(0,h.A)({},sd,(0,Tn.A)("MuiFilledInput",["root","underline","input"])),Sd=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Cd=(0,Ln.Ay)(ud,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ld(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,h.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},["&.".concat(_d.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},["&.".concat(_d.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat(null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(_d.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(_d.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(_d.disabled,", .").concat(_d.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(_d.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,h.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),Ed=(0,Ln.Ay)(dd,{name:"MuiFilledInput",slot:"Input",overridesResolver:cd})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),Md=A.forwardRef((function(e,t){var n,r,i,o;const s=(0,f.A)({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:A,slots:p={},type:g="text"}=s,v=(0,C.A)(s,Sd),b=(0,h.A)({},s,{fullWidth:c,inputComponent:u,multiline:d,type:g}),y=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,Rn.A)(r,wd,t);return(0,h.A)({},t,i)})(s),x={root:{ownerState:b},input:{ownerState:b}},w=(null!=A?A:l)?(0,ms.A)(x,null!=A?A:l):x,_=null!=(n=null!=(r=p.root)?r:a.Root)?n:Cd,S=null!=(i=null!=(o=p.input)?o:a.Input)?i:Ed;return(0,m.jsx)(fd,(0,h.A)({slots:{root:_,input:S},componentsProps:w,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:g},v,{classes:y}))}));Md.muiName="Input";const Pd=Md;var Td;const kd=["children","classes","className","label","notched"],Bd=(0,Ln.Ay)("fieldset",{shouldForwardProp:Li.A})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Od=(0,Ln.Ay)("legend",{shouldForwardProp:Li.A})((e=>{let{ownerState:t,theme:n}=e;return(0,h.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,h.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function Id(e){return(0,Fn.Ay)("MuiOutlinedInput",e)}const Rd=(0,h.A)({},sd,(0,Tn.A)("MuiOutlinedInput",["root","notchedOutline","input"])),Ld=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Dd=(0,Ln.Ay)(ud,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:ld})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,h.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(Rd.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(Rd.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}},["&.".concat(Rd.focused," .").concat(Rd.notchedOutline)]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},["&.".concat(Rd.error," .").concat(Rd.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(Rd.disabled," .").concat(Rd.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,h.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),Fd=(0,Ln.Ay)((function(e){const{className:t,label:n,notched:r}=e,i=(0,C.A)(e,kd),o=null!=n&&""!==n,s=(0,h.A)({},e,{notched:r,withLabel:o});return(0,m.jsx)(Bd,(0,h.A)({"aria-hidden":!0,className:t,ownerState:s},i,{children:(0,m.jsx)(Od,{ownerState:s,children:o?(0,m.jsx)("span",{children:n}):Td||(Td=(0,m.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),Nd=(0,Ln.Ay)(dd,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:cd})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),zd=A.forwardRef((function(e,t){var n,r,i,o,s;const a=(0,f.A)({props:e,name:"MuiOutlinedInput"}),{components:l={},fullWidth:c=!1,inputComponent:u="input",label:d,multiline:p=!1,notched:g,slots:v={},type:b="text"}=a,y=(0,C.A)(a,Ld),x=(e=>{const{classes:t}=e,n=(0,Rn.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Id,t);return(0,h.A)({},t,n)})(a),w=gs(),_=Gs({props:a,muiFormControl:w,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S=(0,h.A)({},a,{color:_.color||"primary",disabled:_.disabled,error:_.error,focused:_.focused,formControl:w,fullWidth:c,hiddenLabel:_.hiddenLabel,multiline:p,size:_.size,type:b}),E=null!=(n=null!=(r=v.root)?r:l.Root)?n:Dd,M=null!=(i=null!=(o=v.input)?o:l.Input)?i:Nd;return(0,m.jsx)(fd,(0,h.A)({slots:{root:E,input:M},renderSuffix:e=>(0,m.jsx)(Fd,{ownerState:S,className:x.notchedOutline,label:null!=d&&""!==d&&_.required?s||(s=(0,m.jsxs)(A.Fragment,{children:[d,"\u2009","*"]})):d,notched:"undefined"!==typeof g?g:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:c,inputComponent:u,multiline:p,ref:t,type:b},y,{classes:(0,h.A)({},x,{notchedOutline:null})}))}));zd.muiName="Input";const jd=zd;function Ud(e){return(0,Fn.Ay)("MuiFormLabel",e)}const Gd=(0,Tn.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Vd=["children","className","color","component","disabled","error","filled","focused","required"],Hd=(0,Ln.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,h.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(Gd.focused)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(Gd.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(Gd.error)]:{color:(t.vars||t).palette.error.main}})})),Wd=(0,Ln.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{["&.".concat(Gd.error)]:{color:(t.vars||t).palette.error.main}}})),Qd=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,s=(0,C.A)(n,Vd),a=Gs({props:n,muiFormControl:gs(),states:["color","required","focused","disabled","error","filled"]}),l=(0,h.A)({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e,l={root:["root","color".concat((0,Dn.A)(n)),i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return(0,Rn.A)(l,Ud,t)})(l);return(0,m.jsxs)(Hd,(0,h.A)({as:o,ownerState:l,className:(0,_n.A)(c.root,i),ref:t},s,{children:[r,a.required&&(0,m.jsxs)(Wd,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),Jd=Qd;function Kd(e){return(0,Fn.Ay)("MuiInputLabel",e)}(0,Tn.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Xd=["disableAnimation","margin","shrink","variant","className"],Yd=(0,Ln.Ay)(Jd,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Gd.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,h.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,h.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,h.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),qd=A.forwardRef((function(e,t){const n=(0,f.A)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:o}=n,s=(0,C.A)(n,Xd),a=gs();let l=i;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=Gs({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),u=(0,h.A)({},n,{disableAnimation:r,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&"size".concat((0,Dn.A)(r)),s],asterisk:[a&&"asterisk"]},c=(0,Rn.A)(l,Kd,t);return(0,h.A)({},t,c)})(u);return(0,m.jsx)(Yd,(0,h.A)({"data-shrink":l,ownerState:u,ref:t,className:(0,_n.A)(d.root,o)},s,{classes:d}))}));function Zd(e){return(0,Fn.Ay)("MuiFormControl",e)}(0,Tn.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const $d=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],eA=(0,Ln.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,h.A)({},t.root,t["margin".concat((0,Dn.A)(n.margin))],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,h.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),tA=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiFormControl"}),{children:r,className:i,color:o="primary",component:s="div",disabled:a=!1,error:l=!1,focused:c,fullWidth:u=!1,hiddenLabel:d=!1,margin:p="none",required:g=!1,size:v="medium",variant:b="outlined"}=n,y=(0,C.A)(n,$d),x=(0,h.A)({},n,{color:o,component:s,disabled:a,error:l,fullWidth:u,hiddenLabel:d,margin:p,required:g,size:v,variant:b}),w=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&"margin".concat((0,Dn.A)(n)),r&&"fullWidth"]};return(0,Rn.A)(i,Zd,t)})(x),[_,S]=A.useState((()=>{let e=!1;return r&&A.Children.forEach(r,(t=>{if(!(0,mi.A)(t,["Input","Select"]))return;const n=(0,mi.A)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[E,M]=A.useState((()=>{let e=!1;return r&&A.Children.forEach(r,(t=>{(0,mi.A)(t,["Input","Select"])&&(id(t.props,!0)||id(t.props.inputProps,!0))&&(e=!0)})),e})),[P,T]=A.useState(!1);a&&P&&T(!1);const k=void 0===c||a?P:c;let B;const O=A.useMemo((()=>({adornedStart:_,setAdornedStart:S,color:o,disabled:a,error:l,filled:E,focused:k,fullWidth:u,hiddenLabel:d,size:v,onBlur:()=>{T(!1)},onEmpty:()=>{M(!1)},onFilled:()=>{M(!0)},onFocus:()=>{T(!0)},registerEffect:B,required:g,variant:b})),[_,o,a,l,E,k,u,d,B,g,v,b]);return(0,m.jsx)(ps.Provider,{value:O,children:(0,m.jsx)(eA,(0,h.A)({as:s,ownerState:x,className:(0,_n.A)(w.root,i),ref:t},y,{children:r}))})})),nA=tA;function rA(e){return(0,Fn.Ay)("MuiFormHelperText",e)}const iA=(0,Tn.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var oA;const sA=["children","className","component","disabled","error","filled","focused","margin","required","variant"],aA=(0,Ln.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat((0,Dn.A)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(iA.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(iA.error)]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),lA=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,s=(0,C.A)(n,sA),a=Gs({props:n,muiFormControl:gs(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,h.A)({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&"size".concat((0,Dn.A)(r)),n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return(0,Rn.A)(c,rA,t)})(l);return(0,m.jsx)(aA,(0,h.A)({as:o,ownerState:l,className:(0,_n.A)(c.root,i),ref:t},s,{children:" "===r?oA||(oA=(0,m.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),cA=lA;var uA=n(2427);const dA=nu,AA=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function hA(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function fA(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function pA(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function gA(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&pA(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}const mA=A.forwardRef((function(e,t){const{actions:n,autoFocus:r=!1,autoFocusItem:i=!1,children:o,className:s,disabledItemsFocusable:a=!1,disableListWrap:l=!1,onKeyDown:c,variant:u="selectedMenu"}=e,d=(0,C.A)(e,AA),f=A.useRef(null),p=A.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,vi.A)((()=>{r&&f.current.focus()}),[r]),A.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!f.current.style.width;if(e.clientHeight<f.current.clientHeight&&r){const t="".concat(dA((0,uA.A)(e)),"px");f.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,f.current.style.width="calc(100% + ".concat(t,")")}return f.current}})),[]);const g=(0,Lr.A)(f,t);let v=-1;A.Children.forEach(o,((e,t)=>{A.isValidElement(e)?(e.props.disabled||("selectedMenu"===u&&e.props.selected||-1===v)&&(v=t),v===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(v+=1,v>=o.length&&(v=-1))):v===t&&(v+=1,v>=o.length&&(v=-1))}));const b=A.Children.map(o,((e,t)=>{if(t===v){const t={};return i&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===u&&(t.tabIndex=0),A.cloneElement(e,t)}return e}));return(0,m.jsx)(ss,(0,h.A)({role:"menu",ref:g,className:s,onKeyDown:e=>{const t=f.current,n=e.key,r=(0,uA.A)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),gA(t,r,l,a,hA);else if("ArrowUp"===n)e.preventDefault(),gA(t,r,l,a,fA);else if("Home"===n)e.preventDefault(),gA(t,null,l,a,hA);else if("End"===n)e.preventDefault(),gA(t,null,l,a,fA);else if(1===n.length){const i=p.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const l=r&&!i.repeating&&pA(r,i);i.previousKeyMatched&&(l||gA(t,r,!1,a,hA,i))?e.preventDefault():i.previousKeyMatched=!1}c&&c(e)},tabIndex:r?0:-1},d,{children:b}))})),vA=mA;var bA=n(950),yA=n(6078);function xA(e){return(0,Fn.Ay)("MuiPopover",e)}(0,Tn.A)("MuiPopover",["root","paper"]);const wA=["onEntering"],_A=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],SA=["slotProps"];function CA(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function EA(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function MA(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function PA(e){return"function"===typeof e?e():e}const TA=(0,Ln.Ay)(Mu,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),kA=(0,Ln.Ay)(qi,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),BA=A.forwardRef((function(e,t){var n,r,i;const o=(0,f.A)({props:e,name:"MuiPopover"}),{action:s,anchorEl:a,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:c,anchorReference:u="anchorEl",children:d,className:p,container:g,elevation:v=8,marginThreshold:b=16,open:y,PaperProps:x={},slots:w,slotProps:_,transformOrigin:S={vertical:"top",horizontal:"left"},TransitionComponent:E=Na,transitionDuration:M="auto",TransitionProps:{onEntering:P}={},disableScrollLock:T=!1}=o,k=(0,C.A)(o.TransitionProps,wA),B=(0,C.A)(o,_A),O=null!=(n=null==_?void 0:_.paper)?n:x,I=A.useRef(),R=(0,Lr.A)(I,O.ref),L=(0,h.A)({},o,{anchorOrigin:l,anchorReference:u,elevation:v,marginThreshold:b,externalPaperSlotProps:O,transformOrigin:S,TransitionComponent:E,transitionDuration:M,TransitionProps:k}),D=(e=>{const{classes:t}=e;return(0,Rn.A)({root:["root"],paper:["paper"]},xA,t)})(L),F=A.useCallback((()=>{if("anchorPosition"===u)return c;const e=PA(a),t=(e&&1===e.nodeType?e:(0,uA.A)(I.current).body).getBoundingClientRect();return{top:t.top+CA(t,l.vertical),left:t.left+EA(t,l.horizontal)}}),[a,l.horizontal,l.vertical,c,u]),N=A.useCallback((e=>({vertical:CA(e,S.vertical),horizontal:EA(e,S.horizontal)})),[S.horizontal,S.vertical]),z=A.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=N(t);if("none"===u)return{top:null,left:null,transformOrigin:MA(n)};const r=F();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+t.height,l=o+t.width,c=(0,yA.A)(PA(a)),d=c.innerHeight-b,A=c.innerWidth-b;if(null!==b&&i<b){const e=i-b;i-=e,n.vertical+=e}else if(null!==b&&s>d){const e=s-d;i-=e,n.vertical+=e}if(null!==b&&o<b){const e=o-b;o-=e,n.horizontal+=e}else if(l>A){const e=l-A;o-=e,n.horizontal+=e}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:MA(n)}}),[a,u,F,N,b]),[j,U]=A.useState(y),G=A.useCallback((()=>{const e=I.current;if(!e)return;const t=z(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,U(!0)}),[z]);A.useEffect((()=>(T&&window.addEventListener("scroll",G),()=>window.removeEventListener("scroll",G))),[a,T,G]);A.useEffect((()=>{y&&G()})),A.useImperativeHandle(s,(()=>y?{updatePosition:()=>{G()}}:null),[y,G]),A.useEffect((()=>{if(!y)return;const e=(0,bA.A)((()=>{G()})),t=(0,yA.A)(a);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[a,y,G]);let V=M;"auto"!==M||E.muiSupportAuto||(V=void 0);const H=g||(a?(0,uA.A)(PA(a)).body:void 0),W=null!=(r=null==w?void 0:w.root)?r:TA,Q=null!=(i=null==w?void 0:w.paper)?i:kA,J=vo({elementType:Q,externalSlotProps:(0,h.A)({},O,{style:j?O.style:(0,h.A)({},O.style,{opacity:0})}),additionalProps:{elevation:v,ref:R},ownerState:L,className:(0,_n.A)(D.paper,null==O?void 0:O.className)}),K=vo({elementType:W,externalSlotProps:(null==_?void 0:_.root)||{},externalForwardedProps:B,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:H,open:y},ownerState:L,className:(0,_n.A)(D.root,p)}),{slotProps:X}=K,Y=(0,C.A)(K,SA);return(0,m.jsx)(W,(0,h.A)({},Y,!Rr(W)&&{slotProps:X,disableScrollLock:T},{children:(0,m.jsx)(E,(0,h.A)({appear:!0,in:y,onEntering:(e,t)=>{P&&P(e,t),G()},onExited:()=>{U(!1)},timeout:V},k,{children:(0,m.jsx)(Q,(0,h.A)({},J,{children:d}))}))}))})),OA=BA;function IA(e){return(0,Fn.Ay)("MuiMenu",e)}(0,Tn.A)("MuiMenu",["root","paper","list"]);const RA=["onEntering"],LA=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],DA={vertical:"top",horizontal:"right"},FA={vertical:"top",horizontal:"left"},NA=(0,Ln.Ay)(OA,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),zA=(0,Ln.Ay)(kA,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),jA=(0,Ln.Ay)(vA,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),UA=A.forwardRef((function(e,t){var n,r;const i=(0,f.A)({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:s,className:a,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:u,open:d,PaperProps:p={},PopoverClasses:g,transitionDuration:v="auto",TransitionProps:{onEntering:b}={},variant:y="selectedMenu",slots:x={},slotProps:w={}}=i,_=(0,C.A)(i.TransitionProps,RA),S=(0,C.A)(i,LA),E=R(),M=(0,h.A)({},i,{autoFocus:o,disableAutoFocusItem:l,MenuListProps:c,onEntering:b,PaperProps:p,transitionDuration:v,TransitionProps:_,variant:y}),P=(e=>{const{classes:t}=e;return(0,Rn.A)({root:["root"],paper:["paper"],list:["list"]},IA,t)})(M),T=o&&!l&&d,k=A.useRef(null);let B=-1;A.Children.map(s,((e,t)=>{A.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===B)&&(B=t))}));const O=null!=(n=x.paper)?n:zA,I=null!=(r=w.paper)?r:p,L=vo({elementType:x.root,externalSlotProps:w.root,ownerState:M,className:[P.root,a]}),D=vo({elementType:O,externalSlotProps:I,ownerState:M,className:P.paper});return(0,m.jsx)(NA,(0,h.A)({onClose:u,anchorOrigin:{vertical:"bottom",horizontal:E?"right":"left"},transformOrigin:E?DA:FA,slots:{paper:O,root:x.root},slotProps:{root:L,paper:D},open:d,ref:t,transitionDuration:v,TransitionProps:(0,h.A)({onEntering:(e,t)=>{k.current&&k.current.adjustStyleForScrollbar(e,{direction:E?"rtl":"ltr"}),b&&b(e,t)}},_),ownerState:M},S,{classes:g,children:(0,m.jsx)(jA,(0,h.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),u&&u(e,"tabKeyDown"))},actions:k,autoFocus:o&&(-1===B||l),autoFocusItem:T,variant:y},c,{className:(0,_n.A)(P.list,c.className),children:s}))}))})),GA=UA;function VA(e){return(0,Fn.Ay)("MuiNativeSelect",e)}const HA=(0,Tn.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),WA=["className","disabled","error","IconComponent","inputRef","variant"],QA=e=>{let{ownerState:t,theme:n}=e;return(0,h.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,h.A)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(HA.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},JA=(0,Ln.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Li.A,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(HA.multiple)]:t.multiple}]}})(QA),KA=e=>{let{ownerState:t,theme:n}=e;return(0,h.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(HA.disabled)]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},XA=(0,Ln.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,Dn.A)(n.variant))],n.open&&t.iconOpen]}})(KA),YA=A.forwardRef((function(e,t){const{className:n,disabled:r,error:i,IconComponent:o,inputRef:s,variant:a="standard"}=e,l=(0,C.A)(e,WA),c=(0,h.A)({},e,{disabled:r,variant:a,error:i}),u=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat((0,Dn.A)(n)),o&&"iconOpen",r&&"disabled"]};return(0,Rn.A)(a,VA,t)})(c);return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(JA,(0,h.A)({ownerState:c,className:(0,_n.A)(u.select,n),disabled:r,ref:s||t},l)),e.multiple?null:(0,m.jsx)(XA,{as:o,ownerState:c,className:u.icon})]})})),qA=YA;function ZA(e){return(0,Fn.Ay)("MuiSelect",e)}const $A=(0,Tn.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var eh;const th=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],nh=(0,Ln.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat($A.select)]:t.select},{["&.".concat($A.select)]:t[n.variant]},{["&.".concat($A.error)]:t.error},{["&.".concat($A.multiple)]:t.multiple}]}})(QA,{["&.".concat($A.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),rh=(0,Ln.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,Dn.A)(n.variant))],n.open&&t.iconOpen]}})(KA),ih=(0,Ln.Ay)("input",{shouldForwardProp:e=>(0,jo.A)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function oh(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function sh(e){return null==e||"string"===typeof e&&!e.trim()}const ah=A.forwardRef((function(e,t){var n;const{"aria-describedby":r,"aria-label":i,autoFocus:o,autoWidth:s,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:d,displayEmpty:f,error:p=!1,IconComponent:g,inputRef:v,labelId:b,MenuProps:y={},multiple:x,name:w,onBlur:_,onChange:S,onClose:E,onFocus:M,onOpen:P,open:T,readOnly:k,renderValue:B,SelectDisplayProps:O={},tabIndex:I,value:R,variant:L="standard"}=e,D=(0,C.A)(e,th),[F,N]=(0,Ks.A)({controlled:R,default:u,name:"Select"}),[z,j]=(0,Ks.A)({controlled:T,default:c,name:"Select"}),U=A.useRef(null),G=A.useRef(null),[V,H]=A.useState(null),{current:W}=A.useRef(null!=T),[Q,J]=A.useState(),K=(0,Lr.A)(t,v),X=A.useCallback((e=>{G.current=e,e&&H(e)}),[]),Y=null==V?void 0:V.parentNode;A.useImperativeHandle(K,(()=>({focus:()=>{G.current.focus()},node:U.current,value:F})),[F]),A.useEffect((()=>{c&&z&&V&&!W&&(J(s?null:Y.clientWidth),G.current.focus())}),[V,s]),A.useEffect((()=>{o&&G.current.focus()}),[o]),A.useEffect((()=>{if(!b)return;const e=(0,uA.A)(G.current).getElementById(b);if(e){const t=()=>{getSelection().isCollapsed&&G.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[b]);const q=(e,t)=>{e?P&&P(t):E&&E(t),W||(J(s?null:Y.clientWidth),j(e))},Z=A.Children.toArray(a),$=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(x){n=Array.isArray(F)?F.slice():[];const t=F.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),F!==n&&(N(n),S)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),S(i,e)}x||q(!1,t)}},ee=null!==V&&z;let te,ne;delete D["aria-invalid"];const re=[];let ie=!1,oe=!1;(id({value:F})||f)&&(B?te=B(F):ie=!0);const se=Z.map((e=>{if(!A.isValidElement(e))return null;let t;if(x){if(!Array.isArray(F))throw new Error((0,qu.A)(2));t=F.some((t=>oh(t,e.props.value))),t&&ie&&re.push(e.props.children)}else t=oh(F,e.props.value),t&&ie&&(ne=e.props.children);return t&&(oe=!0),A.cloneElement(e,{"aria-selected":t?"true":"false",onClick:$(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));ie&&(te=x?0===re.length?null:re.reduce(((e,t,n)=>(e.push(t),n<re.length-1&&e.push(", "),e)),[]):ne);let ae,le=Q;!s&&W&&V&&(le=Y.clientWidth),ae="undefined"!==typeof I?I:d?null:0;const ce=O.id||(w?"mui-component-select-".concat(w):void 0),ue=(0,h.A)({},e,{variant:L,value:F,open:ee,error:p}),de=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat((0,Dn.A)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,Rn.A)(a,ZA,t)})(ue),Ae=(0,h.A)({},y.PaperProps,null==(n=y.slotProps)?void 0:n.paper),he=(0,$c.A)();return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(nh,(0,h.A)({ref:X,tabIndex:ae,role:"combobox","aria-controls":he,"aria-disabled":d?"true":void 0,"aria-expanded":ee?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[b,ce].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:e=>{if(!k){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),q(!0,e))}},onMouseDown:d||k?null:e=>{0===e.button&&(e.preventDefault(),G.current.focus(),q(!0,e))},onBlur:e=>{!ee&&_&&(Object.defineProperty(e,"target",{writable:!0,value:{value:F,name:w}}),_(e))},onFocus:M},O,{ownerState:ue,className:(0,_n.A)(O.className,de.select,l),id:ce,children:sh(te)?eh||(eh=(0,m.jsx)("span",{className:"notranslate",children:"\u200b"})):te})),(0,m.jsx)(ih,(0,h.A)({"aria-invalid":p,value:Array.isArray(F)?F.join(","):F,name:w,ref:U,"aria-hidden":!0,onChange:e=>{const t=Z.find((t=>t.props.value===e.target.value));void 0!==t&&(N(t.props.value),S&&S(e,t))},tabIndex:-1,disabled:d,className:de.nativeInput,autoFocus:o,ownerState:ue},D)),(0,m.jsx)(rh,{as:g,className:de.icon,ownerState:ue}),(0,m.jsx)(GA,(0,h.A)({id:"menu-".concat(w||""),anchorEl:Y,open:ee,onClose:e=>{q(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,h.A)({"aria-labelledby":b,role:"listbox","aria-multiselectable":x?"true":void 0,disableListWrap:!0,id:he},y.MenuListProps),slotProps:(0,h.A)({},y.slotProps,{paper:(0,h.A)({},Ae,{style:(0,h.A)({minWidth:le},null!=Ae?Ae.style:null)})}),children:se}))]})})),lh=ah,ch=(0,ea.A)((0,m.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),uh=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],dh=["root"],Ah={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,Li.A)(e)&&"variant"!==e,slot:"Root"},hh=(0,Ln.Ay)(xd,Ah)(""),fh=(0,Ln.Ay)(jd,Ah)(""),ph=(0,Ln.Ay)(Pd,Ah)(""),gh=A.forwardRef((function(e,t){const n=(0,f.A)({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:i,classes:o={},className:s,defaultOpen:a=!1,displayEmpty:l=!1,IconComponent:c=ch,id:u,input:d,inputProps:p,label:g,labelId:v,MenuProps:b,multiple:y=!1,native:x=!1,onClose:w,onOpen:_,open:S,renderValue:E,SelectDisplayProps:M,variant:P="outlined"}=n,T=(0,C.A)(n,uh),k=x?qA:lh,B=Gs({props:n,muiFormControl:gs(),states:["variant","error"]}),O=B.variant||P,I=(0,h.A)({},n,{variant:O,classes:o}),R=(e=>{const{classes:t}=e;return t})(I),L=(0,C.A)(R,dh),D=d||{standard:(0,m.jsx)(hh,{ownerState:I}),outlined:(0,m.jsx)(fh,{label:g,ownerState:I}),filled:(0,m.jsx)(ph,{ownerState:I})}[O],F=(0,Lr.A)(t,D.ref);return(0,m.jsx)(A.Fragment,{children:A.cloneElement(D,(0,h.A)({inputComponent:k,inputProps:(0,h.A)({children:i,error:B.error,IconComponent:c,variant:O,type:void 0,multiple:y},x?{id:u}:{autoWidth:r,defaultOpen:a,displayEmpty:l,labelId:v,MenuProps:b,onClose:w,onOpen:_,open:S,renderValue:E,SelectDisplayProps:(0,h.A)({id:u},M)},p,{classes:p?(0,ms.A)(L,p.classes):L},d?d.props.inputProps:{})},(y&&x||l)&&"outlined"===O?{notched:!0}:{},{ref:F,className:(0,_n.A)(D.props.className,s,R.root)},!d&&{variant:O},T))})}));gh.muiName="Select";const mh=gh;function vh(e){return(0,Fn.Ay)("MuiTextField",e)}(0,Tn.A)("MuiTextField",["root"]);const bh=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],yh={standard:xd,filled:Pd,outlined:jd},xh=(0,Ln.Ay)(nA,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),wh=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:A=!1,helperText:p,id:g,InputLabelProps:v,inputProps:b,InputProps:y,inputRef:x,label:w,maxRows:_,minRows:S,multiline:E=!1,name:M,onBlur:P,onChange:T,onFocus:k,placeholder:B,required:O=!1,rows:I,select:R=!1,SelectProps:L,type:D,value:F,variant:N="outlined"}=n,z=(0,C.A)(n,bh),j=(0,h.A)({},n,{autoFocus:i,color:a,disabled:c,error:u,fullWidth:A,multiline:E,required:O,select:R,variant:N}),U=(e=>{const{classes:t}=e;return(0,Rn.A)({root:["root"]},vh,t)})(j);const G={};"outlined"===N&&(v&&"undefined"!==typeof v.shrink&&(G.notched=v.shrink),G.label=w),R&&(L&&L.native||(G.id=void 0),G["aria-describedby"]=void 0);const V=(0,$c.A)(g),H=p&&V?"".concat(V,"-helper-text"):void 0,W=w&&V?"".concat(V,"-label"):void 0,Q=yh[N],J=(0,m.jsx)(Q,(0,h.A)({"aria-describedby":H,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:A,multiline:E,name:M,rows:I,maxRows:_,minRows:S,type:D,value:F,id:V,inputRef:x,onBlur:P,onChange:T,onFocus:k,placeholder:B,inputProps:b},G,y));return(0,m.jsxs)(xh,(0,h.A)({className:(0,_n.A)(U.root,s),disabled:c,error:u,fullWidth:A,ref:t,required:O,color:a,variant:N,ownerState:j},z,{children:[null!=w&&""!==w&&(0,m.jsx)(qd,(0,h.A)({htmlFor:V,id:W},v,{children:w})),R?(0,m.jsx)(mh,(0,h.A)({"aria-describedby":H,id:V,labelId:W,value:F,input:J},L,{children:o})):J,p&&(0,m.jsx)(cA,(0,h.A)({id:H},d,{children:p}))]}))})),_h=wh;function Sh(e){return(0,Fn.Ay)("MuiDialogActions",e)}(0,Tn.A)("MuiDialogActions",["root","spacing"]);const Ch=["className","disableSpacing"],Eh=(0,Ln.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,h.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),Mh=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,C.A)(n,Ch),s=(0,h.A)({},n,{disableSpacing:i}),a=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,Rn.A)(r,Sh,t)})(s);return(0,m.jsx)(Eh,(0,h.A)({className:(0,_n.A)(a.root,r),ownerState:s,ref:t},o))}));var Ph=n(6577),Th=n(3471),kh=n(4681);function Bh(){const[e,t]=(0,A.useState)([]),[n,r]=(0,A.useState)([]),[i,o]=(0,A.useState)(),[s,a]=(0,A.useState)(!1),[l,c]=(0,A.useState)(!1),[u,d]=(0,A.useState)(!1),[h,f]=(0,A.useState)({name:"",description:""}),p=te((e=>e.cityIOdataState.cityIOdata)),{sendJsonMessage:g}=(0,wn.Ay)(vn.cityIO.websocketURL,{share:!0,shouldReconnect:()=>!0}),v=()=>{c(!1),a(!1),d(!1)},b=()=>{const e=p.scenarios.filter((e=>!e.isInBin)).map(((e,t)=>(0,m.jsxs)(Ii,{children:[(0,m.jsx)(Fc,{sx:{width:"100%"},arrow:!0,placement:"right",title:e.description||"No description",children:(0,m.jsx)(Qi,{fullWidth:!0,sx:{width:"100%"},size:"small",variant:"outlined",onClick:()=>(e=>{o(e),c(!0)})(e),children:(0,m.jsxs)(ss,{children:[(0,m.jsx)(Ii,{children:(0,m.jsx)(Hn,{children:e.name.substring(0,15)+"..."})}),(0,m.jsx)(Ii,{children:(0,m.jsx)(Hn,{variant:"caption",children:e.description.substring(0,20)+"..."})})]})},"scenario_button_"+t)},"scenario_tt_"+t),(0,m.jsx)(Vc,{onClick:t=>{(e=>{const t=[...p.scenarios];var n=t.filter((t=>t.hash===e.hash)),r=t.indexOf(n[0]);if(-1!==r){let e=t[r];g({type:"MODIFY_SCENARIO",content:{name:e.name,isInBin:!0}})}v()})(e)},"aria-label":"delete",size:"medium",children:(0,m.jsx)(Th.A,{color:"primary",fontSize:"inherit"},"scenario_delicon_"+t)},"scenario_ib_"+t)]},"scenario_grid_item_".concat(t))));return e},y=()=>{const e=p.scenarios.filter((e=>e.isInBin)).map(((e,t)=>(0,m.jsxs)(Ii,{children:[(0,m.jsx)(Fc,{sx:{width:"100%"},arrow:!0,placement:"right",title:e.description||"No description",children:(0,m.jsx)(Qi,{fullWidth:!0,sx:{width:"100%"},size:"small",variant:"outlined",children:(0,m.jsxs)(ss,{children:[(0,m.jsx)(Ii,{children:(0,m.jsx)(Hn,{children:e.name.substring(0,15)+"..."})}),(0,m.jsx)(Ii,{children:(0,m.jsx)(Hn,{variant:"caption",children:e.description.substring(0,20)+"..."})})]})},"scenario_button_"+t)},"scenario_tt_"+t),(0,m.jsx)(Vc,{onClick:t=>{(e=>{const t=[...p.scenarios];var n=t.filter((t=>t.hash===e.hash)),r=t.indexOf(n[0]);if(-1!==r){let e=t[r];g({type:"MODIFY_SCENARIO",content:{name:e.name,isInBin:!1}})}v()})(e)},"aria-label":"delete",size:"large",children:(0,m.jsx)(kh.A,{color:"primary",fontSize:"inherit"},"scenario_resticon_"+t)},"scenario_ib_"+t)]},"scenario_grid_item_".concat(t))));return e};return(0,A.useEffect)((()=>{if(!p.scenarios)return;const e=b();t(e);const n=y();r(n)}),[p]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Zc,{sx:{width:"100%"},badgeContent:p.scenarios&&p.scenarios.length||0,color:"primary",children:[(0,m.jsx)(Qi,{fullWidth:!0,variant:"outlined",onClick:()=>a(!0),children:(0,m.jsx)(Hn,{children:"Save This Scenario"})},"save_state_button"),(0,m.jsx)(Qi,{onClick:()=>d(!0),children:(0,m.jsx)(Ph.A,{})})]}),(0,m.jsx)(ss,{children:e}),(0,m.jsxs)(Fu,{open:s,onClose:v,children:[(0,m.jsx)(Gu,{id:"save-dialog-title",children:"Save this Scenario"}),(0,m.jsxs)(Qu,{children:[(0,m.jsx)(Yu,{id:"alert-dialog-description",children:"Give your scenario a name and a description to help you remember what it is about."}),(0,m.jsxs)(ss,{children:[(0,m.jsx)(Ii,{children:(0,m.jsx)(_h,{id:"name-basic",label:"Scenario Name",variant:"outlined",fullWidth:!0,onChange:e=>f({...h,name:e.target.value})})}),(0,m.jsx)(Ii,{children:(0,m.jsx)(_h,{id:"desc-basic",label:"Description (optional)",fullWidth:!0,variant:"outlined",onChange:e=>f({...h,description:e.target.value})})})]})]}),(0,m.jsxs)(Mh,{children:[(0,m.jsx)(Qi,{onClick:v,children:"Cancel"}),(0,m.jsx)(Qi,{onClick:()=>{v();const e={name:h.name||"noname",description:h.description||"no description yet."};g({type:"SAVE_SCENARIO",content:e})},autoFocus:!0,children:"Save"})]})]}),(0,m.jsxs)(Fu,{open:l,onClose:v,children:[(0,m.jsx)(Gu,{id:"alert-dialog-title",children:"Revert to saved scenario?"}),(0,m.jsx)(Qu,{children:(0,m.jsx)(Yu,{id:"alert-dialog-description",children:"You can revert to this saved scenario by clicking the button below. Reverting will delete all changes made since the last commit."})}),(0,m.jsxs)(Mh,{children:[(0,m.jsx)(Qi,{onClick:v,children:"Cancel"}),(0,m.jsx)(Qi,{onClick:async()=>{i&&(g({type:"RESTORE_SCENARIO",content:{name:i.name}}),v())},autoFocus:!0,children:"Revert"})]})]}),(0,m.jsxs)(Fu,{open:u,onClose:v,children:[(0,m.jsx)(Gu,{id:"alert-dialog-title",children:"Bin"}),(0,m.jsx)(Yu,{id:"alert-dialog-description",sx:{padding:2},children:"The scenarios in the bin will be permanently deleted after 15 days."}),(0,m.jsx)(Qu,{children:(0,m.jsx)(ss,{children:n})}),(0,m.jsx)(Mh,{children:(0,m.jsx)(Qi,{onClick:v,children:"Cancel"})})]})]})}const Oh=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Ih(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=(0,yA.A)(t);let s;if(t.fakeTransform)s=t.fakeTransform;else{const e=o.getComputedStyle(t);s=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let a=0,l=0;if(s&&"none"!==s&&"string"===typeof s){const e=s.split("(")[1].split(")")[0].split(",");a=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?"translateX(".concat(i?i.right+a-r.left:o.innerWidth+a-r.left,"px)"):"right"===e?"translateX(-".concat(i?r.right-i.left-a:r.left+r.width-a,"px)"):"up"===e?"translateY(".concat(i?i.bottom+l-r.top:o.innerHeight+l-r.top,"px)"):"translateY(-".concat(i?r.top-i.top+r.height-l:r.top+r.height-l,"px)")}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const Rh=A.forwardRef((function(e,t){const n=xr(),r={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,container:l,direction:c="down",easing:u=r,in:d,onEnter:f,onEntered:p,onEntering:g,onExit:v,onExited:b,onExiting:y,style:x,timeout:w=i,TransitionComponent:_=ka}=e,S=(0,C.A)(e,Oh),E=A.useRef(null),M=(0,Lr.A)(a.ref,E,t),P=e=>t=>{e&&(void 0===t?e(E.current):e(E.current,t))},T=P(((e,t)=>{Ih(c,e,l),Ba(e),f&&f(e,t)})),k=P(((e,t)=>{const r=Oa({timeout:w,style:x,easing:u},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",(0,h.A)({},r)),e.style.transition=n.transitions.create("transform",(0,h.A)({},r)),e.style.webkitTransform="none",e.style.transform="none",g&&g(e,t)})),B=P(p),O=P(y),I=P((e=>{const t=Oa({timeout:w,style:x,easing:u},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),Ih(c,e,l),v&&v(e)})),R=P((e=>{e.style.webkitTransition="",e.style.transition="",b&&b(e)})),L=A.useCallback((()=>{E.current&&Ih(c,E.current,l)}),[c,l]);return A.useEffect((()=>{if(d||"down"===c||"right"===c)return;const e=(0,bA.A)((()=>{E.current&&Ih(c,E.current,l)})),t=(0,yA.A)(E.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[c,d,l]),A.useEffect((()=>{d||L()}),[d,L]),(0,m.jsx)(_,(0,h.A)({nodeRef:E,onEnter:T,onEntered:B,onEntering:k,onExit:I,onExited:R,onExiting:O,addEndListener:e=>{o&&o(E.current,e)},appear:s,in:d,timeout:w},S,{children:(e,t)=>A.cloneElement(a,(0,h.A)({ref:M,style:(0,h.A)({visibility:"exited"!==e||d?void 0:"hidden"},x,a.props.style)},t))}))})),Lh=Rh;function Dh(e){return(0,Fn.Ay)("MuiDrawer",e)}(0,Tn.A)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Fh=["BackdropProps"],Nh=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],zh=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},jh=(0,Ln.Ay)(Mu,{name:"MuiDrawer",slot:"Root",overridesResolver:zh})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}})),Uh=(0,Ln.Ay)("div",{shouldForwardProp:Li.A,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:zh})({flex:"0 0 auto"}),Gh=(0,Ln.Ay)(qi,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["paperAnchor".concat((0,Dn.A)(n.anchor))],"temporary"!==n.variant&&t["paperAnchorDocked".concat((0,Dn.A)(n.anchor))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((t.vars||t).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((t.vars||t).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((t.vars||t).palette.divider)})})),Vh={left:"right",right:"left",top:"down",bottom:"up"};const Hh=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiDrawer"}),r=xr(),i=R(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:a,children:l,className:c,elevation:u=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:p}={},onClose:g,open:v=!1,PaperProps:b={},SlideProps:y,TransitionComponent:x=Lh,transitionDuration:w=o,variant:_="temporary"}=n,S=(0,C.A)(n.ModalProps,Fh),E=(0,C.A)(n,Nh),M=A.useRef(!1);A.useEffect((()=>{M.current=!0}),[]);const P=function(e,t){let{direction:n}=e;return"rtl"===n&&function(e){return-1!==["left","right"].indexOf(e)}(t)?Vh[t]:t}({direction:i?"rtl":"ltr"},s),T=s,k=(0,h.A)({},n,{anchor:T,elevation:u,open:v,variant:_},E),B=(e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,Dn.A)(n)),"temporary"!==r&&"paperAnchorDocked".concat((0,Dn.A)(n))]};return(0,Rn.A)(i,Dh,t)})(k),O=(0,m.jsx)(Gh,(0,h.A)({elevation:"temporary"===_?u:0,square:!0},b,{className:(0,_n.A)(B.paper,b.className),ownerState:k,children:l}));if("permanent"===_)return(0,m.jsx)(Uh,(0,h.A)({className:(0,_n.A)(B.root,B.docked,c),ownerState:k,ref:t},E,{children:O}));const I=(0,m.jsx)(x,(0,h.A)({in:v,direction:Vh[P],timeout:w,appear:M.current},y,{children:O}));return"persistent"===_?(0,m.jsx)(Uh,(0,h.A)({className:(0,_n.A)(B.root,B.docked,c),ownerState:k,ref:t},E,{children:I})):(0,m.jsx)(jh,(0,h.A)({BackdropProps:(0,h.A)({},a,p,{transitionDuration:w}),className:(0,_n.A)(B.root,B.modal,c),open:v,ownerState:k,onClose:g,hideBackdrop:d,ref:t},E,S,{children:I}))})),Wh=Hh,Qh=20,Jh=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)-10,Kh=5;function Xh(e){let{children:t,direction:n,width:r}=e;const[i,o]=(0,A.useState)(r||Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)/2),s=e=>{document.addEventListener("mouseup",a,!0),document.addEventListener("mousemove",l,!0),e.preventDefault()},a=e=>{document.removeEventListener("mouseup",a,!0),document.removeEventListener("mousemove",l,!0),e.preventDefault()},l=(0,A.useCallback)((e=>{let t=null;"right"===n?t=document.body.offsetLeft+document.body.offsetWidth-e.clientX+20:"left"===n||void 0===n?t=document.body.offsetLeft+e.clientX+20:"bottom"===n&&(t=document.documentElement.scrollHeight-e.clientY),t>Kh&&t<Jh&&o(t),t>document.documentElement.scrollHeight-Qh&&o(document.documentElement.scrollHeight-Qh-10)}),[]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(In,{onMouseDown:e=>s(e),sx:{padding:Qh+"px 0 0",position:"fixed",width:()=>"right"===n||"left"===n||void 0===n?"".concat(Qh,"px"):"bottom"===n?"100vw":void 0,height:"bottom"===n?"".concat(Qh,"px"):"100vh",left:"left"===n?i+"px":void 0,right:"right"===n?i+"px":void 0,bottom:"bottom"===n?i+"px":void 0,zIndex:"bottom"===n?9999:100,cursor:"move",backgroundColor:"rgba(0,0,0,0.8)"}}),("right"===n||"left"===n||void 0===n)&&(0,m.jsx)(In,{onMouseDown:e=>s(e),onTouchStart:e=>s(e),onClick:e=>o(i<30?Jh/2:15),sx:{position:"fixed",top:"45%",width:Qh+5,height:"10vh",left:"left"===n?i+"px":void 0,right:"right"===n?i+"px":void 0,zIndex:1e3,borderRadius:"30px",cursor:"move"},children:(0,m.jsx)(In,{sx:{transform:"rotate(90deg)",position:"absolute",top:"40%",left:"40%"},children:"..."})}),(0,m.jsx)(Wh,{anchor:n,open:!0,variant:"persistent",ModalProps:{keepMounted:!0},PaperProps:"bottom"===n?{style:{height:i,zIndex:9999}}:{style:{width:i,zIndex:100}},children:(0,m.jsx)(qi,{children:t})})]})}var Yh=n(5540),qh=n(2954);function Zh(){const e=ue(),[t,n]=(0,A.useState)({EDIT_BUTTON:!1});return(0,A.useEffect)((()=>{e(us(t))}),[t]),(0,m.jsx)(Qi,{fullWidth:!0,id:"EDIT_BUTTON",variant:"outlined",endIcon:t.EDIT_BUTTON?(0,m.jsx)(qh.A,{}):(0,m.jsx)(Yh.A,{}),onClick:e=>{return r=e,void n({...t,[r.currentTarget.id]:!t[r.currentTarget.id]});var r},children:(0,m.jsx)(Hn,{children:t.EDIT_BUTTON?"submit edits":"start editing"})})}const $h=function(){const e=te((e=>e.cityIOdataState.cityIOtableName));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Hn,{gutterBottom:!0,children:"CityScope"}),(0,m.jsx)(Hn,{variant:"h3",children:e})]})},ef=(0,ea.A)((0,m.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),tf=(0,ea.A)((0,m.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),nf=(0,Ln.Ay)("span",{shouldForwardProp:Li.A})({position:"relative",display:"flex"}),rf=(0,Ln.Ay)(ef)({transform:"scale(1)"}),of=(0,Ln.Ay)(tf)((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},n.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));const sf=function(e){const{checked:t=!1,classes:n={},fontSize:r}=e,i=(0,h.A)({},e,{checked:t});return(0,m.jsxs)(nf,{className:n.root,ownerState:i,children:[(0,m.jsx)(rf,{fontSize:r,className:n.background,ownerState:i}),(0,m.jsx)(of,{fontSize:r,className:n.dot,ownerState:i})]})};var af=n(6593);const lf=A.createContext(void 0);function cf(e){return(0,Fn.Ay)("MuiRadio",e)}const uf=(0,Tn.A)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),df=["checked","checkedIcon","color","icon","name","onChange","size","className"],Af=(0,Ln.Ay)($s,{shouldForwardProp:e=>(0,Li.A)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"medium"!==n.size&&t["size".concat((0,Dn.A)(n.size))],t["color".concat((0,Dn.A)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(uf.checked)]:{color:(t.vars||t).palette[n.color].main}},{["&.".concat(uf.disabled)]:{color:(t.vars||t).palette.action.disabled}})}));const hf=(0,m.jsx)(sf,{checked:!0}),ff=(0,m.jsx)(sf,{}),pf=A.forwardRef((function(e,t){var n,r;const i=(0,f.A)({props:e,name:"MuiRadio"}),{checked:o,checkedIcon:s=hf,color:a="primary",icon:l=ff,name:c,onChange:u,size:d="medium",className:p}=i,g=(0,C.A)(i,df),v=(0,h.A)({},i,{color:a,size:d}),b=(e=>{const{classes:t,color:n,size:r}=e,i={root:["root","color".concat((0,Dn.A)(n)),"medium"!==r&&"size".concat((0,Dn.A)(r))]};return(0,h.A)({},t,(0,Rn.A)(i,cf,t))})(v),y=A.useContext(lf);let x=o;const w=(0,af.A)(u,y&&y.onChange);let _=c;return y&&("undefined"===typeof x&&(x=function(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}(y.value,i.value)),"undefined"===typeof _&&(_=y.name)),(0,m.jsx)(Af,(0,h.A)({type:"radio",icon:A.cloneElement(l,{fontSize:null!=(n=ff.props.fontSize)?n:d}),checkedIcon:A.cloneElement(s,{fontSize:null!=(r=hf.props.fontSize)?r:d}),ownerState:v,classes:b,name:_,checked:x,onChange:w,ref:t,className:(0,_n.A)(b.root,p)},g))})),gf=pf;function mf(e){return(0,Fn.Ay)("MuiFormGroup",e)}(0,Tn.A)("MuiFormGroup",["root","row","error"]);const vf=["className","row"],bf=(0,Ln.Ay)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})((e=>{let{ownerState:t}=e;return(0,h.A)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})})),yf=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiFormGroup"}),{className:r,row:i=!1}=n,o=(0,C.A)(n,vf),s=Gs({props:n,muiFormControl:gs(),states:["error"]}),a=(0,h.A)({},n,{row:i,error:s.error}),l=(e=>{const{classes:t,row:n,error:r}=e,i={root:["root",n&&"row",r&&"error"]};return(0,Rn.A)(i,mf,t)})(a);return(0,m.jsx)(bf,(0,h.A)({className:(0,_n.A)(l.root,r),ownerState:a,ref:t},o))})),xf=yf;function wf(e){return(0,Fn.Ay)("MuiRadioGroup",e)}(0,Tn.A)("MuiRadioGroup",["root","row","error"]);const _f=["actions","children","className","defaultValue","name","onChange","value"],Sf=A.forwardRef((function(e,t){const{actions:n,children:r,className:i,defaultValue:o,name:s,onChange:a,value:l}=e,c=(0,C.A)(e,_f),u=A.useRef(null),d=(e=>{const{classes:t,row:n,error:r}=e,i={root:["root",n&&"row",r&&"error"]};return(0,Rn.A)(i,wf,t)})(e),[f,p]=(0,Ks.A)({controlled:l,default:o,name:"RadioGroup"});A.useImperativeHandle(n,(()=>({focus:()=>{let e=u.current.querySelector("input:not(:disabled):checked");e||(e=u.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const g=(0,Lr.A)(t,u),v=(0,Cc.A)(s),b=A.useMemo((()=>({name:v,onChange(e){p(e.target.value),a&&a(e,e.target.value)},value:f})),[v,a,p,f]);return(0,m.jsx)(lf.Provider,{value:b,children:(0,m.jsx)(xf,(0,h.A)({role:"radiogroup",ref:g,className:(0,_n.A)(d.root,i)},c,{children:r}))})})),Cf=Sf;var Ef=n(4318);function Mf(e){return(0,Fn.Ay)("MuiCollapse",e)}(0,Tn.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Pf=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Tf=(0,Ln.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,h.A)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),kf=(0,Ln.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((e=>{let{ownerState:t}=e;return(0,h.A)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),Bf=(0,Ln.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((e=>{let{ownerState:t}=e;return(0,h.A)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),Of=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiCollapse"}),{addEndListener:r,children:i,className:o,collapsedSize:s="0px",component:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:p,onExit:g,onExited:v,onExiting:b,orientation:y="vertical",style:x,timeout:w=Ef.p0.standard,TransitionComponent:_=ka}=n,S=(0,C.A)(n,Pf),E=(0,h.A)({},n,{orientation:y,collapsedSize:s}),M=(e=>{const{orientation:t,classes:n}=e,r={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,Rn.A)(r,Mf,n)})(E),P=xr(),T=(0,Jr.A)(),k=A.useRef(null),B=A.useRef(),O="number"===typeof s?"".concat(s,"px"):s,I="horizontal"===y,R=I?"width":"height",L=A.useRef(null),D=(0,Lr.A)(t,L),F=e=>t=>{if(e){const n=L.current;void 0===t?e(n):e(n,t)}},N=()=>k.current?k.current[I?"clientWidth":"clientHeight"]:0,z=F(((e,t)=>{k.current&&I&&(k.current.style.position="absolute"),e.style[R]=O,u&&u(e,t)})),j=F(((e,t)=>{const n=N();k.current&&I&&(k.current.style.position="");const{duration:r,easing:i}=Oa({style:x,timeout:w,easing:l},{mode:"enter"});if("auto"===w){const t=P.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(t,"ms"),B.current=t}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style[R]="".concat(n,"px"),e.style.transitionTimingFunction=i,p&&p(e,t)})),U=F(((e,t)=>{e.style[R]="auto",d&&d(e,t)})),G=F((e=>{e.style[R]="".concat(N(),"px"),g&&g(e)})),V=F(v),H=F((e=>{const t=N(),{duration:n,easing:r}=Oa({style:x,timeout:w,easing:l},{mode:"exit"});if("auto"===w){const n=P.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),B.current=n}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style[R]=O,e.style.transitionTimingFunction=r,b&&b(e)}));return(0,m.jsx)(_,(0,h.A)({in:c,onEnter:z,onEntered:U,onEntering:j,onExit:G,onExited:V,onExiting:H,addEndListener:e=>{"auto"===w&&T.start(B.current||0,e),r&&r(L.current,e)},nodeRef:L,timeout:"auto"===w?null:w},S,{children:(e,t)=>(0,m.jsx)(Tf,(0,h.A)({as:a,className:(0,_n.A)(M.root,o,{entered:M.entered,exited:!c&&"0px"===O&&M.hidden}[e]),style:(0,h.A)({[I?"minWidth":"minHeight"]:O},x),ref:D},t,{ownerState:(0,h.A)({},E,{state:e}),children:(0,m.jsx)(kf,{ownerState:(0,h.A)({},E,{state:e}),className:M.wrapper,ref:k,children:(0,m.jsx)(Bf,{ownerState:(0,h.A)({},E,{state:e}),className:M.wrapperInner,children:i})})}))}))}));Of.muiSupportAuto=!0;const If=Of,Rf=(0,ea.A)((0,m.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var Lf=n(7058);function Df(e){let{children:t,variant:n,title:r,subheader:i,collapse:o,toolTipInfo:s}=e;const[a,l]=(0,A.useState)(o);return(0,m.jsxs)("div",{children:[(0,m.jsx)(Ao,{sx:{mt:1}}),(0,m.jsx)(Ir,{container:!0,justifyContent:"center",children:(0,m.jsxs)(Qi,{fullWidth:!0,onClick:()=>l(!a),sx:{justifyContent:"flex-start"},children:[(0,m.jsxs)(Ir,{item:!0,container:!0,xs:10,direction:"row",children:[(0,m.jsx)(Rf,{}),(0,m.jsxs)("div",{style:{display:"block",textAlign:"left"},children:[(0,m.jsx)(Hn,{variant:"h6",style:{color:"white",fontWeight:"bold",fontSize:"10px"},children:r||""}),(0,m.jsx)(Hn,{style:{color:"gray",fontSize:"10px"},children:i||""})]})]}),(0,m.jsx)(Ir,{item:!0,container:!0,xs:2,alignItems:"end",direction:"column",children:s&&(0,m.jsx)(Fc,{placement:"top",title:(0,m.jsx)(Hn,{children:s}),children:(0,m.jsx)(Lf.A,{})})})]})}),(0,m.jsx)(qi,{children:(0,m.jsx)(If,{in:a,children:(0,m.jsx)(to,{variant:n||"outlined",sx:{width:"100%"},children:(0,m.jsx)(oo,{children:t})})})})]})}function Ff(){const e=te((e=>e.menuState)).layersMenuState,t=ue(),n=te((e=>e.cityIOdataState.cityIOdata)).access,[r,i]=(0,A.useState)(),o=(n,r)=>{i(n);const o={...e,ACCESS_LAYER_CHECKBOX:{...e.ACCESS_LAYER_CHECKBOX,selected:r}};t(ls(o))};(0,A.useEffect)((()=>{o(n.properties[0],0)}),[]);const s=()=>{const e=n.properties.map(((e,t)=>(0,m.jsx)(Js,{control:(0,m.jsx)(gf,{}),label:(0,m.jsx)(Hn,{variant:"caption",children:e}),onChange:()=>o(e,t),checked:r===e},t+"_access_checkboxFormControlLabel")));return(0,m.jsx)(nA,{children:(0,m.jsx)(Cf,{value:r,defaultValue:n.properties[0],children:e})})};return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(Df,{variant:"outlined",subheader:"Select Heatmap Sub-Layer",collapse:!0,children:(0,m.jsx)(s,{})})})}function Nf(){const e=te((e=>e.menuState)).layersMenuState,t=ue(),n=te((e=>e.cityIOdataState.cityIOdata)).ABM2,r=n.attr.mode,i=n.attr.profile,[o,s]=(0,A.useState)(null),a=(n,r,i)=>{s(r);const o={...e,ABM_LAYER_CHECKBOX:{...e.ABM_LAYER_CHECKBOX,selected:{[n]:i}}};t(ls(o))};(0,A.useEffect)((()=>{a("mode",r[1].name,1)}),[]);const l=(e,t)=>{let n=[];for(const r in t)n.push((0,m.jsx)(Js,{control:(0,m.jsx)(gf,{sx:{color:t[r].color}}),label:(0,m.jsx)(Hn,{variant:"caption",children:t[r].name}),onChange:()=>a(e,t[r].name,parseInt(r)),checked:o===t[r].name},r+"_access_checkboxFormControlLabel"));return(0,m.jsx)(nA,{children:(0,m.jsx)(Cf,{value:o,children:n})})};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(Df,{variant:"outlined",subheader:"Select ABM Sub-Layer",collapse:!0,children:[l("mode",r),l("profile",i)]})})}function zf(){const e=te((e=>e.menuState)).layersMenuState;return(0,m.jsxs)(m.Fragment,{children:[e.ACCESS_LAYER_CHECKBOX&&e.ACCESS_LAYER_CHECKBOX.isOn&&(0,m.jsx)(Ff,{}),(()=>{if(e.AGGREGATED_TRIPS_LAYER_CHECKBOX&&e.AGGREGATED_TRIPS_LAYER_CHECKBOX.isOn||e.ABM_LAYER_CHECKBOX&&e.ABM_LAYER_CHECKBOX.isOn)return(0,m.jsx)(Nf,{})})()]})}const jf=function(){const e=[{component:(0,m.jsx)($h,{}),collapse:!0},{component:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Zh,{}),(0,m.jsx)(fs,{})]}),collapse:!1,title:"Edit Mode",subheader:"Select Types & Edit"},{component:(0,m.jsx)(Bh,{}),collapse:!1,title:"Scenarios",subheader:"Save and Load Scenarios"},{component:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ha,{}),(0,m.jsx)(zf,{})]}),collapse:!0,title:"Layers",subheader:"Layers visibility"},{component:(0,m.jsx)(xa,{}),collapse:!1,title:"View Settings",subheader:"Toggle different visibility settings"}],t=()=>{const t=[];return e.forEach(((e,n)=>{t.push((0,m.jsx)(Ir,{item:!0,xs:12,md:12,lg:12,xl:12,children:(0,m.jsx)(Df,{variant:"outlined",title:e.title,subheader:e.subheader,collapse:e.collapse,children:e.component})},e.title+"_grid"))})),t};return(0,m.jsx)(Xh,{direction:"left",width:300,children:(0,m.jsx)(In,{p:1,children:(0,m.jsx)(Ir,{container:!0,children:(0,m.jsx)(t,{})})})})};function Uf(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}const Gf=e=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(e),Vf=(vn.cityIO.baseURL,e=>{var t,n,r,i,o,s,a,l;const c=null===e||void 0===e||null===(t=e.GEOGRID)||void 0===t||null===(n=t.features[(null===e||void 0===e||null===(i=e.GEOGRID)||void 0===i||null===(o=i.features)||void 0===o?void 0:o.length)-1])||void 0===n||null===(r=n.geometry)||void 0===r?void 0:r.coordinates[0][0],u=null===e||void 0===e||null===(s=e.GEOGRID)||void 0===s||null===(a=s.features[0])||void 0===a||null===(l=a.geometry)||void 0===l?void 0:l.coordinates[0][0];return[(u[0]+c[0])/2,(u[1]+c[1])/2]});function Hf(e,t,n){var r=e;if(t>0||n<1)if(e<t)r=0;else if(e>n)r=1;else{r=(e-t)/(n-t)}var i=function(e,t,n){var r,i,o;function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0===t)r=i=o=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=s(l,a,e+1/3),i=s(l,a,e),o=s(l,a,e-1/3)}return[Math.floor(255*r),Math.floor(255*i),Math.floor(255*o)]}(1.2*r/3.6,1,.5);return[i[0],i[1],i[2]]}var Wf=n(7948);const Qf=e=>{if(!e.mousePos||!e.hoveredCells)return null;const t=e.selectedType,n=e.hoveredCells.object.properties.interactive,r=e.mousePos,i=e.divSize;let o=t.color;Gf(o)&&(o=Uf(o));const s="rgb("+o[0]+","+o[1]+","+o[2]+")",a="rgba("+o[0]+","+o[1]+","+o[2]+",0.6)";let l=r.clientX-i/2,c=r.clientY-i/2;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(In,{sx:{border:n?"3px solid":"1px dashed",borderRadius:"5%",position:"fixed",backgroundColor:e.mouseDown&&n?a:"rgba(0,0,0,0)",padding:"1vw",color:s,borderColor:s,zIndex:10,pointerEvents:"none",width:i,height:i,left:l,top:c}}),(0,m.jsxs)(In,{sx:{borderRadius:"5%",position:"fixed",left:l+i+10,top:c-10,display:"flex",flexDirection:"column",m:1,p:1,pointerEvents:"none",zIndex:10,color:s,backgroundColor:"rgba(0,0,0,0.8)"},children:[(0,m.jsx)(Hn,{variant:"caption",children:n&&(0,m.jsx)("strong",{children:t.thisTypeName})}),!n&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Wf.A,{sx:{color:s}}),(0,m.jsx)(Hn,{variant:"caption",children:(0,m.jsx)("strong",{children:t.thisTypeName})}),(0,m.jsxs)(Hn,{variant:"caption",children:["Cell ",e.hoveredCells.object.properties.id," is not interactive"]})]})]})]})},Jf=e=>{if(!e.mousePos)return null;const t=e.mousePos,n=e.hoveredObj;let r=n.object.properties.color;Gf(r)&&(r=Uf(r));const i="rgb("+r[0]+","+r[1]+","+r[2]+")";return(0,m.jsxs)(In,{sx:{borderRadius:"5%",position:"fixed",padding:"0.25vw",zIndex:10,left:t.clientX+10,top:t.clientY+10,display:"flex",flexDirection:"column",pointerEvents:"none",backgroundColor:"rgba(0,0,0,0.8)",color:i,border:n.object.properties.interactive?"3px solid":"1px dashed",minWidth:"100px",minHeight:"50px"},children:[(0,m.jsx)(Hn,{children:n.object.properties.name}),(0,m.jsxs)(Hn,{variant:"caption",children:["height: ",n.object.properties.height]}),(0,m.jsxs)(Hn,{variant:"caption",children:["ID: ",n.object.properties.id]}),!n.object.properties.interactive&&(0,m.jsxs)("div",{style:{display:"flex",alignItems:"left"},children:[(0,m.jsx)(Wf.A,{sx:{color:i,fontSize:"1rem"}}),(0,m.jsx)(Hn,{variant:"caption",children:"Non-interactive"})]})]})};function Kf(e){let{editOn:t,mousePos:n,selectedType:r,pickingRadius:i,mouseDown:o,hoveredObj:s}=e;const a=()=>t&&r&&Object.keys(r).length&&s?(0,m.jsx)(Qf,{mousePos:n,selectedType:r,divSize:i,mouseDown:o,hoveredCells:s}):s?(0,m.jsx)(Jf,{mousePos:n,hoveredObj:s}):null;return(0,m.jsx)(a,{})}const Xf=e=>{if(!e.mousePos)return null;const t=e.mousePos,n=e.layerHoveredData;return(0,m.jsx)(In,{sx:{borderRadius:"5%",position:"fixed",backgroundColor:"primary.opacityDarkBackground",padding:"1vw",color:"primary.main",zIndex:10,left:t.clientX-100,top:t.clientY,display:"flex",flexDirection:"column",pointerEvents:"none"},children:(0,m.jsx)(Hn,{variant:"caption",children:n&&n})})};let Yf=1,qf=1;class Zf{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=e,o=Yf++,s={time:0,delay:t,duration:n,rate:r,repeat:i};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(e){this.channels.delete(e);for(const[t,n]of this.animations)n.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const n=this.animations.values();for(const r of n){const{animation:e,channel:t}=r;e.setTime(this.getTime(t))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const n=qf++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}const $f="Awaiting state",ep="Matched. State transferred from previous layer",tp="Initialized",np="Discarded. Awaiting garbage collection",rp="No longer matched. Awaiting garbage collection",ip="Finalized! Awaiting garbage collection",op=Symbol.for("component"),sp=Symbol.for("propTypes"),ap=Symbol.for("deprecatedProps"),lp=Symbol.for("asyncPropDefaults"),cp=Symbol.for("asyncPropOriginal"),up=Symbol.for("asyncPropResolved");function dp(e){if("undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof process&&"object"===typeof process.versions&&Boolean(process.versions.electron))return!0;const t="object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=e||t;return!!(n&&n.indexOf("Electron")>=0)}function Ap(){return!("object"===typeof process&&"[object process]"===String(process)&&!process.browser)||dp()}const hp="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source";Ap();class fp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";pt(this,"storage",void 0),pt(this,"id",void 0),pt(this,"config",void 0),this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(t){return null}}(n),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function pp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));const o=e.width*n,s=e.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}let gp;function mp(e){return"string"===typeof e?gp[e.toUpperCase()]||gp.WHITE:e}function vp(e,t){if(!e)throw new Error(t||"Assertion failed")}!function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(gp||(gp={}));const bp={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document,process:"object"===typeof process&&process},yp=bp.window||bp.self||bp.global,xp=bp.process||{};function wp(){let e;var t,n;if(Ap&&"performance"in yp)e=null===yp||void 0===yp||null===(t=yp.performance)||void 0===t||null===(n=t.now)||void 0===n?void 0:n.call(t);else if("hrtime"in xp){var r;const t=null===xp||void 0===xp||null===(r=xp.hrtime)||void 0===r?void 0:r.call(xp);e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const _p={debug:Ap&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Sp={enabled:!0,level:0};function Cp(){}const Ep={},Mp={once:!0};class Pp{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};pt(this,"id",void 0),pt(this,"VERSION",hp),pt(this,"_startTs",wp()),pt(this,"_deltaTs",wp()),pt(this,"_storage",void 0),pt(this,"userData",{}),pt(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new fp("__probe-".concat(this.id,"__"),Sp),this.timeStamp("".concat(this.id," started")),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n);for(const i of r)"function"===typeof e[i]&&(t.find((e=>i===e))||(e[i]=e[i].bind(e)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((wp()-this._startTs).toPrecision(10))}getDelta(){return Number((wp()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){vp(e,t)}warn(e){return this._getLogFunction(0,e,_p.warn,arguments,Mp)}error(e){return this._getLogFunction(0,e,_p.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,_p.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,_p.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(e,t,_p.debug||_p.info,arguments,Mp)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||Cp,n&&[n],{tag:Bp(t)}):Cp}image(e){let{logLevel:t,priority:n,image:r,message:i="",scale:o=1}=e;return this._shouldLog(t||n)?Ap?function(e){let{image:t,message:n="",scale:r=1}=e;if("string"===typeof t){const e=new Image;return e.onload=()=>{const t=pp(e,n,r);console.log(...t)},e.src=t,Cp}const i=t.nodeName||"";if("img"===i.toLowerCase())return console.log(...pp(t,n,r)),Cp;if("canvas"===i.toLowerCase()){const e=new Image;return e.onload=()=>console.log(...pp(e,n,r)),e.src=t.toDataURL(),Cp}return Cp}({image:r,message:i,scale:o}):function(e){let{image:t,message:n="",scale:r=1}=e;return console.warn("removed"),Cp}({image:r,message:i,scale:o}):Cp}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||Cp)}group(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=kp({logLevel:e,message:t,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Cp)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Tp(e)}_getLogFunction(e,t,n,r,i){if(this._shouldLog(e)){i=kp({logLevel:e,message:t,args:r,opts:i}),vp(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=wp();const o=i.tag||i.message;if(i.once){if(Ep[o])return Cp;Ep[o]=wp()}return t=function(e,t,n){if("string"===typeof t){const r=n.time?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(n.total)):"";t=function(e,t,n){return Ap||"string"!==typeof e||(t&&(t=mp(t),e="\x1b[".concat(t,"m").concat(e,"\x1b[39m")),n&&(t=mp(n),e="\x1b[".concat(n+10,"m").concat(e,"\x1b[49m"))),e}(t=n.time?"".concat(e,": ").concat(r,"  ").concat(t):"".concat(e,": ").concat(t),n.color,n.background)}return t}(this.id,i.message,i),n.bind(console,t,...i.args)}return Cp}}function Tp(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return vp(Number.isFinite(t)&&t>=0),t}function kp(e){const{logLevel:t,message:n}=e;e.logLevel=Tp(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"===typeof e.message&&(e.message=e.message());const i=typeof e.message;return vp("string"===i||"object"===i),Object.assign(e,{args:r},e.opts)}function Bp(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}pt(Pp,"VERSION",hp);const Op=new Pp({id:"deck"});let Ip={};function Rp(e){Ip=e}function Lp(e,t,n,r){Op.level>0&&Ip[e]&&Ip[e].call(null,t,n,r)}function Dp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(e)?Fp(e,t,[]):t(e)?[e]:[]}function Fp(e,t,n){let r=-1;for(;++r<e.length;){const i=e[r];Array.isArray(i)?Fp(i,t,n):t(i)&&n.push(i)}return n}function Np(e){let{target:t,source:n,start:r=0,count:i=1}=e;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)t[l++]=n[a];for(;a<s;)a<s-a?(t.copyWithin(r+a,r,r+a),a*=2):(t.copyWithin(r+a,r,r+s-a),a=s);return t}function zp(){let e;if("undefined"!==typeof window&&window.performance)e=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}class jp{constructor(e,t){pt(this,"name",void 0),pt(this,"type",void 0),pt(this,"sampleSize",1),pt(this,"time",void 0),pt(this,"count",void 0),pt(this,"samples",void 0),pt(this,"lastTiming",void 0),pt(this,"lastSampleTime",void 0),pt(this,"lastSampleCount",void 0),pt(this,"_count",0),pt(this,"_time",0),pt(this,"_samples",0),pt(this,"_startTime",0),pt(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=zp(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(zp()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Up{constructor(e){pt(this,"id",void 0),pt(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach((t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>this._getOrCreate(e)))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:n}=e;return this.stats[t]||(this.stats[t]=e instanceof jp?e:new jp(t,n)),this.stats[t]}}const Gp=e=>"boolean"===typeof e,Vp=e=>"function"===typeof e,Hp=e=>null!==e&&"object"===typeof e,Wp=e=>Hp(e)&&e.constructor==={}.constructor,Qp=e=>e&&"function"===typeof e[Symbol.iterator],Jp=e=>e&&"function"===typeof e[Symbol.asyncIterator],Kp=e=>"undefined"!==typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Xp=e=>"undefined"!==typeof Blob&&e instanceof Blob,Yp=e=>e&&"object"===typeof e&&e.isBuffer,qp=e=>(e=>"undefined"!==typeof ReadableStream&&e instanceof ReadableStream||Hp(e)&&Vp(e.tee)&&Vp(e.cancel)&&Vp(e.getReader))(e)||(e=>Hp(e)&&Vp(e.read)&&Vp(e.pipe)&&Gp(e.readable))(e);function Zp(e,t){if(!e)throw new Error(t||"loader assertion failed.")}function $p(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions)}function eg(e){var t,n;let r;return Zp(e,"null loader"),Zp($p(e),"invalid loader"),Array.isArray(e)&&(r=e[1],e=e[0],e={...e,options:{...e.options,...r}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(n=e)&&void 0!==n&&n.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}let tg="";const ng={};const rg=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,ig=/^([-\w.]+\/[-\w.+]+)/;function og(e){const t=rg.exec(e);return t?t[1]:""}const sg=/\?.*/;function ag(e){return e.replace(sg,"")}function lg(e){if(Kp(e)){return e.url}if(Xp(e)){return e.name||""}return"string"===typeof e?e:""}function cg(e){if(Kp(e)){const t=e,n=t.headers.get("content-type")||"",r=ag(t.url);return function(e){const t=ig.exec(e);return t?t[1]:e}(n)||og(r)}if(Xp(e)){return e.type||""}return"string"===typeof e?og(e):""}async function ug(e){if(Kp(e))return e;const t={},n=function(e){if(Kp(e))return e.headers["content-length"]||-1;if(Xp(e))return e.size;return"string"===typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);n>=0&&(t["content-length"]=String(n));const r=lg(e),i=cg(e);i&&(t["content-type"]=i);const o=await async function(e){const t=5;if("string"===typeof e)return"data:,".concat(e.slice(0,t));if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const n=new FileReader;n.onload=t=>{var n;return e(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.result)},n.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){const n=function(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}(e.slice(0,t));return"data:base64,".concat(n)}return null}(e);o&&(t["x-first-bytes"]=o),"string"===typeof e&&(e=(new TextEncoder).encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function dg(e,t){if("string"===typeof e){e=function(e){for(const t in ng)if(e.startsWith(t)){const n=ng[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(tg).concat(e)),e}(e);let n=t;return null!==t&&void 0!==t&&t.fetch&&"function"!==typeof(null===t||void 0===t?void 0:t.fetch)&&(n=t.fetch),await fetch(e,n)}return await ug(e)}const Ag=new Pp({id:"loaders.gl"});class hg{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const fg=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),pg="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),gg=(pg&&parseFloat(pg[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){pt(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.error.bind(this.console,...t)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:fg,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),mg={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function vg(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const bg=()=>{const e=vg();return e.globalOptions=e.globalOptions||{...gg},e.globalOptions};function yg(e,t,n,r){return n=n||[],function(e,t){xg(e,null,gg,mg,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};xg(r,n.id,i,o,t)}}(e,n=Array.isArray(n)?n:[n]),_g(t,e,r)}function xg(e,t,n,r,i){const o=t||"Top level",s=t?"".concat(t,"."):"";for(const a in e){const l=!t&&Hp(e[a]);if(!(a in n)&&!("baseUri"===a&&!t)&&!("workerUrl"===a&&t))if(a in r)Ag.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const e=wg(a,i);Ag.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(e))()}}}function wg(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const t in i.options){if(e===t)return"Did you mean '".concat(i.id,".").concat(t,"'?");const o=t.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(t,"'?"))}return r}function _g(e,t,n){const r={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(r,n),null===r.log&&(r.log=new hg),Sg(r,bg()),Sg(r,t),r}function Sg(e,t){for(const n in t)if(n in t){const r=t[n];Wp(r)&&Wp(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function Cg(e,t){const n=bg(),r=e||n;return"function"===typeof r.fetch?r.fetch:Hp(r.fetch)?e=>dg(e,r):null!==t&&void 0!==t&&t.fetch?null===t||void 0===t?void 0:t.fetch:dg}function Eg(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Mg="3.4.15";const Pg={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document},Tg=Pg.global||Pg.self||Pg.window||{},kg="object"!==typeof process||"[object process]"!==String(process)||process.browser,Bg="function"===typeof importScripts,Og="undefined"!==typeof window&&"undefined"!==typeof window.orientation,Ig="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);Ig&&parseFloat(Ig[1]);class Rg{terminate(){}}const Lg=new Map;function Dg(e){Eg(e.source&&!e.url||!e.source&&e.url);let t=Lg.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return Fg((t=e,"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var t}(e.url),Lg.set(e.url,t)),e.source&&(t=Fg(e.source),Lg.set(e.source,t))),Eg(t),t}function Fg(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Ng(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(e){if(zg(e))r.add(e);else if(zg(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"===typeof e)for(const i in e)Ng(e[i],t,r)}else;return void 0===n?Array.from(r):[]}function zg(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&e instanceof MessagePort||("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}const jg=()=>{};class Ug{static isSupported(){return"undefined"!==typeof Worker&&kg||"undefined"!==typeof Rg&&!kg}constructor(e){pt(this,"name",void 0),pt(this,"source",void 0),pt(this,"url",void 0),pt(this,"terminated",!1),pt(this,"worker",void 0),pt(this,"onMessage",void 0),pt(this,"onError",void 0),pt(this,"_loadableURL","");const{name:t,source:n,url:r}=e;Eg(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=jg,this.onError=e=>console.log(e),this.worker=kg?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=jg,this.onError=jg,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||Ng(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=Dg({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Rg(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new Rg(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class Gg{constructor(e,t){pt(this,"name",void 0),pt(this,"workerThread",void 0),pt(this,"isRunning",!0),pt(this,"result",void 0),pt(this,"_resolve",(()=>{})),pt(this,"_reject",(()=>{})),this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Eg(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Eg(this.isRunning),this.isRunning=!1,this._reject(e)}}class Vg{static isSupported(){return Ug.isSupported()}constructor(e){pt(this,"name","unnamed"),pt(this,"source",void 0),pt(this,"url",void 0),pt(this,"maxConcurrency",1),pt(this,"maxMobileConcurrency",1),pt(this,"onDebug",(()=>{})),pt(this,"reuseWorkers",!0),pt(this,"props",{}),pt(this,"jobQueue",[]),pt(this,"idleQueue",[]),pt(this,"count",0),pt(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t,n)=>e.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e.error(t);const r=new Promise((r=>(this.jobQueue.push({name:e,onMessage:t,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const n=new Gg(t.name,e);e.onMessage=e=>t.onMessage(n,e.type,e.payload),e.onError=e=>t.onError(n,e),t.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Ug({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Og?this.maxMobileConcurrency:this.maxConcurrency}}const Hg={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Wg{static isSupported(){return Ug.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Wg._workerFarm=Wg._workerFarm||new Wg({}),Wg._workerFarm.setProps(e),Wg._workerFarm}constructor(e){pt(this,"props",void 0),pt(this,"workerPools",new Map),this.props={...Hg},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:n,url:r}=e;let i=this.workerPools.get(t);return i||(i=new Vg({name:t,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}pt(Wg,"_workerFarm",void 0);const Qg="latest";async function Jg(e,t,n,r,i){const o=e.id,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t[e.id]||{},r="".concat(e.id,"-worker.js");let i=n.workerUrl;if(i||"compression"!==e.id||(i=t.workerUrl),"test"===t._workerType&&(i="modules/".concat(e.module,"/dist/").concat(r)),!i){let t=e.version;"latest"===t&&(t=Qg);const n=t?"@".concat(t):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(n,"/dist/").concat(r)}return Eg(i),i}(e,n),a=Wg.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await a.startJob("process-on-worker",Kg.bind(null,i));l.postMessage("process",{input:t,options:n,context:r});const c=await l.result;return await c.result}async function Kg(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:o,input:s,options:a}=r;try{const n=await e(s,a);t.postMessage("done",{id:o,result:n})}catch(i){const e=i instanceof Error?i.message:"unknown error";t.postMessage("error",{id:o,error:e})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function Xg(e,t,n){const r=void 0!==n?new Uint8Array(e).subarray(t,t+n):new Uint8Array(e).subarray(t);return new Uint8Array(r).buffer}async function Yg(e){const t=[];for await(const n of e)t.push(n);return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),i=r.reduce(((e,t)=>e+t.byteLength),0),o=new Uint8Array(i);let s=0;for(const a of r)o.set(a,s),s+=a.byteLength;return o.buffer}(...t)}const qg=262144;const Zg=262144;const $g=1048576;function em(e){if((t=e)&&"object"===typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"===typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"===typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function tm(e,t){return fg?async function*(e,t){const n=e.getReader();let r;try{for(;;){const e=r||n.read();null!==t&&void 0!==t&&t._streamReadAhead&&(r=n.read());const{done:i,value:o}=await e;if(i)return;yield em(o)}}catch(i){n.releaseLock()}}(e,t):async function*(e,t){for await(const n of e)yield em(n)}(e)}function nm(e,t){if("string"===typeof e)return function*(e,t){const n=(null===t||void 0===t?void 0:t.chunkSize)||qg;let r=0;const i=new TextEncoder;for(;r<e.length;){const t=Math.min(e.length-r,n),o=e.slice(r,r+t);r+=t,yield i.encode(o)}}(e,t);if(e instanceof ArrayBuffer)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=Zg}=t;let r=0;for(;r<e.byteLength;){const t=Math.min(e.byteLength-r,n),i=new ArrayBuffer(t),o=new Uint8Array(e,r,t);new Uint8Array(i).set(o),r+=t,yield i}}()}(e,t);if(Xp(e))return async function*(e,t){const n=(null===t||void 0===t?void 0:t.chunkSize)||$g;let r=0;for(;r<e.size;){const t=r+n,i=await e.slice(r,t).arrayBuffer();r=t,yield i}}(e,t);if(qp(e))return tm(e,t);if(Kp(e)){return tm(e.body,t)}throw new Error("makeIterator")}const rm="Cannot convert supplied data type";async function im(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"===typeof e||r)return function(e,t,n){if(t.text&&"string"===typeof e)return e;if(Yp(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const r=e.byteLength||e.length;return 0===e.byteOffset&&r===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+r)),n}throw new Error(rm)}(e,t);if(Xp(e)&&(e=await ug(e)),Kp(e)){const n=e;return await async function(e){if(!e.ok){const t=await async function(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const n=e.headers.get("Content-Type");let r=e.statusText;n.includes("application/json")&&(r+=" ".concat(await e.text())),t+=r,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch(n){}return t}(e);throw new Error(t)}}(n),t.binary?await n.arrayBuffer():await n.text()}if(qp(e)&&(e=nm(e,n)),Qp(e)||Jp(e))return Yg(e);throw new Error(rm)}function om(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function sm(e,t,n){if(n)return n;const r={fetch:Cg(t,e),...e};if(r.url){const e=ag(r.url);r.baseUrl=e,r.queryString=function(e){const t=e.match(sg);return t&&t[0]}(r.url),r.filename=om(e),r.baseUrl=function(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}(e)}return Array.isArray(r.loaders)||(r.loaders=null),r}const am=new Pp({id:"loaders.gl"}),lm=()=>{const e=vg();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};const cm=/\.([^.]+)$/;function um(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!dm(e))return null;if(t&&!Array.isArray(t))return eg(t);let i=[];t&&(i=i.concat(t)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders||i.push(...lm()),function(e){for(const t of e)eg(t)}(i);const o=function(e,t,n,r){const i=lg(e),o=cg(e),s=ag(i)||(null===r||void 0===r?void 0:r.url);let a=null,l="";null!==n&&void 0!==n&&n.mimeType&&(a=hm(t,null===n||void 0===n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType));var c;a=a||function(e,t){const n=t&&cm.exec(t),r=n&&n[1];return r?function(e,t){t=t.toLowerCase();for(const n of e)for(const e of n.extensions)if(e.toLowerCase()===t)return n;return null}(e,r):null}(t,s),l=l||(a?"matched url ".concat(s):""),a=a||hm(t,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||function(e,t){if(!t)return null;for(const n of e)if("string"===typeof t){if(fm(t,n))return n}else if(ArrayBuffer.isView(t)){if(pm(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer){if(pm(t,0,n))return n}return null}(t,e),l=l||(a?"matched initial data ".concat(gm(e)):""),a=a||hm(t,null===n||void 0===n?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l&&am.log(1,"selectLoader selected ".concat(null===(c=a)||void 0===c?void 0:c.name,": ").concat(l,"."));return a}(e,i,n,r);if(!o&&(null===n||void 0===n||!n.nothrow))throw new Error(Am(e));return o}function dm(e){return!(e instanceof Response&&204===e.status)}function Am(e){const t=lg(e),n=cg(e);let r="No valid loader found (";r+=t?"".concat(om(t),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=e?gm(e):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function hm(e,t){for(const n of e){if(n.mimeTypes&&n.mimeTypes.includes(t))return n;if(t==="application/x.".concat(n.id))return n}return null}function fm(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function pm(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((r=>function(e,t,n,r){if(r instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,e,r.byteLength);switch(typeof r){case"function":return r(e,n);case"string":return r===mm(e,t,r.length);default:return!1}}(e,t,n,r)))}function gm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return mm(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return mm(e,0,t)}return""}function mm(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}async function vm(e,t,n,r){Eg(!r||"object"===typeof r),!t||Array.isArray(t)||$p(t)||(r=void 0,n=t,t=void 0),n=n||{};const i=lg(e=await e),o=function(e,t){if(!t&&e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...e]:e}return n&&n.length?n:null}(t,r),s=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!dm(e))return null;let i=um(e,t,{...n,nothrow:!0},r);if(i)return i;if(Xp(e)&&(i=um(e=await e.slice(0,10).arrayBuffer(),t,n,r)),!i&&(null===n||void 0===n||!n.nothrow))throw new Error(Am(e));return i}(e,o,n);return s?(r=sm({url:i,parse:vm,loaders:o},n=yg(n,s,o,i),r||null),await async function(e,t,n,r){if(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mg;Eg(e,"no worker provided");const n=e.version}(e),Kp(t)){const e=t,{ok:n,redirected:i,status:o,statusText:s,type:a,url:l}=e,c=Object.fromEntries(e.headers.entries());r.response={headers:c,ok:n,redirected:i,status:o,statusText:s,type:a,url:l}}if(t=await im(t,e,n),e.parseTextSync&&"string"===typeof t)return n.dataType="text",e.parseTextSync(t,n,r,e);if(function(e,t){return!!Wg.isSupported()&&!!(kg||null!==t&&void 0!==t&&t._nodeWorkers)&&e.worker&&(null===t||void 0===t?void 0:t.worker)}(e,n))return await Jg(e,t,n,r,vm);if(e.parseText&&"string"===typeof t)return await e.parseText(t,n,r,e);if(e.parse)return await e.parse(t,n,r,e);throw Eg(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}(s,e,n,r)):null}async function bm(e,t,n,r){Array.isArray(t)||$p(t)||(void 0,n=t,t=void 0);const i=Cg(n);let o=e;return"string"===typeof e&&(o=await i(e)),Xp(e)&&(o=await i(e)),await vm(o,t,n)}class ym{constructor(e,t,n){pt(this,"id",void 0),pt(this,"context",void 0),pt(this,"isLoaded",void 0),pt(this,"persistent",void 0),pt(this,"_loadCount",0),pt(this,"_subscribers",new Set),pt(this,"_data",void 0),pt(this,"_loader",void 0),pt(this,"_error",void 0),pt(this,"_content",void 0),this.id=e,this.context=n,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(e,t){if(e===this._data&&!t)return;this._data=e;const n=++this._loadCount;let r=e;"string"===typeof e&&(r=bm(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=e)})).catch((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=e||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const i of this._subscribers)i.onChange(this.getData())}}class xm{constructor(e){let{gl:t,protocol:n}=e;pt(this,"protocol",void 0),pt(this,"_context",void 0),pt(this,"_resources",void 0),pt(this,"_consumers",void 0),pt(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add(e){let{resourceId:t,data:n,forceUpdate:r=!1,persistent:i=!0}=e,o=this._resources[t];o?o.setData(n,r):(o=new ym(t,n,this._context),this._resources[t]=o),o.persistent=i}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe(e){let{consumerId:t}=e;const n=this._consumers[t];if(n){for(const e in n){const t=n[e],r=this._resources[t.resourceId];r&&r.unsubscribe(t)}delete this._consumers[t],this.prune()}}subscribe(e){let{resourceId:t,onChange:n,consumerId:r,requestId:i="default"}=e;const{_resources:o,protocol:s}=this;t.startsWith(s)&&(t=t.replace(s,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const a=o[t];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,n,r){const i=this._consumers,o=i[e]=i[e]||{},s=o[t]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(o[t]=s,s.onChange=r,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];t.persistent||t.inUse()||(t.delete(),delete this._resources[e])}}}const wm=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt(this,"_pool",[]),pt(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,n){let{size:r=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}=n;const c=i||e&&e.constructor||Float32Array,u=t*r+o;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let d=1/0;l&&(d=l*r+o);const A=this._allocate(c,u,a,d);return e&&s?A.set(e):a||A.fill(0,0,4),this._release(e),A}release(e){this._release(e)}_allocate(e,t,n,r){let i=Math.max(Math.ceil(t*this.opts.overAlloc),1);i>r&&(i=r);const o=this._pool,s=e.BYTES_PER_ELEMENT*i,a=o.findIndex((e=>e.byteLength>=s));if(a>=0){const t=new e(o.splice(a,1)[0],0,i);return n&&t.fill(0),t}return new e(i)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:n}=e,{byteLength:r}=n,i=t.findIndex((e=>e.byteLength>=r));i<0?t.push(n):(i>0||t.length<this.opts.poolSize)&&t.splice(i,0,n),t.length>this.opts.poolSize&&t.shift()}},_m=(Math.PI,Math.PI,{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0});function Sm(e){let{precision:t=_m.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=function(e){return Math.round(e/_m.EPSILON)*_m.EPSILON}(e),"".concat(parseFloat(e.toPrecision(t)))}function Cm(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Em(e,t,n){return Tm(e,(e=>Math.max(t,Math.min(n,e))))}function Mm(e,t,n){return Cm(e)?e.map(((e,r)=>Mm(e,t[r],n))):n*t+(1-n)*e}function Pm(e,t,n){const r=_m.EPSILON;n&&(_m.EPSILON=n);try{if(e===t)return!0;if(Cm(e)&&Cm(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Pm(e[n],t[n]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):"number"===typeof e&&"number"===typeof t&&Math.abs(e-t)<=_m.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{_m.EPSILON=r}}function Tm(e,t,n){if(Cm(e)){const r=e;n=n||function(e){return e.clone?e.clone():new Array(e.length)}(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=t(e[i],i,n);return n}return t(e)}class km extends(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Cm(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(_m)}formatString(e){let t="";for(let n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Sm(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Pm(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,n){if(void 0===n)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]+=r[e];return this.check()}subtract(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]-=r[e];return this.check()}scale(e){if("number"===typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(_m.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}get elements(){return this}}function Bm(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Om(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(_m.debug&&!function(e,t){if(e.length!==t)return!1;for(let n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e,t))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return e}function Im(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}class Rm extends km{get x(){return this[0]}set x(e){this[0]=Bm(e)}get y(){return this[1]}set y(e){this[1]=Bm(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-e[n];t+=r*r}return Bm(t)}dot(e){let t=0;for(let n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Bm(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=r[e];return this.check()}divide(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=r[e];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Im(e>=0&&e<this.ELEMENTS,"index is out of range"),Bm(this[e])}setComponent(e,t){return Im(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Lm=1e-6,Dm="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Fm(){var e=new Dm(3);return Dm!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Nm(e,t,n){var r=new Dm(3);return r[0]=e,r[1]=t,r[2]=n,r}function zm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function jm(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2];return e[0]=i*l-o*a,e[1]=o*s-r*l,e[2]=r*a-i*s,e}function Um(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,e}function Gm(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function Vm(e,t,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=t[0],l=t[1],c=t[2],u=i*c-o*l,d=o*a-r*c,A=r*l-i*a,h=i*A-o*d,f=o*u-r*A,p=r*d-i*u,g=2*s;return u*=g,d*=g,A*=g,h*=2,f*=2,p*=2,e[0]=a+u+h,e[1]=l+d+f,e[2]=c+A+p,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Hm=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},Wm=function(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)},Qm=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r};!function(){var e=Fm()}();function Jm(e,t,n){const r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o||1;return e[0]=(n[0]*r+n[4]*i+n[8]*o)/s,e[1]=(n[1]*r+n[5]*i+n[9]*o)/s,e[2]=(n[2]*r+n[6]*i+n[10]*o)/s,e}function Km(e,t,n){const r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r+n[3]*i+n[6]*o,e[1]=n[1]*r+n[4]*i+n[7]*o,e[2]=n[2]*r+n[5]*i+n[8]*o,e[3]=t[3],e}const Xm=[0,0,0];let Ym;class qm extends Rm{static get ZERO(){return Ym||(Ym=new qm(0,0,0),Object.freeze(Ym)),Ym}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&Cm(e)?this.copy(e):(_m.debug&&(Bm(e),Bm(t),Bm(n)),this[0]=e,this[1]=t,this[2]=n)}set(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return _m.debug&&(Bm(e.x),Bm(e.y),Bm(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Bm(e)}angle(e){return function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],s=t[1],a=t[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+s*s+a*a),c=l&&zm(e,t)/l;return Math.acos(Math.min(Math.max(c,-1),1))}(this,e)}cross(e){return jm(this,this,e),this.check()}rotateX(e){let{radians:t,origin:n=Xm}=e;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}rotateY(e){let{radians:t,origin:n=Xm}=e;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}rotateZ(e){let{radians:t,origin:n=Xm}=e;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,n,t),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Um(this,this,e),this.check()}transformAsVector(e){return Jm(this,this,e),this.check()}transformByMatrix3(e){return Gm(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2]}(this,this,e),this.check()}transformByQuaternion(e){return Vm(this,this,e),this.check()}}const Zm=new qm;function $m(e,t,n,r){Zm.set(e,t,n);const i=Zm.len();return{distance:r/i,normal:new qm(-e/i,-t/i,-n/i)}}function ev(e){return e-Math.fround(e)}let tv;function nv(e,t){const{size:n=1,startIndex:r=0}=t,i=void 0!==t.endIndex?t.endIndex:e.length,o=(i-r)/n;tv=wm.allocate(tv,o,{type:Float32Array,size:2*n});let s=r,a=0;for(;s<i;){for(let t=0;t<n;t++){const r=e[s++];tv[a+t]=r,tv[a+t+n]=ev(r)}a+=2*n}return tv.subarray(0,o*n*2)}function rv(e){let t=null,n=!1;for(const r of e)r&&(t?(n||(t=[[t[0][0],t[0][1]],[t[1][0],t[1][1]]],n=!0),t[0][0]=Math.min(t[0][0],r[0][0]),t[0][1]=Math.min(t[0][1],r[0][1]),t[1][0]=Math.max(t[1][0],r[1][0]),t[1][1]=Math.max(t[1][1],r[1][1])):t=r);return t}class iv extends km{toString(){let e="[";if(_m.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,n){return this[t*this.RANK+e]=Bm(n),this}getColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[n+r];return t}setColumn(e,t){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}function ov(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],A=t[10],h=t[11],f=t[12],p=t[13],g=t[14],m=t[15],v=n*a-r*s,b=n*l-i*s,y=n*c-o*s,x=r*l-i*a,w=r*c-o*a,_=i*c-o*l,S=u*p-d*f,C=u*g-A*f,E=u*m-h*f,M=d*g-A*p,P=d*m-h*p,T=A*m-h*g,k=v*T-b*P+y*M+x*E-w*C+_*S;return k?(k=1/k,e[0]=(a*T-l*P+c*M)*k,e[1]=(i*P-r*T-o*M)*k,e[2]=(p*_-g*w+m*x)*k,e[3]=(A*w-d*_-h*x)*k,e[4]=(l*E-s*T-c*C)*k,e[5]=(n*T-i*E+o*C)*k,e[6]=(g*y-f*_-m*b)*k,e[7]=(u*_-A*y+h*b)*k,e[8]=(s*P-a*E+c*S)*k,e[9]=(r*E-n*P-o*S)*k,e[10]=(f*w-p*y+m*v)*k,e[11]=(d*y-u*w-h*v)*k,e[12]=(a*C-s*M-l*S)*k,e[13]=(n*M-r*C+i*S)*k,e[14]=(p*b-f*x-g*v)*k,e[15]=(u*x-d*b+A*v)*k,e):null}function sv(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],A=t[9],h=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15],b=n[0],y=n[1],x=n[2],w=n[3];return e[0]=b*r+y*a+x*d+w*p,e[1]=b*i+y*l+x*A+w*g,e[2]=b*o+y*c+x*h+w*m,e[3]=b*s+y*u+x*f+w*v,b=n[4],y=n[5],x=n[6],w=n[7],e[4]=b*r+y*a+x*d+w*p,e[5]=b*i+y*l+x*A+w*g,e[6]=b*o+y*c+x*h+w*m,e[7]=b*s+y*u+x*f+w*v,b=n[8],y=n[9],x=n[10],w=n[11],e[8]=b*r+y*a+x*d+w*p,e[9]=b*i+y*l+x*A+w*g,e[10]=b*o+y*c+x*h+w*m,e[11]=b*s+y*u+x*f+w*v,b=n[12],y=n[13],x=n[14],w=n[15],e[12]=b*r+y*a+x*d+w*p,e[13]=b*i+y*l+x*A+w*g,e[14]=b*o+y*c+x*h+w*m,e[15]=b*s+y*u+x*f+w*v,e}function av(e,t,n){var r,i,o,s,a,l,c,u,d,A,h,f,p=n[0],g=n[1],m=n[2];return t===e?(e[12]=t[0]*p+t[4]*g+t[8]*m+t[12],e[13]=t[1]*p+t[5]*g+t[9]*m+t[13],e[14]=t[2]*p+t[6]*g+t[10]*m+t[14],e[15]=t[3]*p+t[7]*g+t[11]*m+t[15]):(r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],A=t[9],h=t[10],f=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=A,e[10]=h,e[11]=f,e[12]=r*p+a*g+d*m+t[12],e[13]=i*p+l*g+A*m+t[13],e[14]=o*p+c*g+h*m+t[14],e[15]=s*p+u*g+f*m+t[15]),e}function lv(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function cv(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],A=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=s*i+u*r,e[6]=a*i+d*r,e[7]=l*i+A*r,e[8]=c*i-o*r,e[9]=u*i-s*r,e[10]=d*i-a*r,e[11]=A*i-l*r,e}function uv(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],d=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=s*i+u*r,e[2]=a*i+d*r,e[3]=l*i+A*r,e[4]=c*i-o*r,e[5]=u*i-s*r,e[6]=d*i-a*r,e[7]=A*i-l*r,e}function dv(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],s=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,s,a),e[2]=Math.hypot(l,c,u),e}var Av=function(e,t,n,r,i){var o,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e};var hv=function(e,t,n,r,i,o,s){var a=1/(t-n),l=1/(r-i),c=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*l,e[14]=(s+o)*c,e[15]=1,e};function fv(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function pv(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function gv(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}var mv=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e};!function(){var e=function(){var e=new Dm(2);return Dm!=Float32Array&&(e[0]=0,e[1]=0),e}()}();function vv(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function bv(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)}function yv(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function xv(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}var wv;!function(){var e=function(){var e=new Dm(4);return Dm!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"}(wv||(wv={}));const _v=45*Math.PI/180,Sv=1,Cv=.1,Ev=500,Mv=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Pv extends iv{static get IDENTITY(){return function(){kv||(kv=new Pv,Object.freeze(kv));return kv}()}static get ZERO(){return function(){Tv||(Tv=new Pv([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Tv));return Tv}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return wv}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,n,r,i,o,s,a,l,c,u,d,A,h,f,p){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=c,this[10]=u,this[11]=d,this[12]=A,this[13]=h,this[14]=f,this[15]=p,this.check()}setRowMajor(e,t,n,r,i,o,s,a,l,c,u,d,A,h,f,p){return this[0]=e,this[1]=i,this[2]=l,this[3]=A,this[4]=t,this[5]=o,this[6]=c,this[7]=h,this[8]=n,this[9]=s,this[10]=u,this[11]=f,this[12]=r,this[13]=a,this[14]=d,this[15]=p,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Mv)}fromObject(e){return this.check()}fromQuaternion(e){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,d=r*a,A=i*s,h=i*a,f=i*l,p=o*s,g=o*a,m=o*l;e[0]=1-d-f,e[1]=u+m,e[2]=A-g,e[3]=0,e[4]=u-m,e[5]=1-c-f,e[6]=h+p,e[7]=0,e[8]=A+g,e[9]=h-p,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:n,bottom:r,top:i,near:o=Cv,far:s=Ev}=e;return s===1/0?function(e,t,n,r,i,o){const s=2*o/(n-t),a=2*o/(i-r),l=(n+t)/(n-t),c=(i+r)/(i-r),u=-1,d=-1,A=-2*o;e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=l,e[9]=c,e[10]=u,e[11]=d,e[12]=0,e[13]=0,e[14]=A,e[15]=0}(this,t,n,r,i,o):function(e,t,n,r,i,o,s){var a=1/(n-t),l=1/(i-r),c=1/(o-s);e[0]=2*o*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(i+r)*l,e[10]=(s+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*c,e[15]=0}(this,t,n,r,i,o,s),this.check()}lookAt(e){const{eye:t,center:n=[0,0,0],up:r=[0,1,0]}=e;return function(e,t,n,r){var i,o,s,a,l,c,u,d,A,h,f=t[0],p=t[1],g=t[2],m=r[0],v=r[1],b=r[2],y=n[0],x=n[1],w=n[2];Math.abs(f-y)<Lm&&Math.abs(p-x)<Lm&&Math.abs(g-w)<Lm?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(u=f-y,d=p-x,A=g-w,i=v*(A*=h=1/Math.hypot(u,d,A))-b*(d*=h),o=b*(u*=h)-m*A,s=m*d-v*u,(h=Math.hypot(i,o,s))?(i*=h=1/h,o*=h,s*=h):(i=0,o=0,s=0),a=d*s-A*o,l=A*i-u*s,c=u*o-d*i,(h=Math.hypot(a,l,c))?(a*=h=1/h,l*=h,c*=h):(a=0,l=0,c=0),e[0]=i,e[1]=a,e[2]=u,e[3]=0,e[4]=o,e[5]=l,e[6]=d,e[7]=0,e[8]=s,e[9]=c,e[10]=A,e[11]=0,e[12]=-(i*f+o*p+s*g),e[13]=-(a*f+l*p+c*g),e[14]=-(u*f+d*p+A*g),e[15]=1)}(this,t,n,r),this.check()}ortho(e){const{left:t,right:n,bottom:r,top:i,near:o=Cv,far:s=Ev}=e;return hv(this,t,n,r,i,o,s),this.check()}orthographic(e){const{fovy:t=_v,aspect:n=Sv,focalDistance:r=1,near:i=Cv,far:o=Ev}=e;Bv(t);const s=t/2,a=r*Math.tan(s),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:o})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=e;return Bv(t),Av(this,t,n,r,i),this.check()}determinant(){return function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],A=e[11],h=e[12],f=e[13],p=e[14],g=e[15];return(t*s-n*o)*(d*g-A*p)-(t*a-r*o)*(u*g-A*f)+(t*l-i*o)*(u*p-d*f)+(n*a-r*s)*(c*g-A*h)-(n*l-i*s)*(c*p-d*h)+(r*l-i*a)*(c*f-u*h)}(this)}getScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*o,e}transpose(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}invert(){return ov(this,this),this.check()}multiplyLeft(e){return sv(this,e,this),this.check()}multiplyRight(e){return sv(this,this,e),this.check()}rotateX(e){return cv(this,this,e),this.check()}rotateY(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[8],u=t[9],d=t[10],A=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=s*i-u*r,e[2]=a*i-d*r,e[3]=l*i-A*r,e[8]=o*r+c*i,e[9]=s*r+u*i,e[10]=a*r+d*i,e[11]=l*r+A*i}(this,this,e),this.check()}rotateZ(e){return uv(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function(e,t,n,r){var i,o,s,a,l,c,u,d,A,h,f,p,g,m,v,b,y,x,w,_,S,C,E,M,P=r[0],T=r[1],k=r[2],B=Math.hypot(P,T,k);B<Lm||(P*=B=1/B,T*=B,k*=B,i=Math.sin(n),s=1-(o=Math.cos(n)),a=t[0],l=t[1],c=t[2],u=t[3],d=t[4],A=t[5],h=t[6],f=t[7],p=t[8],g=t[9],m=t[10],v=t[11],b=P*P*s+o,y=T*P*s+k*i,x=k*P*s-T*i,w=P*T*s-k*i,_=T*T*s+o,S=k*T*s+P*i,C=P*k*s+T*i,E=T*k*s-P*i,M=k*k*s+o,e[0]=a*b+d*y+p*x,e[1]=l*b+A*y+g*x,e[2]=c*b+h*y+m*x,e[3]=u*b+f*y+v*x,e[4]=a*w+d*_+p*S,e[5]=l*w+A*_+g*S,e[6]=c*w+h*_+m*S,e[7]=u*w+f*_+v*S,e[8]=a*C+d*E+p*M,e[9]=l*C+A*E+g*M,e[10]=c*C+h*E+m*M,e[11]=u*C+f*E+v*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}scale(e){return lv(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return av(this,this,e),this.check()}transform(e,t){return 4===e.length?(Om(t=xv(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:n}=e;let r;switch(n){case 2:r=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}(t||[-0,-0],e,this);break;case 3:r=Um(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Om(r,e.length),r}transformAsVector(e,t){let n;switch(e.length){case 2:n=function(e,t,n){const r=t[0],i=t[1],o=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/o,e[1]=(n[1]*r+n[5]*i)/o,e}(t||[-0,-0],e,this);break;case 3:n=Jm(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Om(n,e.length),n}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,n){return this.identity().translate([e,t,n])}}let Tv,kv;function Bv(e){if(e>2*Math.PI)throw Error("expected radians")}function Ov(e,t){const n=xv([],t,e);return vv(n,n,1/n[3]),n}function Iv(e,t){const n=e%t;return n<0?t+n:n}function Rv(e,t,n){return n*t+(1-n)*e}function Lv(e,t,n){return e<t?t:e>n?n:e}const Dv=Math.log2||function(e){return Math.log(e)*Math.LOG2E};function Fv(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Nv=Math.PI,zv=Nv/4,jv=Nv/180,Uv=180/Nv,Gv=512,Vv=4003e4,Hv=85.051129,Wv=1.5;function Qv(e){return Math.pow(2,e)}function Jv(e){return Dv(e)}function Kv(e){const[t,n]=e;Fv(Number.isFinite(t)),Fv(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*jv;return[Gv*(t*jv+Nv)/(2*Nv),Gv*(Nv+Math.log(Math.tan(zv+.5*r)))/(2*Nv)]}function Xv(e){const[t,n]=e,r=t/Gv*(2*Nv)-Nv,i=2*(Math.atan(Math.exp(n/Gv*(2*Nv)-Nv))-zv);return[r*Uv,i*Uv]}function Yv(e){const t=Math.cos(e*jv);return Gv/Vv/t}function qv(e){const{latitude:t,longitude:n,highPrecision:r=!1}=e;Fv(Number.isFinite(t)&&Number.isFinite(n));const i=Gv,o=Math.cos(t*jv),s=i/360,a=s/o,l=i/Vv/o,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(r){const e=jv*Math.tan(t*jv)/o,n=s*e/2,r=i/Vv*e,u=r/a*l;c.unitsPerDegree2=[0,n,r],c.unitsPerMeter2=[u,0,u]}return c}function Zv(e,t){const[n,r,i]=e,[o,s,a]=t,{unitsPerMeter:l,unitsPerMeter2:c}=qv({longitude:n,latitude:r,highPrecision:!0}),u=Kv(e);u[0]+=o*(l[0]+c[0]*s),u[1]+=s*(l[1]+c[1]*s);const d=Xv(u),A=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[d[0],d[1],A]:d}function $v(e){const{width:t,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=e;let{fovy:u=eb(Wv)}=e;void 0!==r&&(u=eb(r));const d=u*jv,A=i*jv,h=tb(u);let f=h;s&&(f+=s[2]*a/Math.cos(A)/n);const p=d*(.5+(o?o[1]:0)/n),g=Math.sin(p)*f/Math.sin(Lv(Math.PI/2-A-p,.01,Math.PI-.01)),m=Math.sin(A)*g+f,v=10*f;return{fov:d,aspect:t/n,focalDistance:h,near:l,far:Math.min(m*c,v)}}function eb(e){return 2*Math.atan(.5/e)*Uv}function tb(e){return.5/Math.tan(.5*e*jv)}function nb(e,t){const[n,r,i=0]=e;return Fv(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Ov(t,[n,r,i,1])}function rb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[r,i,o]=e;if(Fv(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){return Ov(t,[r,i,o,1])}const s=Ov(t,[r,i,0,1]),a=Ov(t,[r,i,1,1]),l=s[2],c=a[2];return gv([],s,a,l===c?0:((n||0)-l)/(c-l))}function ib(e){const{width:t,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=e,[[a,l],[c,u]]=r,d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof e)return{top:e,bottom:e,left:e,right:e};return Fv(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e}(e.padding),A=Kv([a,Lv(u,-85.051129,Hv)]),h=Kv([c,Lv(l,-85.051129,Hv)]),f=[Math.max(Math.abs(h[0]-A[0]),i),Math.max(Math.abs(h[1]-A[1]),i)],p=[t-d.left-d.right-2*Math.abs(s[0]),n-d.top-d.bottom-2*Math.abs(s[1])];Fv(p[0]>0&&p[1]>0);const g=p[0]/f[0],m=p[1]/f[1],v=(d.right-d.left)/2/g,b=(d.top-d.bottom)/2/m,y=Xv([(h[0]+A[0])/2+v,(h[1]+A[1])/2+b]),x=Math.min(o,Dv(Math.abs(Math.min(g,m))));return Fv(Number.isFinite(x)),{longitude:y[0],latitude:y[1],zoom:x}}const ob=Math.PI/180;function sb(e,t,n){const{pixelUnprojectionMatrix:r}=e,i=Ov(r,[t,0,1,1]),o=Ov(r,[t,e.height,1,1]),s=Xv(gv([],i,o,(n*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return s.push(n),s}const ab=.01,lb=["longitude","latitude","zoom"],cb={curve:1.414,speed:1.2};function ub(e,t,n){const r=(n=Object.assign({},cb,n)).curve,i=e.zoom,o=[e.longitude,e.latitude],s=Qv(i),a=t.zoom,l=[t.longitude,t.latitude],c=Qv(a-i),u=Kv(o),d=Kv(l),A=mv([],d,u),h=Math.max(e.width,e.height),f=h/c,p=pv(A)*s,g=Math.max(p,ab),m=r*r,v=(f*f-h*h+m*m*g*g)/(2*h*m*g),b=(f*f-h*h-m*m*g*g)/(2*f*m*g),y=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(b*b+1)-b);return{startZoom:i,startCenterXY:u,uDelta:A,w0:h,u1:p,S:(x-y)/r,rho:r,rho2:m,r0:y,r1:x}}const db={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(db,"IDENTITY",{get:()=>(Op.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ab={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},hb={common:0,meters:1,pixels:2},fb={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},pb=Math.PI/180,gb=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],mb=[0,0,0],vb={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class bb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt(this,"id",void 0),pt(this,"x",void 0),pt(this,"y",void 0),pt(this,"width",void 0),pt(this,"height",void 0),pt(this,"padding",void 0),pt(this,"isGeospatial",void 0),pt(this,"zoom",void 0),pt(this,"focalDistance",void 0),pt(this,"position",void 0),pt(this,"modelMatrix",void 0),pt(this,"distanceScales",void 0),pt(this,"scale",void 0),pt(this,"center",void 0),pt(this,"cameraPosition",void 0),pt(this,"projectionMatrix",void 0),pt(this,"viewMatrix",void 0),pt(this,"viewMatrixUncentered",void 0),pt(this,"viewMatrixInverse",void 0),pt(this,"viewProjectionMatrix",void 0),pt(this,"pixelProjectionMatrix",void 0),pt(this,"pixelUnprojectionMatrix",void 0),pt(this,"resolution",void 0),pt(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||vb,this.focalDistance=e.focalDistance||1,this.position=e.position||mb,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ab.WEB_MERCATOR:Ab.WEB_MERCATOR_AUTO_OFFSET:Ab.IDENTITY}equals(e){return e instanceof bb&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Pm(e.projectionMatrix,this.projectionMatrix)&&Pm(e.viewMatrix,this.viewMatrix))}project(e){let{topLeft:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=nb(this.projectPosition(e),this.pixelProjectionMatrix),[r,i]=n,o=t?i:this.height-i;return 2===e.length?[r,o]:[r,o,n[2]]}unproject(e){let{topLeft:t=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=e,s=t?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],l=rb([r,s,o],this.pixelUnprojectionMatrix,a),[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(e){const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=Kv(e);return t[1]=Em(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?Xv(e):e}getBounds(){const e={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},t=this.unproject([0,0],e),n=this.unproject([this.width,0],e),r=this.unproject([0,this.height],e),i=this.unproject([this.width,this.height],e);return[Math.min(t[0],n[0],r[0],i[0]),Math.min(t[1],n[1],r[1],i[1]),Math.max(t[0],n[0],r[0],i[0]),Math.max(t[1],n[1],r[1],i[1])]}getDistanceScales(e){return e?qv({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel(e){let{x:t,y:n,width:r=1,height:i=1}=e;return t<this.x+this.width&&this.x<t+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:$m((e=this.viewProjectionMatrix)[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:$m(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:$m(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:$m(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:$m(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:$m(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}),this._frustumPlanes;var e}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function(e){const{latitude:t}=e;Fv(Number.isFinite(t));const n=Math.cos(t*jv);return Jv(Vv*n)-9}({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||qv({latitude:n,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:o}=e;let s=mb;if(i&&(s=o?new Pv(o).transformAsVector(i,[]):i),this.isGeospatial){const e=this.projectPosition([t,n,0]);this.center=new qm(s).scale(this.distanceScales.unitsPerMeter).add(e)}else this.center=this.projectPosition(s)}_initMatrices(e){const{viewMatrix:t=gb,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:o=75,near:s=.1,far:a=1e3,padding:l=null,focalDistance:c=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Pv).multiplyRight(t).translate(new qm(this.center).negate()),this.projectionMatrix=n||function(e){let{width:t,height:n,orthographic:r,fovyRadians:i,focalDistance:o,padding:s,near:a,far:l}=e;const c=t/n,u=r?(new Pv).orthographic({fovy:i,aspect:c,focalDistance:o,near:a,far:l}):(new Pv).perspective({fovy:i,aspect:c,near:a,far:l});if(s){const{left:e=0,right:r=0,top:i=0,bottom:o=0}=s,a=Em((e+t-r)/2,0,t)-t/2,l=Em((i+n-o)/2,0,n)-n/2;u[8]-=2*a/t,u[9]+=2*l/n}return u}({width:this.width,height:this.height,orthographic:r,fovyRadians:i||o*pb,focalDistance:c,padding:l,near:s,far:a});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var d;sv(u,u,this.projectionMatrix),sv(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=ov([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(d=this.viewMatrixInverse)[12],d[13],d[14]];const A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];lv(A,A,[this.width/2,-this.height/2,1]),av(A,A,[1,-1,0]),sv(h,A,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=ov([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Op.warn("Pixel project matrix not invertible")()}}pt(bb,"displayName","Viewport");const yb="vs",xb="fs";function wb(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const _b={number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},array:{validate:(e,t)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function Sb(e){let t=Cb(e);return"object"===t?e?"type"in e?Object.assign({},e,_b[e.type]):"value"in e?(t=Cb(e.value),Object.assign({type:t},e,_b[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},_b[t])}function Cb(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}class Eb{constructor(e){let{name:t,vs:n,fs:r,dependencies:i=[],uniforms:o,getUniforms:s,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:d}=e;wb("string"===typeof t),this.name=t,this.vs=n||u,this.fs=r||d,this.getModuleUniforms=s,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(e){const t={vs:{},fs:{}};for(const n in e){let r=e[n];"string"===typeof r&&(r={order:0,injection:r}),t[n.slice(0,2)][n]=r}return t}(c),o&&(this.uniforms=function(e){const t={};for(const n in e){const r=Sb(e[n]);t[n]=r}return t}(o))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:wb(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach((n=>{n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(e){return e.forEach((e=>{if("function"===e.type)e.regex=new RegExp("\\b".concat(e.old,"\\("));else e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))})),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},n=this.uniforms;for(const r in n){const i=n[r];r in e&&!i.private?(i.validate&&wb(i.validate(e[r],i),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=i.value}return t}}function Mb(e){return Pb(kb(e))}function Pb(e){const t={},n={};return Tb({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(((e,t)=>n[t]-n[e])).map((e=>t[e]))}function Tb(e){let{modules:t,level:n,moduleMap:r,moduleDepth:i}=e;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)r[o.name]=o,(void 0===i[o.name]||i[o.name]<n)&&(i[o.name]=n);for(const o of t)o.dependencies&&Tb({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function kb(e,t){return e.map((e=>(e instanceof Eb||(wb("string"!==typeof e,"Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),wb(e.name,"shader module has no name"),(e=new Eb(e)).dependencies=kb(e.dependencies)),e)))}const Bb=7936,Ob=7937,Ib=7938,Rb=35724,Lb={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Db={};Object.keys(Lb).forEach((e=>{Db[e]=e}));const Fb={};function Nb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Lb[t];if(wb(r,t),!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t="undefined"!==typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(t in Fb)return Fb[t];const i=r[0],o=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),a=e.createShader(35633);e.shaderSource(a,s),e.compileShader(a);const l=e.getShaderParameter(a,35713);return e.deleteShader(a),Fb[t]=l,l}function zb(e,t){const n=Lb[t];wb(n,t);const r=function(e){return"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}(e)&&n[1]||n[0],i="string"===typeof r?Boolean(e.getExtension(r)):r;return wb(!1===i||!0===i),i}function jb(e,t){return(t=Array.isArray(t)?t:[t]).every((t=>zb(e,t)))}function Ub(e){const t=function(e){const t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||Bb),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||Ob);return{gpuVendor:function(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:e.getParameter(Ib),shadingLanguageVersion:e.getParameter(Rb)}}(e);switch(t.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}const Gb={[yb]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[xb]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},Vb="__LUMA_INJECT_DECLARATIONS__",Hb=/void\s+main\s*\([^)]*\)\s*\{\n?/,Wb=/}\n?[^{}]*$/,Qb=[];function Jb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t===yb;for(const o in n){const t=n[o];t.sort(((e,t)=>e.order-t.order)),Qb.length=t.length;for(let e=0,n=t.length;e<n;++e)Qb[e]=t[e].injection;const r="".concat(Qb.join("\n"),"\n");switch(o){case"vs:#decl":i&&(e=e.replace(Vb,r));break;case"vs:#main-start":i&&(e=e.replace(Hb,(e=>e+r)));break;case"vs:#main-end":i&&(e=e.replace(Wb,(e=>r+e)));break;case"fs:#decl":i||(e=e.replace(Vb,r));break;case"fs:#main-start":i||(e=e.replace(Hb,(e=>e+r)));break;case"fs:#main-end":i||(e=e.replace(Wb,(e=>r+e)));break;default:e=e.replace(o,(e=>e+r))}}return e=e.replace(Vb,""),r&&(e=e.replace(/\}\s*$/,(e=>e+Gb[t]))),e}function Kb(e){const t={};return wb(Array.isArray(e)&&e.length>1),e.forEach((e=>{for(const n in e)t[n]=t[n]?"".concat(t[n],"\n").concat(e[n]):e[n]})),t}function Xb(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const Yb=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],qb=[...Yb,[Xb("attribute"),"in $1"],[Xb("varying"),"out $1"]],Zb=[...Yb,[Xb("varying"),"in $1"]],$b=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],ey=[...$b,[Xb("in"),"attribute $1"],[Xb("out"),"varying $1"]],ty=[...$b,[Xb("in"),"varying $1"]],ny="gl_FragColor",ry=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,iy=/void\s+main\s*\([^)]*\)\s*\{\n?/;function oy(e,t,n){switch(t){case 300:return n?sy(e,qb):function(e){e=sy(e,Zb);const t=e.match(ry);if(t){const n=t[1];e=e.replace(new RegExp("\\b".concat(ny,"\\b"),"g"),n)}else{const t="fragmentColor";e=e.replace(iy,(e=>"out vec4 ".concat(t,";\n").concat(e))).replace(new RegExp("\\b".concat(ny,"\\b"),"g"),t)}return e}(e);case 100:return n?sy(e,ey):function(e){e=sy(e,ty);const t=e.match(ry);if(t){const n=t[1];e=e.replace(ry,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),ny)}return e}(e);default:throw new Error("unknown GLSL version ".concat(t))}}function sy(e,t){for(const[n,r]of t)e=e.replace(n,r);return e}const ay="\n\n".concat(Vb,"\n\n"),ly={[yb]:"vertex",[xb]:"fragment"},cy="precision highp float;\n\n";function uy(e,t){let{id:n,source:r,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:d}=t;wb("string"===typeof r,"shader source must be a string");const A=i===yb,h=r.split("\n");let f=100,p="",g=r;0===h[0].indexOf("#version ")?(f=300,p=h[0],g=h.slice(1).join("\n")):p="#version ".concat(f);const m={};o.forEach((e=>{Object.assign(m,e.getDefines())})),Object.assign(m,s);let v=u?"".concat(p,"\n").concat(function(e){let{id:t,source:n,type:r}=e;const i=t&&"string"===typeof t&&-1===n.indexOf("SHADER_NAME");return i?"\n#define SHADER_NAME ".concat(t,"_").concat(ly[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(e){let{type:t}=e;return"\n#define SHADER_TYPE_".concat(ly[t].toUpperCase(),"\n")}({type:i}),"\n").concat(Ub(e),"\n").concat(function(e,t,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return jb(e,Db.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),jb(e,Db.GLSL_DERIVATIVES)&&Nb(e,Db.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),jb(e,Db.GLSL_FRAG_DATA)&&Nb(e,Db.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),jb(e,Db.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(e),"\n").concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(const r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;const i=e[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}0===t&&(n+="\n");return n}(m),"\n").concat(A?"":cy,"\n"):"".concat(p,"\n");const b=function(e){const t={vs:{},fs:{}};return e.forEach((e=>{let n;"string"!==typeof e?(n=e,e=n.hook):n={},e=e.trim();const[r,i]=e.split(":"),o=e.replace(/\(.+/,"");t[r][o]=Object.assign(n,{signature:i})})),t}(a),y={},x={},w={};for(const _ in l){const e="string"===typeof l[_]?{injection:l[_],order:0}:l[_],t=_.match(/^(v|f)s:(#)?([\w-]+)$/);if(t){const n=t[2],r=t[3];n?"decl"===r?x[_]=[e]:w[_]=[e]:y[_]=[e]}else w[_]=[e]}for(const _ of o){d&&_.checkDeprecations(g,d);v+=_.getModuleSource(i,f);const e=_.injections[i];for(const t in e){const n=t.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?x:w;r[t]=r[t]||[],r[t].push(e[t])}else y[t]=y[t]||[],y[t].push(e[t])}}return v+=ay,v=Jb(v,i,x),v+=function(e,t){let n="";for(const r in e){const i=e[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),t[r]){const e=t[r];e.sort(((e,t)=>e.order-t.order));for(const t of e)n+="  ".concat(t.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(b[i],y),v+=g,v=Jb(v,i,w),v=oy(v,c?100:f,A),v}function dy(e){return function(t){const n={};for(const r of e){const e=r.getUniforms(t,n);Object.assign(n,e)}return n}}const Ay=new Pp({id:"luma.gl"});function hy(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const fy="Invalid WebGLRenderingContext",py="Requires WebGL2";function gy(e){return"undefined"!==typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext||("undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&Number.isFinite(e._version)))}function my(e){return"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}function vy(e){return hy(gy(e),fy),e}function by(e){return hy(my(e),py),e}const yy={};function xy(e,t){var n;yy[e]=!0,void 0!==t&&(n=t,globalThis.console&&globalThis.console.error&&globalThis.console.error(n))}const wy=function e(t){const n=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const t=new e.VertexAttrib(n);this.attribs[r]=t}this.maxAttrib=0};(wy.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const _y=function(e){const t=this;this.gl=e,function(e){const t=e.getError;e.getError=function(){let n;do{n=t.apply(e),0!==n&&(yy[n]=!0)}while(0!==n);for(n in yy)if(yy[n])return delete yy[n],parseInt(n,10);return 0}}(e);const n=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(e){return e===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:n.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(e){const r=t.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,e);return r.attribs[e].enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(e){const r=t.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,e);return r.attribs[e].enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(e,r){switch(e){case 34962:t.currentArrayBuffer=r;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(e,r){const i=t.currentVertexArrayObject.attribs[e];switch(r){case 34975:return i.buffer;case 34338:return i.enabled;case 34339:return i.size;case 34340:return i.stride;case 34341:return i.type;case 34922:return i.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(e,r,i,o,s,a){const l=t.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,e);const c=l.attribs[e];return c.buffer=t.currentArrayBuffer,c.size=r,c.type=i,c.normalized=o,c.stride=s,c.offset=a,c.recache(),n.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",(()=>{var e;e="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(e),t.reset_()}),!0),this.reset_()};_y.prototype.VERTEX_ARRAY_BINDING_OES=34229,_y.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;const e=this.gl;this.maxVertexAttribs=e.getParameter(34921),this.defaultVertexArrayObject=new wy(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},_y.prototype.createVertexArrayOES=function(){const e=new wy(this);return this.vertexArrayObjects.push(e),e},_y.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},_y.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof wy&&e.hasBeenBound&&e.ext===this)},_y.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void xy(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(r===i)return;r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(t,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const s=Math.max(r?r.maxAttrib:0,i.maxAttrib);for(let a=0;a<=s;a++){const e=i.attribs[a],s=r?r.attribs[a]:null;if(r&&e.enabled===s.enabled||(e.enabled?n.enableVertexAttribArray.call(t,a):n.disableVertexAttribArray.call(t,a)),e.enabled){let i=!1;r&&e.buffer===s.buffer||(o!==e.buffer&&(n.bindBuffer.call(t,34962,e.buffer),o=e.buffer),i=!0),(i||e.cached!==s.cached)&&n.vertexAttribPointer.call(t,a,e.size,e.type,e.normalized,e.stride,e.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(t,34962,this.currentArrayBuffer)};const Sy="OES_element_index",Cy="WEBGL_draw_buffers",Ey="WEBGL_debug_renderer_info",My=35723,Py=36795,Ty=34047,ky=37445,By=37446,Oy=e=>my(e)?void 0:0,Iy={3074:e=>my(e)?void 0:36064,[My]:e=>my(e)?void 0:4352,35977:Oy,32937:Oy,[Py]:(e,t)=>{const n=my(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0},[ky]:(e,t)=>{const n=e.getExtension(Ey);return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[By]:(e,t)=>{const n=e.getExtension(Ey);return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[Ty]:(e,t)=>{const n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Oy,35071:Oy,37447:Oy,36063:(e,t)=>{if(!my(e)){const n=e.getExtension(Cy);return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Oy,35374:Oy,35377:Oy,34852:e=>{if(!my(e)){const t=e.getExtension(Cy);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},36203:e=>e.getExtension(Sy)?2147483647:65535,33001:e=>e.getExtension(Sy)?16777216:65535,33e3:e=>16777216,37157:Oy,35373:Oy,35657:Oy,36183:Oy,37137:Oy,34045:Oy,35978:Oy,35979:Oy,35968:Oy,35376:Oy,35375:Oy,35659:Oy,37154:Oy,35371:Oy,35658:Oy,35076:Oy,35077:Oy,35380:Oy};const Ry="OES_vertex_array_object",Ly="ANGLE_instanced_arrays",Dy="WEBGL_draw_buffers",Fy="EXT_disjoint_timer_query";const Ny={[Ry]:{meta:{suffix:"OES"},createVertexArray:()=>{hy(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Ly]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){hy(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[Dy]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{hy(!1)}},[Fy]:{meta:{suffix:"EXT"},createQuery:()=>{hy(!1)},deleteQuery:()=>{hy(!1)},beginQuery:()=>{hy(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},zy={readBuffer:(e,t,n)=>{my(e)&&t(n)},getVertexAttrib:(e,t,n,r)=>{const{webgl2:i,ext:o}=function(e,t){return{webgl2:my(e),ext:e.getExtension(t)}}(e,Ly);let s;switch(r){case 35069:s=!!i&&void 0;break;case 35070:s=i||o?void 0:0}return void 0!==s?s:t(n,r)},getProgramParameter:(e,t,n,r)=>{if(!my(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:(e,t,n,r,i)=>my(e)||32937!==i?e.getInternalformatParameter(n,r,i):new Int32Array([0]),getTexParameter(e,t,n,r){if(34046===r){const{extensions:t}=e.luma,n=t.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:function(e,t,n){const r=Iy[n],i="function"===typeof r?r(e,t,n):r;return void 0!==i?i:t(n)},hint:(e,t,n,r)=>t(n,r)};function jy(e,t){let{extension:n,target:r,target2:i}=t;const o=Ny[n];hy(o);const{meta:s={}}=o,{suffix:a=""}=s,l=e.getExtension(n);for(const c of Object.keys(o)){const t="".concat(c).concat(a);let n=null;"meta"===c||"function"===typeof e[c]||(l&&"function"===typeof l[t]?n=function(){return l[t](...arguments)}:"function"===typeof o[c]&&(n=o[c].bind(r))),n&&(r[c]=n,i[c]=n)}}globalThis.polyfillContext=function(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(!function(e){if("function"===typeof e.createVertexArray)return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const e=t.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};const n=e.getExtension;e.getExtension=function(t){return n.call(this,t)||("OES_vertex_array_object"!==t?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new _y(this)),this.__OESVertexArrayObject))}}(e),function(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const n of t)e.luma[n]=e.getExtension(n)}(e),function(e,t){for(const n of Object.getOwnPropertyNames(t))"overrides"!==n&&jy(e,{extension:n,target:e.luma,target2:e})}(e,Ny),function(e,t){let{target:n,target2:r}=t;Object.keys(zy).forEach((t=>{if("function"===typeof zy[t]){const i=e[t]?e[t].bind(e):()=>{},o=zy[t].bind(null,e,i);n[t]=o,r[t]=o}}))}(e,{target:t,target2:e}),t.polyfilled=!0),e};const Uy={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Gy=(e,t,n)=>t?e.enable(n):e.disable(n),Vy=(e,t,n)=>e.hint(n,t),Hy=(e,t,n)=>e.pixelStorei(n,t);function Wy(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const Qy={3042:Gy,32773:(e,t)=>e.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,t)=>e.clearColor(...t),3107:(e,t)=>e.colorMask(...t),2884:Gy,2885:(e,t)=>e.cullFace(t),2929:Gy,2931:(e,t)=>e.clearDepth(t),2932:(e,t)=>e.depthFunc(t),2928:(e,t)=>e.depthRange(...t),2930:(e,t)=>e.depthMask(t),3024:Gy,35723:Vy,36006:(e,t)=>{const n=my(e)?36009:36160;return e.bindFramebuffer(n,t)},2886:(e,t)=>e.frontFace(t),33170:Vy,2849:(e,t)=>e.lineWidth(t),32823:Gy,32824:"polygonOffset",10752:"polygonOffset",35977:Gy,32938:"sampleCoverage",32939:"sampleCoverage",3089:Gy,3088:(e,t)=>e.scissor(...t),2960:Gy,2961:(e,t)=>e.clearStencil(t),2968:(e,t)=>e.stencilMaskSeparate(1028,t),36005:(e,t)=>e.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,t)=>e.viewport(...t),3333:Hy,3317:Hy,37440:Hy,37441:Hy,37443:Hy,3330:Hy,3332:Hy,3331:Hy,36010:(e,t)=>e.bindFramebuffer(36008,t),3314:Hy,32878:Hy,3316:Hy,3315:Hy,32877:Hy,framebuffer:(e,t)=>{const n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=Wy(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=Wy(t)&&2===t.length?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Wy(t)?t:[t,t];const[n,r]=t;e.stencilMaskSeparate(1028,n),e.stencilMaskSeparate(1029,r)},stencilFunc:(e,t)=>{t=Wy(t)&&3===t.length?[...t,...t]:t;const[n,r,i,o,s,a]=t;e.stencilFuncSeparate(1028,n,r,i),e.stencilFuncSeparate(1029,o,s,a)},stencilOp:(e,t)=>{t=Wy(t)&&3===t.length?[...t,...t]:t;const[n,r,i,o,s,a]=t;e.stencilOpSeparate(1028,n,r,i),e.stencilOpSeparate(1029,o,s,a)},viewport:(e,t)=>e.viewport(...t)};function Jy(e,t,n){return void 0!==t[e]?t[e]:n[e]}const Ky={blendEquation:(e,t,n)=>e.blendEquationSeparate(Jy(32777,t,n),Jy(34877,t,n)),blendFunc:(e,t,n)=>e.blendFuncSeparate(Jy(32969,t,n),Jy(32968,t,n),Jy(32971,t,n),Jy(32970,t,n)),polygonOffset:(e,t,n)=>e.polygonOffset(Jy(32824,t,n),Jy(10752,t,n)),sampleCoverage:(e,t,n)=>e.sampleCoverage(Jy(32938,t,n),Jy(32939,t,n)),stencilFuncFront:(e,t,n)=>e.stencilFuncSeparate(1028,Jy(2962,t,n),Jy(2967,t,n),Jy(2963,t,n)),stencilFuncBack:(e,t,n)=>e.stencilFuncSeparate(1029,Jy(34816,t,n),Jy(36003,t,n),Jy(36004,t,n)),stencilOpFront:(e,t,n)=>e.stencilOpSeparate(1028,Jy(2964,t,n),Jy(2965,t,n),Jy(2966,t,n)),stencilOpBack:(e,t,n)=>e.stencilOpSeparate(1029,Jy(34817,t,n),Jy(34818,t,n),Jy(34819,t,n))},Xy={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,n)=>e({[t]:n}),hint:(e,t,n)=>e({[t]:n}),bindFramebuffer:(e,t,n)=>{switch(t){case 36160:return e({36006:n,36010:n});case 36009:return e({36006:n});case 36008:return e({36010:n});default:return null}},blendColor:(e,t,n,r,i)=>e({32773:new Float32Array([t,n,r,i])}),blendEquation:(e,t)=>e({32777:t,34877:t}),blendEquationSeparate:(e,t,n)=>e({32777:t,34877:n}),blendFunc:(e,t,n)=>e({32969:t,32968:n,32971:t,32970:n}),blendFuncSeparate:(e,t,n,r,i)=>e({32969:t,32968:n,32971:r,32970:i}),clearColor:(e,t,n,r,i)=>e({3106:new Float32Array([t,n,r,i])}),clearDepth:(e,t)=>e({2931:t}),clearStencil:(e,t)=>e({2961:t}),colorMask:(e,t,n,r,i)=>e({3107:[t,n,r,i]}),cullFace:(e,t)=>e({2885:t}),depthFunc:(e,t)=>e({2932:t}),depthRange:(e,t,n)=>e({2928:new Float32Array([t,n])}),depthMask:(e,t)=>e({2930:t}),frontFace:(e,t)=>e({2886:t}),lineWidth:(e,t)=>e({2849:t}),polygonOffset:(e,t,n)=>e({32824:t,10752:n}),sampleCoverage:(e,t,n)=>e({32938:t,32939:n}),scissor:(e,t,n,r,i)=>e({3088:new Int32Array([t,n,r,i])}),stencilMask:(e,t)=>e({2968:t,36005:t}),stencilMaskSeparate:(e,t,n)=>e({[1028===t?2968:36005]:n}),stencilFunc:(e,t,n,r)=>e({2962:t,2967:n,2963:r,34816:t,36003:n,36004:r}),stencilFuncSeparate:(e,t,n,r,i)=>e({[1028===t?2962:34816]:n,[1028===t?2967:36003]:r,[1028===t?2963:36004]:i}),stencilOp:(e,t,n,r)=>e({2964:t,2965:n,2966:r,34817:t,34818:n,34819:r}),stencilOpSeparate:(e,t,n,r,i)=>e({[1028===t?2964:34817]:n,[1028===t?2965:34818]:r,[1028===t?2966:34819]:i}),viewport:(e,t,n,r,i)=>e({2978:[t,n,r,i]})},Yy=(e,t)=>e.isEnabled(t),qy={3042:Yy,2884:Yy,2929:Yy,3024:Yy,32823:Yy,32926:Yy,32928:Yy,3089:Yy,2960:Yy,35977:Yy};function Zy(e){for(const t in e)return!1;return!0}function $y(e,t){if(e===t)return!0;const n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}return!1}function ex(e,t){const n=e[t].bind(e);e[t]=function(){const t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache&&e.state.enable?e.state.cache[t]:n(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function tx(e,t,n){const r=e[t].bind(e);e[t]=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];const{valueChanged:s,oldValue:a}=n(e.state._updateCache,...i);return s&&r(...i),a},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}class nx{constructor(e){let{copyState:t=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?sx(e):Object.assign({},Uy),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){hy(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];ox(this.gl,e),this.stateStack.pop()}_updateCache(e){let t,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in e){hy(void 0!==i);const o=e[i],s=this.cache[i];$y(o,s)||(n=!0,t=s,r&&!(i in r)&&(r[i]=s),this.cache[i]=o)}return{valueChanged:n,oldValue:t}}}function rx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:r}=t;if(hy(void 0!==r),!e.state){const{polyfillContext:t}=globalThis;t&&t(e),e.state=new nx(e,{copyState:r}),function(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}(e);for(const n in Xy){tx(e,n,Xy[n])}ex(e,"getParameter"),ex(e,"isEnabled")}return e.state.enable=n,e}function ix(e){hy(e.state),e.state.pop()}function ox(e,t){if(hy(gy(e),"setParameters requires a WebGL context"),Zy(t))return;const n={};for(const i in t){const r=Number(i),o=Qy[i];o&&("string"===typeof o?n[o]=!0:o(e,t[i],r))}const r=e.state&&e.state.cache;if(r)for(const i in n){(0,Ky[i])(e,t,r)}}function sx(e,t){if("number"===typeof(t=t||Uy)){const n=t,r=qy[n];return r?r(e,n):e.getParameter(n)}const n=Array.isArray(t)?t:Object.keys(t),r={};for(const i of n){const t=qy[i];r[i]=t?t(e,Number(i)):e.getParameter(Number(i))}return r}function ax(e,t,n){if(Zy(t))return n(e);const{nocatch:r=!0}=t;let i;if(function(e){e.state||rx(e,{copyState:!1}),e.state.push()}(e),ox(e,t),r)i=n(e),ix(e);else try{i=n(e)}finally{ix(e)}return i}function lx(e){const{luma:t}=e;if(e.canvas&&t){const n=t.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:e.canvas.clientWidth;return r?e.drawingBufferWidth/r:1}return 1}function cx(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(e,t,n,r,i){const o=ux(e[0],t,n);let s=dx(e[1],t,r,i),a=ux(e[0]+1,t,n);const l=a===n-1?a:a-1;let c;a=dx(e[1]+1,t,r,i),i?(a=0===a?a:a+1,c=s,s=a):c=a===r-1?a:a-1;return{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(c-s+1,1)}}(t,lx(e),e.drawingBufferWidth,e.drawingBufferHeight,n)}function ux(e,t,n){return Math.min(Math.round(e*t),n-1)}function dx(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}const Ax=Ap(),hx=Ax&&"undefined"!==typeof document,fx={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function px(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hy(Ax,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),e=Object.assign({},fx,e);const{width:t,height:n}=e;function r(t){if(e.throwOnError)throw new Error(t);return console.error(t),null}let i;e.onError=r;const{canvas:o}=e,s=function(e){let t,{canvas:n,width:r=800,height:i=600,onError:o}=e;if("string"===typeof n){hx&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)}else n?t=n:(t=document.createElement("canvas"),t.id="lumagl-canvas",t.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",t.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(t,document.body.firstChild));return t}({canvas:o,width:t,height:n,onError:r});return i=function(e,t){const{onError:n}=t;let r=null;const i=e=>r=e.statusMessage||r;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=t;let a=null;s&&(a=a||e.getContext("webgl2",t),a=a||e.getContext("experimental-webgl2",t));o&&(a=a||e.getContext("webgl",t),a=a||e.getContext("experimental-webgl",t));if(e.removeEventListener("webglcontextcreationerror",i,!1),!a)return n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"));t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1);t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1);return a}(s,e),i?(i=gx(i,e),function(e){const t=my(e)?"WebGL2":"WebGL1",n=function(e){const t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info"),i=r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=e.debug?" debug":"";Ay.info(1,"".concat(t).concat(i," context ").concat(r))()}(i),i):null}function gx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||function(e){if("undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext)return 2;return 1}(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},fx,t);const{manageState:n,debug:r}=t;return n&&rx(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ay.log(1,...t)()}}),Ax&&r&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Ay.level=Math.max(Ay.level,1)):Ay.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function mx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){return void function(e,t,n){let r="width"in n?n.width:e.canvas.clientWidth,i="height"in n?n.height:e.canvas.clientHeight;r&&i||(Ay.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,r=e.canvas.width||1,i=e.canvas.height||1);e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==t){let n=t;const o=Math.floor(r*n),s=Math.floor(i*n);e.canvas.width=o,e.canvas.height=s,e.drawingBufferWidth===o&&e.drawingBufferHeight===s||(Ay.warn("Device pixel ratio clamped")(),n=Math.min(e.drawingBufferWidth/r,e.drawingBufferHeight/i),e.canvas.width=Math.floor(r*n),e.canvas.height=Math.floor(i*n)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:t})}}(e,function(e){const t="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}(t.useDevicePixels),t)}const n=e.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in t&&"height"in t&&n.resize(t.width,t.height)}const vx="8.5.21";const bx=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new Up({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==vx)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(vx));globalThis.luma||(Ap()&&Ay.log(1,"luma.gl ".concat(vx," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:vx,version:vx,log:Ay,stats:bx,globals:{modules:{},nodeIO:{}}});globalThis.luma;function yx(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function xx(e,t){if("string"!==typeof t)return t;const n=Number(t);if(!isNaN(n))return n;const r=e[t=t.replace(/^.*\./,"")];return yx(void 0!==r,"Accessing undefined constant GL.".concat(t)),r}function wx(e,t){t=Number(t);for(const n in e)if(e[n]===t)return"GL.".concat(n);return String(t)}const _x={};function Sx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";_x[e]=_x[e]||1;const t=_x[e]++;return"".concat(e,"-").concat(t)}function Cx(e){return yx("number"===typeof e,"Input must be a number"),e&&0===(e&e-1)}function Ex(e){let t=!0;for(const n in e){t=!1;break}return t}function Mx(e,t,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);r.forEach((e=>{o.methodName||(o[e]=()=>{throw Ay.removed("Calling removed method ".concat(t,".").concat(e,": "),i)(),new Error(e)})}))}const Px="Resource subclass must define virtual methods";class Tx{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vy(e);const{id:n,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=n||Sx(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach((e=>e.delete())),this}bind(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yx(e=xx(this.gl,e));const n=(this.constructor.PARAMETERS||{})[e];if(n){const e=my(this.gl);if(!((!("webgl2"in n)||e)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const t=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return e?r:t}}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:n}=e,r=this.constructor.PARAMETERS||{},i=my(this.gl),o={},s=t||Object.keys(r);for(const a of s){const t=r[a];if(t&&(!("webgl2"in t)||i)&&(!("extension"in t)||this.gl.getExtension(t.extension))){const r=n?wx(this.gl,a):a;o[r]=this.getParameter(a,e),n&&"GLenum"===t.type&&(o[r]=wx(this.gl,o[r]))}}return o}setParameter(e,t){yx(e=xx(this.gl,e));const n=(this.constructor.PARAMETERS||{})[e];if(n){const e=my(this.gl);if(!((!("webgl2"in n)||e)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=xx(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,n){return Mx(this,e,t,n)}initialize(e){}_createHandle(){throw new Error(Px)}_deleteHandle(){throw new Error(Px)}_bindHandle(e){throw new Error(Px)}_getOptsFromHandle(){throw new Error(Px)}_getParameter(e,t){throw new Error(Px)}_setParameter(e,t){throw new Error(Px)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=bx.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];bx.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=bx.get("Memory Usage".concat(n));r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=bx.get("Memory Usage".concat(t));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const kx="Failed to deduce GL constant from typed array";function Bx(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(kx)}}function Ox(e){let{clamped:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ix(e){let{data:t,width:n,height:r}=e;const i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let e=0;e<i;e++)for(let r=0;r<4;r++)s[4*(a*i+e)+r]=t[4*(2*a*n+2*e)+r];return{data:s,width:i,height:o}}function Rx(e,t,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const a in r)if(a in t){const t=r[a]?"".concat(e,".").concat(r[a]):"N/A";Ay.removed("".concat(e,".").concat(a),t)()}for(const a in i)if(a in t){const t=i[a];Ay.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(t))()}let s=null;for(const a in o)if(a in t){const n=o[a];Ay.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(n))(),s=s||Object.assign({},t),s[n]=t[a],delete s[a]}return s||t}const Lx={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Dx={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Fx{static getBytesPerElement(e){return Ox(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){yx(e.size);return Ox(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fx(...[Lx,...t])}constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>this._assign(e))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Fx.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Fx.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Rx("Accessor",e,Dx),void 0!==e.type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"===typeof e.index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const Nx={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},zx={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Nx},jx={removedProps:Nx};class Ux extends Tx{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Fx.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Fx.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Rx("Buffer",e,zx),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=Rx("Buffer",e,jx))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Fx(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:n=0,srcOffset:r=0}=e,i=e.byteLength||e.length;yx(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==i?(by(this.gl),this.gl.bufferSubData(this.target,n,t,r,i)):this.gl.bufferSubData(o,n,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:n=0,writeOffset:r=0,size:i}=e;const{gl:o}=this;return by(o),o.bindBuffer(36662,t.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,r,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:n=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};by(this.gl);const i=Ox(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),s=n;let a,l;e?(l=e.length,a=l-s):(a=Math.min(o,r||o),l=s+a);const c=Math.min(o,a);return r=r||c,yx(r<=c),e=e||new i(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,n,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,n,r):(yx(0===n),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;yx(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const i=Bx(e);return yx(i),this.setAccessor(new Fx(this.accessor,{type:i})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;yx(e>=0),this._trackDeallocatedMemory();let n=e;0===e&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const t=e/Ox(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}_inferType(e){this.accessor.type||this.setAccessor(new Fx(this.accessor,{type:Bx(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return Ay.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Ay.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Ay.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Ay.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Fx(this.accessor,e),this}}const Gx={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Vx={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Hx={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};const Wx=[9729,9728],Qx=globalThis.WebGLBuffer||function(){};class Jx extends Tx{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:r}=t;let i=!0;return n&&(i=i&&function(e,t){const n=Gx[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const r=my(e)&&n.gl2||n.gl1;return"string"===typeof r?e.getExtension(r):r}(e,n),i=i&&(!r||function(e,t){const n=Gx[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}(e,n))),i}constructor(e,t){const{id:n=Sx("texture"),handle:r,target:i}=t;super(e,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then((t=>this.initialize(Object.assign({},e,{pixels:t,data:t})))),this;const n="undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(n&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",(()=>this.initialize(e))),this;const{pixels:r=null,format:i=6408,border:o=0,recreate:s=!1,parameters:a={},pixelStore:l={},textureUnit:c}=e;t||(t=r);let{width:u,height:d,dataFormat:A,type:h,compressed:f=!1,mipmaps:p=!0}=e;const{depth:g=0}=e;return({width:u,height:d,compressed:f,dataFormat:A,type:h}=this._deduceParameters({format:i,type:h,dataFormat:A,compressed:f,data:t,width:u,height:d})),this.width=u,this.height=d,this.depth=g,this.format=i,this.type=h,this.dataFormat=A,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),p&&this._isNPOT()&&(Ay.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),p=!1,this._updateForNPOT(a)),this.mipmaps=p,this.setImageData({data:t,width:u,height:d,depth:g,format:i,type:h,dataFormat:A,border:o,mipmaps:p,parameters:l,compressed:f}),p&&this.generateMipmap(),this.setParameters(a),s&&(this.data=t),n&&(this._video={video:t,parameters:a,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:n}=this._video;if(n===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:n,mipmaps:r=!1}=e;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(Ay.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ax(this.gl,e,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:n=null,level:r=0,format:i=this.format,border:o=this.border,offset:s=0,parameters:a={}}=e;let{data:l=null,type:c=this.type,width:u=this.width,height:d=this.height,dataFormat:A=this.dataFormat,compressed:h=!1}=e;l||(l=n),({type:c,dataFormat:A,compressed:h,width:u,height:d}=this._deduceParameters({format:i,type:c,dataFormat:A,compressed:h,data:l,width:u,height:d}));const{gl:f}=this;f.bindTexture(this.target,this.handle);let p,g=null;({data:l,dataType:g}=this._getDataType({data:l,compressed:h}));let m=0;if(ax(this.gl,a,(()=>{switch(g){case"null":f.texImage2D(t,r,i,u,d,o,A,c,l);break;case"typed-array":f.texImage2D(t,r,i,u,d,o,A,c,l,s);break;case"buffer":p=by(f),p.bindBuffer(35052,l.handle||l),p.texImage2D(t,r,i,u,d,o,A,c,s),p.bindBuffer(35052,null);break;case"browser-object":my(f)?f.texImage2D(t,r,i,u,d,o,A,c,l):f.texImage2D(t,r,i,A,c,l);break;case"compressed":for(const[e,n]of l.entries())f.compressedTexImage2D(t,e,n.format,n.width,n.height,o,n.data),m+=n.levelSize;break;default:yx(!1,"Unknown image data type")}})),"compressed"===g)this._trackAllocatedMemory(m,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const e=Vx[this.dataFormat]||4,t=Hx[this.type]||1;this._trackAllocatedMemory(this.width*this.height*e*t,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:n=null,data:r=null,x:i=0,y:o=0,width:s=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:d=this.dataFormat,compressed:A=!1,offset:h=0,border:f=this.border,parameters:p={}}=e;if(({type:u,dataFormat:d,compressed:A,width:s,height:a}=this._deduceParameters({format:c,type:u,dataFormat:d,compressed:A,data:r,width:s,height:a})),yx(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const e=r;r=e.data,s=e.shape[0],a=e.shape[1]}r instanceof Ux&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),ax(this.gl,p,(()=>{if(A)this.gl.compressedTexSubImage2D(t,l,i,o,s,a,c,r);else if(null===r)this.gl.texSubImage2D(t,l,i,o,s,a,d,u,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,l,i,o,s,a,d,u,r,h);else if(r instanceof Qx){const e=by(this.gl);e.bindBuffer(35052,r),e.texSubImage2D(t,l,i,o,s,a,d,u,h),e.bindBuffer(35052,null)}else if(my(this.gl)){by(this.gl).texSubImage2D(t,l,i,o,s,a,d,u,r)}else this.gl.texSubImage2D(t,l,i,o,d,u,r)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ay.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:n=!1}=e;return n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof Ux?{data:t.handle,dataType:"buffer"}:t instanceof Qx?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:n}=e;let{width:r,height:i,dataFormat:o,type:s,compressed:a}=e;const l=Gx[t];return o=o||l&&l.dataFormat,s=s||l&&l.types[0],a=a||l&&l.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:o,type:s,compressed:a,width:r,height:i,format:t,data:n}}_deduceImageSize(e,t,n){let r;return r="undefined"!==typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},yx(r,"Could not deduced texture size"),yx(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),yx(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:yx(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!my(this.gl)&&(!(!this.width||!this.height)&&(!Cx(this.width)||!Cx(this.height)))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Wx.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}let Kx="";class Xx extends Jx{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Jx.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;vy(e),(t instanceof Promise||"string"===typeof t)&&(t={data:t}),"string"===typeof t.data&&(t=Object.assign({},t,{data:(n=t.data,yx("string"===typeof n),n=Kx+n,new Promise(((e,t)=>{try{const i=new Image;i.onload=()=>e(i),i.onerror=()=>t(new Error("Could not load image ".concat(n,"."))),i.crossOrigin=r&&r.crossOrigin||"anonymous",i.src=n}catch(i){t(i)}})))})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Yx="EXT_color_buffer_float",qx={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Yx,bpp:2},33327:{gl2:Yx,bpp:4},34842:{gl2:Yx,bpp:8},33326:{gl2:Yx,bpp:4},33328:{gl2:Yx,bpp:8},34836:{gl2:Yx,bpp:16},35898:{gl2:Yx,bpp:4}};class Zx extends Tx{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function(e,t,n){const r=n[t];if(!r)return!1;const i=my(e)&&r.gl2||r.gl1;return"string"===typeof i?e.getExtension(i):i}(e,t,qx)}static getSamplesForFormat(e,t){let{format:n}=t;return e.getInternalformatParameter(36161,n,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:n=1,height:r=1,samples:i=0}=e;return yx(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&my(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,t,n,r):this.gl.renderbufferStorage(36161,t,n,r),this.format=t,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*qx[this.format].bpp),this}resize(e){let{width:t,height:n}=e;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,e)}}const $x=6144,ew="clear: bad arguments";function tw(e){let{framebuffer:t=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};t&&(o.framebuffer=t);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),r&&(s|=256,!0!==r&&(o.clearDepth=r)),i&&(s|=1024,!0!==r&&(o.clearStencil=r)),yx(0!==s,ew),ax(e,o,(()=>{e.clear(s)}))}function nw(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return yx(!1),0}}const rw=[34069,34070,34071,34072,34073,34074];class iw extends Jx{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vy(e),super(e,Object.assign({},t,{target:34067})),this.initialize(t),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:t=!0,parameters:n={}}=e;return this.opts=e,this.setCubeMapImageData(e).then((()=>{this.loaded=!0,t&&this.generateMipmap(e),this.setParameters(n)})),this}subImage(e){let{face:t,data:n,x:r=0,y:i=0,mipmapLevel:o=0}=e;return this._subImage({target:t,data:n,x:r,y:i,mipmapLevel:o})}async setCubeMapImageData(e){let{width:t,height:n,pixels:r,data:i,border:o=0,format:s=6408,type:a=5121}=e;const{gl:l}=this,c=r||i,u=await Promise.all(rw.map((e=>{const t=c[e];return Promise.all(Array.isArray(t)?t:[t])})));this.bind(),rw.forEach(((e,r)=>{u[r].length>1&&!1!==this.opts.mipmaps&&Ay.warn("".concat(this.id," has mipmap and multiple LODs."))(),u[r].forEach(((r,i)=>{t&&n?l.texImage2D(e,i,s,t,n,o,s,a,r):l.texImage2D(e,i,s,s,a,r)}))})),this.unbind()}setImageDataForFace(e){const{face:t,width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:l=5121}=e,{gl:c}=this,u=i||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},e,{face:t,data:n,pixels:n})))):this.width||this.height?c.texImage2D(t,0,a,n,r,s,a,l,u):c.texImage2D(t,0,a,a,l,u),this}}iw.FACES=rw;class ow extends Jx{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return my(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};by(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:n=6408,width:r,height:i,depth:o=1,border:s=0,format:a,type:l=5121,offset:c=0,data:u,parameters:d={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ax(this.gl,d,(()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,t,n,r,i,o,s,a,l,u),u instanceof Ux&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,t,n,r,i,o,s,a,l,c))})),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const e=Vx[this.dataFormat]||4,t=Hx[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*e*t,"Texture")}return this.loaded=!0,this}}function sw(e,t){const{gl:n,width:r,height:i,id:o}=e;return new zw(n,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:e}}))}function aw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:l,sourceType:c}=t;const{framebuffer:u,deleteFramebuffer:d}=uw(e);yx(u);const{gl:A,handle:h,attachments:f}=u;a=a||u.width,l=l||u.height,36064===o&&null===h&&(o=1028),yx(f[o]),c=c||f[o].type,s=function(e,t,n,r,i){if(e)return e;const o=Ox(t=t||5121,{clamped:!1}),s=nw(n);return new o(r*i*s)}(s,c,i,a,l),c=c||Bx(s);const p=A.bindFramebuffer(36160,h);return A.readPixels(n,r,a,l,i,c,s),A.bindFramebuffer(36160,p||null),d&&u.delete(),s}function lw(e,t){let{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408,target:o=null,targetByteOffset:s=0,sourceWidth:a,sourceHeight:l,sourceType:c}=t;const{framebuffer:u,deleteFramebuffer:d}=uw(e);yx(u),a=a||u.width,l=l||u.height;const A=by(u.gl);if(c=c||(o?o.type:5121),!o){const e=nw(i),t=function(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return yx(!1),0}}(c);o=new Ux(A,{byteLength:s+a*l*e*t,accessor:{type:c,size:e}})}return o.bind({target:35051}),ax(A,{framebuffer:u},(()=>{A.readPixels(n,r,a,l,i,c,s)})),o.unbind({target:35051}),d&&u.delete(),o}function cw(e){let{sourceAttachment:t=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=aw(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>n;)({data:r,width:i,height:o}=Ix({data:r,width:i,height:o}));!function(e){let{data:t,width:n,height:r,bytesPerPixel:i=4,temp:o}=e;const s=n*i;o=o||new Uint8Array(s);for(let a=0;a<r/2;++a){const e=a*s,n=(r-a-1)*s;o.set(t.subarray(e,e+s)),t.copyWithin(e,n,n+s),t.set(o,n)}}({data:r,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),l=a.createImageData(i,o);return l.data.set(r),a.putImageData(l,0,0),s.toDataURL()}function uw(e){return e instanceof zw?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:sw(e),deleteFramebuffer:!0}}const dw="WEBGL2",Aw="VERTEX_ARRAY_OBJECT",hw="TIMER_QUERY",fw="INSTANCED_RENDERING",pw="MULTIPLE_RENDER_TARGETS",gw="ELEMENT_INDEX_UINT32",mw="BLEND_EQUATION_MINMAX",vw="FLOAT_BLEND",bw="COLOR_ENCODING_SRGB",yw="TEXTURE_DEPTH",xw="TEXTURE_FLOAT",ww="TEXTURE_HALF_FLOAT",_w="TEXTURE_FILTER_LINEAR_FLOAT",Sw="TEXTURE_FILTER_LINEAR_HALF_FLOAT",Cw="TEXTURE_FILTER_ANISOTROPIC",Ew="COLOR_ATTACHMENT_RGBA32F",Mw="COLOR_ATTACHMENT_FLOAT",Pw="COLOR_ATTACHMENT_HALF_FLOAT",Tw="GLSL_FRAG_DATA",kw="GLSL_FRAG_DEPTH",Bw="GLSL_DERIVATIVES",Ow="GLSL_TEXTURE_LOD";const Iw={[dw]:[!1,!0],[Aw]:["OES_vertex_array_object",!0],[hw]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[fw]:["ANGLE_instanced_arrays",!0],[pw]:["WEBGL_draw_buffers",!0],[gw]:["OES_element_index_uint",!0],[mw]:["EXT_blend_minmax",!0],[vw]:["EXT_float_blend"],[bw]:["EXT_sRGB",!0],[yw]:["WEBGL_depth_texture",!0],[xw]:["OES_texture_float",!0],[ww]:["OES_texture_half_float",!0],[_w]:["OES_texture_float_linear"],[Sw]:["OES_texture_half_float_linear"],[Cw]:["EXT_texture_filter_anisotropic"],[Ew]:[function(e){const t=new Xx(e,{format:6408,type:5126,dataFormat:6408}),n=new zw(e,{id:"test-framebuffer",check:!1,attachments:{36064:t}}),r=n.getStatus();return t.delete(),n.delete(),36053===r},"EXT_color_buffer_float"],[Mw]:[!1,"EXT_color_buffer_float"],[Pw]:["EXT_color_buffer_half_float"],[Tw]:["WEBGL_draw_buffers",!0],[kw]:["EXT_frag_depth",!0],[Bw]:["OES_standard_derivatives",!0],[Ow]:["EXT_shader_texture_lod",!0]},Rw=2;function Lw(e,t){return Dw(e,t)}function Dw(e,t){return(t=Array.isArray(t)?t:[t]).every((t=>Fw(e,t)))}function Fw(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[t]&&(e.luma.caps[t]=function(e,t){const n=Iw[t];let r;yx(n,t);const i=my(e)&&n[1]||n[0];if("function"===typeof i)r=i(e);else if(Array.isArray(i)){r=!0;for(const t of i)r=r&&Boolean(e.getExtension(t))}else"string"===typeof i?r=Boolean(e.getExtension(i)):"boolean"===typeof i?r=i:yx(!1);return r}(e,t)),e.luma.caps[t]||Ay.log(Rw,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}const Nw="Multiple render targets not supported";class zw extends Tx{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:r}=t;let i=!0;return n&&(i=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new zw(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=by(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=by(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:n=1,attachments:r=null,color:i=!0,depth:o=!0,stencil:s=!1,check:a=!0,readBuffer:l,drawBuffers:c}=e;if(yx(t>=0&&n>=0,"Width and height need to be integers"),this.width=t,this.height=n,r)for(const u in r){const e=r[u];(Array.isArray(e)?e[0]:e).resize({width:t,height:n})}else r=this._createDefaultAttachments(i,o,s,t,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:c}),r&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:o=!0}=e;this.attach(t,{clearAttachments:i,resizeAttachments:o});const{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),s.bindFramebuffer(36160,a||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:n}=e;if(null===this.handle)return yx(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&Ay.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n))();for(const r in this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};t&&Object.keys(this.attachments).forEach((e=>{r[e]=null})),Object.assign(r,e);const i=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){yx(void 0!==o,"Misspelled framebuffer binding point?");const e=Number(o),t=r[e];let i=t;if(i)if(i instanceof Zx)this._attachRenderbuffer({attachment:e,renderbuffer:i});else if(Array.isArray(t)){const[n,r=0,o=0]=t;i=n,this._attachTexture({attachment:e,texture:n,layer:r,level:o})}else this._attachTexture({attachment:e,texture:i,layer:0,level:0});else this._unattach(e);n&&i&&i.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((e=>!this.attachments[e])).forEach((e=>{delete this.attachments[e]}))}checkStatus(){const{gl:e}=this,t=this.getStatus();if(36053!==t)throw new Error(function(e){return(zw.STATUS||{})[e]||"Framebuffer error ".concat(e)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),n}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:n,stencil:r,drawBuffers:i=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&tw(this.gl,{color:t,depth:n,stencil:r}),i.forEach(((e,t)=>{!function(e){let{framebuffer:t=null,buffer:n=$x,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};by(e),ax(e,{framebuffer:t},(()=>{switch(n){case $x:switch(i.constructor){case Int32Array:e.clearBufferiv(n,r,i);break;case Uint32Array:e.clearBufferuiv(n,r,i);break;case Float32Array:default:e.clearBufferfv(n,r,i)}break;case 6145:e.clearBufferfv(6145,0,[i]);break;case 6146:e.clearBufferiv(6146,0,[i]);break;case 34041:const[t,o]=i;e.clearBufferfi(34041,0,t,o);break;default:yx(!1,ew)}}))}(this.gl,{drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Ay.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Ay.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Ay.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Ay.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Ay.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Ay.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:n=0,y:r=0,width:i,height:o}=e;const s=by(this.gl),a=s.bindFramebuffer(36008,this.handle);return 0===n&&0===r&&void 0===i&&void 0===o?s.invalidateFramebuffer(36008,t):s.invalidateFramebuffer(36008,t,n,r,i,o),s.bindFramebuffer(36008,a),this}getAttachmentParameter(e,t,n){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=wx(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const i of n){r[t?wx(this.gl,i):i]=this.getAttachmentParameter(e,i,t)}return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),n={};for(const r of t){const t=Number(r);n[e?wx(this.gl,t):t]=this.getAttachmentParameters(t,e)}return n}show(){return"undefined"!==typeof window&&window.open(cw(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>Ay.level||"undefined"===typeof window)return this;t=t||"Framebuffer ".concat(this.id);const n=cw(this,{targetMaxHeight:100});return Ay.image({logLevel:e,message:t,image:n},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,n,r,i){let o=null;return e&&(o=o||{},o[36064]=new Xx(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&n?(o=o||{},o[33306]=new Zx(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new Zx(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&yx(!1),o}_unattach(e){const t=this.attachments[e];t&&(t instanceof Zx?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:n}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,n.handle),this.attachments[t]=n}_attachTexture(e){let{attachment:t=36064,texture:n,layer:r,level:i}=e;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:by(o).framebufferTextureLayer(36160,t,n.target,i,r);break;case 34067:const e=function(e){return e<34069?e+34069:e}(r);o.framebufferTexture2D(36160,t,e,n.handle,i);break;case 3553:o.framebufferTexture2D(36160,t,3553,n.handle,i);break;default:yx(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[t]=n}_setReadBuffer(e){const t=my(n=this.gl)?n:null;var n;t?t.readBuffer(e):yx(36064===e||1029===e,Nw),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,n=by(t);if(n)n.drawBuffers(e);else{const n=t.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(e):yx(1===e.length&&(36064===e[0]||1029===e[0]),Nw)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in Iw)void 0===e.luma.caps[t]&&(e.luma.caps[t]=Fw(e,t));return e.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}zw.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const jw={5126:e_.bind(null,"uniform1fv",Qw,1,t_),35664:e_.bind(null,"uniform2fv",Qw,2,t_),35665:e_.bind(null,"uniform3fv",Qw,3,t_),35666:e_.bind(null,"uniform4fv",Qw,4,t_),5124:e_.bind(null,"uniform1iv",Jw,1,t_),35667:e_.bind(null,"uniform2iv",Jw,2,t_),35668:e_.bind(null,"uniform3iv",Jw,3,t_),35669:e_.bind(null,"uniform4iv",Jw,4,t_),35670:e_.bind(null,"uniform1iv",Jw,1,t_),35671:e_.bind(null,"uniform2iv",Jw,2,t_),35672:e_.bind(null,"uniform3iv",Jw,3,t_),35673:e_.bind(null,"uniform4iv",Jw,4,t_),35674:e_.bind(null,"uniformMatrix2fv",Qw,4,n_),35675:e_.bind(null,"uniformMatrix3fv",Qw,9,n_),35676:e_.bind(null,"uniformMatrix4fv",Qw,16,n_),35678:$w,35680:$w,5125:e_.bind(null,"uniform1uiv",Kw,1,t_),36294:e_.bind(null,"uniform2uiv",Kw,2,t_),36295:e_.bind(null,"uniform3uiv",Kw,3,t_),36296:e_.bind(null,"uniform4uiv",Kw,4,t_),35685:e_.bind(null,"uniformMatrix2x3fv",Qw,6,n_),35686:e_.bind(null,"uniformMatrix2x4fv",Qw,8,n_),35687:e_.bind(null,"uniformMatrix3x2fv",Qw,6,n_),35688:e_.bind(null,"uniformMatrix3x4fv",Qw,12,n_),35689:e_.bind(null,"uniformMatrix4x2fv",Qw,8,n_),35690:e_.bind(null,"uniformMatrix4x3fv",Qw,12,n_),35678:$w,35680:$w,35679:$w,35682:$w,36289:$w,36292:$w,36293:$w,36298:$w,36299:$w,36300:$w,36303:$w,36306:$w,36307:$w,36308:$w,36311:$w},Uw={},Gw={},Vw={},Hw=[0];function Ww(e,t,n,r){1===t&&"boolean"===typeof e&&(e=e?1:0),Number.isFinite(e)&&(Hw[0]=e,e=Hw);const i=e.length;if(i%t&&Ay.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;let o=r[i];o||(o=new n(i),r[i]=o);for(let s=0;s<i;s++)o[s]=e[s];return o}function Qw(e,t){return Ww(e,t,Float32Array,Uw)}function Jw(e,t){return Ww(e,t,Int32Array,Gw)}function Kw(e,t){return Ww(e,t,Uint32Array,Vw)}function Xw(e,t,n){const r=jw[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,e,t)}function Yw(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};const t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function qw(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;const t=Math.min(e.length,16);for(let n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof Jx||(e instanceof Zx||e instanceof zw&&Boolean(e.texture))))}function Zw(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(e[t]){const r=e[t];for(let e=0,t=n.length;e<t;++e)r[e]=n[e]}else e[t]=n.slice();else e[t]=n}function $w(){let e=null;return(t,n,r)=>{const i=e!==r;return i&&(t.uniform1i(n,r),e=r),i}}function e_(e,t,n,r){let i=null,o=null;return(s,a,l)=>{const c=t(l,n),u=c.length;let d=!1;if(null===i)i=new Float32Array(u),o=u,d=!0;else{yx(o===u,"Uniform length cannot change.");for(let e=0;e<u;++e)if(c[e]!==i[e]){d=!0;break}}return d&&(r(s,e,a,c),i.set(c)),d}}function t_(e,t,n,r){e[t](n,r)}function n_(e,t,n,r){e[t](n,!1,r)}function r_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:t}const i_=35632,o_=35633;function s_(e,t,n,r){const i=e.split(/\r?\n/),o={},s={},a=r||r_(t)||"(unnamed)",l="".concat(function(e){switch(e){case i_:return"fragment";case o_:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const t=i[u];if(t.length<=1)continue;const n=t.split(":"),r=n[0],a=parseInt(n[2],10);if(isNaN(a))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));"WARNING"!==r?o[a]=t:s[a]=t}const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map(((e,r)=>{const o=String(r+t),s=o.length;return l_(o,i-s)+n+e}))}(t);return{shaderName:l,errors:a_(o,c),warnings:a_(s,c)}}function a_(e,t){let n="";for(let r=0;r<t.length;r++){const i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(i,"\n"),e[r+1])){const t=e[r+1],i=t.split(":",3),o=i[0],s=parseInt(i[1],10)||0,a=t.substring(i.join(":").length+1).trim();n+=l_("^^^ ".concat(o,": ").concat(a,"\n\n"),s)}}return n}function l_(e,t){let n="";for(let r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}class c_ extends Tx{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return yx(!1),"unknown"}}constructor(e,t){vy(e),yx("string"===typeof t.source,"Shader: GLSL source code must be a JavaScript string");super(e,{id:r_(t.source,null)||t.id||Sx("unnamed ".concat(c_.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const n=r_(t,null);n&&(this.id=Sx(n)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(c_.getTypeName(this.shaderType),":").concat(this.id)}getName(){return r_(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const e=this.gl.getShaderInfoLog(this.handle),{shaderName:t,errors:n,warnings:r}=s_(e,this.source,this.shaderType,this.id);throw Ay.error("GLSL compilation errors in ".concat(t,"\n").concat(n))(),Ay.warn("GLSL compilation warnings in ".concat(t,"\n").concat(r))(),new Error("GLSL compilation errors in ".concat(t))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class u_ extends c_{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"===typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class d_ extends c_{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"===typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const A_=5120,h_=5121,f_=5122,p_=5123,g_=0,m_=1,v_=2,b_=3,y_=4,x_=5,w_=6,__=5126,S_=35664,C_=35665,E_=35666,M_=5124,P_=35667,T_=35668,k_=35669,B_=5125,O_=36294,I_=36295,R_=36296,L_=35670,D_=35671,F_=35672,N_=35673,z_=35674,j_=35675,U_=35676,G_=35685,V_=35686,H_=35687,W_=35688,Q_=35689,J_=35690,K_={[__]:[__,1,"float"],[S_]:[__,2,"vec2"],[C_]:[__,3,"vec3"],[E_]:[__,4,"vec4"],[M_]:[M_,1,"int"],[P_]:[M_,2,"ivec2"],[T_]:[M_,3,"ivec3"],[k_]:[M_,4,"ivec4"],[B_]:[B_,1,"uint"],[O_]:[B_,2,"uvec2"],[I_]:[B_,3,"uvec3"],[R_]:[B_,4,"uvec4"],[L_]:[__,1,"bool"],[D_]:[__,2,"bvec2"],[F_]:[__,3,"bvec3"],[N_]:[__,4,"bvec4"],[z_]:[__,8,"mat2"],[G_]:[__,8,"mat2x3"],[V_]:[__,8,"mat2x4"],[j_]:[__,12,"mat3"],[H_]:[__,12,"mat3x2"],[W_]:[__,12,"mat3x4"],[U_]:[__,16,"mat4"],[Q_]:[__,16,"mat4x2"],[J_]:[__,16,"mat4x3"]};function X_(e){switch(e){case g_:return g_;case m_:case b_:case v_:return m_;case y_:case x_:case w_:return y_;default:return yx(!1),0}}function Y_(e){const t=K_[e];if(!t)return null;const[n,r]=t;return{type:n,components:r}}function q_(e,t){switch(e){case A_:case h_:case f_:case p_:e=__}for(const n in K_){const[r,i,o]=K_[n];if(r===e&&i===t)return{glType:n,name:o}}return null}class Z_{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,n=t.getProgramParameter(e.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=t.getActiveAttrib(e.handle,r),s=t.getAttribLocation(e.handle,n);s>=0&&this._addAttribute(s,n,i,o)}this.attributeInfos.sort(((e,t)=>e.location-t.location))}_readVaryingsFromProgram(e){const{gl:t}=e;if(!my(t))return;const n=t.getProgramParameter(e.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,n,i,o)}this.varyingInfos.sort(((e,t)=>e.location-t.location))}_addAttribute(e,t,n,r){const{type:i,components:o}=Y_(n),s={type:i,size:r*o};this._inferProperties(e,t,s);const a={location:e,name:t,accessor:new Fx(s)};this.attributeInfos.push(a),this.attributeInfosByLocation[e]=a,this.attributeInfosByName[a.name]=a}_inferProperties(e,t,n){/instance/i.test(t)&&(n.divisor=1)}_addVarying(e,t,n,r){const{type:i,components:o}=Y_(n),s={location:e,name:t,accessor:new Fx({type:i,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}const $_=35981,eS=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class tS extends Tx{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",eS),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:n,fs:r,varyings:i,bufferMode:o=$_}=e;return this.hash=t||"",this.vs="string"===typeof n?new u_(this.gl,{id:"".concat(e.id,"-vs"),source:n}):n,this.fs="string"===typeof r?new d_(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,yx(this.vs instanceof u_),yx(this.fs instanceof d_),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(by(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Z_(this),this.setProps(e)}delete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:n=4,vertexCount:r,offset:i=0,start:o,end:s,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:d=null,transformFeedback:A,framebuffer:h,parameters:f={},uniforms:p,samplers:g}=e;if((p||g)&&(Ay.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(p||{})),Ay.priority>=t){const e=h?h.id:"default",i="mode=".concat(wx(this.gl,n)," verts=").concat(r," ")+"instances=".concat(c," indexType=").concat(wx(this.gl,l)," ")+"isInstanced=".concat(u," isIndexed=").concat(a," ")+"Framebuffer=".concat(e);Ay.log(t,i)()}return yx(d),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||u&&0===c)&&(d.bindForDraw(r,c,(()=>{if(void 0!==h&&(f=Object.assign({},f,{framebuffer:h})),A){const e=X_(n);A.begin(e)}this._bindTextures(),ax(this.gl,f,(()=>{a&&u?this.gl2.drawElementsInstanced(n,r,l,i,c):a&&my(this.gl)&&!isNaN(o)&&!isNaN(s)?this.gl2.drawRangeElements(n,o,s,r,l,i):a?this.gl.drawElements(n,r,l,i):u?this.gl2.drawArraysInstanced(n,i,r,c):this.gl.drawArrays(n,i,r)})),A&&A.end()})),!0)}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ay.priority>=2&&function(e,t,n){for(const r in e){const i=e[r];if((!n||Boolean(n[r]))&&!qw(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),i),new Error("".concat(t," Bad uniform ").concat(r))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const n=e[t],r=this._uniformSetters[t];if(r){let e=n,i=!1;if(e instanceof zw&&(e=e.texture),e instanceof Jx)if(i=this.uniforms[t]!==n,i){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=e,{textureIndex:i}=r;n.bind(i),e=i,this._textureUniforms[t]=n}else e=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(e)||i)&&Zw(this.uniforms,t,n)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const n=this._textureUniforms[t];n.update(),e=e&&n.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),n={};for(const r of t){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new u_({handle:r});break;case 35632:n.fs=new d_({handle:r})}}return n}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const e=this._getName();this.id=Sx(e)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Ay.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Ay.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||Ay.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));e.validateProgram(this.handle);if(!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const n=this.gl.getActiveUniform(this.handle,t),{name:r}=Yw(n.name);let i=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=Xw(e,i,n),n.size>1)for(let t=0;t<n.size;t++)i=e.getUniformLocation(this.handle,"".concat(r,"[").concat(t,"]")),this._uniformSetters["".concat(r,"[").concat(t,"]")]=Xw(e,i,n)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class nS{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new nS(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find((t=>t.name===e.name))||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"===typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((e=>e.name!==t)),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:n="",defines:r={},inject:i={},varyings:o=[],bufferMode:s=35981,transpileToGLSL100:a=!1}=e,l=this._getModuleList(e.modules),c=this._getHash(t),u=this._getHash(n),d=l.map((e=>this._getHash(e.name))).sort(),A=o.map((e=>this._getHash(e))),h=Object.keys(r).sort(),f=Object.keys(i).sort(),p=[],g=[];for(const v of h)p.push(this._getHash(v)),p.push(this._getHash(r[v]));for(const v of f)g.push(this._getHash(v)),g.push(this._getHash(i[v]));const m="".concat(c,"/").concat(u,"D").concat(p.join("/"),"M").concat(d.join("/"),"I").concat(g.join("/"),"V").concat(A.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(a?"T":"");if(!this._programCache[m]){const e=function(e,t){const{vs:n,fs:r}=t,i=Mb(t.modules||[]);return{gl:e,vs:uy(e,Object.assign({},t,{source:n,type:yb,modules:i})),fs:uy(e,Object.assign({},t,{source:r,type:xb,modules:i})),getUniforms:dy(i)}}(this.gl,{vs:t,fs:n,modules:l,inject:i,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:a});this._programCache[m]=new tS(this.gl,{hash:m,vs:e.vs,fs:e.fs,varyings:o,bufferMode:s}),this._getUniforms[m]=e.getUniforms||(e=>{}),this._useCounts[m]=0}return this._useCounts[m]++,this._programCache[m]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),n={};let r=0;for(let i=0,o=this._defaultModules.length;i<o;++i){const e=this._defaultModules[i],o=e.name;t[r++]=e,n[o]=!0}for(let i=0,o=e.length;i<o;++i){const o=e[i],s=o.name;n[s]||(t[r++]=o,n[s]=!0)}return t.length=r,t}}const rS={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},iS="#define SMOOTH_EDGE_RADIUS 0.5",oS={name:"geometry",vs:"\n".concat(iS,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(iS,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},sS=Object.keys(db).map((e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(db[e],";"))).join(""),aS=Object.keys(Ab).map((e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Ab[e],";"))).join(""),lS=Object.keys(hb).map((e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(hb[e],";"))).join(""),cS="".concat(sS,"\n").concat(aS,"\n").concat(lS,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n");function uS(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function dS(e){let t,n={};return r=>{for(const i in r)if(!uS(r[i],n[i])){t=e(r),n=r;break}return t}}const AS=[0,0,0,0],hS=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],fS=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],pS=[0,0,0],gS=[0,0,0],mS=dS((function(e){let{viewport:t,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:i}=e;const{projectionCenter:o,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=function(e,t,n){const{viewMatrixUncentered:r,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:s}=e,a=AS,l=AS,c=e.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:A}=vS(e,t,n);A&&(l=e.projectPosition(u||d),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=xv([],l,s),o=r||o,s=sv([],i,o),s=sv([],s,hS));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:u}}(t,r,i),d=t.getDistanceScales(),A=[t.width*n,t.height*n],h=xv([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,f={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:a.slice(0,3),project_uCenter:o,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:A,project_uDevicePixelRatio:n,project_uFocalDistance:h,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:pS,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:fS,project_uCameraPosition:l};if(u){const e=t.getDistanceScales(u);switch(r){case db.METER_OFFSETS:f.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,f.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case db.LNGLAT:case db.LNGLAT_OFFSETS:t._pseudoMeters||(f.project_uCommonUnitsPerMeter=e.unitsPerMeter),f.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,f.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case db.CARTESIAN:f.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],f.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return f}));function vS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gS;n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=t===db.LNGLAT_OFFSETS||t===db.METER_OFFSETS?n:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Ab.WEB_MERCATOR:t!==db.LNGLAT&&t!==db.CARTESIAN||(r=[0,0,0],o=!1);break;case Ab.WEB_MERCATOR_AUTO_OFFSET:t===db.LNGLAT?i=r:t===db.CARTESIAN&&(i=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],r=e.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Ab.IDENTITY:i=e.position.map(Math.fround),i[2]=i[2]||0;break;case Ab.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}const bS={};const yS={name:"project",dependencies:[rS,oS],vs:cS,getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bS;return"viewport"in e?function(e){let{viewport:t,devicePixelRatio:n=1,modelMatrix:r=null,coordinateSystem:i=db.DEFAULT,coordinateOrigin:o=gS,autoWrapLongitude:s=!1}=e;i===db.DEFAULT&&(i=t.isGeospatial?db.LNGLAT:db.CARTESIAN);const a=mS({viewport:t,devicePixelRatio:n,coordinateSystem:i,coordinateOrigin:o});return a.project_uWrapLongitude=s,a.project_uModelMatrix=r||fS,a}(e):{}}},xS=[yS],wS=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function _S(e){const t=nS.getDefaultProgramManager(e);for(const n of xS)t.addDefaultModule(n);for(const n of wS)t.addShaderHook(n);return t}class SS{constructor(e){let{deck:t,stats:n,viewport:r,timeline:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pt(this,"layers",void 0),pt(this,"context",void 0),pt(this,"resourceManager",void 0),pt(this,"_lastRenderedLayers",[]),pt(this,"_needsRedraw",!1),pt(this,"_needsUpdate",!1),pt(this,"_nextLayers",null),pt(this,"_debug",!1),pt(this,"activateViewport",(e=>{Lp("layerManager.activateViewport",this,e),e&&(this.context.viewport=e)})),this.layers=[],this.resourceManager=new xm({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&_S(e),stats:n||new Up({id:"deck.gl"}),viewport:r||new bb({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new Zf,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers(){let{layerIds:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?this.layers.filter((t=>e.find((e=>0===t.id.indexOf(e))))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){Lp("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const n=Dp(e,Boolean);for(const r of n)r.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,n){n.raiseError(t,"".concat(e," of ").concat(n))}_updateLayers(e,t){const n={};for(const o of e)n[o.id]?Op.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;const r=[];this._updateSublayersRecursively(t,n,r),this._finalizeOldLayers(n);let i=!1;for(const o of r)if(o.hasUniformTransition()){i="Uniform transition in ".concat(o);break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(e,t,n){for(const i of e){i.context=this.context;const e=t[i.id];null===e&&Op.warn("Multiple new layers with same id ".concat(i.id))(),t[i.id]=null;let o=null;try{this._debug&&e!==i&&i.validateProps(),e?(this._transferLayerState(e,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite?i.getSubLayers():null}catch(r){this._handleError("matching",r,i)}o&&this._updateSublayersRecursively(o,t,n)}}_finalizeOldLayers(e){for(const t in e){const n=e[t];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=tp}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle=ep,t!==e&&(e.lifecycle=np)}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=rp;try{e._finalize(),e.lifecycle=ip}catch(t){this._handleError("finalization",t,e)}}}function CS(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!CS(e[r],t[r],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const o of r){if(!t.hasOwnProperty(o))return!1;if(!CS(e[o],t[o],n-1))return!1}return!0}return!1}class ES{constructor(e){pt(this,"width",void 0),pt(this,"height",void 0),pt(this,"views",void 0),pt(this,"viewState",void 0),pt(this,"controllers",void 0),pt(this,"timeline",void 0),pt(this,"_viewports",void 0),pt(this,"_viewportMap",void 0),pt(this,"_isUpdating",void 0),pt(this,"_needsRedraw",void 0),pt(this,"_needsUpdate",void 0),pt(this,"_eventManager",void 0),pt(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter((t=>t.containsPixel(e))):this._viewports}getViews(){const e={};return this.views.forEach((t=>{e[t.id]=t})),e}getView(e){return this.views.find((t=>t.id===e))}getViewState(e){const t="string"===typeof e?this.getView(e):e,n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,t){const n=this.getViewports(),r={x:e[0],y:e[1]};for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.containsPixel(r)){const n=e.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Dp(e,Boolean);this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){if(e){!CS(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e}else Op.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:t=>{var n;return null===(n=this.getView(e.id))||void 0===n?void 0:n.makeViewport({viewState:t,width:this.width,height:this.height})}})}_updateController(e,t,n,r){const i=e.controller;if(i&&n){const o={...t,...i,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return r&&r.constructor===i.type||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=e.length;r--;){const i=e[r],o=this.getViewState(i),s=i.makeViewport({viewState:o,width:this.width,height:this.height});let a=t[i.id];const l=Boolean(i.controller);l&&!a&&(n=!0),!n&&l||!a||(a.finalize(),a=null),this.controllers[i.id]=this._updateController(i,o,s,a),s&&this._viewports.unshift(s)}for(const r in t){const e=t[r];e&&!this.controllers[r]&&e.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)}))}_diffViews(e,t){return e.length!==t.length||e.some(((n,r)=>!e[r].equals(t[r])))}}const MS=/([0-9]+\.?[0-9]*)(%|px)/;function PS(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=MS.exec(e);if(t&&t.length>=3){const e="%"===t[2],n=parseFloat(t[1]);return{position:e?n/100:n,relative:e}}default:throw new Error("Could not parse position string ".concat(e))}}function TS(e,t){return e.relative?Math.round(e.position*t):e.position}function kS(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class BS{constructor(e){pt(this,"id",void 0),pt(this,"viewportInstance",void 0),pt(this,"_x",void 0),pt(this,"_y",void 0),pt(this,"_width",void 0),pt(this,"_height",void 0),pt(this,"_padding",void 0),pt(this,"props",void 0);const{id:t,x:n=0,y:r=0,width:i="100%",height:o="100%",padding:s=null,viewportInstance:a}=e||{};kS(!a||a instanceof bb),this.viewportInstance=a,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=PS(n),this._y=PS(r),this._width=PS(i),this._height=PS(o),this._padding=s&&{left:PS(s.left||0),right:PS(s.right||0),top:PS(s.top||0),bottom:PS(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&CS(this.props,e.props,2))}makeViewport(e){let{width:t,height:n,viewState:r}=e;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:t,height:n});return i.height&&i.width?new this.ViewportType({...r,...this.props,...i}):null}getViewStateId(){const{viewState:e}=this.props;return"string"===typeof e?e:(null===e||void 0===e?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const e in this.props.viewState)"id"!==e&&(t[e]=this.props.viewState[e]);return t}return e}getDimensions(e){let{width:t,height:n}=e;const r={x:TS(this._x,t),y:TS(this._y,n),width:TS(this._width,t),height:TS(this._height,n)};return this._padding&&(r.padding={left:TS(this._padding.left,t),top:TS(this._padding.top,n),right:TS(this._padding.right,t),bottom:TS(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"===typeof e?{type:e}:{type:this.ControllerType,...e}:null}}class OS extends bb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:t=0,longitude:n=0,zoom:r=0,pitch:i=0,bearing:o=0,nearZMultiplier:s=.1,farZMultiplier:a=1.01,nearZ:l,farZ:c,orthographic:u=!1,projectionMatrix:d,repeat:A=!1,worldOffset:h=0,position:f,padding:p,legacyMeterSizes:g=!1}=e;let{width:m,height:v,altitude:b=1.5}=e;const y=Math.pow(2,r);let x;m=m||1,v=v||1;let w=null;if(d)b=d[5]/2,x=eb(b);else{let n;if(e.fovy?(x=e.fovy,b=tb(x)):x=eb(b),p){const{top:e=0,bottom:t=0}=p;n=[0,Em((e+v-t)/2,0,v)-v/2]}w=$v({width:m,height:v,scale:y,center:f&&[0,0,f[2]*Yv(t)],offset:n,pitch:i,fovy:x,nearZMultiplier:s,farZMultiplier:a}),Number.isFinite(l)&&(w.near=l),Number.isFinite(c)&&(w.far=c)}let _=function(e){const{height:t,pitch:n,bearing:r,altitude:i,scale:o,center:s}=e,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];av(a,a,[0,0,-i]),cv(a,a,-n*jv),uv(a,a,r*jv);const l=o/t;return lv(a,a,[l,l,l]),s&&av(a,a,function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}([],s)),a}({height:v,pitch:i,bearing:o,scale:y,altitude:b});if(h){_=(new Pv).translate([512*h,0,0]).multiplyLeft(_)}super({...e,width:m,height:v,viewMatrix:_,longitude:n,latitude:t,zoom:r,...w,fovy:x,focalDistance:b}),pt(this,"longitude",void 0),pt(this,"latitude",void 0),pt(this,"pitch",void 0),pt(this,"bearing",void 0),pt(this,"altitude",void 0),pt(this,"fovy",void 0),pt(this,"orthographic",void 0),pt(this,"_subViewports",void 0),pt(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=n,this.zoom=r,this.pitch=i,this.bearing=o,this.altitude=b,this.fovy=x,this.orthographic=u,this._subViewports=A?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let r=t;r<=n;r++){const e=r?new OS({...this,worldOffset:r}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*Yv(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)/Yv(n)]}addMetersToLngLat(e,t){return Zv(e,t)}panByPosition(e,t){const n=rb(t,this.pixelUnprojectionMatrix),r=fv([],this.projectFlat(e),function(e,t){return e[0]=-t[0],e[1]=-t[1],e}([],n)),i=fv([],this.center,r),[o,s]=this.unprojectFlat(i);return{longitude:o,latitude:s}}getBounds(){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:r,unproject:i}=e,o={targetZ:t},s=i([0,r],o),a=i([n,r],o);let l,c;return(e.fovy?.5*e.fovy*ob:Math.atan(.5/e.altitude))>(90-e.pitch)*ob-.01?(l=sb(e,0,t),c=sb(e,n,t)):(l=i([0,0],o),c=i([n,0],o)),[s,a,c,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:s}=ib({width:n,height:r,bounds:e,...t});return new OS({width:n,height:r,longitude:i,latitude:o,zoom:s})}}pt(OS,"displayName","WebMercatorViewport");class IS{constructor(e){pt(this,"_inProgress",void 0),pt(this,"_handle",void 0),pt(this,"_timeline",void 0),pt(this,"time",void 0),pt(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,n;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(n=this.settings).onStart)||void 0===t||t.call(n,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const RS=()=>{},LS=2,DS=3,FS=e=>e,NS=1;class zS{constructor(e){pt(this,"getControllerState",void 0),pt(this,"props",void 0),pt(this,"propsInTransition",void 0),pt(this,"transition",void 0),pt(this,"onViewStateChange",void 0),pt(this,"onStateChange",void 0),pt(this,"_onTransitionUpdate",(e=>{const{time:t,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:s}}=e,a=s(t/o),l=n.interpolateProps(r,i,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new IS(e.timeline),this.onViewStateChange=e.onViewStateChange||RS,this.onStateChange=e.onStateChange||RS}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let r=n;if(this.transition.inProgress){const{interruption:e,endProps:t}=this.transition.settings;r={...n,...e===LS?t:this.propsInTransition||n}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:n}=e;return(t>0||"auto"===t)&&Boolean(n)}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?this.transition.settings.interruption===DS||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const n=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(n),i=t.transitionInterpolator,o=i.getDuration?i.getDuration(e,t):t.transitionDuration;if(0===o)return;const s=i.initializeProps(e,r);this.propsInTransition={};const a={duration:o,easing:t.transitionEasing||FS,interpolator:i,interruption:t.transitionInterruption||NS,startProps:s.start,endProps:s.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null===e||void 0===e||e(t)}}}class jS{constructor(e){pt(this,"_propsToCompare",void 0),pt(this,"_propsToExtract",void 0),pt(this,"_requiredProps",void 0);const{compare:t,extract:n,required:r}=e;this._propsToCompare=t,this._propsToExtract=n||t,this._requiredProps=r}arePropsEqual(e,t){for(const n of this._propsToCompare)if(!(n in e)||!(n in t)||!Pm(e[n],t[n]))return!1;return!0}initializeProps(e,t){const n={},r={};for(const i of this._propsToExtract)(i in e||i in t)&&(n[i]=e[i],r[i]=t[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach((t=>{const n=e[t];kS(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))}))}}const US=["longitude","latitude","zoom","bearing","pitch"],GS=["longitude","latitude","zoom"];class VS extends jS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:US,required:GS},super(n.transitionProps),pt(this,"opts",void 0),this.opts=n}initializeProps(e,t){const n=super.initializeProps(e,t),{makeViewport:r,around:i}=this.opts;if(r&&i){const o=r(e),s=r(t),a=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:t.width,height:t.height})}return n}interpolateProps(e,t,n){const r={};for(const i of this._propsToExtract)r[i]=Mm(e[i]||0,t[i]||0,n);if(t.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...t,...r});Object.assign(r,i.panByPosition(t.aroundPosition,Mm(e.around,t.around,n)))}return r}}const HS={transitionDuration:0},WS=e=>1-(1-e)*(1-e),QS=["wheel"],JS=["panstart","panmove","panend"],KS=["pinchstart","pinchmove","pinchend"],XS=["tripanstart","tripanmove","tripanend"],YS=["doubletap"],qS=["keydown"],ZS={};class $S{constructor(e){pt(this,"props",void 0),pt(this,"state",{}),pt(this,"transitionManager",void 0),pt(this,"eventManager",void 0),pt(this,"onViewStateChange",void 0),pt(this,"onStateChange",void 0),pt(this,"makeViewport",void 0),pt(this,"_controllerState",void 0),pt(this,"_events",{}),pt(this,"_interactionState",{isDragging:!1}),pt(this,"_customEvents",[]),pt(this,"_eventStartBlocked",null),pt(this,"_panMove",!1),pt(this,"invertPan",!1),pt(this,"dragMode","rotate"),pt(this,"inertia",0),pt(this,"scrollZoom",!0),pt(this,"dragPan",!0),pt(this,"dragRotate",!0),pt(this,"doubleClickZoom",!0),pt(this,"touchZoom",!0),pt(this,"touchRotate",!1),pt(this,"keyboard",!0),this.transitionManager=new zS({...e,getControllerState:e=>new this.ControllerState(e),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events){var e;if(this._events[t])null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:n}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-n]}isPointInBounds(e,t){const{width:n,height:r}=this.props;if(t&&t.handled)return!1;const i=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=r;return i&&t&&t.stopPropagation(),i}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout((()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)}),e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(QS,c&&n),this.toggleEvents(JS,c),this.toggleEvents(KS,c&&(s||a)),this.toggleEvents(XS,c&&a),this.toggleEvents(YS,c&&o),this.toggleEvents(qS,c&&l),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach((e=>{this._events[e]!==t&&(this._events[e]=t,t?this.eventManager.on(e,this.handleEvent):this.eventManager.off(e,this.handleEvent))}))}updateViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={...e.getViewportProps(),...t},i=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),i){const e=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:e})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:t});return this._panMove=n,this.updateViewport(r,HS,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,HS,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:WS},{isDragging:!1,isPanning:!0})}else{const e=this.controllerState.panEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),n=this.controllerState.rotate({pos:t});return this.updateViewport(n,HS,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:WS},{isDragging:!1,isRotating:!0})}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;e.srcEvent.preventDefault();const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=e;let o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.rotateStart({pos:t});return this.updateViewport(n,HS,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const n=this.controllerState.rotate({pos:t});return this.updateViewport(n,HS,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const n=this.getCenter(e),r=[n[0],n[1]+=e.velocityY*t/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:WS},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return ZS._startPinchRotation=e.rotation,ZS._lastPinchEvent=e,this.updateViewport(n,HS,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:n}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=e;t=t.rotate({deltaAngleX:ZS._startPinchRotation-n})}return this.updateViewport(t,HS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ZS._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:n}=ZS;if(this.touchZoom&&t&&n&&e.scale!==n.scale){const r=this.getCenter(e);let i=this.controllerState.rotateEnd();const o=Math.log2(e.scale),s=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),a=Math.pow(2,o+s*t/2);i=i.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:WS},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const e=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ZS._startPinchRotation=null,ZS._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const l={};switch(e.srcEvent.code){case"Minus":a=t?s.zoomOut(n).zoomOut(n):s.zoomOut(n),l.isZooming=!0;break;case"Equal":a=t?s.zoomIn(n).zoomIn(n):s.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":t?(a=s.rotateLeft(i),l.isRotating=!0):(a=s.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(a=s.rotateRight(i),l.isRotating=!0):(a=s.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(a=s.rotateUp(o),l.isRotating=!0):(a=s.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(a=s.rotateDown(o),l.isRotating=!0):(a=s.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new VS({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:HS}}class eC{constructor(e,t){pt(this,"_viewportProps",void 0),pt(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class tC extends eC{constructor(e){const{width:t,height:n,latitude:r,longitude:i,zoom:o,bearing:s=0,pitch:a=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:u=20,minZoom:d=0,maxPitch:A=60,minPitch:h=0,startPanLngLat:f,startZoomLngLat:p,startRotatePos:g,startBearing:m,startPitch:v,startZoom:b,normalize:y=!0}=e;kS(Number.isFinite(i)),kS(Number.isFinite(r)),kS(Number.isFinite(o)),super({width:t,height:n,latitude:r,longitude:i,zoom:o,bearing:s,pitch:a,altitude:l,maxZoom:u,minZoom:d,maxPitch:A,minPitch:h,normalize:y,position:c},{startPanLngLat:f,startZoomLngLat:p,startRotatePos:g,startBearing:m,startPitch:v,startZoom:b}),pt(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart(e){let{pos:t}=e;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan(e){let{pos:t,startPos:n}=e;const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,t);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(e){let{pos:t}=e;return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(e){let{pos:t,deltaAngleX:n=0,deltaAngleY:r=0}=e;const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||void 0===o||void 0===s)return this;let a;return a=t?this._getNewRotation(t,i,s,o):{bearing:o+n,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(e){let{pos:t}=e;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom(e){let{pos:t,startPos:n,scale:r}=e,{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(t)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=Em(l,a,s);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(e)}zoomOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/e)}moveLeft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([e,0])}moveRight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-e,0])}moveUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,e])}moveDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-e])}rotateLeft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(e){const{maxZoom:t,minZoom:n,zoom:r}=e;e.zoom=Em(r,n,t);const{maxPitch:i,minPitch:o,pitch:s}=e;e.pitch=Em(s,o,i);const{normalize:a=!0}=e;return a&&Object.assign(e,function(e){const{width:t,height:n,pitch:r=0}=e;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=e;(i<-180||i>180)&&(i=Iv(i+180,360)-180),(a<-180||a>180)&&(a=Iv(a+180,360)-180);const l=Dv(n/512);if(s<=l)s=l,o=0;else{const e=n/2/Math.pow(2,s),t=Xv([0,e])[1];if(o<t)o=t;else{const t=Xv([0,512-e])[1];o>t&&(o=t)}}return{width:t,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.zoom({pos:[t/2,n/2],scale:e})}_panFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.pan({startPos:[t/2,n/2],pos:[t/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,n,r){const i=e[0]-t[0],o=e[1]-t[1],s=e[1],a=t[1],{width:l,height:c}=this.getViewportProps(),u=i/l;let d=0;o>0?Math.abs(c-a)>5&&(d=o/(a-c)*1.2):o<0&&a>5&&(d=1-s/a),d=Em(d,-1,1);const{minPitch:A,maxPitch:h}=this.getViewportProps();let f=n;return d>0?f=n+d*(h-n):d<0&&(f=n-d*(A-n)),{pitch:f,bearing:r+180*u}}}class nC extends $S{constructor(){super(...arguments),pt(this,"ControllerState",tC),pt(this,"transition",{transitionDuration:300,transitionInterpolator:new VS({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),pt(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e);(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class rC extends BS{get ViewportType(){return OS}get ControllerType(){return nC}}pt(rC,"displayName","MapView");const iC=[255,255,255],oC=1;let sC=0;class aC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt(this,"id",void 0),pt(this,"color",void 0),pt(this,"intensity",void 0),pt(this,"type","ambient");const{color:t=iC}=e,{intensity:n=oC}=e;this.id=e.id||"ambient-".concat(sC++),this.color=t,this.intensity=n}}const lC=[255,255,255],cC=1,uC=[0,0,-1];let dC=0;class AC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt(this,"id",void 0),pt(this,"color",void 0),pt(this,"intensity",void 0),pt(this,"type","directional"),pt(this,"direction",void 0),pt(this,"shadow",void 0);const{color:t=lC}=e,{intensity:n=cC}=e,{direction:r=uC}=e,{_shadow:i=!1}=e;this.id=e.id||"directional-".concat(dC++),this.color=t,this.intensity=n,this.type="directional",this.direction=new qm(r).normalize().toArray(),this.shadow=i}getProjectedLight(e){return this}}class hC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};pt(this,"id",void 0),pt(this,"gl",void 0),pt(this,"props",void 0);const{id:n}=t;this.id=n,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class fC extends hC{constructor(){super(...arguments),pt(this,"_lastRenderIndex",-1)}render(e){return ox(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:n,viewports:r,views:i,onViewportActive:o,clearStack:s=!0,clearCanvas:a=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;a&&function(e,t){const n=t?t.width:e.drawingBufferWidth,r=t?t.height:e.drawingBufferHeight;ox(e,{viewport:[0,0,n,r]}),e.clear(16640)}(l,t),s&&(this._lastRenderIndex=-1);const c=[];for(const u of r){const r=i&&i[u.id];null===o||void 0===o||o(u);const s=this._getDrawLayerParams(u,e),a=u.subViewports||[u];for(const i of a){const o=this._drawLayersInViewport(l,{target:t,moduleParameters:n,viewport:i,view:r,pass:e.pass,layers:e.layers},s);c.push(o)}}return c}_getDrawLayerParams(e,t){let{layers:n,pass:r,isPicking:i=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:l}=t,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=[],d=pC(this._lastRenderIndex+1),A={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:s},h={};for(let f=0;f<n.length;f++){const t=n[f],i=this._shouldDrawLayer(t,A,o,h),s={shouldDrawLayer:i};i&&!c&&(s.layerRenderIndex=d(t,i),s.moduleParameters=this._getModuleParameters(t,a,r,l),s.layerParameters=this.getLayerParameters(t,f,e)),u[f]=s}return u}_drawLayersInViewport(e,t,n){let{layers:r,moduleParameters:i,pass:o,target:s,viewport:a,view:l}=t;const c=function(e,t){let{moduleParameters:n,target:r,viewport:i}=t;const o=r&&"default-framebuffer"!==r.id,s=n&&n.devicePixelRatio||lx(e),a=o?r.height:e.drawingBufferHeight,l=i;return[l.x*s,a-(l.y+l.height)*s,l.width*s,l.height*s]}(e,{moduleParameters:i,target:s,viewport:a});if(l&&l.props.clear){const t=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;ax(e,{scissorTest:!0,scissor:c},(()=>tw(e,t)))}const u={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};ox(e,{viewport:c});for(let A=0;A<r.length;A++){const e=r[A],{shouldDrawLayer:t,layerRenderIndex:i,moduleParameters:s,layerParameters:l}=n[A];if(t&&e.props.pickable&&u.pickableCount++,e.isComposite)u.compositeCount++;else if(t){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,i),s.viewport=a;try{e._drawLayer({moduleParameters:s,uniforms:{layerIndex:i},parameters:l})}catch(d){e.raiseError(d,"drawing ".concat(e," to ").concat(o))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,n){return e.props.parameters}_shouldDrawLayer(e,t,n,r){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;t.layer=e;let i=e.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(t))return!1;t.layer=i,i=i.parent}if(n){const e=t.layer.id;if(e in r||(r[e]=n(t)),!r[e])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,n,r){var i;const o=Object.assign(Object.create((null===(i=e.internalState)||void 0===i?void 0:i.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:lx(this.gl)});if(t)for(const a of t){var s;Object.assign(o,null===(s=a.getModuleParameters)||void 0===s?void 0:s.call(a,e))}return Object.assign(o,this.getModuleParameters(e,t),r)}}function pC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in t)&&r(i.parent,!1),l in n){const e=n[l]=n[l]||pC(t[l],t);c=e(i,o),n[a]=e}else Number.isFinite(s)?(c=s+(t[l]||0),n[a]=null):c=e;return o&&c>=e&&(e=c+1),t[a]=c,c};return r}class gC extends fC{constructor(e,t){super(e,t),pt(this,"shadowMap",void 0),pt(this,"depthBuffer",void 0),pt(this,"fbo",void 0),this.shadowMap=new Xx(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Zx(e,{format:33189,width:1,height:1}),this.fbo=new zw(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;ax(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=e.viewports[0],r=lx(this.gl),i=n.width*r,o=n.height*r;i===t.width&&o===t.height||t.resize({width:i,height:o}),super.render({...e,target:t,pass:"shadow"})}))}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const mC=dS((function(e){let{viewport:t,center:n}=e;return new Pv(t.viewProjectionMatrix).invert().transform(n)})),vC=dS((function(e){let{viewport:t,shadowMatrices:n}=e;const r=[],i=t.pixelUnprojectionMatrix,o=t.isGeospatial?void 0:1,s=[[0,0,o],[t.width,0,o],[0,t.height,o],[t.width,t.height,o],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((e=>function(e,t){const[n,r,i]=e,o=rb([n,r,i],t);if(Number.isFinite(i))return o;return[o[0],o[1],0]}(e,i)));for(const a of n){const e=a.clone().translate(new qm(t.center).negate()),n=s.map((t=>e.transform(t))),i=(new Pv).ortho({left:Math.min(...n.map((e=>e[0]))),right:Math.max(...n.map((e=>e[0]))),bottom:Math.min(...n.map((e=>e[1]))),top:Math.max(...n.map((e=>e[1]))),near:Math.min(...n.map((e=>-e[2]))),far:Math.max(...n.map((e=>-e[2])))});r.push(i.multiplyRight(a))}return r})),bC=[0,0,0,1],yC=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const xC={name:"shadow",dependencies:[yS],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?function(e,t){const{shadowEnabled:n=!0}=e;if(!n||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||bC,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=mC({viewport:e.viewport,center:t.project_uCenter}),o=[],s=vC({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let a=0;a<e.shadowMatrices.length;a++){const n=s[a],r=n.clone().translate(new qm(e.viewport.center).negate());t.project_uCoordinateSystem===db.LNGLAT&&t.project_uProjectionMode===Ab.WEB_MERCATOR?(s[a]=r,o[a]=i):(s[a]=n.clone().multiplyRight(yC),o[a]=r.transform(i))}for(let a=0;a<s.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],r["shadow_uProjectCenters[".concat(a,"]")]=o[a],e.shadowMaps&&e.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=e.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=e.dummyShadowMap;return r}(e,t):{}}},wC={color:[255,255,255],intensity:1},_C=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],SC=[0,0,0,200/255];class CC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt(this,"id","lighting-effect"),pt(this,"props",void 0),pt(this,"shadowColor",SC),pt(this,"shadow",void 0),pt(this,"ambientLight",void 0),pt(this,"directionalLights",void 0),pt(this,"pointLights",void 0),pt(this,"shadowPasses",[]),pt(this,"shadowMaps",[]),pt(this,"dummyShadowMap",null),pt(this,"programManager",void 0),pt(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const t in e){const n=e[t];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((e=>e.shadow)),this.props=e}preRender(e,t){let{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}=t;if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=nS.getDefaultProgramManager(e),xC&&this.programManager.addDefaultModule(xC)),this.dummyShadowMap||(this.dummyShadowMap=new Xx(e,{width:1,height:1}));for(let e=0;e<this.shadowPasses.length;e++){this.shadowPasses[e].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:e,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((t=>t.getProjectedLight({layer:e}))),pointLights:this.pointLights.map((t=>t.getProjectedLight({layer:e})))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(xC),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const n=(new Pv).lookAt({eye:new qm(t.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const n=new gC(e);this.shadowPasses[t]=n,this.shadowMaps[t]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:n}=this;e||0!==t.length||0!==n.length||(this.ambientLight=new aC(wC),this.directionalLights.push(new AC(_C[0]),new AC(_C[1])))}}const EC=new CC;class MC{constructor(){pt(this,"effects",void 0),pt(this,"_resolvedEffects",[]),pt(this,"_defaultEffects",[]),pt(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const t=this._defaultEffects;if(!t.find((t=>t.id===e.id))){const n=t.findIndex((t=>function(e,t){var n,r;return(null!==(n=e.order)&&void 0!==n?n:1/0)-(null!==(r=t.order)&&void 0!==r?r:1/0)}(t,e)>0));n<0?t.push(e):t.splice(n,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(CS(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._resolvedEffects}_setEffects(e){const t={};for(const r of this.effects)t[r.id]=r;const n=[];for(const r of e){const e=t[r.id];e&&e!==r?e.setProps?(e.setProps(r.props),n.push(e)):(e.cleanup(),n.push(r)):n.push(r),delete t[r.id]}for(const r in t)t[r].cleanup();this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some((e=>e instanceof CC))||this._resolvedEffects.push(EC),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class PC extends fC{shouldDrawLayer(e){const{operation:t}=e.props;return t.includes("draw")||t.includes("terrain")}}const TC={blendFunc:[1,0,32771,0],blendEquation:32774};class kC extends fC{constructor(){super(...arguments),pt(this,"pickZ",void 0),pt(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer(e){let{layers:t,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:c,height:u},cullRect:d,effects:A,pass:h="picking",pickZ:f,moduleParameters:p}=e;const g=this.gl;this.pickZ=f;const m=this._resetColorEncoder(f),v=ax(g,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...TC,blend:!f},(()=>super.render({target:s,layers:t,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:d,effects:null===A||void 0===A?void 0:A.filter((e=>e.useInPicking)),pass:h,isPicking:!0,moduleParameters:p})));this._colorEncoderState=null;return{decodePickingColor:m&&BC.bind(null,m),stats:v}}shouldDrawLayer(e){const{pickable:t,operation:n}=e.props;return t&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,n){const r={...e.props.parameters},{pickable:i,operation:o}=e.props;return this._colorEncoderState?i&&o.includes("draw")&&(Object.assign(r,TC),r.blend=!0,r.blendColor=function(e,t,n){const{byLayer:r,byAlpha:i}=e;let o,s=r.get(t);s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:t,viewports:[n]},r.set(t,s),i[o]=s):(Op.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,e,n)):r.blend=!1,o.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function BC(e,t){const n=e.byAlpha[t[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(t)}}class OC{constructor(e){pt(this,"gl",void 0),pt(this,"layerFilter",void 0),pt(this,"drawPickingColors",void 0),pt(this,"drawLayersPass",void 0),pt(this,"pickLayersPass",void 0),pt(this,"renderCount",void 0),pt(this,"_needsRedraw",void 0),pt(this,"renderBuffers",void 0),pt(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new PC(e),this.pickLayersPass=new kC(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||zw.getDefaultFramebuffer(this.gl)};n.effects&&this._preRender(n.effects,n);const r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target,i=t.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,Lp("deckRenderer.renderLayers",this,i,e)}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){this.lastPostProcessEffect=null,t.preRenderStats=t.preRenderStats||{};for(const n of e)t.preRenderStats[n.id]=n.preRender(this.gl,t),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new zw(this.gl),new zw(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:n}=this,r={...t,inputBuffer:n[0],swapBuffer:n[1],target:null};for(const i of e)if(i.postRender){if(i.id===this.lastPostProcessEffect){r.target=t.target,i.postRender(this.gl,r);break}const e=i.postRender(this.gl,r);r.inputBuffer=e,r.swapBuffer=e===n[0]?n[1]:n[0]}}}const IC={pickedColor:null,pickedObjectIndex:-1};function RC(e){let{pickedColors:t,decodePickingColor:n,deviceX:r,deviceY:i,deviceRadius:o,deviceRect:s}=e;const{x:a,y:l,width:c,height:u}=s;let d=o*o,A=-1,h=0;for(let f=0;f<u;f++){const e=f+l-i,n=e*e;if(n>d)h+=4*c;else for(let i=0;i<c;i++){if(t[h+3]-1>=0){const e=i+a-r,t=e*e+n;t<=d&&(d=t,A=h)}h+=4}}if(A>=0){const e=t.slice(A,A+4),r=n(e);if(r){const t=Math.floor(A/4/c),n=A/4-t*c;return{...r,pickedColor:e,pickedX:a+n,pickedY:l+t}}Op.error("Picked non-existent layer. Is picking buffer corrupt?")()}return IC}function LC(e){let t,{pickInfo:n,viewports:r,pixelRatio:i,x:o,y:s,z:a}=e,l=r[0];if(r.length>1&&(l=function(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.containsPixel(t))return r}return e[0]}((null===n||void 0===n?void 0:n.pickedViewports)||r,{x:o,y:s})),l){const e=[o-l.x,s-l.y];void 0!==a&&(e[2]=a),t=l.unproject(e)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:t,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:i}}function DC(e){const{pickInfo:t,lastPickedInfo:n,mode:r,layers:i}=e,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=t,l=s?[s]:[];if("hover"===r){const e=n.index,t=n.layerId,r=s?s.props.id:null;if(r!==t||a!==e){if(r!==t){const e=i.find((e=>e.props.id===t));e&&l.unshift(e)}n.layerId=r,n.index=a,n.info=null}}const c=LC(e),u=new Map;return u.set(null,c),l.forEach((e=>{let t={...c};e===s&&(t.color=o,t.index=a,t.picked=!0),t=FC({layer:e,info:t,mode:r});const i=t.layer;e===s&&"hover"===r&&(n.info=t),u.set(i.id,t),"hover"===r&&i.updateAutoHighlight(t)})),u}function FC(e){let{layer:t,info:n,mode:r}=e;for(;t&&n;){const e=n.layer||null;n.sourceLayer=e,n.layer=t,n=t.getPickingInfo({info:n,mode:r,sourceLayer:e}),t=t.parent}return n}class NC{constructor(e){pt(this,"gl",void 0),pt(this,"pickingFBO",void 0),pt(this,"depthFBO",void 0),pt(this,"pickLayersPass",void 0),pt(this,"layerFilter",void 0),pt(this,"lastPickedInfo",void 0),pt(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new kC(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject(e){let{x:t,y:n,layers:r,viewports:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?r.find((e=>e.id===s)):null,c=a&&i.find((e=>e.id===a))||i[0],u=c&&c.unproject([t-c.x,n-c.y]),d={x:t,y:n,viewport:c,coordinate:u,layer:l};return{...o,...d}}_resizeBuffer(){var e,t;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new zw(n),zw.isSupported(n,{colorBufferFloat:!0}))){const e=new zw(n);e.attach({36064:new Xx(n,{format:my(n)?34836:6408,type:5126})}),this.depthFBO=e}null===(e=this.pickingFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter((e=>this.pickLayersPass.shouldDrawLayer(e)&&!e.isComposite));return t.length?t:null}_pickClosestObject(e){let{layers:t,views:n,viewports:r,x:i,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:d}=e;const A=this._getPickable(t),h=lx(this.gl);if(!A)return{result:[],emptyInfo:LC({viewports:r,x:i,y:o,pixelRatio:h})};this._resizeBuffer();const f=cx(this.gl,[i,o],!0),p=[f.x+Math.floor(f.width/2),f.y+Math.floor(f.height/2)],g=Math.round(s*h),{width:m,height:v}=this.pickingFBO,b=this._getPickingRect({deviceX:p[0],deviceY:p[1],deviceRadius:g,deviceWidth:m,deviceHeight:v}),y={x:i-s,y:o-s,width:2*s+1,height:2*s+1};let x;const w=[],_=new Set;for(let S=0;S<a;S++){let e,t;if(b){e=RC({...this._drawAndSample({layers:A,views:n,viewports:r,onViewportActive:u,deviceRect:b,cullRect:y,effects:d,pass:"picking:".concat(l)}),deviceX:p[0],deviceY:p[1],deviceRadius:g,deviceRect:b})}else e={pickedColor:null,pickedObjectIndex:-1};if(e.pickedLayer&&c&&this.depthFBO){const{pickedColors:i}=this._drawAndSample({layers:[e.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:e.pickedX,y:e.pickedY,width:1,height:1},cullRect:y,effects:d,pass:"picking:".concat(l,":z")},!0);i[3]&&(t=i[0])}e.pickedLayer&&S+1<a&&(_.add(e.pickedLayer),e.pickedLayer.disablePickingIndex(e.pickedObjectIndex)),x=DC({pickInfo:e,lastPickedInfo:this.lastPickedInfo,mode:l,layers:A,viewports:r,x:i,y:o,z:t,pixelRatio:h});for(const n of x.values())n.layer&&w.push(n);if(!e.pickedColor)break}for(const S of _)S.restorePickingColors();return{result:w,emptyInfo:x.get(null)}}_pickVisibleObjects(e){let{layers:t,views:n,viewports:r,x:i,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:d}=e;const A=this._getPickable(t);if(!A)return[];this._resizeBuffer();const h=lx(this.gl),f=cx(this.gl,[i,o],!0),p=f.x,g=f.y+f.height,m=cx(this.gl,[i+s,o+a],!0),v=m.x+m.width,b=m.y,y={x:p,y:b,width:v-p,height:g-b},x=function(e){let{pickedColors:t,decodePickingColor:n}=e;const r=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const e=t.slice(i,i+4),o=e.join(",");if(!r.has(o)){const t=n(e);t?r.set(o,{...t,color:e}):Op.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:A,views:n,viewports:r,onViewportActive:u,deviceRect:y,cullRect:{x:i,y:o,width:s,height:a},effects:d,pass:"picking:".concat(l)})),w=new Map,_=Number.isFinite(c);for(let C=0;C<x.length;C++){var S;if(_&&c&&w.size>=c)break;const e=x[C];let t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:h};t=FC({layer:e.pickedLayer,info:t,mode:l});const n=null!==(S=t.object)&&void 0!==S?S:"".concat(t.layer.id,"[").concat(t.index,"]");w.has(n)||w.set(n,t)}return Array.from(w.values())}_drawAndSample(e){let{layers:t,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:l}=e,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=c?this.depthFBO:this.pickingFBO,d={layers:t,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const v of a)v.useInPicking&&(d.preRenderStats[v.id]=v.preRender(this.gl,d));const{decodePickingColor:A}=this.pickLayersPass.render(d),{x:h,y:f,width:p,height:g}=o,m=new(c?Float32Array:Uint8Array)(p*g*4);return aw(u,{sourceX:h,sourceY:f,sourceWidth:p,sourceHeight:g,target:m}),{pickedColors:m,decodePickingColor:A}}_getPickingRect(e){let{deviceX:t,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}=e;const s=Math.max(0,t-r),a=Math.max(0,n-r),l=Math.min(i,t+r+1)-s,c=Math.min(o,n+r+1)-a;return l<=0||c<=0?null:{x:s,y:a,width:l,height:c}}}const zC={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class jC{constructor(e){pt(this,"el",null),pt(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,zC),t.appendChild(this.el))}setTooltip(e,t,n){const r=this.el;if(r){if("string"===typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(n,"px)"),e&&"object"===typeof e&&"style"in e&&Object.assign(r.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:UC}=globalThis,GC="undefined"!==typeof Image,VC="undefined"!==typeof ImageBitmap,HC=Boolean(UC),WC=!!fg||HC;function QC(e){const t=KC(e);if(!t)throw new Error("Not an image");return t}function JC(e){switch(QC(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("getImageData");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function KC(e){return"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&e instanceof Image?"image":e&&"object"===typeof e&&e.data&&e.width&&e.height?"data":null}const XC=/^data:image\/svg\+xml/,YC=/\.svg((\?|#).*)?$/;function qC(e){return e&&(XC.test(e)||YC.test(e))}function ZC(e,t){if(qC(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function $C(e,t,n){const r=function(e,t){if(qC(t)){let t=(new TextDecoder).decode(e);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(n){throw new Error(n.message)}return"data:image/svg+xml;base64,".concat(btoa(t))}return ZC(e,t)}(e,n),i=self.URL||self.webkitURL,o="string"!==typeof r&&i.createObjectURL(r);try{return await async function(e,t){const n=new Image;if(n.src=e,t.image&&t.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((t,r)=>{try{n.onload=()=>t(n),n.onerror=t=>r(new Error("Could not load image ".concat(e,": ").concat(t)))}catch(i){r(i)}}))}(o||r,t)}finally{o&&i.revokeObjectURL(o)}}const eE={};let tE=!0;async function nE(e,t,n){let r;if(qC(n)){r=await $C(e,t,n)}else r=ZC(e,n);const i=t&&t.imagebitmap;return await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e){for(const t in e||eE)return!1;return!0}(t)&&tE||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(n){console.warn(n),tE=!1}return await createImageBitmap(e)}(r,i)}function rE(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=(i=t,[...i].map((e=>e.charCodeAt(0))));var i;for(let o=0;o<r.length;++o)if(r[o]!==e[o+n])return!1;return!0}(e,"ftyp",4)?0===(96&e[8])?null:function(e){switch(function(e,t,n){return String.fromCharCode(...e.slice(t,n))}(e,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(e):null}const iE=!1,oE=!0;function sE(e){const t=aE(e);return function(e){const t=aE(e),n=t.byteLength>=24&&2303741511===t.getUint32(0,iE);if(!n)return null;return{mimeType:"image/png",width:t.getUint32(16,iE),height:t.getUint32(20,iE)}}(t)||function(e){const t=aE(e),n=t.byteLength>=3&&65496===t.getUint16(0,iE)&&255===t.getUint8(2);if(!n)return null;const{tableMarkers:r,sofMarkers:i}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)e.add(n);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let o=2;for(;o+9<t.byteLength;){const e=t.getUint16(o,iE);if(i.has(e))return{mimeType:"image/jpeg",height:t.getUint16(o+5,iE),width:t.getUint16(o+7,iE)};if(!r.has(e))return null;o+=2,o+=t.getUint16(o,iE)}return null}(t)||function(e){const t=aE(e),n=t.byteLength>=10&&1195984440===t.getUint32(0,iE);if(!n)return null;return{mimeType:"image/gif",width:t.getUint16(6,oE),height:t.getUint16(8,oE)}}(t)||function(e){const t=aE(e),n=t.byteLength>=14&&16973===t.getUint16(0,iE)&&t.getUint32(2,oE)===t.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:t.getUint32(18,oE),height:t.getUint32(22,oE)}}(t)||function(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),n=rE(t);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(t)}function aE(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}const lE={id:"image",module:"images",name:"Images",version:"3.4.15",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(e,t,n){const r=((t=t||{}).image||{}).type||"auto",{url:i}=n||{};let o;switch(function(e){switch(e){case"auto":case"data":return function(){if(VC)return"imagebitmap";if(GC)return"image";if(WC)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return VC||GC||WC;case"imagebitmap":return VC;case"image":return GC;case"data":return WC;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}(e),e}}(r)){case"imagebitmap":o=await nE(e,t,i);break;case"image":o=await $C(e,t,i);break;case"data":o=await async function(e,t){const{mimeType:n}=sE(e)||{},r=globalThis._parseImageNode;return Zp(r),await r(e,n)}(e);break;default:Zp(!1)}return"data"===r&&(o=JC(o)),o},tests:[e=>Boolean(sE(new DataView(e)))],options:{image:{type:"auto",decode:!0}}};const cE={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(e){const t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse};const uE=function(){const e="8.9.35",t=globalThis.deck&&globalThis.deck.VERSION;if(t&&t!==e)throw new Error("deck.gl - multiple versions detected: ".concat(t," vs ").concat(e));return t||(Op.log(1,"deck.gl ".concat(e))(),globalThis.deck={...globalThis.deck,VERSION:e,version:e,log:Op,_registerLoggers:Rp},function(e){const t=lm();e=Array.isArray(e)?e:[e];for(const n of e){const e=eg(n);t.find((t=>e===t))||t.unshift(e)}}([cE,[lE,{imagebitmap:{premultiplyAlpha:"none"}}]])),e}(),dE=globalThis;function AE(e){if(!e&&!Ap())return"Node";if(dp(e))return"Electron";const t="undefined"!==typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":dE.chrome?"Chrome":dE.safari?"Safari":dE.mozInnerScreenX?"Firefox":"Unknown"}class hE extends Tx{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=my(e),r=Dw(e,hw);let i=n||r;for(const o of t)switch(o){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:yx(!1)}return i}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return hE.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const fE=Ap()&&"undefined"!==typeof document;let pE=0;class gE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=(e=>px(e)),onAddHTML:n=null,onInitialize:r=(()=>{}),onRender:i=(()=>{}),onFinalize:o=(()=>{}),onError:s,gl:a=null,glOptions:l={},debug:c=!1,createFramebuffer:u=!1,autoResizeViewport:d=!0,autoResizeDrawingBuffer:A=!0,stats:h=bx.get("animation-loop-".concat(pE++))}=e;let{useDevicePixels:f=!0}=e;"useDevicePixelRatio"in e&&(Ay.deprecated("useDevicePixelRatio","useDevicePixels")(),f=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:n,onInitialize:r,onRender:i,onFinalize:o,onError:s,gl:a,glOptions:l,debug:c,createFramebuffer:u},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=h,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:d,autoResizeDrawingBuffer:A,useDevicePixels:f}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return yx("string"===typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=hE.isSupported(this.gl,["timers"])?new hE(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((e=>{this._running&&(this._addCallbackData(e||{}),!1!==e&&this._startLoop())}));return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((e=>{this._resolveNextFrame=e}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(e);return n?Number(n.value):t}setViewParameters(){return Ay.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=fE?new Promise(((e,t)=>{fE&&"complete"===document.readyState?e(document):window.addEventListener("load",(()=>{e(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):(t=e,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t));var t}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function(e){return"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:n}=this._getSizeAndAspect();e===this.animationProps.width&&t===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"===typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!==typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?gx(this.props.gl,e):this.onCreateContext(e),!gy(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");ox(this.gl,Uy),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&mx(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new zw(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var mE=n(6895);const vE={mousedown:1,mousemove:2,mouseup:4};!function(e){const t=e.prototype.handler;e.prototype.handler=function(e){const n=this.store;e.button>0&&"pointerdown"===e.type&&(function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(n,(t=>t.pointerId===e.pointerId))||n.push(e)),t.call(this,e)}}(mE.PointerEventInput),mE.MouseInput.prototype.handler=function(e){let t=vE[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};const bE=mE.Manager,yE=mE;class xE{constructor(e,t,n){this.element=e,this.callback=t,this.options={enable:!0,...n}}}const wE=yE?[[yE.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[yE.Rotate,{enable:!1}],[yE.Pinch,{enable:!1}],[yE.Swipe,{enable:!1}],[yE.Pan,{threshold:0,enable:!1}],[yE.Press,{enable:!1}],[yE.Tap,{event:"doubletap",taps:2,enable:!1}],[yE.Tap,{event:"anytap",enable:!1}],[yE.Tap,{enable:!1}]]:null,_E={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},SE={doubletap:["tap"]},CE={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},EE={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},ME={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},PE={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},TE="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",kE="undefined"!==typeof window?window:n.g;"undefined"!==typeof n.g?n.g:window,"undefined"!==typeof document&&document;let BE=!1;try{const e={get passive(){return BE=!0,!0}};kE.addEventListener("test",null,e),kE.removeEventListener("test",null)}catch(o0){BE=!1}const OE=-1!==TE.indexOf("firefox"),{WHEEL_EVENTS:IE}=EE,RE="wheel",LE=4.000244140625;class DE extends xE{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{if(!this.options.enable)return;let t=e.deltaY;kE.WheelEvent&&(OE&&e.deltaMode===kE.WheelEvent.DOM_DELTA_PIXEL&&(t/=kE.devicePixelRatio),e.deltaMode===kE.WheelEvent.DOM_DELTA_LINE&&(t*=40)),0!==t&&t%LE===0&&(t=Math.floor(t/LE)),e.shiftKey&&t&&(t*=.25),this.callback({type:RE,center:{x:e.clientX,y:e.clientY},delta:-t,srcEvent:e,pointerType:"mouse",target:e.target})},this.events=(this.options.events||[]).concat(IE),this.events.forEach((t=>e.addEventListener(t,this.handleEvent,!!BE&&{passive:!1})))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===RE&&(this.options.enable=t)}}const{MOUSE_EVENTS:FE}=EE,NE="pointermove",zE="pointerover",jE="pointerout",UE="pointerenter",GE="pointerleave";class VE extends xE{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.handleOverEvent(e),this.handleOutEvent(e),this.handleEnterEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(FE),this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===NE&&(this.enableMoveEvent=t),e===zE&&(this.enableOverEvent=t),e===jE&&(this.enableOutEvent=t),e===UE&&(this.enableEnterEvent=t),e===GE&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(zE,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(jE,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(UE,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(GE,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(NE,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:HE}=EE,WE="keydown",QE="keyup";class JE extends xE{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:WE,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:QE,srcEvent:e,key:e.key,target:e.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(HE),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===WE&&(this.enableDownEvent=t),e===QE&&(this.enableUpEvent=t)}}const KE="contextmenu";class XE extends xE{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.options.enable&&this.callback({type:KE,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===KE&&(this.options.enable=t)}}const YE={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function qE(e){const t=YE[e.srcEvent.type];if(!t)return null;const{buttons:n,button:r,which:i}=e.srcEvent;let o=!1,s=!1,a=!1;return 4===t||2===t&&!Number.isFinite(n)?(o=1===i,s=2===i,a=3===i):2===t?(o=Boolean(1&n),s=Boolean(4&n),a=Boolean(2&n)):1===t&&(o=0===r,s=1===r,a=2===r),{leftButton:o,middleButton:s,rightButton:a}}function ZE(e,t){const n=e.center;if(!n)return null;const r=t.getBoundingClientRect(),i=r.width/t.offsetWidth||1,o=r.height/t.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-t.clientLeft)/i,y:(n.y-r.top-t.clientTop)/o}}}const $E={srcElement:"root",priority:0};class eM{constructor(e){this.handleEvent=e=>{if(this.isEmpty())return;const t=this._normalizeEvent(e);let n=e.srcEvent.target;for(;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:s}=this;let a=$E;"string"===typeof n||n&&n.addEventListener?a={...$E,srcElement:n}:n&&(a={...$E,...n});let l=s.get(a.srcElement);l||(l=[],s.set(a.srcElement,l));const c={type:e,handler:t,srcElement:a.srcElement,priority:a.priority};r&&(c.once=!0),i&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,t){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.type===e&&o.handler===t){n.splice(i,1);const e=r.get(o.srcElement);e.splice(e.indexOf(o),1),0===e.length&&r.delete(o.srcElement)}}this._active=n.some((e=>!e.passive))}_emit(e,t){const n=this.handlersByElement.get(t);if(n){let t=!1;const r=()=>{e.handled=!0},i=()=>{e.handled=!0,t=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:l,once:c}=n[s];if(l({...e,type:a,stopPropagation:r,stopImmediatePropagation:i}),c&&o.push(n[s]),t)break}for(let e=0;e<o.length;e++){const{type:t,handler:n}=o[e];this.remove(t,n)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...qE(e),...ZE(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const tM={events:null,recognizers:null,recognizerOptions:{},Manager:bE,touchAction:"none",tabIndex:0};class nM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;this._onBasicInput=e=>{const{srcEvent:t}=e,n=CE[t.type];n&&this.manager.emit(n,e)},this._onOtherEvent=e=>{this.manager.emit(e.type,e)},this.options={...tM,...t},this.events=new Map,this.setElement(e);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this,n=t.Manager;this.manager=new n(e,{touchAction:t.touchAction,recognizers:t.recognizers||wE}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(_E).forEach((e=>{const t=this.manager.get(e);t&&_E[e].forEach((e=>{t.recognizeWith(e)}))}));for(const r in t.recognizerOptions){const e=this.manager.get(r);if(e){const n=t.recognizerOptions[r];delete n.enable,e.set(n)}}this.wheelInput=new DE(e,this._onOtherEvent,{enable:!1}),this.moveInput=new VE(e,this._onOtherEvent,{enable:!1}),this.keyInput=new JE(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new XE(e,this._onOtherEvent,{enable:!1});for(const[r,i]of this.events)i.isEmpty()||(this._toggleRecognizer(i.recognizerName,!0),this.manager.on(r,i.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,n){this._addEventHandler(e,t,n,!1)}once(e,t,n){this._addEventHandler(e,t,n,!0)}watch(e,t,n){this._addEventHandler(e,t,n,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:n}=this;if(!n)return;const r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const i=SE[e];i&&!this.options.recognizers&&i.forEach((i=>{const o=n.get(i);t?(o.requireFailure(e),r.dropRequireFailure(i)):o.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,n,r,i){if("string"!==typeof e){n=t;for(const t in e)this._addEventHandler(t,e[t],n,r,i);return}const{manager:o,events:s}=this,a=PE[e]||e;let l=s.get(a);l||(l=new eM(this),s.set(a,l),l.recognizerName=ME[a]||a,o&&o.on(a,l.handleEvent)),l.add(e,t,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!==typeof e){for(const t in e)this._removeEventHandler(t,e[t]);return}const{events:n}=this,r=PE[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){const{recognizerName:e}=i;let t=!1;for(const r of n.values())if(r.recognizerName===e&&!r.isEmpty()){t=!0;break}t||this._toggleRecognizer(e,!1)}}}function rM(){}const iM={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:rM,onResize:rM,onViewStateChange:rM,onInteractionStateChange:rM,onBeforeRender:rM,onAfterRender:rM,onLoad:rM,onError:e=>Op.error(e.message,e.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:e=>{let{isDragging:t}=e;return t?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class oM{constructor(e){pt(this,"props",void 0),pt(this,"width",0),pt(this,"height",0),pt(this,"userData",{}),pt(this,"canvas",null),pt(this,"viewManager",null),pt(this,"layerManager",null),pt(this,"effectManager",null),pt(this,"deckRenderer",null),pt(this,"deckPicker",null),pt(this,"eventManager",null),pt(this,"tooltip",null),pt(this,"metrics",void 0),pt(this,"animationLoop",void 0),pt(this,"stats",void 0),pt(this,"viewState",void 0),pt(this,"cursorState",void 0),pt(this,"_needsRedraw",void 0),pt(this,"_pickRequest",void 0),pt(this,"_lastPointerDownInfo",null),pt(this,"_metricsCounter",void 0),pt(this,"_onPointerMove",(e=>{const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e})),pt(this,"_onEvent",(e=>{const t=fb[e.type],n=e.offsetCenter;if(!t||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,s=o&&(o[t.handler]||o.props[t.handler]),a=this.props[t.handler];let l=!1;s&&(l=s.call(o,i,e)),!l&&a&&a(i,e)})),pt(this,"_onPointerDown",(e=>{const t=e.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:t.x,y:t.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...iM,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Op.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===AE()&&Op.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new Up({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&wm.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,n,r,i,o,s,a,l;(null===(e=this.animationLoop)||void 0===e||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(t=this.layerManager)||void 0===t||t.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(i=this.deckRenderer)||void 0===i||i.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas)||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Op.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Op.removed("onLayerClick","onClick")(),e.initialViewState&&!CS(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||n||r||i||o,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return kS(this.viewManager),this.viewManager.views}getViewports(e){return kS(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,t,n){kS(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const i=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(t).timeEnd(),i}_createCanvas(e){let t=e.canvas;if("string"===typeof t&&(t=document.getElementById(t),kS(t)),!t){t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay";(e.parent||document.body).appendChild(t)}return Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:n}=e;if(t||0===t){const e=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=e}if(n||0===n){var r;const t=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=t}}_updateCanvasSize(){var e,t;const{canvas:n}=this;if(!n)return;const r=null!==(e=n.clientWidth)&&void 0!==e?e:n.width,i=null!==(t=n.clientHeight)&&void 0!==t?t:n.height;var o,s;r===this.width&&i===this.height||(this.width=r,this.height=i,null===(o=this.viewManager)||void 0===o||o.setProps({width:r,height:i}),null===(s=this.layerManager)||void 0===s||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:i}))}_createAnimationLoop(e){const{width:t,height:n,gl:r,glOptions:i,debug:o,onError:s,onBeforeRender:a,onAfterRender:l,useDevicePixels:c}=e;return new gE({width:t,height:n,useDevicePixels:c,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:e=>px({...i,...e,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:e=>this._setGLContext(e.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:l,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new rC({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=n.length>0;let i=r,o=!1;for(const s of n){var t;i=s,o=(null===(t=s.layer)||void 0===t?void 0:t.onHover(s,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,e.event),this.props.getTooltip&&this.tooltip){const e=this.props.getTooltip(i);this.tooltip.setTooltip(e,i.x,i.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,gx(e,{enable:!0,copyState:!0})),this.tooltip=new jC(this.canvas),ox(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new Zf;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new nM(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in fb)this.eventManager.on(r,this._onEvent);this.viewManager=new ES({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new SS(e,{deck:this,stats:this.stats,viewport:n,timeline:t}),this.effectManager=new MC,this.deckRenderer=new OC(e),this.deckPicker=new NC(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:n}=this.layerManager.context;ox(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:n})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Op.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const n=bx.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}pt(oM,"defaultProps",iM),pt(oM,"VERSION",uE);const sM="undefined"!==typeof window?A.useLayoutEffect:A.useEffect;function aM(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}class lM{constructor(e,t){pt(this,"opts",void 0),pt(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:n}=this.source,{size:r}=t;let i=n;if(n&&n.length!==r){i=new Float32Array(r);const e=t.elementOffset||0;for(let t=0;t<r;++t)i[t]=n[e+t]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function cM(e){return e.stride||e.size*e.bytesPerElement}function uM(e,t){t.offset&&Op.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=cM(e),r=(void 0!==t.vertexOffset?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return{...t,offset:r,stride:n}}class dM{constructor(e,t,n){pt(this,"gl",void 0),pt(this,"id",void 0),pt(this,"size",void 0),pt(this,"settings",void 0),pt(this,"value",void 0),pt(this,"doublePrecision",void 0),pt(this,"_buffer",void 0),pt(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,i=5130===r;let o,{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),o=i?5126:!r&&t.isIndexed?e&&Lw(e,gw)?5125:5123:r||5126;let a=function(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||o||5126);this.doublePrecision=i,i&&!1===t.fp64&&(a=Float32Array),this.value=null,this.settings={...t,defaultType:a,defaultValue:s,logicalType:r,type:o,size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new Ux(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*cM(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),wm.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const n={},r=this.value instanceof Float64Array,i=function(e,t){const n=uM(e,t);return{high:n,low:{...n,offset:n.offset+4*e.size}}}(this.getAccessor(),t||{});return n[e]=new lM(this,i.high),n["".concat(e,"64Low")]=r?new lM(this,i.low):new Float32Array(this.size),n}if(t){const n=uM(this.getAccessor(),t);return{[e]:new lM(this,n)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:n,size:r}=this,i=n*r;if(t&&i&&t.length>=i){const n=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let e=0;e<i;)for(let i=0;i<r;i++){const r=t[e++];r<n[i]&&(n[i]=r),r>o[i]&&(o[i]=r)}e=[n,o]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let n;n=ArrayBuffer.isView(e)?{value:e}:e instanceof Ux?{buffer:e}:e;const r={...this.settings,...n};if(t.bufferAccessor=r,t.bounds=null,n.constant){let e=n.value;e=this._normalizeValue(e,[],0),this.settings.normalized&&(e=this.normalizeConstant(e));if(!(!t.constant||!this._areValuesEqual(e,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=e}else if(n.buffer){const e=n.buffer;t.externalBuffer=e,t.constant=!1,this.value=n.value||null;const i=n.value instanceof Float64Array;r.type=n.type||e.accessor.type,r.bytesPerElement=e.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=cM(r)}else if(n.value){this._checkExternalBuffer(n);let e=n.value;t.externalBuffer=null,t.constant=!1,this.value=e,r.bytesPerElement=e.BYTES_PER_ELEMENT,r.stride=cM(r);const{buffer:i,byteOffset:o}=this;this.doublePrecision&&e instanceof Float64Array&&(e=nv(e,r));const s=e.byteLength+o+2*r.stride;i.byteLength<s&&i.reallocate(s),i.setAccessor(null),i.subData({data:e,offset:o}),r.type=n.type||i.accessor.type}return!0}updateSubBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const t=this.value,{startOffset:n=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?nv(t,{size:this.size,startIndex:n,endIndex:r}):t.subarray(n,r),offset:n*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,r=n.allocatedValue,i=wm.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=i;const{buffer:o,byteOffset:s}=this;return o.byteLength<i.byteLength+s&&(o.reallocate(i.byteLength+s),t&&r&&o.subData({data:r instanceof Float64Array?nv(r,this):r,offset:s})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.settings.normalized||"normalized"in e||Op.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map((e=>(e+128)/255*2-1));case 5122:return new Float32Array(e).map((e=>(e+32768)/65535*2-1));case 5121:return new Float32Array(e).map((e=>e/255));case 5123:return new Float32Array(e).map((e=>e/65535));default:return e}}_normalizeValue(e,t,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(e))return t[n]=e,t;if(!e){let e=i;for(;--e>=0;)t[n+e]=r[e];return t}switch(i){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=i;for(;--o>=0;)t[n+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}}const AM=[],hM=[];function fM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=AM;const i={index:-1,data:e,target:[]};return e?"function"===typeof e[Symbol.iterator]?r=e:e.length>0&&(hM.length=e.length,r=hM):r=AM,(t>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(t,n),i.index=t-1),{iterable:r,objectInfo:i}}function pM(e){return e&&e[Symbol.asyncIterator]}function gM(e,t){const{size:n,stride:r,offset:i,startIndices:o,nested:s}=t,a=e.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((e.length-c)/l);return(t,r)=>{let{index:i,target:a}=r;if(!o){const t=i*l+c;for(let r=0;r<n;r++)a[r]=e[t+r];return a}const d=o[i],A=o[i+1]||u;let h;if(s){h=new Array(A-d);for(let t=d;t<A;t++){const r=t*l+c;a=new Array(n);for(let t=0;t<n;t++)a[t]=e[r+t];h[t-d]=a}}else if(l===n)h=e.subarray(d*n+c,A*n+c);else{h=new e.constructor((A-d)*n);let t=0;for(let r=d;r<A;r++){const i=r*l+c;for(let r=0;r<n;r++)h[t++]=e[i+r]}}return h}}const mM=[],vM=[[0,1/0]];function bM(e){const{source:t,target:n,start:r=0,size:i,getData:o}=e,s=e.end||n.length,a=t.length,l=s-r;if(a>l)return void n.set(t.subarray(0,l),r);if(n.set(t,r),!o)return;let c=a;for(;c<l;){const e=o(c,t);for(let t=0;t<i;t++)n[r+c]=e[t]||0,c++}}const yM={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function xM(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const n=e.type||"interpolation";return{...yM[n],...t,...e,type:n}}function wM(e,t){const n=t.getBuffer();return n?[n,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function _M(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function SM(e){e.push(e.shift())}function CM(e,t){const{doublePrecision:n,settings:r,value:i,size:o}=e,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:t*o)*s}function EM(e){let{buffer:t,numInstances:n,attribute:r,fromLength:i,fromStartIndices:o,getData:s=(e=>e)}=e;const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,l=r.size*a,c=r.byteOffset,u=r.startIndices,d=o&&u,A=CM(r,n),h=r.isConstant;if(!d&&i>=A)return;const f=h?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!h){const e=s;s=(t,n)=>r.normalizeConstant(e(t,n))}const p=h?(e,t)=>s(f,t):(e,t)=>s(f.subarray(e,e+l),t),g=t.getData({length:i}),m=new Float32Array(A);!function(e){let{source:t,target:n,size:r,getData:i,sourceStartIndices:o,targetStartIndices:s}=e;if(!Array.isArray(s))return bM({source:t,target:n,size:r,getData:i}),n;let a=0,l=0;const c=i&&((e,t)=>i(e+l,t)),u=Math.min(o.length,s.length);for(let d=1;d<u;d++){const e=o[d]*r,i=s[d]*r;bM({source:t.subarray(a,e),target:n,start:l,end:i,size:r,getData:c}),a=e,l=i}l<n.length&&bM({source:[],target:n,start:l,size:r,getData:c})}({source:g,target:m,sourceStartIndices:o,targetStartIndices:u,size:l,getData:p}),t.byteLength<m.byteLength+c&&t.reallocate(m.byteLength+c),t.subData({data:m,offset:c})}class MM extends dM{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:vM}),pt(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!==typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,n=this.settings.transition,r=Array.isArray(t)?e[t.find((t=>e[t]))]:e[t];return xM(r,n)}setNeedsUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:e=0,endRow:n=1/0}=t;this.state.updateRanges=function(e,t){if(e===vM)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;const n=[],r=e.length;let i=0;for(let o=0;o<r;o++){const r=e[o];r[1]<t[0]?(n.push(r),i=o+1):r[0]>t[1]?n.push(r):t=[Math.min(r[0],t[0]),Math.max(r[1],t[1])]}return n.splice(i,0,t),n}(this.state.updateRanges,[e,n])}else this.state.updateRanges=vM}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=mM}setNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(e,t.updateRanges!==vM),!0))}updateBuffer(e){let{numInstances:t,data:n,props:r,context:i}=e;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[e,a]of o)s.call(i,this,{data:n,startRow:e,endRow:a,props:r,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,n]of o){const r=Number.isFinite(e)?this.getVertexOffset(e):0,i=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){if(void 0===e||"function"===typeof e)return!1;return this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:r}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw();if(r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const i=e;kS(ArrayBuffer.isView(i.value),"invalid ".concat(r.accessor));const o=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=gM(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:t,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const n in e)Object.assign(t,super.getShaderAttributes(n,e[n]));return t}_autoUpdater(e,t){let{data:n,startRow:r,endRow:i,props:o,numInstances:s}=t;if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:d}=e,{accessor:A,transform:h}=a,f=l.binaryAccessor||("function"===typeof A?A:o[A]);kS("function"===typeof f,'accessor "'.concat(A,'" is not a function'));let p=e.getVertexOffset(r);const{iterable:g,objectInfo:m}=fM(n,r,i);for(const v of g){m.index++;let t=f(v,m);if(h&&(t=h.call(this,t)),d){const n=(m.index<d.length-1?d[m.index+1]:s)-d[m.index];if(t&&Array.isArray(t[0])){let n=p;for(const r of t)e._normalizeValue(r,c,n),n+=u}else t&&t.length>u?c.set(t,p):(e._normalizeValue(t,m.target,0),Np({target:c,source:m.target,start:p,count:n}));p+=n*u}else e._normalizeValue(t,c,p),p+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||"function"===typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const PM="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",TM="#version 300 es\n".concat(PM);function kM(e,t){t=Array.isArray(t)?t:[t];const n=e.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!t.includes(r)||!i||!o)return null;return{qualifier:r,type:i,name:o.split(";")[0]}}function BM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:t=100,input:n,inputType:r,output:i}=e;if(!n)return 300===t?TM:t>300?"#version ".concat(t,"\n").concat(PM):"void main() {gl_FragColor = vec4(0);}";const o=function(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return wb(!1),null}}(n,r);return t>=300?"#version ".concat(t," ").concat(300===t?"es":"","\nin ").concat(r," ").concat(n,";\nout vec4 ").concat(i,";\nvoid main() {\n  ").concat(i," = ").concat(o,";\n}"):"varying ".concat(r," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class OM extends Tx{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return my(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};by(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Ex(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const t in e)this.setBuffer(t,e[t])})),this}setBuffer(e,t){const n=this._getVaryingIndex(e),{buffer:r,byteSize:i,byteOffset:o}=this._getBufferParams(t);return n<0?(this.unused[e]=r,Ay.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[n]=t,this.bindOnUse||this._bindBuffer(n,r,o,i),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,n,r;return e instanceof Ux===!1?(r=e.buffer,n=e.byteSize,t=e.byteOffset):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:n}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class IM{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=t;return{attributes:Object.assign({},n,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],n=e?t[e]:null;return n?n instanceof Ux?n:n.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,n=this.getBuffer(t);return n?n.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&yx(my(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const e=this.feedbackMap[r];r in t&&(n[e]=r)}Object.assign(n,e.feedbackBuffers);for(const r in n){const e=n[r];if("string"===typeof e){const i=t[e],{byteLength:o,usage:s,accessor:a}=i;n[r]=this._createNewBuffer(r,{byteLength:o,usage:s,accessor:a})}}return n}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const n=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:n})}_setupTransformFeedback(e,t){let{model:n}=t;const{program:r}=n;e.transformFeedback=new OM(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:e,feedbackBuffers:t}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:e,feedbackBuffers:t})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];t[r]=e.feedbackBuffers[i],n[i]=e.sourceBuffers[r],yx(n[i]instanceof Ux)}return{sourceBuffers:t,feedbackBuffers:n}}_createNewBuffer(e,t){const n=new Ux(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function RM(e){let t=100;const n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}return t}const LM={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},DM="transform_uSampler_",FM="transform_uSize_",NM="transform_position";function zM(e){let{vs:t,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=e;let o=Object.keys(n).length,s=null;const a={};let l=t,c={};if(o>0||r){const e=l.split("\n"),t=e.slice();if(e.forEach(((e,i,l)=>{if(o>0){const r=function(e,t){const n={},r=function(e){return kM(e,["attribute","in"])}(e);if(!r)return null;const{type:i,name:o}=r;if(o&&t[o]){const t="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:r,sizeName:s,uniformDeclerations:a}=function(e){const t="".concat(DM).concat(e),n="".concat(FM).concat(e),r="  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(n,";");return{samplerName:t,sizeName:n,uniformDeclerations:r}}(o),l=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return wb(!1),null}}(i),c="  ".concat(i," ").concat(o," = transform_getInput(").concat(r,", ").concat(s,").").concat(l,";\n");n[r]=o;return{updatedLine:t,inject:{"vs:#decl":a,"vs:#main-start":c},samplerTextureMap:n}}return null}(e,n);if(r){const{updatedLine:e,inject:n}=r;t[i]=e,c=Kb([c,n]),Object.assign(a,r.samplerTextureMap),o--}}r&&!s&&(s=function(e,t){const n=kM(e,["varying","out"]);if(!n)return null;return n.name===t?n.type:null}(e,r))})),r){yx(i);const e="".concat(FM).concat(r),t="uniform vec2 ".concat(e,";\n"),n="     vec2 ".concat(NM," = transform_getPos(").concat(e,");\n     gl_Position = vec4(").concat(NM,", 0, 1.);\n");c=Kb([c,{"vs:#decl":t,"vs:#main-start":n}])}l=t.join("\n")}return{vs:l,targetTextureType:s,inject:c,samplerTextureMap:a}}const jM={10241:9728,10240:9728,10242:33071,10243:33071};class UM{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),s=Object.assign({},e.uniforms),a=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const t in this.samplerTextureMap){const e=this.samplerTextureMap[t];s[t]=n[e]}this._setSourceTextureParameters();const e=function(e){let{sourceTextureMap:t,targetTextureVarying:n,targetTexture:r}=e;const i={};let o,s;n&&(({width:o,height:s}=r),i["".concat(FM).concat(n)]=[o,s]);for(const a in t)({width:o,height:s}=t[a]),i["".concat(FM).concat(a)]=[o,s];return i}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(s,e)}return this.hasTargetTexture&&(l=!1,a.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:s,discard:l,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],n=aw(t);if(!e)return n;const r=n.constructor,i=function(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return wb(!1),null}}(this.targetTextureType),o=new r(n.length*i/4);let s=0;for(let a=0;a<n.length;a+=4)for(let e=0;e<i;e++)o[s++]=n[a+e];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:n}=e;this._swapTexture=n,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:n}=e;if(n instanceof Xx)return n;const r=t[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:n={},_targetTexture:r}=e,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:n,targetTexture:i}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!==typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach(((e,t,n)=>{n[t]=t})),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Ux(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:e,targetTexture:t}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:e,targetTexture:t})}}_updateBinding(e,t){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,n),i){e.targetTexture=i;const{width:t,height:n}=i,{framebuffer:r}=e;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:t,height:n})):e.framebuffer=new zw(this.gl,{id:"transform-framebuffer",width:t,height:n,attachments:{36064:i}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const n in t)t[n].setParameters(jM)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);t[this._swapTexture]=e.targetTexture;return{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function(e,t){yx(e instanceof Xx||e instanceof iw||e instanceof ow);const n=e.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u}=e;return new n(r,Object.assign({width:i,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u},t))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:o,inject:s,samplerTextureMap:a}=zM({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),l=Kb([e.inject||{},s]);this.targetTextureType=o,this.samplerTextureMap=a;return{vs:r,fs:e._fs||BM({version:RM(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[LM].concat(e.modules||[]):e.modules,uniforms:i,inject:l}}}let GM=null;function VM(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!GM||GM.byteLength<n)&&(GM=new ArrayBuffer(n)),GM),0,t)}class HM extends Tx{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(my(e)||"Chrome"===AE())}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new HM(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return HM.MAX_ATTRIBUTES=HM.MAX_ATTRIBUTES||e.getParameter(34921),HM.MAX_ATTRIBUTES}static setConstant(e,t,n){switch(n.constructor){case Float32Array:HM._setConstantFloatArray(e,t,n);break;case Int32Array:HM._setConstantIntArray(e,t,n);break;case Uint32Array:HM._setConstantUintArray(e,t,n);break;default:yx(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.id||t.program&&t.program.id;super(e,Object.assign({},t,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return HM.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return yx(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,e?e.handle:null)})),this}setBuffer(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);const{size:r,type:i,stride:o,offset:s,normalized:a,integer:l,divisor:c}=n,{gl:u,gl2:d}=this;return e=Number(e),this.bind((()=>{u.bindBuffer(34962,t.handle),l?(yx(my(u)),d.vertexAttribIPointer(e,r,i,o,s)):u.vertexAttribPointer(e,r,i,a,o,s),u.enableVertexAttribArray(e),d.vertexAttribDivisor(e,c||0)})),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!HM.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind((()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e)))),this}getConstantBuffer(e,t){const n=this._normalizeConstantArrayValue(t),r=n.byteLength*e,i=n.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Ux(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const e=VM(t.constructor,i);!function(e){let{target:t,source:n,start:r=0,count:i=1}=e;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)t[l++]=n[a];for(;a<s;)a<s-a?(t.copyWithin(r+a,r,r+a),a*=2):(t.copyWithin(r+a,r,r+s-a),a=s)}({target:e,source:n,start:0,count:i}),this.buffer.subData(e),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}static _setConstantFloatArray(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:yx(!1)}}static _setConstantIntArray(e,t,n){switch(yx(my(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:yx(!1)}}static _setConstantUintArray(e,t,n){switch(yx(my(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:yx(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:n}=t;return yx(Number.isFinite(n)),this.bind((()=>34373===e?this.gl.getVertexAttribOffset(n,e):this.gl.getVertexAttrib(n,e)))}}const WM=/^(.+)__LOCATION_([0-9]+)$/,QM=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class JM{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.id||t.program&&t.program.id;this.id=n,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new HM(e),Mx(this,"VertexArray","v6.0",QM),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind((()=>{for(const t in e){const n=e[t];this._setAttribute(t,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(e,t,t.accessor,n);return r>=0&&(this.values[r]=t,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,i)),this}setConstant(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:i}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ux(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Ux&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof Ux&&this.setBuffer(e,t)}})),this}bindForDraw(e,t,n){let r;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(e,t),r=n()})),r}_resolveLocationAndAccessor(e,t,n,r){const i={location:-1,accessor:null},{location:o,name:s}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,Ay.once(3,(()=>"unused value ".concat(e," in ").concat(this.id)))(),i;const a=this._getAttributeInfo(s||o);if(!a)return i;const l=this.accessors[o]||{},c=Fx.resolve(a.accessor,l,n,r),{size:u,type:d}=c;return yx(Number.isFinite(u)&&Number.isFinite(d)),{location:o,accessor:c}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const n=WM.exec(e),r=n?n[1]:e,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof Ux)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Ux){const n=t[0],r=t[1];this.setBuffer(e,n,r)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){const n=t;this.setConstant(e,n)}else{if(!(t.buffer instanceof Ux))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=t;this.setBuffer(e,n.buffer,n)}}}_setConstantAttributes(e,t){const n=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}_setConstantAttributeZero(e,t){if(HM.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(e,t){HM.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const n=this.values[t],r=this.accessors[t];if(!n)return;const{divisor:i}=r,o=i>0;if(e.isInstanced=e.isInstanced||o,n instanceof Ux){const t=n;if(o){const n=t.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,n)}else{const n=t.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,n)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ay.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function KM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,t){const{maxElts:n=16,size:r=1}=t;let i="[";for(let s=0;s<e.length&&s<n;++s)s>0&&(i+=",".concat(s%r===0?" ":"")),i+=KM(e[s],t);const o=e.length>n?"...":"]";return"".concat(i).concat(o)}(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return n?"0":"0.";if(n)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const r=e.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function XM(e,t,n,r){const{gl:i}=e;if(!t)return{[r]:"null","Format ":"N/A"};let o,s,a,l="NOT PROVIDED",c=1,u=0,d=0;if(n&&(l=n.type,c=n.size,l=String(l).replace("Array",""),o=-1!==l.indexOf("nt")),t instanceof Ux){const e=t,{data:A,changed:h}=e.getDebugData();let f;if(s=h?"*":"",a=A,d=e.byteLength,u=d/A.BYTES_PER_ELEMENT/c,n){const e=n.divisor>0;f="".concat(e?"I ":"P "," ").concat(u," (x").concat(c,"=").concat(d," bytes ").concat(wx(i,l),")")}else o=!0,f="".concat(d," bytes");return{[r]:"".concat(s).concat(KM(a,{size:c,isInteger:o})),"Format ":f}}return a=t,c=t.length,l=String(t.constructor.name).replace("Array",""),o=-1!==l.indexOf("nt"),{[r]:"".concat(KM(a,{size:c,isInteger:o})," (constant)"),"Format ":"".concat(c,"x").concat(l," (constant)")}}function YM(e,t){const{type:n,size:r}=t,i=q_(n,r);return i?"".concat(e," (").concat(i.name,")"):e}function qM(e){let{header:t="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=e;yx(n);const o=".*Matrix",s=n._uniformSetters,a={},l=Object.keys(s).sort();let c=0;for(const A of l)A.match(".*_.*")||A.match(o)||ZM({table:a,header:t,uniforms:r,uniformName:A,undefinedOnly:i})&&c++;for(const A of l)A.match(o)&&ZM({table:a,header:t,uniforms:r,uniformName:A,undefinedOnly:i})&&c++;for(const A of l)a[A]||ZM({table:a,header:t,uniforms:r,uniformName:A,undefinedOnly:i})&&c++;let u=0;const d={};if(!i)for(const A in r){const e=r[A];a[A]||(u++,d[A]={Type:"NOT USED: ".concat(e),[t]:KM(e)})}return{table:a,count:c,unusedTable:d,unusedCount:u}}function ZM(e){let{table:t,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=e;const s=r[i],a=function(e){return void 0!==e&&null!==e}(s);return(!o||!a)&&(t[i]={[n]:a?KM(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0)}function $M(e){const{type:t,size:n}=e.accessor,r=q_(t,n);return r?"".concat(r.name," ").concat(e.name):e.name}const eP={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function tP(e,t){const{attributeMap:n=eP}=t||{};return n&&n[e]||e}function nP(e,t){let n;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}yx(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const rP=()=>{},iP={};class oP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=Sx("model")}=t;yx(gy(e)),this.id=n,this.gl=e,this.id=t.id||Sx("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||nS.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=e;this.programProps={program:t,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},yx(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=e;this.programProps={program:t,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return yx(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return yx(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,n){const r={};let i=t.indices;for(const o in t.attributes){const s=t.attributes[o],a=tP(o,n);if("indices"===o)i=s;else if(s.constant)r[a]=s.value;else{const t=s.value,n={...s};delete n.value,r[a]=[new Ux(e,t),n],nP(o,n)}}if(i){const t=i.value||i;yx(t instanceof Uint16Array||t instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new Ux(e,{data:t,target:34963}),n]}return r}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ex(e))return this;const t={};for(const n in e){const r=e[n];t[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return tw(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:n,uniforms:r={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:s={},vertexArray:a=this.vertexArray}=e;let l;this.setAttributes(i),this.updateModuleSettings(t),this.setUniforms(r),Ay.priority>=2&&(l=this._logDrawCallStart(2));const c=this.vertexArray.getDrawParams(),{isIndexed:u=c.isIndexed,indexType:d=c.indexType,indexOffset:A=c.indexOffset,vertexArrayInstanced:h=c.isInstanced}=this.props;h&&!this.isInstanced&&Ay.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:f,instanceCount:p}=this,{onBeforeRender:g=rP,onAfterRender:m=rP}=this.props;g(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(iP,e,{logPriority:l,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:a,transformFeedback:o,isIndexed:u,indexType:d,isInstanced:f,instanceCount:p,offset:u?A:0}));return m(),Ay.priority>=2&&this._logDrawCallEnd(l,a,n),v}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:n,unbindModels:r=[]}=e;let{parameters:i}=e;n&&this._setFeedbackBuffers(n),t&&(i=Object.assign({},i,{35977:t})),r.forEach((e=>e.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},e,{parameters:i}))}finally{r.forEach((e=>e.vertexArray.bindBuffers()))}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ay.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:e}=this.programProps;if(e)this._managedProgram=!1;else{const{vs:t,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}=this.programProps;e=this.programManager.get({vs:t,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}yx(e instanceof tS,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new JM(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Ux&&t.delete()}}_setAnimationProps(e){this.animated&&yx(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ex(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new OM(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),Ay.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ay.level<=2})(),e}_logDrawCallEnd(e,t,n,r){if(void 0===e)return;const i=function(e){let{vertexArray:t,header:n="Attributes"}=e;if(!t.configuration)return{};const r={};t.elements&&(r.ELEMENT_ARRAY_BUFFER=XM(t,t.elements,null,n));const i=t.values;for(const o in i){const e=t._getAttributeInfo(o);if(e){let s="".concat(o,": ").concat(e.name);const a=t.accessors[e.location];a&&(s="".concat(o,": ").concat(YM(e.name,a))),r[s]=XM(t,i[o],a,n)}}return r}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:s,unusedCount:a}=qM({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:c}=qM({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Ay.log("MISSING UNIFORMS",Object.keys(l))(),a>0&&Ay.log("UNUSED UNIFORMS",Object.keys(s))();const u=function(e){const t={},n="Accessors for ".concat(e.id);for(const r of e.attributeInfos)if(r){const e=$M(r);t["in ".concat(e)]={[n]:JSON.stringify(r.accessor)}}for(const r of e.varyingInfos)if(r){const e=$M(r);t["out ".concat(e)]={[n]:JSON.stringify(r.accessor)}}return t}(this.vertexArray.configuration);Ay.table(e,i)(),Ay.table(e,o)(),Ay.table(e+1,u)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),Ay.groupEnd(2)()}}class sP{static isSupported(e){return my(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:n}=this;e&&e.delete(),t&&t.delete(),n&&n.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,n=this._updateDrawOptions(e);t&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t)e=e||n.swap();yx(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t){const t=n.getData(e);if(t)return t}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t)n.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new oP(t,Object.assign({},e,{fs:e.fs||BM({version:RM(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(e){if(!Ex(e.feedbackBuffers)||!Ex(e.feedbackMap)||e.varyings&&e.varyings.length>0)return!0;return!1})(t)&&(this.bufferTransform=new IM(e,t)),function(e){if(!Ex(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)return!0;return!1}(t)&&(this.textureTransform=new UM(e,t)),yx(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)t=Object.assign(t,r.getDrawOptions(t));return t}}const aP="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";const lP={interpolation:class{constructor(e){let{gl:t,attribute:n,timeline:r}=e;pt(this,"gl",void 0),pt(this,"type","interpolation"),pt(this,"attributeInTransition",void 0),pt(this,"settings",void 0),pt(this,"attribute",void 0),pt(this,"transition",void 0),pt(this,"currentStartIndices",void 0),pt(this,"currentLength",void 0),pt(this,"transform",void 0),pt(this,"buffers",void 0),this.gl=t,this.transition=new IS(r),this.attribute=n,this.attributeInTransition=new MM(t,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function(e,t){const n=_M(t.size);return new sP(e,{vs:aP,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(t,n);const i={byteLength:0,usage:35050};this.buffers=[new Ux(t,i),new Ux(t,i)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{gl:n,buffers:r,attribute:i}=this;SM(r);const o={numInstances:t,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const s of r)EM({buffer:s,...o});this.currentStartIndices=i.startIndices,this.currentLength=CM(i,t),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:wM(0,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:e,easing:t}=this.settings,{time:n}=this.transition;let r=n/e;t&&(r=t(r)),this.transform.run({uniforms:{time:r}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class{constructor(e){let{gl:t,attribute:n,timeline:r}=e;pt(this,"gl",void 0),pt(this,"type","spring"),pt(this,"attributeInTransition",void 0),pt(this,"settings",void 0),pt(this,"attribute",void 0),pt(this,"transition",void 0),pt(this,"currentStartIndices",void 0),pt(this,"currentLength",void 0),pt(this,"texture",void 0),pt(this,"framebuffer",void 0),pt(this,"transform",void 0),pt(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new IS(r),this.attribute=n,this.attributeInTransition=new MM(t,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function(e){return new Xx(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(t),this.framebuffer=function(e,t){return new zw(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:t}})}(t,this.texture),this.transform=function(e,t,n){const r=_M(t.size);return new sP(e,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(t,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Ux(t,i),new Ux(t,i),new Ux(t,i)]}get inProgress(){return this.transition.inProgress}start(e,t){const{gl:n,buffers:r,attribute:i}=this,o={numInstances:t,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const s of r)EM({buffer:s,...o});this.settings=e,this.currentStartIndices=i.startIndices,this.currentLength=CM(i,t),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:wM(0,i)}})}update(){const{buffers:e,transform:t,framebuffer:n,transition:r}=this;if(!r.update())return!1;const i=this.settings;t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.stiffness,damping:i.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),SM(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value});return aw(n)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class cP{constructor(e,t){let{id:n,timeline:r}=t;pt(this,"id",void 0),pt(this,"isSupported",void 0),pt(this,"gl",void 0),pt(this,"timeline",void 0),pt(this,"transitions",void 0),pt(this,"needsRedraw",void 0),pt(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=sP.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update(e){let{attributes:t,transitions:n,numInstances:r}=e;this.numInstances=r||1;for(const i in t){const e=t[i],r=e.getTransitionSetting(n);r&&this._updateAttribute(i,e,r)}for(const i in this.transitions){const e=t[i];e&&e.getTransitionSetting(n)||this._removeTransition(i)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,n){const r=this.transitions[e];let i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void Op.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=lP[n.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(Op.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const uP="attributeManager.invalidate";class dP{constructor(e){let{id:t="attribute-manager",stats:n,timeline:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pt(this,"id",void 0),pt(this,"gl",void 0),pt(this,"attributes",void 0),pt(this,"updateTriggers",void 0),pt(this,"needsRedraw",void 0),pt(this,"userData",void 0),pt(this,"stats",void 0),pt(this,"attributeTransitionManager",void 0),pt(this,"mergeBoundsMemoized",dS(rv)),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new cP(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const n=this._invalidateTrigger(e,t);Lp(uP,this,e,n)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Lp(uP,this,"all")}update(e){let{data:t,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:s={},context:a={}}=e,l=!1;Lp("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const e=this.attributes[c],i=e.settings.accessor;e.startIndices=r,e.numInstances=n,o[c]&&Op.removed("props.".concat(c),"data.attributes.".concat(c))(),e.setExternalBuffer(s[c])||e.setBinaryValue("string"===typeof i?s[i]:void 0,t.startIndices)||"string"===typeof i&&!s[i]&&e.setConstantValue(o[i])||e.needsUpdate()&&(l=!0,this._updateAttribute({attribute:e,numInstances:n,data:t,props:o,context:a})),this.needsRedraw=this.needsRedraw||e.needsRedraw()}l&&Lp("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getBounds(e){const t=e.map((e=>{var t;return null===(t=this.attributes[e])||void 0===t?void 0:t.getBounds()}));return this.mergeBoundsMemoized(t)}getChangedAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:t,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in t){const o=t[i];o.needsRedraw(e)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getShaderAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e||(e=this.getAttributes());const n={};for(const r in e)t[r]||Object.assign(n,e[r].getShaderAttributes());return n}_add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n in e){const r=e[n];this.attributes[n]=this._createAttribute(n,r,t)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,n){const r={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:n.instanced?1:t.divisor||0};return new MM(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes){this.attributes[t].getUpdateTriggers().forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)}))}this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:n,updateTriggers:r}=this,i=r[e];return i&&i.forEach((e=>{const r=n[e];r&&r.setNeedsUpdate(r.id,t)})),i}_updateAttribute(e){const{attribute:t,numInstances:n}=e;if(Lp("attribute.updateStart",t),t.constant)return void t.setConstantValue(t.value);t.allocate(n)&&Lp("attribute.allocate",t,n);t.updateBuffer(e)&&(this.needsRedraw=!0,Lp("attribute.updateEnd",t,n))}}const AP=1e-5;function hP(e,t,n,r,i){const o=t-e;return(n-t)*i+-o*r+o+t}function fP(e,t){if(Array.isArray(e)){let n=0;for(let r=0;r<e.length;r++){const i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}return Math.abs(e-t)}const pP={interpolation:class extends IS{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:n,duration:r,easing:i}}=this,o=i(e/r);this._value=Mm(t,n,o)}},spring:class extends IS{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:n,stiffness:r}=this.settings,{_prevValue:i=e,_currValue:o=e}=this;let s=function(e,t,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=hP(e[s],t[s],n[s],r,i);return o}return hP(e,t,n,r,i)}(i,o,t,n,r);const a=fP(s,t),l=fP(s,o);a<AP&&l<AP&&(s=t,this.end()),this._prevValue=o,this._currValue=s}}};class gP{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,n,r){const{transitions:i}=this;if(i.has(e)){const n=i.get(e),{value:r=n.settings.fromValue}=n;t=r,this.remove(e)}if(!(r=xM(r)))return;const o=pP[r.type];if(!o)return void Op.error("unsupported transition type '".concat(r.type,"'"))();const s=new o(this.timeline);s.start({...r,fromValue:t,toValue:n}),i.set(e,s)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,n]of this.transitions)n.update(),e[t]=n.value,n.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function mP(e,t){const n=bP({newProps:e,oldProps:t,propTypes:e[sp],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=e;r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&i&&(n=i(e.data,t.data)||n);return n}(e,t);let i=!1;return r||(i=function(e,t){if(null===t)return{all:!0};if("all"in e.updateTriggers){if(wP(e,t,"all"))return{all:!0}}const n={};let r=!1;for(const i in e.updateTriggers)if("all"!==i){wP(e,t,i)&&(n[i]=!0,r=!0)}return!!r&&n}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:xP(e,t),transitionsChanged:vP(e,t)}}function vP(e,t){if(!e.transitions)return!1;const n={},r=e[sp];let i=!1;for(const o in e.transitions){const s=r[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&yP(e[o],t[o],s)&&(n[o]=!0,i=!0)}return!!i&&n}function bP(e){let{newProps:t,oldProps:n,ignoreProps:r={},propTypes:i={},triggerName:o="props"}=e;if(n===t)return!1;if("object"!==typeof t||null===t)return"".concat(o," changed shallowly");if("object"!==typeof n||null===n)return"".concat(o," changed shallowly");for(const s of Object.keys(t))if(!(s in r)){if(!(s in n))return"".concat(o,".").concat(s," added");const e=yP(t[s],n[s],i[s]);if(e)return"".concat(o,".").concat(s," ").concat(e)}for(const s of Object.keys(n))if(!(s in r)){if(!(s in t))return"".concat(o,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const e=yP(t[s],n[s],i[s]);if(e)return"".concat(o,".").concat(s," ").concat(e)}}return!1}function yP(e,t,n){let r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||(r=e&&t&&e.equals,!r||r.call(e,t))?r||t===e?null:"changed shallowly":"changed deeply"}function xP(e,t){if(null===t)return!0;const n=t.extensions,{extensions:r}=e;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function wP(e,t,n){let r=e.updateTriggers[n];r=void 0===r||null===r?{}:r;let i=t.updateTriggers[n];i=void 0===i||null===i?{}:i;return bP({oldProps:i,newProps:r,triggerName:n})}function _P(e){if(null===(t=e)||"object"!==typeof t)throw new Error("count(): argument not an object");var t;if("function"===typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===typeof e&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}function SP(e,t){if(!t)return e;const n={...e,...t};if("defines"in t&&(n.defines={...e.defines,...t.defines}),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((e=>"project64"===e.name)))){const e=n.modules.findIndex((e=>"project32"===e.name));e>=0&&n.modules.splice(e,1)}if("inject"in t)if(e.inject){const r={...e.inject};for(const e in t.inject)r[e]=(r[e]||"")+t.inject[e];n.inject=r}else n.inject=t.inject;return n}const CP=[0,0,0];function EP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.projectPosition(e);if(n&&t instanceof OS){const[n,i,o=0]=e,s=t.getDistanceScales([n,i]);r[2]=o*s.unitsPerMeter[2]}return r}function MP(e,t){let{viewport:n,modelMatrix:r,coordinateSystem:i,coordinateOrigin:o,offsetMode:s}=t,[a,l,c=0]=e;switch(r&&([a,l,c]=xv([],[a,l,c,1],r)),i){case db.LNGLAT:return EP([a,l,c],n,s);case db.LNGLAT_OFFSETS:return EP([a+o[0],l+o[1],c+(o[2]||0)],n,s);case db.METER_OFFSETS:return EP(Zv(o,[a,l,c]),n,s);case db.CARTESIAN:default:return n.isGeospatial?[a+o[0],l+o[1],c+o[2]]:n.projectPosition([a,l,c])}}function PP(e,t){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(e){const{viewport:t,modelMatrix:n,coordinateOrigin:r}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=e;return i===db.DEFAULT&&(i=t.isGeospatial?db.LNGLAT:db.CARTESIAN),void 0===o&&(o=i),void 0===s&&(s=r),{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(t),{autoOffset:l=!0}=t,{geospatialOrigin:c=CP,shaderCoordinateOrigin:u=CP,offsetMode:d=!1}=l?vS(n,r,i):{},A=MP(e,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});if(d){const e=n.projectPosition(c||u);Hm(A,A,e)}return A}const TP={10241:9987,10240:9729,10242:33071,10243:33071},kP={};const BP={boolean:{validate:(e,t)=>!0,equal:(e,t,n)=>Boolean(e)===Boolean(t)},number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},color:{validate:(e,t)=>t.optional&&!e||RP(e)&&(3===e.length||4===e.length),equal:(e,t,n)=>CS(e,t,1)},accessor:{validate(e,t){const n=LP(e);return"function"===n||n===LP(t.value)},equal:(e,t,n)=>"function"===typeof t||CS(e,t,1)},array:{validate:(e,t)=>t.optional&&!e||RP(e),equal(e,t,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?CS(e,t,i):e===t}},object:{equal(e,t,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?CS(e,t,i):e===t}},function:{validate:(e,t)=>t.optional&&!e||"function"===typeof e,equal:(e,t,n)=>!n.compare&&!1!==n.ignore||e===t},data:{transform:(e,t,n)=>{const{dataTransform:r}=n.props;return r&&e?r(e):e}},image:{transform:(e,t,n)=>{const r=n.context;return r&&r.gl?function(e,t,n,r){if(n instanceof Xx)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const o=new Xx(t,{...n,parameters:{...TP,...i,...r}});return kP[o.id]=e,o}(n.id,r.gl,e,{...t.parameters,...n.props.textureParameters}):null},release:(e,t,n)=>{var r,i;r=n.id,(i=e)&&i instanceof Xx&&kP[i.id]===r&&(i.delete(),delete kP[i.id])}}};function OP(e,t){switch(LP(t)){case"object":return IP(e,t);case"array":return IP(e,{type:"array",value:t,compare:!1});case"boolean":return IP(e,{type:"boolean",value:t});case"number":return IP(e,{type:"number",value:t});case"function":return IP(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function IP(e,t){return"type"in t?{name:e,...BP[t.type],...t}:"value"in t?{name:e,type:LP(t.value),...t}:{name:e,type:"object",value:t}}function RP(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function LP(e){return RP(e)?"array":null===e?"null":typeof e}const DP="_mergedDefaultProps";function FP(e,t){let n=DP;if(t)for(const i of t){const e=i.constructor;e&&(n+=":".concat(e.extensionName||e.name))}const r=jP(e,n);return r||(e[n]=function(e,t){const n=e.prototype;if(!n)return null;const r=Object.getPrototypeOf(e),i=FP(r),o=jP(e,"defaultProps")||{},s=function(e){const t={},n={},r={};for(const[i,o]of Object.entries(e)){const e=null===o||void 0===o?void 0:o.deprecatedFor;if(e)r[i]=Array.isArray(e)?e:[e];else{const e=OP(i,o);t[i]=e,n[i]=e.value}}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(o),a=Object.assign(Object.create(null),i,s.defaultProps),l=Object.assign(Object.create(null),null===i||void 0===i?void 0:i[sp],s.propTypes),c=Object.assign(Object.create(null),null===i||void 0===i?void 0:i[ap],s.deprecatedProps);for(const u of t){const e=FP(u.constructor);e&&(Object.assign(a,e),Object.assign(l,e[sp]),Object.assign(c,e[ap]))}(function(e,t){const n=function(e){const t=e.componentName;t||Op.warn("".concat(e.name,".componentName not specified"))();return t||e.name}(t);Object.defineProperties(e,{id:{writable:!0,value:n}})})(a,e),function(e,t){const n={},r={};for(const i in t){const e=t[i],{name:o,value:s}=e;e.async&&(n[o]=s,r[o]=NP(o))}e[lp]=n,e[cp]={},Object.defineProperties(e,r)}(a,l),function(e,t){for(const n in t)Object.defineProperty(e,n,{enumerable:!1,set(e){const r="".concat(this.id,": ").concat(n);for(const i of t[n])zP(this,i)||(this[i]=e);Op.deprecated(r,t[n].join("/"))()}})}(a,c),a[sp]=l,a[ap]=c,0!==t.length||zP(e,"_propTypes")||(e._propTypes=l);return a}(e,t||[]))}function NP(e){return{enumerable:!0,set(t){"string"===typeof t||t instanceof Promise||pM(t)?this[cp][e]=t:this[up][e]=t},get(){if(this[up]){if(e in this[up]){return this[up][e]||this[lp][e]}if(e in this[cp]){const t=this[op]&&this[op].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[lp][e]}}return this[lp][e]}}}function zP(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jP(e,t){return zP(e,t)&&e[t]}let UP=0;class GP{constructor(){pt(this,"id",void 0),pt(this,"props",void 0),pt(this,"count",void 0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.props=function(e,t){let n;for(let o=t.length-1;o>=0;o--){const e=t[o];"extensions"in e&&(n=e.extensions)}const r=FP(e.constructor,n),i=Object.create(r);i[op]=e,i[cp]={},i[up]={};for(let o=0;o<t.length;++o){const e=t[o];for(const t in e)i[t]=e[t]}return Object.freeze(i),i}(this,t),this.id=this.props.id,this.count=UP++}clone(e){const{props:t}=this,n={};for(const r in t[lp])r in t[up]?n[r]=t[up][r]:r in t[cp]&&(n[r]=t[cp][r]);return new this.constructor({...t,...n,...e})}}pt(GP,"componentName","Component"),pt(GP,"defaultProps",{});const VP=Object.freeze({});class HP{constructor(e){pt(this,"component",void 0),pt(this,"onAsyncPropUpdated",void 0),pt(this,"asyncProps",void 0),pt(this,"oldProps",void 0),pt(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||VP}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){this.component=e[op]||this.component;const t=e[up]||{},n=e[cp]||e,r=e[lp]||{};for(const i in t){const e=t[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,e),t[i]=this.getAsyncProp(i)}for(const i in n){const e=n[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,e)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){this._didAsyncInputValueChange(e,t)&&("string"===typeof t&&(t=this._fetch(e,t)),t instanceof Promise?this._watchPromise(e,t):pM(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,t,n){const r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;t.then((t=>{this.component&&(t=this._postProcessValue(n,t),this._setAsyncPropValue(e,t,r),this._onResolve(e,t))})).catch((t=>{this._onError(e,t)}))}}async _resolveAsyncIterable(e,t){if("data"!==e)return void this._setPropValue(e,t);const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],o=0;for await(const s of t){if(!this.component)return;const{dataTransform:t}=this.component.props;i=t?t(s,i):i.concat(s),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(e,i,r)}this._onResolve(e,i)}_postProcessValue(e,t){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const n=this.component&&this.component.props[sp];this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class WP extends HP{constructor(e){let{attributeManager:t,layer:n}=e;super(n),pt(this,"attributeManager",void 0),pt(this,"needsRedraw",void 0),pt(this,"needsUpdate",void 0),pt(this,"subLayers",void 0),pt(this,"usesPickingColorCache",void 0),pt(this,"hasPickingBuffer",void 0),pt(this,"changeFlags",void 0),pt(this,"viewport",void 0),pt(this,"uniformTransitions",void 0),pt(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,t){const n=this.layer,r=null===n||void 0===n?void 0:n.props.fetch;return r?r(t,{propName:e,layer:n}):super._fetch(e,t)}_onResolve(e,t){const n=this.layer;if(n){const r=n.props.onDataLoad;"data"===e&&r&&r(t,{propName:e,layer:n})}}_onError(e,t){const n=this.layer;n&&n.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const QP=2**24-1,JP=Object.freeze([]),KP=dS((e=>{let{oldViewport:t,viewport:n}=e;return t.equals(n)}));let XP=new Uint8ClampedArray(0);const YP={data:{type:"data",value:JP,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(e,t)=>{let{propName:n,layer:r,loaders:i,loadOptions:o,signal:s}=t;const{resourceManager:a}=r.context;var l;(o=o||r.getLoadOptions(),i=i||r.props.loaders,s)&&(o={...o,fetch:{...null===(l=o)||void 0===l?void 0:l.fetch,signal:s}});let c=a.contains(e);return c||o||(a.add({resourceId:e,data:bm(e,i),persistent:!1}),c=!0),c?a.subscribe({resourceId:e,onChange:e=>{var t;return null===(t=r.internalState)||void 0===t?void 0:t.reloadAsyncProp(n,e)},consumerId:r.id,requestId:n}):bm(e,i,o)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:db.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:e=>{let{layerIndex:t}=e;return[0,100*-t]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class qP extends GP{constructor(){super(...arguments),pt(this,"internalState",null),pt(this,"lifecycle",$f),pt(this,"context",void 0),pt(this,"state",void 0),pt(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){kS(this.internalState);const t=this.internalState.viewport||this.context.viewport,n=MP(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=nb(n,t.pixelProjectionMatrix);return 2===e.length?[r,i]:[r,i,o]}unproject(e){kS(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){kS(this.internalState);return PP(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===db.DEFAULT||e===db.LNGLAT||e===db.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){kS(e instanceof Uint8Array);const[t,n,r]=e;return t+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:_P(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const t of this.props.extensions)e=SP(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&t)if(Array.isArray(n))for(const r of n)t.invalidateAll(r);else t.invalidateAll();if(t){const{props:n}=e,r=this.internalState.hasPickingBuffer,i=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((e=>e.getNeedsPickingBuffer.call(this,e)));if(r!==i){this.internalState.hasPickingBuffer=i;const{pickingColors:e,instancePickingColors:n}=t.attributes,r=e||n;r&&(i&&r.constant&&(r.constant=!1,t.invalidate(r.id)),r.value||i||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(e){for(const n of this.getModels())n.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo(e){let{info:t,mode:n,sourceLayer:r}=e;const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(e,t){var n,r,i,o;(t&&(e=new Error("".concat(t,": ").concat(e.message),{cause:e})),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,e))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,e,this))}getNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,t&&KP({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,n=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:n,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),n=Object.create(this.props);for(const e in t)Object.defineProperty(n,e,{value:t[e]});return n}return this.props}calculateInstancePickingColors(e,t){let{numInstances:n}=t;if(e.constant)return;const r=Math.floor(XP.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>QP&&Op.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),XP=wm.allocate(XP,n,{size:3,copy:!0,maxCount:Math.max(n,QP)});const e=Math.floor(XP.length/3),t=[];for(let n=r;n<e;n++)this.encodePickingColor(n,t),XP[3*n+0]=t[0],XP[3*n+1]=t[1],XP[3*n+2]=t[2]}e.value=XP.subarray(0,3*n)}_setModelAttributes(e,t){const n=this.getAttributeManager(),r=e.userData.excludeAttributes||{},i=n.getShaderAttributes(t,r);e.setAttributes(i)}disablePickingIndex(e){const t=this.props.data;if(!("attributes"in t))return void this._disablePickingIndex(e);const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,o=i&&t.attributes&&t.attributes[i.id];if(o&&o.value){const n=o.value,r=this.encodePickingColor(e);for(let e=0;e<t.length;e++){const t=i.getVertexOffset(e);n[t]===r[0]&&n[t+1]===r[1]&&n[t+2]===r[2]&&this._disablePickingIndex(e)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:n}=this.getAttributeManager().attributes,r=t||n;if(!r)return;const i=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,n=e||t;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==XP.buffer&&(n.value=XP.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){kS(!this.internalState),kS(Number.isFinite(this.props.coordinateSystem)),Lp("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new WP({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Op.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new gP(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Lp("layer.matched",this,this===e);const{state:t,internalState:n}=e;this!==e&&(this.internalState=n,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Lp("layer.update",this,e),!e)return;const t=this.props,n=this.context,r=this.internalState,i=n.viewport,o=this._updateUniformTransition();r.propsInTransition=o,n.viewport=r.viewport||i,this.props=o;try{const e=this._getUpdateParams(),t=this.getModels();if(n.gl)this.updateState(e);else try{this.updateState(e)}catch(s){}for(const n of this.props.extensions)n.updateState.call(this,e,n);const r=this.getModels()[0]!==t[0];this._postUpdate(e,r)}finally{n.viewport=i,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Lp("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer(e){let{moduleParameters:t=null,uniforms:n={},parameters:r={}}=e;this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:e}=this.props,i=e&&e(n)||[0,0];ox(o.gl,{polygonOffset:i}),ax(o.gl,r,(()=>{const e={moduleParameters:t,uniforms:n,parameters:r,context:o};for(const t of this.props.extensions)t.draw.call(this,e,t);this.draw(e)}))}finally{this.props=i}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let n=!1;if("dataChanged"===r){const i=e[r],o=t[r];i&&Array.isArray(o)&&(t.dataChanged=Array.isArray(i)?o.concat(i):i,n=!0)}t[r]||(t[r]=e[r],n=!0),n&&Lp("layer.changeFlag",this,r,e)}const n=Boolean(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=n,t.somethingChanged=n||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const n=mP(e,t);if(n.updateTriggersChanged)for(const i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(n.transitionsChanged)for(const i in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(i,t[i],e[i],null===(r=e.transitions)||void 0===r?void 0:r[i])}return this.setChangeFlags(n)}validateProps(){!function(e){const t=e[sp];for(const n in t){const r=t[n],{validate:i}=r;if(i&&!i(e[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&"function"===typeof n&&(t.pickingHighlightColor=n(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new dP(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:n,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;null===i||void 0===i||i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(t||r.autoHighlight!==o||r.highlightedObjectIndex!==s||r.highlightColor!==a){const e={};o||(e.pickingSelectedColor=null),Array.isArray(a)&&(e.pickingHighlightColor=a),(t||s!==r.highlightedObjectIndex)&&(e.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(e)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(e);if(t=t||r,t)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}pt(qP,"defaultProps",YP),pt(qP,"layerName","Layer");const ZP={position:"absolute",zIndex:-1};function $P(e,t){if("function"===typeof e)return e(t);if(Array.isArray(e))return e.map((e=>$P(e,t)));if(eT(e)){if(function(e){var t;return null===(t=e.props)||void 0===t?void 0:t.mapStyle}(e))return t.style=ZP,(0,A.cloneElement)(e,t);if(function(e){const t=e.type;return t&&t.deckGLViewProps}(e))return(0,A.cloneElement)(e,t)}return e}function eT(e){return e&&"object"===typeof e&&"type"in e||!1}function tT(e){if("function"===typeof e)return(0,A.createElement)(BS,{},e);if(Array.isArray(e))return e.map(tT);if(eT(e)){if(e.type===A.Fragment)return tT(e.props.children);if(aM(e.type,BS))return e}return e}const nT={mixBlendMode:null};function rT(e){e.redrawReason&&(e.deck._drawLayers(e.redrawReason),e.redrawReason=null)}const iT=(0,A.forwardRef)(((e,t)=>{const[n,r]=(0,A.useState)(0),i=(0,A.useRef)({control:null,version:n,forceUpdate:()=>r((e=>e+1))}),o=i.current,s=(0,A.useRef)(null),a=(0,A.useRef)(null),l=(0,A.useMemo)((()=>function(e){let{children:t,layers:n=[],views:r=null}=e;const i=[],o=[],s={};return A.Children.forEach(tT(t),(e=>{if(eT(e)){const t=e.type;if(aM(t,qP)){const n=function(e,t){const n={},r=e.defaultProps||{};for(const i in t)r[i]!==t[i]&&(n[i]=t[i]);return new e(n)}(t,e.props);o.push(n)}else i.push(e);if(aM(t,BS)&&t!==BS&&e.props.id){const n=new t(e.props);s[n.id]=n}}else e&&i.push(e)})),Object.keys(s).length>0&&(Array.isArray(r)?r.forEach((e=>{s[e.id]=e})):r&&(s[r.id]=r),r=Object.values(s)),n=o.length>0?[...o,...n]:n,{layers:n,children:i,views:r}}(e)),[e.layers,e.views,e.children]);let c=!0;const u=t=>{var n;return c&&e.viewState?(o.viewStateUpdateRequested=t,null):(o.viewStateUpdateRequested=null,null===(n=e.onViewStateChange)||void 0===n?void 0:n.call(e,t))},d=t=>{var n;c?o.interactionStateUpdateRequested=t:(o.interactionStateUpdateRequested=null,null===(n=e.onInteractionStateChange)||void 0===n||n.call(e,t))},h=(0,A.useMemo)((()=>{const t={...e,style:null,width:"100%",height:"100%",parent:s.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:d};return delete t._customRender,o.deck&&o.deck.setProps(t),t}),[e]);(0,A.useEffect)((()=>{const t=e.Deck||oM;return o.deck=function(e,t,n){const r=new t({...n,_customRender:t=>{e.redrawReason=t;const n=r.getViewports();e.lastRenderedViewports!==n?e.forceUpdate():rT(e)}});return r}(o,t,{...h,parent:s.current,canvas:a.current}),()=>{var e;return null===(e=o.deck)||void 0===e?void 0:e.finalize()}}),[]),sM((()=>{rT(o);const{viewStateUpdateRequested:e,interactionStateUpdateRequested:t}=o;e&&u(e),t&&d(t)})),(0,A.useImperativeHandle)(t,(()=>function(e){return{get deck(){return e.deck},pickObject:t=>e.deck.pickObject(t),pickMultipleObjects:t=>e.deck.pickMultipleObjects(t),pickObjects:t=>e.deck.pickObjects(t)}}(o)),[]);const f=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:p,width:g,height:m,id:v,style:b}=e,{containerStyle:y,canvasStyle:x}=(0,A.useMemo)((()=>function(e){let{width:t,height:n,style:r}=e;const i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:n},o={left:0,top:0};if(r)for(const s in r)s in nT?o[s]=r[s]:i[s]=r[s];return{containerStyle:i,canvasStyle:o}}({width:g,height:m,style:b})),[g,m,b]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===f||o.version!==n){o.lastRenderedViewports=f,o.version=n;const e=function(e){let{children:t,deck:n,ContextProvider:r}=e;const{viewManager:i}=n||{};if(!i||!i.views.length)return[];const o={},s=i.views[0].id;for(const a of t){let e=s,t=a;eT(a)&&aM(a.type,BS)&&(e=a.props.id||s,t=a.props.children);const n=i.getViewport(e),r=i.getViewState(e);if(n){r.padding=n.padding;const{x:i,y:s,width:a,height:l}=n;t=$P(t,{x:i,y:s,width:a,height:l,viewport:n,viewState:r}),o[e]||(o[e]={viewport:n,children:[]}),o[e].children.push(t)}}return Object.keys(o).map((e=>{const{viewport:t,children:i}=o[e],{x:s,y:a,width:l,height:c}=t,u={position:"absolute",left:s,top:a,width:l,height:c},d="view-".concat(e),h=(0,A.createElement)("div",{key:d,id:d,style:u},...i);if(r){const i={viewport:t,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:t=>{t.viewId=e,n._onViewStateChange(t)}};return(0,A.createElement)(r,{key:d,value:i},h)}return h}))}({children:l.children,deck:o.deck,ContextProvider:p}),t=(0,A.createElement)("canvas",{key:"canvas",id:v||"deckgl-overlay",ref:a,style:x});o.control=(0,A.createElement)("div",{id:"".concat(v||"deckgl","-wrapper"),ref:s,style:y},[t,e])}return c=!1,o.control}));iT.defaultProps=oM.defaultProps;const oT=iT,sT=A.createContext(null);function aT(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function lT(e,t){const n=t.viewState||t;let r=!1;if("longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),r=r||t!==e.center}if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,r=r||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,r=r||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,r=r||t!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}const cT=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function uT(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map((e=>{const n=t[e.ref];let r=null;if("interactive"in e&&(r={...e},delete r.interactive),n){r=r||{...e},delete r.ref;for(const e of cT)e in n&&(r[e]=n[e])}return r||e}));return{...e,layers:n}}function dT(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!dT(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){if(!t.hasOwnProperty(i))return!1;if(!dT(e[i],t[i]))return!1}return!0}return!1}const AT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},hT={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},fT={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},pT=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],gT=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class mT{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[fT[e.type]];t&&t(e)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[AT[e.type]];if(t){if(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type){const t=this._hoveredFeatures||this._map.queryRenderedFeatures(e.point,{layers:this.props.interactiveLayerIds});e.features=t}t(e),delete e.features}},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[hT[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const r=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=mT.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(t.className=i.className;i.childNodes.length>0;)t.appendChild(i.childNodes[0]);r._container=t,n.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:o}=e;return o&&(o.bounds?r.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):n._updateViewState(o,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),n}_initialize(e){const{props:t}=this,n={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||vT()||null,container:e,style:uT(t.mapStyle)},r=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const i=new this._MapClass(n);r.padding&&i.setPadding(r.padding),t.cursor&&(i.getCanvas().style.cursor=t.cursor),this._createShadowTransform(i);const o=i._render;i._render=e=>{this._inRender=!0,o.call(i,e),this._inRender=!1};const s=i._renderTaskQueue.run;i._renderTaskQueue.run=e=>{s.call(i._renderTaskQueue,e),this._onBeforeRepaint()},i.on("render",(()=>this._onAfterRepaint()));const a=i.fire;i.fire=this._fireEvent.bind(this,a),i.on("resize",(()=>{this._renderTransform.resize(i.transform.width,i.transform.height)})),i.on("styledata",(()=>this._updateStyleComponents(this.props,{}))),i.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const l in AT)i.on(l,this._onPointerEvent);for(const l in hT)i.on(l,this._onCameraEvent);for(const l in fT)i.on(l,this._onEvent);this._map=i}recycle(){mT.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:o,bearing:s}=r,a=n.isMoving();a&&(r.cameraElevationReference="sea");const l=lT(r,{...aT(n.transform),...e});if(a&&(r.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=i!==r.zoom),e.rotate||(e.rotate=s!==r.bearing),e.pitch||(e.pitch=o!==r.pitch)}return a||lT(n.transform,e),l}_updateSettings(e,t){const n=this._map;let r=!1;for(const i of pT)i in e&&!dT(e[i],t[i])&&(r=!0,n["set".concat(i[0].toUpperCase()).concat(i.slice(1))](e[i]));return r}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){const t={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(t.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(uT(e.mapStyle),t),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let r=!1;return n.style.loaded()&&("light"in e&&!dT(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&!dT(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&!dT(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}_updateHandlers(e,t){const n=this._map;let r=!1;for(const i of gT){const o=e[i];dT(o,t[i])||(r=!0,o?n[i].enable(o):n[i].disable())}return r}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const i=e.type,o=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0;let s;if("mousemove"===i)try{s=this._map.queryRenderedFeatures(e.point,{layers:n.interactiveLayerIds})}catch(r){s=[]}else s=[];const a=s.length>0;!a&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=s,a&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=i}else this._hoveredFeatures=null}_fireEvent(e,t,n){const r=this._map,i=r.transform,o="string"===typeof t?t:t.type;return"move"===o&&this._updateViewState(this.props,!1),o in hT&&("object"===typeof t&&(t.viewState=aT(i)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=i,r):(e.call(r,t,n),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const t=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=t}}}function vT(){let e=null;if("undefined"!==typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"https://cityscope.media.mit.edu/CS_cityscopeJS",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg"}.MapboxAccessToken}catch(t){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"https://cityscope.media.mit.edu/CS_cityscopeJS",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg"}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(n){}return e}mT.savedMaps=[];const bT=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function yT(e,t){if(!e)return null;const n=e.map,r={getMap:()=>n,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>e.transform.locationPoint(t.LngLat.convert(n)),unproject:n=>e.transform.pointLocation(t.Point.convert(n)),queryTerrainElevation:(t,r)=>{const i=n.transform;n.transform=e.transform;const o=n.queryTerrainElevation(t,r);return n.transform=i,o}};for(const i of function(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"===typeof e[r]&&"fire"!==r&&"setEventedParent"!==r&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}(n))i in r||bT.includes(i)||(r[i]=n[i].bind(n));return r}const xT="undefined"!==typeof document?A.useLayoutEffect:A.useEffect,wT=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const _T=A.createContext(null),ST={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},CT=(0,A.forwardRef)(((e,t)=>{const r=(0,A.useContext)(sT),[i,o]=(0,A.useState)(null),s=(0,A.useRef)(),{current:a}=(0,A.useRef)({mapLib:null,map:null});(0,A.useEffect)((()=>{const t=e.mapLib;let i,l=!0;return Promise.resolve(t||n.e(879).then(n.t.bind(n,879,23))).then((t=>{if(l){if(t.Map||(t=t.default),!t||!t.Map)throw new Error("Invalid mapLib");if(!t.supported(e))throw new Error("Map is not supported by this browser");!function(e,t){for(const n of wT)n in t&&(e[n]=t[n]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(t.RTLTextPlugin,(e=>{e&&console.error(e)}),!1)}(t,e),e.reuseMaps&&(i=mT.reuse(e,s.current)),i||(i=new mT(t.Map,e,s.current)),a.map=yT(i,t),a.mapLib=t,o(i),null===r||void 0===r||r.onMapMount(a.map,e.id)}})).catch((t=>{e.onError({type:"error",target:null,originalEvent:null,error:t})})),()=>{l=!1,i&&(null===r||void 0===r||r.onMapUnmount(e.id),e.reuseMaps?i.recycle():i.destroy())}}),[]),xT((()=>{i&&i.setProps(e)})),(0,A.useImperativeHandle)(t,(()=>a.map),[i]);const l=(0,A.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...e.style})),[e.style]);return A.createElement("div",{id:e.id,ref:s,style:l},i&&A.createElement(_T.Provider,{value:a},e.children))}));CT.displayName="Map",CT.defaultProps=ST;const ET=CT,MT=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function PT(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const e=t[r];Number.isFinite(e)&&!MT.test(r)?n[r]="".concat(e,"px"):n[r]=e}}function TT(e){const{map:t,mapLib:n}=(0,A.useContext)(_T),r=(0,A.useRef)({props:e});r.current.props=e;const i=(0,A.useMemo)((()=>{let t=!1;A.Children.forEach(e.children,(e=>{e&&(t=!0)}));const o={...e,element:t?document.createElement("div"):null},s=new n.Marker(o).setLngLat([e.longitude,e.latitude]);return s.getElement().addEventListener("click",(e=>{var t,n;null===(n=(t=r.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:s,originalEvent:e})})),s.on("dragstart",(e=>{var t,n;const o=e;o.lngLat=i.getLngLat(),null===(n=(t=r.current.props).onDragStart)||void 0===n||n.call(t,o)})),s.on("drag",(e=>{var t,n;const o=e;o.lngLat=i.getLngLat(),null===(n=(t=r.current.props).onDrag)||void 0===n||n.call(t,o)})),s.on("dragend",(e=>{var t,n;const o=e;o.lngLat=i.getLngLat(),null===(n=(t=r.current.props).onDragEnd)||void 0===n||n.call(t,o)})),s}),[]);return(0,A.useEffect)((()=>(i.addTo(t.getMap()),()=>{i.remove()})),[]),(0,A.useEffect)((()=>{PT(i.getElement(),e.style)}),[e.style]),i.getLngLat().lng===e.longitude&&i.getLngLat().lat===e.latitude||i.setLngLat([e.longitude,e.latitude]),e.offset&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,o=Array.isArray(t)?t[1]:t?t.y:0;return n===i&&r===o}(i.getOffset(),e.offset)&&i.setOffset(e.offset),i.isDraggable()!==e.draggable&&i.setDraggable(e.draggable),i.getRotation()!==e.rotation&&i.setRotation(e.rotation),i.getRotationAlignment()!==e.rotationAlignment&&i.setRotationAlignment(e.rotationAlignment),i.getPitchAlignment()!==e.pitchAlignment&&i.setPitchAlignment(e.pitchAlignment),i.getPopup()!==e.popup&&i.setPopup(e.popup),(0,V.createPortal)(e.children,i.getElement())}TT.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};A.memo(TT);function kT(e){return new Set(e?e.trim().split(/\s+/):[])}A.memo((function(e){const{map:t,mapLib:n}=(0,A.useContext)(_T),r=(0,A.useMemo)((()=>document.createElement("div")),[]),i=(0,A.useRef)({props:e});i.current.props=e;const o=(0,A.useMemo)((()=>{const t={...e},r=new n.Popup(t).setLngLat([e.longitude,e.latitude]);return r.once("open",(e=>{var t,n;null===(n=(t=i.current.props).onOpen)||void 0===n||n.call(t,e)})),r}),[]);if((0,A.useEffect)((()=>{const e=e=>{var t,n;null===(n=(t=i.current.props).onClose)||void 0===n||n.call(t,e)};return o.on("close",e),o.setDOMContent(r).addTo(t.getMap()),()=>{o.off("close",e),o.isOpen()&&o.remove()}}),[]),(0,A.useEffect)((()=>{PT(o.getElement(),e.style)}),[e.style]),o.isOpen()&&(o.getLngLat().lng===e.longitude&&o.getLngLat().lat===e.latitude||o.setLngLat([e.longitude,e.latitude]),e.offset&&!dT(o.options.offset,e.offset)&&o.setOffset(e.offset),o.options.anchor===e.anchor&&o.options.maxWidth===e.maxWidth||(o.options.anchor=e.anchor,o.setMaxWidth(e.maxWidth)),o.options.className!==e.className)){const t=kT(o.options.className),n=kT(e.className);for(const e of t)n.has(e)||o.removeClassName(e);for(const e of n)t.has(e)||o.addClassName(e);o.options.className=e.className}return(0,V.createPortal)(e.children,r)}));const BT=function(e,t,n,r){const i=(0,A.useContext)(_T),o=(0,A.useMemo)((()=>e(i)),[]);return(0,A.useEffect)((()=>{const e=r||n||t,s="function"===typeof t&&"function"===typeof n?t:null,a="function"===typeof n?n:"function"===typeof t?t:null,{map:l}=i;return l.hasControl(o)||(l.addControl(o,null===e||void 0===e?void 0:e.position),s&&s(i)),()=>{a&&a(i),l.hasControl(o)&&l.removeControl(o)}}),[]),o};A.memo((function(e){const t=BT((t=>{let{mapLib:n}=t;return new n.AttributionControl(e)}),{position:e.position});return(0,A.useEffect)((()=>{PT(t._container,e.style)}),[e.style]),null}));A.memo((function(e){const t=BT((t=>{let{mapLib:n}=t;return new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return(0,A.useEffect)((()=>{PT(t._controlContainer,e.style)}),[e.style]),null}));const OT=(0,A.forwardRef)(((e,t)=>{const n=(0,A.useRef)({props:e}),r=BT((t=>{let{mapLib:r}=t;const i=new r.GeolocateControl(e),o=i._setupUI;return i._setupUI=e=>{i._container.hasChildNodes()||o(e)},i.on("geolocate",(e=>{var t,r;null===(r=(t=n.current.props).onGeolocate)||void 0===r||r.call(t,e)})),i.on("error",(e=>{var t,r;null===(r=(t=n.current.props).onError)||void 0===r||r.call(t,e)})),i.on("outofmaxbounds",(e=>{var t,r;null===(r=(t=n.current.props).onOutOfMaxBounds)||void 0===r||r.call(t,e)})),i.on("trackuserlocationstart",(e=>{var t,r;null===(r=(t=n.current.props).onTrackUserLocationStart)||void 0===r||r.call(t,e)})),i.on("trackuserlocationend",(e=>{var t,r;null===(r=(t=n.current.props).onTrackUserLocationEnd)||void 0===r||r.call(t,e)})),i}),{position:e.position});return n.current.props=e,(0,A.useImperativeHandle)(t,(()=>({trigger:()=>r.trigger()})),[]),(0,A.useEffect)((()=>{PT(r._container,e.style)}),[e.style]),null}));OT.displayName="GeolocateControl";A.memo(OT);A.memo((function(e){const t=BT((t=>{let{mapLib:n}=t;return new n.NavigationControl(e)}),{position:e.position});return(0,A.useEffect)((()=>{PT(t._container,e.style)}),[e.style]),null}));function IT(e){const t=BT((t=>{let{mapLib:n}=t;return new n.ScaleControl(e)}),{position:e.position});return t.options.unit===e.unit&&t.options.maxWidth===e.maxWidth||(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),(0,A.useEffect)((()=>{PT(t._container,e.style)}),[e.style]),null}IT.defaultProps={unit:"metric",maxWidth:100};A.memo(IT);function RT(e){var t;let{layers:n,draggingWhileEditing:r,setDeckGLRef:i}=e;const o=te((e=>e.cityIOdataState.cityIOdata)),s=te((e=>e.menuState)),[a,l]=(0,A.useState)(),c=(0,A.useRef)(null);(0,A.useEffect)((()=>{c.current&&i(c)}),[c]);const u=null===s||void 0===s||null===(t=s.viewSettingsMenuState)||void 0===t?void 0:t.VIEW_CONTROL_BUTTONS,d=()=>{const e=o.GEOGRID.properties.header,t=Vf(o);return{...a,longitude:t[0],latitude:t[1],zoom:15,pitch:45,bearing:360-e.rotation,orthographic:!1}};(0,A.useEffect)((()=>{const e=o.GEOGRID.properties.header,t=Vf(o);switch(u){case"RESET_VIEW_BUTTON":l((e=>({...e,longitude:t[0],latitude:t[1],pitch:0,bearing:0,orthographic:!1})));break;case"NORTH_VIEW_BUTTON":l((t=>({...t,bearing:360-e.rotation})));break;case"ORTHO_VIEW_BUTTON":l((e=>({...e,orthographic:!e.orthographic||!e.orthographic})))}}),[u]),(0,A.useEffect)((()=>{document.addEventListener("contextmenu",(e=>e.preventDefault())),d()}),[]);return(0,m.jsx)(oT,{ref:c,viewState:a,initialViewState:d(),onViewStateChange:e=>{let{viewState:t}=e;t.orthographic="ORTHO_VIEW_BUTTON"===u,l(t)},layers:n,controller:{touchZoom:!0,touchRotate:!0,dragPan:!r,dragRotate:!r,keyboard:!1},children:(0,m.jsx)(ET,{mapStyle:"mapbox://styles/relnox/ck0h5xn701bpr1dqs3he2lecq?fresh=true",mapboxAccessToken:"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg"})})}const LT={name:"project32",dependencies:[yS],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},DT="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",FT={lightSources:{}};function NT(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.map((e=>e*t/255))}const zT={name:"lights",vs:DT,fs:DT,getUniforms:function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FT;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},function(e){let{ambientLight:t,pointLights:n=[],directionalLights:r=[]}=e;const i={};return i["lighting_uAmbientLight.color"]=t?NT(t):[0,0,0],n.forEach(((e,t)=>{i["lighting_uPointLight[".concat(t,"].color")]=NT(e),i["lighting_uPointLight[".concat(t,"].position")]=e.position,i["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation||[1,0,0]})),i.lighting_uPointLightCount=n.length,r.forEach(((e,t)=>{i["lighting_uDirectionalLight[".concat(t,"].color")]=NT(e),i["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction})),i.lighting_uDirectionalLightCount=r.length,i}({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const n={pointLights:[],directionalLights:[]};for(const e of t.lights||[])switch(e.type){case"ambient":n.ambientLight=e;break;case"directional":n.directionalLights.push(e);break;case"point":n.pointLights.push(e)}return e({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},jT="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",UT={};function GT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UT;if(!("material"in e))return{};const{material:t}=e;return t?function(e){const{ambient:t=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map((e=>e/255))}}(t):{lighting_uEnabled:!1}}const VT={name:"gouraud-lighting",dependencies:[zT],vs:jT,defines:{LIGHTING_VERTEX:1},getUniforms:GT},HT={name:"phong-lighting",dependencies:[zT],fs:jT,defines:{LIGHTING_FRAGMENT:1},getUniforms:GT},WT={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const QT={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WT;const t={};if(void 0!==e.pickingSelectedColor)if(e.pickingSelectedColor){const n=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}else t.picking_uSelectedColorValid=0;if(e.pickingHighlightColor){const n=Array.from(e.pickingHighlightColor,(e=>e/255));Number.isFinite(n[3])||(n[3]=1),t.picking_uHighlightColor=n}return void 0!==e.pickingActive&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}},JT={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...QT},KT={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class XT{static get DRAW_MODE(){return KT}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=Sx("geometry"),drawMode:n=KT.TRIANGLES,attributes:r={},indices:i=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const n in e){let t=e[n];t=ArrayBuffer.isView(t)?{value:t}:t,yx(ArrayBuffer.isView(t.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||t.size||(t.size=3),"indices"===n?(yx(!this.indices),this.indices=t):this.attributes[n]=t}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let n=1/0;for(const r in e){const t=e[r],{value:i,size:o,constant:s}=t;!s&&i&&o>=1&&(n=Math.min(n,i.length/o))}return yx(Number.isFinite(n)),n}}const YT=Math.PI/180,qT=new Float32Array(16),ZT=new Float32Array(12);function $T(e,t,n){const r=t[0]*YT,i=t[1]*YT,o=t[2]*YT,s=Math.sin(o),a=Math.sin(r),l=Math.sin(i),c=Math.cos(o),u=Math.cos(r),d=Math.cos(i),A=n[0],h=n[1],f=n[2];e[0]=A*d*u,e[1]=A*l*u,e[2]=A*-a,e[3]=h*(-l*c+d*a*s),e[4]=h*(d*c+l*a*s),e[5]=h*u*s,e[6]=f*(l*s+d*a*c),e[7]=f*(-d*s+l*a*c),e[8]=f*u*c}function ek(e){return e[0]=e[0],e[1]=e[1],e[2]=e[2],e[3]=e[4],e[4]=e[5],e[5]=e[6],e[6]=e[8],e[7]=e[9],e[8]=e[10],e[9]=e[12],e[10]=e[13],e[11]=e[14],e.subarray(0,12)}const tk={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(e,t){let{startRow:n,endRow:r}=t;const{data:i,getOrientation:o,getScale:s,getTranslation:a,getTransformMatrix:l}=this.props,c=Array.isArray(l),u=c&&16===l.length,d=Array.isArray(s),A=Array.isArray(o),h=Array.isArray(a),f=u||!c&&Boolean(l(i[0]));e.constant=f?u:A&&d&&h;const p=e.value;if(e.constant){let t;if(f)qT.set(l),t=ek(qT);else{t=ZT;$T(t,o,s),t.set(a,9)}e.value=new Float32Array(t)}else{let t=n*e.size;const{iterable:c,objectInfo:g}=fM(i,n,r);for(const e of c){let n;if(g.index++,f)qT.set(u?l:l(e,g)),n=ek(qT);else{n=ZT;$T(n,A?o:o(e,g),d?s:s(e,g)),n.set(h?a:a(e,g),9)}p[t++]=n[0],p[t++]=n[1],p[t++]=n[2],p[t++]=n[3],p[t++]=n[4],p[t++]=n[5],p[t++]=n[6],p[t++]=n[7],p[t++]=n[8],p[t++]=n[9],p[t++]=n[10],p[t++]=n[11]}}}};function nk(e,t){return t===db.CARTESIAN||t===db.METER_OFFSETS||t===db.DEFAULT&&!e.isGeospatial}function rk(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;const a=e.POSITION?e.POSITION.value:[],l=a&&a.length;for(let c=0;c<l;c+=3){const e=a[c],l=a[c+1],u=a[c+2];t=e<t?e:t,n=l<n?l:n,r=u<r?u:r,i=e>i?e:i,o=l>o?l:o,s=u>s?u:s}return[[t,n,r],[i,o,s]]}function ik(e,t){(e.COLOR_0||e.colors)&&t||(e.colors={constant:!0,value:new Float32Array([1,1,1])}),Op.assert(e.positions||e.POSITION,'no "postions" or "POSITION" attribute in mesh')}function ok(e,t){if(e.attributes)return ik(e.attributes,t),e instanceof XT?e:new XT(e);if(e.positions||e.POSITION)return ik(e,t),new XT({attributes:e});throw Error("Invalid mesh")}const sk={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}};class ak extends qP{constructor(){super(...arguments),pt(this,"state",void 0)}getShaders(){const e=!my(this.context.gl),t={};return Lw(this.context.gl,Bw)&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  DECKGL_FILTER_COLOR(color, geometry);\n\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n}\n",modules:[LT,HT,JT],transpileToGLSL100:e,defines:t})}getBounds(){var e;if(this.props._instanced)return super.getBounds();let t=this.state.positionBounds;if(t)return t;const{mesh:n}=this.props;if(!n)return null;if(t=null===(e=n.header)||void 0===e?void 0:e.boundingBox,!t){const{attributes:e}=ok(n,this.props._useMeshColors);e.POSITION=e.POSITION||e.positions,t=rk(e)}return this.state.positionBounds=t,t}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:tk}),this.setState({emptyTexture:new Xx(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:r}=e;if(t.mesh!==n.mesh||r.extensionsChanged){var i;if(this.state.positionBounds=null,null===(i=this.state.model)||void 0===i||i.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const e=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(e.NORMAL||e.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==n.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw(e){let{uniforms:t}=e;if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:r,coordinateSystem:i,_instanced:o}=this.props;this.state.model.setUniforms(t).setUniforms({sizeScale:r,composeModelMatrix:!o||nk(n,i),flatShading:!this.state.hasNormals}).draw()}get isLoaded(){var e;return(null===(e=this.state)||void 0===e?void 0:e.model)&&super.isLoaded}getModel(e){const t=new oP(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:ok(e,this.props._useMeshColors),isInstanced:!0}),{texture:n}=this.props,{emptyTexture:r}=this.state;return t.setUniforms({sampler:n||r,hasTexture:Boolean(n)}),t}setTexture(e){const{emptyTexture:t,model:n}=this.state;n&&n.setUniforms({sampler:e||t,hasTexture:Boolean(e)})}}pt(ak,"defaultProps",sk),pt(ak,"layerName","SimpleMeshLayer");const lk=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),ck=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),uk=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),dk=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Ak={POSITION:{size:3,value:new Float32Array(ck)},NORMAL:{size:3,value:new Float32Array(uk)},TEXCOORD_0:{size:2,value:new Float32Array(dk)}};class hk extends XT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=Sx("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(lk)},attributes:{...Ak,...e.attributes}})}}const fk=/^[og]\s*(.+)?/,pk=/^mtllib /,gk=/^usemtl /;class mk{constructor(e){let{index:t,name:n="",mtllib:r,smooth:i,groupStart:o}=e;this.index=t,this.name=n,this.mtllib=r,this.smooth=i,this.groupStart=o,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.index;return new mk({index:e,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})}}class vk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.name=e,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0,this.fromDeclaration=null}startMaterial(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r=new mk({index:this.materials.length,name:e,mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0});return this.materials.push(r),r}currentMaterial(){if(this.materials.length>0)return this.materials[this.materials.length-1]}_finalize(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}}class bk{constructor(){this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}startObject(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.object&&!this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=t);const n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object=new vk(e),this.object.fromDeclaration=t,n&&n.name&&"function"===typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)}finalize(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)}parseVertexIndex(e,t){const n=parseInt(e);return 3*(n>=0?n-1:n+t/3)}parseNormalIndex(e,t){const n=parseInt(e);return 3*(n>=0?n-1:n+t/3)}parseUVIndex(e,t){const n=parseInt(e);return 2*(n>=0?n-1:n+t/2)}addVertex(e,t,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])}addVertexPoint(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])}addVertexLine(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])}addNormal(e,t,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])}addColor(e,t,n){const r=this.colors,i=this.object.geometry.colors;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])}addUV(e,t,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])}addUVLine(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])}addFace(e,t,n,r,i,o,s,a,l){const c=this.vertices.length;let u=this.parseVertexIndex(e,c),d=this.parseVertexIndex(t,c),A=this.parseVertexIndex(n,c);if(this.addVertex(u,d,A),void 0!==r&&""!==r){const e=this.uvs.length;u=this.parseUVIndex(r,e),d=this.parseUVIndex(i,e),A=this.parseUVIndex(o,e),this.addUV(u,d,A)}if(void 0!==s&&""!==s){const e=this.normals.length;u=this.parseNormalIndex(s,e),d=s===a?u:this.parseNormalIndex(a,e),A=s===l?u:this.parseNormalIndex(l,e),this.addNormal(u,d,A)}this.colors.length>0&&this.addColor(u,d,A)}addPointGeometry(e){this.object.geometry.type="Points";const t=this.vertices.length;for(const n of e)this.addVertexPoint(this.parseVertexIndex(n,t))}addLineGeometry(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(const i of e)this.addVertexLine(this.parseVertexIndex(i,n));for(const i of t)this.addUVLine(this.parseUVIndex(i,r))}}class yk{constructor(e,t){pt(this,"fields",void 0),pt(this,"metadata",void 0),function(e,t){if(!e)throw new Error(t||"loader assertion failed.")}(Array.isArray(e)),function(e){const t={};for(const n of e)t[n.name]&&console.warn("Schema: duplicated field name",n.name,n),t[n.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata)return!1;if(this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(){const e=Object.create(null);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e[o]=!0;const i=this.fields.filter((t=>e[t.name]));return new yk(i,this.metadata)}selectAt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.map((e=>this.fields[e])).filter(Boolean);return new yk(r,this.metadata)}assign(e){let t,n=this.metadata;if(e instanceof yk){const r=e;t=r.fields,n=xk(xk(new Map,this.metadata),r.metadata)}else t=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of t)r[o.name]=o;const i=Object.values(r);return new yk(i,n)}}function xk(e,t){return new Map([...e||new Map,...t||new Map])}let wk,_k,Sk,Ck,Ek,Mk,Pk,Tk,kk=function(e){return e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e}({});class Bk{static isNull(e){return e&&e.typeId===kk.Null}static isInt(e){return e&&e.typeId===kk.Int}static isFloat(e){return e&&e.typeId===kk.Float}static isBinary(e){return e&&e.typeId===kk.Binary}static isUtf8(e){return e&&e.typeId===kk.Utf8}static isBool(e){return e&&e.typeId===kk.Bool}static isDecimal(e){return e&&e.typeId===kk.Decimal}static isDate(e){return e&&e.typeId===kk.Date}static isTime(e){return e&&e.typeId===kk.Time}static isTimestamp(e){return e&&e.typeId===kk.Timestamp}static isInterval(e){return e&&e.typeId===kk.Interval}static isList(e){return e&&e.typeId===kk.List}static isStruct(e){return e&&e.typeId===kk.Struct}static isUnion(e){return e&&e.typeId===kk.Union}static isFixedSizeBinary(e){return e&&e.typeId===kk.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===kk.FixedSizeList}static isMap(e){return e&&e.typeId===kk.Map}static isDictionary(e){return e&&e.typeId===kk.Dictionary}get typeId(){return kk.NONE}compareTo(e){return this===e}}Symbol.toStringTag;Symbol.toStringTag;wk=Symbol.toStringTag;class Ok extends Bk{constructor(e,t){super(),pt(this,"isSigned",void 0),pt(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return kk.Int}get[wk](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class Ik extends Ok{constructor(){super(!0,8)}}class Rk extends Ok{constructor(){super(!0,16)}}class Lk extends Ok{constructor(){super(!0,32)}}class Dk extends Ok{constructor(){super(!1,8)}}class Fk extends Ok{constructor(){super(!1,16)}}class Nk extends Ok{constructor(){super(!1,32)}}const zk=32,jk=64;_k=Symbol.toStringTag;class Uk extends Bk{constructor(e){super(),pt(this,"precision",void 0),this.precision=e}get typeId(){return kk.Float}get[_k](){return"Float"}toString(){return"Float".concat(this.precision)}}class Gk extends Uk{constructor(){super(zk)}}class Vk extends Uk{constructor(){super(jk)}}Symbol.toStringTag;Symbol.toStringTag;Sk=Symbol.toStringTag;Ck=Symbol.toStringTag;Ek=Symbol.toStringTag;Mk=Symbol.toStringTag;Pk=Symbol.toStringTag;class Hk extends Bk{constructor(e,t){super(),pt(this,"listSize",void 0),pt(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return kk.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[Pk](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}Tk=Symbol.toStringTag;function Wk(e){switch(e.constructor){case Int8Array:return new Ik;case Uint8Array:return new Dk;case Int16Array:return new Rk;case Uint16Array:return new Fk;case Int32Array:return new Lk;case Uint32Array:return new Nk;case Float32Array:return new Gk;case Float64Array:return new Vk;default:throw new Error("array type not supported")}}class Qk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;pt(this,"name",void 0),pt(this,"type",void 0),pt(this,"nullable",void 0),pt(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=n,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new Qk(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}function Jk(e,t){const n=new Map;for(const o in t)"value"!==o&&n.set(o,JSON.stringify(t[o]));const r=Wk(t.value),i=!("size"in t)||1===t.size;return new Qk(e,i?r:new Hk(t.size,new Qk("value",r)),!1,n)}function Kk(e,t){const{meshes:n}=function(e){const t=new bk;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r="",i="",o=0,s=[];const a="function"===typeof"".trimLeft;for(let u=0,d=n.length;u<d;u++)if(r=n[u],r=a?r.trimLeft():r.trim(),o=r.length,0!==o&&(i=r.charAt(0),"#"!==i))if("v"===i){const e=r.split(/\s+/);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7&&t.colors.push(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6]));break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===i){const e=r.substr(1).trim().split(/\s+/),n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r.length>0){const e=r.split("/");n.push(e)}}const i=n[0];for(let r=1,o=n.length-1;r<o;r++){const e=n[r],o=n[r+1];t.addFace(i[0],e[0],o[0],i[1],e[1],o[1],i[2],e[2],o[2])}}else if("l"===i){const e=r.substring(1).trim().split(" ");let n;const i=[];if(-1===r.indexOf("/"))n=e;else{n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t].split("/");""!==r[0]&&n.push(r[0]),""!==r[1]&&i.push(r[1])}}t.addLineGeometry(n,i)}else if("p"===i){const e=r.substr(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(s=fk.exec(r))){const e=(" "+s[0].substr(1).trim()).substr(1);t.startObject(e)}else if(gk.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(pk.test(r))t.materialLibraries.push(r.substring(7).trim());else{if("s"!==i){if("\0"===r)continue;throw new Error('Unexpected line: "'.concat(r,'"'))}{if(s=r.split(" "),s.length>1){const e=s[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}}t.finalize();const l=[],c=[];for(const u of t.objects){const{geometry:e}=u;if(0===e.vertices.length)continue;const t={header:{vertexCount:e.vertices.length/3},attributes:{}};switch(e.type){case"Points":t.mode=0;break;case"Line":t.mode=1;break;default:t.mode=4}t.attributes.POSITION={value:new Float32Array(e.vertices),size:3},e.normals.length>0&&(t.attributes.NORMAL={value:new Float32Array(e.normals),size:3}),e.colors.length>0&&(t.attributes.COLOR_0={value:new Float32Array(e.colors),size:3}),e.uvs.length>0&&(t.attributes.TEXCOORD_0={value:new Float32Array(e.uvs),size:2}),t.materials=[];for(const n of u.materials){const e={name:n.name,flatShading:!n.smooth};t.materials.push(e),c.push(e)}t.name=u.name,l.push(t)}return{meshes:l,materials:c}}(e),r=n.reduce(((e,t)=>e+t.header.vertexCount),0),i=function(e,t){const n=new Float32Array(3*t);let r,i,o,s=0;for(const l of e){const{POSITION:e,NORMAL:a,COLOR_0:c,TEXCOORD_0:u}=l.attributes;n.set(e.value,3*s),a&&(r=r||new Float32Array(3*t),r.set(a.value,3*s)),c&&(i=i||new Float32Array(3*t),i.set(c.value,3*s)),u&&(o=o||new Float32Array(2*t),o.set(u.value,2*s)),s+=e.value.length/3}const a={};a.POSITION={value:n,size:3},r&&(a.NORMAL={value:r,size:3});i&&(a.COLOR_0={value:i,size:3});o&&(a.TEXCOORD_0={value:o,size:2});return a}(n,r),o={vertexCount:r,boundingBox:rk(i)},s=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const i in n)t=t||new Map,"value"!==i&&t.set(i,JSON.stringify(n[i]));const r=[];for(const i in e){const t=Jk(i,e[i]);r.push(t)}return new yk(r,t)}(i,{mode:4,boundingBox:o.boundingBox});return{loaderData:{header:{}},schema:s,header:o,mode:4,attributes:i}}const Xk=/\s+/;function Yk(e,t){const n=[];let r={name:"placeholder"};const i=e.split("\n");for(let o of i){if(o.trim(),0===o.length||"#"===o.charAt(0))continue;const e=o.indexOf(" ");let t=e>=0?o.substring(0,e):o;t.toLowerCase();let i=e>=0?o.substring(e+1):"";switch(i.trim(),t){case"newmtl":({name:i}),n.push(r);break;case"ka":r.ambientColor=qk(i);break;case"kd":r.diffuseColor=qk(i);break;case"map_kd":r.diffuseTextureUrl=i;break;case"ks":r.specularColor=qk(i);break;case"map_ks":r.specularTextureUrl=i;break;case"ke":r.emissiveColor=qk(i);break;case"map_ke":r.emissiveTextureUrl=i;break;case"ns":r.shininess=parseFloat(i);break;case"map_ns":default:break;case"ni":r.refraction=parseFloat(i);break;case"illum":r.illumination=parseFloat(i)}}return n}function qk(e,t){const n=e.split(Xk,3);return[parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2])]}const Zk={name:"OBJ",id:"obj",module:"obj",version:"3.4.15",worker:!0,extensions:["obj"],mimeTypes:["text/plain"],testText:function(e){return"v"===e[0]},options:{obj:{}}};const $k={name:"MTL",id:"mtl",module:"mtl",version:"3.4.15",worker:!0,extensions:["mtl"],mimeTypes:["text/plain"],testText:e=>e.includes("newmtl"),options:{mtl:{}}},eB={...Zk,parse:async(e,t)=>Kk((new TextDecoder).decode(e)),parseTextSync:(e,t)=>Kk(e)};function tB(e){let{data:t,intensity:n,selected:r,setLayerHoveredData:i}=e;const o=t.access&&t.access.features,s=new hk({type:"x,z",xlen:0,ylen:0,zlen:0}),a=t.GEOGRID.properties.header;return new ak({onHover:e=>{e.object&&i("".concat(t.access.properties[r],": ").concat(Math.floor(100*e.object.properties[r]),"%"))},pickable:!0,id:"ACCESS",opacity:.1+n/100,data:o&&o,loaders:[eB],mesh:s,getPosition:e=>[e.geometry.coordinates[0],e.geometry.coordinates[1],1],getColor:e=>{if(void 0===e.properties[r]||null===e.properties[r])return[0,0,0,0];{const t=Hf((e=>e>0&&e<1?e:e>=1?1:0)(e.properties[r]),0,1);return[t[0],t[1],t[2],200]}},getOrientation:e=>[-180,a.rotation,-90],getScale:e=>[t.GEOGRID.properties.header.cellSize/(2+n/100),1+e.properties[r]*n,t.GEOGRID.properties.header.cellSize/(2+n/100)],updateTriggers:{getScale:r},transitions:{getColor:500,getScale:500}})}const nB=[0,0,0,255],rB={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getSourceColor:{type:"accessor",value:nB},getTargetColor:{type:"accessor",value:nB},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,numSegments:{type:"number",value:50,min:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class iB extends qP{constructor(){super(...arguments),pt(this,"state",void 0)}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  if (dh == 0.0) {\n    return sourceZ + deltaZ * ratio;\n  }\n  float unitZ = deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    vec3 source_world = instanceSourcePositions;\n    vec3 target_world = instanceTargetPositions;\n    if (useShortestPath) {\n      source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n      target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n\n      float deltaLng = target_world.x - source_world.x;\n      if (deltaLng > 180.) target_world.x -= 360.;\n      if (deltaLng < -180.) source_world.x -= 360.;\n    }\n    source = project_position(source_world, instanceSourcePositions64Low);\n    target = project_position(target_world, instanceTargetPositions64Low);\n    float antiMeridianX = 0.0;\n\n    if (useShortestPath) {\n      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n      }\n      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\n\n      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\n        isValid = 0.0;\n        indexDir = sign(segmentRatio - thresholdRatio);\n        segmentRatio = thresholdRatio;\n      }\n    }\n\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n\n    if (useShortestPath) {\n      if (nextPos.x < antiMeridianX) {\n        currPos.x += TILE_SIZE;\n        nextPos.x += TILE_SIZE;\n      }\n    }\n\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(curr, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,JT]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:nB},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:nB},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:r}=e;if(r.extensionsChanged||r.propsChanged&&t.numSegments!==n.numSegments){var i;const{gl:e}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw(e){let{uniforms:t}=e;const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:o,greatCircle:s,wrapLongitude:a}=this.props;this.state.model.setUniforms(t).setUniforms({greatCircle:s,widthUnits:hb[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a}).draw()}_getModel(e){const{id:t,numSegments:n}=this.props;let r=[];for(let o=0;o<n;o++)r=r.concat([o,1,0,o,-1,0]);const i=new oP(e,{...this.getShaders(),id:t,geometry:new XT({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0});return i.setUniforms({numSegments:n}),i}}function oB(e){let{data:t,selected:n,opacity:r}=e;if(t.ABM2&&n){const e="mode"in n?"mode":"profile";return new iB({id:"AGGREGATED_TRIPS",shadowEnabled:!1,data:t.ABM2.trips,getSourcePosition:t=>{if(n[e]===t[e])return t.path[0]},getTargetPosition:t=>{if(n[e]===t[e])return t.path[t.path.length-1]},getSourceColor:n=>Uf(t.ABM2.attr[e][n[e]].color),getTargetColor:[0,0,0,100],getWidth:5*r,updateTriggers:{getSourcePosition:n,getTargetPosition:n}})}}pt(iB,"layerName","ArcLayer"),pt(iB,"defaultProps",rB);class sB{constructor(e){pt(this,"opts",void 0),pt(this,"typedArrayManager",void 0),pt(this,"indexStarts",[0]),pt(this,"vertexStarts",[0]),pt(this,"vertexCount",0),pt(this,"instanceCount",0),pt(this,"attributes",void 0),pt(this,"_attributeDefs",void 0),pt(this,"data",void 0),pt(this,"getGeometry",void 0),pt(this,"geometryBuffer",void 0),pt(this,"buffers",void 0),pt(this,"positionSize",void 0),pt(this,"normalize",void 0);const{attributes:t={}}=e;this.typedArrayManager=wm,this.attributes={},this._attributeDefs=t,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:t,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:o,dataChanged:s,normalize:a=!0}=this.opts;if(this.data=t,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===o?2:3),this.buffers=n,this.normalize=a,i&&(kS(t.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),a||(n.positions=i)),this.geometryBuffer=n.positions,Array.isArray(s))for(const l of s)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry(e){let{startRow:t,endRow:n}=e;this._rebuildGeometry({startRow:t,endRow:n})}getGeometryFromBuffer(e){const t=e.value||e;return ArrayBuffer.isView(t)?gM(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,t){const{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:o}=this;for(const s in i)if(s in r)o.release(n[s]),n[s]=null;else{const r=i[s];r.copy=t,n[s]=o.allocate(n[s],e,r)}}_forEachGeometry(e,t,n){const{data:r,getGeometry:i}=this,{iterable:o,objectInfo:s}=fM(r,t,n);for(const a of o){s.index++;e(i?i(a,s):null,s.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:t,vertexStarts:n,instanceCount:r}=this;const{data:i,geometryBuffer:o}=this,{startRow:s=0,endRow:a=1/0}=e||{},l={};if(e||(t=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((e,t)=>{const r=e&&this.normalizeGeometry(e);l[t]=r,n[t+1]=n[t]+(r?this.getGeometrySize(r):0)}),s,a),r=n[n.length-1];else if(n=i.startIndices,r=n[i.length]||0,ArrayBuffer.isView(o))r=r||o.length/this.positionSize;else if(o instanceof Ux){const e=o.accessor.stride||4*this.positionSize;r=r||o.byteLength/e}else if(o.buffer){const e=o.stride||4*this.positionSize;r=r||o.buffer.byteLength/e}else if(o.value){const e=o.value,t=o.stride/e.BYTES_PER_ELEMENT||this.positionSize;r=r||e.length/t}this._allocate(r,Boolean(e)),this.indexStarts=t,this.vertexStarts=n,this.instanceCount=r;const c={};this._forEachGeometry(((e,i)=>{const o=l[i]||e;c.vertexStart=n[i],c.indexStart=t[i];const s=i<n.length-1?n[i+1]:r;c.geometrySize=s-n[i],c.geometryIndex=i,this.updateGeometryAttributes(o,c)}),s,a),this.vertexCount=t[t.length-1]}}const aB=1,lB=-1;function cB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n=0,end:r=e.length}=t,i=t.size||2;let o=0;for(let s=n,a=r-i;s<r;s+=i)o+=(e[s]-e[a])*(e[s+1]+e[a+1]),a=s;return o/2}(e,t))}(e,n);return r!==t&&(function(e,t){const{start:n=0,end:r=e.length,size:i=2}=t,o=(r-n)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const t=n+a*i,r=n+(o-1-a)*i;for(let n=0;n<i;++n){const i=e[t+n];e[t+n]=e[r+n],e[r+n]=i}}}(e,n),!0)}function uB(e,t,n,r){let i,o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-e[1])/(t[1]-e[1]),o=3;else if(4&n)i=(r[1]-e[1])/(t[1]-e[1]),o=1;else if(2&n)i=(r[2]-e[0])/(t[0]-e[0]),o=2;else{if(!(1&n))return null;i=(r[0]-e[0])/(t[0]-e[0]),o=0}for(let a=0;a<e.length;a++)s[a]=(1&o)===a?r[o]:i*(t[a]-e[a])+e[a];return s}function dB(e,t){let n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function AB(e,t){const n=t.length,r=e.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(e[r-n+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)e[r+i]=t[i];return!0}function hB(e,t){const n=t.length;for(let r=0;r<n;r++)e[r]=t[r]}function fB(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const o=r+t*n;for(let s=0;s<n;s++)i[s]=e[o+s];return i}function pB(e,t){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=e.length}=t||{},l=(a-s)/n;let c=[];const u=[c],d=fB(e,0,n,s);let A,h;const f=xB(d,i,o,[]),p=[];AB(c,d);for(let g=1;g<l;g++){for(A=fB(e,g,n,s,A),h=dB(A,f);h;){uB(d,A,h,f,p);const e=dB(p,f);e&&(uB(d,p,e,f,p),h=e),AB(c,p),hB(d,p),wB(f,i,h),r&&c.length>n&&(c=[],u.push(c),AB(c,d)),h=dB(A,f)}AB(c,A),hB(d,A)}return r?u:u[0]}const gB=0,mB=1;function vB(e,t){for(let n=0;n<t.length;n++)e.push(t[n]);return e}function bB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(!e.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],l=[{pos:e,types:s?new Array(e.length/r).fill(mB):null,holes:t||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:e,types:t,holes:n}=l.shift();_B(e,r,n[0]||e.length,c),u=xB(c[0],i,o,u);const d=dB(c[1],u);if(d){let i=yB(e,t,r,0,n[0]||e.length,u,d);const o={pos:i[0].pos,types:i[0].types,holes:[]},a={pos:i[1].pos,types:i[1].types,holes:[]};l.push(o,a);for(let l=0;l<n.length;l++)i=yB(e,t,r,n[l],n[l+1]||e.length,u,d),i[0]&&(o.holes.push(o.pos.length),o.pos=vB(o.pos,i[0].pos),s&&(o.types=vB(o.types,i[0].types))),i[1]&&(a.holes.push(a.pos.length),a.pos=vB(a.pos,i[1].pos),s&&(a.types=vB(a.types,i[1].types)))}else{const r={positions:e};s&&(r.edgeTypes=t),n.length&&(r.holeIndices=n),a.push(r)}}return a}function yB(e,t,n,r,i,o,s){const a=(i-r)/n,l=[],c=[],u=[],d=[],A=[];let h,f,p;const g=fB(e,a-1,n,r);let m=Math.sign(8&s?g[1]-o[3]:g[0]-o[2]),v=t&&t[a-1],b=0,y=0;for(let x=0;x<a;x++)h=fB(e,x,n,r,h),f=Math.sign(8&s?h[1]-o[3]:h[0]-o[2]),p=t&&t[r/n+x],f&&m&&m!==f&&(uB(g,h,s,o,A),AB(l,A)&&u.push(v),AB(c,A)&&d.push(v)),f<=0?(AB(l,h)&&u.push(p),b-=f):u.length&&(u[u.length-1]=gB),f>=0?(AB(c,h)&&d.push(p),y+=f):d.length&&(d[d.length-1]=gB),hB(g,h),m=f,v=p;return[b?{pos:l,types:t&&u}:null,y?{pos:c,types:t&&d}:null]}function xB(e,t,n,r){const i=Math.floor((e[0]-n[0])/t)*t+n[0],o=Math.floor((e[1]-n[1])/t)*t+n[1];return r[0]=i,r[1]=o,r[2]=i+t,r[3]=o+t,r}function wB(e,t,n){8&n?(e[1]+=t,e[3]+=t):4&n?(e[1]-=t,e[3]-=t):2&n?(e[0]+=t,e[2]+=t):1&n&&(e[0]-=t,e[2]-=t)}function _B(e,t,n,r){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<n;l+=t){const t=e[l],n=e[l+1];i=t<i?t:i,o=t>o?t:o,s=n<s?n:s,a=n>a?n:a}return r[0][0]=i,r[0][1]=s,r[1][0]=o,r[1][1]=a,r}const SB=85.051129;function CB(e,t,n,r){let i=-1,o=-1;for(let s=n+1;s<r;s+=t){const t=Math.abs(e[s]);t>i&&(i=t,o=s-1)}return o}function EB(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:SB;const o=e[n],s=e[r-t];if(Math.abs(o-s)>180){const r=fB(e,0,t,n);r[0]+=360*Math.round((s-o)/360),AB(e,r),r[1]=Math.sign(r[1])*i,AB(e,r),r[0]=o,AB(e,r)}}function MB(e,t,n,r){let i,o=e[0];for(let s=n;s<r;s+=t){i=e[s];const t=i-o;(t>180||t<-180)&&(i-=360*Math.round(t/360)),e[s]=o=i}}function PB(e,t){let n;const r=e.length/t;for(let o=0;o<r&&(n=e[o*t],(n+180)%360===0);o++);const i=360*-Math.round(n/360);if(0!==i)for(let o=0;o<r;o++)e[o*t]+=i}function TB(e,t,n,r){let i;if(Array.isArray(e[0])){const n=e.length*t;i=new Array(n);for(let r=0;r<e.length;r++)for(let n=0;n<t;n++)i[r*t+n]=e[r][n]||0}else i=e;return n?pB(i,{size:t,gridResolution:n}):r?function(e,t){const{size:n=2,startIndex:r=0,endIndex:i=e.length,normalize:o=!0}=t||{},s=e.slice(r,i);MB(s,n,0,i-r);const a=pB(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)PB(l,n);return a}(i,{size:t}):i}class kB extends sB{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?TB(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(BB(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}const t=this.getPathLength(e);return t<2?0:this.isClosed(e)?t<3?0:t+2:t}updateGeometryAttributes(e,t){if(0!==t.geometrySize)if(e&&BB(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}_updateSegmentTypes(e,t){const n=this.attributes.segmentTypes,r=!!e&&this.isClosed(e),{vertexStart:i,geometrySize:o}=t;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}_updatePositions(e,t){const{positions:n}=this.attributes;if(!n||!e)return;const{vertexStart:r,geometrySize:i}=t,o=new Array(3);for(let s=r,a=0;a<i;s++,a++)this.getPointOnPath(e,a,o),n[3*s]=o[0],n[3*s+1]=o[1],n[3*s+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{positionSize:r}=this;t*r>=e.length&&(t+=1-e.length/r);const i=t*r;return n[0]=e[i],n[1]=e[i+1],n[2]=3===r&&e[i+2]||0,n}isClosed(e){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:t}=this,n=e.length-t;return e[0]===e[n]&&e[1]===e[n+1]&&(2===t||e[2]===e[n+2])}}function BB(e){return Array.isArray(e[0])}const OB=[0,0,0,255],IB={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:OB},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},RB={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class LB extends qP{constructor(){super(...arguments),pt(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\n    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\n    geometry.position = vec4(currPosition + offset, 1.0);\n    gl_Position = project_common_position_to_clipspace(geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,JT]})}get wrapLongitude(){return!1}initializeState(){const e=!0;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:RB,accessor:"getPath",update:this.calculatePositions,noAlloc:e,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:e},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:RB,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:RB,defaultValue:OB},instancePickingColors:{size:3,type:5121,accessor:(e,t)=>{let{index:n,target:r}=t;return this.encodePickingColor(e&&e.__source?e.__source.index:n,r)}}}),this.setState({pathTesselator:new kB({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:t,changeFlags:n}=e,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:e}=this.state,i=t.data.attributes||{};e.updateGeometry({data:t.data,geometryBuffer:i.getPath,buffers:i,normalize:!t._pathType,loop:"loop"===t._pathType,getGeometry:t.getPath,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||r.invalidateAll()}if(n.extensionsChanged){var i;const{gl:e}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(e),r.invalidateAll()}}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,{data:r}=this.props;return r[0]&&r[0].__source&&(t.object=r.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const{data:t}=this.props;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw(e){let{uniforms:t}=e;const{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:hb[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){return new oP(e,{...this.getShaders(),id:this.props.id,geometry:new XT({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateSegmentTypes(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}}function DB(e){let{data:t,selected:n,opacity:r}=e;if(t.ABM2&&n){const e="mode"in n?"mode":"profile";return new LB({id:"ABM",shadowEnabled:!1,data:t.ABM2.trips,getPath:t=>{if(n[e]===t[e])return t.path},getColor:n=>Uf(t.ABM2.attr[e][n[e]].color),opacity:r/100,getWidth:e=>{let t=e.path.length?e.path.length:1;return t>30&&(t=30+r),t},updateTriggers:{getPath:n,getWidth:r}})}}pt(LB,"defaultProps",IB),pt(LB,"layerName","PathLayer");class FB extends qP{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((e=>e.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo(e){let{info:t}=e;const{object:n}=t;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(t.object=n.__source.object,t.index=n.__source.index,t):t}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||t}getSubLayerRow(e,t,n){return e.__source={parent:this,object:t,index:n},e}getSubLayerAccessor(e){if("function"===typeof e){const t={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(t.index=n.__source.index,e(n.__source.object,t)):e(n,r)}return e}getSubLayerProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const{opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:A,positionFormat:h,modelMatrix:f,extensions:p,fetch:g,operation:m,_subLayerProps:v}=this.props,b={id:"",updateTriggers:{},opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:A,positionFormat:h,modelMatrix:f,extensions:p,fetch:g,operation:m},y=v&&e.id&&v[e.id],x=y&&y.updateTriggers,w=e.id||"sublayer";if(y){const t=this.props[sp],n=e.type?e.type._propTypes:{};for(const e in y){const r=n[e]||t[e];r&&"accessor"===r.type&&(y[e]=this.getSubLayerAccessor(y[e]))}}Object.assign(b,e,y),b.id="".concat(this.props.id,"-").concat(w),b.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...x};for(const _ of p){const e=_.getSubLayerProps.call(this,_);e&&Object.assign(b,e,{updateTriggers:Object.assign(b.updateTriggers,e.updateTriggers)})}return b}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();if(r){n=Dp(this.renderLayers(),Boolean),this.internalState.subLayers=n}Lp("compositeLayer.renderLayers",this,r,n);for(const i of n)i.parent=this}}function NB(e){let{data:t,getIndex:n,dataRange:r,replace:i}=e;const{startRow:o=0,endRow:s=1/0}=r,a=t.length;let l=a,c=a;for(let A=0;A<a;A++){const e=n(t[A]);if(l>A&&e>=o&&(l=A),e>=s){c=A;break}}let u=l;const d=c-l!==i.length?t.slice(c):void 0;for(let A=0;A<i.length;A++)t[u++]=i[A];if(d){for(let e=0;e<d.length;e++)t[u++]=d[e];t.length=u}return{startRow:l,endRow:l+i.length}}pt(FB,"layerName","CompositeLayer");const zB=()=>{},jB={10241:9987,10240:9729,10242:33071,10243:33071};function UB(e,t,n,r){const i=Math.min(n/t.width,r/t.height),o=Math.floor(t.width*i),s=Math.floor(t.height*i);return 1===i?{data:t,width:o,height:s}:(e.canvas.height=s,e.canvas.width=o,e.clearRect(0,0,o,s),e.drawImage(t,0,0,t.width,t.height,0,0,o,s),{data:e.canvas,width:o,height:s})}function GB(e){return e&&(e.id||e.url)}function VB(e,t,n,r){const i=e.width,o=e.height,s=new Xx(e.gl,{width:t,height:n,parameters:r});return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:l,targetZ:c,width:u,height:d}=n;const{framebuffer:A,deleteFramebuffer:h}=uw(e);yx(A);const{gl:f,handle:p}=A,g="undefined"!==typeof a||"undefined"!==typeof l||"undefined"!==typeof c;a=a||0,l=l||0,c=c||0;const m=f.bindFramebuffer(36160,p);yx(t);let v=null;if(t instanceof Jx&&(v=t,u=Number.isFinite(u)?u:v.width,d=Number.isFinite(d)?d:v.height,v.bind(0),t=v.target),g)switch(t){case 3553:case 34067:f.copyTexSubImage2D(t,o,a,l,r,i,u,d);break;case 35866:case 32879:by(f).copyTexSubImage3D(t,o,a,l,c,r,i,u,d)}else f.copyTexImage2D(t,o,s,r,i,u,d,0);v&&v.unbind(),f.bindFramebuffer(36160,m||null),h&&A.delete()}(e,s,{targetY:0,width:i,height:o}),e.delete(),s}function HB(e,t,n){for(let r=0;r<t.length;r++){const{icon:i,xOffset:o}=t[r];e[GB(i)]={...i,x:o,y:n}}}class WB{constructor(e,t){let{onUpdate:n=zB,onError:r=zB}=t;pt(this,"gl",void 0),pt(this,"onUpdate",void 0),pt(this,"onError",void 0),pt(this,"_loadOptions",null),pt(this,"_texture",null),pt(this,"_externalTexture",null),pt(this,"_mapping",{}),pt(this,"_textureParameters",null),pt(this,"_pendingCount",0),pt(this,"_autoPacking",!1),pt(this,"_xOffset",0),pt(this,"_yOffset",0),pt(this,"_rowHeight",0),pt(this,"_buffer",4),pt(this,"_canvasWidth",1024),pt(this,"_canvasHeight",0),pt(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?GB(e):e;return this._mapping[t]||{}}setProps(e){let{loadOptions:t,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}=e;var s;(t&&(this._loadOptions=t),void 0!==n&&(this._autoPacking=n),i&&(this._mapping=i),r)&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=r);o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||"undefined"===typeof document)return;const n=Object.values(function(e,t,n){if(!e||!t)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=fM(e);for(const s of i){o.index++;const e=t(s,o),i=GB(e);if(!e)throw new Error("Icon is missing.");if(!e.url)throw new Error("Icon url is missing.");r[i]||n[i]&&e.url===n[i].url||(r[i]={...e,source:s,sourceIndex:o.index})}return r}(e,t,this._mapping)||{});if(n.length>0){const{mapping:e,xOffset:t,yOffset:r,rowHeight:i,canvasHeight:o}=function(e){let{icons:t,buffer:n,mapping:r={},xOffset:i=0,yOffset:o=0,rowHeight:s=0,canvasWidth:a}=e,l=[];for(let u=0;u<t.length;u++){const e=t[u];if(!r[GB(e)]){const{height:t,width:c}=e;i+c+n>a&&(HB(r,l,o),i=0,o=s+o+n,s=0,l=[]),l.push({icon:e,xOffset:i}),i=i+c+n,s=Math.max(s,t)}}return l.length>0&&HB(r,l,o),{mapping:r,rowHeight:s,xOffset:i,yOffset:o,canvasWidth:a,canvasHeight:(c=s+o+n,Math.pow(2,Math.ceil(Math.log2(c))))};var c}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=i,this._mapping=e,this._xOffset=t,this._yOffset=r,this._canvasHeight=o,this._texture||(this._texture=new Xx(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||jB})),this._texture.height!==this._canvasHeight&&(this._texture=VB(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||jB)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(e){const t=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of e)this._pendingCount++,bm(n.url,this._loadOptions).then((e=>{const r=GB(n),i=this._mapping[r],{x:o,y:s,width:a,height:l}=i,{data:c,width:u,height:d}=UB(t,e,a,l);this._texture.setSubImageData({data:c,x:o+(a-u)/2,y:s+(l-d)/2,width:u,height:d}),i.width=u,i.height=d,this._texture.generateMipmap(),this.onUpdate()})).catch((e=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:e})})).finally((()=>{this._pendingCount--}))}}const QB=[0,0,0,255],JB={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:QB},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class KB extends qP{constructor(){super(...arguments),pt(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,JT]})}initializeState(){this.state={iconManager:new WB(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:QB},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:r}=e,i=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:c}=t,{iconManager:u}=this.state,d=o||this.internalState.isAsyncPropLoading("iconAtlas");if(u.setProps({loadOptions:t.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?s:null,textureParameters:c}),d?n.iconMapping!==t.iconMapping&&i.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.packIcons(a,l),r.extensionsChanged){var A;const{gl:e}=this.context;null===(A=this.state.model)||void 0===A||A.delete(),this.state.model=this._getModel(e),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw(e){let{uniforms:t}=e;const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(t).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:hb[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new oP(e,{...this.getShaders(),id:this.props.id,geometry:new XT({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const n=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;n?n(e):Op.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:n,anchorX:r=t/2,anchorY:i=n/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,n/2-i]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:n,width:r,height:i}=this.state.iconManager.getIconMapping(e);return[t,n,r,i]}}pt(KB,"defaultProps",JB),pt(KB,"layerName","IconLayer");const XB=[0,0,0,255],YB={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:XB},getLineColor:{type:"accessor",value:XB},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class qB extends qP{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (!filled) {\n    discard;\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,JT]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var t;const{gl:e}=this.context;null===(t=this.state.model)||void 0===t||t.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw(e){let{uniforms:t}=e;const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:d,lineWidthMinPixels:A,lineWidthMaxPixels:h}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:hb[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:hb[u],lineWidthScale:d,lineWidthMinPixels:A,lineWidthMaxPixels:h}).draw()}_getModel(e){return new oP(e,{...this.getShaders(),id:this.props.id,geometry:new XT({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}pt(qB,"defaultProps",YB),pt(qB,"layerName","ScatterplotLayer");const ZB=.75,$B=[];class eO extends KB{constructor(){super(...arguments),pt(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(e,t)=>{let{index:n,target:r}=t;return this.encodePickingColor(n,r)}}})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;let{outlineColor:r}=t;r!==n.outlineColor&&(r=r.map((e=>e/255)),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&Op.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:n,outlineWidth:r}=this.props,{outlineColor:i}=this.state,o=r?Math.max(n,ZB*(1-r)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:ZB,outlineBuffer:o,gamma:n,sdf:Boolean(t),outlineColor:i},super.draw(e),t&&r){const{iconManager:e}=this.state;e.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:ZB}})}}getInstanceOffset(e){return e?Array.from(e).flatMap((e=>super.getInstanceOffset(e))):$B}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap((e=>super.getInstanceIconFrame(e))):$B}}pt(eO,"defaultProps",{getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),pt(eO,"layerName","MultiIconLayer");const tO=1e20;class nO{constructor(){let{fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=r,this.radius=n;const a=this.size=e+4*t,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(s," ").concat(o," ").concat(e,"px ").concat(i),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,s+Math.ceil(r)),c=a+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),A=new Uint8ClampedArray(d),h={data:A,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:t};if(0===a||0===l)return h;const{ctx:f,buffer:p,gridInner:g,gridOuter:m}=this;f.clearRect(p,p,a,l),f.fillText(e,p,p+s);const v=f.getImageData(p,p,a,l);m.fill(tO,0,d),g.fill(0,0,d);for(let b=0;b<l;b++)for(let e=0;e<a;e++){const t=v.data[4*(b*a+e)+3]/255;if(0===t)continue;const n=(b+p)*c+e+p;if(1===t)m[n]=0,g[n]=tO;else{const e=.5-t;m[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}rO(m,0,0,c,u,c,this.f,this.v,this.z),rO(g,p,p,a,l,c,this.f,this.v,this.z);for(let b=0;b<d;b++){const e=Math.sqrt(m[b])-Math.sqrt(g[b]);A[b]=Math.round(255-255*(e/this.radius+this.cutoff))}return h}}function rO(e,t,n,r,i,o,s,a,l){for(let c=t;c<t+r;c++)iO(e,n*o+c,o,i,s,a,l);for(let c=n;c<n+i;c++)iO(e,c*o+t,1,r,s,a,l)}function iO(e,t,n,r,i,o,s){o[0]=0,s[0]=-tO,s[1]=tO,i[0]=e[t];for(let a=1,l=0,c=0;a<r;a++){i[a]=e[t+a*n];const r=a*a;do{const e=o[l];c=(i[a]-i[e]+r-e*e)/(a-e)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=tO}for(let a=0,l=0;a<r;a++){for(;s[l+1]<a;)l++;const r=o[l],c=a-r;e[t+a*n]=i[r]+c*c}}const oO=32,sO=[];function aO(e,t,n,r){let i=0;for(let s=t;s<n;s++){var o;i+=(null===(o=r[e[s]])||void 0===o?void 0:o.layoutWidth)||0}return i}function lO(e,t,n,r,i,o){let s=t,a=0;for(let l=t;l<n;l++){const t=aO(e,l,l+1,i);a+t>r&&(s<l&&o.push(l),s=l,a=0),a+=t}return a}function cO(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=e.length);const s=[];return"break-all"===t?lO(e,i,o,n,r,s):function(e,t,n,r,i,o){let s=t,a=t,l=t,c=0;for(let u=t;u<n;u++)if(" "===e[u]?l=u+1:" "!==e[u+1]&&u+1!==n||(l=u+1),l>a){let t=aO(e,a,l,i);c+t>r&&(s<a&&(o.push(a),s=a,c=0),t>r&&(t=lO(e,a,l,r,i,o),s=o[o.length-1])),a=l,c+=t}}(e,i,o,n,r,s),s}function uO(e,t,n,r,i,o){let s=0,a=0;for(let l=t;l<n;l++){const t=e[l],n=r[t];n?(a||(a=n.layoutHeight),i[l]=s+n.layoutWidth/2,s+=n.layoutWidth):(Op.warn("Missing character: ".concat(t," (").concat(t.codePointAt(0),")"))(),i[l]=s,s+=oO)}o[0]=s,o[1]=a}class dO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;pt(this,"limit",void 0),pt(this,"_cache",{}),pt(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const AO={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let hO=new dO(3);function fO(e,t){for(let n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function pO(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}class gO{constructor(){pt(this,"props",{...AO}),pt(this,"_key",void 0),pt(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:t}=this.props;return(1.2*e+2*t)/e}setProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.props,e),this._key=this._getKey();const t=function(e,t){let n;n="string"===typeof t?new Set(Array.from(t)):new Set(t);const r=hO.get(e);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}(this._key,this.props.characterSet),n=hO.get(this._key);if(n&&0===t.size)return void(this._atlas!==n&&(this._atlas=n));const r=this._generateFontAtlas(t,n);this._atlas=r,hO.set(this._key,r)}_generateFontAtlas(e,t){const{fontFamily:n,fontWeight:r,fontSize:i,buffer:o,sdf:s,radius:a,cutoff:l}=this.props;let c=t&&t.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});pO(u,n,i,r);const{mapping:d,canvasHeight:A,xOffset:h,yOffset:f}=function(e){let{characterSet:t,getFontWidth:n,fontHeight:r,buffer:i,maxCanvasWidth:o,mapping:s={},xOffset:a=0,yOffset:l=0}=e,c=0,u=a;const d=r+2*i;for(const h of t)if(!s[h]){const e=n(h);u+e+2*i>o&&(u=0,c++),s[h]={x:u+i,y:l+c*d+i,width:e,height:d,layoutWidth:e,layoutHeight:r},u+=e+2*i}return{mapping:s,xOffset:u,yOffset:l+c*d,canvasHeight:(A=l+(c+1)*d,Math.pow(2,Math.ceil(Math.log2(A))))};var A}({getFontWidth:e=>u.measureText(e).width,fontHeight:1.2*i,buffer:o,characterSet:e,maxCanvasWidth:1024,...t&&{mapping:t.mapping,xOffset:t.xOffset,yOffset:t.yOffset}});if(c.height!==A){const e=u.getImageData(0,0,c.width,c.height);c.height=A,u.putImageData(e,0,0)}if(pO(u,n,i,r),s){const t=new nO({fontSize:i,buffer:o,radius:a,cutoff:l,fontFamily:n,fontWeight:"".concat(r)});for(const n of e){const{data:e,width:r,height:o,glyphTop:s}=t.draw(n);d[n].width=r,d[n].layoutOffsetY=.9*i-s;const a=u.createImageData(r,o);fO(e,a),u.putImageData(a,d[n].x,d[n].y)}}else for(const p of e)u.fillText(p,d[p].x,d[p].y+o+.9*i);return{xOffset:h,yOffset:f,mapping:d,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:n,buffer:r,sdf:i,radius:o,cutoff:s}=this.props;return i?"".concat(e," ").concat(t," ").concat(n," ").concat(r," ").concat(o," ").concat(s):"".concat(e," ").concat(t," ").concat(n," ").concat(r)}}const mO={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class vO extends qP{constructor(){super(...arguments),pt(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,JT]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var n;const{gl:e}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw(e){let{uniforms:t}=e;const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:n,stroked:Boolean(a),padding:l,sizeUnits:hb[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new oP(e,{...this.getShaders(),id:this.props.id,geometry:new XT({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}pt(vO,"defaultProps",mO),pt(vO,"layerName","TextBackgroundLayer");const bO={start:1,middle:0,end:-1},yO={top:1,center:0,bottom:-1},xO=[0,0,0,255],wO={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:xO},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:AO.characterSet},fontFamily:AO.fontFamily,fontWeight:AO.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:xO},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:xO},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class _O extends FB{constructor(){super(...arguments),pt(this,"state",void 0),pt(this,"getBoundingRect",((e,t)=>{let{size:[n,r]}=this.transformParagraph(e,t);const{fontSize:i}=this.state.fontAtlasManager.props;n/=i,r/=i;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(bO["function"===typeof o?o(e,t):o]-1)*n/2,(yO["function"===typeof s?s(e,t):s]-1)*r/2,n,r]})),pt(this,"getIconOffsets",((e,t)=>{const{getTextAnchor:n,getAlignmentBaseline:r}=this.props,{x:i,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(e,t),c=bO["function"===typeof n?n(e,t):n],u=yO["function"===typeof r?r(e,t):r],d=i.length,A=new Array(2*d);let h=0;for(let f=0;f<d;f++){const e=(1-c)*(a-s[f])/2;A[h++]=(c-1)*a/2+e+i[f],A[h++]=(u-1)*l/2+o[f]}return A}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new gO},this.props.maxWidth>0&&Op.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:t,oldProps:n,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||t.lineHeight!==n.lineHeight||t.wordBreak!==n.wordBreak||t.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo(e){let{info:t}=e;return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:n}=this.props,{fontAtlasManager:r,characterSet:i}=this.state,o={...e,characterSet:i,fontFamily:t,fontWeight:n};if(!r.mapping)return r.setProps(o),!0;for(const s in o)if(o[s]!==r.props[s])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:t,characterSet:n}=this.props,r=null===(e=t.attributes)||void 0===e?void 0:e.getText;let i,{getText:o}=this.props,s=t.startIndices;const a="auto"===n&&new Set;if(r&&s){const{texts:e,characterCount:n}=function(e){let{value:t,length:n,stride:r,offset:i,startIndices:o,characterSet:s}=e;const a=t.BYTES_PER_ELEMENT,l=r?r/a:1,c=i?i/a:0,u=o[n]||Math.ceil((t.length-c)/l),d=s&&new Set,A=new Array(n);let h=t;if(l>1||c>0){h=new(0,t.constructor)(u);for(let e=0;e<u;e++)h[e]=t[e*l+c]}for(let f=0;f<n;f++){const e=o[f],t=o[f+1]||u,n=h.subarray(e,t);A[f]=String.fromCodePoint.apply(null,n),d&&n.forEach(d.add,d)}if(d)for(const f of d)s.add(String.fromCodePoint(f));return{texts:A,characterCount:u}}({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:s,characterSet:a});i=n,o=(t,n)=>{let{index:r}=n;return e[r]}}else{const{iterable:e,objectInfo:n}=fM(t);s=[0],i=0;for(const t of e){n.index++;const e=Array.from(o(t,n)||"");a&&e.forEach(a.add,a),i+=e.length,s.push(i)}}this.setState({getText:o,startIndices:s,numInstances:i,characterSet:a||n})}transformParagraph(e,t){const{fontAtlasManager:n}=this.state,r=n.mapping,i=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(e,t,n,r,i){const o=Array.from(e),s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,d=[0,0],A=[0,0];let h=0,f=0,p=0;for(let m=0;m<=s;m++){const e=o[m];if("\n"!==e&&m!==s||(p=m),p>f){const e=u?cO(o,n,r,i,f,p):sO;for(let n=0;n<=e.length;n++){const r=0===n?f:e[n-1],s=n<e.length?e[n]:p;uO(o,r,s,i,a,A);for(let e=r;e<s;e++){var g;const t=(null===(g=i[o[e]])||void 0===g?void 0:g.layoutOffsetY)||0;l[e]=h+A[1]/2+t,c[e]=A[0]}h+=A[1]*t,d[0]=Math.max(d[0],A[0])}f=p}"\n"===e&&(a[f]=0,l[f]=0,c[f]=0,f++)}return d[1]=h,{x:a,y:l,rowWidth:c,size:d}}(i(e,t)||"",s,o,a*n.props.fontSize,r)}renderLayers(){const{startIndices:e,numInstances:t,getText:n,fontAtlasManager:{scale:r,texture:i,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:l,getPosition:c,getColor:u,getSize:d,getAngle:A,getPixelOffset:h,getBackgroundColor:f,getBorderColor:p,getBorderWidth:g,backgroundPadding:m,background:v,billboard:b,fontSettings:y,outlineWidth:x,outlineColor:w,sizeScale:_,sizeUnits:S,sizeMinPixels:C,sizeMaxPixels:E,transitions:M,updateTriggers:P}=this.props,T=this.getSubLayerClass("characters",eO),k=this.getSubLayerClass("background",vO);return[v&&new k({getFillColor:f,getLineColor:p,getLineWidth:g,padding:m,getPosition:c,getSize:d,getAngle:A,getPixelOffset:h,billboard:b,sizeScale:_,sizeUnits:S,sizeMinPixels:C,sizeMaxPixels:E,transitions:M&&{getPosition:M.getPosition,getAngle:M.getAngle,getSize:M.getSize,getFillColor:M.getBackgroundColor,getLineColor:M.getBorderColor,getLineWidth:M.getBorderWidth,getPixelOffset:M.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:P.getPosition,getAngle:P.getAngle,getSize:P.getSize,getFillColor:P.getBackgroundColor,getLineColor:P.getBorderColor,getLineWidth:P.getBorderWidth,getPixelOffset:P.getPixelOffset,getBoundingRect:{getText:P.getText,getTextAnchor:P.getTextAnchor,getAlignmentBaseline:P.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new T({sdf:y.sdf,smoothing:Number.isFinite(y.smoothing)?y.smoothing:AO.smoothing,outlineWidth:x/(y.radius||AO.radius),outlineColor:w,iconAtlas:i,iconMapping:o,getPosition:c,getColor:u,getSize:d,getAngle:A,getPixelOffset:h,billboard:b,sizeScale:_*r,sizeUnits:S,sizeMinPixels:C*r,sizeMaxPixels:E*r,transitions:M&&{getPosition:M.getPosition,getAngle:M.getAngle,getColor:M.getColor,getSize:M.getSize,getPixelOffset:M.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:P.getText,getPosition:P.getPosition,getAngle:P.getAngle,getColor:P.getColor,getSize:P.getSize,getPixelOffset:P.getPixelOffset,getIconOffsets:{getTextAnchor:P.getTextAnchor,getAlignmentBaseline:P.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(e){!function(e){Op.assert(Number.isFinite(e)&&e>=3,"Invalid cache limit"),hO=new dO(e)}(e)}}pt(_O,"defaultProps",wO),pt(_O,"layerName","TextLayer");var SO=n(973),CO=n.n(SO);const EO=aB,MO=lB,PO={isClosed:!0};function TO(e){return"positions"in e?e.positions:e}function kO(e){return"holeIndices"in e?e.holeIndices:null}function BO(e,t,n,r,i){let o=t;const s=n.length;for(let a=0;a<s;a++)for(let t=0;t<r;t++)e[o++]=n[a][t]||0;if(!function(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(let a=0;a<r;a++)e[o++]=n[0][a]||0;return PO.start=t,PO.end=o,PO.size=r,cB(e,i,PO),o}function OO(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;o=o||n.length;const a=o-i;if(a<=0)return t;let l=t;for(let c=0;c<a;c++)e[l++]=n[i+c];if(!function(e,t,n,r){for(let i=0;i<t;i++)if(e[n+i]!==e[r-t+i])return!1;return!0}(n,r,i,o))for(let c=0;c<r;c++)e[l++]=n[i+c];return PO.start=t,PO.end=l,PO.size=r,cB(e,s,PO),l}function IO(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);const n=[],r=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let e=0;for(let s=0;s<=o.length;s++)e=OO(n,e,i,t,o[s-1],o[s],0===s?EO:MO),r.push(e);return r.pop(),{positions:n,holeIndices:r}}e=i}if(!function(e){return Array.isArray(e[0])}(e))return OO(n,0,e,t,0,n.length,EO),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){let i=0;for(const[o,s]of e.entries())i=BO(n,i,s,t,0===o?EO:MO),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return BO(n,0,e,t,EO),n}function RO(e,t,n){const r=e.length/3;let i=0;for(let o=0;o<r;o++){const s=(o+1)%r;i+=e[3*o+t]*e[3*s+n],i-=e[3*s+t]*e[3*o+n]}return Math.abs(i/2)}function LO(e,t,n,r){const i=e.length/3;for(let o=0;o<i;o++){const i=3*o,s=e[i+0],a=e[i+1],l=e[i+2];e[i+t]=s,e[i+n]=a,e[i+r]=l}}class DO extends sB{constructor(e){const{fp64:t,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:t?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:t}=this;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}updateGeometry(e){super.updateGeometry(e);const t=this.buffers.indices;if(t)this.vertexCount=(t.value||t).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const t=IO(e,this.positionSize);return this.opts.resolution?bB(TO(t),kO(t),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n||{};t=t||[];const s=[],a=[];let l=0,c=0;for(let d=0;d<=t.length;d++){const i=t[d]||e.length,o=c,u=CB(e,r,l,i);for(let t=u;t<i;t++)s[c++]=e[t];for(let t=l;t<u;t++)s[c++]=e[t];MB(s,r,o,c),EB(s,r,o,c,null===n||void 0===n?void 0:n.maxLatitude),l=i,a[d]=c}a.pop();const u=bB(s,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const d of u)PB(d.positions,r);return u}(TO(t),kO(t),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):t}return e}getGeometrySize(e){if(FO(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}return TO(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,t){if(e&&FO(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e,t.indexStart=this.indexStarts[t.geometryIndex+1]}else this._updateIndices(e,t),this._updatePositions(e,t),this._updateVertexValid(e,t)}_updateIndices(e,t){let{geometryIndex:n,vertexStart:r,indexStart:i}=t;const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!e)return;let c=i;const u=function(e,t,n,r){let i=kO(e);i&&(i=i.map((e=>e/t)));let o=TO(e);const s=r&&3===t;if(n){const e=o.length;o=o.slice();const r=[];for(let i=0;i<e;i+=t){r[0]=o[i],r[1]=o[i+1],s&&(r[2]=o[i+2]);const e=n(r);o[i]=e[0],o[i+1]=e[1],s&&(o[i+2]=e[2])}}if(s){const e=RO(o,0,1),t=RO(o,0,2),r=RO(o,1,2);if(!e&&!t&&!r)return[];e>t&&e>r||(t>r?(n||(o=o.slice()),LO(o,0,2,1)):(n||(o=o.slice()),LO(o,2,0,1)))}return CO()(o,i,t)}(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let d=0;d<u.length;d++)l[c++]=u[d]+r;s[n+1]=i+u.length,o.indices=l}_updatePositions(e,t){let{vertexStart:n,geometrySize:r}=t;const{attributes:{positions:i},positionSize:o}=this;if(!i||!e)return;const s=TO(e);for(let a=n,l=0;l<r;a++,l++){const e=s[l*o],t=s[l*o+1],n=o>2?s[l*o+2]:0;i[3*a]=e,i[3*a+1]=t,i[3*a+2]=n}}_updateVertexValid(e,t){let{vertexStart:n,geometrySize:r}=t;const{positionSize:i}=this,o=this.attributes.vertexValid,s=e&&kO(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,n):o.fill(1,n,n+r),s)for(let a=0;a<s.length;a++)o[n+s[a]/i-1]=0;o[n+r-1]=0}}function FO(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const NO="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",zO="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(NO,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),jO="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(NO,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),UO=[0,0,0,255],GO={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:UO},getLineColor:{type:"accessor",value:UO},material:!0},VO={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class HO extends qP{constructor(){super(...arguments),pt(this,"state",void 0)}getShaders(e){return super.getShaders({vs:"top"===e?zO:jO,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[LT,VT,JT]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:t}=this.context;let{coordinateSystem:n}=this.props;const{_full3d:r}=this.props;let i;t.isGeospatial&&n===db.DEFAULT&&(n=db.LNGLAT),n===db.LNGLAT&&(i=r?t.projectPosition.bind(t):t.projectFlat.bind(t)),this.setState({numInstances:0,polygonTesselator:new DO({preproject:i,fp64:this.use64bitPositions(),IndexType:!e||Dw(e,gw)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),s=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:VO,accessor:"getPolygon",update:this.calculatePositions,noAlloc:s,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,transition:VO,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:VO,accessor:"getFillColor",defaultValue:UO,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:VO,accessor:"getLineColor",defaultValue:UO,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(e,t)=>{let{index:n,target:r}=t;return this.encodePickingColor(e&&e.__source?e.__source.index:n,r)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,{data:r}=this.props;return r[0]&&r[0].__source&&(t.object=r.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const{data:t}=this.props;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw(e){let{uniforms:t}=e;const{extruded:n,filled:r,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:l}=this.state,c={...t,extruded:Boolean(n),elevationScale:o};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(l.vertexCount),s.setUniforms(c).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:t,oldProps:n,changeFlags:r}=e,i=this.getAttributeManager();var o;(r.extensionsChanged||t.filled!==n.filled||t.extruded!==n.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((e=>e.delete())),this.setState(this._getModels(this.context.gl)),i.invalidateAll())}updateGeometry(e){let{props:t,oldProps:n,changeFlags:r}=e;if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:e}=this.state,n=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:t._full3d}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:t,filled:n,extruded:r}=this.props;let i,o;if(n){const n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,i=new oP(e,{...n,id:"".concat(t,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return r&&(o=new oP(e,{...this.getShaders("side"),id:"".concat(t,"-side"),geometry:new XT({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,i].filter(Boolean),topModel:i,sideModel:o}}calculateIndices(e){const{polygonTesselator:t}=this.state;e.startIndices=t.indexStarts,e.value=t.get("indices")}calculatePositions(e){const{polygonTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}pt(HO,"defaultProps",GO),pt(HO,"layerName","SolidPolygonLayer");const WO={circle:{type:qB,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:KB,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:_O,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},QO={type:LB,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},JO={type:HO,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function KO(e){let{type:t,props:n}=e;const r={};for(const i in n)r[i]=t.defaultProps[n[i]];return r}function XO(e,t){const{transitions:n,updateTriggers:r}=e.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in t){const s=t[o];let a=e.props[o];o.startsWith("get")&&(a=e.getSubLayerAccessor(a),i.updateTriggers[s]=r[o],n&&(i.transitions[s]=n[o])),i[s]=a}return i}function YO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=n;for(let s=i;s<o;s++){const n=e[s],{geometry:i}=n;if(i)if("GeometryCollection"===i.type){Op.assert(Array.isArray(i.geometries),"GeoJSON does not have geometries array");const{geometries:e}=i;for(let i=0;i<e.length;i++){qO(e[i],r,t,n,s)}}else qO(i,r,t,n,s)}return r}function qO(e,t,n,r,i){const{type:o,coordinates:s}=e,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=t;if(function(e,t){let n=ZO[e];Op.assert(n,"Unknown GeoJSON type ".concat(e));for(;t&&--n>0;)t=t[0];return t&&Number.isFinite(t[0])}(o,s))switch(o){case"Point":a.push(n({geometry:e},r,i));break;case"MultiPoint":s.forEach((e=>{a.push(n({geometry:{type:"Point",coordinates:e}},r,i))}));break;case"LineString":l.push(n({geometry:e},r,i));break;case"MultiLineString":s.forEach((e=>{l.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"Polygon":c.push(n({geometry:e},r,i)),s.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"MultiPolygon":s.forEach((e=>{c.push(n({geometry:{type:"Polygon",coordinates:e}},r,i)),e.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}))}))}else Op.warn("".concat(o," coordinates are malformed"))()}const ZO={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function $O(e){return e.geometry.coordinates}function eI(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:r,lines:i,polygons:o}=e,s=function(e,t){const n={points:null,lines:null,polygons:null};for(const r in n){const i=e[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(3*i.length);const o=[];for(let e=0;e<i.length;e++)t(i[e],o),n[r][3*e+0]=o[0],n[r][3*e+1]=o[1],n[r][3*e+2]=o[2]}return n}(e,t);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:s.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const tI=["points","linestrings","polygons"],nI={...KO(WO.circle),...KO(WO.icon),...KO(WO.text),...KO(QO),...KO(JO),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class rI extends FB{initializeState(){this.state={layerProps:{},features:{}}}updateState(e){let{props:t,changeFlags:n}=e;if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:n}):this._updateStateJSON({props:t,changeFlags:n})}_updateStateBinary(e){let{props:t,changeFlags:n}=e;const r=eI(t.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON(e){let{props:t,changeFlags:n}=e;const r=function(e){if(Array.isArray(e))return e;switch(Op.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Op.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(t.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(n.dataChanged)){const e=this.state.features;for(const t in e)o[t]=e[t].slice(),s[t]=[];for(const t of n.dataChanged){const n=YO(r,i,t);for(const r in e)s[r].push(NB({data:o[r],getIndex:e=>e.__source.index,dataRange:t,replace:n[r]}))}}else o=YO(r,i);const a=function(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=e;return n.points.data=r,n.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),n.points.getPosition=$O,n.lines.data=i,n.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),n.lines.getPath=$O,n.polygons.data=o,n.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),n.polygons.getPolygon=$O,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),n.polygonsOutline.getPath=$O,n}(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n,sourceLayer:r}=t;return t.featureType=tI.find((e=>r.id.startsWith("".concat(this.id,"-").concat(e,"-")))),n>=0&&r.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(t.index=this.props.data.points.globalFeatureIds.value[n]),t}_updateAutoHighlight(e){const t="".concat(this.id,"-points-"),n="points"===e.featureType;for(const r of this.getSubLayers())r.id.startsWith(t)===n&&r.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:t}=this.props,{layerProps:n}=this.state,r="polygons-fill",i=this.shouldRenderSubLayer(r,n.polygons.data)&&this.getSubLayerClass(r,JO.type);if(i){const o=XO(this,JO.props),s=e&&t;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new i(o,this.getSubLayerProps({id:r,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:t}=this.props,{layerProps:n}=this.state,r="polygons-stroke",i="linestrings",o=!e&&t&&this.shouldRenderSubLayer(r,n.polygonsOutline.data)&&this.getSubLayerClass(r,QO.type),s=this.shouldRenderSubLayer(i,n.lines.data)&&this.getSubLayerClass(i,QO.type);if(o||s){const e=XO(this,QO.props);return[o&&new o(e,this.getSubLayerProps({id:r,updateTriggers:e.updateTriggers}),n.polygonsOutline),s&&new s(e,this.getSubLayerProps({id:i,updateTriggers:e.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:t,binary:n}=this.state;let{highlightedObjectIndex:r}=this.props;!n&&Number.isFinite(r)&&(r=t.points.data.findIndex((e=>e.__source.index===r)));const i=new Set(e.split("+")),o=[];for(const s of i){const e="points-".concat(s),i=WO[s],a=i&&this.shouldRenderSubLayer(e,t.points.data)&&this.getSubLayerClass(e,i.type);if(a){const l=XO(this,i.props);let c=t.points;if("text"===s&&n){const{instancePickingColors:e,...t}=c.data.attributes;c={...c,data:{...c.data,attributes:t}}}o.push(new a(l,this.getSubLayerProps({id:e,updateTriggers:l.updateTriggers,highlightedObjectIndex:r}),c))}}return o}renderLayers(){const{extruded:e}=this.props,t=this._renderPolygonLayer();return[!e&&t,this._renderLineLayers(),this._renderPointLayers(),e&&t]}getSubLayerAccessor(e){const{binary:t}=this.state;return t&&"function"===typeof e?(t,n)=>{const{data:r,index:i}=n,o=function(e,t){if(!e)return null;const n="startIndices"in e?e.startIndices[t]:t,r=e.featureIds.value[n];return-1!==n?function(e,t,n){const r={properties:{...e.properties[t]}};for(const i in e.numericProps)r.properties[i]=e.numericProps[i].value[n];return r}(e,r,n):null}(r,i);return e(o,n)}:super.getSubLayerAccessor(e)}}pt(rI,"layerName","GeoJsonLayer"),pt(rI,"defaultProps",nI);const iI=(e,t,n,r,i)=>{const{height:o,color:s,name:a}=t,l=((e,t,n)=>{const r=t,i=e.x-r/2,o=e.y-r/2;return n.current.pickObjects({x:i,y:o,width:r,height:r})})(e,r,i);l.forEach((e=>{const t=e.object.properties;t&&t.interactive&&(t.color=Gf(s)?Uf(s):s,t.height=o,t.name=a)})),n(l)},oI=e=>{const t=JSON.parse(JSON.stringify(e.GEOGRID));for(let i=0;i<(null===e||void 0===e||null===(n=e.GEOGRID)||void 0===n||null===(r=n.features)||void 0===r?void 0:r.length);i++){var n,r;t.features[i].properties=e.GEOGRIDDATA[i],t.features[i].properties={...t.features[i].properties,id:i}}return t};function sI(e){let{data:t,editOn:n,state:{selectedType:r,keyDownState:i,selectedCellsState:o,pickingRadius:s,opacity:a},updaters:{setSelectedCellsState:l,setDraggingWhileEditing:c,setHoveredObj:u},deckGLRef:d}=e;return new rI({opacity:a,id:"GRID",data:t,pickable:!0,extruded:!0,wireframe:!0,elevationScale:5,lineWidthScale:1,lineWidthMinPixels:2,getElevation:e=>e.properties.height[1],getFillColor:e=>e.properties.color,onClick:e=>{r&&n&&"Shift"!==i&&iI(e,r,l,s,d)},onDrag:e=>{r&&n&&"Shift"!==i&&iI(e,r,l,s,d)},onDragStart:()=>{r&&n&&"Shift"!==i&&c(!0)},onHover:e=>{e.object&&u(e)},onDragEnd:()=>{c(!1)},updateTriggers:{getFillColor:o,getElevation:o},transitions:{getFillColor:500,getElevation:150}})}function aI(e){let{data:t,coordinates:n,opacity:r}=e;if(!t||!t.text)return;let i=[];return t.text.forEach((e=>{i.push({coordinates:[n.features[e.id].geometry.coordinates[0][0][0],n.features[e.id].geometry.coordinates[0][0][1],100],info:e.info})})),new _O({opacity:r,id:"text-layer",data:i,pickable:!0,getPosition:e=>e.coordinates,getText:e=>e.info,getColor:[255,255,255],getSize:30,getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"center"})}function lI(e){let{data:t,opacity:n}=e;if(t.geojson)return new rI({id:"GeojsonLayer",data:t.geojson,opacity:n,pickable:!0,wireframe:!1,stroked:!0,filled:!0,extruded:!0,lineWidthScale:1,getFillColor:e=>Uf(e.properties.fill),getLineColor:e=>Uf(e.properties.stroke),lineWidthMinPixels:2,getElevation:e=>e.properties.height,updateTriggers:{getFillColor:t,getElevation:t},transitions:{getFillColor:500,getElevation:500}})}const cI={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class uI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt(this,"props",void 0),pt(this,"stats",void 0),pt(this,"activeRequestCount",0),pt(this,"requestQueue",[]),pt(this,"requestMap",new Map),pt(this,"deferredUpdate",null),this.props={...cI,...e},this.stats=new Up({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const n={handle:e,priority:0,getPriority:t},r=new Promise((e=>(n.resolve=e,n)));return this.requestQueue.push(n),this.requestMap.set(e,r),this._issueNewRequests(),r}_issueRequest(e){const{handle:t,resolve:n}=e;let r=!1;const i=()=>{r||(r=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:i}):Promise.resolve({done:i})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const n=e[t];this._updateRequest(n)||(e.splice(t,1),this.requestMap.delete(n.handle),t--)}e.sort(((e,t)=>e.priority-t.priority))}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}class dI{constructor(e){pt(this,"index",void 0),pt(this,"isVisible",void 0),pt(this,"isSelected",void 0),pt(this,"parent",void 0),pt(this,"children",void 0),pt(this,"content",void 0),pt(this,"state",void 0),pt(this,"layers",void 0),pt(this,"id",void 0),pt(this,"zoom",void 0),pt(this,"userData",void 0),pt(this,"boundingBox",void 0),pt(this,"_abortController",void 0),pt(this,"_loader",void 0),pt(this,"_loaderId",void 0),pt(this,"_isLoaded",void 0),pt(this,"_isCancelled",void 0),pt(this,"_needsReload",void 0),pt(this,"_bbox",void 0),this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(e){this._bbox||(this._bbox=e,this.boundingBox="west"in e?[[e.west,e.south],[e.east,e.north]]:[[e.left,e.top],[e.right,e.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then((()=>this.data)):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}async _loadData(e){let{getData:t,requestScheduler:n,onLoad:r,onError:i}=e;const{index:o,id:s,bbox:a,userData:l,zoom:c}=this,u=this._loaderId;this._abortController=new AbortController;const{signal:d}=this._abortController,A=await n.scheduleRequest(this,(e=>e.isSelected?1:-1));if(!A)return void(this._isCancelled=!0);if(this._isCancelled)return void A.done();let h,f=null;try{f=await t({index:o,id:s,bbox:a,userData:l,zoom:c,signal:d})}catch(o0){h=o0||!0}finally{A.done()}u===this._loaderId&&(this._loader=void 0,this.content=f,!this._isCancelled||f?(this._isLoaded=!0,this._isCancelled=!1,h?i(h,this):r(this)):this._isLoaded=!1)}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var e;this.isLoaded||(this._isCancelled=!0,null===(e=this._abortController)||void 0===e||e.abort())}}const AI=Math.PI/180,hI=180/Math.PI,fI=6370972,pI=256;function gI(){const e=4018225162502676e-20,t=Math.PI/180*pI;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,24886.609375]}}class mI extends bb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:t=0,longitude:n=0,zoom:r=0,nearZMultiplier:i=.1,farZMultiplier:o=2,resolution:s=10}=e;let{height:a,altitude:l=1.5}=e;a=a||1,l=Math.max(.75,l);const c=(new Pv).lookAt({eye:[0,-l,0],up:[0,0,1]}),u=Math.pow(2,r);c.rotateX(t*AI),c.rotateZ(-n*AI),c.scale(u/a);const d=Math.atan(.5/l),A=512*u/a;super({...e,height:a,viewMatrix:c,longitude:n,latitude:t,zoom:r,distanceScales:gI(),fovyRadians:2*d,focalDistance:l,near:i,far:Math.min(2,1/A+1)*l*o}),pt(this,"longitude",void 0),pt(this,"latitude",void 0),pt(this,"resolution",void 0),this.latitude=t,this.longitude=n,this.resolution=s}get projectionMode(){return Ab.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(){const e={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},t=this.unproject([0,this.height/2],e),n=this.unproject([this.width/2,0],e),r=this.unproject([this.width,this.height/2],e),i=this.unproject([this.width/2,this.height],e);return r[0]<this.longitude&&(r[0]+=360),t[0]>this.longitude&&(t[0]-=360),[Math.min(t[0],r[0],n[0],i[0]),Math.min(t[1],r[1],n[1],i[1]),Math.max(t[0],r[0],n[0],i[0]),Math.max(t[1],r[1],n[1],i[1])]}unproject(e){let{topLeft:t=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=e,s=t?i:this.height-i,{pixelUnprojectionMatrix:a}=this;let l;if(Number.isFinite(o))l=vI(a,[r,s,o,1]);else{const e=vI(a,[r,s,-1,1]),t=vI(a,[r,s,1,1]),i=((n||0)/fI+1)*pI,o=Qm(Hm([],e,t)),c=Qm(e),u=Qm(t),d=4*((4*c*u-(o-c-u)**2)/16)/o;l=function(e,t,n,r){var i=t[0],o=t[1],s=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=s+r*(n[2]-s),e}([],e,t,(Math.sqrt(c-d)-Math.sqrt(Math.max(0,i*i-d)))/Math.sqrt(o))}const[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(e){const[t,n,r=0]=e,i=t*AI,o=n*AI,s=Math.cos(o),a=(r/fI+1)*pI;return[Math.sin(i)*s*a,-Math.cos(i)*s*a,Math.sin(o)*a]}unprojectPosition(e){const[t,n,r]=e,i=Wm(e),o=Math.asin(r/i);return[Math.atan2(t,-n)*hI,o*hI,(i/pI-1)*fI]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,t){const n=this.unproject(t);return{longitude:e[0]-n[0]+this.longitude,latitude:e[1]-n[1]+this.latitude}}}function vI(e,t){const n=xv([],t,e);return vv(n,n,1/n[3]),n}const bI=-1,yI=0,xI=1,wI=new qm,_I=new qm;class SI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;pt(this,"center",void 0),pt(this,"halfDiagonal",void 0),pt(this,"minimum",void 0),pt(this,"maximum",void 0),n=n||wI.copy(e).add(t).scale(.5),this.center=new qm(n),this.halfDiagonal=new qm(t).subtract(this.center),this.minimum=new qm(e),this.maximum=new qm(t)}clone(){return new SI(this.minimum,this.maximum,this.center)}equals(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:t}=this,n=_I.from(e.normal),r=t.x*Math.abs(n.x)+t.y*Math.abs(n.y)+t.z*Math.abs(n.z),i=this.center.dot(n)+e.distance;return i-r>0?xI:i+r<0?bI:yI}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=wI.from(e).subtract(this.center),{halfDiagonal:n}=this;let r,i=0;return r=Math.abs(t.x)-n.x,r>0&&(i+=r*r),r=Math.abs(t.y)-n.y,r>0&&(i+=r*r),r=Math.abs(t.z)-n.z,r>0&&(i+=r*r),i}}const CI=new qm,EI=new qm;class MI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;pt(this,"center",void 0),pt(this,"radius",void 0),this.radius=-0,this.center=new qm,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=CI.from(t),this.center=(new qm).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new MI(this.center,this.radius)}union(e){const t=this.center,n=this.radius,r=e.center,i=e.radius,o=CI.copy(r).subtract(t),s=o.magnitude();if(n>=s+i)return this.clone();if(i>=s+n)return e.clone();const a=.5*(n+s+i);return EI.copy(o).scale((-n+a)/s).add(t),this.center.copy(EI),this.radius=a,this}expand(e){const t=CI.from(e).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=dv(CI,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=CI.from(e).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const t=this.center,n=this.radius,r=e.normal.dot(t)+e.distance;return r<-n?bI:r<n?yI:xI}}function PI(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],A=n[0],h=n[1],f=n[2],p=n[3],g=n[4],m=n[5],v=n[6],b=n[7],y=n[8];return e[0]=A*r+h*s+f*c,e[1]=A*i+h*a+f*u,e[2]=A*o+h*l+f*d,e[3]=p*r+g*s+m*c,e[4]=p*i+g*a+m*u,e[5]=p*o+g*l+m*d,e[6]=v*r+b*s+y*c,e[7]=v*i+b*a+y*u,e[8]=v*o+b*l+y*d,e}function TI(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}var kI;!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"}(kI||(kI={}));const BI=Object.freeze([1,0,0,0,1,0,0,0,1]);class OI extends iv{static get IDENTITY(){return function(){RI||(RI=new OI,Object.freeze(RI));return RI}()}static get ZERO(){return function(){II||(II=new OI([0,0,0,0,0,0,0,0,0]),Object.freeze(II));return II}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return kI}constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(BI)}fromObject(e){return this.check()}fromQuaternion(e){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,d=r*a,A=i*s,h=i*a,f=i*l,p=o*s,g=o*a,m=o*l;e[0]=1-d-f,e[3]=u-m,e[6]=A+g,e[1]=u+m,e[4]=1-c-f,e[7]=h-p,e[2]=A-g,e[5]=h+p,e[8]=1-c-d}(this,e),this.check()}set(e,t,n,r,i,o,s,a,l){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this.check()}setRowMajor(e,t,n,r,i,o,s,a,l){return this[0]=e,this[1]=r,this[2]=s,this[3]=t,this[4]=i,this[5]=a,this[6]=n,this[7]=o,this[8]=l,this.check()}determinant(){return function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*(c*o-s*l)+n*(-c*i+s*a)+r*(l*i-o*a)}(this)}transpose(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8]}(this,this),this.check()}invert(){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=u*s-a*c,A=-u*o+a*l,h=c*o-s*l,f=n*d+r*A+i*h;f&&(f=1/f,e[0]=d*f,e[1]=(-u*r+i*c)*f,e[2]=(a*r-i*s)*f,e[3]=A*f,e[4]=(u*n-i*l)*f,e[5]=(-a*n+i*o)*f,e[6]=h*f,e[7]=(-c*n+r*l)*f,e[8]=(s*n-r*o)*f)}(this,this),this.check()}multiplyLeft(e){return PI(this,e,this),this.check()}multiplyRight(e){return PI(this,this,e),this.check()}rotate(e){return function(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],A=Math.sin(n),h=Math.cos(n);e[0]=h*r+A*s,e[1]=h*i+A*a,e[2]=h*o+A*l,e[3]=h*s-A*r,e[4]=h*a-A*i,e[5]=h*l-A*o,e[6]=c,e[7]=u,e[8]=d}(this,this,e),this.check()}scale(e){return Array.isArray(e)?TI(this,this,e):TI(this,this,[e,e]),this.check()}translate(e){return function(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],A=n[0],h=n[1];e[0]=r,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=A*r+h*s+c,e[7]=A*i+h*a+u,e[8]=A*o+h*l+d}(this,this,e),this.check()}transform(e,t){let n;switch(e.length){case 2:n=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}(t||[-0,-0],e,this);break;case 3:n=Gm(t||[-0,-0,-0],e,this);break;case 4:n=Km(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Om(n,e.length),n}transformVector(e,t){return this.transform(e,t)}transformVector2(e,t){return this.transform(e,t)}transformVector3(e,t){return this.transform(e,t)}}let II,RI,LI;class DI extends Rm{static get ZERO(){return LI||(LI=new DI(0,0,0,0),Object.freeze(LI)),LI}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(-0,-0,-0,-0),Cm(e)&&1===arguments.length?this.copy(e):(_m.debug&&(Bm(e),Bm(t),Bm(n),Bm(r)),this[0]=e,this[1]=t,this[2]=n,this[3]=r)}set(e,t,n,r){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return _m.debug&&(Bm(e.x),Bm(e.y),Bm(e.z),Bm(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Bm(e)}get w(){return this[3]}set w(e){this[3]=Bm(e)}transform(e){return Um(this,this,e),this.check()}transformByMatrix3(e){return Km(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2],e[3]=t[3]}(this,this,e),this.check()}transformByQuaternion(e){return Vm(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function FI(){var e=new Dm(4);return Dm!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function NI(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function zI(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+s*a+i*c-o*l,e[1]=i*u+s*l+o*a-r*c,e[2]=o*u+s*c+r*l-i*a,e[3]=s*u-r*a-i*l-o*c,e}function jI(e,t,n,r){var i,o,s,a,l,c=t[0],u=t[1],d=t[2],A=t[3],h=n[0],f=n[1],p=n[2],g=n[3];return(o=c*h+u*f+d*p+A*g)<0&&(o=-o,h=-h,f=-f,p=-p,g=-g),1-o>Lm?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,l=Math.sin(r*i)/s):(a=1-r,l=r),e[0]=a*c+l*h,e[1]=a*u+l*f,e[2]=a*d+l*p,e[3]=a*A+l*g,e}function UI(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*s+s]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+s]-t[3*s+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[s]=(t[3*s+i]+t[3*i+s])*n}return e}var GI=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},VI=vv,HI=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},WI=function(e,t,n,r){var i=t[0],o=t[1],s=t[2],a=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=s+r*(n[2]-s),e[3]=a+r*(n[3]-a),e},QI=bv,JI=yv,KI=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=o*s,e},XI=function(){var e=Fm(),t=Nm(1,0,0),n=Nm(0,1,0);return function(r,i,o){var s=zm(i,o);return s<-.999999?(jm(e,t,i),Wm(e)<1e-6&&jm(e,n,i),function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o}(e,e),NI(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(jm(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,KI(r,r))}}();(function(){var e=FI(),t=FI()})(),function(){var e=function(){var e=new Dm(9);return Dm!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}()}();const YI=[0,0,0,1];class qI extends km{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,n,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,n,r){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return UI(this,e),this.check()}fromAxisRotation(e,t){return NI(this,e,t),this.check()}identity(){var e;return(e=this)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Bm(e)}get y(){return this[1]}set y(e){this[1]=Bm(e)}get z(){return this[2]}set z(e){this[2]=Bm(e)}get w(){return this[3]}set w(e){this[3]=Bm(e)}len(){return QI(this)}lengthSquared(){return JI(this)}dot(e){return HI(this,e)}rotationTo(e,t){return XI(this,e,t),this.check()}add(e){return GI(this,this,e),this.check()}calculateW(){return function(e,t){var n=t[0],r=t[1],i=t[2];e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}conjugate(){return function(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3]}(this,this),this.check()}invert(){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;e[0]=-n*a,e[1]=-r*a,e[2]=-i*a,e[3]=o*a}(this,this),this.check()}lerp(e,t,n){return void 0===n?this.lerp(this,e,t):(WI(this,e,t,n),this.check())}multiplyRight(e){return zI(this,this,e),this.check()}multiplyLeft(e){return zI(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l+s*a,e[1]=i*l+o*a,e[2]=o*l-i*a,e[3]=s*l-r*a}(this,this,e),this.check()}rotateY(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l-o*a,e[1]=i*l+s*a,e[2]=o*l+r*a,e[3]=s*l-i*a}(this,this,e),this.check()}rotateZ(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l+i*a,e[1]=i*l-r*a,e[2]=o*l+s*a,e[3]=s*l-o*a}(this,this,e),this.check()}scale(e){return VI(this,this,e),this.check()}slerp(e,t,n){let r,i,o;switch(arguments.length){case 1:({start:r=YI,target:i,ratio:o}=e);break;case 2:r=this,i=e,o=t;break;default:r=e,i=t,o=n}return jI(this,r,i,o),this.check()}transformVector4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new DI;return function(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2],c=n[3],u=c*r+a*o-l*i,d=c*i+l*r-s*o,A=c*o+s*i-a*r,h=-s*r-a*i-l*o;e[0]=u*c+h*-s+d*-l-A*-a,e[1]=d*c+h*-a+A*-s-u*-l,e[2]=A*c+h*-l+u*-a-d*-s,e[3]=t[3]}(t,e,this),Om(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const ZI=new qm,$I=new qm,eR=new qm,tR=new qm,nR=new qm,rR=new qm,iR=new qm,oR=0,sR=1,aR=2,lR=3,cR=4,uR=5,dR=6,AR=7,hR=8;class fR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];pt(this,"center",void 0),pt(this,"halfAxes",void 0),this.center=(new qm).from(e),this.halfAxes=new OI(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new qm(e).len(),new qm(t).len(),new qm(n).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new qm(e).normalize(),i=new qm(t).normalize(),o=new qm(n).normalize();return(new qI).fromMatrix3(new OI([...r,...i,...o]))}fromCenterHalfSizeQuaternion(e,t,n){const r=new qI(n),i=(new OI).fromQuaternion(r);return i[0]=i[0]*t[0],i[1]=i[1]*t[0],i[2]=i[2]*t[0],i[3]=i[3]*t[1],i[4]=i[4]*t[1],i[5]=i[5]*t[1],i[6]=i[6]*t[2],i[7]=i[7]*t[2],i[8]=i[8]*t[2],this.center=(new qm).from(e),this.halfAxes=i,this}clone(){return new fR(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new MI;const t=this.halfAxes,n=t.getColumn(0,eR),r=t.getColumn(1,tR),i=t.getColumn(2,nR),o=ZI.copy(n).add(r).add(i);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,n=e.normal,r=this.halfAxes,i=n.x,o=n.y,s=n.z,a=Math.abs(i*r[oR]+o*r[sR]+s*r[aR])+Math.abs(i*r[lR]+o*r[cR]+s*r[uR])+Math.abs(i*r[dR]+o*r[AR]+s*r[hR]),l=n.dot(t)+e.distance;return l<=-a?bI:l>=a?xI:yI}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=$I.from(e).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,eR),i=n.getColumn(1,tR),o=n.getColumn(2,nR),s=r.magnitude(),a=i.magnitude(),l=o.magnitude();r.normalize(),i.normalize(),o.normalize();let c,u=0;return c=Math.abs(t.dot(r))-s,c>0&&(u+=c*c),c=Math.abs(t.dot(i))-a,c>0&&(u+=c*c),c=Math.abs(t.dot(o))-l,c>0&&(u+=c*c),u}computePlaneDistances(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const o=this.center,s=this.halfAxes,a=s.getColumn(0,eR),l=s.getColumn(1,tR),c=s.getColumn(2,nR),u=rR.copy(a).add(l).add(c).add(o),d=iR.copy(u).subtract(e);let A=t.dot(d);return r=Math.min(A,r),i=Math.max(A,i),u.copy(o).add(a).add(l).subtract(c),d.copy(u).subtract(e),A=t.dot(d),r=Math.min(A,r),i=Math.max(A,i),u.copy(o).add(a).subtract(l).add(c),d.copy(u).subtract(e),A=t.dot(d),r=Math.min(A,r),i=Math.max(A,i),u.copy(o).add(a).subtract(l).subtract(c),d.copy(u).subtract(e),A=t.dot(d),r=Math.min(A,r),i=Math.max(A,i),o.copy(u).subtract(a).add(l).add(c),d.copy(u).subtract(e),A=t.dot(d),r=Math.min(A,r),i=Math.max(A,i),o.copy(u).subtract(a).add(l).subtract(c),d.copy(u).subtract(e),A=t.dot(d),r=Math.min(A,r),i=Math.max(A,i),o.copy(u).subtract(a).subtract(l).add(c),d.copy(u).subtract(e),A=t.dot(d),r=Math.min(A,r),i=Math.max(A,i),o.copy(u).subtract(a).subtract(l).subtract(c),d.copy(u).subtract(e),A=t.dot(d),r=Math.min(A,r),i=Math.max(A,i),n[0]=r,n[1]=i,n}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,eR);t.transformAsPoint(e);const n=this.halfAxes.getColumn(1,tR);n.transformAsPoint(e);const r=this.halfAxes.getColumn(2,nR);return r.transformAsPoint(e),this.halfAxes=new OI([...t,...n,...r]),this}getTransform(){throw new Error("not implemented")}}const pR=new qm,gR=new qm;class mR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;pt(this,"normal",void 0),pt(this,"distance",void 0),this.normal=new qm,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Im(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=pR.from(e),this.normal.from(t).normalize();const n=-this.normal.dot(e);return this.distance=n,this}fromCoefficients(e,t,n,r){return this.normal.set(e,t,n),Im(Pm(this.normal.len(),1)),this.distance=r,this}clone(){return new mR(this.normal,this.distance)}equals(e){return Pm(this.distance,e.distance)&&Pm(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=gR.copy(this.normal).transformAsVector(e).normalize(),n=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(n,t)}projectPointOntoPlane(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];e=pR.from(e);const n=this.getPointDistance(e),r=gR.copy(this.normal).scale(n);return e.subtract(r).to(t)}}const vR=[new qm([1,0,0]),new qm([0,1,0]),new qm([0,0,1])],bR=new qm,yR=new qm;new mR(new qm(1,0,0),0);class xR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];pt(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*vR.length;const t=e.center,n=e.radius;let r=0;for(const i of vR){let e=this.planes[r],o=this.planes[r+1];e||(e=this.planes[r]=new mR),o||(o=this.planes[r+1]=new mR);const s=bR.copy(i).scale(-n).add(t);i.dot(s);e.fromPointNormal(s,i);const a=bR.copy(i).scale(n).add(t),l=yR.copy(i).negate();l.dot(a);o.fromPointNormal(a,l),r+=2}return this}computeVisibility(e){let t=xI;for(const n of this.planes){switch(e.intersectPlane(n)){case bI:return bI;case yI:t=yI}}return t}computeVisibilityWithPlaneMask(e,t){if(Im(Number.isFinite(t),"parentPlaneMask is required."),t===xR.MASK_OUTSIDE||t===xR.MASK_INSIDE)return t;let n=xR.MASK_INSIDE;const r=this.planes;for(let i=0;i<this.planes.length;++i){const o=i<31?1<<i:0;if(i<31&&0===(t&o))continue;const s=r[i],a=e.intersectPlane(s);if(a===bI)return xR.MASK_OUTSIDE;a===yI&&(n|=o)}return n}}pt(xR,"MASK_OUTSIDE",4294967295),pt(xR,"MASK_INSIDE",0),pt(xR,"MASK_INDETERMINATE",2147483647);new qm,new qm,new qm,new qm,new qm;new qm,new qm,new qm,new qm,new qm,new qm,new qm,new qm,new qm,new qm,new qm,new qm,Math.PI;const wR={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},_R=new OI,SR=new OI,CR=new OI,ER=new OI,MR=new OI;function PR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=wR.EPSILON20;let r=0,i=0;const o=SR,s=CR;o.identity(),s.copy(e);const a=n*function(e){let t=0;for(let n=0;n<9;++n){const r=e[n];t+=r*r}return Math.sqrt(t)}(s);for(;i<10&&BR(s)>a;)OR(s,ER),MR.copy(ER).transpose(),s.multiplyRight(ER),s.multiplyLeft(MR),o.multiplyRight(ER),++r>2&&(++i,r=0);return t.unitary=o.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}const TR=[1,0,0],kR=[2,2,1];function BR(e){let t=0;for(let n=0;n<3;++n){const r=e[_R.getElementIndex(kR[n],TR[n])];t+=2*r*r}return Math.sqrt(t)}function OR(e,t){const n=wR.EPSILON15;let r=0,i=1;for(let c=0;c<3;++c){const t=Math.abs(e[_R.getElementIndex(kR[c],TR[c])]);t>r&&(i=c,r=t)}const o=TR[i],s=kR[i];let a=1,l=0;if(Math.abs(e[_R.getElementIndex(s,o)])>n){const t=(e[_R.getElementIndex(s,s)]-e[_R.getElementIndex(o,o)])/2/e[_R.getElementIndex(s,o)];let n;n=t<0?-1/(-t+Math.sqrt(1+t*t)):1/(t+Math.sqrt(1+t*t)),a=1/Math.sqrt(1+n*n),l=n*a}return OI.IDENTITY.to(t),t[_R.getElementIndex(o,o)]=t[_R.getElementIndex(s,s)]=a,t[_R.getElementIndex(s,o)]=l,t[_R.getElementIndex(o,s)]=-l,t}const IR=new qm,RR=new qm,LR=new qm,DR=new qm,FR=new qm,NR=new OI,zR={diagonal:new OI,unitary:new OI};const jR=512,UR=3,GR=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],VR=GR.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),HR=VR.concat([[.25,.5],[.75,.5]]);class WR{constructor(e,t,n){pt(this,"x",void 0),pt(this,"y",void 0),pt(this,"z",void 0),pt(this,"childVisible",void 0),pt(this,"selected",void 0),pt(this,"_children",void 0),this.x=e,this.y=t,this.z=n}get children(){if(!this._children){const e=2*this.x,t=2*this.y,n=this.z+1;this._children=[new WR(e,t,n),new WR(e,t+1,n),new WR(e+1,t,n),new WR(e+1,t+1,n)]}return this._children}update(e){const{viewport:t,cullingVolume:n,elevationBounds:r,minZ:i,maxZ:o,bounds:s,offset:a,project:l}=e,c=this.getBoundingVolume(r,a,l);if(s&&!this.insideBounds(s))return!1;if(n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:e}=this;if(e<o&&e>=i){const n=c.distanceTo(t.cameraPosition)*t.scale/t.height;e+=Math.floor(Math.log2(n))}if(e>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const u of this.children)u.update(e);return!0}getSelected(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&e.push(this),this._children)for(const t of this._children)t.getSelected(e);return e}insideBounds(e){let[t,n,r,i]=e;const o=Math.pow(2,this.z),s=jR/o;return this.x*s<r&&this.y*s<i&&(this.x+1)*s>t&&(this.y+1)*s>n}getBoundingVolume(e,t,n){if(n){const t=this.z<1?HR:this.z<2?VR:GR,r=[];for(const i of t){const t=eL(this.x+i[0],this.y+i[1],this.z);t[2]=e[0],r.push(n(t)),e[0]!==e[1]&&(t[2]=e[1],r.push(n(t)))}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fR;if(!e||0===e.length)return t.halfAxes=new OI([0,0,0,0,0,0,0,0,0]),t.center=new qm,t;const n=e.length,r=new qm(0,0,0);for(const C of e)r.add(C);const i=1/n;r.multiplyByScalar(i);let o=0,s=0,a=0,l=0,c=0,u=0;for(const C of e){const e=IR.copy(C).subtract(r);o+=e.x*e.x,s+=e.x*e.y,a+=e.x*e.z,l+=e.y*e.y,c+=e.y*e.z,u+=e.z*e.z}o*=i,s*=i,a*=i,l*=i,c*=i,u*=i;const d=NR;d[0]=o,d[1]=s,d[2]=a,d[3]=s,d[4]=l,d[5]=c,d[6]=a,d[7]=c,d[8]=u;const{unitary:A}=PR(d,zR),h=t.halfAxes.copy(A);let f=h.getColumn(0,LR),p=h.getColumn(1,DR),g=h.getColumn(2,FR),m=-Number.MAX_VALUE,v=-Number.MAX_VALUE,b=-Number.MAX_VALUE,y=Number.MAX_VALUE,x=Number.MAX_VALUE,w=Number.MAX_VALUE;for(const C of e)IR.copy(C),m=Math.max(IR.dot(f),m),v=Math.max(IR.dot(p),v),b=Math.max(IR.dot(g),b),y=Math.min(IR.dot(f),y),x=Math.min(IR.dot(p),x),w=Math.min(IR.dot(g),w);f=f.multiplyByScalar(.5*(y+m)),p=p.multiplyByScalar(.5*(x+v)),g=g.multiplyByScalar(.5*(w+b)),t.center.copy(f).add(p).add(g);const _=RR.set(m-y,v-x,b-w).multiplyByScalar(.5),S=new OI([_[0],0,0,0,_[1],0,0,0,_[2]]);return t.halfAxes.multiplyRight(S),t}(r)}const r=Math.pow(2,this.z),i=jR/r,o=this.x*i+t*jR,s=jR-(this.y+1)*i;return new SI([o,s,e[0]],[o+i,s+i,e[1]])}}const QR=512,JR=[-1/0,-1/0,1/0,1/0],KR={type:"object",value:null,validate:(e,t)=>t.optional&&null===e||"string"===typeof e||Array.isArray(e)&&e.every((e=>"string"===typeof e)),equal:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}};function XR(e,t){const n=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])],r=[Math.min(...n.map((e=>e[0]))),Math.min(...n.map((e=>e[1]))),Math.max(...n.map((e=>e[0]))),Math.max(...n.map((e=>e[1])))];return r}function YR(e,t){if(!e||!e.length)return null;const{index:n,id:r}=t;if(Array.isArray(e)){const t=function(e){return Math.abs(e.split("").reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)|0),0))}(r)%e.length;e=e[t]}let i=e;for(const o of Object.keys(n)){const e=new RegExp("{".concat(o,"}"),"g");i=i.replace(e,String(n[o]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),i}function qR(e){let{viewport:t,z:n=0,cullRect:r}=e;return(t.subViewports||[t]).map((e=>ZR(e,n||0,r)))}function ZR(e,t,n){if(!Array.isArray(t)){const r=n.x-e.x,i=n.y-e.y,{width:o,height:s}=n,a={targetZ:t},l=e.unproject([r,i],a),c=e.unproject([r+o,i],a),u=e.unproject([r,i+s],a),d=e.unproject([r+o,i+s],a);return[Math.min(l[0],c[0],u[0],d[0]),Math.min(l[1],c[1],u[1],d[1]),Math.max(l[0],c[0],u[0],d[0]),Math.max(l[1],c[1],u[1],d[1])]}const r=ZR(e,t[0],n),i=ZR(e,t[1],n);return[Math.min(r[0],i[0]),Math.min(r[1],i[1]),Math.max(r[2],i[2]),Math.max(r[3],i[3])]}function $R(e,t){return Math.pow(2,e)*QR/t}function eL(e,t,n){const r=$R(n,QR),i=e/r*360-180,o=Math.PI-2*Math.PI*t/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function tL(e,t,n,r){const i=$R(n,r);return[e/i*QR,t/i*QR]}function nL(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:QR;if(e.isGeospatial){const[e,i]=eL(t,n,r),[o,s]=eL(t+1,n+1,r);return{west:e,north:i,east:o,south:s}}const[o,s]=tL(t,n,r,i),[a,l]=tL(t+1,n+1,r,i);return{left:o,top:s,right:a,bottom:l}}function rL(e,t,n,r,i){const o=function(e,t,n){let r;if(t&&2===t.length){const[n,i]=t,o=e.getBounds({z:n}),s=e.getBounds({z:i});r=[Math.min(o[0],s[0]),Math.min(o[1],s[1]),Math.max(o[2],s[2]),Math.max(o[3],s[3])]}else r=e.getBounds();return e.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}(e,null,r),s=$R(t,n),[a,l,c,u]=function(e,t,n){if(n){const r=XR(e,n).map((e=>e*t/QR));return r}return e.map((e=>e*t/QR))}(o,s,i),d=[];for(let A=Math.floor(a);A<c;A++)for(let e=Math.floor(l);e<u;e++)d.push({x:A,y:e,z:t});return d}function iL(e){let{viewport:t,maxZoom:n,minZoom:r,zRange:i,extent:o,tileSize:s=QR,modelMatrix:a,modelMatrixInverse:l,zoomOffset:c=0}=e,u=t.isGeospatial?Math.round(t.zoom+Math.log2(QR/s))+c:Math.ceil(t.zoom)+c;if("number"===typeof r&&Number.isFinite(r)&&u<r){if(!o)return[];u=r}"number"===typeof n&&Number.isFinite(n)&&u>n&&(u=n);let d=o;return a&&l&&o&&!t.isGeospatial&&(d=XR(o,a)),t.isGeospatial?function(e,t,n,r){const i=e instanceof mI&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map((e=>{let{normal:t,distance:n}=e;return new mR(t.clone().negate(),n)})),s=new xR(o),a=e.distanceScales.unitsPerMeter[2],l=n&&n[0]*a||0,c=n&&n[1]*a||0,u=e instanceof OS&&e.pitch<=60?t:0;if(r){const[e,t,n,i]=r,o=Kv([e,i]),s=Kv([n,t]);r=[o[0],jR-o[1],s[0],jR-s[1]]}const d=new WR(0,0,0),A={viewport:e,project:i,cullingVolume:s,elevationBounds:[l,c],minZ:u,maxZ:t,bounds:r,offset:0};if(d.update(A),e instanceof OS&&e.subViewports&&e.subViewports.length>1){for(A.offset=-1;d.update(A)&&!(--A.offset<-UR););for(A.offset=1;d.update(A)&&!(++A.offset>UR););}return d.getSelected()}(t,u,i,o):rL(t,u,s,d||JR,l)}function oL(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}const sL=2,aL="never",lL="no-overlap",cL="best-available",uL={[cL]:function(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!AL(t)&&hL(t);for(const t of e)t.isVisible=Boolean(t.state&sL)},[lL]:function(e){for(const n of e)n.state=0;for(const n of e)n.isSelected&&AL(n);const t=Array.from(e).sort(((e,t)=>e.zoom-t.zoom));for(const n of t)if(n.isVisible=Boolean(n.state&sL),n.children&&(n.isVisible||1&n.state))for(const e of n.children)e.state=1;else n.isSelected&&hL(n)},[aL]:()=>{}},dL={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};function AL(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=sL,!0;t=t.parent}return!1}function hL(e){for(const t of e.children)t.isLoaded||t.content?t.state|=sL:hL(t)}const fL={TilesetClass:class{constructor(e){pt(this,"opts",void 0),pt(this,"_requestScheduler",void 0),pt(this,"_cache",void 0),pt(this,"_dirty",void 0),pt(this,"_tiles",void 0),pt(this,"_cacheByteSize",void 0),pt(this,"_viewport",void 0),pt(this,"_zRange",void 0),pt(this,"_selectedTiles",void 0),pt(this,"_frameNumber",void 0),pt(this,"_modelMatrix",void 0),pt(this,"_modelMatrixInverse",void 0),pt(this,"_maxZoom",void 0),pt(this,"_minZoom",void 0),pt(this,"onTileLoad",void 0),pt(this,"_getCullBounds",function(e){let t,n={};return r=>{for(const i in r)if(!oL(r[i],n[i])){t=e(r),n=r;break}return t}}(qR)),this.opts={...dL,...e},this.onTileLoad=e=>{var t,n;null===(t=(n=this.opts).onTileLoad)||void 0===t||t.call(n,e),this.opts.maxCacheByteSize&&(this._cacheByteSize+=e.byteLength,this._resizeCache())},this._requestScheduler=new uI({maxRequests:e.maxRequests,throttleRequests:Boolean(e.maxRequests&&e.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Pv,this._modelMatrixInverse=new Pv,this.setOptions(e)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return null!==this._selectedTiles&&this._selectedTiles.every((e=>e.isLoaded))}get needsReload(){return null!==this._selectedTiles&&this._selectedTiles.some((e=>e.needsReload))}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const t=this._cache.get(e);this._selectedTiles&&this._selectedTiles.includes(t)?t.setNeedsReload():this._cache.delete(e)}}update(e){let{zRange:t,modelMatrix:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{zRange:null,modelMatrix:null};const r=n?new Pv(n):new Pv,i=!r.equals(this._modelMatrix);if(this._viewport&&e.equals(this._viewport)&&Pm(this._zRange,t)&&!i)this.needsReload&&(this._selectedTiles=this._selectedTiles.map((e=>this._getTile(e.index,!0))));else{i&&(this._modelMatrixInverse=r.clone().invert(),this._modelMatrix=r),this._viewport=e,this._zRange=t;const n=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:t,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=n.map((e=>this._getTile(e,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(e,t){if(!e.isVisible)return!1;if(t&&this._viewport){const n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:t}),{bbox:r}=e;for(const[e,t,i,o]of n){let n;if("west"in r)n=r.west<i&&r.east>e&&r.south<o&&r.north>t;else{const s=Math.min(r.top,r.bottom),a=Math.max(r.top,r.bottom);n=r.left<i&&r.right>e&&s<o&&a>t}if(n)return!0}return!1}return!0}getTileIndices(e){let{viewport:t,maxZoom:n,minZoom:r,zRange:i,modelMatrix:o,modelMatrixInverse:s}=e;const{tileSize:a,extent:l,zoomOffset:c}=this.opts;return iL({viewport:t,maxZoom:n,minZoom:r,zRange:i,tileSize:a,extent:l,modelMatrix:o,modelMatrixInverse:s,zoomOffset:c})}getTileId(e){return"".concat(e.x,"-").concat(e.y,"-").concat(e.z)}getTileZoom(e){return e.z}getTileMetadata(e){const{tileSize:t}=this.opts;return{bbox:nL(this._viewport,e.x,e.y,e.z,t)}}getParentIndex(e){return{x:Math.floor(e.x/2),y:Math.floor(e.y/2),z:e.z-1}}updateTileStates(){const e=this.opts.refinementStrategy||cL,t=new Array(this._cache.size);let n=0;for(const r of this._cache.values())t[n++]=r.isVisible,r.isSelected=!1,r.isVisible=!1;for(const r of this._selectedTiles)r.isSelected=!0,r.isVisible=!0;("function"===typeof e?e:uL[e])(Array.from(this._cache.values())),n=0;for(const r of this._cache.values())if(t[n++]!==r.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:e=0}=this.opts,t=[];let n=0;for(const r of this._cache.values())r.isLoading&&(n++,r.isSelected||r.isVisible||t.push(r));for(;e>0&&n>e&&t.length>0;){t.shift().abort(),n--}}_rebuildTree(){const{_cache:e}=this;for(const t of e.values())t.parent=null,t.children&&(t.children.length=0);for(const t of e.values()){const e=this._getNearestAncestor(t);t.parent=e,null!==e&&void 0!==e&&e.children&&e.children.push(t)}}_resizeCache(){const{_cache:e,opts:t}=this,n=t.maxCacheSize||(t.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=t.maxCacheByteSize||1/0;if(e.size>n||this._cacheByteSize>r){for(const[s,a]of e){var i,o;if(!a.isVisible&&!a.isSelected)this._cacheByteSize-=t.maxCacheByteSize?a.byteLength:0,e.delete(s),null===(i=(o=this.opts).onTileUnload)||void 0===i||i.call(o,a);if(e.size<=n&&this._cacheByteSize<=r)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((e,t)=>e.zoom-t.zoom)),this._dirty=!1)}_getTile(e,t){const n=this.getTileId(e);let r=this._cache.get(n),i=!1;return!r&&t?(r=new dI(e),Object.assign(r,this.getTileMetadata(r.index)),Object.assign(r,{id:n,zoom:this.getTileZoom(r.index)}),i=!0,this._cache.set(n,r),this._dirty=!0):r&&r.needsReload&&(i=!0),r&&i&&r.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),r}_getNearestAncestor(e){const{_minZoom:t=0}=this;let n=e.index;for(;this.getTileZoom(n)>t;){n=this.getParentIndex(n);const e=this._getTile(n);if(e)return e}return null}},data:{type:"data",value:[]},dataComparator:KR.equal,renderSubLayers:{type:"function",value:e=>new rI(e)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:e=>{}},onTileUnload:{type:"function",value:e=>{}},onTileError:{type:"function",value:e=>console.error(e)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:cL,zRange:null,maxRequests:6,zoomOffset:0};class pL extends FB{constructor(){super(...arguments),pt(this,"state",void 0)}initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e,t;null===(e=this.state)||void 0===e||null===(t=e.tileset)||void 0===t||t.finalize()}get isLoaded(){var e,t,n;return Boolean(null===(e=this.state)||void 0===e||null===(t=e.tileset)||void 0===t||null===(n=t.selectedTiles)||void 0===n?void 0:n.every((e=>e.isLoaded&&e.layers&&e.layers.every((e=>e.isLoaded)))))}shouldUpdateState(e){let{changeFlags:t}=e;return t.somethingChanged}updateState(e){let{changeFlags:t}=e,{tileset:n}=this.state;const r=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);n?r&&(n.setOptions(this._getTilesetOptions()),i?n.reloadAll():n.tiles.forEach((e=>{e.layers=null}))):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:e,maxCacheSize:t,maxCacheByteSize:n,refinementStrategy:r,extent:i,maxZoom:o,minZoom:s,maxRequests:a,zoomOffset:l}=this.props;return{maxCacheSize:t,maxCacheByteSize:n,maxZoom:o,minZoom:s,tileSize:e,refinementStrategy:r,extent:i,maxRequests:a,zoomOffset:l,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const e=this.state.tileset,{zRange:t,modelMatrix:n}=this.props,r=e.update(this.context.viewport,{zRange:t,modelMatrix:n}),{isLoaded:i}=e,o=this.state.isLoaded!==i,s=this.state.frameNumber!==r;i&&(o||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:r}),this.state.isLoaded=i}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:t}=this.props;t&&t(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,t){this.props.onTileError(e),t.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:t,getTileData:n,fetch:r}=this.props,{signal:i}=e;return e.url="string"===typeof t||Array.isArray(t)?YR(t,e):null,n?n(e):r&&e.url?r(e.url,{propName:"data",layer:this,signal:i}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo(e){let{info:t,sourceLayer:n}=e;const r=n.props.tile;return t.picked&&(t.tile=r),t.sourceTile=r,t}_updateAutoHighlight(e){const t=e.sourceTile;if(t&&t.layers)for(const n of t.layers)n.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map((e=>{const t=this.getSubLayerPropsByTile(e);if(e.isLoaded||e.content)if(e.layers)t&&e.layers[0]&&Object.keys(t).some((n=>e.layers[0].props[n]!==t[n]))&&(e.layers=e.layers.map((e=>e.clone(t))));else{const n=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:e.id,updateTriggers:this.props.updateTriggers}),data:e.content,_offset:0,tile:e});e.layers=Dp(n,Boolean).map((n=>n.clone({tile:e,...t})))}else;return e.layers}))}filterSubLayer(e){let{layer:t,cullRect:n}=e;const{tile:r}=t.props;return this.state.tileset.isTileVisible(r,n)}}pt(pL,"defaultProps",fL),pt(pL,"layerName","TileLayer");const gL=new Uint16Array([0,2,1,0,3,2]),mL=new Float32Array([0,1,0,0,1,0,1,1]);function vL(e,t){if(!t)return function(e){const t=new Float64Array(12);for(let n=0;n<e.length;n++)t[3*n+0]=e[n][0],t[3*n+1]=e[n][1],t[3*n+2]=e[n][2]||0;return{vertexCount:6,positions:t,indices:gL,texCoords:mL}}(e);const n=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),r=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(n/t)+1,o=Math.ceil(r/t)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(i*o*2),c=new Float64Array(i*o*3);let u=0,d=0;for(let A=0;A<i;A++){const t=A/(i-1);for(let n=0;n<o;n++){const r=n/(o-1),i=bL(e,t,r);c[3*u+0]=i[0],c[3*u+1]=i[1],c[3*u+2]=i[2]||0,l[2*u+0]=t,l[2*u+1]=1-r,A>0&&n>0&&(a[d++]=u-o,a[d++]=u-o-1,a[d++]=u-1,a[d++]=u-o,a[d++]=u-1,a[d++]=u),u++}}return{vertexCount:s,positions:c,indices:a,texCoords:l}}function bL(e,t,n){return Mm(Mm(e[0],e[1],n),Mm(e[3],e[2],n),t)}const yL="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive && !picking_uAttribute) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),xL={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:db.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class wL extends qP{constructor(){super(...arguments),pt(this,"state",void 0)}getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:yL,modules:[LT,JT]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const t=!0;e.add({indices:{size:1,isIndexed:!0,update:e=>e.value=this.state.mesh.indices,noAlloc:t},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:e=>e.value=this.state.mesh.positions,noAlloc:t},texCoords:{size:2,update:e=>e.value=this.state.mesh.texCoords,noAlloc:t}})}updateState(e){let{props:t,oldProps:n,changeFlags:r}=e;const i=this.getAttributeManager();if(r.extensionsChanged){var o;const{gl:e}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(e),i.invalidateAll()}if(t.bounds!==n.bounds){const e=this.state.mesh,t=this._createMesh();this.state.model.setVertexCount(t.vertexCount);for(const n in t)e&&e[n]!==t[n]&&i.invalidate(n);this.setState({mesh:t,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:t}=this.props,n=e.info;if(!n.color||!t)return n.bitmap=null,n;const{width:r,height:i}=t;n.index=0;const o=function(e){const[t,n,r]=e;return[(t+(15&r)/16)/256,(n+(240&r)/256)/256]}(n.color),s=[Math.floor(o[0]*r),Math.floor(o[1]*i)];return n.bitmap={size:{width:r,height:i},uv:o,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let t=e;return _L(e)&&(t=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),vL(t,this.context.viewport.resolution)}_getModel(e){return e?new oP(e,{...this.getShaders(),id:this.props.id,geometry:new XT({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(e){const{uniforms:t,moduleParameters:n}=e,{model:r,coordinateConversion:i,bounds:o,disablePicking:s}=this.state,{image:a,desaturate:l,transparentColor:c,tintColor:u}=this.props;n.pickingActive&&s||a&&r&&r.setUniforms(t).setUniforms({bitmapTexture:a,desaturate:l,transparentColor:c.map((e=>e/255)),tintColor:u.slice(0,3).map((e=>e/255)),coordinateConversion:i,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:t,DEFAULT:n}=db;let{_imageCoordinateSystem:r}=this.props;if(r!==n){const{bounds:n}=this.props;if(!_L(n))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const i=this.context.viewport.resolution?e:t;if(r=r===e?e:t,r===e&&i===t)return{coordinateConversion:-1,bounds:n};if(r===t&&i===e){const e=Kv([n[0],n[1]]),t=Kv([n[2],n[3]]);return{coordinateConversion:1,bounds:[e[0],e[1],t[0],t[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function _L(e){return Number.isFinite(e[0])}function SL(){const e=bn.map.mapStyles.Dark;return new pL({data:"https://api.mapbox.com/styles/v1/relnox/".concat(e,"/tiles/256/{z}/{x}/{y}?access_token=")+"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg&attribution=false&logo=false&fresh=true",minZoom:0,maxZoom:21,tileSize:256,id:"OSM",renderSubLayers:e=>{const{bbox:{west:t,south:n,east:r,north:i}}=e.tile;return new wL(e,{data:null,image:e.data,bounds:[t,n,r,i]})}})}function CL(e){let{data:t,opacity:n,setLayerHoveredData:r}=e;if(t.traffic){let e={type:"FeatureCollection",features:t.traffic.features.map((e=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[[e.geometry.coordinates[0][0]-e.properties.lanes/75e3,e.geometry.coordinates[0][1]-e.properties.lanes/75e3,0],[e.geometry.coordinates[0][0]+e.properties.lanes/75e3,e.geometry.coordinates[0][1]+e.properties.lanes/75e3,0],[e.geometry.coordinates[1][0]+e.properties.lanes/75e3,e.geometry.coordinates[1][1]+e.properties.lanes/75e3,0],[e.geometry.coordinates[1][0]-e.properties.lanes/75e3,e.geometry.coordinates[1][1]-e.properties.lanes/75e3,0]]]},properties:{norm_traffic:e.properties.norm_traffic}})))};return new rI({onHover:e=>{e.object&&r("traffic: ".concat(Math.floor(100*e.object.properties.norm_traffic),"%"))},pickable:!0,id:"TRAFFIC_TRIPS",shadowEnabled:!1,data:e,filled:!0,extruded:!0,getFillColor:e=>{const t=Hf((e=>e>0&&e<1?e:e>=1?1:0)(1-e.properties.norm_traffic),0,1);return[t[0],t[1],t[2],200+55*n]},getElevation:e=>100*e.properties.norm_traffic*n,updateTriggers:{getLineColor:t,getLineWidth:n}})}}pt(wL,"layerName","BitmapLayer"),pt(wL,"defaultProps",xL);class EL extends XT{constructor(e){const{id:t=Sx("column-geometry")}=e,{indices:n,attributes:r}=function(e){const{radius:t,height:n=1,nradial:r=10}=e;let{vertices:i}=e;i&&(Op.assert(i.length>=r),i=i.flatMap((e=>[e[0],e[1]])),cB(i,lB));const o=n>0,s=r+1,a=o?3*s+1:r,l=2*Math.PI/r,c=new Uint16Array(o?3*r*2:0),u=new Float32Array(3*a),d=new Float32Array(3*a);let A=0;if(o){for(let e=0;e<s;e++){const o=e*l,s=e%r,a=Math.sin(o),c=Math.cos(o);for(let e=0;e<2;e++)u[A+0]=i?i[2*s]:c*t,u[A+1]=i?i[2*s+1]:a*t,u[A+2]=(.5-e)*n,d[A+0]=i?i[2*s]:c,d[A+1]=i?i[2*s+1]:a,A+=3}u[A+0]=u[A-3],u[A+1]=u[A-2],u[A+2]=u[A-1],A+=3}for(let h=o?0:1;h<s;h++){const e=Math.floor(h/2)*Math.sign(.5-h%2),o=e*l,s=(e+r)%r,a=Math.sin(o),c=Math.cos(o);u[A+0]=i?i[2*s]:c*t,u[A+1]=i?i[2*s+1]:a*t,u[A+2]=n/2,d[A+2]=1,A+=3}if(o){let e=0;for(let t=0;t<r;t++)c[e++]=2*t+0,c[e++]=2*t+2,c[e++]=2*t+0,c[e++]=2*t+1,c[e++]=2*t+1,c[e++]=2*t+3}return{indices:c,attributes:{POSITION:{size:3,value:u},NORMAL:{size:3,value:d}}}}(e);super({...e,id:t,indices:n,attributes:r})}}const ML=[0,0,0,255],PL={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:e=>e.position},getFillColor:{type:"accessor",value:ML},getLineColor:{type:"accessor",value:ML},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class TL extends qP{getShaders(){const{gl:e}=this.context,t=!my(e),n={},r=this.props.flatShading&&Lw(e,Bw);return r&&(n.FLAT_SHADING=1),super.getShaders({vs:"#version 300 es\n\n#define SHADER_NAME column-layer-vertex-shader\n\nin vec3 positions;\nin vec3 normals;\n\nin vec3 instancePositions;\nin float instanceElevations;\nin vec3 instancePositions64Low;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin float instanceStrokeWidths;\n\nin vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool stroked;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int radiusUnits;\nuniform int widthUnits;\nout vec4 vColor;\n#ifdef FLAT_SHADING\nout vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (stroked) {\n    float widthPixels = clamp(\n      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n    if (isStroke) {\n      strokeOffsetRatio -= sign(positions.z) * halfOffset;\n    } else {\n      strokeOffsetRatio -= halfOffset;\n    }\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.pickingColor = instancePickingColors;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;\n  if (radiusUnits == UNIT_METERS) {\n    offset = project_size(offset);\n  }\n  vec3 pos = vec3(offset, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  if (extruded && !isStroke) {\n#ifdef FLAT_SHADING\n    position_commonspace = geometry.position;\n    vColor = vec4(color.rgb, color.a * opacity);\n#else\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n#endif\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nuniform vec3 project_uCameraPosition;\nuniform bool extruded;\nuniform bool isStroke;\n\nout vec4 fragColor;\n\nin vec4 vColor;\n#ifdef FLAT_SHADING\nin vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  fragColor = vColor;\n#ifdef FLAT_SHADING\n  if (extruded && !isStroke && !picking_uActive) {\n    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n  }\n#endif\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:n,transpileToGLSL100:t,modules:[LT,r?HT:VT,JT]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:ML},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:ML},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:r}=e,i=r.extensionsChanged||t.flatShading!==n.flatShading;if(i){var o;const{gl:e}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}(i||t.diskResolution!==n.diskResolution||t.vertices!==n.vertices||(t.extruded||t.stroked)!==(n.extruded||n.stroked))&&this._updateGeometry(t)}getGeometry(e,t,n){const r=new EL({radius:1,height:n?2:0,vertices:t,nradial:e});let i=0;if(t)for(let o=0;o<e;o++){const n=t[o];i+=Math.sqrt(n[0]*n[0]+n[1]*n[1])/e}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*i}),r}_getModel(e){return new oP(e,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry(e){let{diskResolution:t,vertices:n,extruded:r,stroked:i}=e;const o=this.getGeometry(t,n,r||i);this.setState({fillVertexCount:o.attributes.POSITION.value.length/3,wireframeVertexCount:o.indices.value.length}),this.state.model.setProps({geometry:o})}draw(e){let{uniforms:t}=e;const{lineWidthUnits:n,lineWidthScale:r,lineWidthMinPixels:i,lineWidthMaxPixels:o,radiusUnits:s,elevationScale:a,extruded:l,filled:c,stroked:u,wireframe:d,offset:A,coverage:h,radius:f,angle:p}=this.props,{model:g,fillVertexCount:m,wireframeVertexCount:v,edgeDistance:b}=this.state;g.setUniforms(t).setUniforms({radius:f,angle:p/180*Math.PI,offset:A,extruded:l,stroked:u,coverage:h,elevationScale:a,edgeDistance:b,radiusUnits:hb[s],widthUnits:hb[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o}),l&&d&&(g.setProps({isIndexed:!0}),g.setVertexCount(v).setDrawMode(1).setUniforms({isStroke:!0}).draw()),c&&(g.setProps({isIndexed:!1}),g.setVertexCount(m).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!l&&u&&(g.setProps({isIndexed:!1}),g.setVertexCount(2*m/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}pt(TL,"layerName","ColumnLayer"),pt(TL,"defaultProps",PL);const kL={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class BL extends qP{getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float useShortestPath;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvec3 splitLine(vec3 a, vec3 b, float x) {\n  float t = (x - a.x) / (b.x - a.x);\n  return vec3(x, mix(a.yz, b.yz, t));\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;\n  vec3 source_world_64low = instanceSourcePositions64Low;\n  vec3 target_world_64low = instanceTargetPositions64Low;\n\n  if (useShortestPath > 0.5 || useShortestPath < -0.5) {\n    source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n    target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n    float deltaLng = target_world.x - source_world.x;\n\n    if (deltaLng * useShortestPath > 180.) {\n      source_world.x += 360. * useShortestPath;\n      source_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      source_world_64low = vec3(0.0);\n    } else if (deltaLng * useShortestPath < -180.) {\n      target_world.x += 360. * useShortestPath;\n      target_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      target_world_64low = vec3(0.0);\n    } else if (useShortestPath < 0.) {\n      gl_Position = vec4(0.);\n      return;\n    }\n  }\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(p, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,JT]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var t;const{gl:e}=this.context;null===(t=this.state.model)||void 0===t||t.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw(e){let{uniforms:t}=e;const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:hb[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(e){return new oP(e,{...this.getShaders(),id:this.props.id,geometry:new XT({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0})}}pt(BL,"layerName","LineLayer"),pt(BL,"defaultProps",kL);const OL=.5,IL=1/6,RL={N:[0,OL],E:[OL,0],S:[0,-.5],W:[-.5,0],NE:[OL,OL],NW:[-.5,OL],SE:[OL,-.5],SW:[-.5,-.5]},LL=[RL.W,RL.SW,RL.S],DL=[RL.S,RL.SE,RL.E],FL=[RL.E,RL.NE,RL.N],NL=[RL.NW,RL.W,RL.N],zL=[[-.5,IL],[-.5,-IL],[-IL,-.5],[IL,-.5]],jL=[[-IL,-.5],[IL,-.5],[OL,-IL],[OL,IL]],UL=[[OL,-IL],[OL,IL],[IL,OL],[-IL,OL]],GL=[[-.5,IL],[-.5,-IL],[IL,OL],[-IL,OL]],VL=[RL.W,RL.SW,RL.SE,RL.E],HL=[RL.S,RL.SE,RL.NE,RL.N],WL=[RL.NW,RL.W,RL.E,RL.NE],QL=[RL.NW,RL.SW,RL.S,RL.N],JL=[[-.5,IL],[-.5,-IL],[OL,-IL],[OL,IL]],KL=[[-IL,-.5],[IL,-.5],[IL,OL],[-IL,OL]],XL=[RL.NW,RL.SW,RL.SE,RL.NE],YL=[RL.NW,RL.SW,RL.SE,RL.E,RL.N],qL=[RL.W,RL.SW,RL.SE,RL.NE,RL.N],ZL=[RL.NW,RL.W,RL.S,RL.SE,RL.NE],$L=[RL.NW,RL.SW,RL.S,RL.E,RL.NE],eD=[RL.NW,RL.W,[OL,-IL],[OL,IL],RL.N],tD=[[-IL,-.5],[IL,-.5],RL.E,RL.NE,RL.N],nD=[[-.5,IL],[-.5,-IL],RL.S,RL.SE,RL.E],rD=[RL.W,RL.SW,RL.S,[IL,OL],[-IL,OL]],iD=[RL.NW,RL.W,[-IL,-.5],[IL,-.5],RL.N],oD=[[-.5,IL],[-.5,-IL],RL.E,RL.NE,RL.N],sD=[RL.S,RL.SE,RL.E,[IL,OL],[-IL,OL]],aD=[RL.W,RL.SW,RL.S,[OL,-IL],[OL,IL]],lD=[RL.W,RL.SW,RL.SE,RL.E,[IL,OL],[-IL,OL]],cD=[[-.5,IL],[-.5,-IL],RL.S,RL.SE,RL.NE,RL.N],uD=[RL.NW,RL.W,[-IL,-.5],[IL,-.5],RL.E,RL.NE],dD=[RL.NW,RL.SW,RL.S,[OL,-IL],[OL,IL],RL.N],AD=[RL.W,RL.SW,RL.S,RL.E,RL.NE,RL.N],hD=[RL.NW,RL.W,RL.S,RL.SE,RL.E,RL.N],fD=[[-.5,IL],[-.5,-IL],[-IL,-.5],[IL,-.5],RL.E,RL.NE,RL.N],pD=[RL.W,RL.SW,RL.S,[OL,-IL],[OL,IL],[IL,OL],[-IL,OL]],gD=[RL.NW,RL.W,[-IL,-.5],[IL,-.5],[OL,-IL],[OL,IL],RL.N],mD=[[-.5,IL],[-.5,-IL],RL.S,RL.SE,RL.E,[IL,OL],[-IL,OL]],vD=[[-.5,IL],[-.5,-IL],[-IL,-.5],[IL,-.5],[OL,-IL],[OL,IL],[IL,OL],[-IL,OL]],bD={0:[],1:[[RL.W,RL.S]],2:[[RL.S,RL.E]],3:[[RL.W,RL.E]],4:[[RL.N,RL.E]],5:{0:[[RL.W,RL.S],[RL.N,RL.E]],1:[[RL.W,RL.N],[RL.S,RL.E]]},6:[[RL.N,RL.S]],7:[[RL.W,RL.N]],8:[[RL.W,RL.N]],9:[[RL.N,RL.S]],10:{0:[[RL.W,RL.N],[RL.S,RL.E]],1:[[RL.W,RL.S],[RL.N,RL.E]]},11:[[RL.N,RL.E]],12:[[RL.W,RL.E]],13:[[RL.S,RL.E]],14:[[RL.W,RL.S]],15:[]};function yD(e){return parseInt(e,4)}const xD={[yD("0000")]:[],[yD("2222")]:[],[yD("2221")]:[LL],[yD("2212")]:[DL],[yD("2122")]:[FL],[yD("1222")]:[NL],[yD("0001")]:[LL],[yD("0010")]:[DL],[yD("0100")]:[FL],[yD("1000")]:[NL],[yD("2220")]:[zL],[yD("2202")]:[jL],[yD("2022")]:[UL],[yD("0222")]:[GL],[yD("0002")]:[zL],[yD("0020")]:[jL],[yD("0200")]:[UL],[yD("2000")]:[GL],[yD("0011")]:[VL],[yD("0110")]:[HL],[yD("1100")]:[WL],[yD("1001")]:[QL],[yD("2211")]:[VL],[yD("2112")]:[HL],[yD("1122")]:[WL],[yD("1221")]:[QL],[yD("2200")]:[JL],[yD("2002")]:[KL],[yD("0022")]:[JL],[yD("0220")]:[KL],[yD("1111")]:[XL],[yD("1211")]:[YL],[yD("2111")]:[qL],[yD("1112")]:[ZL],[yD("1121")]:[$L],[yD("1011")]:[YL],[yD("0111")]:[qL],[yD("1110")]:[ZL],[yD("1101")]:[$L],[yD("1200")]:[eD],[yD("0120")]:[tD],[yD("0012")]:[nD],[yD("2001")]:[rD],[yD("1022")]:[eD],[yD("2102")]:[tD],[yD("2210")]:[nD],[yD("0221")]:[rD],[yD("1002")]:[iD],[yD("2100")]:[oD],[yD("0210")]:[sD],[yD("0021")]:[aD],[yD("1220")]:[iD],[yD("0122")]:[oD],[yD("2012")]:[sD],[yD("2201")]:[aD],[yD("0211")]:[lD],[yD("2110")]:[cD],[yD("1102")]:[uD],[yD("1021")]:[dD],[yD("2011")]:[lD],[yD("0112")]:[cD],[yD("1120")]:[uD],[yD("1201")]:[dD],[yD("2101")]:[AD],[yD("0121")]:[AD],[yD("1012")]:[hD],[yD("1210")]:[hD],[yD("0101")]:{0:[LL,FL],1:[AD],2:[AD]},[yD("1010")]:{0:[NL,DL],1:[hD],2:[hD]},[yD("2121")]:{0:[AD],1:[AD],2:[LL,FL]},[yD("1212")]:{0:[hD],1:[hD],2:[NL,DL]},[yD("2120")]:{0:[fD],1:[fD],2:[zL,FL]},[yD("2021")]:{0:[pD],1:[pD],2:[LL,UL]},[yD("1202")]:{0:[gD],1:[gD],2:[NL,jL]},[yD("0212")]:{0:[mD],1:[mD],2:[DL,GL]},[yD("0102")]:{0:[zL,FL],1:[fD],2:[fD]},[yD("0201")]:{0:[LL,UL],1:[pD],2:[pD]},[yD("1020")]:{0:[NL,jL],1:[gD],2:[gD]},[yD("2010")]:{0:[DL,GL],1:[mD],2:[mD]},[yD("2020")]:{0:[GL,jL],1:[vD],2:[zL,UL]},[yD("0202")]:{0:[UL,zL],1:[vD],2:[GL,jL]}},wD={ISO_LINES:1,ISO_BANDS:2},_D={zIndex:0,zOffset:.005};function SD(e,t){return Array.isArray(t)?e<t[0]?0:e<t[1]?1:2:e>=t?1:0}function CD(e){const{cellWeights:t,x:n,y:r,width:i,height:o}=e;let s=e.threshold;e.thresholdValue&&(Op.deprecated("thresholdValue","threshold")(),s=e.thresholdValue);const a=n<0,l=n>=i-1,c=r<0,u=r>=o-1,d=a||l||c||u,A={},h={};a||u?h.top=0:(A.top=t[(r+1)*i+n],h.top=SD(A.top,s)),l||u?h.topRight=0:(A.topRight=t[(r+1)*i+n+1],h.topRight=SD(A.topRight,s)),l||c?h.right=0:(A.right=t[r*i+n+1],h.right=SD(A.right,s)),a||c?h.current=0:(A.current=t[r*i+n],h.current=SD(A.current,s));const{top:f,topRight:p,right:g,current:m}=h;let v=-1;Number.isFinite(s)&&(v=f<<3|p<<2|g<<1|m),Array.isArray(s)&&(v=f<<6|p<<4|g<<2|m);let b=0;return d||(b=SD((A.top+A.topRight+A.right+A.current)/4,s)),{code:v,meanCode:b}}function ED(e){const{gridOrigin:t,cellSize:n,x:r,y:i,code:o,meanCode:s,type:a=wD.ISO_LINES}=e,l={..._D,...e.thresholdData};let c=a===wD.ISO_BANDS?xD[o]:bD[o];Array.isArray(c)||(c=c[s]);const u=l.zIndex*l.zOffset,d=(r+1)*n[0],A=(i+1)*n[1],h=t[0]+d,f=t[1]+A;if(a===wD.ISO_BANDS){const e=[];return c.forEach((t=>{const r=[];t.forEach((e=>{const t=h+e[0]*n[0],i=f+e[1]*n[1];r.push([t,i,u])})),e.push(r)})),e}const p=[];return c.forEach((e=>{e.forEach((e=>{const t=h+e[0]*n[0],r=f+e[1]*n[1];p.push([t,r,u])}))})),p}function MD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.fround(e),i=e-r;return t[n]=r,t[n+1]=i,t}function PD(e){return e-Math.fround(e)}function TD(e){const t=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const i=4*n+r;MD(e[4*r+n],t,2*i)}return t}const kD={ONE:1};const BD={name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",fs:null,getUniforms:function(){return kD},fp64ify:MD,fp64LowPart:PD,fp64ifyMatrix4:TD},OD={SUM:1,MEAN:2,MIN:3,MAX:4};function ID(e,t){return e+t}function RD(e,t){return t>e?t:e}function LD(e,t){return t<e?t:e}function DD(e,t,n){const r=OD[e]||OD.SUM;switch(t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Number.isFinite(e))return e;return n=>(t.index=n.index,e(n.source,t))}(t,n),r){case OD.MIN:return e=>function(e,t){if(Number.isFinite(t))return e.length?t:null;const n=e.map(t).filter(Number.isFinite);return n.length?n.reduce(LD,1/0):null}(e,t);case OD.SUM:return e=>function(e,t){if(Number.isFinite(t))return e.length?e.length*t:null;const n=e.map(t).filter(Number.isFinite);return n.length?n.reduce(ID,0):null}(e,t);case OD.MEAN:return e=>function(e,t){if(Number.isFinite(t))return e.length?t:null;const n=e.map(t).filter(Number.isFinite);return n.length?n.reduce(ID,0)/n.length:null}(e,t);case OD.MAX:return e=>function(e,t){if(Number.isFinite(t))return e.length?t:null;const n=e.map(t).filter(Number.isFinite);return n.length?n.reduce(RD,-1/0):null}(e,t);default:return null}}function FD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>(t.indices=n.map((e=>e.index)),e(n.map((e=>e.source)),t))}const ND={projectPoints:!1,viewport:null,createBufferObjects:!0,moduleSettings:{}},zD=3402823466e29,jD=[32775,32774],UD=[32776,32774],GD=[32776,32775],VD={[OD.SUM]:32774,[OD.MEAN]:32774,[OD.MIN]:jD,[OD.MAX]:UD},HD={size:1,operation:OD.SUM,needMin:!1,needMax:!1,combineMaxMin:!1},WD="#define SHADER_NAME gpu-aggregation-to-grid-vs\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute vec3 weights;\nuniform vec2 cellSize;\nuniform vec2 gridSize;\nuniform bool projectPoints;\nuniform vec2 translation;\nuniform vec3 scaling;\n\nvarying vec3 vWeights;\n\nvec2 project_to_pixel(vec4 pos) {\n  vec4 result;\n  pos.xy = pos.xy/pos.w;\n  result = pos + vec4(translation, 0., 0.);\n  result.xy = scaling.z > 0. ? result.xy * scaling.xy : result.xy;\n  return result.xy;\n}\n\nvoid main(void) {\n\n  vWeights = weights;\n\n  vec4 windowPos = vec4(positions, 1.);\n  if (projectPoints) {\n    windowPos = project_position_to_clipspace(positions, positions64Low, vec3(0));\n  }\n\n  vec2 pos = project_to_pixel(windowPos);\n\n  vec2 pixelXY64[2];\n  pixelXY64[0] = vec2(pos.x, 0.);\n  pixelXY64[1] = vec2(pos.y, 0.);\n  vec2 gridXY64[2];\n  gridXY64[0] = div_fp64(pixelXY64[0], vec2(cellSize.x, 0));\n  gridXY64[1] = div_fp64(pixelXY64[1], vec2(cellSize.y, 0));\n  float x = floor(gridXY64[0].x);\n  float y = floor(gridXY64[1].x);\n  pos = vec2(x, y);\n  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n  gl_PointSize = 1.0;\n}\n",QD="#define SHADER_NAME gpu-aggregation-to-grid-fs\n\nprecision highp float;\n\nvarying vec3 vWeights;\n\nvoid main(void) {\n  gl_FragColor = vec4(vWeights, 1.0);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",JD="#version 300 es\n#define SHADER_NAME gpu-aggregation-all-vs-64\n\nin vec2 position;\nuniform ivec2 gridSize;\nout vec2 vTextureCoord;\n\nvoid main(void) {\n  vec2 pos = vec2(-1.0, -1.0);\n  vec2 offset = 1.0 / vec2(gridSize);\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n\n  int yIndex = gl_InstanceID / gridSize[0];\n  int xIndex = gl_InstanceID - (yIndex * gridSize[0]);\n\n  vec2 yIndexFP64 = vec2(float(yIndex), 0.);\n  vec2 xIndexFP64 = vec2(float(xIndex), 0.);\n  vec2 gridSizeYFP64 = vec2(gridSize[1], 0.);\n  vec2 gridSizeXFP64 = vec2(gridSize[0], 0.);\n\n  vec2 texCoordXFP64 = div_fp64(yIndexFP64, gridSizeYFP64);\n  vec2 texCoordYFP64 = div_fp64(xIndexFP64, gridSizeXFP64);\n\n  vTextureCoord = vec2(texCoordYFP64.x, texCoordXFP64.x);\n  gl_PointSize = 1.0;\n}\n",KD="#version 300 es\n#define SHADER_NAME gpu-aggregation-all-fs\n\nprecision highp float;\n\nin vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform bool combineMaxMin;\nout vec4 fragColor;\nvoid main(void) {\n  vec4 textureColor = texture(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n  if (textureColor.a == 0.) {\n    discard;\n  }\n  fragColor.rgb = textureColor.rgb;\n  fragColor.a = combineMaxMin ? textureColor.r : textureColor.a;\n}\n",XD="#define SHADER_NAME gpu-aggregation-transform-mean-vs\nattribute vec4 aggregationValues;\nvarying vec4 meanValues;\n\nvoid main()\n{\n  bool isCellValid = bool(aggregationValues.w > 0.);\n  meanValues.xyz = isCellValid ? aggregationValues.xyz/aggregationValues.w : vec3(0, 0, 0);\n  meanValues.w = aggregationValues.w;\n  gl_PointSize = 1.0;\n}\n",YD={10240:9728,10241:9728};function qD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n=1,height:r=1,data:i=null,unpackFlipY:o=!0,parameters:s=YD}=t;return new Xx(e,{data:i,format:my(e)?34836:6408,type:5126,border:0,mipmaps:!1,parameters:s,dataFormat:6408,width:n,height:r,unpackFlipY:o})}function ZD(e,t){const{id:n,width:r=1,height:i=1,texture:o}=t;return new zw(e,{id:n,width:r,height:i,attachments:{36064:o}})}const $D=["aggregationBuffer","maxMinBuffer","minBuffer","maxBuffer"],eF={maxData:"maxBuffer",minData:"minBuffer",maxMinData:"maxMinBuffer"},tF=[dw,Ew,mw,vw,xw];class nF{static getAggregationData(e){let{aggregationData:t,maxData:n,minData:r,maxMinData:i,pixelIndex:o}=e;const s=4*o,a={};return t&&(a.cellCount=t[s+3],a.cellWeight=t[s]),i?(a.maxCellWieght=i[0],a.minCellWeight=i[3]):(n&&(a.maxCellWieght=n[0],a.totalCount=n[3]),r&&(a.minCellWeight=r[0],a.totalCount=n[3])),a}static getCellData(e){let{countsData:t,size:n=1}=e;const r=t.length/4,i=new Float32Array(r*n),o=new Uint32Array(r);for(let s=0;s<r;s++){for(let e=0;e<n;e++)i[s*n+e]=t[4*s+e];o[s]=t[4*s+3]}return{cellCounts:o,cellWeights:i}}static isSupported(e){return Dw(e,tF)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=t.id||"gpu-grid-aggregator",this.gl=e,this.state={weightAttributes:{},textures:{},meanTextures:{},buffers:{},framebuffers:{},maxMinFramebuffers:{},minFramebuffers:{},maxFramebuffers:{},equations:{},resources:{},results:{}},this._hasGPUSupport=my(e)&&Dw(this.gl,mw),this._hasGPUSupport&&this._setupModels()}delete(){const{gridAggregationModel:e,allAggregationModel:t,meanTransform:n}=this,{textures:r,framebuffers:i,maxMinFramebuffers:o,minFramebuffers:s,maxFramebuffers:a,meanTextures:l,resources:c}=this.state;null===e||void 0===e||e.delete(),null===t||void 0===t||t.delete(),null===n||void 0===n||n.delete(),function(e){e=Array.isArray(e)?e:[e],e.forEach((e=>{for(const t in e)e[t].delete()}))}([i,r,o,s,a,l,c])}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({results:{}});const t=this._normalizeAggregationParams(e);return this._hasGPUSupport||Op.log(1,"GPUGridAggregator: not supported")(),this._runAggregation(t)}getData(e){const t={},n=this.state.results;n[e].aggregationData||(n[e].aggregationData=n[e].aggregationBuffer.getData()),t.aggregationData=n[e].aggregationData;for(const r in eF){const i=eF[r];(n[e][r]||n[e][i])&&(n[e][r]=n[e][r]||n[e][i].getData(),t[r]=n[e][r])}return t}updateShaders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({shaderOptions:e,modelDirty:!0})}_normalizeAggregationParams(e){const t={...ND,...e},{weights:n}=t;return n&&(t.weights=function(e){const t={};for(const n in e)t[n]={...HD,...e[n]};return t}(n)),t}setState(e){Object.assign(this.state,e)}_getAggregateData(e){const t={},{textures:n,framebuffers:r,maxMinFramebuffers:i,minFramebuffers:o,maxFramebuffers:s,resources:a}=this.state,{weights:l}=e;for(const c in l){t[c]={};const{needMin:e,needMax:u,combineMaxMin:d}=l[c];t[c].aggregationTexture=n[c],t[c].aggregationBuffer=lw(r[c],{target:l[c].aggregationBuffer,sourceType:5126}),e&&u&&d?(t[c].maxMinBuffer=lw(i[c],{target:l[c].maxMinBuffer,sourceType:5126}),t[c].maxMinTexture=a["".concat(c,"-maxMinTexture")]):(e&&(t[c].minBuffer=lw(o[c],{target:l[c].minBuffer,sourceType:5126}),t[c].minTexture=a["".concat(c,"-minTexture")]),u&&(t[c].maxBuffer=lw(s[c],{target:l[c].maxBuffer,sourceType:5126}),t[c].maxTexture=a["".concat(c,"-maxTexture")]))}return this._trackGPUResultBuffers(t,l),t}_renderAggregateData(e){const{cellSize:t,projectPoints:n,attributes:r,moduleSettings:i,numCol:o,numRow:s,weights:a,translation:l,scaling:c}=e,{maxMinFramebuffers:u,minFramebuffers:d,maxFramebuffers:A}=this.state,h=[o,s],f={blend:!0,depthTest:!1,blendFunc:[1,1]},p={cellSize:t,gridSize:h,projectPoints:n,translation:l,scaling:c};for(const g in a){const{needMin:e,needMax:t}=a[g],n=e&&t&&a[g].combineMaxMin;this._renderToWeightsTexture({id:g,parameters:f,moduleSettings:i,uniforms:p,gridSize:h,attributes:r,weights:a}),n?this._renderToMaxMinTexture({id:g,parameters:{...f,blendEquation:GD},gridSize:h,minOrMaxFb:u[g],clearParams:{clearColor:[0,0,0,zD]},combineMaxMin:n}):(e&&this._renderToMaxMinTexture({id:g,parameters:{...f,blendEquation:jD},gridSize:h,minOrMaxFb:d[g],clearParams:{clearColor:[zD,zD,zD,0]},combineMaxMin:n}),t&&this._renderToMaxMinTexture({id:g,parameters:{...f,blendEquation:UD},gridSize:h,minOrMaxFb:A[g],clearParams:{clearColor:[0,0,0,0]},combineMaxMin:n}))}}_renderToMaxMinTexture(e){const{id:t,parameters:n,gridSize:r,minOrMaxFb:i,combineMaxMin:o,clearParams:s={}}=e,{framebuffers:a}=this.state,{gl:l,allAggregationModel:c}=this;ax(l,{...s,framebuffer:i,viewport:[0,0,r[0],r[1]]},(()=>{l.clear(16384),c.draw({parameters:n,uniforms:{uSampler:a[t].texture,gridSize:r,combineMaxMin:o}})}))}_renderToWeightsTexture(e){const{id:t,parameters:n,moduleSettings:r,uniforms:i,gridSize:o,weights:s}=e,{framebuffers:a,equations:l,weightAttributes:c}=this.state,{gl:u,gridAggregationModel:d}=this,{operation:A}=s[t],h=A===OD.MIN?[zD,zD,zD,0]:[0,0,0,0];if(ax(u,{framebuffer:a[t],viewport:[0,0,o[0],o[1]],clearColor:h},(()=>{u.clear(16384);const e={weights:c[t]};d.draw({parameters:{...n,blendEquation:l[t]},moduleSettings:r,uniforms:i,attributes:e})})),A===OD.MEAN){const{meanTextures:e,textures:n}=this.state,r={_sourceTextures:{aggregationValues:e[t]},_targetTexture:n[t],elementCount:n[t].width*n[t].height};this.meanTransform?this.meanTransform.update(r):this.meanTransform=function(e,t){return new sP(e,{vs:XD,_targetTextureVarying:"meanValues",...t})}(u,r),this.meanTransform.run({parameters:{blend:!1,depthTest:!1}}),a[t].attach({36064:n[t]})}}_runAggregation(e){this._updateModels(e),this._setupFramebuffers(e),this._renderAggregateData(e);const t=this._getAggregateData(e);return this.setState({results:t}),t}_setupFramebuffers(e){const{textures:t,framebuffers:n,maxMinFramebuffers:r,minFramebuffers:i,maxFramebuffers:o,meanTextures:s,equations:a}=this.state,{weights:l}=e,{numCol:c,numRow:u}=e,d={width:c,height:u};for(const A in l){const{needMin:e,needMax:h,combineMaxMin:f,operation:p}=l[A];t[A]=l[A].aggregationTexture||t[A]||qD(this.gl,{id:"".concat(A,"-texture"),width:c,height:u}),t[A].resize(d);let g=t[A];p===OD.MEAN&&(s[A]=s[A]||qD(this.gl,{id:"".concat(A,"-mean-texture"),width:c,height:u}),s[A].resize(d),g=s[A]),n[A]?n[A].attach({36064:g}):n[A]=ZD(this.gl,{id:"".concat(A,"-fb"),width:c,height:u,texture:g}),n[A].resize(d),a[A]=VD[p]||VD.SUM,(e||h)&&(e&&h&&f?r[A]||(g=l[A].maxMinTexture||this._getMinMaxTexture("".concat(A,"-maxMinTexture")),r[A]=ZD(this.gl,{id:"".concat(A,"-maxMinFb"),texture:g})):(e&&(i[A]||(g=l[A].minTexture||this._getMinMaxTexture("".concat(A,"-minTexture")),i[A]=ZD(this.gl,{id:"".concat(A,"-minFb"),texture:g}))),h&&(o[A]||(g=l[A].maxTexture||this._getMinMaxTexture("".concat(A,"-maxTexture")),o[A]=ZD(this.gl,{id:"".concat(A,"-maxFb"),texture:g})))))}}_getMinMaxTexture(e){const{resources:t}=this.state;return t[e]||(t[e]=qD(this.gl,{id:"resourceName"})),t[e]}_setupModels(){let{numCol:e=0,numRow:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n;const{gl:r}=this,{shaderOptions:i}=this.state;if(null===(n=this.gridAggregationModel)||void 0===n||n.delete(),this.gridAggregationModel=function(e,t){const n=SP({vs:WD,fs:QD,modules:[BD,LT]},t);return new oP(e,{id:"Gird-Aggregation-Model",vertexCount:1,drawMode:0,...n})}(r,i),!this.allAggregationModel){const n=e*t;this.allAggregationModel=function(e,t){return new oP(e,{id:"All-Aggregation-Model",vs:JD,fs:KD,modules:[BD],vertexCount:1,drawMode:0,isInstanced:!0,instanceCount:t,attributes:{position:[0,0]}})}(r,n)}}_setupWeightAttributes(e){const{weightAttributes:t}=this.state,{weights:n}=e;for(const r in n)t[r]=e.attributes[r]}_trackGPUResultBuffers(e,t){const{resources:n}=this.state;for(const r in e)if(e[r])for(const i of $D)if(e[r][i]&&t[r][i]!==e[r][i]){const t="gpu-result-".concat(r,"-").concat(i);n[t]&&n[t].delete(),n[t]=e[r][i]}}_updateModels(e){const{vertexCount:t,attributes:n,numCol:r,numRow:i}=e,{modelDirty:o}=this.state;o&&(this._setupModels(e),this.setState({modelDirty:!1})),this._setupWeightAttributes(e),this.gridAggregationModel.setVertexCount(t),this.gridAggregationModel.setAttributes(n),this.allAggregationModel.setInstanceCount(r*i)}}const rF=6378e3;function iF(e){return Number.isFinite(e)?e:0}function oF(e,t){const n=e.positions.value;let r,i,o=1/0,s=-1/0,a=1/0,l=-1/0;for(let c=0;c<t;c++)i=n[3*c],r=n[3*c+1],o=r<o?r:o,s=r>s?r:s,a=i<a?i:a,l=i>l?i:l;return{xMin:iF(a),xMax:iF(l),yMin:iF(o),yMax:iF(s)}}function sF(e,t){const n=e<0?-1:1;let r=n<0?Math.abs(e)+t:Math.abs(e);return r=Math.floor(r/t)*t,r*n}function aF(e,t){if(!(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]))return{xOffset:t,yOffset:t};const{yMin:n,yMax:r}=e;return function(e,t){const n=(s=e,s/rF*(180/Math.PI)),r=(i=t,o=e,o/rF*(180/Math.PI)/Math.cos(i*Math.PI/180));var i,o;var s;return{yOffset:n,xOffset:r}}(t,(n+r)/2)}function lF(e,t,n,r){const i=aF(e,t,r!==db.CARTESIAN),o=function(e,t,n,r){const{width:i,height:o}=r,s=n===db.CARTESIAN?[-i/2,-o/2]:[-180,-90];Op.assert(n===db.CARTESIAN||n===db.LNGLAT||n===db.DEFAULT);const{xMin:a,yMin:l}=e;return[-1*(sF(a-s[0],t.xOffset)+s[0]),-1*(sF(l-s[1],t.yOffset)+s[1])]}(e,i,r,n),{xMin:s,yMin:a,xMax:l,yMax:c}=e,u=l-s+i.xOffset,d=c-a+i.yOffset;return{gridOffset:i,translation:o,width:u,height:d,numCol:Math.ceil(u/i.xOffset),numRow:Math.ceil(d/i.yOffset)}}function cF(e,t){const n={};for(const r in e)t.includes(r)||(n[r]=e[r]);return n}class uF extends FB{constructor(){super(...arguments),pt(this,"state",void 0)}initializeAggregationLayer(e){super.initializeState(this.context),this.setState({ignoreProps:cF(this.constructor._propTypes,e.data.props),dimensions:e})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){const e=this.getShaders({});e&&e.defines&&(e.defines.NON_INSTANCED_MODEL=1),this.updateShaders(e)}this._updateAttributes()}updateAttributes(e){this.setState({changedAttributes:e})}getAttributes(){return this.getAttributeManager().getShaderAttributes()}getModuleSettings(){const{viewport:e,mousePosition:t,gl:n}=this.context;return Object.assign(Object.create(this.props),{viewport:e,mousePosition:t,pickingActive:0,devicePixelRatio:lx(n)})}updateShaders(e){}isAggregationDirty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{props:n,oldProps:r,changeFlags:i}=e,{compareAll:o=!1,dimension:s}=t,{ignoreProps:a}=this.state,{props:l,accessors:c=[]}=s,{updateTriggersChanged:u}=i;if(i.dataChanged)return!0;if(u){if(u.all)return!0;for(const e of c)if(u[e])return!0}if(o)return!!i.extensionsChanged||bP({oldProps:r,newProps:n,ignoreProps:a,propTypes:this.constructor._propTypes});for(const d of l)if(n[d]!==r[d])return!0;return!1}isAttributeChanged(e){const{changedAttributes:t}=this.state;return e?t&&void 0!==t[e]:!function(e){let t=!0;for(const n in e){t=!1;break}return t}(t)}_getAttributeManager(){return new dP(this.context.gl,{id:this.props.id,stats:this.context.stats})}}function dF(e,t,n){const r=n;return r.domain=()=>e,r.range=()=>t,r}function AF(e,t){return dF(e,t,(n=>function(e,t,n){const r=e[1]-e[0];if(r<=0)return Op.warn("quantizeScale: invalid domain, returning range[0]")(),t[0];const i=r/t.length,o=Math.floor((n-e[0])/i),s=Math.max(Math.min(o,t.length-1),0);return t[s]}(e,t,n)))}function hF(e,t){return dF(e,t,(n=>function(e,t,n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}(e,t,n)))}function fF(e,t){const n=e.sort(pF);let r=0;const i=Math.max(1,t.length),o=new Array(i-1);for(;++r<i;)o[r-1]=gF(n,r/i);const s=e=>function(e,t,n){return t[function(e,t){let n=0,r=e.length;for(;n<r;){const i=n+r>>>1;pF(e[i],t)>0?r=i:n=i+1}return n}(e,n)]}(o,t,e);return s.thresholds=()=>o,dF(e,t,s)}function pF(e,t){return e-t}function gF(e,t){const n=e.length;if(t<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),o=e[i];return o+(e[i+1]-o)*(r-i)}function mF(e,t){const n=new Map,r=[];for(const i of e){const e="".concat(i);n.has(e)||n.set(e,r.push(i))}return dF(e,t,(e=>function(e,t,n,r){const i="".concat(r);let o=t.get(i);return void 0===o&&(o=e.push(r),t.set(i,o)),n[(o-1)%n.length]}(r,n,t,e)))}function vF(e){return void 0!==e&&null!==e}function bF(e,t){return("function"===typeof t?e.map(t):e).filter(vF)}function yF(e,t){return bF(e,t)}function xF(e,t){return function(e){const t=[];return e.forEach((e=>{!t.includes(e)&&vF(e)&&t.push(e)})),t}(bF(e,t))}pt(uF,"layerName","AggregationLayer");const wF=e=>e.length,_F=e=>e.points,SF=e=>e.index,CF=(e,t)=>e<t?-1:e>t?1:e>=t?0:NaN,EF={getValue:wF,getPoints:_F,getIndex:SF,filterData:null};class MF{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EF;pt(this,"maxCount",void 0),pt(this,"maxValue",void 0),pt(this,"minValue",void 0),pt(this,"totalCount",void 0),pt(this,"aggregatedBins",void 0),pt(this,"sortedBins",void 0),pt(this,"binMap",void 0),this.aggregatedBins=this.getAggregatedBins(e,t),this._updateMinMaxValues(),this.binMap=this.getBinMap()}getAggregatedBins(e,t){const{getValue:n=wF,getPoints:r=_F,getIndex:i=SF,filterData:o}=t,s="function"===typeof o,a=e.length,l=[];let c=0;for(let u=0;u<a;u++){const t=e[u],a=r(t),d=i(t),A=s?a.filter(o):a;t.filteredPoints=s?A:null;const h=A.length?n(A):null;null!==h&&void 0!==h&&(l[c]={i:Number.isFinite(d)?d:u,value:h,counts:A.length},c++)}return l}_percentileToIndex(e){const t=this.sortedBins.length;if(t<2)return[0,0];const[n,r]=e.map((e=>function(e,t,n){return Math.max(t,Math.min(n,e))}(e,0,100)));return[Math.ceil(n/100*(t-1)),Math.floor(r/100*(t-1))]}getBinMap(){const e={};for(const t of this.aggregatedBins)e[t.i]=t;return e}_updateMinMaxValues(){let e=0,t=0,n=3402823466e29,r=0;for(const i of this.aggregatedBins)e=e>i.counts?e:i.counts,t=t>i.value?t:i.value,n=n<i.value?n:i.value,r+=i.counts;this.maxCount=e,this.maxValue=t,this.minValue=n,this.totalCount=r}getValueRange(e){if(this.sortedBins||(this.sortedBins=this.aggregatedBins.sort(((e,t)=>CF(e.value,t.value)))),!this.sortedBins.length)return[];let t=0,n=this.sortedBins.length-1;if(Array.isArray(e)){const r=this._percentileToIndex(e);t=r[0],n=r[1]}return[this.sortedBins[t].value,this.sortedBins[n].value]}getValueDomainByScale(e){let[t=0,n=100]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.sortedBins||(this.sortedBins=this.aggregatedBins.sort(((e,t)=>CF(e.value,t.value)))),!this.sortedBins.length)return[];const r=this._percentileToIndex([t,n]);return this._getScaleDomain(e,r)}_getScaleDomain(e,t){let[n,r]=t;const i=this.sortedBins;switch(e){case"quantize":case"linear":default:return[i[n].value,i[r].value];case"quantile":return yF(i.slice(n,r+1),(e=>e.value));case"ordinal":return xF(i,(e=>e.value))}}}function PF(e,t){const n=function(e,t){const{data:n=[],cellSize:r}=e,{attributes:i,viewport:o,projectPoints:s,numInstances:a}=t,l=i.positions.value,{size:c}=i.positions.getAccessor(),u=t.boundingBox||function(e,t){const n=e.value,{size:r}=e.getAccessor();let i,o,s=1/0,a=-1/0,l=1/0,c=-1/0;for(let u=0;u<t;u++)o=n[u*r],i=n[u*r+1],Number.isFinite(o)&&Number.isFinite(i)&&(s=i<s?i:s,a=i>a?i:a,l=o<l?o:l,c=o>c?o:c);return{xMin:l,xMax:c,yMin:s,yMax:a}}(i.positions,a),d=t.posOffset||[180,90],A=t.gridOffset||aF(u,r);if(A.xOffset<=0||A.yOffset<=0)return{gridHash:{},gridOffset:A};const{width:h,height:f}=o,p=Math.ceil(h/A.xOffset),g=Math.ceil(f/A.yOffset),m={},{iterable:v,objectInfo:b}=fM(n),y=new Array(3);for(const x of v){b.index++,y[0]=l[b.index*c],y[1]=l[b.index*c+1],y[2]=c>=3?l[b.index*c+2]:0;const[e,t]=s?o.project(y):y;if(Number.isFinite(e)&&Number.isFinite(t)){const n=Math.floor((t+d[1])/A.yOffset),r=Math.floor((e+d[0])/A.xOffset);if(!s||r>=0&&r<p&&n>=0&&n<g){const e="".concat(n,"-").concat(r);m[e]=m[e]||{count:0,points:[],lonIdx:r,latIdx:n},m[e].count+=1,m[e].points.push({source:x,index:b.index})}}}return{gridHash:m,gridOffset:A,offsets:[-1*d[0],-1*d[1]]}}(e,t),r=function(e){let{gridHash:t,gridOffset:n,offsets:r}=e;const i=new Array(Object.keys(t).length);let o=0;for(const s in t){const e=s.split("-"),a=parseInt(e[0],10),l=parseInt(e[1],10),c=o++;i[c]={index:c,position:[r[0]+n.xOffset*l,r[1]+n.yOffset*a],...t[s]}}return i}(n);return{gridHash:n.gridHash,gridOffset:n.gridOffset,data:r}}class TF extends uF{constructor(){super(...arguments),pt(this,"state",void 0)}initializeAggregationLayer(e){let{dimensions:t}=e;const{gl:n}=this.context;super.initializeAggregationLayer(t),this.setState({layerData:{},gpuGridAggregator:new nF(n,{id:"".concat(this.id,"-gpu-aggregator")}),cpuGridAggregator:PF})}updateState(e){super.updateState(e),this.updateAggregationState(e);const{aggregationDataDirty:t,aggregationWeightsDirty:n,gpuAggregation:r}=this.state;if(this.getNumInstances()<=0)return;let i=!1;(t||r&&n)&&(this._updateAggregation(e),i=!0),r||!t&&!n||(this._updateWeightBins(),this._uploadAggregationResults(),i=!0),this.setState({aggregationDirty:i})}finalizeState(e){var t;const{count:n}=this.state.weights;n&&n.aggregationBuffer&&n.aggregationBuffer.delete(),null===(t=this.state.gpuGridAggregator)||void 0===t||t.delete(),super.finalizeState(e)}updateShaders(e){this.state.gpuAggregation&&this.state.gpuGridAggregator.updateShaders(e)}updateAggregationState(e){Op.assert(!1)}allocateResources(e,t){if(this.state.numRow!==e||this.state.numCol!==t){const n=t*e*4*4,r=this.context.gl,{weights:i}=this.state;for(const e in i){const t=i[e];t.aggregationBuffer&&t.aggregationBuffer.delete(),t.aggregationBuffer=new Ux(r,{byteLength:n,accessor:{size:4,type:5126,divisor:1}})}}}updateResults(e){let{aggregationData:t,maxMinData:n,maxData:r,minData:i}=e;const{count:o}=this.state.weights;o&&(o.aggregationData=t,o.maxMinData=n,o.maxData=r,o.minData=i)}_updateAggregation(e){const{cpuGridAggregator:t,gpuGridAggregator:n,gridOffset:r,posOffset:i,translation:o=[0,0],scaling:s=[0,0,0],boundingBox:a,projectPoints:l,gpuAggregation:c,numCol:u,numRow:d}=this.state,{props:A}=e,{viewport:h}=this.context,f=this.getAttributes(),p=this.getNumInstances();if(c){const{weights:e}=this.state;n.run({weights:e,cellSize:[r.xOffset,r.yOffset],numCol:u,numRow:d,translation:o,scaling:s,vertexCount:p,projectPoints:l,attributes:f,moduleSettings:this.getModuleSettings()})}else{const e=t(A,{gridOffset:r,projectPoints:l,attributes:f,viewport:h,posOffset:i,boundingBox:a});this.setState({layerData:e})}}_updateWeightBins(){const{getValue:e}=this.state,t=new MF(this.state.layerData.data||[],{getValue:e});this.setState({sortedBins:t})}_uploadAggregationResults(){const{numCol:e,numRow:t}=this.state,{data:n}=this.state.layerData,{aggregatedBins:r,minValue:i,maxValue:o,totalCount:s}=this.state.sortedBins,a=new Float32Array(e*t*4).fill(0);for(const d of r){const{lonIdx:t,latIdx:r}=n[d.i],{value:i,counts:o}=d,s=4*(t+r*e);a[s]=i,a[s+4-1]=o}const l=new Float32Array([o,0,0,i]),c=new Float32Array([o,0,0,s]),u=new Float32Array([i,0,0,s]);this.updateResults({aggregationData:a,maxMinData:l,maxData:c,minData:u})}}pt(TF,"layerName","GridAggregationLayer");const kF=[255,255,255,255],BF={cellSize:{type:"number",min:1,max:1e3,value:1e3},getPosition:{type:"accessor",value:e=>e.position},getWeight:{type:"accessor",value:1},gpuAggregation:!0,aggregation:"SUM",contours:{type:"object",value:[{threshold:1}],optional:!0,compare:3},zOffset:.005},OF="positions",IF={data:{props:["cellSize"]},weights:{props:["aggregation"],accessors:["getWeight"]}};class RF extends TF{initializeState(){super.initializeAggregationLayer({dimensions:IF}),this.setState({contourData:{},projectPoints:!1,weights:{count:{size:1,operation:OD.SUM}}});this.getAttributeManager().add({[OF]:{size:3,accessor:"getPosition",type:5130,fp64:this.use64bitPositions()},count:{size:3,accessor:"getWeight"}})}updateState(e){super.updateState(e);let t=!1;const{oldProps:n,props:r}=e,{aggregationDirty:i}=this.state;n.contours===r.contours&&n.zOffset===r.zOffset||(t=!0,this._updateThresholdData(e.props)),this.getNumInstances()>0&&(i||t)&&this._generateContours()}renderLayers(){const{contourSegments:e,contourPolygons:t}=this.state.contourData,n=this.getSubLayerClass("lines",BL),r=this.getSubLayerClass("bands",HO),i=e&&e.length>0&&new n(this.getSubLayerProps({id:"lines"}),{data:this.state.contourData.contourSegments,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.contour.color||kF,getWidth:e=>e.contour.strokeWidth||1}),o=t&&t.length>0&&new r(this.getSubLayerProps({id:"bands"}),{data:this.state.contourData.contourPolygons,getPolygon:e=>e.vertices,getFillColor:e=>e.contour.color||kF});return[i,o]}updateAggregationState(e){const{props:t,oldProps:n}=e,{cellSize:r,coordinateSystem:i}=t,{viewport:o}=this.context,s=n.cellSize!==r;let a=t.gpuAggregation;this.state.gpuAggregation!==t.gpuAggregation&&a&&!nF.isSupported(this.context.gl)&&(Op.warn("GPU Grid Aggregation not supported, falling back to CPU")(),a=!1);const l=a!==this.state.gpuAggregation;this.setState({gpuAggregation:a});const{dimensions:c}=this.state,u=this.isAttributeChanged(OF),{data:d,weights:A}=c;let{boundingBox:h}=this.state;if(u&&(h=oF(this.getAttributes(),this.getNumInstances()),this.setState({boundingBox:h})),u||s){const{gridOffset:e,translation:t,width:n,height:s,numCol:a,numRow:l}=lF(h,r,o,i);this.allocateResources(l,a),this.setState({gridOffset:e,boundingBox:h,translation:t,posOffset:t.slice(),gridOrigin:[-1*t[0],-1*t[1]],width:n,height:s,numCol:a,numRow:l})}const f=u||l||this.isAggregationDirty(e,{dimension:d,compareAll:a}),p=this.isAggregationDirty(e,{dimension:A});p&&this._updateAccessors(e),(f||p)&&this._resetResults(),this.setState({aggregationDataDirty:f,aggregationWeightsDirty:p})}_updateAccessors(e){const{getWeight:t,aggregation:n,data:r}=e.props,{count:i}=this.state.weights;i&&(i.getWeight=t,i.operation=OD[n]),this.setState({getValue:DD(n,t,{data:r})})}_resetResults(){const{count:e}=this.state.weights;e&&(e.aggregationData=null)}_generateContours(){const{numCol:e,numRow:t,gridOrigin:n,gridOffset:r,thresholdData:i}=this.state,{count:o}=this.state.weights;let{aggregationData:s}=o;s||(s=o.aggregationBuffer.getData(),o.aggregationData=s);const{cellWeights:a}=nF.getCellData({countsData:s}),l=function(e){let{thresholdData:t,cellWeights:n,gridSize:r,gridOrigin:i,cellSize:o}=e;const s=[],a=[],l=r[0],c=r[1];let u=0,d=0;for(const A of t){const{contour:e}=A,{threshold:t}=e;for(let r=-1;r<l;r++)for(let h=-1;h<c;h++){const{code:f,meanCode:p}=CD({cellWeights:n,threshold:t,x:r,y:h,width:l,height:c}),g={type:wD.ISO_BANDS,gridOrigin:i,cellSize:o,x:r,y:h,width:l,height:c,code:f,meanCode:p,thresholdData:A};if(Array.isArray(t)){g.type=wD.ISO_BANDS;const t=ED(g);for(const n of t)a[d++]={vertices:n,contour:e}}else{g.type=wD.ISO_LINES;const t=ED(g);for(let n=0;n<t.length;n+=2)s[u++]={start:t[n],end:t[n+1],contour:e}}}}return{contourSegments:s,contourPolygons:a}}({thresholdData:i,cellWeights:a,gridSize:[e,t],gridOrigin:n,cellSize:[r.xOffset,r.yOffset]});this.setState({contourData:l})}_updateThresholdData(e){const{contours:t,zOffset:n}=e,r=t.length,i=new Array(r);for(let o=0;o<r;o++){const e=t[o];i[o]={contour:e,zIndex:e.zIndex||o,zOffset:n}}this.setState({thresholdData:i})}}pt(RF,"layerName","ContourLayer"),pt(RF,"defaultProps",BF);const LF=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function DF(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array;if(Number.isFinite(e[0]))t=new r(e);else{t=new r(4*e.length);let n=0;for(let r=0;r<e.length;r++){const i=e[r];t[n++]=i[0],t[n++]=i[1],t[n++]=i[2],t[n++]=Number.isFinite(i[3])?i[3]:255}}if(n)for(let i=0;i<t.length;i++)t[i]/=255;return t}const FF={colorDomain:null,colorRange:LF,elevationDomain:null,elevationRange:[0,1e3],elevationScale:{type:"number",min:0,value:1},gridSize:{type:"array",value:[1,1]},gridOrigin:{type:"array",value:[0,0]},gridOffset:{type:"array",value:[0,0]},cellSize:{type:"number",min:0,max:1e3,value:1e3},offset:{type:"array",value:[1,1]},coverage:{type:"number",min:0,max:1,value:1},extruded:!0,material:!0};class NF extends qP{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME gpu-grid-cell-layer-vertex-shader\n#define RANGE_COUNT 6\n\nin vec3 positions;\nin vec3 normals;\n\nin vec4 colors;\nin vec4 elevations;\nin vec3 instancePickingColors;\nuniform vec2 offset;\nuniform bool extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\nuniform ivec2 gridSize;\nuniform vec2 gridOrigin;\nuniform vec2 gridOriginLow;\nuniform vec2 gridOffset;\nuniform vec2 gridOffsetLow;\nuniform vec4 colorRange[RANGE_COUNT];\nuniform vec2 elevationRange;\nuniform vec2 colorDomain;\nuniform bool colorDomainValid;\nuniform vec2 elevationDomain;\nuniform bool elevationDomainValid;\n\nlayout(std140) uniform;\nuniform ColorData\n{\n  vec4 maxMinCount;\n} colorData;\nuniform ElevationData\n{\n  vec4 maxMinCount;\n} elevationData;\n\n#define EPSILON 0.00001\nout vec4 vColor;\n\nvec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {\n  vec4 outColor = vec4(0., 0., 0., 0.);\n  if (value >= (domain.x - EPSILON) && value <= (domain.y + EPSILON)) {\n    float domainRange = domain.y - domain.x;\n    if (domainRange <= 0.) {\n      outColor = colorRange[0];\n    } else {\n      float rangeCount = float(RANGE_COUNT);\n      float rangeStep = domainRange / rangeCount;\n      float idx = floor((value - domain.x) / rangeStep);\n      idx = clamp(idx, 0., rangeCount - 1.);\n      int intIdx = int(idx);\n      outColor = colorRange[intIdx];\n    }\n  }\n  return outColor;\n}\n\nfloat linearScale(vec2 domain, vec2 range, float value) {\n  if (value >= (domain.x - EPSILON) && value <= (domain.y + EPSILON)) {\n    return ((value - domain.x) / (domain.y - domain.x)) * (range.y - range.x) + range.x;\n  }\n  return -1.;\n}\n\nvoid main(void) {\n  vec2 clrDomain = colorDomainValid ? colorDomain : vec2(colorData.maxMinCount.a, colorData.maxMinCount.r);\n  vec4 color = quantizeScale(clrDomain, colorRange, colors.r);\n\n  float elevation = 0.0;\n\n  if (extruded) {\n    vec2 elvDomain = elevationDomainValid ? elevationDomain : vec2(elevationData.maxMinCount.a, elevationData.maxMinCount.r);\n    elevation = linearScale(elvDomain, elevationRange, elevations.r);\n    elevation = elevation  * (positions.z + 1.0) / 2.0 * elevationScale;\n  }\n  float shouldRender = float(color.r > 0.0 && elevations.r >= 0.0);\n  float dotRadius = cellSize / 2. * coverage * shouldRender;\n\n  int yIndex = (gl_InstanceID / gridSize[0]);\n  int xIndex = gl_InstanceID - (yIndex * gridSize[0]);\n\n  vec2 instancePositionXFP64 = mul_fp64(vec2(gridOffset[0], gridOffsetLow[0]), vec2(float(xIndex), 0.));\n  instancePositionXFP64 = sum_fp64(instancePositionXFP64, vec2(gridOrigin[0], gridOriginLow[0]));\n  vec2 instancePositionYFP64 = mul_fp64(vec2(gridOffset[1], gridOffsetLow[1]), vec2(float(yIndex), 0.));\n  instancePositionYFP64 = sum_fp64(instancePositionYFP64, vec2(gridOrigin[1], gridOriginLow[1]));\n\n  vec3 centroidPosition = vec3(instancePositionXFP64[0], instancePositionYFP64[0], elevation);\n  vec3 centroidPosition64Low = vec3(instancePositionXFP64[1], instancePositionYFP64[1], 0.0);\n  geometry.worldPosition = centroidPosition;\n  vec3 pos = vec3(project_size(positions.xy + offset) * dotRadius, 0.);\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n\n  vec3 normals_commonspace = project_normal(normals);\n\n   if (extruded) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, normals_commonspace);\n    vColor = vec4(lightColor, color.a * opacity) / 255.;\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity) / 255.;\n  }\n}\n",fs:"#version 300 es\n#define SHADER_NAME gpu-grid-cell-layer-fragment-shader\n\nprecision highp float;\n\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  fragColor = vColor;\n  fragColor = picking_filterColor(fragColor);\n}\n",modules:[LT,VT,JT,BD]})}initializeState(e){let{gl:t}=e;this.getAttributeManager().addInstanced({colors:{size:4,noAlloc:!0},elevations:{size:4,noAlloc:!0}});const n=this._getModel(t);this._setupUniformBuffer(n),this.setState({model:n})}_getModel(e){return new oP(e,{...this.getShaders(),id:this.props.id,geometry:new hk,isInstanced:!0})}draw(e){let{uniforms:t}=e;const{cellSize:n,offset:r,extruded:i,elevationScale:o,coverage:s,gridSize:a,gridOrigin:l,gridOffset:c,elevationRange:u,colorMaxMinBuffer:d,elevationMaxMinBuffer:A}=this.props,h=[ev(l[0]),ev(l[1])],f=[ev(c[0]),ev(c[1])],p=this.getDomainUniforms(),g=DF(this.props.colorRange);this.bindUniformBuffers(d,A),this.state.model.setUniforms(t).setUniforms(p).setUniforms({cellSize:n,offset:r,extruded:i,elevationScale:o,coverage:s,gridSize:a,gridOrigin:l,gridOriginLow:h,gridOffset:c,gridOffsetLow:f,colorRange:g,elevationRange:u}).draw(),this.unbindUniformBuffers(d,A)}bindUniformBuffers(e,t){e.bind({target:35345,index:0}),t.bind({target:35345,index:1})}unbindUniformBuffers(e,t){e.unbind({target:35345,index:0}),t.unbind({target:35345,index:1})}getDomainUniforms(){const{colorDomain:e,elevationDomain:t}=this.props,n={};return null!==e?(n.colorDomainValid=!0,n.colorDomain=e):n.colorDomainValid=!1,null!==t?(n.elevationDomainValid=!0,n.elevationDomain=t):n.elevationDomainValid=!1,n}_setupUniformBuffer(e){const t=this.context.gl,n=e.program.handle,r=t.getUniformBlockIndex(n,"ColorData"),i=t.getUniformBlockIndex(n,"ElevationData");t.uniformBlockBinding(n,r,0),t.uniformBlockBinding(n,i,1)}}pt(NF,"layerName","GPUGridCellLayer"),pt(NF,"defaultProps",FF);const zF={colorDomain:null,colorRange:LF,getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",elevationDomain:null,elevationRange:[0,1e3],getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationScale:{type:"number",min:0,value:1},cellSize:{type:"number",min:1,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:{type:"accessor",value:e=>e.position},extruded:!1,material:!0},jF={data:{props:["cellSize","colorAggregation","elevationAggregation"]}},UF="positions";class GF extends TF{initializeState(e){let{gl:t}=e;const n=nF.isSupported(t);n||Op.error("GPUGridLayer is not supported on this browser, use GridLayer instead")(),super.initializeAggregationLayer({dimensions:jF}),this.setState({gpuAggregation:!0,projectPoints:!1,isSupported:n,weights:{color:{needMin:!0,needMax:!0,combineMaxMin:!0,maxMinBuffer:new Ux(t,{byteLength:16,accessor:{size:4,type:5126,divisor:1}})},elevation:{needMin:!0,needMax:!0,combineMaxMin:!0,maxMinBuffer:new Ux(t,{byteLength:16,accessor:{size:4,type:5126,divisor:1}})}},positionAttributeName:"positions"});this.getAttributeManager().add({[UF]:{size:3,accessor:"getPosition",type:5130,fp64:this.use64bitPositions()},color:{size:3,accessor:"getColorWeight"},elevation:{size:3,accessor:"getElevationWeight"}})}updateState(e){if(!1===this.state.isSupported)return;super.updateState(e);const{aggregationDirty:t}=this.state;t&&this.setState({gridHash:null})}getHashKeyForIndex(e){const{numRow:t,numCol:n,boundingBox:r,gridOffset:i}=this.state,o=[n,t],s=[r.xMin,r.yMin],a=[i.xOffset,i.yOffset],l=Math.floor(e/o[0]),c=e-l*o[0],u=Math.floor((l*a[1]+s[1]+90+a[1]/2)/a[1]),d=Math.floor((c*a[0]+s[0]+180+a[0]/2)/a[0]);return"".concat(u,"-").concat(d)}getPositionForIndex(e){const{numRow:t,numCol:n,boundingBox:r,gridOffset:i}=this.state,o=[n,t],s=[r.xMin,r.yMin],a=[i.xOffset,i.yOffset],l=Math.floor(e/o[0]);return[(e-l*o[0])*a[0]+s[0],l*a[1]+s[1]]}getPickingInfo(e){let{info:t,mode:n}=e;const{index:r}=t;let i=null;if(r>=0){const{gpuGridAggregator:e}=this.state,t=this.getPositionForIndex(r),o=nF.getAggregationData({pixelIndex:r,...e.getData("color")}),s=nF.getAggregationData({pixelIndex:r,...e.getData("elevation")});if(i={colorValue:o.cellWeight,elevationValue:s.cellWeight,count:o.cellCount||s.cellCount,position:t,totalCount:o.totalCount||s.totalCount},"hover"!==n){const{props:e}=this;let{gridHash:t}=this.state;if(!t){const{gridOffset:n,translation:r,boundingBox:i}=this.state,{viewport:o}=this.context;t=PF(e,{gridOffset:n,attributes:this.getAttributes(),viewport:o,translation:r,boundingBox:i}).gridHash,this.setState({gridHash:t})}const n=t[this.getHashKeyForIndex(r)];Object.assign(i,n)}}return t.picked=Boolean(i),t.object=i,t}renderLayers(){if(!this.state.isSupported)return null;const{elevationScale:e,extruded:t,cellSize:n,coverage:r,material:i,elevationRange:o,colorDomain:s,elevationDomain:a}=this.props,{weights:l,numRow:c,numCol:u,gridOrigin:d,gridOffset:A}=this.state,{color:h,elevation:f}=l,p=DF(this.props.colorRange);return new(this.getSubLayerClass("gpu-grid-cell",NF))({gridSize:[u,c],gridOrigin:d,gridOffset:[A.xOffset,A.yOffset],colorRange:p,elevationRange:o,colorDomain:s,elevationDomain:a,cellSize:n,coverage:r,material:i,elevationScale:e,extruded:t},this.getSubLayerProps({id:"gpu-grid-cell"}),{data:{attributes:{colors:h.aggregationBuffer,elevations:f.aggregationBuffer}},colorMaxMinBuffer:h.maxMinBuffer,elevationMaxMinBuffer:f.maxMinBuffer,numInstances:u*c})}finalizeState(e){const{color:t,elevation:n}=this.state.weights;[t,n].forEach((e=>{const{aggregationBuffer:t,maxMinBuffer:n}=e;n.delete(),null===t||void 0===t||t.delete()})),super.finalizeState(e)}updateAggregationState(e){const{props:t,oldProps:n}=e,{cellSize:r,coordinateSystem:i}=t,{viewport:o}=this.context,s=n.cellSize!==r,{dimensions:a}=this.state,l=this.isAttributeChanged(UF),c=l||this.isAttributeChanged();let{boundingBox:u}=this.state;if(l&&(u=oF(this.getAttributes(),this.getNumInstances()),this.setState({boundingBox:u})),l||s){const{gridOffset:e,translation:t,width:n,height:s,numCol:a,numRow:l}=lF(u,r,o,i);this.allocateResources(l,a),this.setState({gridOffset:e,translation:t,gridOrigin:[-1*t[0],-1*t[1]],width:n,height:s,numCol:a,numRow:l})}const d=c||this.isAggregationDirty(e,{dimension:a.data,compareAll:!0});d&&this._updateAccessors(e),this.setState({aggregationDataDirty:d})}_updateAccessors(e){const{colorAggregation:t,elevationAggregation:n}=e.props,{color:r,elevation:i}=this.state.weights;r.operation=OD[t],i.operation=OD[n]}}pt(GF,"layerName","GPUGridLayer"),pt(GF,"defaultProps",zF);class VF extends TL{getGeometry(e){return new hk}draw(e){let{uniforms:t}=e;const{elevationScale:n,extruded:r,offset:i,coverage:o,cellSize:s,angle:a,radiusUnits:l}=this.props;this.state.model.setUniforms(t).setUniforms({radius:s/2,radiusUnits:hb[l],angle:a,offset:i,extruded:r,coverage:o,elevationScale:n,edgeDistance:1,isWireframe:!1}).draw()}}function HF(){}pt(VF,"layerName","GridCellLayer"),pt(VF,"defaultProps",{cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}});const WF=["getBins","getDomain","getScaleFunc"],QF=[{key:"fillColor",accessor:"getFillColor",pickingInfo:"colorValue",getBins:{triggers:{value:{prop:"getColorValue",updateTrigger:"getColorValue"},weight:{prop:"getColorWeight",updateTrigger:"getColorWeight"},aggregation:{prop:"colorAggregation"},filterData:{prop:"_filterData",updateTrigger:"_filterData"}}},getDomain:{triggers:{lowerPercentile:{prop:"lowerPercentile"},upperPercentile:{prop:"upperPercentile"},scaleType:{prop:"colorScaleType"}}},getScaleFunc:{triggers:{domain:{prop:"colorDomain"},range:{prop:"colorRange"}},onSet:{props:"onSetColorDomain"}},nullValue:[0,0,0,0]},{key:"elevation",accessor:"getElevation",pickingInfo:"elevationValue",getBins:{triggers:{value:{prop:"getElevationValue",updateTrigger:"getElevationValue"},weight:{prop:"getElevationWeight",updateTrigger:"getElevationWeight"},aggregation:{prop:"elevationAggregation"},filterData:{prop:"_filterData",updateTrigger:"_filterData"}}},getDomain:{triggers:{lowerPercentile:{prop:"elevationLowerPercentile"},upperPercentile:{prop:"elevationUpperPercentile"},scaleType:{prop:"elevationScaleType"}}},getScaleFunc:{triggers:{domain:{prop:"elevationDomain"},range:{prop:"elevationRange"}},onSet:{props:"onSetElevationDomain"}},nullValue:-1}],JF=e=>e.cellSize;class KF{constructor(e){this.state={layerData:{},dimensions:{}},this.changeFlags={},this.dimensionUpdaters={},this._getCellSize=e.getCellSize||JF,this._getAggregator=e.getAggregator,this._addDimension(e.dimensions||QF)}static defaultDimensions(){return QF}updateState(e,t){const{oldProps:n,props:r,changeFlags:i}=e;this.updateGetValueFuncs(n,r,i);const o=this.needsReProjectPoints(n,r,i);let s=!1;if(i.dataChanged||o)this.getAggregatedData(r,t),s=!0;else{(this.getDimensionChanges(n,r,i)||[]).forEach((e=>"function"===typeof e&&e())),s=!0}return this.setState({aggregationDirty:s}),this.state}setState(e){this.state={...this.state,...e}}setDimensionState(e,t){this.setState({dimensions:{...this.state.dimensions,[e]:{...this.state.dimensions[e],...t}}})}normalizeResult(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.hexagons?{data:e.hexagons,...e}:e.layerData?{data:e.layerData,...e}:e}getAggregatedData(e,t){const n=this._getAggregator(e)(e,t);this.setState({layerData:this.normalizeResult(n)}),this.changeFlags={layerData:!0},this.getSortedBins(e)}updateGetValueFuncs(e,t,n){for(const r in this.dimensionUpdaters){const{value:i,weight:o,aggregation:s}=this.dimensionUpdaters[r].getBins.triggers;let a=t[i.prop];this.needUpdateDimensionStep(this.dimensionUpdaters[r].getBins,e,t,n)&&(a=a?FD(a,{data:t.data}):DD(t[s.prop],t[o.prop],{data:t.data})),a&&this.setDimensionState(r,{getValue:a})}}needsReProjectPoints(e,t,n){return this._getCellSize(e)!==this._getCellSize(t)||this._getAggregator(e)!==this._getAggregator(t)||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPosition)}addDimension(e){this._addDimension(e)}_addDimension(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{const{key:t}=e;this.dimensionUpdaters[t]=this.getDimensionUpdaters(e),this.state.dimensions[t]={getValue:null,domain:null,sortedBins:null,scaleFunc:HF}}))}getDimensionUpdaters(e){let{key:t,accessor:n,pickingInfo:r,getBins:i,getDomain:o,getScaleFunc:s,nullValue:a}=e;return{key:t,accessor:n,pickingInfo:r,getBins:{updater:this.getDimensionSortedBins,...i},getDomain:{updater:this.getDimensionValueDomain,...o},getScaleFunc:{updater:this.getDimensionScale,...s},attributeAccessor:this.getSubLayerDimensionAttribute(t,a)}}needUpdateDimensionStep(e,t,n,r){return Object.values(e.triggers).some((e=>e.updateTrigger?r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged[e.updateTrigger]):t[e.prop]!==n[e.prop]))}getDimensionChanges(e,t,n){const r=[];for(const i in this.dimensionUpdaters){const o=WF.find((r=>this.needUpdateDimensionStep(this.dimensionUpdaters[i][r],e,t,n)));o&&r.push(this.dimensionUpdaters[i][o].updater.bind(this,t,this.dimensionUpdaters[i]))}return r.length?r:null}getUpdateTriggers(e){const t=e.updateTriggers||{},n={};for(const r in this.dimensionUpdaters){const{accessor:i}=this.dimensionUpdaters[r];n[i]={},WF.forEach((o=>{Object.values(this.dimensionUpdaters[r][o].triggers).forEach((r=>{let{prop:o,updateTrigger:s}=r;if(s){const e=t[s];"object"!==typeof e||Array.isArray(e)?void 0!==e&&(n[i][o]=e):Object.assign(n[i],e)}else n[i][o]=e[o]}))}))}return n}getSortedBins(e){for(const t in this.dimensionUpdaters)this.getDimensionSortedBins(e,this.dimensionUpdaters[t])}getDimensionSortedBins(e,t){const{key:n}=t,{getValue:r}=this.state.dimensions[n],i=new MF(this.state.layerData.data||[],{getValue:r,filterData:e._filterData});this.setDimensionState(n,{sortedBins:i}),this.getDimensionValueDomain(e,t)}getDimensionValueDomain(e,t){const{getDomain:n,key:r}=t,{triggers:{lowerPercentile:i,upperPercentile:o,scaleType:s}}=n,a=this.state.dimensions[r].sortedBins.getValueDomainByScale(e[s.prop],[e[i.prop],e[o.prop]]);this.setDimensionState(r,{valueDomain:a}),this.getDimensionScale(e,t)}getDimensionScale(e,t){const{key:n,getScaleFunc:r,getDomain:i}=t,{domain:o,range:s}=r.triggers,{scaleType:a}=i.triggers,{onSet:l}=r,c=e[s.prop],u=e[o.prop]||this.state.dimensions[n].valueDomain,d=function(e){switch(e){case"quantize":default:return AF;case"linear":return hF;case"quantile":return fF;case"ordinal":return mF}}(a&&e[a.prop]),A=d(u,c);"object"===typeof l&&"function"===typeof e[l.props]&&e[l.props](A.domain()),this.setDimensionState(n,{scaleFunc:A})}getSubLayerDimensionAttribute(e,t){return n=>{const{sortedBins:r,scaleFunc:i}=this.state.dimensions[e],o=r.binMap[n.index];if(o&&0===o.counts)return t;const s=o&&o.value,a=i.domain();return s>=a[0]&&s<=a[a.length-1]?i(s):t}}getSubLayerAccessors(e){const t={};for(const n in this.dimensionUpdaters){const{accessor:r}=this.dimensionUpdaters[n];t[r]=this.getSubLayerDimensionAttribute(e,n)}return t}getPickingInfo(e){let{info:t}=e;let n=null;if(t.picked&&t.index>-1){const e=this.state.layerData.data[t.index],r={};for(const t in this.dimensionUpdaters){const{pickingInfo:n}=this.dimensionUpdaters[t],{sortedBins:i}=this.state.dimensions[t],o=i.binMap[e.index]&&i.binMap[e.index].value;r[n]=o}n=Object.assign(r,e,{points:e.filteredPoints||e.points})}return t.picked=Boolean(n),t.object=n,t}getAccessor(e){return this.dimensionUpdaters.hasOwnProperty(e)?this.dimensionUpdaters[e].attributeAccessor:HF}}function XF(){}const YF={colorDomain:null,colorRange:LF,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",lowerPercentile:{type:"number",min:0,max:100,value:0},upperPercentile:{type:"number",min:0,max:100,value:100},colorScaleType:"quantize",onSetColorDomain:XF,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",min:0,max:100,value:0},elevationUpperPercentile:{type:"number",min:0,max:100,value:100},elevationScale:{type:"number",min:0,value:1},elevationScaleType:"linear",onSetElevationDomain:XF,gridAggregator:PF,cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:{type:"accessor",value:e=>e.position},extruded:!1,material:!0,_filterData:{type:"function",value:null,optional:!0}};class qF extends uF{initializeState(){const e=new KF({getAggregator:e=>e.gridAggregator,getCellSize:e=>e.cellSize});this.state={cpuAggregator:e,aggregatorState:e.state};this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"}})}updateState(e){super.updateState(e),this.setState({aggregatorState:this.state.cpuAggregator.updateState(e,{viewport:this.context.viewport,attributes:this.getAttributes(),numInstances:this.getNumInstances()})})}getPickingInfo(e){let{info:t}=e;return this.state.cpuAggregator.getPickingInfo({info:t})}_onGetSublayerColor(e){return this.state.cpuAggregator.getAccessor("fillColor")(e)}_onGetSublayerElevation(e){return this.state.cpuAggregator.getAccessor("elevation")(e)}_getSublayerUpdateTriggers(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}renderLayers(){const{elevationScale:e,extruded:t,cellSize:n,coverage:r,material:i,transitions:o}=this.props,{cpuAggregator:s}=this.state,a=this.getSubLayerClass("grid-cell",VF),l=this._getSublayerUpdateTriggers();return new a({cellSize:n,coverage:r,material:i,elevationScale:e,extruded:t,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:o&&{getFillColor:o.getColorValue||o.getColorWeight,getElevation:o.getElevationValue||o.getElevationWeight}},this.getSubLayerProps({id:"grid-cell",updateTriggers:l}),{data:s.state.layerData.data})}}pt(qF,"layerName","CPUGridLayer"),pt(qF,"defaultProps",YF);const ZF={...GF.defaultProps,...qF.defaultProps,gpuAggregation:!1};class $F extends FB{constructor(){super(...arguments),pt(this,"state",void 0)}initializeState(){this.state={useGPUAggregation:!0}}updateState(e){let{props:t}=e;this.setState({useGPUAggregation:this.canUseGPUAggregation(t)})}renderLayers(){const{data:e,updateTriggers:t}=this.props,n=this.state.useGPUAggregation?"GPU":"CPU";return new(this.state.useGPUAggregation?this.getSubLayerClass("GPU",GF):this.getSubLayerClass("CPU",qF))(this.props,this.getSubLayerProps({id:n,updateTriggers:t}),{data:e})}canUseGPUAggregation(e){const{gpuAggregation:t,lowerPercentile:n,upperPercentile:r,getColorValue:i,getElevationValue:o,colorScaleType:s}=e;return!!t&&(!!nF.isSupported(this.context.gl)&&(0===n&&100===r&&(null===i&&null===o&&("quantile"!==s&&"ordinal"!==s))))}}pt($F,"layerName","GridLayer"),pt($F,"defaultProps",ZF);const eN=new Float32Array(12);function tN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0;for(const r of e)for(let e=0;e<t;e++)eN[n++]=r[e]||0;return eN}class nN extends qP{getShaders(){return{vs:"#define SHADER_NAME heatp-map-layer-vertex-shader\n\nuniform sampler2D maxTexture;\nuniform float intensity;\nuniform vec2 colorDomain;\nuniform float threshold;\nuniform float aggregationMode;\n\nattribute vec3 positions;\nattribute vec2 texCoords;\n\nvarying vec2 vTexCoords;\nvarying float vIntensityMin;\nvarying float vIntensityMax;\n\nvoid main(void) {\n  gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));\n  vTexCoords = texCoords;\n  vec4 maxTexture = texture2D(maxTexture, vec2(0.5));\n  float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;\n  float minValue = maxValue * threshold;\n  if (colorDomain[1] > 0.) {\n    maxValue = colorDomain[1];\n    minValue = colorDomain[0];\n  }\n  vIntensityMax = intensity / maxValue;\n  vIntensityMin = intensity / minValue;\n}\n",fs:"#define SHADER_NAME triangle-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D texture;\nuniform sampler2D colorTexture;\nuniform float aggregationMode;\n\nvarying vec2 vTexCoords;\nvarying float vIntensityMin;\nvarying float vIntensityMax;\n\nvec4 getLinearColor(float value) {\n  float factor = clamp(value * vIntensityMax, 0., 1.);\n  vec4 color = texture2D(colorTexture, vec2(factor, 0.5));\n  color.a *= min(value * vIntensityMin, 1.0);\n  return color;\n}\n\nvoid main(void) {\n  vec4 weights = texture2D(texture, vTexCoords);\n  float weight = weights.r;\n\n  if (aggregationMode > 0.5) {\n    weight /= max(1.0, weights.a);\n  }\n  if (weight <= 0.) {\n     discard;\n  }\n\n  vec4 linearColor = getLinearColor(weight);\n  linearColor.a *= opacity;\n  gl_FragColor =linearColor;\n}\n",modules:[LT]}}initializeState(e){let{gl:t}=e;this.getAttributeManager().add({positions:{size:3,noAlloc:!0},texCoords:{size:2,noAlloc:!0}}),this.setState({model:this._getModel(t)})}_getModel(e){const{vertexCount:t}=this.props;return new oP(e,{...this.getShaders(),id:this.props.id,geometry:new XT({drawMode:6,vertexCount:t})})}draw(e){let{uniforms:t}=e;const{model:n}=this.state,{texture:r,maxTexture:i,colorTexture:o,intensity:s,threshold:a,aggregationMode:l,colorDomain:c}=this.props;n.setUniforms({...t,texture:r,maxTexture:i,colorTexture:o,intensity:s,threshold:a,aggregationMode:l,colorDomain:c}).draw()}}pt(nN,"layerName","TriangleLayer");const rN={mipmaps:!1,parameters:{10240:9729,10241:9729,10242:33071,10243:33071},dataFormat:6408},iN=[0,0],oN={SUM:0,MEAN:1},sN={getPosition:{type:"accessor",value:e=>e.position},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:LF,threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},aN=[mw,xw],lN=[Ew,vw],cN={data:{props:["radiusPixels"]}};class uN extends uF{constructor(){super(...arguments),pt(this,"state",void 0)}initializeState(){const{gl:e}=this.context;if(!Dw(e,aN))return this.setState({supported:!1}),void Op.error("HeatmapLayer: ".concat(this.id," is not supported on this browser"))();super.initializeAggregationLayer(cN),this.setState({supported:!0,colorDomain:iN}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState(e){let{changeFlags:t}=e;return t.somethingChanged}updateState(e){this.state.supported&&(super.updateState(e),this._updateHeatmapState(e))}_updateHeatmapState(e){const{props:t,oldProps:n}=e,r=this._getChangeFlags(e);(r.dataChanged||r.viewportChanged)&&(r.boundsChanged=this._updateBounds(r.dataChanged),this._updateTextureRenderingBounds()),r.dataChanged||r.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):r.viewportZoomChanged&&this._debouncedUpdateWeightmap(),t.colorRange!==n.colorRange&&this._updateColorTexture(e),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:e.context.viewport.zoom})}renderLayers(){if(!this.state.supported)return[];const{weightsTexture:e,triPositionBuffer:t,triTexCoordBuffer:n,maxWeightsTexture:r,colorTexture:i,colorDomain:o}=this.state,{updateTriggers:s,intensity:a,threshold:l,aggregation:c}=this.props;return new(this.getSubLayerClass("triangle",nN))(this.getSubLayerProps({id:"triangle-layer",updateTriggers:s}),{coordinateSystem:db.DEFAULT,data:{attributes:{positions:t,texCoords:n}},vertexCount:4,maxTexture:r,colorTexture:i,aggregationMode:oN[c]||0,texture:e,intensity:a,threshold:l,colorDomain:o})}finalizeState(e){super.finalizeState(e);const{weightsTransform:t,weightsTexture:n,maxWeightTransform:r,maxWeightsTexture:i,triPositionBuffer:o,triTexCoordBuffer:s,colorTexture:a,updateTimer:l}=this.state;null===t||void 0===t||t.delete(),null===n||void 0===n||n.delete(),null===r||void 0===r||r.delete(),null===i||void 0===i||i.delete(),null===o||void 0===o||o.delete(),null===s||void 0===s||s.delete(),null===a||void 0===a||a.delete(),l&&clearTimeout(l)}_getAttributeManager(){return new dP(this.context.gl,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(e){const t={},{dimensions:n}=this.state;t.dataChanged=this.isAttributeChanged()||this.isAggregationDirty(e,{compareAll:!0,dimension:n.data}),t.viewportChanged=e.changeFlags.viewportChanged;const{zoom:r}=this.state;return e.context.viewport&&e.context.viewport.zoom===r||(t.viewportZoomChanged=!0),t}_createTextures(){const{gl:e}=this.context,{textureSize:t,format:n,type:r}=this.state;this.setState({weightsTexture:new Xx(e,{width:t,height:t,format:n,type:r,...rN}),maxWeightsTexture:new Xx(e,{format:n,type:r,...rN})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}_setupTextureParams(){const{gl:e}=this.context,{weightsTextureSize:t}=this.props,n=Math.min(t,sx(e,3379)),r=Dw(e,lN),{format:i,type:o}=function(e){let{gl:t,floatTargetSupport:n}=e;return n?{format:my(t)?34836:6408,type:5126}:{format:6408,type:5121}}({gl:e,floatTargetSupport:r}),s=r?1:1/255;this.setState({textureSize:n,format:i,type:o,weightsScale:s}),r||Op.warn("HeatmapLayer: ".concat(this.id," rendering to float texture not supported, fallingback to low precession format"))()}getShaders(e){return super.getShaders("max-weights-transform"===e?{vs:"attribute vec4 inTexture;\nvarying vec4 outTexture;\n\nvoid main()\n{\noutTexture = inTexture;\ngl_Position = vec4(0, 0, 0, 1.);\ngl_PointSize = 1.0;\n}\n",_fs:"varying vec4 outTexture;\nvoid main() {\n  gl_FragColor = outTexture;\n  gl_FragColor.g = outTexture.r / max(1.0, outTexture.a);\n}\n"}:{vs:"attribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float weights;\nvarying vec4 weightsTexture;\nuniform float radiusPixels;\nuniform float textureWidth;\nuniform vec4 commonBounds;\nuniform float weightsScale;\nvoid main()\n{\n  weightsTexture = vec4(weights * weightsScale, 0., 0., 1.);\n\n  float radiusTexels  = project_pixel_size(radiusPixels) * textureWidth / (commonBounds.z - commonBounds.x);\n  gl_PointSize = radiusTexels * 2.;\n\n  vec3 commonPosition = project_position(positions, positions64Low);\n  gl_Position.xy = (commonPosition.xy - commonBounds.xy) / (commonBounds.zw - commonBounds.xy) ;\n  gl_Position.xy = (gl_Position.xy * 2.) - (1.);\n}\n",_fs:"varying vec4 weightsTexture;\nfloat gaussianKDE(float u){\n  return pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);\n}\nvoid main()\n{\n  float dist = length(gl_PointCoord - vec2(0.5, 0.5));\n  if (dist > 0.5) {\n    discard;\n  }\n  gl_FragColor = weightsTexture * gaussianKDE(2. * dist);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}_createWeightsTransform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const{gl:n}=this.context;let{weightsTransform:r}=this.state;const{weightsTexture:i}=this.state;null===(t=r)||void 0===t||t.delete(),r=new sP(n,{id:"".concat(this.id,"-weights-transform"),elementCount:1,_targetTexture:i,_targetTextureVarying:"weightsTexture",...e}),this.setState({weightsTransform:r})}_setupResources(){const{gl:e}=this.context;this._createTextures();const{textureSize:t,weightsTexture:n,maxWeightsTexture:r}=this.state,i=this.getShaders("weights-transform");this._createWeightsTransform(i);const o=this.getShaders("max-weights-transform"),s=new sP(e,{id:"".concat(this.id,"-max-weights-transform"),_sourceTextures:{inTexture:n},_targetTexture:r,_targetTextureVarying:"outTexture",...o,elementCount:t*t});this.setState({weightsTexture:n,maxWeightsTexture:r,maxWeightTransform:s,zoom:null,triPositionBuffer:new Ux(e,{byteLength:48,accessor:{size:3}}),triTexCoordBuffer:new Ux(e,{byteLength:48,accessor:{size:2}})})}updateShaders(e){this._createWeightsTransform(e)}_updateMaxWeightValue(){const{maxWeightTransform:e}=this.state;e.run({parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32776}})}_updateBounds(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{viewport:t}=this.context,n=[t.unproject([0,0]),t.unproject([t.width,0]),t.unproject([t.width,t.height]),t.unproject([0,t.height])].map((e=>e.map(Math.fround))),r=function(e){const t=e.map((e=>e[0])),n=e.map((e=>e[1])),r=Math.min.apply(null,t),i=Math.max.apply(null,t);return[r,Math.min.apply(null,n),i,Math.max.apply(null,n)]}(n),i={visibleWorldBounds:r,viewportCorners:n};let o=!1;if(e||!this.state.worldBounds||(s=this.state.worldBounds,!((a=r)[0]>=s[0]&&a[2]<=s[2]&&a[1]>=s[1]&&a[3]<=s[3]))){const e=this._worldToCommonBounds(r),t=this._commonToWorldBounds(e);this.props.coordinateSystem===db.LNGLAT&&(t[1]=Math.max(t[1],-85.051129),t[3]=Math.min(t[3],85.051129),t[0]=Math.max(t[0],-360),t[2]=Math.min(t[2],360));const n=this._worldToCommonBounds(t);i.worldBounds=t,i.normalizedCommonBounds=n,o=!0}var s,a;return this.setState(i),o}_updateTextureRenderingBounds(){const{triPositionBuffer:e,triTexCoordBuffer:t,normalizedCommonBounds:n,viewportCorners:r}=this.state,{viewport:i}=this.context;e.subData(tN(r,3));const o=r.map((e=>function(e,t){const[n,r,i,o]=t;return[(e[0]-n)/(i-n),(e[1]-r)/(o-r)]}(i.projectPosition(e),n)));t.subData(tN(o,2))}_updateColorTexture(e){const{colorRange:t}=e.props;let{colorTexture:n}=this.state;const r=DF(t,!1,Uint8Array);n?n.setImageData({data:r,width:t.length}):n=new Xx(this.context.gl,{data:r,width:t.length,height:1,...rN}),this.setState({colorTexture:n})}_updateWeightmap(){const{radiusPixels:e,colorDomain:t,aggregation:n}=this.props,{weightsTransform:r,worldBounds:i,textureSize:o,weightsTexture:s,weightsScale:a}=this.state;this.state.isWeightMapDirty=!1;const l=this._worldToCommonBounds(i,{useLayerCoordinateSystem:!0});if(t&&"SUM"===n){const{viewport:e}=this.context,n=e.distanceScales.metersPerUnit[2]*(l[2]-l[0])/o;this.state.colorDomain=t.map((e=>e*n*a))}else this.state.colorDomain=t||iN;const c={radiusPixels:e,commonBounds:l,textureWidth:o,weightsScale:a};r.update({elementCount:this.getNumInstances()}),ax(this.context.gl,{clearColor:[0,0,0,0]},(()=>{r.run({uniforms:c,parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32774},clearRenderTarget:!0,attributes:this.getAttributes(),moduleSettings:this.getModuleSettings()})})),this._updateMaxWeightValue(),s.setParameters({10240:9729,10241:9729})}_debouncedUpdateWeightmap(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{updateTimer:t}=this.state;const{debounceTimeout:n}=this.props;e?(t=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(t),t=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),n)),this.setState({updateTimer:t})}_worldToCommonBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{useLayerCoordinateSystem:n=!1}=t,[r,i,o,s]=e,{viewport:a}=this.context,{textureSize:l}=this.state,{coordinateSystem:c}=this.props,u=n&&(c===db.LNGLAT_OFFSETS||c===db.METER_OFFSETS),d=u?a.projectPosition(this.props.coordinateOrigin):[0,0],A=2*l/a.scale;let h,f;return n&&!u?(h=this.projectPosition([r,i,0]),f=this.projectPosition([o,s,0])):(h=a.projectPosition([r,i,0]),f=a.projectPosition([o,s,0])),function(e,t,n){const[r,i,o,s]=e,a=o-r,l=s-i;let c=a,u=l;a/l<t/n?c=t/n*l:u=n/t*a,c<t&&(c=t,u=n);const d=(o+r)/2,A=(s+i)/2;return[d-c/2,A-u/2,d+c/2,A+u/2]}([h[0]-d[0],h[1]-d[1],f[0]-d[0],f[1]-d[1]],A,A)}_commonToWorldBounds(e){const[t,n,r,i]=e,{viewport:o}=this.context,s=o.unprojectPosition([t,n]),a=o.unprojectPosition([r,i]);return s.slice(0,2).concat(a.slice(0,2))}}pt(uN,"layerName","HeatmapLayer"),pt(uN,"defaultProps",sN);var dN=Math.PI/3,AN=[0,dN,2*dN,3*dN,4*dN,5*dN];function hN(e){return e[0]}function fN(e){return e[1]}function pN(){}const gN={colorDomain:null,colorRange:LF,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},colorScaleType:"quantize",onSetColorDomain:pN,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},elevationScaleType:"linear",onSetElevationDomain:pN,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function(e,t){const{data:n,radius:r}=e,{viewport:i,attributes:o}=t,s=n.length?function(e,t){const{attributes:n}=t,r=n.positions.value,{size:i}=n.positions.getAccessor();let o,s=1/0,a=1/0,l=-1/0,c=-1/0;for(o=0;o<i*e.length;o+=i){const e=r[o],t=r[o+1];Number.isFinite(e)&&Number.isFinite(t)&&(s=Math.min(e,s),l=Math.max(e,l),a=Math.min(t,a),c=Math.max(t,c))}return[s,a,l,c].every(Number.isFinite)?[(s+l)/2,(a+c)/2]:null}(n,t):null,a=function(e,t,n){const{unitsPerMeter:r}=t.getDistanceScales(n);return e*r[0]}(r,i,s),l=[],{iterable:c,objectInfo:u}=fM(n),d=o.positions.value,{size:A}=o.positions.getAccessor();for(const f of c){u.index++;const e=u.index*A,t=[d[e],d[e+1]];Number.isFinite(t[0])&&Number.isFinite(t[1])?l.push({screenCoord:i.projectFlat(t),source:f,index:u.index}):Op.warn("HexagonLayer: invalid position")()}const h=function(){var e,t,n,r=0,i=0,o=1,s=1,a=hN,l=fN;function c(e){var r,i={},o=[],s=e.length;for(r=0;r<s;++r)if(!isNaN(u=+a.call(null,c=e[r],r,e))&&!isNaN(d=+l.call(null,c,r,e))){var c,u,d,A=Math.round(d/=n),h=Math.round(u=u/t-(1&A)/2),f=d-A;if(3*Math.abs(f)>1){var p=u-h,g=h+(u<h?-1:1)/2,m=A+(d<A?-1:1),v=u-g,b=d-m;p*p+f*f>v*v+b*b&&(h=g+(1&A?1:-1)/2,A=m)}var y=h+"-"+A,x=i[y];x?x.push(c):(o.push(x=i[y]=[c]),x.x=(h+(1&A)/2)*t,x.y=A*n)}return o}function u(e){var t=0,n=0;return AN.map((function(r){var i=Math.sin(r)*e,o=-Math.cos(r)*e,s=i-t,a=o-n;return t=i,n=o,[s,a]}))}return c.hexagon=function(t){return"m"+u(null==t?e:+t).join("l")+"z"},c.centers=function(){for(var a=[],l=Math.round(i/n),c=Math.round(r/t),u=l*n;u<s+e;u+=n,++l)for(var d=c*t+(1&l)*t/2;d<o+t/2;d+=t)a.push([d,u]);return a},c.mesh=function(){var t=u(e).slice(0,4).join("l");return c.centers().map((function(e){return"M"+e+"m"+t})).join("")},c.x=function(e){return arguments.length?(a=e,c):a},c.y=function(e){return arguments.length?(l=e,c):l},c.radius=function(r){return arguments.length?(t=2*(e=+r)*Math.sin(dN),n=1.5*e,c):e},c.size=function(e){return arguments.length?(r=i=0,o=+e[0],s=+e[1],c):[o-r,s-i]},c.extent=function(e){return arguments.length?(r=+e[0][0],i=+e[0][1],o=+e[1][0],s=+e[1][1],c):[[r,i],[o,s]]},c.radius(1)}().radius(a).x((e=>e.screenCoord[0])).y((e=>e.screenCoord[1]));return{hexagons:h(l).map(((e,t)=>({position:i.unprojectFlat([e.x,e.y]),points:e,index:t}))),radiusCommon:a}},getPosition:{type:"accessor",value:e=>e.position},material:!0,_filterData:{type:"function",value:null,optional:!0}};class mN extends uF{constructor(){super(...arguments),pt(this,"state",void 0)}initializeState(){const e=new KF({getAggregator:e=>e.hexagonAggregator,getCellSize:e=>e.radius});this.state={cpuAggregator:e,aggregatorState:e.state,vertices:null};this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"}})}updateState(e){if(super.updateState(e),e.changeFlags.propsOrDataChanged){const t=this.state.cpuAggregator.updateState(e,{viewport:this.context.viewport,attributes:this.getAttributes()});if(this.state.aggregatorState.layerData!==t.layerData){const{hexagonVertices:e}=t.layerData||{};this.setState({vertices:e&&this.convertLatLngToMeterOffset(e)})}this.setState({aggregatorState:t})}}convertLatLngToMeterOffset(e){const{viewport:t}=this.context;if(Array.isArray(e)&&6===e.length){const n=e[0],r=e[3],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],o=t.projectFlat(i),{metersPerUnit:s}=t.getDistanceScales(i);return e.map((e=>{const n=t.projectFlat(e);return[(n[0]-o[0])*s[0],(n[1]-o[1])*s[1]]}))}return Op.error("HexagonLayer: hexagonVertices needs to be an array of 6 points")(),null}getPickingInfo(e){let{info:t}=e;return this.state.cpuAggregator.getPickingInfo({info:t})}_onGetSublayerColor(e){return this.state.cpuAggregator.getAccessor("fillColor")(e)}_onGetSublayerElevation(e){return this.state.cpuAggregator.getAccessor("elevation")(e)}_getSublayerUpdateTriggers(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}renderLayers(){const{elevationScale:e,extruded:t,coverage:n,material:r,transitions:i}=this.props,{aggregatorState:o,vertices:s}=this.state,a=this.getSubLayerClass("hexagon-cell",TL),l=this._getSublayerUpdateTriggers();return new a({...s?{vertices:s,radius:1}:{radius:o.layerData.radiusCommon||1,radiusUnits:"common",angle:90},diskResolution:6,elevationScale:e,extruded:t,coverage:n,material:r,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:i&&{getFillColor:i.getColorValue||i.getColorWeight,getElevation:i.getElevationValue||i.getElevationWeight}},this.getSubLayerProps({id:"hexagon-cell",updateTriggers:l}),{data:o.layerData.data})}}pt(mN,"layerName","HexagonLayer"),pt(mN,"defaultProps",gN);const vN={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[zT]};class bN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;this.id=t||Sx(this.constructor.name),this.display=!0,this.position=new qm,this.rotation=new qm,this.scale=new qm(1,1,1),this.matrix=new Pv,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return yx(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return yx(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return yx(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.matrix.copy(e):this.matrix=e}setMatrixComponents(e){let{position:t,rotation:n,scale:r,update:i=!0}=e;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),i&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(n),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t,rotation:n,scale:r}=e;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){yx(e),t=t||this.matrix;const n=new Pv(e).multiplyRight(t),r=n.invert(),i=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class yN extends bN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;Ay.assert(t.every((e=>e instanceof bN)),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const t=this.children,n=t.indexOf(e);return n>-1&&t.splice(n,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach((e=>e.delete())),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse(((t,n)=>{let{worldMatrix:r}=n;const i=t.getBounds();if(!i)return;const[o,s]=i,a=new qm(o).add(s).divide([2,2,2]);r.transformAsPoint(a,a);const l=new qm(s).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let c=0;c<8;c++){const t=new qm(1&c?-1:1,2&c?-1:1,4&c?-1:1).multiply(l).add(a);for(let n=0;n<3;n++)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}})),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:t=new Pv}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Pv(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof yN?r.traverse(e,{worldMatrix:n}):e(r,{worldMatrix:n})}}const xN={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wN={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function _N(e){if(!e._animation){const t=wN[e.componentType],n=xN[e.type],r=n*e.count,{buffer:i,byteOffset:o}=e.bufferView.data,s=new t(i,o+(e.byteOffset||0),r);if(1===n)e._animation=Array.from(s);else{const t=[];for(let e=0;e<s.length;e+=n)t.push(Array.from(s.slice(e,e+n)));e._animation=t}}return e._animation}const SN=new Pv;const CN=new qI;function EN(e,t,n,r){let{input:i,interpolation:o,output:s}=t;const a=e%i[i.length-1],l=i.findIndex((e=>e>=a)),c=Math.max(0,l-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:Ay.warn("Bad animation path ".concat(r))()}yx(n[r].length===s[c].length);const u=i[c],d=i[l];switch(o){case"STEP":!function(e,t,n){for(let r=0;r<n.length;r++)e[t][r]=n[r]}(n,r,s[c]);break;case"LINEAR":if(d>u){const e=(a-u)/(d-u);!function(e,t,n,r,i){if("rotation"===t){CN.slerp({start:n,target:r,ratio:i});for(let n=0;n<CN.length;n++)e[t][n]=CN[n]}else for(let o=0;o<n.length;o++)e[t][o]=i*r[o]+(1-i)*n[o]}(n,r,s[c],s[l],e)}break;case"CUBICSPLINE":if(d>u){const e=(a-u)/(d-u),t=d-u;!function(e,t,n){let{p0:r,outTangent0:i,inTangent1:o,p1:s,tDiff:a,ratio:l}=n;for(let c=0;c<e[t].length;c++){const n=i[c]*a,u=o[c]*a;e[t][c]=(2*Math.pow(l,3)-3*Math.pow(l,2)+1)*r[c]+(Math.pow(l,3)-2*Math.pow(l,2)+l)*n+(-2*Math.pow(l,3)+3*Math.pow(l,2))*s[c]+(Math.pow(l,3)-Math.pow(l,2))*u}}(n,r,{p0:s[3*c+1],outTangent0:s[3*c+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:t,ratio:e})}break;default:Ay.warn("Interpolation ".concat(o," not supported"))()}}class MN{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const t=(e/1e3-this.startTime)*this.speed;this.channels.forEach((e=>{let{sampler:n,target:r,path:i}=e;EN(t,n,r,i),function(e,t){if(t.matrix.identity(),e.translation&&t.matrix.translate(e.translation),e.rotation){const n=SN.fromQuaternion(e.rotation);t.matrix.multiplyRight(n)}e.scale&&t.matrix.scale(e.scale)}(r,r._node)}))}}class PN{constructor(e){this.animations=e.animations.map(((t,n)=>{const r=t.name||"Animation-".concat(n),i=t.samplers.map((t=>{let{input:n,interpolation:r="LINEAR",output:i}=t;return{input:_N(e.accessors[n]),interpolation:r,output:_N(e.accessors[i])}})),o=t.channels.map((t=>{let{sampler:n,target:r}=t;return{sampler:i[n],target:e.nodes[r.node],path:r.path}}));return new MN({name:r,channels:o})}))}animate(e){this.setTime(e)}setTime(e){this.animations.forEach((t=>t.animate(e)))}getAnimations(){return this.animations}}class TN extends bN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof oP?(this.model=e,this._setModelNodeProps(t)):this.model=new oP(e,t),this.bounds=null,this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach((e=>e.delete())),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class kN{constructor(e,t){let{attributes:n,material:r,pbrDebug:i,imageBasedLightingEnvironment:o,lights:s,useTangents:a}=t;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Lw(e,Ow)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),i&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(n.NORMAL,"HAS_NORMALS"),this.defineIfPresent(n.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(n.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(s,"USE_LIGHTS"),this.defineIfPresent(i,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},i=e.texture.source.image;let o,s={};i.compressed?(o=i,s={[this.gl.TEXTURE_MIN_FILTER]:i.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:i};const a=new Xx(this.gl,{id:e.name||e.id,parameters:{...r,...s},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[t]=a,this.defineIfPresent(n,n),this.generatedTextures.push(a)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:n=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,n]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(Ay.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach((e=>e.delete()))}}function BN(e,t){return my(e)?"#version 300 es\n".concat(t):t}const ON={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},IN={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class RN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},IN,t)}instantiate(e){this.gltf=e;return(e.scenes||[]).map((e=>this.createScene(e)))}createAnimator(){return Array.isArray(this.gltf.animations)?new PN(this.gltf):null}createScene(e){const t=(e.nodes||[]).map((e=>this.createNode(e)));return new yN({id:e.name||e.id,children:t})}createNode(e){if(!e._node){const t=(e.children||[]).map((e=>this.createNode(e)));e.mesh&&t.push(this.createMesh(e.mesh));const n=new yN({id:e.name||e.id,children:t});if(e.matrix)n.setMatrix(e.matrix);else{if(n.matrix.identity(),e.translation&&n.matrix.translate(e.translation),e.rotation){const t=(new Pv).fromQuaternion(e.rotation);n.matrix.multiplyRight(t)}e.scale&&n.matrix.scale(e.scale)}e._node=n}return e._node}createMesh(e){if(!e._mesh){const t=(e.primitives||[]).map(((t,n)=>this.createPrimitive(t,n,e))),n=new yN({id:e.name||e.id,children:t});e._mesh=n}return e._mesh}getVertexCount(e){Ay.warn("getVertexCount() not found")()}createPrimitive(e,t,n){const r=function(e,t){const{id:n,drawMode:r,vertexCount:i,attributes:o,modelOptions:s}=t,a=new kN(e,t);Ay.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(o).map((e=>e.buffer)));const c=new TN(e,{id:n,drawMode:r,vertexCount:i,modules:[vN],parameters:a.parameters,vs:BN(e,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:BN(e,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l,...s,defines:{...a.defines,...s.defines}});return c.setProps({attributes:o}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:e.name||"".concat(n.name||n.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,t){const n={};return Object.keys(e).forEach((t=>{n[t]=this.createAccessor(e[t],this.createBuffer(e[t],this.gl.ARRAY_BUFFER))})),t&&(n.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),Ay.info(4,"glTF Attributes",{attributes:e,indices:t,generated:n})(),n}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:n}=e;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[t]||(n.lumaBuffers[t]=new Ux(this.gl,{id:"from-".concat(n.id),data:n.data||e.value,target:t})),n.lumaBuffers[t]}createAccessor(e,t){return new Fx({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:ON[e.type]})}createSampler(e){return e}needsPOT(){return!1}}const LN=null,DN=null,FN=null,NN=null,zN="3.4.15",jN={};async function UN(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n&&(t=function(e,t,n){if(e.startsWith("http"))return e;const r=n.modules||{};if(r[e])return r[e];if(!kg)return"modules/".concat(t,"/dist/libs/").concat(e);if(n.CDN)return Eg(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(t,"@").concat(zN,"/dist/libs/").concat(e);if(Bg)return"../src/libs/".concat(e);return"modules/".concat(t,"/src/libs/").concat(e)}(t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),jN[t]=jN[t]||async function(t){if(t.endsWith("wasm")){const e=await fetch(t);return await e.arrayBuffer()}if(!kg)try{return e&&FN&&await FN(t)}catch{return null}if(Bg)return importScripts(t);const n=await fetch(t);return function(e,t){if(!kg)return NN&&NN(e,t);if(Bg)return eval.call(Tg,e),null;const n=document.createElement("script");n.id=t;try{n.appendChild(document.createTextNode(e))}catch(r){n.text=e}return document.body.appendChild(n),null}(await n.text(),t)}(t),await jN[t]}const GN="3.4.15",VN="https://unpkg.com/@loaders.gl/textures@".concat(GN,"/dist/libs/basis_encoder.wasm"),HN="https://unpkg.com/@loaders.gl/textures@".concat(GN,"/dist/libs/basis_encoder.js");let WN,QN;async function JN(e){const t=e.modules||{};return t.basis?t.basis:(WN=WN||async function(e){let t=null,n=null;return[t,n]=await Promise.all([await UN("basis_transcoder.js","textures",e),await UN("basis_transcoder.wasm","textures",e)]),t=t||globalThis.BASIS,await function(e,t){const n={};t&&(n.wasmBinary=t);return new Promise((t=>{e(n).then((e=>{const{BasisFile:n,initializeBasis:r}=e;r(),t({BasisFile:n})}))}))}(t,n)}(e),await WN)}async function KN(e){const t=e.modules||{};return t.basisEncoder?t.basisEncoder:(QN=QN||async function(e){let t=null,n=null;return[t,n]=await Promise.all([await UN(HN,"textures",e),await UN(VN,"textures",e)]),t=t||globalThis.BASIS,await function(e,t){const n={};t&&(n.wasmBinary=t);return new Promise((t=>{e(n).then((e=>{const{BasisFile:n,KTX2File:r,initializeBasis:i,BasisEncoder:o}=e;i(),t({BasisFile:n,KTX2File:r,BasisEncoder:o})}))}))}(t,n)}(e),await QN)}const XN=33776,YN=33779,qN=35840,ZN=35842,$N=36196,ez=37808,tz=["","WEBKIT_","MOZ_"],nz={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let rz=null;function iz(e){if(!rz){e=e||function(){try{return document.createElement("canvas").getContext("webgl")}catch(e){return null}}()||void 0,rz=new Set;for(const t of tz)for(const n in nz)if(e&&e.getExtension("".concat(t).concat(n))){const e=nz[n];rz.add(e)}}return rz}new Uint8Array([0]);var oz,sz,az,lz,cz,uz,dz,Az;!function(e){e[e.NONE=0]="NONE",e[e.BASISLZ=1]="BASISLZ",e[e.ZSTD=2]="ZSTD",e[e.ZLIB=3]="ZLIB"}(oz||(oz={})),function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(sz||(sz={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(az||(az={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(lz||(lz={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(cz||(cz={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(uz||(uz={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(dz||(dz={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(Az||(Az={}));const hz=[171,75,84,88,32,50,48,187,13,10,26,10];const fz={etc1:{basisFormat:0,compressed:!0,format:$N},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:XN},bc3:{basisFormat:3,compressed:!0,format:YN},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:qN},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:ZN},"astc-4x4":{basisFormat:10,compressed:!0,format:ez},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function pz(e,t,n){const r=new e(new Uint8Array(t));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");const e=r.getNumImages(),t=[];for(let i=0;i<e;i++){const e=r.getNumLevels(i),o=[];for(let t=0;t<e;t++)o.push(gz(r,i,t,n));t.push(o)}return t}finally{r.close(),r.delete()}}function gz(e,t,n,r){const i=e.getImageWidth(t,n),o=e.getImageHeight(t,n),s=e.getHasAlpha(),{compressed:a,format:l,basisFormat:c}=bz(r,s),u=e.getImageTranscodedSizeInBytes(t,n,c),d=new Uint8Array(u);if(!e.transcodeImage(d,t,n,c,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:o,data:d,compressed:a,format:l,hasAlpha:s}}function mz(e,t,n){const r=new e(new Uint8Array(t));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");const e=r.getLevels(),t=[];for(let i=0;i<e;i++){t.push(vz(r,i,n));break}return[t]}finally{r.close(),r.delete()}}function vz(e,t,n){const{alphaFlag:r,height:i,width:o}=e.getImageLevelInfo(t,0,0),{compressed:s,format:a,basisFormat:l}=bz(n,r),c=e.getImageTranscodedSizeInBytes(t,0,0,l),u=new Uint8Array(c);if(!e.transcodeImage(u,t,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:i,data:u,compressed:s,levelSize:c,hasAlpha:r,format:a}}function bz(e,t){let n=e&&e.basis&&e.basis.format;return"auto"===n&&(n=yz()),"object"===typeof n&&(n=t?n.alpha:n.noAlpha),n=n.toLowerCase(),fz[n]}function yz(){const e=iz();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}const xz={name:"Basis",id:kg?"basis":"basis-nodejs",module:"textures",version:"3.4.15",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},wz={...xz,parse:async function(e,t){if("auto"===t.basis.containerFormat){if(function(e){const t=new Uint8Array(e);return!(t.byteLength<hz.length||t[0]!==hz[0]||t[1]!==hz[1]||t[2]!==hz[2]||t[3]!==hz[3]||t[4]!==hz[4]||t[5]!==hz[5]||t[6]!==hz[6]||t[7]!==hz[7]||t[8]!==hz[8]||t[9]!==hz[9]||t[10]!==hz[10]||t[11]!==hz[11])}(e)){return mz((await KN(t)).KTX2File,e,t)}const{BasisFile:n}=await JN(t);return pz(n,e,t)}if("encoder"===t.basis.module){const n=await KN(t);return"ktx2"===t.basis.containerFormat?mz(n.KTX2File,e,t):pz(n.BasisFile,e,t)}{const{BasisFile:n}=await JN(t);return pz(n,e,t)}}};function _z(e,t,n){if(e.byteLength<=t+n)return"";const r=new DataView(e);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}function Sz(e){try{return JSON.parse(e)}catch(ke){throw new Error('Failed to parse JSON from data starting with "'.concat(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return _z(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer)return _z(e,0,t);return""}(e),'"'))}}function Cz(e,t){if(!e)throw new Error(t||"assert failed: gltf")}function Ez(e,t){if(e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:"))return e;const n=t.baseUri||t.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(e));return n.substr(0,n.lastIndexOf("/")+1)+e}function Mz(e,t,n){const r=e.bufferViews[n];Cz(r);const i=t[r.buffer];Cz(i);const o=(r.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,o,r.byteLength)}function Pz(e,t){return Zp(e>=0),Zp(t>0),e+(t-1)&~(t-1)}function Tz(e,t,n){let r;if(e instanceof ArrayBuffer)r=new Uint8Array(e);else{const t=e.byteOffset,n=e.byteLength;r=new Uint8Array(e.buffer||e.arrayBuffer,t,n)}return t.set(r,n),n+Pz(r.byteLength,4)}const kz=["SCALAR","VEC2","VEC3","VEC4"],Bz=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Oz=new Map(Bz),Iz={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Rz={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Lz={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Dz(e){return kz[e-1]||kz[0]}function Fz(e){const t=Oz.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}function Nz(e,t){const n=Lz[e.componentType],r=Iz[e.type],i=Rz[e.componentType],o=e.count*r,s=e.count*r*i;return Cz(s>=0&&s<=t.byteLength),{ArrayType:n,length:o,byteLength:s}}const zz={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class jz{constructor(e){pt(this,"gltf",void 0),pt(this,"sourceBuffers",void 0),pt(this,"byteLength",void 0),this.gltf=e||{json:{...zz},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){const t=this.getUsedExtensions().find((t=>t===e)),n=this.json.extensions||{};return t?n[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find((t=>t===e))?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"===typeof t)return t;const n=this.json[e]&&this.json[e][t];if(!n)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return n}getTypedArrayForBufferView(e){const t=(e=this.getBufferView(e)).buffer,n=this.gltf.buffers[t];Cz(n);const r=(e.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,r,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),n=this.getBuffer(t.buffer).data,{ArrayType:r,length:i}=Nz(e,t);return new r(n,t.byteOffset+e.byteOffset,i)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),n=this.getBuffer(t.buffer).data,r=t.byteOffset||0;return new Uint8Array(n,r,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,n){return e.extensions=e.extensions||{},e.extensions[t]=n,this.registerUsedExtension(t),this}setObjectExtension(e,t,n){(e.extensions||{})[t]=n}removeObjectExtension(e,t){const n=e.extensions||{},r=n[t];return delete n[t],r}addExtension(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cz(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cz(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((t=>t===e))||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((t=>t===e))||this.json.extensionsRequired.push(e)}removeExtension(e){if(!this.getExtension(e))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const t=this.json.extensionsRemoved;t.includes(e)||t.push(e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:n}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return n&&(r.matrix=n),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:n,material:r,mode:i=4}=e,o={primitives:[{attributes:this._addAttributes(t),mode:i}]};if(n){const e=this._addIndices(n);o.primitives[0].indices=e}return Number.isFinite(r)&&(o.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(o),this.json.meshes.length-1}addPointCloud(e){const t={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(t),this.json.meshes.length-1}addImage(e,t){const n=sE(e),r=t||(null===n||void 0===n?void 0:n.mimeType),i={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(i),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Cz(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const n={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=Pz(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}addAccessor(e,t){const n={bufferView:e,type:Dz(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(n),this.json.accessors.length-1}addBinaryBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const n=this.addBufferView(e);let r={min:t.min,max:t.max};r.min&&r.max||(r=this._getAccessorMinMax(e,t.size));const i={size:t.size,componentType:Fz(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(n,Object.assign(i,t))}addTexture(e){const{imageIndex:t}=e,n={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(n),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const n=this.byteLength,r=new ArrayBuffer(n),i=new Uint8Array(r);let o=0;for(const s of this.sourceBuffers||[])o=Tz(s,i,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=n:this.json.buffers=[{byteLength:n}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let n=!0;for(;n;){const r=e.indexOf(t);r>-1?e.splice(r,1):n=!1}}_addAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};for(const n in e){const r=e[n],i=this._getGltfAttributeName(n),o=this.addBinaryBuffer(r.value,r);t[i]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const n={min:null,max:null};if(e.length<t)return n;n.min=[],n.max=[];const r=e.subarray(0,t);for(const i of r)n.min.push(i),n.max.push(i);for(let i=t;i<e.length;i+=t)for(let r=0;r<t;r++)n.min[0+r]=Math.min(n.min[0+r],e[i+r]),n.max[0+r]=Math.max(n.max[0+r],e[i+r]);return n}}const Uz="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Gz="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Vz=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Hz=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),Wz={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Qz={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};let Jz;async function Kz(){return Jz||(Jz=async function(){let e=Uz;WebAssembly.validate(Vz)&&(e=Gz,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const t=await WebAssembly.instantiate(function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);t[r]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let n=0;for(let r=0;r<e.length;++r)t[n++]=t[r]<60?Hz[t[r]]:64*(t[r]-60)+t[++r];return t.buffer.slice(0,n)}(e),{});return await t.instance.exports.__wasm_call_ctors(),t.instance}()),Jz}function Xz(e,t,n,r,i,o,s){const a=e.exports.sbrk,l=r+3&-4,c=a(l*i),u=a(o.length),d=new Uint8Array(e.exports.memory.buffer);d.set(o,u);const A=t(c,r,i,u,o.length);if(0===A&&s&&s(c,l,i),n.set(d.subarray(c,c+r*i)),a(c-a(0)),0!==A)throw new Error("Malformed buffer data: ".concat(A))}const Yz="EXT_meshopt_compression",qz=Yz;async function Zz(e,t){var n;const r=new jz(e);if(null===t||void 0===t||null===(n=t.gltf)||void 0===n||!n.decompressMeshes)return;const i=[];for(const o of e.json.bufferViews||[])i.push($z(r,o));await Promise.all(i),r.removeExtension(Yz)}async function $z(e,t){const n=e.getObjectExtension(t,Yz);if(n){const{byteOffset:r=0,byteLength:i=0,byteStride:o,count:s,mode:a,filter:l="NONE",buffer:c}=n,u=e.gltf.buffers[c],d=new Uint8Array(u.arrayBuffer,u.byteOffset+r,i),A=new Uint8Array(e.gltf.buffers[t.buffer].arrayBuffer,t.byteOffset,t.byteLength);return await async function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const s=await Kz();Xz(s,s.exports[Qz[i]],e,t,n,r,s.exports[Wz[o||"NONE"]])}(A,s,o,d,a,l),A}return null}const ej={};function tj(e){if(void 0===ej[e]){const t=fg?function(e){switch(e){case"image/avif":case"image/webp":return function(e){try{const t=document.createElement("canvas");return 0===t.toDataURL(e).indexOf("data:".concat(e))}catch{return!1}}(e);default:return!0}}(e):nj(e);ej[e]=t}return ej[e]}function nj(e){const t=["image/png","image/jpeg","image/gif"],{_parseImageNode:n,_imageFormatsNode:r=t}=globalThis;return Boolean(n)&&r.includes(e)}const rj="EXT_texture_webp",ij=rj;function oj(e,t){const n=new jz(e);if(!tj("image/webp")){if(n.getRequiredExtensions().includes(rj))throw new Error("gltf: Required extension ".concat(rj," not supported by browser"));return}const{json:r}=n;for(const i of r.textures||[]){const e=n.getObjectExtension(i,rj);e&&(i.source=e.source),n.removeObjectExtension(i,rj)}n.removeExtension(rj)}const sj="KHR_texture_basisu",aj=sj;function lj(e,t){const n=new jz(e),{json:r}=n;for(const i of r.textures||[]){const e=n.getObjectExtension(i,sj);e&&(i.source=e.source),n.removeObjectExtension(i,sj)}n.removeExtension(sj)}const cj="3.4.15",uj={draco:{decoderType:"object"===typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},dj={name:"Draco",id:kg?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:cj,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:uj};function Aj(e,t,n){const r=Wk(t.value),i=n||function(e){const t=new Map;"byteOffset"in e&&t.set("byteOffset",e.byteOffset.toString(10));"byteStride"in e&&t.set("byteStride",e.byteStride.toString(10));"normalized"in e&&t.set("normalized",e.normalized.toString());return t}(t);return new Qk(e,new Hk(t.size,new Qk("value",r)),!1,i)}function hj(e,t,n){return Aj(e,t,n?fj(n.metadata):void 0)}function fj(e){const t=new Map;for(const n in e)t.set("".concat(n,".string"),JSON.stringify(e[n]));return t}const pj={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},gj={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class mj{constructor(e){pt(this,"draco",void 0),pt(this,"decoder",void 0),pt(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new this.draco.DecoderBuffer;n.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(n),i=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let e;switch(r){case this.draco.TRIANGULAR_MESH:e=this.decoder.DecodeBufferToMesh(n,i);break;case this.draco.POINT_CLOUD:e=this.decoder.DecodeBufferToPointCloud(n,i);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!e.ok()||!i.ptr){const t="DRACO decompression failed: ".concat(e.error_msg());throw new Error(t)}const o=this._getDracoLoaderData(i,r,t),s=this._getMeshData(i,o,t),a=rk(s.attributes),l=function(e,t,n){const r=fj(t.metadata),i=[],o=function(e){const t={};for(const n in e){const r=e[n];t[r.name||"undefined"]=r}return t}(t.attributes);for(const s in e){const t=hj(s,e[s],o[s]);i.push(t)}if(n){const e=hj("indices",n);i.push(e)}return new yk(i,r)}(s.attributes,o,s.indices);return{loader:"draco",loaderData:o,header:{vertexCount:i.num_points(),boundingBox:a},...s,schema:l}}finally{this.draco.destroy(n),i&&this.draco.destroy(i)}}_getDracoLoaderData(e,t,n){const r=this._getTopLevelMetadata(e),i=this._getDracoAttributes(e,n);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:i}}_getDracoAttributes(e,t){const n={};for(let r=0;r<e.num_attributes();r++){const i=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);n[i.unique_id()]={unique_id:i.unique_id(),attribute_type:i.attribute_type(),data_type:i.data_type(),num_components:i.num_components(),byte_offset:i.byte_offset(),byte_stride:i.byte_stride(),normalized:i.normalized(),attribute_index:r,metadata:o};const s=this._getQuantizationTransform(i,t);s&&(n[i.unique_id()].quantization_transform=s);const a=this._getOctahedronTransform(i,t);a&&(n[i.unique_id()].octahedron_transform=a)}return n}_getMeshData(e,t,n){const r=this._getMeshAttributes(t,e,n);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===n.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,n){const r={};for(const i of Object.values(e.attributes)){const e=this._deduceAttributeName(i,n);i.name=e;const{value:o,size:s}=this._getAttributeValues(t,i);r[e]={value:o,size:s,byteOffset:i.byte_offset,byteStride:i.byte_stride,normalized:i.normalized}}return r}_getTriangleListIndices(e){const t=3*e.num_faces(),n=4*t,r=this.draco._malloc(n);try{return this.decoder.GetTrianglesUInt32Array(e,n,r),new Uint32Array(this.draco.HEAPF32.buffer,r,t).slice()}finally{this.draco._free(r)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function(e){const t=e.size(),n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=e.GetValue(r);return n}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const n=gj[t.data_type],r=t.num_components,i=e.num_points()*r,o=i*n.BYTES_PER_ELEMENT,s=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32;default:return e.DT_INVALID}}(this.draco,n);let a;const l=this.draco._malloc(o);try{const r=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,r,s,o,l),a=new n(this.draco.HEAPF32.buffer,l,i).slice()}finally{this.draco._free(l)}return{value:a,size:r}}_deduceAttributeName(e,t){const n=e.unique_id;for(const[o,s]of Object.entries(t.extraAttributes||{}))if(s===n)return o;const r=e.attribute_type;for(const o in pj){if(this.draco[o]===r)return pj[o]}const i=t.attributeNameEntry||"name";return e.metadata[i]?e.metadata[i].string:"CUSTOM_ATTRIBUTE_".concat(n)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const n=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(n)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},n=this.metadataQuerier.NumEntries(e);for(let r=0;r<n;r++){const n=this.metadataQuerier.GetEntryName(e,r);t[n]=this._getDracoMetadataField(e,n)}return t}_getDracoMetadataField(e,t){const n=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,n);const r=function(e){const t=e.size(),n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=e.GetValue(r);return n}(n);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(n)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:n=[]}=e,r=[...t,...n];for(const i of r)this.decoder.SkipAttributeTransform(this.draco[i])}_getQuantizationTransform(e,t){const{quantizedAttributes:n=[]}=t,r=e.attribute_type();if(n.map((e=>this.decoder[e])).includes(r)){const t=new this.draco.AttributeQuantizationTransform;try{if(t.InitFromAttribute(e))return{quantization_bits:t.quantization_bits(),range:t.range(),min_values:new Float32Array([1,2,3]).map((e=>t.min_value(e)))}}finally{this.draco.destroy(t)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:n=[]}=t,r=e.attribute_type();if(n.map((e=>this.decoder[e])).includes(r)){const t=new this.draco.AttributeQuantizationTransform;try{if(t.InitFromAttribute(e))return{quantization_bits:t.quantization_bits()}}finally{this.draco.destroy(t)}}return null}}const vj="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),bj="".concat(vj,"/draco_decoder.js"),yj="".concat(vj,"/draco_wasm_wrapper.js"),xj="".concat(vj,"/draco_decoder.wasm");"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");let wj;async function _j(e){const t=e.modules||{};return wj=t.draco3d?wj||t.draco3d.createDecoderModule({}).then((e=>({draco:e}))):wj||async function(e){let t,n;if("js"===(e.draco&&e.draco.decoderType))t=await UN(bj,"draco",e);else[t,n]=await Promise.all([await UN(yj,"draco",e),await UN(xj,"draco",e)]);return t=t||globalThis.DracoDecoderModule,await function(e,t){const n={};t&&(n.wasmBinary=t);return new Promise((t=>{e({...n,onModuleLoaded:e=>t({draco:e})})}))}(t,n)}(e),await wj}const Sj={...dj,parse:async function(e,t){const{draco:n}=await _j(t),r=new mj(n);try{return r.parseSync(e,null===t||void 0===t?void 0:t.draco)}finally{r.destroy()}}};function Cj(e){const{buffer:t,size:n,count:r}=function(e){let t=e,n=1,r=0;e&&e.value&&(t=e.value,n=e.size||1);t&&(ArrayBuffer.isView(t)||(t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;if(Array.isArray(e))return new t(e);if(n&&!(e instanceof t))return new t(e);return e}(t,Float32Array)),r=t.length/n);return{buffer:t,size:n,count:r}}(e);return{value:t,size:n,byteOffset:0,count:r,type:Dz(n),componentType:Fz(t)}}const Ej="KHR_draco_mesh_compression",Mj=Ej;function Pj(e,t,n){const r=new jz(e);for(const i of Ij(r))r.getObjectExtension(i,Ej)}async function Tj(e,t,n){var r;if(null===t||void 0===t||null===(r=t.gltf)||void 0===r||!r.decompressMeshes)return;const i=new jz(e),o=[];for(const s of Ij(i))i.getObjectExtension(s,Ej)&&o.push(Bj(i,s,t,n));await Promise.all(o),i.removeExtension(Ej)}function kj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new jz(e);for(const r of n.json.meshes||[])Oj(r,t),n.addRequiredExtension(Ej)}async function Bj(e,t,n,r){const i=e.getObjectExtension(t,Ej);if(!i)return;const o=e.getTypedArrayForBufferView(i.bufferView),s=Xg(o.buffer,o.byteOffset),{parse:a}=r,l={...n};delete l["3d-tiles"];const c=await a(s,Sj,l,r),u=function(e){const t={};for(const n in e){const r=e[n];if("indices"!==n){const e=Cj(r);t[n]=e}}return t}(c.attributes);for(const[d,A]of Object.entries(u))if(d in t.attributes){const n=t.attributes[d],r=e.getAccessor(n);null!==r&&void 0!==r&&r.min&&null!==r&&void 0!==r&&r.max&&(A.min=r.min,A.max=r.max)}t.attributes=u,c.indices&&(t.indices=Cj(c.indices)),function(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(t)}function Oj(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=i.DracoWriter.encodeSync({attributes:e}),a=null===o||void 0===o||null===(n=o.parseSync)||void 0===n?void 0:n.call(o,{attributes:e}),l=i._addFauxAttributes(a.attributes),c=i.addBufferView(s);return{primitives:[{attributes:l,mode:r,extensions:{[Ej]:{bufferView:c,attributes:l}}}]}}function*Ij(e){for(const t of e.json.meshes||[])for(const e of t.primitives)yield e}const Rj={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Lj={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};const Dj="KHR_texture_transform",Fj=Dj,Nj=new qm,zj=new OI,jj=new OI;async function Uj(e,t){if(!new jz(e).getExtension(Dj))return;const n=e.json.materials||[];for(let r=0;r<n.length;r++)Gj(r,e)}function Gj(e,t){var n,r,i;const o=[],s=null===(n=t.json.materials)||void 0===n?void 0:n[e],a=null===s||void 0===s||null===(r=s.pbrMetallicRoughness)||void 0===r?void 0:r.baseColorTexture;a&&Vj(t,e,a,o);const l=null===s||void 0===s?void 0:s.emissiveTexture;l&&Vj(t,e,l,o);const c=null===s||void 0===s?void 0:s.normalTexture;c&&Vj(t,e,c,o);const u=null===s||void 0===s?void 0:s.occlusionTexture;u&&Vj(t,e,u,o);const d=null===s||void 0===s||null===(i=s.pbrMetallicRoughness)||void 0===i?void 0:i.metallicRoughnessTexture;d&&Vj(t,e,d,o)}function Vj(e,t,n,r){const i=function(e,t){var n;const r=null===(n=e.extensions)||void 0===n?void 0:n[Dj],{texCoord:i=0}=e,{texCoord:o=i}=r,s=-1!==t.findIndex((e=>{let[t,n]=e;return t===i&&n===o}));if(!s){const n=function(e){const{offset:t=[0,0],rotation:n=0,scale:r=[1,1]}=e,i=(new OI).set(1,0,0,0,1,0,t[0],t[1],1),o=zj.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),s=jj.set(r[0],0,0,0,r[1],0,0,0,1);return i.multiplyRight(o).multiplyRight(s)}(r);return i!==o&&(e.texCoord=o),t.push([i,o]),{originalTexCoord:i,texCoord:o,matrix:n}}return null}(n,r);if(!i)return;const o=e.json.meshes||[];for(const s of o)for(const n of s.primitives){const r=n.material;Number.isFinite(r)&&t===r&&Hj(e,n,i)}}function Hj(e,t,n){const{originalTexCoord:r,texCoord:i,matrix:o}=n,s=t.attributes["TEXCOORD_".concat(r)];if(Number.isFinite(s)){var a;const n=null===(a=e.json.accessors)||void 0===a?void 0:a[s];if(n&&n.bufferView){var l;const s=null===(l=e.json.bufferViews)||void 0===l?void 0:l[n.bufferView];if(s){const{arrayBuffer:a,byteOffset:l}=e.buffers[s.buffer],c=(l||0)+(n.byteOffset||0)+(s.byteOffset||0),{ArrayType:u,length:d}=Nz(n,s),A=Lj[n.componentType],h=Rj[n.type],f=s.byteStride||A*h,p=new Float32Array(d);for(let e=0;e<n.count;e++){const t=new u(a,c+e*f,2);Nj.set(t[0],t[1],1),Nj.transformByMatrix3(o),p.set([Nj[0],Nj[1]],e*h)}r===i?function(e,t,n,r){e.componentType=5126,n.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength}),t.buffer=n.length-1,t.byteLength=r.buffer.byteLength,t.byteOffset=0,delete t.byteStride}(n,s,e.buffers,p):function(e,t,n,r,i){r.buffers.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength});const o=r.json.bufferViews;if(!o)return;o.push({buffer:r.buffers.length-1,byteLength:i.buffer.byteLength,byteOffset:0});const s=r.json.accessors;if(!s)return;s.push({bufferView:(null===o||void 0===o?void 0:o.length)-1,byteOffset:0,componentType:5126,count:t.count,type:"VEC2"}),n.attributes["TEXCOORD_".concat(e)]=s.length-1}(i,n,t,e,p)}}}}const Wj="KHR_lights_punctual",Qj=Wj;async function Jj(e){const t=new jz(e),{json:n}=t,r=t.getExtension(Wj);r&&(t.json.lights=r.lights,t.removeExtension(Wj));for(const i of n.nodes||[]){const e=t.getObjectExtension(i,Wj);e&&(i.light=e.light),t.removeObjectExtension(i,Wj)}}async function Kj(e){const t=new jz(e),{json:n}=t;if(n.lights){const e=t.addExtension(Wj);Cz(!e.lights),e.lights=n.lights,delete n.lights}if(t.json.lights){for(const e of t.json.lights){const n=e.node;t.addObjectExtension(n,Wj,e)}delete t.json.lights}}const Xj="KHR_materials_unlit",Yj=Xj;async function qj(e){const t=new jz(e),{json:n}=t;for(const r of n.materials||[]){r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),t.removeObjectExtension(r,Xj)}t.removeExtension(Xj)}function Zj(e){const t=new jz(e),{json:n}=t;if(t.materials)for(const r of n.materials||[])r.unlit&&(delete r.unlit,t.addObjectExtension(r,Xj,{}),t.addExtension(Xj))}const $j="KHR_techniques_webgl",eU=$j;async function tU(e){const t=new jz(e),{json:n}=t,r=t.getExtension($j);if(r){const e=function(e,t){const{programs:n=[],shaders:r=[],techniques:i=[]}=e,o=new TextDecoder;return r.forEach((e=>{if(!Number.isFinite(e.bufferView))throw new Error("KHR_techniques_webgl: no shader code");e.code=o.decode(t.getTypedArrayForBufferView(e.bufferView))})),n.forEach((e=>{e.fragmentShader=r[e.fragmentShader],e.vertexShader=r[e.vertexShader]})),i.forEach((e=>{e.program=n[e.program]})),i}(r,t);for(const r of n.materials||[]){const n=t.getObjectExtension(r,$j);n&&(r.technique=Object.assign({},n,e[n.technique]),r.technique.values=rU(r.technique,t)),t.removeObjectExtension(r,$j)}t.removeExtension($j)}}async function nU(e,t){}function rU(e,t){const n=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach((t=>{e.uniforms[t].value&&!(t in n)&&(n[t]=e.uniforms[t].value)})),Object.keys(n).forEach((e=>{"object"===typeof n[e]&&void 0!==n[e].index&&(n[e].texture=t.getTexture(n[e].index))})),n}const iU="EXT_feature_metadata",oU=iU;async function sU(e){!function(e){var t;const n=e.getExtension(iU),r=null===n||void 0===n||null===(t=n.schema)||void 0===t?void 0:t.classes,i=null===n||void 0===n?void 0:n.featureTables;(null===n||void 0===n?void 0:n.featureTextures)&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.');if(r&&i)for(const o in r){const t=r[o],n=cU(i,o);n&&aU(e,n,t)}}(new jz(e))}function aU(e,t,n){for(const i in n.properties){var r;const o=n.properties[i],s=null===t||void 0===t||null===(r=t.properties)||void 0===r?void 0:r[i],a=t.count;if(s){const t=lU(e,o,a,s);s.data=t}}}function lU(e,t,n,r){const i=r.bufferView;let o=e.getTypedArrayForBufferView(i);switch(t.type){case"STRING":{const t=r.stringOffsetBufferView;o=function(e,t,n){const r=[],i=new TextDecoder("utf8");let o=0;const s=4;for(let a=0;a<n;a++){const n=t[(a+1)*s]-t[a*s],l=e.subarray(o,n+o),c=i.decode(l);r.push(c),o+=n}return r}(o,e.getTypedArrayForBufferView(t),n);break}}return o}function cU(e,t){for(const n in e){const r=e[n];if(r.class===t)return r}return null}const uU=[t,r,i,o,a,l,c,s,u];function dU(e,t){var n;const r=(null===t||void 0===t||null===(n=t.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(e in r&&!r[e])}const AU="KHR_binary_glTF";const hU={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},fU={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class pU{constructor(){pt(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),pt(this,"json",void 0)}normalize(e,t){this.json=e.json;const n=e.json;switch(n.asset&&n.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(n.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(n),this._convertTopLevelObjectsToArrays(n),function(e){const t=new jz(e),{json:n}=t;for(const r of n.images||[]){const e=t.getObjectExtension(r,AU);e&&Object.assign(r,e),t.removeObjectExtension(r,AU)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,t.removeExtension(AU)}(e),this._convertObjectIdsToArrayIndices(n),this._updateObjects(n),this._updateMaterial(n)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in hU)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const n=e[t];if(n&&!Array.isArray(n)){e[t]=[];for(const r in n){const i=n[r];i.id=i.id||r;const o=e[t].length;e[t].push(i),this.idToIndexMap[t][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in hU)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:e,indices:n,material:r}=t;for(const t in e)e[t]=this._convertIdToIndex(e[t],"accessor");n&&(t.indices=this._convertIdToIndex(n,"accessor")),r&&(t.material=this._convertIdToIndex(r,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map((e=>this._convertIdToIndex(e,"node")))),e.meshes&&(e.meshes=e.meshes.map((e=>this._convertIdToIndex(e,"mesh"))))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map((e=>this._convertIdToIndex(e,"node"))))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const n of e[t])for(const e in n){const t=n[e],r=this._convertIdToIndex(t,e);n[e]=r}}_convertIdToIndex(e,t){const n=fU[t];if(n in this.idToIndexMap){const r=this.idToIndexMap[n][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const i of e.materials){var t,n,r;i.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(t=i.values)||void 0===t?void 0:t.tex)||(null===(n=i.values)||void 0===n?void 0:n.texture2d_0)||(null===(r=i.values)||void 0===r?void 0:r.diffuseTex),s=e.textures.findIndex((e=>e.id===o));-1!==s&&(i.pbrMetallicRoughness.baseColorTexture={index:s})}}}const gU={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mU={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},vU=10240,bU=10241,yU=10242,xU=10243,wU=10497,_U=9729,SU=9986,CU={magFilter:vU,minFilter:bU,wrapS:yU,wrapT:xU},EU={[vU]:_U,[bU]:SU,[yU]:wU,[xU]:wU};class MU{constructor(){pt(this,"baseUri",""),pt(this,"json",{}),pt(this,"buffers",[]),pt(this,"images",[])}postProcess(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{json:n,buffers:r=[],images:i=[],baseUri:o=""}=e;return Cz(n),this.baseUri=o,this.json=n,this.buffers=r,this.images=i,this._resolveTree(this.json,t),this.json}_resolveTree(e){e.bufferViews&&(e.bufferViews=e.bufferViews.map(((e,t)=>this._resolveBufferView(e,t)))),e.images&&(e.images=e.images.map(((e,t)=>this._resolveImage(e,t)))),e.samplers&&(e.samplers=e.samplers.map(((e,t)=>this._resolveSampler(e,t)))),e.textures&&(e.textures=e.textures.map(((e,t)=>this._resolveTexture(e,t)))),e.accessors&&(e.accessors=e.accessors.map(((e,t)=>this._resolveAccessor(e,t)))),e.materials&&(e.materials=e.materials.map(((e,t)=>this._resolveMaterial(e,t)))),e.meshes&&(e.meshes=e.meshes.map(((e,t)=>this._resolveMesh(e,t)))),e.nodes&&(e.nodes=e.nodes.map(((e,t)=>this._resolveNode(e,t)))),e.skins&&(e.skins=e.skins.map(((e,t)=>this._resolveSkin(e,t)))),e.scenes&&(e.scenes=e.scenes.map(((e,t)=>this._resolveScene(e,t)))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"===typeof t)return t;const n=this.json[e]&&this.json[e][t];return n||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),n}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map((e=>this.getNode(e))),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map((e=>this.getNode(e)))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce(((e,t)=>{const n=this.getMesh(t);return e.id=n.id,e.primitives=e.primitives.concat(n.primitives),e}),{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map((e=>{const t=(e={...e}).attributes;e.attributes={};for(const n in t)e.attributes[n]=this.getAccessor(t[n]);return void 0!==e.indices&&(e.indices=this.getAccessor(e.indices)),void 0!==e.material&&(e.material=this.getMaterial(e.material)),e}))),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const t=e.pbrMetallicRoughness;t.baseColorTexture&&(t.baseColorTexture={...t.baseColorTexture},t.baseColorTexture.texture=this.getTexture(t.baseColorTexture.index)),t.metallicRoughnessTexture&&(t.metallicRoughnessTexture={...t.metallicRoughnessTexture},t.metallicRoughnessTexture.texture=this.getTexture(t.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){var n,r;if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=(n=e.componentType,mU[n]),e.components=(r=e.type,gU[r]),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const t=e.bufferView.buffer,{ArrayType:n,byteLength:r}=Nz(e,e.bufferView),i=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+t.byteOffset;let o=t.arrayBuffer.slice(i,i+r);e.bufferView.byteStride&&(o=this._getValueFromInterleavedBuffer(t,i,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new n(o)}return e}_getValueFromInterleavedBuffer(e,t,n,r,i){const o=new Uint8Array(i*r);for(let s=0;s<i;s++){const i=t+s*n;o.set(new Uint8Array(e.arrayBuffer.slice(i,i+r)),s*r)}return o.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):EU,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const n in e){const t=this._enumSamplerParameter(n);void 0!==t&&(e.parameters[t]=e[n])}return e}_enumSamplerParameter(e){return CU[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const n=this.images[t];return n&&(e.image=n),e}_resolveBufferView(e,t){const n=e.buffer,r={id:"bufferView-".concat(t),...e,buffer:this.buffers[n]},i=this.buffers[n].arrayBuffer;let o=this.buffers[n].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(i,o,e.byteLength),r}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e.perspective,e.orthographic,e}}const PU=1735152710,TU=12,kU=8,BU=1313821514,OU=5130562,IU=0,RU=1,LU=0,DU=!0;function FU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=new DataView(t),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(e.getUint8(t+0))).concat(String.fromCharCode(e.getUint8(t+1))).concat(String.fromCharCode(e.getUint8(t+2))).concat(String.fromCharCode(e.getUint8(t+3)))}(i,n+0),s=i.getUint32(n+4,DU),a=i.getUint32(n+8,DU);switch(Object.assign(e,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),n+=TU,e.version){case 1:return function(e,t,n){Zp(e.header.byteLength>TU+kU);const r=t.getUint32(n+0,DU),i=t.getUint32(n+4,DU);return n+=kU,Zp(i===LU),NU(e,t,n,r),n+=r,n+=zU(e,t,n,e.header.byteLength),n}(e,i,n);case 2:return function(e,t,n,r){return Zp(e.header.byteLength>TU+kU),function(e,t,n,r){for(;n+8<=e.header.byteLength;){const i=t.getUint32(n+0,DU),o=t.getUint32(n+4,DU);switch(n+=kU,o){case BU:NU(e,t,n,i);break;case OU:zU(e,t,n,i);break;case IU:r.strict||NU(e,t,n,i);break;case RU:r.strict||zU(e,t,n,i)}n+=Pz(i,4)}}(e,t,n,r),n+e.header.byteLength}(e,i,n,r={});default:throw new Error("Invalid GLB version ".concat(e.version,". Only supports v1 and v2."))}}function NU(e,t,n,r){const i=new Uint8Array(t.buffer,n,r),o=new TextDecoder("utf8").decode(i);return e.json=JSON.parse(o),Pz(r,4)}function zU(e,t,n,r){return e.header.hasBinChunk=!0,e.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:t.buffer}),Pz(r,4)}async function jU(e,t){var n,r,i,o;let s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;!function(e,t,n,r){r.uri&&(e.baseUri=r.uri);if(t instanceof ArrayBuffer&&!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new DataView(e),{magic:i=PU}=n,o=r.getUint32(t,!1);return o===i||o===PU}(t,n,r)){t=(new TextDecoder).decode(t)}if("string"===typeof t)e.json=Sz(t);else if(t instanceof ArrayBuffer){const i={};n=FU(i,t,n,r.glb),Cz("glTF"===i.type,"Invalid GLB magic string ".concat(i.type)),e._glb=i,e.json=i.json}else Cz(!1,"GLTF: must be ArrayBuffer or string");const i=e.json.buffers||[];if(e.buffers=new Array(i.length).fill(null),e._glb&&e._glb.header.hasBinChunk){const{binChunks:t}=e._glb;e.buffers[0]={arrayBuffer:t[0].arrayBuffer,byteOffset:t[0].byteOffset,byteLength:t[0].byteLength}}const o=e.json.images||[];e.images=new Array(o.length).fill({})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(new pU).normalize(e,t)}(e,{normalize:null===s||void 0===s||null===(n=s.gltf)||void 0===n?void 0:n.normalize}),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=uU.filter((e=>dU(e.name,t)));for(const o of r){var i;null===(i=o.preprocess)||void 0===i||i.call(o,e,t,n)}}(e,s,a);const l=[];if(null!==s&&void 0!==s&&null!==(r=s.gltf)&&void 0!==r&&r.loadBuffers&&e.json.buffers&&await async function(e,t,n){const r=e.json.buffers||[];for(let s=0;s<r.length;++s){const a=r[s];if(a.uri){var i,o;const{fetch:r}=n;Cz(r);const l=Ez(a.uri,t),c=await(null===n||void 0===n||null===(i=n.fetch)||void 0===i?void 0:i.call(n,l)),u=await(null===c||void 0===c||null===(o=c.arrayBuffer)||void 0===o?void 0:o.call(c));e.buffers[s]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete a.uri}else null===e.buffers[s]&&(e.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}(e,s,a),null!==s&&void 0!==s&&null!==(i=s.gltf)&&void 0!==i&&i.loadImages){const t=async function(e,t,n){const r=function(e){const t=new Set,n=e.json.textures||[];for(const r of n)void 0!==r.source&&t.add(r.source);return Array.from(t).sort()}(e),i=e.json.images||[],o=[];for(const s of r)o.push(UU(e,i[s],s,t,n));return await Promise.all(o)}(e,s,a);l.push(t)}const c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=uU.filter((e=>dU(e.name,t)));for(const o of r){var i;await(null===(i=o.decode)||void 0===i?void 0:i.call(o,e,t,n))}}(e,s,a);return l.push(c),await Promise.all(l),null!==s&&void 0!==s&&null!==(o=s.gltf)&&void 0!==o&&o.postProcess?function(e,t){return(new MU).postProcess(e,t)}(e,s):e}async function UU(e,t,n,r,i){const{fetch:o,parse:s}=i;let a;if(t.uri&&!t.hasOwnProperty("bufferView")){const e=Ez(t.uri,r),n=await o(e);a=await n.arrayBuffer(),t.bufferView={data:a}}if(Number.isFinite(t.bufferView)){const n=Mz(e.json,e.buffers,t.bufferView);a=Xg(n.buffer,n.byteOffset,n.byteLength)}Cz(a,"glTF image has no data");let l=await s(a,[lE,wz],{mimeType:t.mimeType,basis:r.basis||{format:yz()}},i);l&&l[0]&&(l={compressed:!0,mipmaps:!1,width:l[0].width,height:l[0].height,data:l[0]}),e.images=e.images||[],e.images[n]=l}const GU={name:"glTF",id:"gltf",module:"gltf",version:"3.4.15",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;t={...GU.options,...t},t.gltf={...GU.options.gltf,...t.gltf};const{byteOffset:r=0}=t;return await jU({},e,r,t,n)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};async function VU(e){const t=[];return e.scenes.forEach((e=>{e.traverse((e=>{Object.values(e.model.getUniforms()).forEach((e=>{!1===e.loaded&&t.push(e)}))}))})),await async function(e){for(;e();)await new Promise((e=>requestAnimationFrame(e)))}((()=>t.some((e=>!e.loaded))))}const HU=[255,255,255,255],WU={scenegraph:{type:"object",value:null,async:!0},getScene:e=>e&&e.scenes?"object"===typeof e.scene?e.scene:e.scenes[e.scene||0]:e,getAnimator:e=>e&&e.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:HU},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[GU]};class QU extends qP{constructor(){super(...arguments),pt(this,"state",void 0)}getShaders(){const e=[LT,JT];return"pbr"===this.props._lighting&&e.push(vN),super.getShaders({vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    geometry.normal = project_normal(normal);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:HU,transition:!0},instanceModelMatrix:tk})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;t.scenegraph!==n.scenegraph?this._updateScenegraph():t._animations!==n._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}get isLoaded(){var e;return(null===(e=this.state)||void 0===e?void 0:e.scenegraph)&&super.isLoaded}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let n=null;if(e.scenegraph instanceof bN)n={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const r=e.scenegraph,i=function(e,t,n){const r=new RN(e,n);return{scenes:r.instantiate(t),animator:r.createAnimator()}}(t,r,this._getModelOptions());n={gltf:r,...i},VU(i).then((()=>this.setNeedsRedraw()))}else e.scenegraph&&(Op.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),n=e.scenegraph);const r={layer:this,gl:t},i=e.getScene(n,r),o=e.getAnimator(n,r);i instanceof bN?(this._deleteScenegraph(),this._applyAllAttributes(i),this._applyAnimationsProp(i,o,e._animations),this.setState({scenegraph:i,animator:o})):null!==i&&Op.warn("invalid scenegraph:",i)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse((e=>{this._setModelAttributes(e.model,t)}))}}_applyAnimationsProp(e,t,n){if(!e||!t||!n)return;const r=t.getAnimations();Object.keys(n).sort().forEach((e=>{const t=n[e];if("*"===e)r.forEach((e=>{Object.assign(e,t)}));else if(Number.isFinite(Number(e))){const n=Number(e);n>=0&&n<r.length?Object.assign(r[n],t):Op.warn("animation ".concat(e," not found"))()}else{const n=r.find((t=>{let{name:n}=t;return n===e}));n?Object.assign(n,t):Op.warn("animation ".concat(e," not found"))()}}))}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof bN&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"===typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!my(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse((t=>{this._setModelAttributes(t.model,e)}))}draw(e){let{moduleParameters:t=null,parameters:n={},context:r}=e;if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());const{viewport:i}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:l,coordinateSystem:c}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse(((e,r)=>{let{worldMatrix:d}=r;e.model.setInstanceCount(u),e.updateModuleSettings(t),e.draw({parameters:n,uniforms:{sizeScale:o,opacity:l,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:nk(i,c),sceneModelMatrix:d,u_Camera:e.model.getUniforms().project_uCameraPosition}})}))}}pt(QU,"defaultProps",WU),pt(QU,"layerName","ScenegraphLayer");var JU=function(e){var t,n="undefined"!==typeof(e=e||{})?e:{},r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);var i,o=[],s="";document.currentScript&&(s=document.currentScript.src),s=0!==s.indexOf("blob:")?s.substr(0,s.lastIndexOf("/")+1):"",i=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var i=X(e);i?t(i.buffer):n()}},r.onerror=n,r.send(null)};var a=n.print||console.log.bind(console),l=n.printErr||console.warn.bind(console);for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);r=null,n.arguments&&(o=n.arguments);var c=0,u=function(){return c};var d=!1;function A(e){var t,r=n["_"+e];return t="Cannot call unknown function "+e+", make sure it is exported",r||ce("Assertion failed: "+t),r}function h(e,t,n,r,i){var o={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s);if(a<=127){if(n>=o)break;t[n++]=a}else if(a<=2047){if(n+1>=o)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=o)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=o)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}t[n]=0})(e,v,t,n)})(e,t=te(n),n)}return t},array:function(e){var t=te(e.length);return function(e,t){m.set(e,t)}(e,t),t}};var s=A(e),a=[],l=0;if(r)for(var c=0;c<r.length;c++){var u=o[n[c]];u?(0===l&&(l=re()),a[c]=u(r[c])):a[c]=r[c]}var d=s.apply(null,a);return d=function(e){return"string"===t?p(e):"boolean"===t?Boolean(e):e}(d),0!==l&&ne(l),d}var f="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function p(e,t){return e?function(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&f)return f.decode(e.subarray(t,i));for(var o="";t<i;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|l:(7&s)<<18|a<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(s);else{var c=s-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}(v,e,t):""}var g,m,v,b,y,x,w;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function _(e,t){return e%t>0&&(e+=t-e%t),e}function S(e){g=e,n.HEAP8=m=new Int8Array(e),n.HEAP16=b=new Int16Array(e),n.HEAP32=y=new Int32Array(e),n.HEAPU8=v=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=x=new Float32Array(e),n.HEAPF64=w=new Float64Array(e)}var C=n.TOTAL_MEMORY||33554432;function E(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"===typeof r?void 0===t.arg?n.dynCall_v(r):n.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}C=(g=n.buffer?n.buffer:new ArrayBuffer(C)).byteLength,S(g),y[6004]=5266928;var M=[],P=[],T=[],k=[];var B=Math.abs,O=Math.ceil,I=Math.floor,R=Math.min,L=0,D=null,F=null;n.preloadedImages={},n.preloadedAudios={};var N,z,j=null,U="data:application/octet-stream;base64,";function G(e){return String.prototype.startsWith?e.startsWith(U):0===e.indexOf(U)}j="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";function V(e){return e}function H(e){return e.replace(/\b__Z[\w\d_]+/g,(function(e){return e===e?e:e+" ["+e+"]"}))}function W(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function Q(){return m.length}function J(e){try{var t=new ArrayBuffer(e);if(t.byteLength!=e)return;return new Int8Array(t).set(m),ee(t),S(t),1}catch(n){}}var K="function"===typeof atob?atob:function(e){var t,n,r,i,o,s,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=a.indexOf(e.charAt(c++))<<2|(i=a.indexOf(e.charAt(c++)))>>4,n=(15&i)<<4|(o=a.indexOf(e.charAt(c++)))>>2,r=(3&o)<<6|(s=a.indexOf(e.charAt(c++))),l+=String.fromCharCode(t),64!==o&&(l+=String.fromCharCode(n)),64!==s&&(l+=String.fromCharCode(r))}while(c<e.length);return l};function X(e){if(G(e))return function(e){try{for(var t=K(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(ke){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(U.length))}var Y,q,Z={a:ce,b:function(e){c=e},c:u,d:function(e,t,n,r){ce("Assertion failed: "+p(e)+", at: "+[t?p(t):"unknown filename",n,r?p(r):"unknown function"])},e:function(e){return n.___errno_location&&(y[n.___errno_location()>>2]=e),e},f:Q,g:function(e,t,n){v.set(v.subarray(t,t+n),e)},h:function(e){var t=Q(),n=16777216,r=2130706432;if(e>r)return!1;for(var i=Math.max(t,16777216);i<e;)i=i<=536870912?_(2*i,n):Math.min(_((3*i+2147483648)/4,n),r);return!!J(i)},i:function(e){ce("OOM")},j:V,k:H,l:J,m:W,n:function(){var e=W();return n.extraStackTrace&&(e+="\n"+n.extraStackTrace()),H(e)},o:24032,p:24016},$=function(e,t,n){var r=new e.Int8Array(n),i=new e.Int32Array(n),o=(new e.Uint8Array(n),new e.Float32Array(n),new e.Float64Array(n)),s=0|t.p,a=e.Math.floor,l=e.Math.abs,c=e.Math.sqrt,u=e.Math.pow,d=e.Math.cos,A=e.Math.sin,h=e.Math.tan,f=e.Math.acos,p=e.Math.asin,g=e.Math.atan,m=e.Math.atan2,v=e.Math.ceil,b=e.Math.imul,y=e.Math.min,x=e.Math.clz32,w=t.b,_=t.c,S=t.d,C=t.e,E=t.f,M=t.g,P=t.h,T=t.i,k=24048;function B(e,t,n,r){var i,o;0|O(e|=0,t|=0,n|=0,r|=0,0)&&(Tt(0|r,0,(o=1+(0|b(3*n|0,n+1|0))|0)<<3),(i=0|bt(o,4))&&(I(e,t,n,r,i,o,0),vt(i)))}function O(e,t,n,r,o){e|=0,t|=0,n|=0,o|=0;var s,a=0,l=0,c=0,u=0,d=0,A=0,h=0,f=0;if(s=k,k=k+16|0,f=s,i[(a=r|=0)>>2]=e,i[a+4>>2]=t,(a=0!=(0|o))&&(i[o>>2]=0),0|Re(e,t))return k=s,0|(f=1);i[f>>2]=0;e:do{if((0|n)>=1)if(a)for(d=0,A=1,h=1,l=0,a=e;;){if(!(l|d)){if(0==(0|(a=0|R(a,t,4,f)))&0==(0|(t=0|_()))){a=2;break e}if(0|Re(a,t)){a=1;break e}}if(0==(0|(a=0|R(a,t,0|i[16+(d<<2)>>2],f)))&0==(0|(t=0|_()))){a=2;break e}if(i[(e=r+(h<<3)|0)>>2]=a,i[e+4>>2]=t,i[o+(h<<2)>>2]=A,e=(0|(l=l+1|0))==(0|A),u=6==(0|(c=d+1|0)),0|Re(a,t)){a=1;break e}if((0|(A=A+(u&e&1)|0))>(0|n)){a=0;break}d=e?u?0:c:d,h=h+1|0,l=e?0:l}else for(d=0,A=1,h=1,l=0,a=e;;){if(!(l|d)){if(0==(0|(a=0|R(a,t,4,f)))&0==(0|(t=0|_()))){a=2;break e}if(0|Re(a,t)){a=1;break e}}if(0==(0|(a=0|R(a,t,0|i[16+(d<<2)>>2],f)))&0==(0|(t=0|_()))){a=2;break e}if(i[(e=r+(h<<3)|0)>>2]=a,i[e+4>>2]=t,e=(0|(l=l+1|0))==(0|A),u=6==(0|(c=d+1|0)),0|Re(a,t)){a=1;break e}if((0|(A=A+(u&e&1)|0))>(0|n)){a=0;break}d=e?u?0:c:d,h=h+1|0,l=e?0:l}else a=0}while(0);return k=s,0|(f=a)}function I(e,t,n,r,o,s,a){n|=0,r|=0,o|=0,s|=0,a|=0;var l,c,u=0,d=0,A=0,h=0,f=0;if(c=k,k=k+16|0,l=c,0==(0|(e|=0))&0==(0|(t|=0)))k=c;else{if(u=0|_t(0|e,0|t,0|s,((0|s)<0)<<31>>31),_(),!(0==(0|(f=0|i[(h=d=r+(u<<3)|0)>>2]))&0==(0|(h=0|i[h+4>>2]))|(A=(0|f)==(0|e)&(0|h)==(0|t))))do{A=(0|(h=0|i[(f=d=r+((u=(u+1|0)%(0|s)|0)<<3)|0)>>2]))==(0|e)&(0|(f=0|i[f+4>>2]))==(0|t)}while(!(0==(0|h)&0==(0|f)|A));u=o+(u<<2)|0,A&&(0|i[u>>2])<=(0|a)||(i[(f=d)>>2]=e,i[f+4>>2]=t,i[u>>2]=a,(0|a)>=(0|n)||(f=a+1|0,i[l>>2]=0,I(h=0|R(e,t,2,l),0|_(),n,r,o,s,f),i[l>>2]=0,I(h=0|R(e,t,3,l),0|_(),n,r,o,s,f),i[l>>2]=0,I(h=0|R(e,t,1,l),0|_(),n,r,o,s,f),i[l>>2]=0,I(h=0|R(e,t,5,l),0|_(),n,r,o,s,f),i[l>>2]=0,I(h=0|R(e,t,4,l),0|_(),n,r,o,s,f),i[l>>2]=0,I(h=0|R(e,t,6,l),0|_(),n,r,o,s,f))),k=c}}function R(e,t,n,r){e|=0,t|=0,n|=0;var o,s,a=0,l=0,c=0,u=0,d=0,A=0,h=0;if((0|i[(r|=0)>>2])>0){a=0;do{n=0|le(n),a=a+1|0}while((0|a)<(0|i[r>>2]))}o=0|St(0|e,0|t,45),_(),s=127&o,l=0|Le(e,t),a=0|St(0|e,0|t,52),_(),a&=15;e:do{if(a)for(;;){if(A=0|St(0|e,0|t,0|(d=3*(15-a|0)|0)),_(),A&=7,h=0==(0|je(a)),a=a+-1|0,u=0|Ct(7,0,0|d),t&=~_(),e=(d=0|Ct(0|i[(h?464:48)+(28*A|0)+(n<<2)>>2],0,0|d))|e&~u,t|=0|_(),!(n=0|i[(h?672:256)+(28*A|0)+(n<<2)>>2])){n=0;break e}if(!a){c=6;break}}else c=6}while(0);6==(0|c)&&(e|=A=0|Ct(0|(h=0|i[880+(28*s|0)+(n<<2)>>2]),0,45),t=_()|-1040385&t,n=0|i[4304+(28*s|0)+(n<<2)>>2],127==(127&h)&&(h=0|Ct(0|i[880+(28*s|0)+20>>2],0,45),t=_()|-1040385&t,n=0|i[4304+(28*s|0)+20>>2],e=0|Fe(h|e,t),t=0|_(),i[r>>2]=1+(0|i[r>>2]))),c=0|St(0|e,0|t,45),_(),c&=127;e:do{if(0|D(c)){t:do{if(1==(0|Le(e,t))){if((0|s)!=(0|c)){if(0|j(c,0|i[7728+(28*s|0)>>2])){e=0|ze(e,t),l=1,t=0|_();break}e=0|Fe(e,t),l=1,t=0|_();break}switch(0|l){case 5:e=0|ze(e,t),t=0|_(),i[r>>2]=5+(0|i[r>>2]),l=0;break t;case 3:e=0|Fe(e,t),t=0|_(),i[r>>2]=1+(0|i[r>>2]),l=0;break t;default:return h=0,w(0|(A=0)),0|h}}else l=0}while(0);if((0|n)>0){a=0;do{e=0|De(e,t),t=0|_(),a=a+1|0}while((0|a)!=(0|n))}if((0|s)!=(0|c)){if(!(0|F(c))){if(0!=(0|l)|5!=(0|Le(e,t)))break;i[r>>2]=1+(0|i[r>>2]);break}switch(127&o){case 8:case 118:break e}3!=(0|Le(e,t))&&(i[r>>2]=1+(0|i[r>>2]))}}else if((0|n)>0){a=0;do{e=0|Fe(e,t),t=0|_(),a=a+1|0}while((0|a)!=(0|n))}}while(0);return i[r>>2]=((0|i[r>>2])+n|0)%6|0,h=e,w(0|(A=t)),0|h}function L(e,t,n,r,s,a){t|=0,n|=0,r|=0,s|=0,a|=0;var l,c,u,d,A,h,f,p,g,m=0,v=0,b=0,y=0,x=0,w=0,S=0,C=0,E=0,M=0,P=0,T=0,B=0,O=0;if(g=k,k=k+48|0,h=g+32|0,f=g+16|0,p=g,(0|(m=0|i[(e|=0)>>2]))<=0)return k=g,0|(T=0);l=e+4|0,c=h+8|0,u=f+8|0,d=p+8|0,A=((0|t)<0)<<31>>31,P=0;e:for(;;){E=(v=0|i[l>>2])+(P<<4)|0,i[h>>2]=i[E>>2],i[h+4>>2]=i[E+4>>2],i[h+8>>2]=i[E+8>>2],i[h+12>>2]=i[E+12>>2],(0|P)==(m+-1|0)?(i[f>>2]=i[v>>2],i[f+4>>2]=i[v+4>>2],i[f+8>>2]=i[v+8>>2],i[f+12>>2]=i[v+12>>2]):(E=v+(P+1<<4)|0,i[f>>2]=i[E>>2],i[f+4>>2]=i[E+4>>2],i[f+8>>2]=i[E+8>>2],i[f+12>>2]=i[E+12>>2]),E=0|Q(h,f,n);t:do{if((0|E)>0){M=+(0|E),C=0;n:for(;;){O=+(E-C|0),B=+(0|C),o[p>>3]=+o[h>>3]*O/M+ +o[f>>3]*B/M,o[d>>3]=+o[c>>3]*O/M+ +o[u>>3]*B/M,v=0|_t(0|(w=0|Ue(p,n)),0|(S=0|_()),0|t,0|A),_(),y=0|i[(b=m=a+(v<<3)|0)>>2],b=0|i[b+4>>2];r:do{if(0==(0|y)&0==(0|b))T=14;else for(x=0;;){if((0|x)>(0|t)){m=1;break r}if((0|y)==(0|w)&(0|b)==(0|S)){m=7;break r}if(0==(0|(y=0|i[(b=m=a+((v=(v+1|0)%(0|t)|0)<<3)|0)>>2]))&0==(0|(b=0|i[b+4>>2]))){T=14;break}x=x+1|0}}while(0);switch(14==(0|T)&&(T=0,0==(0|w)&0==(0|S)?m=7:(i[m>>2]=w,i[m+4>>2]=S,m=0|i[r>>2],i[(x=s+(m<<3)|0)>>2]=w,i[x+4>>2]=S,i[r>>2]=m+1,m=0)),7&m){case 7:case 0:break;default:break n}if((0|E)<=(0|(C=C+1|0))){T=8;break t}}if(0|m){m=-1,T=20;break e}}else T=8}while(0);if(8==(0|T)&&(T=0),(0|(P=P+1|0))>=(0|(m=0|i[e>>2]))){m=0,T=20;break}}return 20==(0|T)?(k=g,0|m):0}function D(e){return 0|i[7728+(28*(e|=0)|0)+16>>2]}function F(e){return 4==(0|(e|=0))|117==(0|e)}function N(e){return 0|i[11152+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)>>2]}function z(e){return 0|i[11152+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)+4>>2]}function j(e,t){return t|=0,(0|i[7728+(28*(e|=0)|0)+20>>2])==(0|t)?0|(t=1):0|(t=(0|i[7728+(28*e|0)+24>>2])==(0|t))}function U(e,t){return 0|i[880+(28*(e|=0)|0)+((t|=0)<<2)>>2]}function G(e,t){return t|=0,(0|i[880+(28*(e|=0)|0)>>2])==(0|t)?0|(t=0):(0|i[880+(28*e|0)+4>>2])==(0|t)?0|(t=1):(0|i[880+(28*e|0)+8>>2])==(0|t)?0|(t=2):(0|i[880+(28*e|0)+12>>2])==(0|t)?0|(t=3):(0|i[880+(28*e|0)+16>>2])==(0|t)?0|(t=4):(0|i[880+(28*e|0)+20>>2])==(0|t)?0|(t=5):0|((0|i[880+(28*e|0)+24>>2])==(0|t)?6:7)}function V(e){return+o[(e|=0)+16>>3]<+o[e+24>>3]|0}function H(e,t){e|=0;var n,r,i=0;return(i=+o[(t|=0)>>3])>=+o[e+8>>3]&&i<=+o[e>>3]?(n=+o[e+16>>3],i=+o[e+24>>3],t=(r=+o[t+8>>3])>=i,e=r<=n&1,n<i?t&&(e=1):t||(e=0),0|(t=0!=(0|e))):0|(t=0)}function W(e,t){e|=0,t|=0;var n,r,s,a,c,u,d=0,A=0;a=k,k=k+288|0,n=a+264|0,r=a+96|0,A=(d=s=a)+96|0;do{i[d>>2]=0,d=d+4|0}while((0|d)<(0|A));return Qe(t,s),He(A=0|i[(d=s)>>2],d=0|i[d+4>>2],n),We(A,d,r),c=+Pe(n,r+8|0),o[n>>3]=+o[e>>3],o[(d=n+8|0)>>3]=+o[e+16>>3],o[r>>3]=+o[e+8>>3],o[(A=r+8|0)>>3]=+o[e+24>>3],u=+Pe(n,r),A=~~+v(+u*u/+Et(+ +l(+(+o[d>>3]-+o[A>>3])/(+o[n>>3]-+o[r>>3])),3)/(c*(2.59807621135*c)*.8)),k=a,0|(0==(0|A)?1:A)}function Q(e,t,n){e|=0,t|=0,n|=0;var r,o,s,a,l,c=0,u=0;a=k,k=k+288|0,r=a+264|0,o=a+96|0,u=(c=s=a)+96|0;do{i[c>>2]=0,c=c+4|0}while((0|c)<(0|u));return Qe(n,s),He(c=0|i[(u=s)>>2],u=0|i[u+4>>2],r),We(c,u,o),l=+Pe(r,o+8|0),u=~~+v(+ +Pe(e,t)/(2*l)),k=a,0|(0==(0|u)?1:u)}function J(e,t,n,r){t|=0,n|=0,r|=0,i[(e|=0)>>2]=t,i[e+4>>2]=n,i[e+8>>2]=r}function K(e,t){e|=0;var n,r,s,a,c=0,u=0,d=0,A=0,h=0,f=0,p=0;i[(a=(t|=0)+8|0)>>2]=0,r=+o[e>>3],A=+l(+r),s=+o[e+8>>3],A+=.5*(h=+l(+s)/.8660254037844386),A-=+(0|(c=~~A)),h-=+(0|(e=~~h));do{if(A<.5){if(A<.3333333333333333){if(i[t>>2]=c,h<.5*(A+1)){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(e=(1&!(h<(p=1-A)))+e|0,i[t+4>>2]=e,p<=h&h<2*A){c=c+1|0,i[t>>2]=c;break}i[t>>2]=c;break}if(!(A<.6666666666666666)){if(c=c+1|0,i[t>>2]=c,h<.5*A){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(h<1-A){if(i[t+4>>2]=e,2*A-1<h){i[t>>2]=c;break}}else e=e+1|0,i[t+4>>2]=e;c=c+1|0,i[t>>2]=c}while(0);do{if(r<0){if(1&e){c=~~(+(0|c)-(2*(+((f=0|yt(0|c,((0|c)<0)<<31>>31,0|(f=(e+1|0)/2|0),((0|f)<0)<<31>>31))>>>0)+4294967296*+(0|_()))+1)),i[t>>2]=c;break}c=~~(+(0|c)-2*(+((f=0|yt(0|c,((0|c)<0)<<31>>31,0|(f=(0|e)/2|0),((0|f)<0)<<31>>31))>>>0)+4294967296*+(0|_()))),i[t>>2]=c;break}}while(0);f=t+4|0,s<0&&(c=c-((1|e<<1)/2|0)|0,i[t>>2]=c,e=0-e|0,i[f>>2]=e),u=e-c|0,(0|c)<0?(d=0-c|0,i[f>>2]=u,i[a>>2]=d,i[t>>2]=0,e=u,c=0):d=0,(0|e)<0&&(c=c-e|0,i[t>>2]=c,d=d-e|0,i[a>>2]=d,i[f>>2]=0,e=0),n=c-d|0,u=e-d|0,(0|d)<0&&(i[t>>2]=n,i[f>>2]=u,i[a>>2]=0,e=u,c=n,d=0),(0|(u=(0|d)<(0|(u=(0|e)<(0|c)?e:c))?d:u))<=0||(i[t>>2]=c-u,i[f>>2]=e-u,i[a>>2]=d-u)}function X(e){var t,n=0,r=0,o=0,s=0,a=0;n=0|i[(e|=0)>>2],r=0|i[(t=e+4|0)>>2],(0|n)<0&&(r=r-n|0,i[t>>2]=r,i[(a=e+8|0)>>2]=(0|i[a>>2])-n,i[e>>2]=0,n=0),(0|r)<0?(n=n-r|0,i[e>>2]=n,s=(0|i[(a=e+8|0)>>2])-r|0,i[a>>2]=s,i[t>>2]=0,r=0):(a=s=e+8|0,s=0|i[s>>2]),(0|s)<0&&(n=n-s|0,i[e>>2]=n,r=r-s|0,i[t>>2]=r,i[a>>2]=0,s=0),(0|(o=(0|s)<(0|(o=(0|r)<(0|n)?r:n))?s:o))<=0||(i[e>>2]=n-o,i[t>>2]=r-o,i[a>>2]=s-o)}function Y(e,t){t|=0;var n,r;r=0|i[(e|=0)+8>>2],n=+((0|i[e+4>>2])-r|0),o[t>>3]=+((0|i[e>>2])-r|0)-.5*n,o[t+8>>3]=.8660254037844386*n}function q(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[t>>2])+(0|i[e>>2]),i[n+4>>2]=(0|i[t+4>>2])+(0|i[e+4>>2]),i[n+8>>2]=(0|i[t+8>>2])+(0|i[e+8>>2])}function Z(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[e>>2])-(0|i[t>>2]),i[n+4>>2]=(0|i[e+4>>2])-(0|i[t+4>>2]),i[n+8>>2]=(0|i[e+8>>2])-(0|i[t+8>>2])}function $(e,t){t|=0;var n,r=0;r=0|b(0|i[(e|=0)>>2],t),i[e>>2]=r,n=0|b(0|i[(r=e+4|0)>>2],t),i[r>>2]=n,t=0|b(0|i[(e=e+8|0)>>2],t),i[e>>2]=t}function ee(e){var t,n,r=0,o=0,s=0,a=0,l=0;l=(0|(n=0|i[(e|=0)>>2]))<0,e=(e=(o=(0|(a=((t=(0|(s=(0|i[e+4>>2])-(l?n:0)|0))<0)?0-s|0:0)+((0|i[e+8>>2])-(l?n:0))|0))<0)?0:a)-((s=(0|(o=(0|e)<(0|(o=(0|(r=(t?0:s)-(o?a:0)|0))<(0|(a=(l?0:n)-(t?s:0)-(o?a:0)|0))?r:a))?e:o))>0)?o:0)|0,r=r-(s?o:0)|0;e:do{switch(a-(s?o:0)|0){case 0:switch(0|r){case 0:return 0|(l=0==(0|e)?0:1==(0|e)?1:7);case 1:return 0|(l=0==(0|e)?2:1==(0|e)?3:7);default:break e}case 1:switch(0|r){case 0:return 0|(l=0==(0|e)?4:1==(0|e)?5:7);case 1:if(e)break e;return 0|(e=6);default:break e}}}while(0);return 0|(l=7)}function te(e){var t,n,r=0,o=0,s=0,a=0,l=0;o=0|i[(t=(e|=0)+8|0)>>2],s=0|gt(+((3*(r=(0|i[e>>2])-o|0)|0)-(o=(0|i[(n=e+4|0)>>2])-o|0)|0)/7),i[e>>2]=s,r=0|gt(+((o<<1)+r|0)/7),i[n>>2]=r,i[t>>2]=0,o=r-s|0,(0|s)<0?(l=0-s|0,i[n>>2]=o,i[t>>2]=l,i[e>>2]=0,r=o,s=0,o=l):o=0,(0|r)<0&&(s=s-r|0,i[e>>2]=s,o=o-r|0,i[t>>2]=o,i[n>>2]=0,r=0),l=s-o|0,a=r-o|0,(0|o)<0?(i[e>>2]=l,i[n>>2]=a,i[t>>2]=0,r=a,a=l,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|r)<(0|a)?r:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=r-s,i[t>>2]=o-s)}function ne(e){var t,n,r=0,o=0,s=0,a=0,l=0;o=0|i[(t=(e|=0)+8|0)>>2],s=0|gt(+(((r=(0|i[e>>2])-o|0)<<1)+(o=(0|i[(n=e+4|0)>>2])-o|0)|0)/7),i[e>>2]=s,r=0|gt(+((3*o|0)-r|0)/7),i[n>>2]=r,i[t>>2]=0,o=r-s|0,(0|s)<0?(l=0-s|0,i[n>>2]=o,i[t>>2]=l,i[e>>2]=0,r=o,s=0,o=l):o=0,(0|r)<0&&(s=s-r|0,i[e>>2]=s,o=o-r|0,i[t>>2]=o,i[n>>2]=0,r=0),l=s-o|0,a=r-o|0,(0|o)<0?(i[e>>2]=l,i[n>>2]=a,i[t>>2]=0,r=a,a=l,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|r)<(0|a)?r:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=r-s,i[t>>2]=o-s)}function re(e){var t,n,r,o=0,s=0,a=0,l=0;o=0|i[(e|=0)>>2],s=0|i[(n=e+4|0)>>2],a=0|i[(r=e+8|0)>>2],l=s+(3*o|0)|0,i[e>>2]=l,s=a+(3*s|0)|0,i[n>>2]=s,o=(3*a|0)+o|0,i[r>>2]=o,a=s-l|0,(0|l)<0?(o=o-l|0,i[n>>2]=a,i[r>>2]=o,i[e>>2]=0,s=a,a=0):a=l,(0|s)<0&&(a=a-s|0,i[e>>2]=a,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=a-o|0,l=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=l,i[r>>2]=0,a=t,o=0):l=s,(0|(s=(0|o)<(0|(s=(0|l)<(0|a)?l:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=l-s,i[r>>2]=o-s)}function ie(e){var t,n,r,o=0,s=0,a=0,l=0;l=0|i[(e|=0)>>2],a=(3*(o=0|i[(n=e+4|0)>>2])|0)+l|0,l=(s=0|i[(r=e+8|0)>>2])+(3*l|0)|0,i[e>>2]=l,i[n>>2]=a,o=(3*s|0)+o|0,i[r>>2]=o,s=a-l|0,(0|l)<0?(o=o-l|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,l=0):s=a,(0|s)<0&&(l=l-s|0,i[e>>2]=l,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=l-o|0,a=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=a,i[r>>2]=0,l=t,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|a)<(0|l)?a:l))?o:s))<=0||(i[e>>2]=l-s,i[n>>2]=a-s,i[r>>2]=o-s)}function oe(e,t){e|=0;var n,r,o,s=0,a=0,l=0;((t|=0)+-1|0)>>>0>=6||(l=(0|i[15472+(12*t|0)>>2])+(0|i[e>>2])|0,i[e>>2]=l,o=e+4|0,a=(0|i[15472+(12*t|0)+4>>2])+(0|i[o>>2])|0,i[o>>2]=a,r=e+8|0,t=(0|i[15472+(12*t|0)+8>>2])+(0|i[r>>2])|0,i[r>>2]=t,s=a-l|0,(0|l)<0?(t=t-l|0,i[o>>2]=s,i[r>>2]=t,i[e>>2]=0,a=0):(s=a,a=l),(0|s)<0&&(a=a-s|0,i[e>>2]=a,t=t-s|0,i[r>>2]=t,i[o>>2]=0,s=0),n=a-t|0,l=s-t|0,(0|t)<0?(i[e>>2]=n,i[o>>2]=l,i[r>>2]=0,a=n,t=0):l=s,(0|(s=(0|t)<(0|(s=(0|l)<(0|a)?l:a))?t:s))<=0||(i[e>>2]=a-s,i[o>>2]=l-s,i[r>>2]=t-s))}function se(e){var t,n,r,o=0,s=0,a=0,l=0;l=0|i[(e|=0)>>2],a=(o=0|i[(n=e+4|0)>>2])+l|0,l=(s=0|i[(r=e+8|0)>>2])+l|0,i[e>>2]=l,i[n>>2]=a,o=s+o|0,i[r>>2]=o,s=a-l|0,(0|l)<0?(o=o-l|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,a=0):(s=a,a=l),(0|s)<0&&(a=a-s|0,i[e>>2]=a,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=a-o|0,l=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=l,i[r>>2]=0,a=t,o=0):l=s,(0|(s=(0|o)<(0|(s=(0|l)<(0|a)?l:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=l-s,i[r>>2]=o-s)}function ae(e){var t,n,r,o=0,s=0,a=0,l=0;o=0|i[(e|=0)>>2],a=0|i[(n=e+4|0)>>2],s=0|i[(r=e+8|0)>>2],l=a+o|0,i[e>>2]=l,a=s+a|0,i[n>>2]=a,o=s+o|0,i[r>>2]=o,s=a-l|0,(0|l)<0?(o=o-l|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,a=0):(s=a,a=l),(0|s)<0&&(a=a-s|0,i[e>>2]=a,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=a-o|0,l=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=l,i[r>>2]=0,a=t,o=0):l=s,(0|(s=(0|o)<(0|(s=(0|l)<(0|a)?l:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=l-s,i[r>>2]=o-s)}function le(e){switch(0|(e|=0)){case 1:e=5;break;case 5:e=4;break;case 4:e=6;break;case 6:e=2;break;case 2:e=3;break;case 3:e=1}return 0|e}function ce(e){switch(0|(e|=0)){case 1:e=3;break;case 3:e=2;break;case 2:e=6;break;case 6:e=4;break;case 4:e=5;break;case 5:e=1}return 0|e}function ue(e){var t,n,r,o=0,s=0,a=0,l=0;o=0|i[(e|=0)>>2],s=0|i[(n=e+4|0)>>2],a=0|i[(r=e+8|0)>>2],l=s+(o<<1)|0,i[e>>2]=l,s=a+(s<<1)|0,i[n>>2]=s,o=(a<<1)+o|0,i[r>>2]=o,a=s-l|0,(0|l)<0?(o=o-l|0,i[n>>2]=a,i[r>>2]=o,i[e>>2]=0,s=a,a=0):a=l,(0|s)<0&&(a=a-s|0,i[e>>2]=a,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=a-o|0,l=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=l,i[r>>2]=0,a=t,o=0):l=s,(0|(s=(0|o)<(0|(s=(0|l)<(0|a)?l:a))?o:s))<=0||(i[e>>2]=a-s,i[n>>2]=l-s,i[r>>2]=o-s)}function de(e){var t,n,r,o=0,s=0,a=0,l=0;l=0|i[(e|=0)>>2],a=((o=0|i[(n=e+4|0)>>2])<<1)+l|0,l=(s=0|i[(r=e+8|0)>>2])+(l<<1)|0,i[e>>2]=l,i[n>>2]=a,o=(s<<1)+o|0,i[r>>2]=o,s=a-l|0,(0|l)<0?(o=o-l|0,i[n>>2]=s,i[r>>2]=o,i[e>>2]=0,l=0):s=a,(0|s)<0&&(l=l-s|0,i[e>>2]=l,o=o-s|0,i[r>>2]=o,i[n>>2]=0,s=0),t=l-o|0,a=s-o|0,(0|o)<0?(i[e>>2]=t,i[n>>2]=a,i[r>>2]=0,l=t,o=0):a=s,(0|(s=(0|o)<(0|(s=(0|a)<(0|l)?a:l))?o:s))<=0||(i[e>>2]=l-s,i[n>>2]=a-s,i[r>>2]=o-s)}function Ae(e,t){t|=0;var n,r,o,s=0,a=0,l=0;return o=(0|(r=(0|i[(e|=0)>>2])-(0|i[t>>2])|0))<0,n=(0|(a=(0|i[e+4>>2])-(0|i[t+4>>2])-(o?r:0)|0))<0,t=(t=(e=(0|(l=(o?0-r|0:0)+(0|i[e+8>>2])-(0|i[t+8>>2])+(n?0-a|0:0)|0))<0)?0:l)-((a=(0|(e=(0|t)<(0|(e=(0|(s=(n?0:a)-(e?l:0)|0))<(0|(l=(o?0:r)-(n?a:0)-(e?l:0)|0))?s:l))?t:e))>0)?e:0)|0,s=s-(a?e:0)|0,0|((0|(e=(0|(e=l-(a?e:0)|0))>-1?e:0-e|0))>(0|(t=(0|(s=(0|s)>-1?s:0-s|0))>(0|(t=(0|t)>-1?t:0-t|0))?s:t))?e:t)}function he(e,t){t|=0;var n;n=0|i[(e|=0)+8>>2],i[t>>2]=(0|i[e>>2])-n,i[t+4>>2]=(0|i[e+4>>2])-n}function fe(e,t){t|=0;var n,r,o,s=0,a=0,l=0;a=0|i[(e|=0)>>2],i[t>>2]=a,e=0|i[e+4>>2],i[(r=t+4|0)>>2]=e,i[(o=t+8|0)>>2]=0,s=e-a|0,(0|a)<0?(e=0-a|0,i[r>>2]=s,i[o>>2]=e,i[t>>2]=0,a=0):(s=e,e=0),(0|s)<0&&(a=a-s|0,i[t>>2]=a,e=e-s|0,i[o>>2]=e,i[r>>2]=0,s=0),n=a-e|0,l=s-e|0,(0|e)<0?(i[t>>2]=n,i[r>>2]=l,i[o>>2]=0,s=l,l=n,e=0):l=a,(0|(a=(0|e)<(0|(a=(0|s)<(0|l)?s:l))?e:a))<=0||(i[t>>2]=l-a,i[r>>2]=s-a,i[o>>2]=e-a)}function pe(e){var t,n,r,o;n=(o=0|i[(t=(e|=0)+8|0)>>2])-(0|i[e>>2])|0,i[e>>2]=n,e=(0|i[(r=e+4|0)>>2])-o|0,i[r>>2]=e,i[t>>2]=0-(e+n)}function ge(e){var t,n,r=0,o=0,s=0,a=0,l=0;r=0-(o=0|i[(e|=0)>>2])|0,i[e>>2]=r,i[(t=e+8|0)>>2]=0,a=(s=0|i[(n=e+4|0)>>2])+o|0,(0|o)>0?(i[n>>2]=a,i[t>>2]=o,i[e>>2]=0,r=0,s=a):o=0,(0|s)<0?(l=r-s|0,i[e>>2]=l,o=o-s|0,i[t>>2]=o,i[n>>2]=0,a=l-o|0,r=0-o|0,(0|o)<0?(i[e>>2]=a,i[n>>2]=r,i[t>>2]=0,s=r,o=0):(s=0,a=l)):a=r,(0|(r=(0|o)<(0|(r=(0|s)<(0|a)?s:a))?o:r))<=0||(i[e>>2]=a-r,i[n>>2]=s-r,i[t>>2]=o-r)}function me(e,t,n,r){t|=0,n|=0,r|=0;var s,a=0,l=0,c=0,u=0;if(s=k,k=k+32|0,function(e,t){e|=0,t|=0;var n=0,r=0,i=0;n=+o[e>>3],r=+d(+n),n=+A(+n),o[t+16>>3]=n,n=+o[e+8>>3],i=r*+d(+n),o[t>>3]=i,n=r*+A(+n),o[t+8>>3]=n}(e|=0,l=s),i[n>>2]=0,a=+lt(15888,l),(c=+lt(15912,l))<a&&(i[n>>2]=1,a=c),(c=+lt(15936,l))<a&&(i[n>>2]=2,a=c),(c=+lt(15960,l))<a&&(i[n>>2]=3,a=c),(c=+lt(15984,l))<a&&(i[n>>2]=4,a=c),(c=+lt(16008,l))<a&&(i[n>>2]=5,a=c),(c=+lt(16032,l))<a&&(i[n>>2]=6,a=c),(c=+lt(16056,l))<a&&(i[n>>2]=7,a=c),(c=+lt(16080,l))<a&&(i[n>>2]=8,a=c),(c=+lt(16104,l))<a&&(i[n>>2]=9,a=c),(c=+lt(16128,l))<a&&(i[n>>2]=10,a=c),(c=+lt(16152,l))<a&&(i[n>>2]=11,a=c),(c=+lt(16176,l))<a&&(i[n>>2]=12,a=c),(c=+lt(16200,l))<a&&(i[n>>2]=13,a=c),(c=+lt(16224,l))<a&&(i[n>>2]=14,a=c),(c=+lt(16248,l))<a&&(i[n>>2]=15,a=c),(c=+lt(16272,l))<a&&(i[n>>2]=16,a=c),(c=+lt(16296,l))<a&&(i[n>>2]=17,a=c),(c=+lt(16320,l))<a&&(i[n>>2]=18,a=c),(c=+lt(16344,l))<a&&(i[n>>2]=19,a=c),(c=+f(+(1-.5*a)))<1e-16)return i[r>>2]=0,i[r+4>>2]=0,i[r+8>>2]=0,i[r+12>>2]=0,void(k=s);if(n=0|i[n>>2],a=+Ee((a=+o[16368+(24*n|0)>>3])-+Ee(+function(e,t){e|=0,t|=0;var n=0,r=0,i=0,s=0,a=0;return s=+o[t>>3],r=+d(+s),i=+o[t+8>>3]-+o[e+8>>3],a=r*+A(+i),n=+o[e>>3],+ +m(+a,+(+A(+s)*+d(+n)-+d(+i)*(r*+A(+n))))}(15568+(n<<4)|0,e))),u=0|je(t)?+Ee(a+-.3334731722518321):a,a=+h(+c)/.381966011250105,(0|t)>0){l=0;do{a*=2.6457513110645907,l=l+1|0}while((0|l)!=(0|t))}c=+d(+u)*a,o[r>>3]=c,u=+A(+u)*a,o[r+8>>3]=u,k=s}function ve(e,t,n,r,s){t|=0,n|=0,r|=0,s|=0;var a=0,u=0;if(a=+function(e){e|=0;var t=0,n=0;return n=+o[e>>3],t=+o[e+8>>3],+ +c(+(n*n+t*t))}(e|=0),a<1e-16)return t=15568+(t<<4)|0,i[s>>2]=i[t>>2],i[s+4>>2]=i[t+4>>2],i[s+8>>2]=i[t+8>>2],void(i[s+12>>2]=i[t+12>>2]);if(u=+m(+ +o[e+8>>3],+ +o[e>>3]),(0|n)>0){e=0;do{a/=2.6457513110645907,e=e+1|0}while((0|e)!=(0|n))}r?(a/=3,n=0==(0|je(n)),a=+g(.381966011250105*(n?a:a/2.6457513110645907))):(a=+g(.381966011250105*a),0|je(n)&&(u=+Ee(u+.3334731722518321))),function(e,t,n,r){e|=0,t=+t,n=+n,r|=0;var s=0,a=0,c=0,u=0;if(n<1e-16)return i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],void(i[r+12>>2]=i[e+12>>2]);a=t<0?t+6.283185307179586:t,a=t>=6.283185307179586?a+-6.283185307179586:a;do{if(!(a<1e-16)){if(s=+l(+(a+-3.141592653589793))<1e-16,t=+o[e>>3],s){t-=n,o[r>>3]=t,s=r;break}if(c=+d(+n),n=+A(+n),t=c*+A(+t)+ +d(+a)*(n*+d(+t)),t=+p(+((t=t>1?1:t)<-1?-1:t)),o[r>>3]=t,+l(+(t+-1.5707963267948966))<1e-16)return o[r>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+l(+(t+1.5707963267948966))<1e-16)return o[r>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if(u=+d(+t),a=n*+A(+a)/u,n=+o[e>>3],t=(c-+A(+t)*+A(+n))/+d(+n)/u,c=a>1?1:a,t=t>1?1:t,(t=+o[e+8>>3]+ +m(+(c<-1?-1:c),+(t<-1?-1:t)))>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);return void(o[r+8>>3]=t)}t=+o[e>>3]+n,o[r>>3]=t,s=r}while(0);if(+l(+(t+-1.5707963267948966))<1e-16)return o[s>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+l(+(t+1.5707963267948966))<1e-16)return o[s>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if(t=+o[e+8>>3],t>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);o[r+8>>3]=t}(15568+(t<<4)|0,+Ee(+o[16368+(24*t|0)>>3]-u),a,s)}function be(e,t,n){t|=0,n|=0;var r,o;r=k,k=k+16|0,Y((e|=0)+4|0,o=r),ve(o,0|i[e>>2],t,0,n),k=r}function ye(e,t,n,r,s){e|=0,t|=0,n|=0,r|=0,s|=0;var a,l,c,u,d,A,h,f,p,g,m,v,b,y,x,w,_,C,E,M,P,T,B=0,O=0,I=0,R=0,L=0,D=0;if(T=k,k=k+272|0,R=T+240|0,E=T,M=T+224|0,P=T+208|0,m=T+176|0,v=T+160|0,b=T+192|0,y=T+144|0,x=T+128|0,w=T+112|0,_=T+96|0,C=T+80|0,i[(B=T+256|0)>>2]=t,i[R>>2]=i[e>>2],i[R+4>>2]=i[e+4>>2],i[R+8>>2]=i[e+8>>2],i[R+12>>2]=i[e+12>>2],xe(R,B,E),i[s>>2]=0,(0|(R=r+n+(5==(0|r)&1)|0))<=(0|n))k=T;else{l=M+4|0,c=m+4|0,u=n+5|0,d=16848+((a=0|i[B>>2])<<2)|0,A=16928+(a<<2)|0,h=x+8|0,f=w+8|0,p=_+8|0,g=P+4|0,I=n;e:for(;;){O=E+((0|I)%5<<4)|0,i[P>>2]=i[O>>2],i[P+4>>2]=i[O+4>>2],i[P+8>>2]=i[O+8>>2],i[P+12>>2]=i[O+12>>2];do{}while(2==(0|we(P,a,0,1)));if((0|I)>(0|n)&0!=(0|je(t))){if(i[m>>2]=i[P>>2],i[m+4>>2]=i[P+4>>2],i[m+8>>2]=i[P+8>>2],i[m+12>>2]=i[P+12>>2],Y(l,v),r=0|i[m>>2],B=0|i[17008+(80*r|0)+(i[M>>2]<<2)>>2],i[m>>2]=i[18608+(80*r|0)+(20*B|0)>>2],(0|(O=0|i[18608+(80*r|0)+(20*B|0)+16>>2]))>0){e=0;do{se(c),e=e+1|0}while((0|e)<(0|O))}switch(O=18608+(80*r|0)+(20*B|0)+4|0,i[b>>2]=i[O>>2],i[b+4>>2]=i[O+4>>2],i[b+8>>2]=i[O+8>>2],$(b,3*(0|i[d>>2])|0),q(c,b,c),X(c),Y(c,y),L=+(0|i[A>>2]),o[x>>3]=3*L,o[h>>3]=0,D=-1.5*L,o[w>>3]=D,o[f>>3]=2.598076211353316*L,o[_>>3]=D,o[p>>3]=-2.598076211353316*L,0|i[17008+(80*(0|i[m>>2])|0)+(i[P>>2]<<2)>>2]){case 1:e=w,r=x;break;case 3:e=_,r=w;break;case 2:e=x,r=_;break;default:e=12;break e}st(v,y,r,e,C),ve(C,0|i[m>>2],a,1,s+8+(i[s>>2]<<4)|0),i[s>>2]=1+(0|i[s>>2])}if((0|I)<(0|u)&&(Y(g,m),ve(m,0|i[P>>2],a,1,s+8+(i[s>>2]<<4)|0),i[s>>2]=1+(0|i[s>>2])),i[M>>2]=i[P>>2],i[M+4>>2]=i[P+4>>2],i[M+8>>2]=i[P+8>>2],i[M+12>>2]=i[P+12>>2],(0|(I=I+1|0))>=(0|R)){e=3;break}}3!=(0|e)?12==(0|e)&&S(22474,22521,581,22531):k=T}}function xe(e,t,n){e|=0,t|=0,n|=0;var r,o=0,s=0,a=0,l=0,c=0;r=k,k=k+128|0,s=r,l=20208,c=(a=o=r+64|0)+60|0;do{i[a>>2]=i[l>>2],a=a+4|0,l=l+4|0}while((0|a)<(0|c));l=20272,c=(a=s)+60|0;do{i[a>>2]=i[l>>2],a=a+4|0,l=l+4|0}while((0|a)<(0|c));o=(c=0==(0|je(0|i[t>>2])))?o:s,ue(s=e+4|0),de(s),0|je(0|i[t>>2])&&(ie(s),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],q(s,o,t=n+4|0),X(t),i[n+16>>2]=i[e>>2],q(s,o+12|0,t=n+20|0),X(t),i[n+32>>2]=i[e>>2],q(s,o+24|0,t=n+36|0),X(t),i[n+48>>2]=i[e>>2],q(s,o+36|0,t=n+52|0),X(t),i[n+64>>2]=i[e>>2],q(s,o+48|0,n=n+68|0),X(n),k=r}function we(e,t,n,r){n|=0,r|=0;var o,s,a,l,c,u,d=0,A=0,h=0,f=0,p=0;if(u=k,k=k+32|0,c=u+12|0,s=u,p=(e|=0)+4|0,f=0|i[16928+((t|=0)<<2)>>2],f=(l=0!=(0|r))?3*f|0:f,d=0|i[p>>2],o=0|i[(a=e+8|0)>>2],l){if((0|(d=o+d+(r=0|i[(A=e+12|0)>>2])|0))==(0|f))return k=u,0|(p=1);h=A}else d=o+d+(r=0|i[(h=e+12|0)>>2])|0;if((0|d)<=(0|f))return k=u,0|(p=0);do{if((0|r)>0){if(r=0|i[e>>2],(0|o)>0){A=18608+(80*r|0)+60|0,r=e;break}r=18608+(80*r|0)+40|0,n?(J(c,f,0,0),Z(p,c,s),ae(s),q(s,c,p),A=r,r=e):(A=r,r=e)}else A=18608+(80*(0|i[e>>2])|0)+20|0,r=e}while(0);if(i[r>>2]=i[A>>2],(0|i[(d=A+16|0)>>2])>0){r=0;do{se(p),r=r+1|0}while((0|r)<(0|i[d>>2]))}return e=A+4|0,i[c>>2]=i[e>>2],i[c+4>>2]=i[e+4>>2],i[c+8>>2]=i[e+8>>2],t=0|i[16848+(t<<2)>>2],$(c,l?3*t|0:t),q(p,c,p),X(p),r=l&&((0|i[a>>2])+(0|i[p>>2])+(0|i[h>>2])|0)==(0|f)?1:2,k=u,0|(p=r)}function _e(e,t){e|=0,t|=0;var n=0;do{n=0|we(e,t,0,1)}while(2==(0|n));return 0|n}function Se(e,t,n,r,s){e|=0,t|=0,n|=0,r|=0,s|=0;var a,l,c,u,d,A,h,f,p,g,m,v,b,y,x,w,_,C,E=0,M=0,P=0,T=0,B=0;if(C=k,k=k+240|0,y=C+208|0,x=C,w=C+192|0,_=C+176|0,p=C+160|0,g=C+144|0,m=C+128|0,v=C+112|0,b=C+96|0,i[(E=C+224|0)>>2]=t,i[y>>2]=i[e>>2],i[y+4>>2]=i[e+4>>2],i[y+8>>2]=i[e+8>>2],i[y+12>>2]=i[e+12>>2],Ce(y,E,x),i[s>>2]=0,(0|(f=r+n+(6==(0|r)&1)|0))<=(0|n))k=C;else{l=n+6|0,c=16928+((a=0|i[E>>2])<<2)|0,u=g+8|0,d=m+8|0,A=v+8|0,h=w+4|0,M=0,P=n,r=-1;e:for(;;){if(e=x+((E=(0|P)%6|0)<<4)|0,i[w>>2]=i[e>>2],i[w+4>>2]=i[e+4>>2],i[w+8>>2]=i[e+8>>2],i[w+12>>2]=i[e+12>>2],e=M,M=0|we(w,a,0,1),(0|P)>(0|n)&0!=(0|je(t))&&(1!=(0|e)&&(0|i[w>>2])!=(0|r))){switch(Y(x+((E+5|0)%6<<4)+4|0,_),Y(x+(E<<4)+4|0,p),T=+(0|i[c>>2]),o[g>>3]=3*T,o[u>>3]=0,B=-1.5*T,o[m>>3]=B,o[d>>3]=2.598076211353316*T,o[v>>3]=B,o[A>>3]=-2.598076211353316*T,E=0|i[y>>2],0|i[17008+(80*E|0)+(((0|r)==(0|E)?i[w>>2]:r)<<2)>>2]){case 1:e=m,r=g;break;case 3:e=v,r=m;break;case 2:e=g,r=v;break;default:e=8;break e}st(_,p,r,e,b),0|at(_,b)||0|at(p,b)||(ve(b,0|i[y>>2],a,1,s+8+(i[s>>2]<<4)|0),i[s>>2]=1+(0|i[s>>2]))}if((0|P)<(0|l)&&(Y(h,_),ve(_,0|i[w>>2],a,1,s+8+(i[s>>2]<<4)|0),i[s>>2]=1+(0|i[s>>2])),(0|(P=P+1|0))>=(0|f)){e=3;break}r=0|i[w>>2]}3!=(0|e)?8==(0|e)&&S(22557,22521,746,22602):k=C}}function Ce(e,t,n){e|=0,t|=0,n|=0;var r,o=0,s=0,a=0,l=0,c=0;r=k,k=k+160|0,s=r,l=20336,c=(a=o=r+80|0)+72|0;do{i[a>>2]=i[l>>2],a=a+4|0,l=l+4|0}while((0|a)<(0|c));l=20416,c=(a=s)+72|0;do{i[a>>2]=i[l>>2],a=a+4|0,l=l+4|0}while((0|a)<(0|c));o=(c=0==(0|je(0|i[t>>2])))?o:s,ue(s=e+4|0),de(s),0|je(0|i[t>>2])&&(ie(s),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],q(s,o,t=n+4|0),X(t),i[n+16>>2]=i[e>>2],q(s,o+12|0,t=n+20|0),X(t),i[n+32>>2]=i[e>>2],q(s,o+24|0,t=n+36|0),X(t),i[n+48>>2]=i[e>>2],q(s,o+36|0,t=n+52|0),X(t),i[n+64>>2]=i[e>>2],q(s,o+48|0,t=n+68|0),X(t),i[n+80>>2]=i[e>>2],q(s,o+60|0,n=n+84|0),X(n),k=r}function Ee(e){var t;return t=(e=+e)<0?e+6.283185307179586:e,+(e>=6.283185307179586?t+-6.283185307179586:t)}function Me(e,t){return t|=0,+l(+(+o[(e|=0)>>3]-+o[t>>3]))<17453292519943298e-27?0|(t=+l(+(+o[e+8>>3]-+o[t+8>>3]))<17453292519943298e-27):0|(t=0)}function Pe(e,t){e|=0;var n,r,i,s=0;return r=+o[(t|=0)>>3],n=+o[e>>3],s=(i=+A(.5*(r-n)))*i+(s=+A(.5*(+o[t+8>>3]-+o[e+8>>3])))*(+d(+r)*+d(+n)*s),2*+m(+ +c(+s),+ +c(+(1-s)))*6371.007180918475}function Te(e,t,n){e|=0,n|=0;var r,i,s,a,l=0,u=0,f=0,p=0,v=0,b=0;return b=+o[(t|=0)>>3],s=+o[e>>3],v=+A(.5*(b-s)),f=+o[t+8>>3],i=+o[e+8>>3],p=+A(.5*(f-i)),r=+d(+s),a=+d(+b),p=2*+m(+ +c(+(p=v*v+p*(a*r*p))),+ +c(+(1-p))),v=+o[n>>3],b=+A(.5*(v-b)),l=+o[n+8>>3],f=+A(.5*(l-f)),u=+d(+v),f=2*+m(+ +c(+(f=b*b+f*(a*u*f))),+ +c(+(1-f))),v=+A(.5*(s-v)),l=+A(.5*(i-l)),l=2*+m(+ +c(+(l=v*v+l*(r*u*l))),+ +c(+(1-l))),4*+g(+ +c(+ +h(.5*(u=.5*(p+f+l)))*+h(.5*(u-p))*+h(.5*(u-f))*+h(.5*(u-l))))}function ke(e,t){return t=0|St(0|(e|=0),0|(t|=0),45),_(),127&t}function Be(e,t){var n=0,r=0,i=0,o=0,s=0,a=0;if(!(!0&134217728==(-16777216&(t|=0))))return 0|(t=0);if(s=0|St(0|(e|=0),0|t,45),_(),(s&=127)>>>0>121)return 0|(t=0);n=0|St(0|e,0|t,52),_(),n&=15;do{if(0|n){for(i=1,r=0;;){if(o=0|St(0|e,0|t,3*(15-i|0)|0),_(),0!=(0|(o&=7))&(1^r)){if(1==(0|o)&0!=(0|D(s))){a=0,r=13;break}r=1}if(7==(0|o)){a=0,r=13;break}if(!(i>>>0<n>>>0)){r=9;break}i=i+1|0}if(9==(0|r)){if(15!=(0|n))break;return 0|(a=1)}if(13==(0|r))return 0|a}}while(0);for(;;){if(a=0|St(0|e,0|t,3*(14-n|0)|0),_(),!(7==(7&a)&!0)){a=0,r=13;break}if(!(n>>>0<14)){a=1,r=13;break}n=n+1|0}return 13==(0|r)?0|a:0}function Oe(e,t,n){n|=0;var r=0,i=0;if(r=0|St(0|(e|=0),0|(t|=0),52),_(),(0|(r&=15))>=(0|n)){if((0|r)!=(0|n))if(n>>>0<=15){if(e|=i=0|Ct(0|n,0,52),t=_()|-15728641&t,(0|r)>(0|n))do{i=0|Ct(7,0,3*(14-n|0)|0),n=n+1|0,e|=i,t=_()|t}while((0|n)<(0|r))}else t=0,e=0}else t=0,e=0;return w(0|t),0|e}function Ie(e,t,n,r){n|=0,r|=0;var o,s=0,a=0,l=0,c=0,u=0,d=0;if(l=0|St(0|(e|=0),0|(t|=0),52),_(),(0|n)<16&(0|(l&=15))<=(0|n)){if((0|l)==(0|n))return i[(n=r)>>2]=e,void(i[n+4>>2]=t);if(o=(0|(u=0|tt(7,n-l|0)))/7|0,c=0|St(0|e,0|t,45),_(),0|D(127&c)){e:do{if(l)for(a=1;;){if(s=0|St(0|e,0|t,3*(15-a|0)|0),_(),0|(s&=7))break e;if(!(a>>>0<l>>>0)){s=0;break}a=a+1|0}else s=0}while(0);a=0==(0|s)}else a=0;if(d=0|Ct(l+1|0,0,52),s=_()|-15728641&t,Ie(t=(d|e)&~(t=0|Ct(7,0,0|(c=3*(14-l|0)|0))),l=s&~_(),n,r),s=r+(o<<3)|0,!a)return Ie((d=0|Ct(1,0,0|c))|t,_()|l,n,s),d=s+(o<<3)|0,Ie((u=0|Ct(2,0,0|c))|t,_()|l,n,d),d=d+(o<<3)|0,Ie((u=0|Ct(3,0,0|c))|t,_()|l,n,d),d=d+(o<<3)|0,Ie((u=0|Ct(4,0,0|c))|t,_()|l,n,d),d=d+(o<<3)|0,Ie((u=0|Ct(5,0,0|c))|t,_()|l,n,d),void Ie((u=0|Ct(6,0,0|c))|t,_()|l,n,d+(o<<3)|0);a=s+(o<<3)|0,(0|u)>6&&(Tt(0|s,0,(d=(a>>>0>(u=s+8|0)>>>0?a:u)+-1+(0-s)|0)+8&-8),s=u+(d>>>3<<3)|0),Ie((d=0|Ct(2,0,0|c))|t,_()|l,n,s),d=s+(o<<3)|0,Ie((u=0|Ct(3,0,0|c))|t,_()|l,n,d),d=d+(o<<3)|0,Ie((u=0|Ct(4,0,0|c))|t,_()|l,n,d),d=d+(o<<3)|0,Ie((u=0|Ct(5,0,0|c))|t,_()|l,n,d),Ie((u=0|Ct(6,0,0|c))|t,_()|l,n,d+(o<<3)|0)}}function Re(e,t){var n=0,r=0,i=0;if(i=0|St(0|(e|=0),0|(t|=0),45),_(),!(0|D(127&i)))return 0|(i=0);i=0|St(0|e,0|t,52),_(),i&=15;e:do{if(i)for(r=1;;){if(n=0|St(0|e,0|t,3*(15-r|0)|0),_(),0|(n&=7))break e;if(!(r>>>0<i>>>0)){n=0;break}r=r+1|0}else n=0}while(0);return 0|(i=0==(0|n)&1)}function Le(e,t){var n=0,r=0,i=0;if(i=0|St(0|(e|=0),0|(t|=0),52),_(),!(i&=15))return 0|(i=0);for(r=1;;){if(n=0|St(0|e,0|t,3*(15-r|0)|0),_(),0|(n&=7)){r=5;break}if(!(r>>>0<i>>>0)){n=0,r=5;break}r=r+1|0}return 5==(0|r)?0|n:0}function De(e,t){var n=0,r=0,i=0,o=0,s=0,a=0,l=0;if(l=0|St(0|(e|=0),0|(t|=0),52),_(),!(l&=15))return l=e,w(0|(a=t)),0|l;for(a=1,n=0;;){r=0|Ct(7,0,0|(o=3*(15-a|0)|0)),i=0|_(),s=0|St(0|e,0|t,0|o),_(),e=(o=0|Ct(0|le(7&s),0,0|o))|e&~r,t=(s=0|_())|t&~i;e:do{if(!n)if(0==(o&r)&0==(s&i))n=0;else if(r=0|St(0|e,0|t,52),_(),r&=15){n=1;t:for(;;){switch(s=0|St(0|e,0|t,3*(15-n|0)|0),_(),7&s){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(i=0|St(0|e,0|t,0|(s=3*(15-n|0)|0)),_(),o=0|Ct(7,0,0|s),t&=~_(),e=e&~o|(s=0|Ct(0|le(7&i),0,0|s)),t|=_(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(a>>>0<l>>>0))break;a=a+1|0}return w(0|t),0|e}function Fe(e,t){var n=0,r=0,i=0,o=0,s=0;if(r=0|St(0|(e|=0),0|(t|=0),52),_(),!(r&=15))return r=e,w(0|(n=t)),0|r;for(n=1;s=0|St(0|e,0|t,0|(o=3*(15-n|0)|0)),_(),i=0|Ct(7,0,0|o),t&=~_(),e=(o=0|Ct(0|le(7&s),0,0|o))|e&~i,t=_()|t,n>>>0<r>>>0;)n=n+1|0;return w(0|t),0|e}function Ne(e,t){var n=0,r=0,i=0,o=0,s=0,a=0,l=0;if(l=0|St(0|(e|=0),0|(t|=0),52),_(),!(l&=15))return l=e,w(0|(a=t)),0|l;for(a=1,n=0;;){r=0|Ct(7,0,0|(o=3*(15-a|0)|0)),i=0|_(),s=0|St(0|e,0|t,0|o),_(),e=(o=0|Ct(0|ce(7&s),0,0|o))|e&~r,t=(s=0|_())|t&~i;e:do{if(!n)if(0==(o&r)&0==(s&i))n=0;else if(r=0|St(0|e,0|t,52),_(),r&=15){n=1;t:for(;;){switch(s=0|St(0|e,0|t,3*(15-n|0)|0),_(),7&s){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(o=0|Ct(7,0,0|(i=3*(15-n|0)|0)),s=t&~_(),t=0|St(0|e,0|t,0|i),_(),e=e&~o|(t=0|Ct(0|ce(7&t),0,0|i)),t=s|_(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(a>>>0<l>>>0))break;a=a+1|0}return w(0|t),0|e}function ze(e,t){var n=0,r=0,i=0,o=0,s=0;if(r=0|St(0|(e|=0),0|(t|=0),52),_(),!(r&=15))return r=e,w(0|(n=t)),0|r;for(n=1;o=0|Ct(7,0,0|(s=3*(15-n|0)|0)),i=t&~_(),t=0|St(0|e,0|t,0|s),_(),e=(t=0|Ct(0|ce(7&t),0,0|s))|e&~o,t=_()|i,n>>>0<r>>>0;)n=n+1|0;return w(0|t),0|e}function je(e){return(0|(e|=0))%2|0}function Ue(e,t){e|=0;var n,r;return r=k,k=k+16|0,n=r,(t|=0)>>>0<=15&&2146435072!=(2146435072&i[e+4>>2])&&2146435072!=(2146435072&i[e+8+4>>2])?(!function(e,t,n){var r,i;r=k,k=k+16|0,me(e|=0,t|=0,n|=0,i=r),K(i,n+4|0),k=r}(e,t,n),t=0|function(e,t){e|=0;var n,r=0,o=0,s=0,a=0,l=0,c=0,u=0,d=0;if(n=k,k=k+64|0,c=n+40|0,o=n+24|0,s=n+12|0,a=n,Ct(0|(t|=0),0,52),r=134225919|_(),!t)return(0|i[e+4>>2])>2||(0|i[e+8>>2])>2||(0|i[e+12>>2])>2?(c=0,w(0|(l=0)),k=n,0|c):(Ct(0|N(e),0,45),l=_()|r,c=-1,w(0|l),k=n,0|c);if(i[c>>2]=i[e>>2],i[c+4>>2]=i[e+4>>2],i[c+8>>2]=i[e+8>>2],i[c+12>>2]=i[e+12>>2],l=c+4|0,(0|t)>0)for(e=-1;i[o>>2]=i[l>>2],i[o+4>>2]=i[l+4>>2],i[o+8>>2]=i[l+8>>2],1&t?(te(l),i[s>>2]=i[l>>2],i[s+4>>2]=i[l+4>>2],i[s+8>>2]=i[l+8>>2],re(s)):(ne(l),i[s>>2]=i[l>>2],i[s+4>>2]=i[l+4>>2],i[s+8>>2]=i[l+8>>2],ie(s)),Z(o,s,a),X(a),u=0|Ct(7,0,0|(d=3*(15-t|0)|0)),r&=~_(),e=(d=0|Ct(0|ee(a),0,0|d))|e&~u,r=_()|r,(0|t)>1;)t=t+-1|0;else e=-1;e:do{if((0|i[l>>2])<=2&&(0|i[c+8>>2])<=2&&(0|i[c+12>>2])<=2){if(t=0|Ct(0|(o=0|N(c)),0,45),t|=e,e=_()|-1040385&r,a=0|z(c),!(0|D(o))){if((0|a)<=0)break;for(s=0;;){if(o=0|St(0|t,0|e,52),_(),o&=15)for(r=1;c=0|St(0|t,0|e,0|(d=3*(15-r|0)|0)),_(),u=0|Ct(7,0,0|d),e&=~_(),t=t&~u|(d=0|Ct(0|le(7&c),0,0|d)),e|=_(),r>>>0<o>>>0;)r=r+1|0;if((0|(s=s+1|0))==(0|a))break e}}s=0|St(0|t,0|e,52),_(),s&=15;t:do{if(s){r=1;n:for(;;){switch(d=0|St(0|t,0|e,3*(15-r|0)|0),_(),7&d){case 1:break n;case 0:break;default:break t}if(!(r>>>0<s>>>0))break t;r=r+1|0}if(0|j(o,0|i[c>>2]))for(r=1;u=0|Ct(7,0,0|(c=3*(15-r|0)|0)),d=e&~_(),e=0|St(0|t,0|e,0|c),_(),t=t&~u|(e=0|Ct(0|ce(7&e),0,0|c)),e=d|_(),r>>>0<s>>>0;)r=r+1|0;else for(r=1;c=0|St(0|t,0|e,0|(d=3*(15-r|0)|0)),_(),u=0|Ct(7,0,0|d),e&=~_(),t=t&~u|(d=0|Ct(0|le(7&c),0,0|d)),e|=_(),r>>>0<s>>>0;)r=r+1|0}}while(0);if((0|a)>0){r=0;do{t=0|De(t,e),e=0|_(),r=r+1|0}while((0|r)!=(0|a))}}else t=0,e=0}while(0);return d=t,w(0|(u=e)),k=n,0|d}(n,t),e=0|_()):(e=0,t=0),w(0|e),k=r,0|t}function Ge(e,t,n){var r,o=0,s=0,a=0;if(r=(n|=0)+4|0,s=0|St(0|(e|=0),0|(t|=0),52),_(),s&=15,a=0|St(0|e,0|t,45),_(),o=0==(0|s),0|D(127&a)){if(o)return 0|(a=1);o=1}else{if(o)return 0|(a=0);o=0==(0|i[r>>2])&&0==(0|i[n+8>>2])?0!=(0|i[n+12>>2])&1:1}for(n=1;1&n?re(r):ie(r),a=0|St(0|e,0|t,3*(15-n|0)|0),_(),oe(r,7&a),n>>>0<s>>>0;)n=n+1|0;return 0|o}function Ve(e,t,n){n|=0;var r,o,s=0,a=0,l=0,c=0,u=0,d=0;o=k,k=k+16|0,r=o,d=0|St(0|(e|=0),0|(t|=0),45),_(),d&=127;e:do{if(0!=(0|D(d))&&(l=0|St(0|e,0|t,52),_(),0!=(0|(l&=15)))){s=1;t:for(;;){switch(u=0|St(0|e,0|t,3*(15-s|0)|0),_(),7&u){case 5:break t;case 0:break;default:s=t;break e}if(!(s>>>0<l>>>0)){s=t;break e}s=s+1|0}for(a=1,s=t;c=0|Ct(7,0,0|(t=3*(15-a|0)|0)),u=s&~_(),s=0|St(0|e,0|s,0|t),_(),e=e&~c|(s=0|Ct(0|ce(7&s),0,0|t)),s=u|_(),a>>>0<l>>>0;)a=a+1|0}else s=t}while(0);if(u=7728+(28*d|0)|0,i[n>>2]=i[u>>2],i[n+4>>2]=i[u+4>>2],i[n+8>>2]=i[u+8>>2],i[n+12>>2]=i[u+12>>2],0|Ge(e,s,n)){if(c=n+4|0,i[r>>2]=i[c>>2],i[r+4>>2]=i[c+4>>2],i[r+8>>2]=i[c+8>>2],l=0|St(0|e,0|s,52),_(),u=15&l,1&l?(ie(c),l=u+1|0):l=u,0|D(d)){e:do{if(u)for(t=1;;){if(a=0|St(0|e,0|s,3*(15-t|0)|0),_(),0|(a&=7)){s=a;break e}if(!(t>>>0<u>>>0)){s=0;break}t=t+1|0}else s=0}while(0);s=4==(0|s)&1}else s=0;if(0|we(n,l,s,0)){if(0|D(d))do{}while(0!=(0|we(n,l,0,0)));(0|l)!=(0|u)&&ne(c)}else(0|l)!=(0|u)&&(i[c>>2]=i[r>>2],i[c+4>>2]=i[r+4>>2],i[c+8>>2]=i[r+8>>2]);k=o}else k=o}function He(e,t,n){n|=0;var r,i;r=k,k=k+16|0,Ve(e|=0,t|=0,i=r),t=0|St(0|e,0|t,52),_(),be(i,15&t,n),k=r}function We(e,t,n){n|=0;var r,i,o=0,s=0;i=k,k=k+16|0,Ve(e|=0,t|=0,r=i),o=0|St(0|e,0|t,45),_(),o=0==(0|D(127&o)),s=0|St(0|e,0|t,52),_(),s&=15;e:do{if(!o){if(0|s)for(o=1;;){if(!(0==((0|Ct(7,0,3*(15-o|0)|0))&e)&0==(_()&t)))break e;if(!(o>>>0<s>>>0))break;o=o+1|0}return ye(r,s,0,5,n),void(k=i)}}while(0);Se(r,s,0,6,n),k=i}function Qe(e,t){t|=0;var n,r=0,o=0,s=0,a=0,l=0,c=0;if(Ct(0|(e|=0),0,52),n=134225919|_(),(0|e)<1){o=0,r=0;do{0|D(o)&&(Ct(0|o,0,45),l=n|_(),i[(e=t+(r<<3)|0)>>2]=-1,i[e+4>>2]=l,r=r+1|0),o=o+1|0}while(122!=(0|o))}else{l=0,r=0;do{if(0|D(l)){for(Ct(0|l,0,45),o=1,s=-1,a=n|_();s&=~(c=0|Ct(7,0,3*(15-o|0)|0)),a&=~_(),(0|o)!=(0|e);)o=o+1|0;i[(c=t+(r<<3)|0)>>2]=s,i[c+4>>2]=a,r=r+1|0}l=l+1|0}while(122!=(0|l))}}function Je(e,t,n,r){var o,s=0,a=0,l=0,c=0,u=0;if(o=k,k=k+64|0,l=o,(0|(e|=0))==(0|(n|=0))&(0|(t|=0))==(0|(r|=0))|!1|134217728!=(2013265920&t)|!1|134217728!=(2013265920&r))return k=o,0|(l=0);if(s=0|St(0|e,0|t,52),_(),s&=15,a=0|St(0|n,0|r,52),_(),(0|s)!=(15&a))return k=o,0|(l=0);if(a=s+-1|0,s>>>0>1&&(u=0|Oe(e,t,a),c=0|_(),(0|u)==(0|(a=0|Oe(n,r,a)))&(0|c)==(0|_()))){if(s=0|St(0|e,0|t,0|(a=3*(15^s)|0)),_(),s&=7,a=0|St(0|n,0|r,0|a),_(),0==(0|s)|0==(0|(a&=7)))return k=o,0|(u=1);if((0|i[21136+(s<<2)>>2])==(0|a))return k=o,0|(u=1);if((0|i[21168+(s<<2)>>2])==(0|a))return k=o,0|(u=1)}a=(s=l)+56|0;do{i[s>>2]=0,s=s+4|0}while((0|s)<(0|a));return B(e,t,1,l),s=(0|i[(u=l)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=l+8|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=l+16|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=l+24|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=l+32|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)||(0|i[(u=l+40|0)>>2])==(0|n)&&(0|i[u+4>>2])==(0|r)?1:1&((0|i[(s=l+48|0)>>2])==(0|n)?(0|i[s+4>>2])==(0|r):0),k=o,0|(u=s)}function Ke(e,t,n){n|=0;var r,o,s,a,l=0;if(s=k,k=k+16|0,o=s,l=0|St(0|(e|=0),0|(t|=0),56),_(),t=0|function(e,t,n){e|=0,t|=0,n|=0;var r=0,o=0;if(r=0|Re(e,t),(n+-1|0)>>>0>5)return 0|(n=-1);if(o=0!=(0|r),1==(0|n)&o)return 0|(n=-1);return r=0|function(e,t){e|=0,t|=0;var n=0,r=0,o=0,s=0,a=0,l=0,c=0,u=0;if(u=k,k=k+32|0,o=u+16|0,s=u,Ve(e,t,o),a=0|ke(e,t),c=0|Le(e,t),function(e,t){e=7728+(28*(e|=0)|0)|0,i[(t|=0)>>2]=i[e>>2],i[t+4>>2]=i[e+4>>2],i[t+8>>2]=i[e+8>>2],i[t+12>>2]=i[e+12>>2]}(a,s),t=0|function(e,t){e|=0;var n=0,r=0;if((t|=0)>>>0>20)return-1;do{if((0|i[11152+(216*t|0)>>2])!=(0|e))if((0|i[11152+(216*t|0)+8>>2])!=(0|e))if((0|i[11152+(216*t|0)+16>>2])!=(0|e))if((0|i[11152+(216*t|0)+24>>2])!=(0|e))if((0|i[11152+(216*t|0)+32>>2])!=(0|e))if((0|i[11152+(216*t|0)+40>>2])!=(0|e))if((0|i[11152+(216*t|0)+48>>2])!=(0|e))if((0|i[11152+(216*t|0)+56>>2])!=(0|e))if((0|i[11152+(216*t|0)+64>>2])!=(0|e))if((0|i[11152+(216*t|0)+72>>2])!=(0|e))if((0|i[11152+(216*t|0)+80>>2])!=(0|e))if((0|i[11152+(216*t|0)+88>>2])!=(0|e))if((0|i[11152+(216*t|0)+96>>2])!=(0|e))if((0|i[11152+(216*t|0)+104>>2])!=(0|e))if((0|i[11152+(216*t|0)+112>>2])!=(0|e))if((0|i[11152+(216*t|0)+120>>2])!=(0|e))if((0|i[11152+(216*t|0)+128>>2])!=(0|e)){if((0|i[11152+(216*t|0)+136>>2])!=(0|e)){if((0|i[11152+(216*t|0)+144>>2])==(0|e)){e=0,n=2,r=0;break}if((0|i[11152+(216*t|0)+152>>2])==(0|e)){e=0,n=2,r=1;break}if((0|i[11152+(216*t|0)+160>>2])==(0|e)){e=0,n=2,r=2;break}if((0|i[11152+(216*t|0)+168>>2])==(0|e)){e=1,n=2,r=0;break}if((0|i[11152+(216*t|0)+176>>2])==(0|e)){e=1,n=2,r=1;break}if((0|i[11152+(216*t|0)+184>>2])==(0|e)){e=1,n=2,r=2;break}if((0|i[11152+(216*t|0)+192>>2])==(0|e)){e=2,n=2,r=0;break}if((0|i[11152+(216*t|0)+200>>2])==(0|e)){e=2,n=2,r=1;break}if((0|i[11152+(216*t|0)+208>>2])==(0|e)){e=2,n=2,r=2;break}return-1}e=2,n=1,r=2}else e=2,n=1,r=1;else e=2,n=1,r=0;else e=1,n=1,r=2;else e=1,n=1,r=1;else e=1,n=1,r=0;else e=0,n=1,r=2;else e=0,n=1,r=1;else e=0,n=1,r=0;else e=2,n=0,r=2;else e=2,n=0,r=1;else e=2,n=0,r=0;else e=1,n=0,r=2;else e=1,n=0,r=1;else e=1,n=0,r=0;else e=0,n=0,r=2;else e=0,n=0,r=1;else e=0,n=0,r=0}while(0);return 0|i[11152+(216*t|0)+(72*n|0)+(24*e|0)+(r<<3)+4>>2]}(a,0|i[o>>2]),!(0|D(a)))return k=u,0|(c=t);switch(0|a){case 4:e=0,n=14;break;case 14:e=1,n=14;break;case 24:e=2,n=14;break;case 38:e=3,n=14;break;case 49:e=4,n=14;break;case 58:e=5,n=14;break;case 63:e=6,n=14;break;case 72:e=7,n=14;break;case 83:e=8,n=14;break;case 97:e=9,n=14;break;case 107:e=10,n=14;break;case 117:e=11,n=14;break;default:l=0,r=0}14==(0|n)&&(l=0|i[22096+(24*e|0)+8>>2],r=0|i[22096+(24*e|0)+16>>2]);e=0|i[o>>2],(0|e)!=(0|i[s>>2])&&(a=0|F(a))|(0|(e=0|i[o>>2]))==(0|r)&&(t=(t+1|0)%6|0);if(3==(0|c)&(0|e)==(0|r))return k=u,0|(c=(t+5|0)%6|0);if(!(5==(0|c)&(0|e)==(0|l)))return k=u,0|(c=t);return c=(t+1|0)%6|0,k=u,0|c}(e,t),o?0|(n=(5-r+(0|i[22384+(n<<2)>>2])|0)%5|0):0|(n=(6-r+(0|i[22416+(n<<2)>>2])|0)%6|0)}(r=(a=!0&268435456==(2013265920&t))?e:0,e=a?-2130706433&t|134217728:0,7&l),-1==(0|t))return i[n>>2]=0,void(k=s);Ve(r,e,o),l=0|St(0|r,0|e,52),_(),l&=15,0|Re(r,e)?ye(o,l,t,2,n):Se(o,l,t,2,n),k=s}function Xe(e){e|=0;var t,n,r=0;return(t=0|bt(1,12))||S(22691,22646,49,22704),0|(r=0|i[(n=e+4|0)>>2])?(i[(r=r+8|0)>>2]=t,i[n>>2]=t,0|t):(0|i[e>>2]&&S(22721,22646,61,22744),i[(r=e)>>2]=t,i[n>>2]=t,0|t)}function Ye(e,t){e|=0,t|=0;var n,r;return(r=0|mt(24))||S(22758,22646,78,22772),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[r+16>>2]=0,0|(n=0|i[(t=e+4|0)>>2])?(i[n+16>>2]=r,i[t>>2]=r,0|r):(0|i[e>>2]&&S(22787,22646,82,22772),i[e>>2]=r,i[t>>2]=r,0|r)}function qe(e){var t,n,r=0,s=0,a=0,c=0,u=0,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0,y=0,x=0,w=0,_=0,C=0,E=0,M=0,P=0,T=0,k=0,B=0,O=0,I=0,R=0,L=0,D=0;if(0|i[(c=(e|=0)+8|0)>>2])return 0|(D=1);if(!(a=0|i[e>>2]))return 0|(D=0);r=a,s=0;do{s=s+1|0,r=0|i[r+8>>2]}while(0!=(0|r));if(s>>>0<2)return 0|(D=0);(n=0|mt(s<<2))||S(22807,22646,317,22826),(t=0|mt(s<<5))||S(22848,22646,321,22826),i[e>>2]=0,i[(P=e+4|0)>>2]=0,i[c>>2]=0,s=0,R=0,M=0,g=0;e:for(;;){if(p=0|i[a>>2]){u=0,d=p;do{if(h=+o[d+8>>3],r=d,d=0|i[d+16>>2],A=+o[(c=(f=0==(0|d))?p:d)+8>>3],+l(+(h-A))>3.141592653589793){D=14;break}u+=(A-h)*(+o[r>>3]+ +o[c>>3])}while(!f);if(14==(0|D)){D=0,u=0,r=p;do{E=+o[r+8>>3],O=0|i[(I=r+16|0)>>2],C=+o[(O=0==(0|O)?p:O)+8>>3],u+=(+o[r>>3]+ +o[O>>3])*((C<0?C+6.283185307179586:C)-(E<0?E+6.283185307179586:E)),r=0|i[(0==(0|r)?a:I)>>2]}while(0!=(0|r))}u>0?(i[n+(R<<2)>>2]=a,R=R+1|0,c=M,r=g):D=19}else D=19;if(19==(0|D)){D=0;do{if(!s){if(g){c=P,d=g+8|0,r=a,s=e;break}if(0|i[e>>2]){D=27;break e}c=P,d=e,r=a,s=e;break}if(0|i[(r=s+8|0)>>2]){D=21;break e}if(!(s=0|bt(1,12))){D=23;break e}i[r>>2]=s,c=s+4|0,d=s,r=g}while(0);if(i[d>>2]=a,i[c>>2]=a,d=t+(M<<5)|0,f=0|i[a>>2]){for(o[(p=t+(M<<5)+8|0)>>3]=17976931348623157e292,o[(g=t+(M<<5)+24|0)>>3]=17976931348623157e292,o[d>>3]=-17976931348623157e292,o[(m=t+(M<<5)+16|0)>>3]=-17976931348623157e292,w=17976931348623157e292,_=-17976931348623157e292,c=0,v=f,h=17976931348623157e292,y=17976931348623157e292,x=-17976931348623157e292,A=-17976931348623157e292;u=+o[v>>3],E=+o[v+8>>3],v=0|i[v+16>>2],C=+o[((b=0==(0|v))?f:v)+8>>3],u<h&&(o[p>>3]=u,h=u),E<y&&(o[g>>3]=E,y=E),u>x?o[d>>3]=u:u=x,E>A&&(o[m>>3]=E,A=E),w=E>0&E<w?E:w,_=E<0&E>_?E:_,c|=+l(+(E-C))>3.141592653589793,!b;)x=u;c&&(o[m>>3]=_,o[g>>3]=w)}else i[d>>2]=0,i[d+4>>2]=0,i[d+8>>2]=0,i[d+12>>2]=0,i[d+16>>2]=0,i[d+20>>2]=0,i[d+24>>2]=0,i[d+28>>2]=0;c=M+1|0}if(a=0|i[(I=a+8|0)>>2],i[I>>2]=0,!a){D=45;break}M=c,g=r}if(21==(0|D))S(22624,22646,35,22658);else if(23==(0|D))S(22678,22646,37,22658);else if(27==(0|D))S(22721,22646,61,22744);else if(45==(0|D)){e:do{if((0|R)>0){for(I=0==(0|c),B=c<<2,O=0==(0|e),k=0,r=0;;){if(T=0|i[n+(k<<2)>>2],I)D=73;else{if(!(M=0|mt(B))){D=50;break}if(!(P=0|mt(B))){D=52;break}t:do{if(O)s=0;else{for(c=0,s=0,d=e;a=t+(c<<5)|0,0|Ze(0|i[d>>2],a,0|i[T>>2])?(i[M+(s<<2)>>2]=d,i[P+(s<<2)>>2]=a,b=s+1|0):b=s,d=0|i[d+8>>2];)c=c+1|0,s=b;if((0|b)>0)if(a=0|i[M>>2],1==(0|b))s=a;else for(m=0,v=-1,s=a,g=a;;){for(f=0|i[g>>2],a=0,d=0;p=(0|(c=0|i[i[M+(d<<2)>>2]>>2]))==(0|f)?a:a+(1&Ze(c,0|i[P+(d<<2)>>2],0|i[f>>2]))|0,(0|(d=d+1|0))!=(0|b);)a=p;if(s=(c=(0|p)>(0|v))?g:s,(0|(a=m+1|0))==(0|b))break t;m=a,v=c?p:v,g=0|i[M+(a<<2)>>2]}else s=0}}while(0);if(vt(M),vt(P),s){if(a=0|i[(c=s+4|0)>>2])s=a+8|0;else if(0|i[s>>2]){D=70;break}i[s>>2]=T,i[c>>2]=T}else D=73}if(73==(0|D)){if(D=0,0|(r=0|i[T>>2]))do{P=r,r=0|i[r+16>>2],vt(P)}while(0!=(0|r));vt(T),r=2}if((0|(k=k+1|0))>=(0|R)){L=r;break e}}50==(0|D)?S(22863,22646,249,22882):52==(0|D)?S(22901,22646,252,22882):70==(0|D)&&S(22721,22646,61,22744)}else L=0}while(0);return vt(n),vt(t),0|(D=L)}return 0}function Ze(e,t,n){e|=0;var r,s=0,a=0,l=0,c=0,u=0,d=0,A=0;if(!(0|H(t|=0,n|=0)))return 0|(e=0);if(t=0|V(t),r=+o[n>>3],s=t&(s=+o[n+8>>3])<0?s+6.283185307179586:s,!(e=0|i[e>>2]))return 0|(e=0);if(t){t=0,n=e;e:for(;;){for(;c=+o[n>>3],d=+o[n+8>>3],A=0|i[(n=n+16|0)>>2],l=+o[(A=0==(0|A)?e:A)>>3],a=+o[A+8>>3],c>l?(u=c,c=d):(u=l,l=c,c=a,a=d),r<l|r>u;)if(!(n=0|i[n>>2])){n=22;break e}if(s=(c=c<0?c+6.283185307179586:c)==s|(d=a<0?a+6.283185307179586:a)==s?s+-2220446049250313e-31:s,((d+=(r-l)/(u-l)*(c-d))<0?d+6.283185307179586:d)>s&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}else{t=0,n=e;e:for(;;){for(;c=+o[n>>3],d=+o[n+8>>3],A=0|i[(n=n+16|0)>>2],l=+o[(A=0==(0|A)?e:A)>>3],a=+o[A+8>>3],c>l?(u=c,c=d):(u=l,l=c,c=a,a=d),r<l|r>u;)if(!(n=0|i[n>>2])){n=22;break e}if(a+(r-l)/(u-l)*(c-a)>(s=c==s|a==s?s+-2220446049250313e-31:s)&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}return 0}function $e(e,t,n,o,s){n|=0,o|=0,s|=0;var a,l,c,u,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0,y=0;if(u=k,k=k+32|0,y=u+16|0,c=u,d=0|St(0|(e|=0),0|(t|=0),52),_(),d&=15,m=0|St(0|n,0|o,52),_(),(0|d)!=(15&m))return k=u,0|(y=1);if(p=0|St(0|e,0|t,45),_(),p&=127,g=0|St(0|n,0|o,45),_(),m=(0|p)!=(0|(g&=127))){if(7==(0|(h=0|G(p,g))))return k=u,0|(y=2);7==(0|(f=0|G(g,p)))?S(22925,22949,151,22959):(v=h,A=f)}else v=0,A=0;a=0|D(p),l=0|D(g),i[y>>2]=0,i[y+4>>2]=0,i[y+8>>2]=0,i[y+12>>2]=0;do{if(v){if(h=(0|(g=0|i[4304+(28*p|0)+(v<<2)>>2]))>0,l)if(h){p=0,f=n,h=o;do{f=0|Ne(f,h),h=0|_(),1==(0|(A=0|ce(A)))&&(A=0|ce(1)),p=p+1|0}while((0|p)!=(0|g));g=A,p=f,f=h}else g=A,p=n,f=o;else if(h){p=0,f=n,h=o;do{f=0|ze(f,h),h=0|_(),A=0|ce(A),p=p+1|0}while((0|p)!=(0|g));g=A,p=f,f=h}else g=A,p=n,f=o;if(Ge(p,f,y),m||S(22972,22949,181,22959),(h=0!=(0|a))&(A=0!=(0|l))&&S(22999,22949,182,22959),h){if(A=0|Le(e,t),0|r[22032+(7*A|0)+v|0]){d=3;break}p=f=0|i[21200+(28*A|0)+(v<<2)>>2],b=26}else if(A){if(A=0|Le(p,f),0|r[22032+(7*A|0)+g|0]){d=4;break}p=0,f=0|i[21200+(28*g|0)+(A<<2)>>2],b=26}else A=0;if(26==(0|b))if((0|f)<=-1&&S(23030,22949,212,22959),(0|p)<=-1&&S(23053,22949,213,22959),(0|f)>0){h=y+4|0,A=0;do{ae(h),A=A+1|0}while((0|A)!=(0|f));A=p}else A=p;if(i[c>>2]=0,i[c+4>>2]=0,i[c+8>>2]=0,oe(c,v),0|d)for(;0|je(d)?re(c):ie(c),(0|d)>1;)d=d+-1|0;if((0|A)>0){d=0;do{ae(c),d=d+1|0}while((0|d)!=(0|A))}q(b=y+4|0,c,b),X(b),b=50}else if(Ge(n,o,y),0!=(0|a)&0!=(0|l))if((0|g)!=(0|p)&&S(23077,22949,243,22959),A=0|Le(e,t),d=0|Le(n,o),0|r[22032+(7*A|0)+d|0])d=5;else if((0|(A=0|i[21200+(28*A|0)+(d<<2)>>2]))>0){h=y+4|0,d=0;do{ae(h),d=d+1|0}while((0|d)!=(0|A));b=50}else b=50;else b=50}while(0);return 50==(0|b)&&(d=y+4|0,i[s>>2]=i[d>>2],i[s+4>>2]=i[d+4>>2],i[s+8>>2]=i[d+8>>2],d=0),k=u,0|(y=d)}function et(e,t,n,r){n|=0,r|=0;var o,s,a=0,l=0,c=0,u=0,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0;if(s=k,k=k+48|0,c=s+36|0,u=s+24|0,d=s+12|0,A=s,l=0|St(0|(e|=0),0|(t|=0),52),_(),l&=15,f=0|St(0|e,0|t,45),_(),o=0|D(f&=127),Ct(0|l,0,52),m=134225919|_(),i[(g=r)>>2]=-1,i[g+4>>2]=m,!l)return(0|i[n>>2])>1||(0|i[n+4>>2])>1||(0|i[n+8>>2])>1||127==(0|(a=0|U(f,0|ee(n))))?(k=s,0|(m=1)):(p=0|Ct(0|a,0,45),g=0|_(),g=-1040385&i[(f=r)+4>>2]|g,i[(m=r)>>2]=i[f>>2]|p,i[m+4>>2]=g,k=s,0|(m=0));for(i[c>>2]=i[n>>2],i[c+4>>2]=i[n+4>>2],i[c+8>>2]=i[n+8>>2];i[u>>2]=i[c>>2],i[u+4>>2]=i[c+4>>2],i[u+8>>2]=i[c+8>>2],0|je(l)?(te(c),i[d>>2]=i[c>>2],i[d+4>>2]=i[c+4>>2],i[d+8>>2]=i[c+8>>2],re(d)):(ne(c),i[d>>2]=i[c>>2],i[d+4>>2]=i[c+4>>2],i[d+8>>2]=i[c+8>>2],ie(d)),Z(u,d,A),X(A),v=0|i[(g=r)>>2],g=0|i[g+4>>2],n=0|Ct(7,0,0|(b=3*(15-l|0)|0)),g&=~_(),b=0|Ct(0|ee(A),0,0|b),g=_()|g,i[(m=r)>>2]=b|v&~n,i[m+4>>2]=g,(0|l)>1;)l=l+-1|0;e:do{if((0|i[c>>2])<=1&&(0|i[c+4>>2])<=1&&(0|i[c+8>>2])<=1){A=127==(0|(u=0|U(f,l=0|ee(c))))?0:0|D(u);t:do{if(l){if(o){if(c=21408+(28*(0|Le(e,t))|0)+(l<<2)|0,(0|(c=0|i[c>>2]))>0){n=0;do{l=0|le(l),n=n+1|0}while((0|n)!=(0|c))}if(1==(0|l)){a=3;break e}127==(0|(n=0|U(f,l)))&&S(23104,22949,376,23134),0|D(n)?S(23147,22949,377,23134):(p=c,h=l,a=n)}else p=0,h=l,a=u;if((0|(d=0|i[4304+(28*f|0)+(h<<2)>>2]))<=-1&&S(23178,22949,384,23134),!A){if((0|p)<=-1&&S(23030,22949,417,23134),0|p){l=0,n=0|i[(c=r)>>2],c=0|i[c+4>>2];do{n=0|Fe(n,c),c=0|_(),i[(b=r)>>2]=n,i[b+4>>2]=c,l=l+1|0}while((0|l)<(0|p))}if((0|d)<=0){l=54;break}for(l=0,n=0|i[(c=r)>>2],c=0|i[c+4>>2];;)if(n=0|Fe(n,c),c=0|_(),i[(b=r)>>2]=n,i[b+4>>2]=c,(0|(l=l+1|0))==(0|d)){l=54;break t}}if(7==(0|(u=0|G(a,f)))&&S(22925,22949,393,23134),n=0|i[(l=r)>>2],l=0|i[l+4>>2],(0|d)>0){c=0;do{n=0|Fe(n,l),l=0|_(),i[(b=r)>>2]=n,i[b+4>>2]=l,c=c+1|0}while((0|c)!=(0|d))}if(n=0|Le(n,l),b=0|F(a),(0|(n=0|i[(b?21824:21616)+(28*u|0)+(n<<2)>>2]))<=-1&&S(23030,22949,412,23134),n){l=0,c=0|i[(u=r)>>2],u=0|i[u+4>>2];do{c=0|De(c,u),u=0|_(),i[(b=r)>>2]=c,i[b+4>>2]=u,l=l+1|0}while((0|l)<(0|n));l=54}else l=54}else if(0!=(0|o)&0!=(0|A))if(l=21408+(28*(b=0|Le(e,t))|0)+(Le(0|i[(l=r)>>2],0|i[l+4>>2])<<2)|0,(0|(l=0|i[l>>2]))<=-1&&S(23201,22949,433,23134),l){a=0,n=0|i[(c=r)>>2],c=0|i[c+4>>2];do{n=0|Fe(n,c),c=0|_(),i[(b=r)>>2]=n,i[b+4>>2]=c,a=a+1|0}while((0|a)<(0|l));a=u,l=54}else a=u,l=55;else a=u,l=54}while(0);if(54==(0|l)&&A&&(l=55),55==(0|l)&&1==(0|Le(0|i[(b=r)>>2],0|i[b+4>>2]))){a=4;break}m=0|i[(b=r)>>2],b=-1040385&i[b+4>>2],v=0|Ct(0|a,0,45),b|=_(),i[(a=r)>>2]=m|v,i[a+4>>2]=b,a=0}else a=2}while(0);return k=s,0|(b=a)}function tt(e,t){var n=0;if(!(t|=0))return 0|(n=1);n=e|=0,e=1;do{e=0|b(0==(1&t)?1:n,e),t>>=1,n=0|b(n,n)}while(0!=(0|t));return 0|e}function nt(e,t,n){e|=0;var r,s,a=0,l=0,c=0,u=0,d=0,A=0,h=0,f=0;if(!(0|H(t|=0,n|=0)))return 0|(f=0);if(t=0|V(t),s=+o[n>>3],a=t&(a=+o[n+8>>3])<0?a+6.283185307179586:a,(0|(f=0|i[e>>2]))<=0)return 0|(f=0);if(r=0|i[e+4>>2],t){t=0,n=-1,e=0;e:for(;;){for(h=e;u=+o[r+(h<<4)>>3],A=+o[r+(h<<4)+8>>3],c=+o[r+((e=(n+2|0)%(0|f)|0)<<4)>>3],l=+o[r+(e<<4)+8>>3],u>c?(d=u,u=A):(d=c,c=u,u=l,l=A),s<c|s>d;){if(!((0|(n=h+1|0))<(0|f))){n=22;break e}e=h,h=n,n=e}if(a=(u=u<0?u+6.283185307179586:u)==a|(A=l<0?l+6.283185307179586:l)==a?a+-2220446049250313e-31:a,((A+=(s-c)/(d-c)*(u-A))<0?A+6.283185307179586:A)>a&&(t^=1),(0|(e=h+1|0))>=(0|f)){n=22;break}n=h}if(22==(0|n))return 0|t}else{t=0,n=-1,e=0;e:for(;;){for(h=e;u=+o[r+(h<<4)>>3],A=+o[r+(h<<4)+8>>3],c=+o[r+((e=(n+2|0)%(0|f)|0)<<4)>>3],l=+o[r+(e<<4)+8>>3],u>c?(d=u,u=A):(d=c,c=u,u=l,l=A),s<c|s>d;){if(!((0|(n=h+1|0))<(0|f))){n=22;break e}e=h,h=n,n=e}if(l+(s-c)/(d-c)*(u-l)>(a=u==a|l==a?a+-2220446049250313e-31:a)&&(t^=1),(0|(e=h+1|0))>=(0|f)){n=22;break}n=h}if(22==(0|n))return 0|t}return 0}function rt(e,t){t|=0;var n,r,s,a,c,u=0,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0,y=0,x=0;if(!(r=0|i[(e|=0)>>2]))return i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,void(i[t+28>>2]=0);if(o[(s=t+8|0)>>3]=17976931348623157e292,o[(a=t+24|0)>>3]=17976931348623157e292,o[t>>3]=-17976931348623157e292,o[(c=t+16|0)>>3]=-17976931348623157e292,!((0|r)<=0)){for(n=0|i[e+4>>2],m=17976931348623157e292,v=-17976931348623157e292,b=0,e=-1,h=17976931348623157e292,f=17976931348623157e292,g=-17976931348623157e292,d=-17976931348623157e292,y=0;u=+o[n+(y<<4)>>3],p=+o[n+(y<<4)+8>>3],A=+o[n+(((0|(e=e+2|0))==(0|r)?0:e)<<4)+8>>3],u<h&&(o[s>>3]=u,h=u),p<f&&(o[a>>3]=p,f=p),u>g?o[t>>3]=u:u=g,p>d&&(o[c>>3]=p,d=p),m=p>0&p<m?p:m,v=p<0&p>v?p:v,b|=+l(+(p-A))>3.141592653589793,(0|(e=y+1|0))!=(0|r);)x=y,g=u,y=e,e=x;b&&(o[c>>3]=v,o[a>>3]=m)}}function it(e,t){t|=0;var n,r=0,s=0,a=0,c=0,u=0,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0,y=0,x=0,w=0,_=0,S=0,C=0,E=0;if(v=0|i[(e|=0)>>2]){if(o[(b=t+8|0)>>3]=17976931348623157e292,o[(y=t+24|0)>>3]=17976931348623157e292,o[t>>3]=-17976931348623157e292,o[(x=t+16|0)>>3]=-17976931348623157e292,(0|v)>0){for(a=0|i[e+4>>2],g=17976931348623157e292,m=-17976931348623157e292,s=0,r=-1,A=17976931348623157e292,h=17976931348623157e292,p=-17976931348623157e292,u=-17976931348623157e292,w=0;c=+o[a+(w<<4)>>3],f=+o[a+(w<<4)+8>>3],d=+o[a+(((0|(C=r+2|0))==(0|v)?0:C)<<4)+8>>3],c<A&&(o[b>>3]=c,A=c),f<h&&(o[y>>3]=f,h=f),c>p?o[t>>3]=c:c=p,f>u&&(o[x>>3]=f,u=f),g=f>0&f<g?f:g,m=f<0&f>m?f:m,s|=+l(+(f-d))>3.141592653589793,(0|(r=w+1|0))!=(0|v);)C=w,p=c,w=r,r=C;s&&(o[x>>3]=m,o[y>>3]=g)}}else i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,i[t+28>>2]=0;if(!((0|(r=0|i[(C=e+8|0)>>2]))<=0)){n=e+12|0,S=0;do{if(a=0|i[n>>2],s=S,y=t+((S=S+1|0)<<5)|0,x=0|i[a+(s<<3)>>2]){if(o[(w=t+(S<<5)+8|0)>>3]=17976931348623157e292,o[(e=t+(S<<5)+24|0)>>3]=17976931348623157e292,o[y>>3]=-17976931348623157e292,o[(_=t+(S<<5)+16|0)>>3]=-17976931348623157e292,(0|x)>0){for(v=0|i[a+(s<<3)+4>>2],g=17976931348623157e292,m=-17976931348623157e292,a=0,s=-1,b=0,A=17976931348623157e292,h=17976931348623157e292,f=-17976931348623157e292,u=-17976931348623157e292;c=+o[v+(b<<4)>>3],p=+o[v+(b<<4)+8>>3],d=+o[v+(((0|(s=s+2|0))==(0|x)?0:s)<<4)+8>>3],c<A&&(o[w>>3]=c,A=c),p<h&&(o[e>>3]=p,h=p),c>f?o[y>>3]=c:c=f,p>u&&(o[_>>3]=p,u=p),g=p>0&p<g?p:g,m=p<0&p>m?p:m,a|=+l(+(p-d))>3.141592653589793,(0|(s=b+1|0))!=(0|x);)E=b,b=s,f=c,s=E;a&&(o[_>>3]=m,o[e>>3]=g)}}else i[y>>2]=0,i[y+4>>2]=0,i[y+8>>2]=0,i[y+12>>2]=0,i[y+16>>2]=0,i[y+20>>2]=0,i[y+24>>2]=0,i[y+28>>2]=0,r=0|i[C>>2]}while((0|S)<(0|r))}}function ot(e,t,n){var r=0,o=0,s=0;if(!(0|nt(e|=0,t|=0,n|=0)))return 0|(o=0);if((0|i[(o=e+8|0)>>2])<=0)return 0|(o=1);for(r=e+12|0,e=0;;){if(s=e,e=e+1|0,0|nt((0|i[r>>2])+(s<<3)|0,t+(e<<5)|0,n)){e=0,r=6;break}if((0|e)>=(0|i[o>>2])){e=1,r=6;break}}return 6==(0|r)?0|e:0}function st(e,t,n,r,i){t|=0,n|=0,r|=0,i|=0;var s,a,l,c,u,d,A,h=0;c=+o[(e|=0)>>3],l=+o[t>>3]-c,a=+o[e+8>>3],s=+o[t+8>>3]-a,d=+o[n>>3],h=((h=+o[r>>3]-d)*(a-(A=+o[n+8>>3]))-(c-d)*(u=+o[r+8>>3]-A))/(l*u-s*h),o[i>>3]=c+l*h,o[i+8>>3]=a+s*h}function at(e,t){return t|=0,+o[(e|=0)>>3]!=+o[t>>3]?0|(t=0):0|(t=+o[e+8>>3]==+o[t+8>>3])}function lt(e,t){t|=0;var n,r,i;return+((i=+o[(e|=0)>>3]-+o[t>>3])*i+(r=+o[e+8>>3]-+o[t+8>>3])*r+(n=+o[e+16>>3]-+o[t+16>>3])*n)}function ct(e,t,n){e|=0,n|=0;var r=0;(0|(t|=0))>0?(r=0|bt(t,4),i[e>>2]=r,r||S(23230,23253,40,23267)):i[e>>2]=0,i[e+4>>2]=t,i[e+8>>2]=0,i[e+12>>2]=n}function ut(e){var t,n,r,s=0,a=0,c=0,d=0;t=(e|=0)+4|0,n=e+12|0,r=e+8|0;e:for(;;){for(a=0|i[t>>2],s=0;;){if((0|s)>=(0|a))break e;if(c=0|i[e>>2],d=0|i[c+(s<<2)>>2])break;s=s+1|0}s=c+(~~(+l(+ +u(10,+ +(15-(0|i[n>>2])|0))*(+o[d>>3]+ +o[d+8>>3]))%+(0|a))>>>0<<2)|0,a=0|i[s>>2];t:do{if(0|a){if(c=d+32|0,(0|a)==(0|d))i[s>>2]=i[c>>2];else{if(!(s=0|i[(a=a+32|0)>>2]))break;for(;(0|s)!=(0|d);)if(!(s=0|i[(a=s+32|0)>>2]))break t;i[a>>2]=i[c>>2]}vt(d),i[r>>2]=(0|i[r>>2])-1}}while(0)}vt(0|i[e>>2])}function dt(e){var t,n=0,r=0;for(t=0|i[(e|=0)+4>>2],r=0;;){if((0|r)>=(0|t)){n=0,r=4;break}if(n=0|i[(0|i[e>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return 4==(0|r)?0|n:0}function At(e,t){t|=0;var n=0,r=0,s=0,a=0;if(n=~~(+l(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,n=(0|i[e>>2])+(n<<2)|0,!(r=0|i[n>>2]))return 0|(a=1);a=t+32|0;do{if((0|r)!=(0|t)){if(!(n=0|i[r+32>>2]))return 0|(a=1);for(s=n;;){if((0|s)==(0|t)){s=8;break}if(!(n=0|i[s+32>>2])){n=1,s=10;break}r=s,s=n}if(8==(0|s)){i[r+32>>2]=i[a>>2];break}if(10==(0|s))return 0|n}else i[n>>2]=i[a>>2]}while(0);return vt(t),i[(a=e+8|0)>>2]=(0|i[a>>2])-1,0|(a=0)}function ht(e,t,n){e|=0,t|=0,n|=0;var r,s=0,a=0,c=0;(r=0|mt(40))||S(23283,23253,98,23296),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[(a=r+16|0)>>2]=i[n>>2],i[a+4>>2]=i[n+4>>2],i[a+8>>2]=i[n+8>>2],i[a+12>>2]=i[n+12>>2],i[r+32>>2]=0,a=~~(+l(+ +u(10,+ +(15-(0|i[e+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,a=(0|i[e>>2])+(a<<2)|0,s=0|i[a>>2];do{if(s){for(;!(0|Me(s,t)&&0|Me(s+16|0,n));)if(a=0|i[s+32>>2],!(0|i[(s=0==(0|a)?s:a)+32>>2])){c=10;break}if(10==(0|c)){i[s+32>>2]=r;break}return vt(r),0|(c=s)}i[a>>2]=r}while(0);return i[(c=e+8|0)>>2]=1+(0|i[c>>2]),0|(c=r)}function ft(e,t,n){t|=0,n|=0;var r=0,s=0;if(s=~~(+l(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(s=0|i[(0|i[e>>2])+(s<<2)>>2]))return 0|(n=0);if(!n){for(e=s;;){if(0|Me(e,t)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}if(10==(0|r))return 0|e}for(e=s;;){if(0|Me(e,t)&&0|Me(e+16|0,n)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}return 10==(0|r)?0|e:0}function pt(e,t){t|=0;var n=0;if(n=~~(+l(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+o[t>>3]+ +o[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(e=0|i[(0|i[e>>2])+(n<<2)>>2]))return 0|(n=0);for(;;){if(0|Me(e,t)){t=5;break}if(!(e=0|i[e+32>>2])){e=0,t=5;break}}return 5==(0|t)?0|e:0}function gt(e){return 0|+function(e){return+ +kt(+(e=+e))}(e=+e)}function mt(e){e|=0;var t,n=0,r=0,o=0,s=0,a=0,l=0,c=0,u=0,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0,y=0,x=0,w=0;t=k,k=k+16|0,f=t;do{if(e>>>0<245){if(e=(d=e>>>0<11?16:e+11&-8)>>>3,3&(r=(h=0|i[5829])>>>e))return o=0|i[(r=(e=23356+((n=(1&r^1)+e|0)<<1<<2)|0)+8|0)>>2],(0|(a=0|i[(s=o+8|0)>>2]))==(0|e)?i[5829]=h&~(1<<n):(i[a+12>>2]=e,i[r>>2]=a),w=n<<3,i[o+4>>2]=3|w,i[(w=o+w+4|0)>>2]=1|i[w>>2],k=t,0|(w=s);if(d>>>0>(A=0|i[5831])>>>0){if(0|r)return n=((n=r<<e&((n=2<<e)|0-n))&0-n)-1|0,a=0|i[(e=(n=23356+((o=((r=(n>>>=c=n>>>12&16)>>>5&8)|c|(a=(n>>>=r)>>>2&4)|(e=(n>>>=a)>>>1&2)|(o=(n>>>=e)>>>1&1))+(n>>>o)|0)<<1<<2)|0)+8|0)>>2],(0|(r=0|i[(c=a+8|0)>>2]))==(0|n)?(e=h&~(1<<o),i[5829]=e):(i[r+12>>2]=n,i[e>>2]=r,e=h),l=(w=o<<3)-d|0,i[a+4>>2]=3|d,i[(s=a+d|0)+4>>2]=1|l,i[a+w>>2]=l,0|A&&(o=0|i[5834],r=23356+((n=A>>>3)<<1<<2)|0,e&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5829]=e|n,n=r,e=r+8|0),i[e>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5831]=l,i[5834]=s,k=t,0|(w=c);if(a=0|i[5830]){for(r=(a&0-a)-1|0,r=u=0|i[23620+(((o=(r>>>=s=r>>>12&16)>>>5&8)|s|(l=(r>>>=o)>>>2&4)|(c=(r>>>=l)>>>1&2)|(u=(r>>>=c)>>>1&1))+(r>>>u)<<2)>>2],c=u,u=(-8&i[u+4>>2])-d|0;(e=0|i[r+16>>2])||(e=0|i[r+20>>2]);)r=e,c=(s=(l=(-8&i[e+4>>2])-d|0)>>>0<u>>>0)?e:c,u=s?l:u;if((l=c+d|0)>>>0>c>>>0){s=0|i[c+24>>2],n=0|i[c+12>>2];do{if((0|n)==(0|c)){if(!(n=0|i[(e=c+20|0)>>2])&&!(n=0|i[(e=c+16|0)>>2])){r=0;break}for(;;)if(r=0|i[(o=n+20|0)>>2])n=r,e=o;else{if(!(r=0|i[(o=n+16|0)>>2]))break;n=r,e=o}i[e>>2]=0,r=n}else r=0|i[c+8>>2],i[r+12>>2]=n,i[n+8>>2]=r,r=n}while(0);do{if(0|s){if(n=0|i[c+28>>2],(0|c)==(0|i[(e=23620+(n<<2)|0)>>2])){if(i[e>>2]=r,!r){i[5830]=a&~(1<<n);break}}else if(i[((0|i[(w=s+16|0)>>2])==(0|c)?w:s+20)>>2]=r,!r)break;i[r+24>>2]=s,0|(n=0|i[c+16>>2])&&(i[r+16>>2]=n,i[n+24>>2]=r),0|(n=0|i[c+20>>2])&&(i[r+20>>2]=n,i[n+24>>2]=r)}}while(0);return u>>>0<16?(w=u+d|0,i[c+4>>2]=3|w,i[(w=c+w+4|0)>>2]=1|i[w>>2]):(i[c+4>>2]=3|d,i[l+4>>2]=1|u,i[l+u>>2]=u,0|A&&(o=0|i[5834],r=23356+((n=A>>>3)<<1<<2)|0,(n=1<<n)&h?n=0|i[(e=r+8|0)>>2]:(i[5829]=n|h,n=r,e=r+8|0),i[e>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5831]=u,i[5834]=l),k=t,0|(w=c+8|0)}h=d}else h=d}else h=d}else if(e>>>0<=4294967231)if(d=-8&(e=e+11|0),o=0|i[5830]){s=0-d|0,u=(e>>>=8)?d>>>0>16777215?31:d>>>((u=14-((c=((m=e<<(h=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|h|(u=((m<<=c)+245760|0)>>>16&2))+(m<<u>>>15)|0)+7|0)&1|u<<1:0,r=0|i[23620+(u<<2)>>2];e:do{if(r)for(e=0,c=d<<(31==(0|u)?0:25-(u>>>1)),a=0;;){if((l=(-8&i[r+4>>2])-d|0)>>>0<s>>>0){if(!l){e=r,s=0,m=65;break e}e=r,s=l}if(a=0==(0|(m=0|i[r+20>>2]))|(0|m)==(0|(r=0|i[r+16+(c>>>31<<2)>>2]))?a:m,!r){r=a,m=61;break}c<<=1}else r=0,e=0,m=61}while(0);if(61==(0|m)){if(0==(0|r)&0==(0|e)){if(!(e=((e=2<<u)|0-e)&o)){h=d;break}h=(e&0-e)-1|0,e=0,r=0|i[23620+(((a=(h>>>=l=h>>>12&16)>>>5&8)|l|(c=(h>>>=a)>>>2&4)|(u=(h>>>=c)>>>1&2)|(r=(h>>>=u)>>>1&1))+(h>>>r)<<2)>>2]}r?m=65:(c=e,l=s)}if(65==(0|m))for(a=r;;){if(s=(r=(h=(-8&i[a+4>>2])-d|0)>>>0<s>>>0)?h:s,e=r?a:e,(r=0|i[a+16>>2])||(r=0|i[a+20>>2]),!r){c=e,l=s;break}a=r}if(0!=(0|c)&&l>>>0<((0|i[5831])-d|0)>>>0&&(A=c+d|0)>>>0>c>>>0){a=0|i[c+24>>2],n=0|i[c+12>>2];do{if((0|n)==(0|c)){if(!(n=0|i[(e=c+20|0)>>2])&&!(n=0|i[(e=c+16|0)>>2])){n=0;break}for(;;)if(r=0|i[(s=n+20|0)>>2])n=r,e=s;else{if(!(r=0|i[(s=n+16|0)>>2]))break;n=r,e=s}i[e>>2]=0}else w=0|i[c+8>>2],i[w+12>>2]=n,i[n+8>>2]=w}while(0);do{if(a){if(e=0|i[c+28>>2],(0|c)==(0|i[(r=23620+(e<<2)|0)>>2])){if(i[r>>2]=n,!n){o&=~(1<<e),i[5830]=o;break}}else if(i[((0|i[(w=a+16|0)>>2])==(0|c)?w:a+20)>>2]=n,!n)break;i[n+24>>2]=a,0|(e=0|i[c+16>>2])&&(i[n+16>>2]=e,i[e+24>>2]=n),(e=0|i[c+20>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);e:do{if(l>>>0<16)w=l+d|0,i[c+4>>2]=3|w,i[(w=c+w+4|0)>>2]=1|i[w>>2];else{if(i[c+4>>2]=3|d,i[A+4>>2]=1|l,i[A+l>>2]=l,n=l>>>3,l>>>0<256){r=23356+(n<<1<<2)|0,(e=0|i[5829])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5829]=e|n,n=r,e=r+8|0),i[e>>2]=A,i[n+12>>2]=A,i[A+8>>2]=n,i[A+12>>2]=r;break}if(n=23620+((r=(n=l>>>8)?l>>>0>16777215?31:l>>>((r=14-((y=((w=n<<(x=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|x|(r=((w<<=y)+245760|0)>>>16&2))+(w<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[A+28>>2]=r,i[(e=A+16|0)+4>>2]=0,i[e>>2]=0,!(o&(e=1<<r))){i[5830]=o|e,i[n>>2]=A,i[A+24>>2]=n,i[A+12>>2]=A,i[A+8>>2]=A;break}n=0|i[n>>2];t:do{if((-8&i[n+4>>2])!=(0|l)){for(o=l<<(31==(0|r)?0:25-(r>>>1));e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2])==(0|l)){n=e;break t}o<<=1,n=e}i[r>>2]=A,i[A+24>>2]=n,i[A+12>>2]=A,i[A+8>>2]=A;break e}}while(0);w=0|i[(x=n+8|0)>>2],i[w+12>>2]=A,i[x>>2]=A,i[A+8>>2]=w,i[A+12>>2]=n,i[A+24>>2]=0}}while(0);return k=t,0|(w=c+8|0)}h=d}else h=d;else h=-1}while(0);if((r=0|i[5831])>>>0>=h>>>0)return n=r-h|0,e=0|i[5834],n>>>0>15?(w=e+h|0,i[5834]=w,i[5831]=n,i[w+4>>2]=1|n,i[e+r>>2]=n,i[e+4>>2]=3|h):(i[5831]=0,i[5834]=0,i[e+4>>2]=3|r,i[(w=e+r+4|0)>>2]=1|i[w>>2]),k=t,0|(w=e+8|0);if((l=0|i[5832])>>>0>h>>>0)return y=l-h|0,i[5832]=y,x=(w=0|i[5835])+h|0,i[5835]=x,i[x+4>>2]=1|y,i[w+4>>2]=3|h,k=t,0|(w=w+8|0);if(0|i[5947]?e=0|i[5949]:(i[5949]=4096,i[5948]=4096,i[5950]=-1,i[5951]=-1,i[5952]=0,i[5940]=0,i[5947]=-16&f^1431655768,e=4096),c=h+48|0,(d=(a=e+(u=h+47|0)|0)&(s=0-e|0))>>>0<=h>>>0)return k=t,0|(w=0);if(0|(e=0|i[5939])&&(f=(A=0|i[5937])+d|0)>>>0<=A>>>0|f>>>0>e>>>0)return k=t,0|(w=0);e:do{if(4&i[5940])n=0,m=143;else{r=0|i[5835];t:do{if(r){for(o=23764;!((f=0|i[o>>2])>>>0<=r>>>0&&(f+(0|i[o+4>>2])|0)>>>0>r>>>0);){if(!(e=0|i[o+8>>2])){m=128;break t}o=e}if((n=a-l&s)>>>0<2147483647)if((0|(e=0|Bt(0|n)))==((0|i[o>>2])+(0|i[o+4>>2])|0)){if(-1!=(0|e)){l=n,a=e,m=145;break e}}else o=e,m=136;else n=0}else m=128}while(0);do{if(128==(0|m))if(-1!=(0|(r=0|Bt(0)))&&(n=r,g=(n=(0==((g=(p=0|i[5948])+-1|0)&n)?0:(g+n&0-p)-n|0)+d|0)+(p=0|i[5937])|0,n>>>0>h>>>0&n>>>0<2147483647)){if(0|(f=0|i[5939])&&g>>>0<=p>>>0|g>>>0>f>>>0){n=0;break}if((0|(e=0|Bt(0|n)))==(0|r)){l=n,a=r,m=145;break e}o=e,m=136}else n=0}while(0);do{if(136==(0|m)){if(r=0-n|0,!(c>>>0>n>>>0&n>>>0<2147483647&-1!=(0|o))){if(-1==(0|o)){n=0;break}l=n,a=o,m=145;break e}if((e=u-n+(e=0|i[5949])&0-e)>>>0>=2147483647){l=n,a=o,m=145;break e}if(-1==(0|Bt(0|e))){Bt(0|r),n=0;break}l=e+n|0,a=o,m=145;break e}}while(0);i[5940]=4|i[5940],m=143}}while(0);if(143==(0|m)&&d>>>0<2147483647&&!(-1==(0|(y=0|Bt(0|d)))|1^(b=(v=(g=0|Bt(0))-y|0)>>>0>(h+40|0)>>>0)|y>>>0<g>>>0&-1!=(0|y)&-1!=(0|g)^1)&&(l=b?v:n,a=y,m=145),145==(0|m)){n=(0|i[5937])+l|0,i[5937]=n,n>>>0>(0|i[5938])>>>0&&(i[5938]=n),u=0|i[5835];e:do{if(u){for(n=23764;;){if((0|a)==((e=0|i[n>>2])+(r=0|i[n+4>>2])|0)){m=154;break}if(!(o=0|i[n+8>>2]))break;n=o}if(154==(0|m)&&(x=n+4|0,0==(8&i[n+12>>2]))&&a>>>0>u>>>0&e>>>0<=u>>>0){i[x>>2]=r+l,x=u+(y=0==(7&(y=u+8|0))?0:0-y&7)|0,y=(w=(0|i[5832])+l|0)-y|0,i[5835]=x,i[5832]=y,i[x+4>>2]=1|y,i[u+w+4>>2]=40,i[5836]=i[5951];break}for(a>>>0<(0|i[5833])>>>0&&(i[5833]=a),r=a+l|0,n=23764;;){if((0|i[n>>2])==(0|r)){m=162;break}if(!(e=0|i[n+8>>2]))break;n=e}if(162==(0|m)&&0==(8&i[n+12>>2])){i[n>>2]=a,i[(A=n+4|0)>>2]=(0|i[A>>2])+l,d=(A=a+(0==(7&(A=a+8|0))?0:0-A&7)|0)+h|0,c=(n=r+(0==(7&(n=r+8|0))?0:0-n&7)|0)-A-h|0,i[A+4>>2]=3|h;t:do{if((0|u)==(0|n))w=(0|i[5832])+c|0,i[5832]=w,i[5835]=d,i[d+4>>2]=1|w;else{if((0|i[5834])==(0|n)){w=(0|i[5831])+c|0,i[5831]=w,i[5834]=d,i[d+4>>2]=1|w,i[d+w>>2]=w;break}if(1==(3&(e=0|i[n+4>>2]))){l=-8&e,o=e>>>3;n:do{if(e>>>0<256){if(e=0|i[n+8>>2],(0|(r=0|i[n+12>>2]))==(0|e)){i[5829]=i[5829]&~(1<<o);break}i[e+12>>2]=r,i[r+8>>2]=e;break}a=0|i[n+24>>2],e=0|i[n+12>>2];do{if((0|e)==(0|n)){if(e=0|i[(o=(r=n+16|0)+4|0)>>2])r=o;else if(!(e=0|i[r>>2])){e=0;break}for(;;)if(o=0|i[(s=e+20|0)>>2])e=o,r=s;else{if(!(o=0|i[(s=e+16|0)>>2]))break;e=o,r=s}i[r>>2]=0}else w=0|i[n+8>>2],i[w+12>>2]=e,i[e+8>>2]=w}while(0);if(!a)break;o=23620+((r=0|i[n+28>>2])<<2)|0;do{if((0|i[o>>2])==(0|n)){if(i[o>>2]=e,0|e)break;i[5830]=i[5830]&~(1<<r);break n}if(i[((0|i[(w=a+16|0)>>2])==(0|n)?w:a+20)>>2]=e,!e)break n}while(0);if(i[e+24>>2]=a,0|(o=0|i[(r=n+16|0)>>2])&&(i[e+16>>2]=o,i[o+24>>2]=e),!(r=0|i[r+4>>2]))break;i[e+20>>2]=r,i[r+24>>2]=e}while(0);n=n+l|0,s=l+c|0}else s=c;if(i[(n=n+4|0)>>2]=-2&i[n>>2],i[d+4>>2]=1|s,i[d+s>>2]=s,n=s>>>3,s>>>0<256){r=23356+(n<<1<<2)|0,(e=0|i[5829])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5829]=e|n,n=r,e=r+8|0),i[e>>2]=d,i[n+12>>2]=d,i[d+8>>2]=n,i[d+12>>2]=r;break}n=s>>>8;do{if(n){if(s>>>0>16777215){o=31;break}o=s>>>((o=14-((y=((w=n<<(x=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|x|(o=((w<<=y)+245760|0)>>>16&2))+(w<<o>>>15)|0)+7|0)&1|o<<1}else o=0}while(0);if(n=23620+(o<<2)|0,i[d+28>>2]=o,i[(e=d+16|0)+4>>2]=0,i[e>>2]=0,!((e=0|i[5830])&(r=1<<o))){i[5830]=e|r,i[n>>2]=d,i[d+24>>2]=n,i[d+12>>2]=d,i[d+8>>2]=d;break}n=0|i[n>>2];n:do{if((-8&i[n+4>>2])!=(0|s)){for(o=s<<(31==(0|o)?0:25-(o>>>1));e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2])==(0|s)){n=e;break n}o<<=1,n=e}i[r>>2]=d,i[d+24>>2]=n,i[d+12>>2]=d,i[d+8>>2]=d;break t}}while(0);w=0|i[(x=n+8|0)>>2],i[w+12>>2]=d,i[x>>2]=d,i[d+8>>2]=w,i[d+12>>2]=n,i[d+24>>2]=0}}while(0);return k=t,0|(w=A+8|0)}for(n=23764;!((e=0|i[n>>2])>>>0<=u>>>0&&(w=e+(0|i[n+4>>2])|0)>>>0>u>>>0);)n=0|i[n+8>>2];n=(e=(e=(s=w+-47|0)+(0==(7&(e=s+8|0))?0:0-e&7)|0)>>>0<(s=u+16|0)>>>0?u:e)+8|0,x=a+(y=0==(7&(y=a+8|0))?0:0-y&7)|0,y=(r=l+-40|0)-y|0,i[5835]=x,i[5832]=y,i[x+4>>2]=1|y,i[a+r+4>>2]=40,i[5836]=i[5951],i[(r=e+4|0)>>2]=27,i[n>>2]=i[5941],i[n+4>>2]=i[5942],i[n+8>>2]=i[5943],i[n+12>>2]=i[5944],i[5941]=a,i[5942]=l,i[5944]=0,i[5943]=n,n=e+24|0;do{x=n,i[(n=n+4|0)>>2]=7}while((x+8|0)>>>0<w>>>0);if((0|e)!=(0|u)){if(a=e-u|0,i[r>>2]=-2&i[r>>2],i[u+4>>2]=1|a,i[e>>2]=a,n=a>>>3,a>>>0<256){r=23356+(n<<1<<2)|0,(e=0|i[5829])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5829]=e|n,n=r,e=r+8|0),i[e>>2]=u,i[n+12>>2]=u,i[u+8>>2]=n,i[u+12>>2]=r;break}if(r=23620+((o=(n=a>>>8)?a>>>0>16777215?31:a>>>((o=14-((y=((w=n<<(x=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|x|(o=((w<<=y)+245760|0)>>>16&2))+(w<<o>>>15)|0)+7|0)&1|o<<1:0)<<2)|0,i[u+28>>2]=o,i[u+20>>2]=0,i[s>>2]=0,!((n=0|i[5830])&(e=1<<o))){i[5830]=n|e,i[r>>2]=u,i[u+24>>2]=r,i[u+12>>2]=u,i[u+8>>2]=u;break}n=0|i[r>>2];t:do{if((-8&i[n+4>>2])!=(0|a)){for(o=a<<(31==(0|o)?0:25-(o>>>1));e=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[e+4>>2])==(0|a)){n=e;break t}o<<=1,n=e}i[r>>2]=u,i[u+24>>2]=n,i[u+12>>2]=u,i[u+8>>2]=u;break e}}while(0);w=0|i[(x=n+8|0)>>2],i[w+12>>2]=u,i[x>>2]=u,i[u+8>>2]=w,i[u+12>>2]=n,i[u+24>>2]=0}}else 0==(0|(w=0|i[5833]))|a>>>0<w>>>0&&(i[5833]=a),i[5941]=a,i[5942]=l,i[5944]=0,i[5838]=i[5947],i[5837]=-1,i[5842]=23356,i[5841]=23356,i[5844]=23364,i[5843]=23364,i[5846]=23372,i[5845]=23372,i[5848]=23380,i[5847]=23380,i[5850]=23388,i[5849]=23388,i[5852]=23396,i[5851]=23396,i[5854]=23404,i[5853]=23404,i[5856]=23412,i[5855]=23412,i[5858]=23420,i[5857]=23420,i[5860]=23428,i[5859]=23428,i[5862]=23436,i[5861]=23436,i[5864]=23444,i[5863]=23444,i[5866]=23452,i[5865]=23452,i[5868]=23460,i[5867]=23460,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,x=a+(y=0==(7&(y=a+8|0))?0:0-y&7)|0,y=(w=l+-40|0)-y|0,i[5835]=x,i[5832]=y,i[x+4>>2]=1|y,i[a+w+4>>2]=40,i[5836]=i[5951]}while(0);if((n=0|i[5832])>>>0>h>>>0)return y=n-h|0,i[5832]=y,x=(w=0|i[5835])+h|0,i[5835]=x,i[x+4>>2]=1|y,i[w+4>>2]=3|h,k=t,0|(w=w+8|0)}return i[(w=23312)>>2]=12,k=t,0|(w=0)}function vt(e){var t=0,n=0,r=0,o=0,s=0,a=0,l=0,c=0;if(e|=0){n=e+-8|0,o=0|i[5833],c=n+(t=-8&(e=0|i[e+-4>>2]))|0;do{if(1&e)l=n,a=n;else{if(r=0|i[n>>2],!(3&e))return;if(s=r+t|0,(a=n+(0-r)|0)>>>0<o>>>0)return;if((0|i[5834])==(0|a)){if(3!=(3&(t=0|i[(e=c+4|0)>>2]))){l=a,t=s;break}return i[5831]=s,i[e>>2]=-2&t,i[a+4>>2]=1|s,void(i[a+s>>2]=s)}if(n=r>>>3,r>>>0<256){if(e=0|i[a+8>>2],(0|(t=0|i[a+12>>2]))==(0|e)){i[5829]=i[5829]&~(1<<n),l=a,t=s;break}i[e+12>>2]=t,i[t+8>>2]=e,l=a,t=s;break}o=0|i[a+24>>2],e=0|i[a+12>>2];do{if((0|e)==(0|a)){if(e=0|i[(n=(t=a+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){e=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0}else l=0|i[a+8>>2],i[l+12>>2]=e,i[e+8>>2]=l}while(0);if(o){if(t=0|i[a+28>>2],(0|i[(n=23620+(t<<2)|0)>>2])==(0|a)){if(i[n>>2]=e,!e){i[5830]=i[5830]&~(1<<t),l=a,t=s;break}}else if(i[((0|i[(l=o+16|0)>>2])==(0|a)?l:o+20)>>2]=e,!e){l=a,t=s;break}i[e+24>>2]=o,0|(n=0|i[(t=a+16|0)>>2])&&(i[e+16>>2]=n,i[n+24>>2]=e),(t=0|i[t+4>>2])?(i[e+20>>2]=t,i[t+24>>2]=e,l=a,t=s):(l=a,t=s)}else l=a,t=s}}while(0);if(!(a>>>0>=c>>>0)&&1&(r=0|i[(e=c+4|0)>>2])){if(2&r)i[e>>2]=-2&r,i[l+4>>2]=1|t,i[a+t>>2]=t,o=t;else{if((0|i[5835])==(0|c)){if(c=(0|i[5832])+t|0,i[5832]=c,i[5835]=l,i[l+4>>2]=1|c,(0|l)!=(0|i[5834]))return;return i[5834]=0,void(i[5831]=0)}if((0|i[5834])==(0|c))return c=(0|i[5831])+t|0,i[5831]=c,i[5834]=a,i[l+4>>2]=1|c,void(i[a+c>>2]=c);o=(-8&r)+t|0,n=r>>>3;do{if(r>>>0<256){if(t=0|i[c+8>>2],(0|(e=0|i[c+12>>2]))==(0|t)){i[5829]=i[5829]&~(1<<n);break}i[t+12>>2]=e,i[e+8>>2]=t;break}s=0|i[c+24>>2],e=0|i[c+12>>2];do{if((0|e)==(0|c)){if(e=0|i[(n=(t=c+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){n=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0,n=e}else n=0|i[c+8>>2],i[n+12>>2]=e,i[e+8>>2]=n,n=e}while(0);if(0|s){if(e=0|i[c+28>>2],(0|i[(t=23620+(e<<2)|0)>>2])==(0|c)){if(i[t>>2]=n,!n){i[5830]=i[5830]&~(1<<e);break}}else if(i[((0|i[(r=s+16|0)>>2])==(0|c)?r:s+20)>>2]=n,!n)break;i[n+24>>2]=s,0|(t=0|i[(e=c+16|0)>>2])&&(i[n+16>>2]=t,i[t+24>>2]=n),0|(e=0|i[e+4>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);if(i[l+4>>2]=1|o,i[a+o>>2]=o,(0|l)==(0|i[5834]))return void(i[5831]=o)}if(e=o>>>3,o>>>0<256)return n=23356+(e<<1<<2)|0,(t=0|i[5829])&(e=1<<e)?e=0|i[(t=n+8|0)>>2]:(i[5829]=t|e,e=n,t=n+8|0),i[t>>2]=l,i[e+12>>2]=l,i[l+8>>2]=e,void(i[l+12>>2]=n);e=23620+((r=(e=o>>>8)?o>>>0>16777215?31:o>>>((r=14-((s=((c=e<<(a=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|a|(r=((c<<=s)+245760|0)>>>16&2))+(c<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[l+28>>2]=r,i[l+20>>2]=0,i[l+16>>2]=0,t=0|i[5830],n=1<<r;e:do{if(t&n){e=0|i[e>>2];t:do{if((-8&i[e+4>>2])!=(0|o)){for(r=o<<(31==(0|r)?0:25-(r>>>1));t=0|i[(n=e+16+(r>>>31<<2)|0)>>2];){if((-8&i[t+4>>2])==(0|o)){e=t;break t}r<<=1,e=t}i[n>>2]=l,i[l+24>>2]=e,i[l+12>>2]=l,i[l+8>>2]=l;break e}}while(0);c=0|i[(a=e+8|0)>>2],i[c+12>>2]=l,i[a>>2]=l,i[l+8>>2]=c,i[l+12>>2]=e,i[l+24>>2]=0}else i[5830]=t|n,i[e>>2]=l,i[l+24>>2]=e,i[l+12>>2]=l,i[l+8>>2]=l}while(0);if(c=(0|i[5837])-1|0,i[5837]=c,!(0|c)){for(e=23772;e=0|i[e>>2];)e=e+8|0;i[5837]=-1}}}}function bt(e,t){t|=0;var n=0;return(e|=0)?(n=0|b(t,e),(t|e)>>>0>65535&&(n=((n>>>0)/(e>>>0)|0)==(0|t)?n:-1)):n=0,(e=0|mt(n))&&3&i[e+-4>>2]?(Tt(0|e,0,0|n),0|e):0|e}function yt(e,t,n,r){return 0|(w(0|(r=(t|=0)-(r|=0)-((n|=0)>>>0>(e|=0)>>>0|0)>>>0)),e-n>>>0)}function xt(e){return 0|((e|=0)?31-(0|x(e^e-1)):32)}function wt(e,t,n,r,o){o|=0;var s=0,a=0,l=0,c=0,u=0,d=0,A=0,h=0,f=0,p=0;if(d=e|=0,a=n|=0,l=h=r|=0,!(u=c=t|=0))return s=0!=(0|o),l?s?(i[o>>2]=0|e,i[o+4>>2]=0,o=0,0|(w(0|(h=0)),o)):(o=0,0|(w(0|(h=0)),o)):(s&&(i[o>>2]=(d>>>0)%(a>>>0),i[o+4>>2]=0),o=(d>>>0)/(a>>>0)>>>0,0|(w(0|(h=0)),o));s=0==(0|l);do{if(a){if(!s){if((s=(0|x(0|l))-(0|x(0|u))|0)>>>0<=31){a=A=s+1|0,e=d>>>(A>>>0)&(t=s-31>>31)|u<<(l=31-s|0),t&=u>>>(A>>>0),s=0,l=d<<l;break}return o?(i[o>>2]=0|e,i[o+4>>2]=0|c,o=0,0|(w(0|(h=0)),o)):(o=0,0|(w(0|(h=0)),o))}if((s=a-1|0)&a){a=l=33+(0|x(0|a))-(0|x(0|u))|0,e=(A=32-l|0)-1>>31&u>>>((f=l-32|0)>>>0)|(u<<A|d>>>(l>>>0))&(t=f>>31),t&=u>>>(l>>>0),s=d<<(p=64-l|0)&(c=A>>31),l=(u<<p|d>>>(f>>>0))&c|d<<A&l-33>>31;break}return 0|o&&(i[o>>2]=s&d,i[o+4>>2]=0),1==(0|a)?(p=0|e,0|(w(0|(f=0|c)),p)):(f=u>>>((p=0|xt(0|a))>>>0)|0,p=u<<32-p|d>>>(p>>>0),0|(w(0|f),p))}if(s)return 0|o&&(i[o>>2]=(u>>>0)%(a>>>0),i[o+4>>2]=0),p=(u>>>0)/(a>>>0)>>>0,0|(w(0|(f=0)),p);if(!d)return 0|o&&(i[o>>2]=0,i[o+4>>2]=(u>>>0)%(l>>>0)),p=(u>>>0)/(l>>>0)>>>0,0|(w(0|(f=0)),p);if(!((s=l-1|0)&l))return 0|o&&(i[o>>2]=0|e,i[o+4>>2]=s&u),f=0,p=u>>>((0|xt(0|l))>>>0),0|(w(0|f),p);if((s=(0|x(0|l))-(0|x(0|u))|0)>>>0<=30){a=t=s+1|0,e=u<<(l=31-s|0)|d>>>(t>>>0),t=u>>>(t>>>0),s=0,l=d<<l;break}return o?(i[o>>2]=0|e,i[o+4>>2]=0|c,p=0,0|(w(0|(f=0)),p)):(p=0,0|(w(0|(f=0)),p))}while(0);if(a){u=0|function(e,t,n,r){return 0|(w((t|=0)+(r|=0)+((n=(e|=0)+(n|=0)>>>0)>>>0<e>>>0|0)>>>0|0),n)}(0|(A=0|n),0|(d=0|h),-1,-1),n=0|_(),c=l,l=0;do{r=c,c=s>>>31|c<<1,s=l|s<<1,yt(0|u,0|n,0|(r=e<<1|r>>>31),0|(h=e>>>31|t<<1)),l=1&(f=(p=0|_())>>31|((0|p)<0?-1:0)<<1),e=0|yt(0|r,0|h,f&A,(((0|p)<0?-1:0)>>31|((0|p)<0?-1:0)<<1)&d),t=0|_(),a=a-1|0}while(0!=(0|a));u=c,c=0}else u=l,c=0,l=0;return a=0,0|o&&(i[o>>2]=e,i[o+4>>2]=t),p=s<<1&-2|l,0|(w(0|(f=(0|s)>>>31|(u|a)<<1|c)),p)}function _t(e,t,n,r){var o,s;return s=k,k=k+16|0,wt(e|=0,t|=0,n|=0,r|=0,o=0|s),k=s,0|(w(0|i[o+4>>2]),i[o>>2])}function St(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(w(t>>>n|0),e>>>n|(t&(1<<n)-1)<<32-n):(w(0),t>>>n-32|0)}function Ct(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(w(t<<n|(e&(1<<n)-1<<32-n)>>>32-n),e<<n):(w(e<<n-32),0)}function Et(e,t){return t=+t,(e=+e)!=e?+t:t!=t?+e:+y(+e,+t)}function Mt(e){return(e=+e)>=0?+a(e+.5):+v(e-.5)}function Pt(e,t,n){e|=0,t|=0;var o,s,a=0;if((0|(n|=0))>=8192)return M(0|e,0|t,0|n),0|e;if(s=0|e,o=e+n|0,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|s;r[e|0]=0|r[t|0],e=e+1|0,t=t+1|0,n=n-1|0}for(a=(n=-4&o)-64|0;(0|e)<=(0|a);)i[e>>2]=i[t>>2],i[e+4>>2]=i[t+4>>2],i[e+8>>2]=i[t+8>>2],i[e+12>>2]=i[t+12>>2],i[e+16>>2]=i[t+16>>2],i[e+20>>2]=i[t+20>>2],i[e+24>>2]=i[t+24>>2],i[e+28>>2]=i[t+28>>2],i[e+32>>2]=i[t+32>>2],i[e+36>>2]=i[t+36>>2],i[e+40>>2]=i[t+40>>2],i[e+44>>2]=i[t+44>>2],i[e+48>>2]=i[t+48>>2],i[e+52>>2]=i[t+52>>2],i[e+56>>2]=i[t+56>>2],i[e+60>>2]=i[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|n);)i[e>>2]=i[t>>2],e=e+4|0,t=t+4|0}else for(n=o-4|0;(0|e)<(0|n);)r[e|0]=0|r[t|0],r[e+1|0]=0|r[t+1|0],r[e+2|0]=0|r[t+2|0],r[e+3|0]=0|r[t+3|0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|o);)r[e|0]=0|r[t|0],e=e+1|0,t=t+1|0;return 0|s}function Tt(e,t,n){t|=0;var o,s=0,a=0,l=0;if(o=(e|=0)+(n|=0)|0,t&=255,(0|n)>=67){for(;3&e;)r[e|0]=t,e=e+1|0;for(l=t|t<<8|t<<16|t<<24,a=(s=-4&o)-64|0;(0|e)<=(0|a);)i[e>>2]=l,i[e+4>>2]=l,i[e+8>>2]=l,i[e+12>>2]=l,i[e+16>>2]=l,i[e+20>>2]=l,i[e+24>>2]=l,i[e+28>>2]=l,i[e+32>>2]=l,i[e+36>>2]=l,i[e+40>>2]=l,i[e+44>>2]=l,i[e+48>>2]=l,i[e+52>>2]=l,i[e+56>>2]=l,i[e+60>>2]=l,e=e+64|0;for(;(0|e)<(0|s);)i[e>>2]=l,e=e+4|0}for(;(0|e)<(0|o);)r[e|0]=t,e=e+1|0;return o-n|0}function kt(e){return(e=+e)>=0?+a(e+.5):+v(e-.5)}function Bt(e){e|=0;var t,n,r;return r=0|E(),(0|e)>0&(0|(t=(n=0|i[s>>2])+e|0))<(0|n)|(0|t)<0?(T(0|t),C(12),-1):(0|t)>(0|r)&&!(0|P(0|t))?(C(12),-1):(i[s>>2]=t,0|n)}return{___uremdi3:_t,_bitshift64Lshr:St,_bitshift64Shl:Ct,_calloc:bt,_cellAreaKm2:function(e,t){var n,r,o,s=0;if(o=k,k=k+192|0,r=o,He(e|=0,t|=0,n=o+168|0),We(e,t,r),(0|(t=0|i[r>>2]))>0){if(s=+Te(r+8|0,r+8+((1!=(0|t)&1)<<4)|0,n)+0,1!=(0|t)){e=1;do{s+=+Te(r+8+(e<<4)|0,r+8+((0|(e=e+1|0))%(0|t)<<4)|0,n)}while((0|e)<(0|t))}}else s=0;return k=o,6371.007180918475*s*6371.007180918475},_cellAreaM2:function(e,t){var n,r,o,s=0;if(o=k,k=k+192|0,r=o,He(e|=0,t|=0,n=o+168|0),We(e,t,r),(0|(t=0|i[r>>2]))>0){if(s=+Te(r+8|0,r+8+((1!=(0|t)&1)<<4)|0,n)+0,1!=(0|t)){e=1;do{s+=+Te(r+8+(e<<4)|0,r+8+((0|(e=e+1|0))%(0|t)<<4)|0,n)}while((0|e)<(0|t))}}else s=0;return k=o,6371.007180918475*s*6371.007180918475*1e3*1e3},_cellAreaRads2:function(e,t){var n,r,o,s=0;if(o=k,k=k+192|0,r=o,He(e|=0,t|=0,n=o+168|0),We(e,t,r),(0|(t=0|i[r>>2]))<=0)return k=o,+(s=0);if(s=+Te(r+8|0,r+8+((1!=(0|t)&1)<<4)|0,n)+0,1==(0|t))return k=o,+s;e=1;do{s+=+Te(r+8+(e<<4)|0,r+8+((0|(e=e+1|0))%(0|t)<<4)|0,n)}while((0|e)<(0|t));return k=o,+s},_compact:function(e,t,n){t|=0;var r,o=0,s=0,a=0,l=0,c=0,u=0,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0,y=0,x=0,w=0,S=0,C=0,E=0;if(!(n|=0))return 0|(C=0);if(o=0|i[(s=e|=0)>>2],!0&0==(15728640&(s=0|i[s+4>>2]))){if((0|n)<=0)return 0|(C=0);if(i[(C=t)>>2]=o,i[C+4>>2]=s,1==(0|n))return 0|(C=0);o=1;do{S=0|i[(w=e+(o<<3)|0)+4>>2],i[(C=t+(o<<3)|0)>>2]=i[w>>2],i[C+4>>2]=S,o=o+1|0}while((0|o)!=(0|n));return 0|(o=0)}if(!(S=0|mt(w=n<<3)))return 0|(C=-3);if(Pt(0|S,0|e,0|w),!(r=0|bt(n,8)))return vt(S),0|(C=-3);o=n;e:for(;;){y=0|St(0|(A=0|i[(l=S)>>2]),0|(l=0|i[l+4>>2]),52),_(),x=(y&=15)+-1|0,b=(0|o)>0;t:do{if(b){if(v=((0|o)<0)<<31>>31,g=0|Ct(0|x,0,52),m=0|_(),x>>>0>15)for(s=0,e=A,n=l;;){if(!(0==(0|e)&0==(0|n))){if(a=0|St(0|e,0|n,52),_(),c=(0|(a&=15))<(0|x),a=(0|a)==(0|x),n=0|_t(0|(d=c?0:a?e:0),0|(e=c?0:a?n:0),0|o,0|v),_(),0==(0|(u=0|i[(c=a=r+(n<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2])))n=d;else for(g=0,p=n,f=c,n=d;;){if((0|g)>(0|o)){C=41;break e}if((0|u)==(0|n)&(-117440513&f)==(0|e)){d=0|St(0|u,0|f,56),_(),h=(d&=7)+1|0,m=0|St(0|u,0|f,45),_();n:do{if(0|D(127&m)){if(u=0|St(0|u,0|f,52),_(),!(u&=15)){c=6;break}for(c=1;;){if(!(0==((m=0|Ct(7,0,3*(15-c|0)|0))&n)&0==(_()&e))){c=7;break n}if(!(c>>>0<u>>>0)){c=6;break}c=c+1|0}}else c=7}while(0);if((d+2|0)>>>0>c>>>0){C=51;break e}m=0|Ct(0|h,0,56),e=_()|-117440513&e,i[(c=a)>>2]=0,i[c+4>>2]=0,c=p,n|=m}else c=(p+1|0)%(0|o)|0;if(0==(0|(u=0|i[(f=a=r+(c<<3)|0)>>2]))&0==(0|(f=0|i[f+4>>2])))break;g=g+1|0,p=c}i[(m=a)>>2]=n,i[m+4>>2]=e}if((0|(s=s+1|0))>=(0|o))break t;e=0|i[(n=S+(s<<3)|0)>>2],n=0|i[n+4>>2]}for(s=0,e=A,n=l;;){if(!(0==(0|e)&0==(0|n))){if(c=0|St(0|e,0|n,52),_(),(0|(c&=15))>=(0|x)){if((0|c)!=(0|x)&&(e|=g,n=-15728641&n|m,c>>>0>=y>>>0)){a=x;do{p=0|Ct(7,0,3*(14-a|0)|0),a=a+1|0,e|=p,n=_()|n}while(a>>>0<c>>>0)}}else e=0,n=0;if(c=0|_t(0|e,0|n,0|o,0|v),_(),!(0==(0|(d=0|i[(u=a=r+(c<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2]))))for(p=0;;){if((0|p)>(0|o)){C=41;break e}if((0|d)==(0|e)&(-117440513&u)==(0|n)){h=0|St(0|d,0|u,56),_(),f=(h&=7)+1|0,E=0|St(0|d,0|u,45),_();n:do{if(0|D(127&E)){if(d=0|St(0|d,0|u,52),_(),!(d&=15)){u=6;break}for(u=1;;){if(!(0==((E=0|Ct(7,0,3*(15-u|0)|0))&e)&0==(_()&n))){u=7;break n}if(!(u>>>0<d>>>0)){u=6;break}u=u+1|0}}else u=7}while(0);if((h+2|0)>>>0>u>>>0){C=51;break e}E=0|Ct(0|f,0,56),n=_()|-117440513&n,i[(f=a)>>2]=0,i[f+4>>2]=0,e|=E}else c=(c+1|0)%(0|o)|0;if(0==(0|(d=0|i[(u=a=r+(c<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2])))break;p=p+1|0}i[(E=a)>>2]=e,i[E+4>>2]=n}if((0|(s=s+1|0))>=(0|o))break t;e=0|i[(n=S+(s<<3)|0)>>2],n=0|i[n+4>>2]}}}while(0);if((o+5|0)>>>0<11){C=99;break}if(!(m=0|bt((0|o)/6|0,8))){C=58;break}t:do{if(b){p=0,f=0;do{if(!(0==(0|(s=0|i[(e=c=r+(p<<3)|0)>>2]))&0==(0|(e=0|i[e+4>>2])))){u=0|St(0|s,0|e,56),_(),n=(u&=7)+1|0,d=-117440513&e,E=0|St(0|s,0|e,45),_();n:do{if(0|D(127&E)){if(h=0|St(0|s,0|e,52),_(),0|(h&=15))for(a=1;;){if(!(0==(s&(E=0|Ct(7,0,3*(15-a|0)|0)))&0==(d&_())))break n;if(!(a>>>0<h>>>0))break;a=a+1|0}s|=e=0|Ct(0|n,0,56),e=_()|d,i[(n=c)>>2]=s,i[n+4>>2]=e,n=u+2|0}}while(0);7==(0|n)&&(i[(E=m+(f<<3)|0)>>2]=s,i[E+4>>2]=-117440513&e,f=f+1|0)}p=p+1|0}while((0|p)!=(0|o));if(b){if(g=((0|o)<0)<<31>>31,h=0|Ct(0|x,0,52),p=0|_(),x>>>0>15)for(e=0,s=0;;){do{if(!(0==(0|A)&0==(0|l))){for(u=0|St(0|A,0|l,52),_(),a=(0|(u&=15))<(0|x),u=(0|u)==(0|x),a=0|_t(0|(c=a?0:u?A:0),0|(u=a?0:u?l:0),0|o,0|g),_(),n=0;;){if((0|n)>(0|o)){C=98;break e}if((-117440513&(d=0|i[(E=r+(a<<3)|0)+4>>2]))==(0|u)&&(0|i[E>>2])==(0|c)){C=70;break}if((0|i[(E=r+((a=(a+1|0)%(0|o)|0)<<3)|0)>>2])==(0|c)&&(0|i[E+4>>2])==(0|u))break;n=n+1|0}if(70==(0|C)&&(C=0,!0&100663296==(117440512&d)))break;i[(E=t+(s<<3)|0)>>2]=A,i[E+4>>2]=l,s=s+1|0}}while(0);if((0|(e=e+1|0))>=(0|o)){o=f;break t}A=0|i[(l=S+(e<<3)|0)>>2],l=0|i[l+4>>2]}for(e=0,s=0;;){do{if(!(0==(0|A)&0==(0|l))){if(u=0|St(0|A,0|l,52),_(),(0|(u&=15))>=(0|x))if((0|u)!=(0|x))if(n=A|h,a=-15728641&l|p,u>>>0<y>>>0)u=a;else{c=x;do{E=0|Ct(7,0,3*(14-c|0)|0),c=c+1|0,n|=E,a=_()|a}while(c>>>0<u>>>0);u=a}else n=A,u=l;else n=0,u=0;for(c=0|_t(0|n,0|u,0|o,0|g),_(),a=0;;){if((0|a)>(0|o)){C=98;break e}if((-117440513&(d=0|i[(E=r+(c<<3)|0)+4>>2]))==(0|u)&&(0|i[E>>2])==(0|n)){C=93;break}if((0|i[(E=r+((c=(c+1|0)%(0|o)|0)<<3)|0)>>2])==(0|n)&&(0|i[E+4>>2])==(0|u))break;a=a+1|0}if(93==(0|C)&&(C=0,!0&100663296==(117440512&d)))break;i[(E=t+(s<<3)|0)>>2]=A,i[E+4>>2]=l,s=s+1|0}}while(0);if((0|(e=e+1|0))>=(0|o)){o=f;break t}A=0|i[(l=S+(e<<3)|0)>>2],l=0|i[l+4>>2]}}else s=0,o=f}else s=0,o=0}while(0);if(Tt(0|r,0,0|w),Pt(0|S,0|m,o<<3),vt(m),!o)break;t=t+(s<<3)|0}return 41==(0|C)?(vt(S),vt(r),0|(E=-1)):51==(0|C)?(vt(S),vt(r),0|(E=-2)):58==(0|C)?(vt(S),vt(r),0|(E=-3)):98==(0|C)?(vt(m),vt(S),vt(r),0|(E=-1)):(99==(0|C)&&Pt(0|t,0|S,o<<3),vt(S),vt(r),0|(E=0))},_destroyLinkedPolygon:function(e){var t=0,n=0,r=0,o=0;if(e|=0)for(r=1;;){if(0|(t=0|i[e>>2]))do{if(0|(n=0|i[t>>2]))do{o=n,n=0|i[n+16>>2],vt(o)}while(0!=(0|n));o=t,t=0|i[t+8>>2],vt(o)}while(0!=(0|t));if(t=e,e=0|i[e+8>>2],r||vt(t),!e)break;r=0}},_edgeLengthKm:function(e){return+ +o[20752+((e|=0)<<3)>>3]},_edgeLengthM:function(e){return+ +o[20880+((e|=0)<<3)>>3]},_emscripten_replace_memory:function(e){return r=new Int8Array(e),new Uint8Array(e),i=new Int32Array(e),new Float32Array(e),o=new Float64Array(e),n=e,!0},_exactEdgeLengthKm:function(e,t){var n,r,s=0,a=0,l=0,u=0,h=0,f=0;if(r=k,k=k+176|0,Ke(e|=0,t|=0,n=r),(0|(e=0|i[n>>2]))<=1)return k=r,+(l=0);t=e+-1|0,e=0,s=0,a=+o[n+8>>3],l=+o[n+16>>3];do{h=a,a=+o[n+8+((e=e+1|0)<<4)>>3],f=+A(.5*(a-h)),u=l,l=+o[n+8+(e<<4)+8>>3],u=f*f+(u=+A(.5*(l-u)))*(+d(+h)*+d(+a)*u),s+=2*+m(+ +c(+u),+ +c(+(1-u)))}while((0|e)!=(0|t));return k=r,+(f=6371.007180918475*s)},_exactEdgeLengthM:function(e,t){var n,r,s=0,a=0,l=0,u=0,h=0,f=0;if(r=k,k=k+176|0,Ke(e|=0,t|=0,n=r),(0|(e=0|i[n>>2]))<=1)return k=r,+(l=0);t=e+-1|0,e=0,s=0,a=+o[n+8>>3],l=+o[n+16>>3];do{h=a,a=+o[n+8+((e=e+1|0)<<4)>>3],f=+A(.5*(a-h)),u=l,l=+o[n+8+(e<<4)+8>>3],u=f*f+(u=+A(.5*(l-u)))*(+d(+h)*+d(+a)*u),s+=2*+m(+ +c(+u),+ +c(+(1-u)))}while((0|e)!=(0|t));return k=r,+(f=6371.007180918475*s*1e3)},_exactEdgeLengthRads:function(e,t){var n,r,s=0,a=0,l=0,u=0,h=0,f=0;if(r=k,k=k+176|0,Ke(e|=0,t|=0,n=r),(0|(e=0|i[n>>2]))<=1)return k=r,+(l=0);t=e+-1|0,e=0,s=0,a=+o[n+8>>3],l=+o[n+16>>3];do{h=a,a=+o[n+8+((e=e+1|0)<<4)>>3],f=+A(.5*(a-h)),u=l,l=+o[n+8+(e<<4)+8>>3],u=f*f+(u=+A(.5*(l-u)))*(+d(+a)*+d(+h)*u),s+=2*+m(+ +c(+u),+ +c(+(1-u)))}while((0|e)<(0|t));return k=r,+s},_experimentalH3ToLocalIj:function(e,t,n,r,i){var o,s;return i|=0,s=k,k=k+16|0,(e=0|$e(e|=0,t|=0,n|=0,r|=0,o=s))||(he(o,i),e=0),k=s,0|e},_experimentalLocalIjToH3:function(e,t,n,r){var i,o;return e|=0,t|=0,r|=0,i=k,k=k+16|0,fe(n|=0,o=i),r=0|et(e,t,o,r),k=i,0|r},_free:vt,_geoToH3:Ue,_getDestinationH3IndexFromUnidirectionalEdge:function(e,t){e|=0;var n,r,o=0;return n=k,k=k+16|0,o=n,!0&268435456==(2013265920&(t|=0))?(r=0|St(0|e,0|t,56),_(),i[o>>2]=0,o=0|R(e,-2130706433&t|134217728,7&r,o),t=0|_(),w(0|t),k=n,0|o):(o=0,w(0|(t=0)),k=n,0|o)},_getH3IndexesFromUnidirectionalEdge:function(e,t,n){e|=0;var r,o,s,a,l=0;s=k,k=k+16|0,r=s,a=!0&268435456==(2013265920&(t|=0)),o=-2130706433&t|134217728,i[(l=n|=0)>>2]=a?e:0,i[l+4>>2]=a?o:0,a?(t=0|St(0|e,0|t,56),_(),i[r>>2]=0,e=0|R(e,o,7&t,r),t=0|_()):(e=0,t=0),i[(l=n+8|0)>>2]=e,i[l+4>>2]=t,k=s},_getH3UnidirectionalEdge:function(e,t,n,r){var o,s,a=0,l=0,c=0,u=0,d=0;if(s=k,k=k+16|0,o=s,!(0|Je(e|=0,t|=0,n|=0,r|=0)))return u=0,w(0|(c=0)),k=s,0|u;for(c=-2130706433&t,a=(a=0==(0|Re(e,t)))?1:2;i[o>>2]=0,l=a+1|0,!((0|(d=0|R(e,t,a,o)))==(0|n)&(0|_())==(0|r));){if(!(l>>>0<7)){a=0,e=0,u=6;break}a=l}return 6==(0|u)?(w(0|a),k=s,0|e):(d=0|Ct(0|a,0,56),u=c|_()|268435456,d|=e,w(0|u),k=s,0|d)},_getH3UnidirectionalEdgeBoundary:Ke,_getH3UnidirectionalEdgesFromHexagon:function(e,t,n){n|=0;var r,o=0;r=0==(0|Re(e|=0,t|=0)),t&=-2130706433,i[(o=n)>>2]=r?e:0,i[o+4>>2]=r?285212672|t:0,i[(o=n+8|0)>>2]=e,i[o+4>>2]=301989888|t,i[(o=n+16|0)>>2]=e,i[o+4>>2]=318767104|t,i[(o=n+24|0)>>2]=e,i[o+4>>2]=335544320|t,i[(o=n+32|0)>>2]=e,i[o+4>>2]=352321536|t,i[(n=n+40|0)>>2]=e,i[n+4>>2]=369098752|t},_getOriginH3IndexFromUnidirectionalEdge:function(e,t){var n;return e|=0,w(0|((n=!0&268435456==(2013265920&(t|=0)))?-2130706433&t|134217728:0)),0|(n?e:0)},_getPentagonIndexes:Qe,_getRes0Indexes:function(e){e|=0;var t=0,n=0,r=0;t=0;do{Ct(0|t,0,45),r=134225919|_(),i[(n=e+(t<<3)|0)>>2]=-1,i[n+4>>2]=r,t=t+1|0}while(122!=(0|t))},_h3Distance:function(e,t,n,r){var i,o,s;return n|=0,r|=0,s=k,k=k+32|0,o=s,e=0==(0|$e(e|=0,t|=0,e,t,i=s+12|0))&&0==(0|$e(e,t,n,r,o))?0|Ae(i,o):-1,k=s,0|e},_h3GetBaseCell:ke,_h3GetFaces:function e(t,n,r){r|=0;var o,s=0,a=0,l=0,c=0,u=0,d=0,A=0,h=0;o=k,k=k+128|0,A=o+112|0,l=o+96|0,h=o,a=0|St(0|(t|=0),0|(n|=0),52),_(),u=15&a,i[A>>2]=u,c=0|St(0|t,0|n,45),_(),c&=127;e:do{if(0|D(c)){if(0|u)for(s=1;;){if(!(0==((d=0|Ct(7,0,3*(15-s|0)|0))&t)&0==(_()&n))){a=0;break e}if(!(s>>>0<u>>>0))break;s=s+1|0}if(!(1&a))return d=0|Ct(u+1|0,0,52),h=_()|-15728641&n,e((d|t)&~(A=0|Ct(7,0,3*(14-u|0)|0)),h&~_(),r),void(k=o);a=1}else a=0}while(0);Ve(t,n,l),a?(xe(l,A,h),d=5):(Ce(l,A,h),d=6);e:do{if(0|D(c))if(u)for(s=1;;){if(!(0==((c=0|Ct(7,0,3*(15-s|0)|0))&t)&0==(_()&n))){s=8;break e}if(!(s>>>0<u>>>0)){s=20;break}s=s+1|0}else s=20;else s=8}while(0);if(Tt(0|r,-1,0|s),a){a=0;do{for(_e(l=h+(a<<4)|0,0|i[A>>2]),l=0|i[l>>2],s=0;!(-1==(0|(u=0|i[(c=r+(s<<2)|0)>>2]))|(0|u)==(0|l));)s=s+1|0;i[c>>2]=l,a=a+1|0}while((0|a)!=(0|d))}else{a=0;do{for(we(l=h+(a<<4)|0,0|i[A>>2],0,1),l=0|i[l>>2],s=0;!(-1==(0|(u=0|i[(c=r+(s<<2)|0)>>2]))|(0|u)==(0|l));)s=s+1|0;i[c>>2]=l,a=a+1|0}while((0|a)!=(0|d))}k=o},_h3GetResolution:function(e,t){return t=0|St(0|(e|=0),0|(t|=0),52),_(),15&t},_h3IndexesAreNeighbors:Je,_h3IsPentagon:Re,_h3IsResClassIII:function(e,t){return t=0|St(0|(e|=0),0|(t|=0),52),_(),1&t},_h3IsValid:Be,_h3Line:function(e,t,n,r,o){n|=0,r|=0,o|=0;var s,a=0,c=0,u=0,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0,y=0,x=0,w=0,_=0,S=0;if(s=k,k=k+48|0,c=s+12|0,_=s,0==(0|$e(e|=0,t|=0,e,t,a=s+24|0))&&0==(0|$e(e,t,n,r,c))){if((0|(w=0|Ae(a,c)))<0)return k=s,0|(_=w);for(i[a>>2]=0,i[a+4>>2]=0,i[a+8>>2]=0,i[c>>2]=0,i[c+4>>2]=0,i[c+8>>2]=0,$e(e,t,e,t,a),$e(e,t,n,r,c),pe(a),pe(c),w?(g=+(0|w),x=a,n=h=0|i[a>>2],r=f=0|i[(b=a+4|0)>>2],a=p=0|i[(y=a+8|0)>>2],m=+((0|i[c>>2])-h|0)/g,v=+((0|i[c+4>>2])-f|0)/g,g=+((0|i[c+8>>2])-p|0)/g):(b=r=a+4|0,y=p=a+8|0,x=a,n=0|i[a>>2],r=0|i[r>>2],a=0|i[p>>2],m=0,v=0,g=0),i[_>>2]=n,i[(p=_+4|0)>>2]=r,i[(f=_+8|0)>>2]=a,h=0;;){S=m*(d=+(0|h))+ +(0|n),u=v*d+ +(0|i[b>>2]),d=g*d+ +(0|i[y>>2]),r=~~+Mt(+S),c=~~+Mt(+u),n=~~+Mt(+d),S=+l(+(+(0|r)-S)),u=+l(+(+(0|c)-u)),d=+l(+(+(0|n)-d));do{if(!(S>u&S>d)){if(A=0-r|0,u>d){a=A-n|0;break}a=c,n=A-c|0;break}r=0-(c+n)|0,a=c}while(0);if(i[_>>2]=r,i[p>>2]=a,i[f>>2]=n,ge(_),et(e,t,_,o+(h<<3)|0),(0|h)==(0|w))break;h=h+1|0,n=0|i[x>>2]}return k=s,0|(_=0)}return k=s,0|(_=-1)},_h3LineSize:function(e,t,n,r){var i,o,s;return n|=0,r|=0,s=k,k=k+32|0,o=s,e=0==(0|$e(e|=0,t|=0,e,t,i=s+12|0))&&0==(0|$e(e,t,n,r,o))?0|Ae(i,o):-1,k=s,(e>>>31^1)+e|0},_h3SetToLinkedGeo:function(e,t,n){n|=0;var r,o,s,a=0;if(s=k,k=k+32|0,r=s,function(e,t,n){e|=0,n|=0;var r,o,s=0,a=0,l=0,c=0,u=0;if(o=k,k=k+176|0,r=o,(0|(t|=0))<1)return ct(n,0,0),void(k=o);c=0|St(0|i[(c=e)>>2],0|i[c+4>>2],52),_(),ct(n,(0|t)>6?t:6,15&c),c=0;do{if(We(0|i[(s=e+(c<<3)|0)>>2],0|i[s+4>>2],r),(0|(s=0|i[r>>2]))>0){u=0;do{l=r+8+(u<<4)|0,(a=0|ft(n,s=r+8+((0|(u=u+1|0))%(0|s)<<4)|0,l))?At(n,a):ht(n,l,s),s=0|i[r>>2]}while((0|u)<(0|s))}c=c+1|0}while((0|c)!=(0|t));k=o}(e|=0,t|=0,o=s+16|0),i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,!(e=0|dt(o)))return qe(n),ut(o),void(k=s);do{t=0|Xe(n);do{Ye(t,e),a=e+16|0,i[r>>2]=i[a>>2],i[r+4>>2]=i[a+4>>2],i[r+8>>2]=i[a+8>>2],i[r+12>>2]=i[a+12>>2],At(o,e),e=0|pt(o,r)}while(0!=(0|e));e=0|dt(o)}while(0!=(0|e));qe(n),ut(o),k=s},_h3ToCenterChild:function(e,t,n){n|=0;var r=0,i=0;if(r=0|St(0|(e|=0),0|(t|=0),52),_(),(0|n)<16&(0|(r&=15))<=(0|n)){if((0|r)!=(0|n)&&(e|=i=0|Ct(0|n,0,52),t=_()|-15728641&t,(0|r)<(0|n)))do{i=0|Ct(7,0,3*(14-r|0)|0),r=r+1|0,e&=~i,t&=~_()}while((0|r)<(0|n))}else t=0,e=0;return w(0|t),0|e},_h3ToChildren:Ie,_h3ToGeo:He,_h3ToGeoBoundary:We,_h3ToParent:Oe,_h3UnidirectionalEdgeIsValid:function(e,t){var n=0;if(!(!0&268435456==(2013265920&(t|=0))))return 0|(n=0);switch(n=0|St(0|(e|=0),0|t,56),_(),7&n){case 0:case 7:return 0|(n=0)}return!0&16777216==(117440512&t)&0!=(0|Re(e,n=-2130706433&t|134217728))?0|(n=0):0|(n=0|Be(e,n))},_hexAreaKm2:function(e){return+ +o[20496+((e|=0)<<3)>>3]},_hexAreaM2:function(e){return+ +o[20624+((e|=0)<<3)>>3]},_hexRing:function(e,t,n,r){e|=0,t|=0,r|=0;var o,s=0,a=0,l=0,c=0,u=0,d=0,A=0;if(o=k,k=k+16|0,A=o,!(n|=0))return i[(A=r)>>2]=e,i[A+4>>2]=t,k=o,0|(A=0);i[A>>2]=0;e:do{if(0|Re(e,t))e=1;else{if(a=(0|n)>0){s=0,d=e;do{if(0==(0|(d=0|R(d,t,4,A)))&0==(0|(t=0|_()))){e=2;break e}if(s=s+1|0,0|Re(d,t)){e=1;break e}}while((0|s)<(0|n));if(i[(u=r)>>2]=d,i[u+4>>2]=t,u=n+-1|0,a){a=0,l=1,s=d,e=t;do{if(0==(0|(s=0|R(s,e,2,A)))&0==(0|(e=0|_()))){e=2;break e}if(i[(c=r+(l<<3)|0)>>2]=s,i[c+4>>2]=e,l=l+1|0,0|Re(s,e)){e=1;break e}a=a+1|0}while((0|a)<(0|n));c=0,a=l;do{if(0==(0|(s=0|R(s,e,3,A)))&0==(0|(e=0|_()))){e=2;break e}if(i[(l=r+(a<<3)|0)>>2]=s,i[l+4>>2]=e,a=a+1|0,0|Re(s,e)){e=1;break e}c=c+1|0}while((0|c)<(0|n));l=0;do{if(0==(0|(s=0|R(s,e,1,A)))&0==(0|(e=0|_()))){e=2;break e}if(i[(c=r+(a<<3)|0)>>2]=s,i[c+4>>2]=e,a=a+1|0,0|Re(s,e)){e=1;break e}l=l+1|0}while((0|l)<(0|n));l=0;do{if(0==(0|(s=0|R(s,e,5,A)))&0==(0|(e=0|_()))){e=2;break e}if(i[(c=r+(a<<3)|0)>>2]=s,i[c+4>>2]=e,a=a+1|0,0|Re(s,e)){e=1;break e}l=l+1|0}while((0|l)<(0|n));l=0;do{if(0==(0|(s=0|R(s,e,4,A)))&0==(0|(e=0|_()))){e=2;break e}if(i[(c=r+(a<<3)|0)>>2]=s,i[c+4>>2]=e,a=a+1|0,0|Re(s,e)){e=1;break e}l=l+1|0}while((0|l)<(0|n));for(l=0;;){if(0==(0|(s=0|R(s,e,6,A)))&0==(0|(e=0|_()))){e=2;break e}if((0|l)!=(0|u)){if(i[(c=r+(a<<3)|0)>>2]=s,i[c+4>>2]=e,0|Re(s,e)){e=1;break e}a=a+1|0}if((0|(l=l+1|0))>=(0|n)){l=d,a=t;break}}}else l=d,s=d,a=t,e=t}else i[(l=r)>>2]=e,i[l+4>>2]=t,l=e,s=e,a=t,e=t;e=1&((0|l)!=(0|s)|(0|a)!=(0|e))}}while(0);return k=o,0|(A=e)},_i64Subtract:yt,_kRing:B,_kRingDistances:function(e,t,n,r,i){var o;if(0|O(e|=0,t|=0,n|=0,r|=0,i|=0)){if(Tt(0|r,0,(o=1+(0|b(3*n|0,n+1|0))|0)<<3),0|i)return Tt(0|i,0,o<<2),void I(e,t,n,r,i,o,0);(i=0|bt(o,4))&&(I(e,t,n,r,i,o,0),vt(i))}},_llvm_minnum_f64:Et,_llvm_round_f64:Mt,_malloc:mt,_maxFaceCount:function(e,t){var n=0,r=0;if(r=0|St(0|(e|=0),0|(t|=0),45),_(),!(0|D(127&r)))return 0|(r=2);if(r=0|St(0|e,0|t,52),_(),!(r&=15))return 0|(r=5);for(n=1;;){if(!(0==((0|Ct(7,0,3*(15-n|0)|0))&e)&0==(_()&t))){n=2,e=6;break}if(!(n>>>0<r>>>0)){n=5,e=6;break}n=n+1|0}return 6==(0|e)?0|n:0},_maxH3ToChildrenSize:function(e,t,n){return n|=0,e=0|St(0|(e|=0),0|(t|=0),52),_(),(0|n)<16&(0|(e&=15))<=(0|n)?0|(n=0|tt(7,n-e|0)):0|(n=0)},_maxKringSize:function(e){return 1+(0|b(3*(e|=0)|0,e+1|0))|0},_maxPolyfillSize:function(e,t){t|=0;var n,r=0,o=0,s=0,a=0,l=0;if(n=k,k=k+48|0,s=n+8|0,o=n,a=0|i[(l=e|=0)+4>>2],i[(r=o)>>2]=i[l>>2],i[r+4>>2]=a,rt(o,s),s=0|W(s,t),t=0|i[o>>2],(0|(o=0|i[e+8>>2]))<=0)return k=n,0|(l=(l=(a=(0|s)<(0|(l=t)))?l:s)+12|0);r=0|i[e+12>>2],e=0;do{t=(0|i[r+(e<<3)>>2])+t|0,e=e+1|0}while((0|e)<(0|o));return k=n,0|(l=(l=(l=(0|s)<(0|t))?t:s)+12|0)},_maxUncompactSize:function(e,t,n){e|=0,n|=0;var r=0,o=0,s=0,a=0;if((0|(t|=0))<=0)return 0|(n=0);if((0|n)>=16){for(r=0;;){if(!(0==(0|i[(a=e+(r<<3)|0)>>2])&0==(0|i[a+4>>2]))){r=-1,o=13;break}if((0|(r=r+1|0))>=(0|t)){r=0,o=13;break}}if(13==(0|o))return 0|r}r=0,a=0;e:for(;;){s=0|i[(o=e+(a<<3)|0)>>2],o=0|i[o+4>>2];do{if(!(0==(0|s)&0==(0|o))){if(o=0|St(0|s,0|o,52),_(),(0|(o&=15))>(0|n)){r=-1,o=13;break e}if((0|o)==(0|n)){r=r+1|0;break}r=(0|tt(7,n-o|0))+r|0;break}}while(0);if((0|(a=a+1|0))>=(0|t)){o=13;break}}return 13==(0|o)?0|r:0},_memcpy:Pt,_memset:Tt,_numHexagons:function(e){var t;return e=0|i[(t=21008+((e|=0)<<3)|0)>>2],w(0|i[t+4>>2]),0|e},_pentagonIndexCount:function(){return 12},_pointDistKm:Pe,_pointDistM:function(e,t){e|=0;var n,r,i,s=0;return r=+o[(t|=0)>>3],n=+o[e>>3],s=(i=+A(.5*(r-n)))*i+(s=+A(.5*(+o[t+8>>3]-+o[e+8>>3])))*(+d(+r)*+d(+n)*s),2*+m(+ +c(+s),+ +c(+(1-s)))*6371.007180918475*1e3},_pointDistRads:function(e,t){e|=0;var n,r,i,s=0;return r=+o[(t|=0)>>3],n=+o[e>>3],s=(i=+A(.5*(r-n)))*i+(s=+A(.5*(+o[t+8>>3]-+o[e+8>>3])))*(+d(+r)*+d(+n)*s),2*+m(+ +c(+s),+ +c(+(1-s)))},_polyfill:function(e,t,n){var r,o=0,s=0,a=0,l=0,c=0;if(r=k,k=k+48|0,o=r+8|0,s=r,0|function(e,t,n){e|=0,t|=0,n|=0;var r=0,o=0,s=0,a=0,l=0,c=0,u=0,d=0,A=0,h=0,f=0,p=0,g=0,m=0,v=0,b=0,y=0,x=0,w=0,C=0,E=0,M=0,P=0,T=0,B=0,R=0,D=0,F=0,N=0,z=0;z=k,k=k+112|0,R=z+80|0,c=z+72|0,D=z,F=z+56|0,u=e+8|0,N=0|mt(32+(i[u>>2]<<5)|0),N||S(22848,22448,800,22456);if(it(e,N),s=e,r=0|i[s+4>>2],l=c,i[l>>2]=i[s>>2],i[l+4>>2]=r,rt(c,R),l=0|W(R,t),r=0|i[c>>2],s=0|i[u>>2],(0|s)>0){a=0|i[e+12>>2],o=0;do{r=(0|i[a+(o<<3)>>2])+r|0,o=o+1|0}while((0|o)!=(0|s))}if(l=(0|l)<(0|r)?r:l,B=l+12|0,o=0|bt(B,8),d=0|bt(B,8),i[R>>2]=0,P=e,T=0|i[P+4>>2],r=c,i[r>>2]=i[P>>2],i[r+4>>2]=T,r=0|L(c,B,t,R,o,d),0|r)return vt(o),vt(d),vt(N),k=z,0|(N=r);e:do{if((0|i[u>>2])>0){for(s=e+12|0,r=0;a=0|L((0|i[s>>2])+(r<<3)|0,B,t,R,o,d),r=r+1|0,!(0|a);)if((0|r)>=(0|i[u>>2]))break e;return vt(o),vt(d),vt(N),k=z,0|(N=a)}}while(0);(0|l)>-12&&Tt(0|d,0,((0|B)>1?B:1)<<3);e:do{if((0|i[R>>2])>0){T=((0|B)<0)<<31>>31,x=o,w=d,C=o,E=o,M=d,P=o,r=o,m=o,v=d,b=d,y=d,o=d;t:for(;;){for(g=0|i[R>>2],f=0,p=0,s=0;;){l=(a=D)+56|0;do{i[a>>2]=0,a=a+4|0}while((0|a)<(0|l));if(0|O(c=0|i[(t=x+(f<<3)|0)>>2],t=0|i[t+4>>2],1,D,0)){l=(a=D)+56|0;do{i[a>>2]=0,a=a+4|0}while((0|a)<(0|l));0|(a=0|bt(7,4))&&(I(c,t,1,D,a,7,0),vt(a))}h=0;do{d=0|i[(A=D+(h<<3)|0)>>2],A=0|i[A+4>>2];n:do{if(!(0==(0|d)&0==(0|A))){if(c=0|_t(0|d,0|A,0|B,0|T),_(),!(0==(0|(t=0|i[(l=a=n+(c<<3)|0)>>2]))&0==(0|(l=0|i[l+4>>2]))))for(u=0;;){if((0|u)>(0|B))break t;if((0|t)==(0|d)&(0|l)==(0|A))break n;if(0==(0|(t=0|i[(l=a=n+((c=(c+1|0)%(0|B)|0)<<3)|0)>>2]))&0==(0|(l=0|i[l+4>>2])))break;u=u+1|0}0==(0|d)&0==(0|A)||(He(d,A,F),0|ot(e,N,F)&&(i[(u=a)>>2]=d,i[u+4>>2]=A,i[(u=w+(s<<3)|0)>>2]=d,i[u+4>>2]=A,s=s+1|0))}}while(0);h=h+1|0}while(h>>>0<7);if((0|(p=p+1|0))>=(0|g))break;f=f+1|0}if((0|g)>0&&Tt(0|C,0,g<<3),i[R>>2]=s,!((0|s)>0))break e;d=o,A=y,h=P,f=b,p=v,g=w,o=m,y=r,b=E,v=C,m=d,r=A,P=M,M=h,E=f,C=p,w=x,x=g}return vt(E),vt(M),vt(N),k=z,0|(N=-1)}r=d}while(0);return vt(N),vt(o),vt(r),N=0,k=z,0|N}(e|=0,t|=0,n|=0)){if(a=0|i[(c=e)+4>>2],i[(l=s)>>2]=i[c>>2],i[l+4>>2]=a,rt(s,o),l=0|W(o,t),t=0|i[s>>2],(0|(a=0|i[e+8>>2]))>0){s=0|i[e+12>>2],o=0;do{t=(0|i[s+(o<<3)>>2])+t|0,o=o+1|0}while((0|o)!=(0|a))}(0|(t=(0|l)<(0|t)?t:l))<=-12||Tt(0|n,0,8+(((0|(c=t+11|0))>0?c:0)<<3)|0),k=r}else k=r},_res0IndexCount:function(){return 122},_round:kt,_sbrk:Bt,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(e,t,n,r,o){e|=0,n|=0,r|=0,o|=0;var s=0,a=0,l=0,c=0,u=0,d=0;if((0|(t|=0))<=0)return 0|(o=0);if((0|o)>=16){for(s=0;;){if(!(0==(0|i[(d=e+(s<<3)|0)>>2])&0==(0|i[d+4>>2]))){s=14;break}if((0|(s=s+1|0))>=(0|t)){a=0,s=16;break}}if(14==(0|s))return 0|((0|r)>0?-2:-1);if(16==(0|s))return 0|a}s=0,d=0;e:for(;;){a=0|i[(l=u=e+(d<<3)|0)>>2],l=0|i[l+4>>2];do{if(!(0==(0|a)&0==(0|l))){if((0|s)>=(0|r)){a=-1,s=16;break e}if(c=0|St(0|a,0|l,52),_(),(0|(c&=15))>(0|o)){a=-2,s=16;break e}if((0|c)==(0|o)){i[(u=n+(s<<3)|0)>>2]=a,i[u+4>>2]=l,s=s+1|0;break}if((0|(a=(0|tt(7,o-c|0))+s|0))>(0|r)){a=-1,s=16;break e}Ie(0|i[u>>2],0|i[u+4>>2],o,n+(s<<3)|0),s=a}}while(0);if((0|(d=d+1|0))>=(0|t)){a=0,s=16;break}}return 16==(0|s)?0|a:0},establishStackSpace:function(e,t){k=e|=0},stackAlloc:function(e){var t;return t=k,k=(k=k+(e|=0)|0)+15&-16,0|t},stackRestore:function(e){k=e|=0},stackSave:function(){return 0|k}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},Z,g),ee=(n.___uremdi3=$.___uremdi3,n._bitshift64Lshr=$._bitshift64Lshr,n._bitshift64Shl=$._bitshift64Shl,n._calloc=$._calloc,n._cellAreaKm2=$._cellAreaKm2,n._cellAreaM2=$._cellAreaM2,n._cellAreaRads2=$._cellAreaRads2,n._compact=$._compact,n._destroyLinkedPolygon=$._destroyLinkedPolygon,n._edgeLengthKm=$._edgeLengthKm,n._edgeLengthM=$._edgeLengthM,n._emscripten_replace_memory=$._emscripten_replace_memory),te=(n._exactEdgeLengthKm=$._exactEdgeLengthKm,n._exactEdgeLengthM=$._exactEdgeLengthM,n._exactEdgeLengthRads=$._exactEdgeLengthRads,n._experimentalH3ToLocalIj=$._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=$._experimentalLocalIjToH3,n._free=$._free,n._geoToH3=$._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=$._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=$._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=$._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=$._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=$._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=$._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=$._getPentagonIndexes,n._getRes0Indexes=$._getRes0Indexes,n._h3Distance=$._h3Distance,n._h3GetBaseCell=$._h3GetBaseCell,n._h3GetFaces=$._h3GetFaces,n._h3GetResolution=$._h3GetResolution,n._h3IndexesAreNeighbors=$._h3IndexesAreNeighbors,n._h3IsPentagon=$._h3IsPentagon,n._h3IsResClassIII=$._h3IsResClassIII,n._h3IsValid=$._h3IsValid,n._h3Line=$._h3Line,n._h3LineSize=$._h3LineSize,n._h3SetToLinkedGeo=$._h3SetToLinkedGeo,n._h3ToCenterChild=$._h3ToCenterChild,n._h3ToChildren=$._h3ToChildren,n._h3ToGeo=$._h3ToGeo,n._h3ToGeoBoundary=$._h3ToGeoBoundary,n._h3ToParent=$._h3ToParent,n._h3UnidirectionalEdgeIsValid=$._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=$._hexAreaKm2,n._hexAreaM2=$._hexAreaM2,n._hexRing=$._hexRing,n._i64Subtract=$._i64Subtract,n._kRing=$._kRing,n._kRingDistances=$._kRingDistances,n._llvm_minnum_f64=$._llvm_minnum_f64,n._llvm_round_f64=$._llvm_round_f64,n._malloc=$._malloc,n._maxFaceCount=$._maxFaceCount,n._maxH3ToChildrenSize=$._maxH3ToChildrenSize,n._maxKringSize=$._maxKringSize,n._maxPolyfillSize=$._maxPolyfillSize,n._maxUncompactSize=$._maxUncompactSize,n._memcpy=$._memcpy,n._memset=$._memset,n._numHexagons=$._numHexagons,n._pentagonIndexCount=$._pentagonIndexCount,n._pointDistKm=$._pointDistKm,n._pointDistM=$._pointDistM,n._pointDistRads=$._pointDistRads,n._polyfill=$._polyfill,n._res0IndexCount=$._res0IndexCount,n._round=$._round,n._sbrk=$._sbrk,n._sizeOfCoordIJ=$._sizeOfCoordIJ,n._sizeOfGeoBoundary=$._sizeOfGeoBoundary,n._sizeOfGeoCoord=$._sizeOfGeoCoord,n._sizeOfGeoPolygon=$._sizeOfGeoPolygon,n._sizeOfGeofence=$._sizeOfGeofence,n._sizeOfH3Index=$._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=$._sizeOfLinkedGeoPolygon,n._uncompact=$._uncompact,n.establishStackSpace=$.establishStackSpace,n.stackAlloc=$.stackAlloc),ne=n.stackRestore=$.stackRestore,re=n.stackSave=$.stackSave;if(n.asm=$,n.cwrap=function(e,t,n,r){var i=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&i&&!r?A(e):function(){return h(e,t,n,arguments)}},n.setValue=function(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":m[e|0]=t;break;case"i16":b[e>>1]=t;break;case"i32":y[e>>2]=t;break;case"i64":z=[t>>>0,(N=t,+B(N)>=1?N>0?(0|R(+I(N/4294967296),4294967295))>>>0:~~+O((N-+(~~N>>>0))/4294967296)>>>0:0)],y[e>>2]=z[0],y[e+4>>2]=z[1];break;case"float":x[e>>2]=t;break;case"double":w[e>>3]=t;break;default:ce("invalid type for setValue: "+n)}},n.getValue=function(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return m[e|0];case"i16":return b[e>>1];case"i32":case"i64":return y[e>>2];case"float":return x[e>>2];case"double":return w[e>>3];default:ce("invalid type for getValue: "+t)}return null},n.getTempRet0=u,j){G(j)||(Y=j,j=n.locateFile?n.locateFile(Y,s):s+Y),L++,n.monitorRunDependencies&&n.monitorRunDependencies(L);var ie=function(e){e.byteLength&&(e=new Uint8Array(e)),v.set(e,8),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,function(e){if(L--,n.monitorRunDependencies&&n.monitorRunDependencies(L),0==L&&(null!==D&&(clearInterval(D),D=null),F)){var t=F;F=null,t()}}()},oe=function(){i(j,ie,(function(){throw"could not load memory initializer "+j}))},se=X(j);if(se)ie(se.buffer);else if(n.memoryInitializerRequest){var ae=function(){var e=n.memoryInitializerRequest,t=e.response;if(200!==e.status&&0!==e.status){var r=X(n.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+j),void oe();t=r.buffer}ie(t)};n.memoryInitializerRequest.response?setTimeout(ae,0):n.memoryInitializerRequest.addEventListener("load",ae)}else oe()}function le(e){function t(){q||(q=!0,d||(E(P),E(T),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),k.unshift(e);var e;E(k)}()))}e=e||o,L>0||(!function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),M.unshift(e);var e;E(M)}(),L>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t()))}function ce(e){throw n.onAbort&&n.onAbort(e),a(e+=""),l(e),d=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(F=function e(){q||le(),q||(F=e)},n.run=le,n.abort=ce,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return le(),e}("object"===typeof JU?JU:{}),KU="number",XU={};[["sizeOfH3Index",KU],["sizeOfGeoCoord",KU],["sizeOfGeoBoundary",KU],["sizeOfGeoPolygon",KU],["sizeOfGeofence",KU],["sizeOfLinkedGeoPolygon",KU],["sizeOfCoordIJ",KU],["h3IsValid",KU,[KU,KU]],["geoToH3",KU,[KU,KU,KU]],["h3ToGeo",null,[KU,KU,KU]],["h3ToGeoBoundary",null,[KU,KU,KU]],["maxKringSize",KU,[KU]],["kRing",null,[KU,KU,KU,KU]],["kRingDistances",null,[KU,KU,KU,KU,KU]],["hexRing",null,[KU,KU,KU,KU]],["maxPolyfillSize",KU,[KU,KU]],["polyfill",null,[KU,KU,KU]],["h3SetToLinkedGeo",null,[KU,KU,KU]],["destroyLinkedPolygon",null,[KU]],["compact",KU,[KU,KU,KU]],["uncompact",KU,[KU,KU,KU,KU,KU]],["maxUncompactSize",KU,[KU,KU,KU]],["h3IsPentagon",KU,[KU,KU]],["h3IsResClassIII",KU,[KU,KU]],["h3GetBaseCell",KU,[KU,KU]],["h3GetResolution",KU,[KU,KU]],["maxFaceCount",KU,[KU,KU]],["h3GetFaces",null,[KU,KU,KU]],["h3ToParent",KU,[KU,KU,KU]],["h3ToChildren",null,[KU,KU,KU,KU]],["h3ToCenterChild",KU,[KU,KU,KU]],["maxH3ToChildrenSize",KU,[KU,KU,KU]],["h3IndexesAreNeighbors",KU,[KU,KU,KU,KU]],["getH3UnidirectionalEdge",KU,[KU,KU,KU,KU]],["getOriginH3IndexFromUnidirectionalEdge",KU,[KU,KU]],["getDestinationH3IndexFromUnidirectionalEdge",KU,[KU,KU]],["h3UnidirectionalEdgeIsValid",KU,[KU,KU]],["getH3IndexesFromUnidirectionalEdge",null,[KU,KU,KU]],["getH3UnidirectionalEdgesFromHexagon",null,[KU,KU,KU]],["getH3UnidirectionalEdgeBoundary",null,[KU,KU,KU]],["h3Distance",KU,[KU,KU,KU,KU]],["h3Line",KU,[KU,KU,KU,KU,KU]],["h3LineSize",KU,[KU,KU,KU,KU]],["experimentalH3ToLocalIj",KU,[KU,KU,KU,KU,KU]],["experimentalLocalIjToH3",KU,[KU,KU,KU,KU]],["hexAreaM2",KU,[KU]],["hexAreaKm2",KU,[KU]],["edgeLengthM",KU,[KU]],["edgeLengthKm",KU,[KU]],["pointDistM",KU,[KU,KU]],["pointDistKm",KU,[KU,KU]],["pointDistRads",KU,[KU,KU]],["cellAreaM2",KU,[KU,KU]],["cellAreaKm2",KU,[KU,KU]],["cellAreaRads2",KU,[KU,KU]],["exactEdgeLengthM",KU,[KU,KU]],["exactEdgeLengthKm",KU,[KU,KU]],["exactEdgeLengthRads",KU,[KU,KU]],["numHexagons",KU,[KU]],["getRes0Indexes",null,[KU]],["res0IndexCount",KU],["getPentagonIndexes",null,[KU,KU]],["pentagonIndexCount",KU]].forEach((function(e){XU[e[0]]=JU.cwrap.apply(JU,e)}));var YU=16,qU=4,ZU=4,$U=8,eG=XU.sizeOfH3Index(),tG=XU.sizeOfGeoCoord(),nG=XU.sizeOfGeoBoundary(),rG=(XU.sizeOfGeoPolygon(),XU.sizeOfGeofence(),XU.sizeOfLinkedGeoPolygon()),iG=(XU.sizeOfCoordIJ(),"m"),oG="km";function sG(e){if("number"!==typeof e||e<0||e>15||Math.floor(e)!==e)throw new Error("Invalid resolution: "+e)}var aG=/[^0-9a-fA-F]/;function lG(e){if(Array.isArray(e)&&2===e.length&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if("string"!==typeof e||aG.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),YU);return[parseInt(e.substring(e.length-8),YU),t]}function cG(e){if(e>=0)return e.toString(YU);var t=dG(8,(e&=2147483647).toString(YU));return t=(parseInt(t[0],YU)+8).toString(YU)+t.substring(1)}function uG(e,t){return cG(t)+dG(8,cG(e))}function dG(e,t){for(var n=e-t.length,r="",i=0;i<n;i++)r+="0";return r+=t}function AG(e){return[e,JU.getTempRet0()]}function hG(e){var t=AG(e),n=t[0],r=t[1];return r?uG(n,r):null}function fG(e,t,n){JU.HEAPU32.set(lG(e),t/qU+2*n)}function pG(e,t){for(var n=t.length,r=0;r<n;r++)fG(t[r],e,r)}function gG(e){return 180*JU.getValue(e,"double")/Math.PI}function mG(e){return[gG(e),gG(e+$U)]}function vG(e){return[gG(e+$U),gG(e)]}function bG(e,t,n){for(var r=JU.getValue(e,"i32"),i=e+$U,o=[],s=t?vG:mG,a=0;a<2*r;a+=2)o.push(s(i+$U*a));return n&&o.push(o[0]),o}function yG(e){var t=lG(e),n=t[0],r=t[1];return Boolean(XU.h3IsPentagon(n,r))}function xG(e){var t=lG(e),n=t[0],r=t[1];return XU.h3IsValid(n,r)?XU.h3GetResolution(n,r):-1}function wG(e){var t=JU._malloc(tG),n=lG(e),r=n[0],i=n[1];XU.h3ToGeo(r,i,t);var o=mG(t);return JU._free(t),o}function _G(e,t){if(!e||!e.length)return[];var n=e.length,r=JU._calloc(n,eG);pG(r,e);var i=JU._calloc(rG),o=i;XU.h3SetToLinkedGeo(r,n,i);var s=function(e,t){for(var n,r,i,o,s=[],a=t?vG:mG;e;){for(s.push(n=[]),r=JU.getValue(e,"i8*");r;){for(n.push(i=[]),o=JU.getValue(r,"i8*");o;)i.push(a(o)),o=JU.getValue(o+2*$U,"i8*");t&&i.push(i[0]),r=JU.getValue(r+2*ZU,"i8*")}e=JU.getValue(e+2*ZU,"i8*")}return s}(i,t);return XU.destroyLinkedPolygon(o),JU._free(o),JU._free(r),s}function SG(e,t){switch(sG(e),t){case iG:return XU.edgeLengthM(e);case oG:return XU.edgeLengthKm(e);default:throw new Error("Unknown unit: "+t)}}function CG(e){return e*Math.PI/180}const EG=[0,0,0,255],MG={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:e=>e.polygon},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:EG},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class PG extends FB{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&Op.removed("getLineDashArray","PathStyleExtension")()}updateState(e){let{changeFlags:t}=e;const n=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getPolygon);if(n&&Array.isArray(t.dataChanged)){const e=this.state.paths.slice(),n=t.dataChanged.map((t=>NB({data:e,getIndex:e=>e.__source.index,dataRange:t,replace:this._getPaths(t)})));this.setState({paths:e,pathsDiff:n})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{data:t,getPolygon:n,positionFormat:r,_normalize:i}=this.props,o=[],s="XY"===r?2:3,{startRow:a,endRow:l}=e,{iterable:c,objectInfo:u}=fM(t,a,l);for(const d of c){u.index++;let e=n(d,u);i&&(e=IO(e,s));const{holeIndices:t}=e,r=e.positions||e;if(t)for(let n=0;n<=t.length;n++){const e=r.slice(t[n-1]||0,t[n]||r.length);o.push(this.getSubLayerRow({path:e},d,u.index))}else o.push(this.getSubLayerRow({path:r},d,u.index))}return o}renderLayers(){const{data:e,_dataDiff:t,stroked:n,filled:r,extruded:i,wireframe:o,_normalize:s,_windingOrder:a,elevationScale:l,transitions:c,positionFormat:u}=this.props,{lineWidthUnits:d,lineWidthScale:A,lineWidthMinPixels:h,lineWidthMaxPixels:f,lineJointRounded:p,lineMiterLimit:g,lineDashJustified:m}=this.props,{getFillColor:v,getLineColor:b,getLineWidth:y,getLineDashArray:x,getElevation:w,getPolygon:_,updateTriggers:S,material:C}=this.props,{paths:E,pathsDiff:M}=this.state,P=this.getSubLayerClass("fill",HO),T=this.getSubLayerClass("stroke",LB),k=this.shouldRenderSubLayer("fill",E)&&new P({_dataDiff:t,extruded:i,elevationScale:l,filled:r,wireframe:o,_normalize:s,_windingOrder:a,getElevation:w,getFillColor:v,getLineColor:i&&o?b:EG,material:C,transitions:c},this.getSubLayerProps({id:"fill",updateTriggers:S&&{getPolygon:S.getPolygon,getElevation:S.getElevation,getFillColor:S.getFillColor,lineColors:i&&o,getLineColor:S.getLineColor}}),{data:e,positionFormat:u,getPolygon:_}),B=!i&&n&&this.shouldRenderSubLayer("stroke",E)&&new T({_dataDiff:M&&(()=>M),widthUnits:d,widthScale:A,widthMinPixels:h,widthMaxPixels:f,jointRounded:p,miterLimit:g,dashJustified:m,_pathType:"loop",transitions:c&&{getWidth:c.getLineWidth,getColor:c.getLineColor,getPath:c.getPolygon},getColor:this.getSubLayerAccessor(b),getWidth:this.getSubLayerAccessor(y),getDashArray:this.getSubLayerAccessor(x)},this.getSubLayerProps({id:"stroke",updateTriggers:S&&{getWidth:S.getLineWidth,getColor:S.getLineColor,getDashArray:S.getLineDashArray}}),{data:E,positionFormat:u,getPath:e=>e.path});return[!i&&k,B,i&&k]}}pt(PG,"layerName","PolygonLayer"),pt(PG,"defaultProps",MG);function TG(e,t){t=void 0===t?e[0][0]:t;for(const n of e){const e=n[0]-t;e>180?n[0]-=360:e<-180&&(n[0]+=360)}}function kG(e,t,n){const r=e(t,n),[i,o]=wG(r);return[o,i]}function BG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=function(e,t){var n=JU._malloc(nG),r=lG(e),i=r[0],o=r[1];XU.h3ToGeoBoundary(i,o,n);var s=bG(n,t,t);return JU._free(n),s}(e,!0);return 1!==t?function(e,t,n){const[r,i]=wG(e),o=t.length;TG(t,i);const s=t[0]===t[o-1]?o-1:o;for(let a=0;a<s;a++)t[a][0]=Mm(i,t[a][0],n),t[a][1]=Mm(r,t[a][1],n)}(e,n,t):TG(n),n}const OG={...PG.defaultProps,highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:e=>e.hexagon},extruded:!0};class IG extends FB{constructor(){super(...arguments),pt(this,"state",void 0)}initializeState(){IG._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}shouldUpdateState(e){let{changeFlags:t}=e;return this._shouldUseHighPrecision()?t.propsOrDataChanged:t.somethingChanged}updateState(e){let{props:t,changeFlags:n}=e;if(!0!==t.highPrecision&&(n.dataChanged||n.updateTriggersChanged&&n.updateTriggersChanged.getHexagon)){const e=this._calculateH3DataProps();this.setState(e)}this._updateVertices(this.context.viewport)}_calculateH3DataProps(){let e=-1,t=!1,n=!1;const{iterable:r,objectInfo:i}=fM(this.props.data);for(const o of r){i.index++;const r=this.props.getHexagon(o,i),s=xG(r);if(e<0){if(e=s,!this.props.highPrecision)break}else if(e!==s){n=!0;break}if(yG(r)){t=!0;break}}return{resolution:e,edgeLengthKM:e>=0?SG(e,"km"):0,hasMultipleRes:n,hasPentagon:t}}_shouldUseHighPrecision(){if("auto"===this.props.highPrecision){const{resolution:e,hasPentagon:t,hasMultipleRes:n}=this.state,{viewport:r}=this.context;return Boolean(null===r||void 0===r?void 0:r.resolution)||n||t||e>=0&&e<=5}return this.props.highPrecision}_updateVertices(e){if(this._shouldUseHighPrecision())return;const{resolution:t,edgeLengthKM:n,centerHex:r}=this.state;if(t<0)return;const i=this.props.centerHexagon||function(e,t,n){var r=JU._malloc(tG);JU.HEAPF64.set([e,t].map(CG),r/$U);var i=hG(XU.geoToH3(r,n));return JU._free(r),i}(e.latitude,e.longitude,t);if(r===i)return;if(r){const e=function(e,t){var n=lG(e),r=n[0],i=n[1],o=lG(t),s=o[0],a=o[1];return XU.h3Distance(r,i,s,a)}(r,i);if(e>=0&&e*n<10)return}const{unitsPerMeter:o}=e.distanceScales;let s=BG(i);const[a,l]=wG(i),[c,u]=e.projectFlat([l,a]);s=s.map((t=>{const n=e.projectFlat(t);return[(n[0]-c)/o[0],(n[1]-u)/o[1]]})),this.setState({centerHex:i,vertices:s})}renderLayers(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}_getForwardProps(){const{elevationScale:e,material:t,coverage:n,extruded:r,wireframe:i,stroked:o,filled:s,lineWidthUnits:a,lineWidthScale:l,lineWidthMinPixels:c,lineWidthMaxPixels:u,getFillColor:d,getElevation:A,getLineColor:h,getLineWidth:f,transitions:p,updateTriggers:g}=this.props;return{elevationScale:e,extruded:r,coverage:n,wireframe:i,stroked:o,filled:s,lineWidthUnits:a,lineWidthScale:l,lineWidthMinPixels:c,lineWidthMaxPixels:u,material:t,getElevation:A,getFillColor:d,getLineColor:h,getLineWidth:f,transitions:p,updateTriggers:{getFillColor:g.getFillColor,getElevation:g.getElevation,getLineColor:g.getLineColor,getLineWidth:g.getLineWidth}}}_renderPolygonLayer(){const{data:e,getHexagon:t,updateTriggers:n,coverage:r}=this.props,i=this.getSubLayerClass("hexagon-cell-hifi",PG),o=this._getForwardProps();return o.updateTriggers.getPolygon=function(e,t){let n;return n=void 0===e||null===e?t:"object"===typeof e?{...e,coverage:t}:{getHexagon:e,coverage:t},n}(n.getHexagon,r),new i(o,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:o.updateTriggers}),{data:e,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:(e,n)=>function(e){const t=new Float64Array(2*e.length);let n=0;for(const r of e)t[n++]=r[0],t[n++]=r[1];return t}(BG(t(e,n),r))})}_renderColumnLayer(){const{data:e,getHexagon:t,updateTriggers:n}=this.props,r=this.getSubLayerClass("hexagon-cell",TL),i=this._getForwardProps();return i.updateTriggers.getPosition=n.getHexagon,new r(i,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:i.updateTriggers}),{data:e,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:kG.bind(null,t)})}}pt(IG,"defaultProps",OG),pt(IG,"layerName","H3HexagonLayer"),pt(IG,"_checkH3Lib",(()=>{}));const RG={...PG.defaultProps};class LG extends FB{indexToBounds(){return null}renderLayers(){const{elevationScale:e,extruded:t,wireframe:n,filled:r,stroked:i,lineWidthUnits:o,lineWidthScale:s,lineWidthMinPixels:a,lineWidthMaxPixels:l,lineJointRounded:c,lineMiterLimit:u,lineDashJustified:d,getElevation:A,getFillColor:h,getLineColor:f,getLineWidth:p}=this.props,{updateTriggers:g,material:m,transitions:v}=this.props,b=this.getSubLayerClass("cell",PG),{updateTriggers:y,...x}=this.indexToBounds()||{};return new b({filled:r,wireframe:n,extruded:t,elevationScale:e,stroked:i,lineWidthUnits:o,lineWidthScale:s,lineWidthMinPixels:a,lineWidthMaxPixels:l,lineJointRounded:c,lineMiterLimit:u,lineDashJustified:d,material:m,transitions:v,getElevation:A,getFillColor:h,getLineColor:f,getLineWidth:p},this.getSubLayerProps({id:"cell",updateTriggers:g&&{...y,getElevation:g.getElevation,getFillColor:g.getFillColor,getLineColor:g.getLineColor,getLineWidth:g.getLineWidth}}),x)}}pt(LG,"layerName","GeoCellLayer"),pt(LG,"defaultProps",RG);class DG extends LG{initializeState(){IG._checkH3Lib()}updateState(e){let{props:t,changeFlags:n}=e;if(n.dataChanged||n.updateTriggersChanged&&n.updateTriggersChanged.getHexagons){const{data:e,getHexagons:n}=t,r=[],{iterable:i,objectInfo:o}=fM(e);for(const t of i){o.index++;const e=_G(n(t,o),!0);for(const n of e)r.push(this.getSubLayerRow({polygon:n},t,o.index))}this.setState({polygons:r})}}indexToBounds(){const{getElevation:e,getFillColor:t,getLineColor:n,getLineWidth:r}=this.props;return{data:this.state.polygons,getPolygon:e=>e.polygon,getElevation:this.getSubLayerAccessor(e),getFillColor:this.getSubLayerAccessor(t),getLineColor:this.getSubLayerAccessor(n),getLineWidth:this.getSubLayerAccessor(r)}}}function FG(){var e;const t=te((e=>e.cityIOdataState.cityIOdata)),n=te((e=>e.menuState)),[r,i]=(0,A.useState)(!1),[o,s]=(0,A.useState)(),[a,l]=(0,A.useState)(null),[c,u]=(0,A.useState)(),[d,h]=(0,A.useState)(),[f,p]=(0,A.useState)(),[g,v]=(0,A.useState)(),[b,y]=(0,A.useState)(),[x,w]=(0,A.useState)(),_=n.editMenuState.EDIT_BUTTON,S=n.typesMenuState.SELECTED_TYPE,C=n.layersMenuState,E=null===n||void 0===n||null===(e=n.viewSettingsMenuState)||void 0===e?void 0:e.ROTATE_CHECKBOX,{sendJsonMessage:M}=(0,wn.Ay)(vn.cityIO.websocketURL,{share:!0,shouldReconnect:()=>!0});(0,A.useEffect)((()=>{if(!_&&b){let e=[];for(let t=0;t<b.features.length;t++)e[t]=b.features[t].properties;M({type:"UPDATE_GRID",content:{geogriddata:e}})}}),[_]),(0,A.useEffect)((()=>{y(oI(t))}),[t.GEOGRIDDATA]);const P={TILE_MAP:SL(),ABM:DB({data:t,selected:C&&C.ABM_LAYER_CHECKBOX&&C.ABM_LAYER_CHECKBOX.selected,opacity:C&&C.ABM_LAYER_CHECKBOX&&C.ABM_LAYER_CHECKBOX.slider}),AGGREGATED_TRIPS:oB({data:t,selected:C&&C.ABM_LAYER_CHECKBOX&&C.ABM_LAYER_CHECKBOX.selected,opacity:C&&C.AGGREGATED_TRIPS_LAYER_CHECKBOX&&.01*C.AGGREGATED_TRIPS_LAYER_CHECKBOX.slider}),GRID:sI({data:b,editOn:_,state:{selectedType:S,keyDownState:c,selectedCellsState:o,pickingRadius:40,opacity:C&&C.GRID_LAYER_CHECKBOX&&.01*C.GRID_LAYER_CHECKBOX.slider},updaters:{setSelectedCellsState:s,setDraggingWhileEditing:i,setHoveredObj:v},deckGLRef:a}),ACCESS:tB({setLayerHoveredData:w,data:t,selected:C&&C.ACCESS_LAYER_CHECKBOX&&C.ACCESS_LAYER_CHECKBOX.selected,intensity:C&&C.ACCESS_LAYER_CHECKBOX&&C.ACCESS_LAYER_CHECKBOX.slider}),TEXTUAL:aI({data:t,coordinates:b&&b,opacity:C&&C.TEXTUAL_LAYER_CHECKBOX&&.01*C.TEXTUAL_LAYER_CHECKBOX.slider}),GEOJSON:lI({data:t,opacity:C&&C.GEOJSON_LAYER_CHECKBOX&&.01*C.GEOJSON_LAYER_CHECKBOX.slider}),TRAFFIC:CL({setLayerHoveredData:w,data:t,opacity:C&&C.TRAFFIC_LAYER_CHECKBOX&&.01*C.TRAFFIC_LAYER_CHECKBOX.slider})};function T(e,t){return"text"===e?function(e){let{data:t,opacity:n}=e;return new _O({id:t.id,data:t.data,pickable:t.properties.pickable||!0,getPosition:e=>[e.coordinates[0],e.coordinates[1],20],getText:e=>e.text,getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"center",background:!0,backgroundPadding:[3,3,3,3],getBackgroundColor:[255,255,255,200],getBorderWidth:1,billboard:!0,getSize:5,sizeScale:2,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"arc"===e?function(e){let{data:t,opacity:n}=e;return new iB({id:t.id,data:t.data,pickable:!0,getWidth:t.properties.width||12,getSourcePosition:e=>e.from.coordinates,getTargetPosition:e=>e.to.coordinates,getSourceColor:e=>e.sourceColor||[255,140,0],getTargetColor:e=>e.targetColor||[55,140,0],opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"heatmap"===e?function(e){let{data:t,opacity:n}=e;return new uN({id:t.id,data:t.data,getPosition:e=>e.coordinates,getWeight:e=>e.weight,aggregation:"SUM",colorRange:t.properties.colorRange||[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]],opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"column"===e?function(e){let{data:t,opacity:n}=e;return new TL({id:t.id,data:t.data,diskResolution:t.properties.resolution||12,radius:t.properties.radius||30,extruded:t.properties.extruded||!0,pickable:t.properties.pickable||!0,elevationScale:t.properties.elevationScale||1,getPosition:e=>e.centroid,getFillColor:e=>[48,128,255*e.value,255],getLineColor:[0,0,0],getElevation:e=>e.value,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"contour"===e?function(e){let{data:t,opacity:n}=e;return new RF({id:t.id,contours:t.data,cellSize:t.properties.cellSize||200,getPosition:e=>e.coordinates,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"geojsonbase"===e?function(e){let{data:t,opacity:n}=e;var r,i,o,s,a,l,c,u,d,A,h,f,p,g,m;if(t)return new rI({id:t.id,data:t.data,opacity:n||.5,pickable:(null===(r=t.properties)||void 0===r?void 0:r.pickable)||!0,stroked:(null===(i=t.properties)||void 0===i?void 0:i.stroked)||!1,filled:(null===(o=t.properties)||void 0===o?void 0:o.filled)||!0,extruded:(null===(s=t.properties)||void 0===s?void 0:s.extruded)||!0,wireframe:(null===(a=t.properties)||void 0===a?void 0:a.wireframe)||!1,pointType:(null===(l=t.properties)||void 0===l?void 0:l.pointType)||"circle",autoHighlight:(null===(c=t.properties)||void 0===c?void 0:c.autoHighlight)||!0,highlightColor:(null===(u=t.properties)||void 0===u?void 0:u.highlightColor)||[242,0,117,120],lineWidthUnits:(null===(d=t.properties)||void 0===d?void 0:d.lineWidthUnits)||"pixels",lineWidthMinPixels:(null===(A=t.properties)||void 0===A?void 0:A.lineWidthMinPixels)||1,getFillColor:e=>{var n,r;return(null===(n=e.properties)||void 0===n?void 0:n.color)||(null===(r=t.properties)||void 0===r?void 0:r.color)||[160,160,180,200]},getLineColor:e=>{var n,r;return(null===(n=e.properties)||void 0===n?void 0:n.lineColor)||(null===(r=t.properties)||void 0===r?void 0:r.lineColor)||[255,255,255]},getPointRadius:e=>{var n,r;return(null===(n=e.properties)||void 0===n?void 0:n.pointRadius)||(null===(r=t.properties)||void 0===r?void 0:r.pointRadius)||10},getLineWidth:e=>{var n,r;return(null===(n=e.properties)||void 0===n?void 0:n.lineWidth)||(null===(r=t.properties)||void 0===r?void 0:r.lineWidth)||1},getElevation:e=>{var n,r;return(null===(n=e.properties)||void 0===n?void 0:n.height)||(null===(r=t.properties)||void 0===r?void 0:r.height)||1},updateTriggers:{getFillColor:t,getLineColor:t,getPointRadius:t,getLineWidth:t,getElevation:t},transitions:{getFillColor:(null===(h=t.properties)||void 0===h?void 0:h.duration)||500,getElevation:(null===(f=t.properties)||void 0===f?void 0:f.duration)||500,getLineWidth:(null===(p=t.properties)||void 0===p?void 0:p.duration)||500,getPointRadius:(null===(g=t.properties)||void 0===g?void 0:g.duration)||500,getLineColor:(null===(m=t.properties)||void 0===m?void 0:m.duration)||500}})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"grid"===e?function(e){let{data:t,opacity:n}=e;return new $F({id:t.id,data:t.data,pickable:t.properties.pickable||!0,extruded:t.properties.extruded||!0,cellSize:t.properties.cellSize||200,elevationScale:t.properties.elevationScale||4,getPosition:e=>e.coordinates,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"gridCell"===e?function(e){let{data:t,opacity:n}=e;return new VF({id:t.id,data:t.data,pickable:t.properties.pickable||!0,extruded:t.properties.extruded||!0,cellSize:t.properties.cellSize||200,elevationScale:t.properties.elevationScale||5e3,getPosition:e=>e.centroid,getFillColor:e=>[48,128,255*e.value,255],getElevation:e=>e.value,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"hexagon"===e?function(e){let{data:t,opacity:n}=e;return new mN({id:t.id,data:t.data,pickable:t.properties.pickable||!0,extruded:t.properties.extruded||!0,radius:t.properties.radius||200,elevationScale:t.properties.elevationScale||4,getPosition:e=>e.coordinates,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"icon"===e?function(e){let{data:t,opacity:n}=e;return new KB({id:t.id,data:t.data,pickable:t.properties.pickable||!0,getIcon:e=>({url:e.icon,width:e.width||128,height:e.height||128,anchorY:e.anchorY||128}),sizeScale:t.properties.sizeScale||10,sizeMaxPixels:t.properties.sizeMaxPixels||10,getPosition:e=>[e.coordinates[0],e.coordinates[1],e.elevation||30],opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"line"===e?function(e){let{data:t,opacity:n}=e;return new BL({id:t.id,data:t.data,pickable:t.properties.pickable||!0,getWidth:t.properties.width||50,getSourcePosition:e=>e.from.coordinates,getTargetPosition:e=>e.to.coordinates,getColor:e=>e.color||[200,140,0],opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"path"===e?function(e){let{data:t,opacity:n}=e;return new LB({id:t.id,data:t.data,pickable:t.properties.pickable||!0,widthScale:t.properties.widthScale||20,widthMinPixels:t.properties.widthMinPixels||2,getPath:e=>e.path,getColor:e=>e.color||[255,0,0],getWidth:e=>e.width||5,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"scatterplot"===e?function(e){let{data:t,opacity:n}=e;return new qB({id:t.id,data:t.data,pickable:t.path.properties.pickable||!0,stroked:t.path.properties.stroked||!0,filled:t.path.properties.filled||!0,radiusScale:t.path.properties.radiusScale||6,radiusMinPixels:t.path.properties.radiusMinPixels||1,radiusMaxPixels:t.path.properties.radiusMaxPixels||100,lineWidthMinPixels:t.path.properties.lineWidthMinPixels||1,getPosition:e=>e.coordinates,getRadius:e=>Math.sqrt(e.exits),getFillColor:e=>[255,140,0],getLineColor:e=>[0,0,0],opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"scenegraph"===e?function(e){let{data:t,opacity:n}=e;return new QU({id:t.id,data:t.data,pickable:t.properties.pickable||!0,scenegraph:t.properties.scenegraph||"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BoxAnimated/glTF-Binary/BoxAnimated.glb",getPosition:e=>e.coordinates,getOrientation:e=>[0,180*Math.random(),90],_animations:{"*":{speed:5}},sizeScale:t.properties.sizeScale||500,_lighting:"pbr",opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"simpleMesh"===e?function(e){let{data:t,opacity:n}=e;return new ak({id:t.id,data:t.data,mesh:t.properties.mesh||"https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/humanoid_quad.obj",getPosition:e=>[e.position[0],e.position[1],0],getColor:e=>e.color,getOrientation:e=>[0,e.angle,0],loaders:[eB],sizeScale:t.properties.sizeScale||1,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"H3Cluster"===e?function(e){let{data:t,opacity:n}=e;return new DG({id:t.id,data:t.data,pickable:t.properties.pickable||!0,getHexagons:e=>e.hexIds,getFillColor:e=>e.color||[255,255,0],getLineColor:t.properties.getLineColor||[255,255,255],lineWidthMinPixels:t.properties.lineWidthMinPixels||2,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):"H3Hexagon"===e?function(e){let{data:t,opacity:n}=e;return new IG({id:t.id,data:t.data,pickable:t.properties.pickable||!0,extruded:t.properties.extruded||!0,getHexagon:e=>e.hex,getFillColor:e=>e.color||[255,255*(1-e.elevation/500),0],getElevation:e=>e.elevation,elevationScale:t.properties.elevationScale||20,opacity:n})}({data:t,opacity:C&&C[t.id]&&.01*C[t.id].slider}):void 0}const k=["TEXT","ICON","MESH","SCENEGRAPH","SCATTERPLOT","PATH","LINE","GRID_CELL","GRID_BASE","GEOJSON_BASE","CONTOUR","COLUMN","ARC","ABM","AGGREGATED_TRIPS","TILE_MAP","GRID","TEXTUAL","GEOJSON","ACCESS","TRAFFIC","HEATMAP","HEXAGON"];return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{onKeyDown:e=>{u(e.nativeEvent.key)},onKeyUp:()=>u(null),onMouseMove:e=>h(e.nativeEvent),onMouseUp:()=>p(!1),onMouseDown:()=>p(!0),children:[x&&(0,m.jsx)(Xf,{layerHoveredData:x,mousePos:d}),C.GRID_LAYER_CHECKBOX&&C.GRID_LAYER_CHECKBOX.isOn&&(0,m.jsx)(Kf,{editOn:_,mousePos:d,selectedType:S,pickingRadius:40,mouseDown:f,hoveredObj:g}),(0,m.jsx)(RT,{setDeckGLRef:l,layers:(()=>{let e=[];for(var n of k)C&&C[n+"_LAYER_CHECKBOX"]&&C[n+"_LAYER_CHECKBOX"].isOn&&e.push(P[n]);if(t.layers)for(let r=0;r<t.layers.length;r++){const n=t.layers[r].id,i=t.layers[r].type;C&&C[n]&&C[n].isOn&&e.push(T(i,t.layers[r]))}return e})(),draggingWhileEditing:r,toggleRotateCamera:E})]})})}function NG(){}pt(DG,"layerName","H3ClusterLayer"),pt(DG,"defaultProps",{getHexagons:{type:"accessor",value:e=>e.hexagons}});const zG=function(){let e=0;return function(){return e++}}();function jG(e){return null===e||"undefined"===typeof e}function UG(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function GG(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const VG=e=>("number"===typeof e||e instanceof Number)&&isFinite(+e);function HG(e,t){return VG(e)?e:t}function WG(e,t){return"undefined"===typeof e?t:e}const QG=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function JG(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function KG(e,t,n,r){let i,o,s;if(UG(e))if(o=e.length,r)for(i=o-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<o;i++)t.call(n,e[i],i);else if(GG(e))for(s=Object.keys(e),o=s.length,i=0;i<o;i++)t.call(n,e[s[i]],s[i])}function XG(e,t){let n,r,i,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],o=t[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function YG(e){if(UG(e))return e.map(YG);if(GG(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=YG(e[n[i]]);return t}return e}function qG(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function ZG(e,t,n,r){if(!qG(e))return;const i=t[e],o=n[e];GG(i)&&GG(o)?$G(i,o,r):t[e]=YG(o)}function $G(e,t,n){const r=UG(t)?t:[t],i=r.length;if(!GG(e))return e;const o=(n=n||{}).merger||ZG;for(let s=0;s<i;++s){if(!GG(t=r[s]))continue;const i=Object.keys(t);for(let r=0,s=i.length;r<s;++r)o(i[r],e,t,n)}return e}function eV(e,t){return $G(e,t,{merger:tV})}function tV(e,t,n){if(!qG(e))return;const r=t[e],i=n[e];GG(r)&&GG(i)?eV(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=YG(i))}const nV={"":e=>e,x:e=>e.x,y:e=>e.y};function rV(e,t){const n=nV[t]||(nV[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function iV(e){return e.charAt(0).toUpperCase()+e.slice(1)}const oV=e=>"undefined"!==typeof e,sV=e=>"function"===typeof e,aV=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const lV=Math.PI,cV=2*lV,uV=cV+lV,dV=Number.POSITIVE_INFINITY,AV=lV/180,hV=lV/2,fV=lV/4,pV=2*lV/3,gV=Math.log10,mV=Math.sign;function vV(e){const t=Math.round(e);e=yV(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(gV(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function bV(e){return!isNaN(parseFloat(e))&&isFinite(e)}function yV(e,t,n){return Math.abs(e-t)<n}function xV(e,t,n){let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function wV(e){return e*(lV/180)}function _V(e){return e*(180/lV)}function SV(e){if(!VG(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function CV(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*lV&&(o+=cV),{angle:o,distance:i}}function EV(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function MV(e,t){return(e-t+uV)%cV-lV}function PV(e){return(e%cV+cV)%cV}function TV(e,t,n,r){const i=PV(e),o=PV(t),s=PV(n),a=PV(o-i),l=PV(s-i),c=PV(i-o),u=PV(i-s);return i===o||i===s||r&&o===s||a>l&&c<u}function kV(e,t,n){return Math.max(t,Math.min(n,e))}function BV(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function OV(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const IV=(e,t,n,r)=>OV(e,n,r?r=>e[r][t]<=n:r=>e[r][t]<n),RV=(e,t,n)=>OV(e,n,(r=>e[r][t]>=n));const LV=["push","pop","shift","splice","unshift"];function DV(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(LV.forEach((t=>{delete e[t]})),delete e._chartjs)}function FV(e){const t=new Set;let n,r;for(n=0,r=e.length;n<r;++n)t.add(e[n]);return t.size===r?e:Array.from(t)}const NV="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function zV(e,t,n){const r=n||(e=>Array.prototype.slice.call(e));let i=!1,o=[];return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];o=r(s),i||(i=!0,NV.call(window,(()=>{i=!1,e.apply(t,o)})))}}const jV=e=>"start"===e?"left":"end"===e?"right":"center",UV=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function GV(e,t,n){const r=t.length;let i=0,o=r;if(e._sorted){const{iScale:s,_parsed:a}=e,l=s.axis,{min:c,max:u,minDefined:d,maxDefined:A}=s.getUserBounds();d&&(i=kV(Math.min(IV(a,s.axis,c).lo,n?r:IV(t,l,s.getPixelForValue(c)).lo),0,r-1)),o=A?kV(Math.max(IV(a,s.axis,u,!0).hi+1,n?0:IV(t,l,s.getPixelForValue(u),!0).hi+1),i,r)-i:r-i}return{start:i,count:o}}function VV(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const HV=e=>0===e||1===e,WV=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*cV/n),QV=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*cV/n)+1,JV={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*hV),easeOutSine:e=>Math.sin(e*hV),easeInOutSine:e=>-.5*(Math.cos(lV*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>HV(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>HV(e)?e:WV(e,.075,.3),easeOutElastic:e=>HV(e)?e:QV(e,.075,.3),easeInOutElastic(e){const t=.1125;return HV(e)?e:e<.5?.5*WV(2*e,t,.45):.5+.5*QV(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-JV.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*JV.easeInBounce(2*e):.5*JV.easeOutBounce(2*e-1)+.5};function KV(e){return e+.5|0}const XV=(e,t,n)=>Math.max(Math.min(e,n),t);function YV(e){return XV(KV(2.55*e),0,255)}function qV(e){return XV(KV(255*e),0,255)}function ZV(e){return XV(KV(e/2.55)/100,0,1)}function $V(e){return XV(KV(100*e),0,100)}const eH={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},tH=[..."0123456789ABCDEF"],nH=e=>tH[15&e],rH=e=>tH[(240&e)>>4]+tH[15&e],iH=e=>(240&e)>>4===(15&e);function oH(e){var t=(e=>iH(e.r)&&iH(e.g)&&iH(e.b)&&iH(e.a))(e)?nH:rH;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const sH=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function aH(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function lH(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function cH(e,t,n){const r=aH(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function uH(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),o=Math.min(t,n,r),s=(i+o)/2;let a,l,c;return i!==o&&(c=i-o,l=s>.5?c/(2-i-o):c/(i+o),a=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),a=60*a+.5),[0|a,l||0,s]}function dH(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(qV)}function AH(e,t,n){return dH(aH,e,t,n)}function hH(e){return(e%360+360)%360}function fH(e){const t=sH.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?YV(+t[5]):qV(+t[5]));const i=hH(+t[2]),o=+t[3]/100,s=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return dH(cH,e,t,n)}(i,o,s):"hsv"===t[1]?function(e,t,n){return dH(lH,e,t,n)}(i,o,s):AH(i,o,s),{r:n[0],g:n[1],b:n[2],a:r}}const pH={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},gH={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let mH;function vH(e){mH||(mH=function(){const e={},t=Object.keys(gH),n=Object.keys(pH);let r,i,o,s,a;for(r=0;r<t.length;r++){for(s=a=t[r],i=0;i<n.length;i++)o=n[i],a=a.replace(o,pH[o]);o=parseInt(gH[s],16),e[a]=[o>>16&255,o>>8&255,255&o]}return e}(),mH.transparent=[0,0,0,0]);const t=mH[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const bH=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const yH=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,xH=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function wH(e,t,n){if(e){let r=uH(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=AH(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function _H(e,t){return e?Object.assign(t||{},e):e}function SH(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=qV(e[3]))):(t=_H(e,{r:0,g:0,b:0,a:1})).a=qV(t.a),t}function CH(e){return"r"===e.charAt(0)?function(e){const t=bH.exec(e);let n,r,i,o=255;if(t){if(t[7]!==n){const e=+t[7];o=t[8]?YV(e):XV(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?YV(n):XV(n,0,255)),r=255&(t[4]?YV(r):XV(r,0,255)),i=255&(t[6]?YV(i):XV(i,0,255)),{r:n,g:r,b:i,a:o}}}(e):fH(e)}class EH{constructor(e){if(e instanceof EH)return e;const t=typeof e;let n;"object"===t?n=SH(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*eH[e[1]],g:255&17*eH[e[2]],b:255&17*eH[e[3]],a:5===n?17*eH[e[4]]:255}:7!==n&&9!==n||(t={r:eH[e[1]]<<4|eH[e[2]],g:eH[e[3]]<<4|eH[e[4]],b:eH[e[5]]<<4|eH[e[6]],a:9===n?eH[e[7]]<<4|eH[e[8]]:255})),t}(e)||vH(e)||CH(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=_H(this._rgb);return e&&(e.a=ZV(e.a)),e}set rgb(e){this._rgb=SH(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(ZV(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?oH(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=uH(e),n=t[0],r=$V(t[1]),i=$V(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(ZV(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const o=t===i?.5:t,s=2*o-1,a=n.a-r.a,l=((s*a===-1?s:(s+a)/(1+s*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=xH(ZV(e.r)),i=xH(ZV(e.g)),o=xH(ZV(e.b));return{r:qV(yH(r+n*(xH(ZV(t.r))-r))),g:qV(yH(i+n*(xH(ZV(t.g))-i))),b:qV(yH(o+n*(xH(ZV(t.b))-o))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new EH(this.rgb)}alpha(e){return this._rgb.a=qV(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=KV(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return wH(this._rgb,2,e),this}darken(e){return wH(this._rgb,2,-e),this}saturate(e){return wH(this._rgb,1,e),this}desaturate(e){return wH(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=uH(e);n[0]=hH(n[0]+t),n=AH(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function MH(e){return new EH(e)}function PH(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function TH(e){return PH(e)?e:MH(e)}function kH(e){return PH(e)?e:MH(e).saturate(.5).darken(.1).hexString()}const BH=Object.create(null),OH=Object.create(null);function IH(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function RH(e,t,n){return"string"===typeof t?$G(IH(e,t),n):$G(IH(e,""),t)}var LH=new class{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>kH(t.backgroundColor),this.hoverBorderColor=(e,t)=>kH(t.borderColor),this.hoverColor=(e,t)=>kH(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return RH(this,e,t)}get(e){return IH(this,e)}describe(e,t){return RH(OH,e,t)}override(e,t){return RH(BH,e,t)}route(e,t,n,r){const i=IH(this,e),o=IH(this,n),s="_"+t;Object.defineProperties(i,{[s]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=o[r];return GG(e)?Object.assign({},t,e):WG(e,t)},set(e){this[s]=e}}})}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function DH(e,t,n,r,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,n.push(i)),o>r&&(r=o),r}function FH(e,t,n,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},o=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let s=0;const a=n.length;let l,c,u,d,A;for(l=0;l<a;l++)if(d=n[l],void 0!==d&&null!==d&&!0!==UG(d))s=DH(e,i,o,s,d);else if(UG(d))for(c=0,u=d.length;c<u;c++)A=d[c],void 0===A||null===A||UG(A)||(s=DH(e,i,o,s,A));e.restore();const h=o.length/2;if(h>n.length){for(l=0;l<h;l++)delete i[o[l]];o.splice(0,h)}return s}function NH(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function zH(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function jH(e,t,n,r){UH(e,t,n,r,null)}function UH(e,t,n,r,i){let o,s,a,l,c,u;const d=t.pointStyle,A=t.rotation,h=t.radius;let f=(A||0)*AV;if(d&&"object"===typeof d&&(o=d.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(n,r),e.rotate(f),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void e.restore();if(!(isNaN(h)||h<=0)){switch(e.beginPath(),d){default:i?e.ellipse(n,r,i/2,h,0,0,cV):e.arc(n,r,h,0,cV),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(f)*h,r-Math.cos(f)*h),f+=pV,e.lineTo(n+Math.sin(f)*h,r-Math.cos(f)*h),f+=pV,e.lineTo(n+Math.sin(f)*h,r-Math.cos(f)*h),e.closePath();break;case"rectRounded":c=.516*h,l=h-c,s=Math.cos(f+fV)*l,a=Math.sin(f+fV)*l,e.arc(n-s,r-a,c,f-lV,f-hV),e.arc(n+a,r-s,c,f-hV,f),e.arc(n+s,r+a,c,f,f+hV),e.arc(n-a,r+s,c,f+hV,f+lV),e.closePath();break;case"rect":if(!A){l=Math.SQRT1_2*h,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}f+=fV;case"rectRot":s=Math.cos(f)*h,a=Math.sin(f)*h,e.moveTo(n-s,r-a),e.lineTo(n+a,r-s),e.lineTo(n+s,r+a),e.lineTo(n-a,r+s),e.closePath();break;case"crossRot":f+=fV;case"cross":s=Math.cos(f)*h,a=Math.sin(f)*h,e.moveTo(n-s,r-a),e.lineTo(n+s,r+a),e.moveTo(n+a,r-s),e.lineTo(n-a,r+s);break;case"star":s=Math.cos(f)*h,a=Math.sin(f)*h,e.moveTo(n-s,r-a),e.lineTo(n+s,r+a),e.moveTo(n+a,r-s),e.lineTo(n-a,r+s),f+=fV,s=Math.cos(f)*h,a=Math.sin(f)*h,e.moveTo(n-s,r-a),e.lineTo(n+s,r+a),e.moveTo(n+a,r-s),e.lineTo(n-a,r+s);break;case"line":s=i?i/2:Math.cos(f)*h,a=Math.sin(f)*h,e.moveTo(n-s,r-a),e.lineTo(n+s,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(f)*h,r+Math.sin(f)*h)}e.fill(),t.borderWidth>0&&e.stroke()}}function GH(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function VH(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function HH(e){e.restore()}function WH(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function QH(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function JH(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=UG(t)?t:[t],a=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);jG(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),l=0;l<s.length;++l)c=s[l],a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),jG(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,n,r,o.maxWidth)),e.fillText(c,n,r,o.maxWidth),KH(e,n,r,c,o),r+=i.lineHeight;e.restore()}function KH(e,t,n,r,i){if(i.strikethrough||i.underline){const o=e.measureText(r),s=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(s,u),e.lineTo(a,u),e.stroke()}}function XH(e,t){const{x:n,y:r,w:i,h:o,radius:s}=t;e.arc(n+s.topLeft,r+s.topLeft,s.topLeft,-hV,lV,!0),e.lineTo(n,r+o-s.bottomLeft),e.arc(n+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,lV,hV,!0),e.lineTo(n+i-s.bottomRight,r+o),e.arc(n+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,hV,0,!0),e.lineTo(n+i,r+s.topRight),e.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-hV,!0),e.lineTo(n+s.topLeft,r)}const YH=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),qH=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ZH(e,t){const n=(""+e).match(YH);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const $H=e=>+e||0;function eW(e,t){const n={},r=GG(t),i=r?Object.keys(t):t,o=GG(e)?r?n=>WG(e[n],e[t[n]]):t=>e[t]:()=>e;for(const s of i)n[s]=$H(o(s));return n}function tW(e){return eW(e,{top:"y",right:"x",bottom:"y",left:"x"})}function nW(e){return eW(e,["topLeft","topRight","bottomLeft","bottomRight"])}function rW(e){const t=tW(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function iW(e,t){e=e||{},t=t||LH.font;let n=WG(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=WG(e.style,t.style);r&&!(""+r).match(qH)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const i={family:WG(e.family,t.family),lineHeight:ZH(WG(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:WG(e.weight,t.weight),string:""};return i.string=function(e){return!e||jG(e.size)||jG(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function oW(e,t,n,r){let i,o,s,a=!0;for(i=0,o=e.length;i<o;++i)if(s=e[i],void 0!==s&&(void 0!==t&&"function"===typeof s&&(s=s(t),a=!1),void 0!==n&&UG(s)&&(s=s[n%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function sW(e,t){return Object.assign(Object.create(e),t)}function aW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];oV(r)||(r=vW("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:r,_getTarget:i,override:i=>aW([i,...e],t,n,r)};return new Proxy(o,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>AW(n,r,(()=>function(e,t,n,r){let i;for(const o of t)if(i=vW(uW(o,e),n),oV(i))return dW(e,i)?gW(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>bW(e).includes(t),ownKeys:e=>bW(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function lW(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:cW(e,r),setContext:t=>lW(e,t,n,r),override:i=>lW(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>AW(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=e;let a=r[t];sV(a)&&s.isScriptable(t)&&(a=function(e,t,n,r){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e),t=t(o,s||r),a.delete(e),dW(e,t)&&(t=gW(i._scopes,i,e,t));return t}(t,a,e,n));UG(a)&&a.length&&(a=function(e,t,n,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=n;if(oV(o.index)&&r(e))t=t[o.index%t.length];else if(GG(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=gW(r,i,e,l);t.push(lW(n,o,s&&s[e],a))}}return t}(t,a,e,s.isIndexable));dW(t,a)&&(a=lW(a,i,o&&o[t],s));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function cW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:sV(n)?n:()=>n,isIndexable:sV(r)?r:()=>r}}const uW=(e,t)=>e?e+iV(t):t,dW=(e,t)=>GG(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function AW(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=n();return e[t]=r,r}function hW(e,t,n){return sV(e)?e(t,n):e}const fW=(e,t)=>!0===e?t:"string"===typeof e?rV(t,e):void 0;function pW(e,t,n,r,i){for(const o of t){const t=fW(n,o);if(t){e.add(t);const o=hW(t._fallback,n,i);if(oV(o)&&o!==n&&o!==r)return o}else if(!1===t&&oV(r)&&n!==r)return null}return!1}function gW(e,t,n,r){const i=t._rootScopes,o=hW(t._fallback,n,r),s=[...e,...i],a=new Set;a.add(r);let l=mW(a,s,n,o||n,r);return null!==l&&((!oV(o)||o===n||(l=mW(a,s,o,l,r),null!==l))&&aW(Array.from(a),[""],i,o,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(UG(i)&&GG(n))return n;return i}(t,n,r))))}function mW(e,t,n,r,i){for(;n;)n=pW(e,t,n,r,i);return n}function vW(e,t){for(const n of t){if(!n)continue;const t=n[e];if(oV(t))return t}}function bW(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function yW(e,t,n,r){const{iScale:i}=e,{key:o="r"}=this._parsing,s=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],s[a]={r:i.parse(rV(u,o),c)};return s}const xW=Number.EPSILON||1e-14,wW=(e,t)=>t<e.length&&!e[t].skip&&e[t],_W=e=>"x"===e?"y":"x";function SW(e,t,n,r){const i=e.skip?t:e,o=t,s=n.skip?t:n,a=EV(o,i),l=EV(s,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,A=r*u;return{previous:{x:o.x-d*(s.x-i.x),y:o.y-d*(s.y-i.y)},next:{x:o.x+A*(s.x-i.x),y:o.y+A*(s.y-i.y)}}}function CW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=_W(t),r=e.length,i=Array(r).fill(0),o=Array(r);let s,a,l,c=wW(e,0);for(s=0;s<r;++s)if(a=l,l=c,c=wW(e,s+1),l){if(c){const e=c[t]-l[t];i[s]=0!==e?(c[n]-l[n])/e:0}o[s]=a?c?mV(i[s-1])!==mV(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(e,t,n){const r=e.length;let i,o,s,a,l,c=wW(e,0);for(let u=0;u<r-1;++u)l=c,c=wW(e,u+1),l&&c&&(yV(t[u],0,xW)?n[u]=n[u+1]=0:(i=n[u]/t[u],o=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[u]=i*s*t[u],n[u+1]=o*s*t[u])))}(e,i,o),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=_W(n),i=e.length;let o,s,a,l=wW(e,0);for(let c=0;c<i;++c){if(s=a,a=l,l=wW(e,c+1),!a)continue;const i=a[n],u=a[r];s&&(o=(i-s[n])/3,a["cp1".concat(n)]=i-o,a["cp1".concat(r)]=u-o*t[c]),l&&(o=(l[n]-i)/3,a["cp2".concat(n)]=i+o,a["cp2".concat(r)]=u+o*t[c])}}(e,o,t)}function EW(e,t,n){return Math.max(Math.min(e,n),t)}function MW(e,t,n,r,i){let o,s,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)CW(e,i);else{let n=r?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)a=e[o],l=SW(n,a,e[Math.min(o+1,s-(r?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,r,i,o,s,a=GH(e[0],t);for(n=0,r=e.length;n<r;++n)s=o,o=a,a=n<r-1&&GH(e[n+1],t),o&&(i=e[n],s&&(i.cp1x=EW(i.cp1x,t.left,t.right),i.cp1y=EW(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=EW(i.cp2x,t.left,t.right),i.cp2y=EW(i.cp2y,t.top,t.bottom)))}(e,n)}function PW(){return"undefined"!==typeof window&&"undefined"!==typeof document}function TW(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function kW(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const BW=e=>window.getComputedStyle(e,null);const OW=["top","right","bottom","left"];function IW(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=OW[i];r[o]=parseFloat(e[t+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const RW=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function LW(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=BW(n),o="border-box"===i.boxSizing,s=IW(i,"padding"),a=IW(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:o}=r;let s,a,l=!1;if(RW(i,o,e.target))s=i,a=o;else{const e=t.getBoundingClientRect();s=r.clientX-e.left,a=r.clientY-e.top,l=!0}return{x:s,y:a,box:l}}(e,n),d=s.left+(u&&a.left),A=s.top+(u&&a.top);let{width:h,height:f}=t;return o&&(h-=s.width+a.width,f-=s.height+a.height),{x:Math.round((l-d)/h*n.width/r),y:Math.round((c-A)/f*n.height/r)}}const DW=e=>Math.round(10*e)/10;function FW(e,t,n,r){const i=BW(e),o=IW(i,"margin"),s=kW(i.maxWidth,e,"clientWidth")||dV,a=kW(i.maxHeight,e,"clientHeight")||dV,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const o=TW(e);if(o){const e=o.getBoundingClientRect(),s=BW(o),a=IW(s,"border","width"),l=IW(s,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,r=kW(s.maxWidth,o,"clientWidth"),i=kW(s.maxHeight,o,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||dV,maxHeight:i||dV}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=IW(i,"border","width"),t=IW(i,"padding");c-=t.width+e.width,u-=t.height+e.height}return c=Math.max(0,c-o.width),u=Math.max(0,r?Math.floor(c/r):u-o.height),c=DW(Math.min(c,s,l.maxWidth)),u=DW(Math.min(u,a,l.maxHeight)),c&&!u&&(u=DW(c/2)),{width:c,height:u}}function NW(e,t,n){const r=t||1,i=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=i/r,e.width=o/r;const s=e.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height="".concat(e.height,"px"),s.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||s.height!==i||s.width!==o)&&(e.currentDevicePixelRatio=r,s.height=i,s.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}const zW=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}return e}();function jW(e,t){const n=function(e,t){return BW(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function UW(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function GW(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function VW(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},s=UW(e,i,n),a=UW(i,o,n),l=UW(o,t,n),c=UW(s,a,n),u=UW(a,l,n);return UW(c,u,n)}const HW=new Map;function WW(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=HW.get(n);return r||(r=new Intl.NumberFormat(e,t),HW.set(n,r)),r}(t,n).format(e)}function QW(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function JW(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function KW(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function XW(e){return"angle"===e?{between:TV,compare:MV,normalize:PV}:{between:BV,compare:(e,t)=>e-t,normalize:e=>e}}function YW(e){let{start:t,end:n,count:r,loop:i,style:o}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:o}}function qW(e,t,n){if(!n)return[e];const{property:r,start:i,end:o}=n,s=t.length,{compare:a,between:l,normalize:c}=XW(r),{start:u,end:d,loop:A,style:h}=function(e,t,n){const{property:r,start:i,end:o}=n,{between:s,normalize:a}=XW(r),l=t.length;let c,u,{start:d,end:A,loop:h}=e;if(h){for(d+=l,A+=l,c=0,u=l;c<u&&s(a(t[d%l][r]),i,o);++c)d--,A--;d%=l,A%=l}return A<d&&(A+=l),{start:d,end:A,loop:h,style:e.style}}(e,t,n),f=[];let p,g,m,v=!1,b=null;const y=()=>v||l(i,m,p)&&0!==a(i,m),x=()=>!v||0===a(o,p)||l(o,m,p);for(let w=u,_=u;w<=d;++w)g=t[w%s],g.skip||(p=c(g[r]),p!==m&&(v=l(p,i,o),null===b&&y()&&(b=0===a(p,i)?w:_),null!==b&&x()&&(f.push(YW({start:b,end:w,loop:A,count:s,style:h})),b=null),_=w,m=p));return null!==b&&f.push(YW({start:b,end:d,loop:A,count:s,style:h})),f}function ZW(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const o=qW(r[i],e.points,t);o.length&&n.push(...o)}return n}function $W(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),o=eQ(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=n.length,c=[];let u=o,d=t[0].start,A=d;function h(e,t,r,i){const o=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=o;for(;n[t%l].skip;)t+=o;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,d=t%l)}}for(const f of t){d=a?d:f.start;let e,t=n[d%l];for(A=d+1;A<=f.end;A++){const o=n[A%l];e=eQ(r.setContext(sW(i,{type:"segment",p0:t,p1:o,p0DataIndex:(A-1)%l,p1DataIndex:A%l,datasetIndex:s}))),tQ(e,u)&&h(d,A-1,f.loop,u),t=o,u=e}d<A-1&&h(d,A-1,f.loop,u)}return c}(e,t,n,r):t}function eQ(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function tQ(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var nQ=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],o=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=NV.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,s=i.length-1,a=!1;for(;s>=0;--s)o=i[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(e),a=!0):(i[s]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const rQ="transparent",iQ={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=TH(e||rQ),i=r.valid&&TH(t||rQ);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class oQ{constructor(e,t,n,r){const i=t[n];r=oW([e.to,r,i,e.from]);const o=oW([e.from,i,r]);this._active=!0,this._fn=e.fn||iQ[e.type||typeof o],this._easing=JV[e.easing]||JV.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=oW([e.to,t,r,e.from]),this._from=oW([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,s=this._to;let a;if(this._active=i!==s&&(o||t<n),!this._active)return this._target[r]=s,void this._notify(!0);t<0?this._target[r]=i:(a=t/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,s,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}LH.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const sQ=Object.keys(LH.animation);LH.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),LH.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),LH.describe("animations",{_fallback:"animation"}),LH.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class aQ{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!GG(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const r=e[n];if(!GG(r))return;const i={};for(const e of sQ)i[e]=r[e];(UG(r.properties)&&r.properties||[n]).forEach((e=>{e!==n&&t.has(e)||t.set(e,i)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(i[l]=u=new oQ(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(nQ.add(this._chart,n),!0):void 0}}function lQ(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:r?o:i,end:r?i:o}}function cQ(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function uQ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,o="single"===r.mode;let s,a,l,c;if(null!==t){for(s=0,a=i.length;s<a;++s){if(l=+i[s],l===n){if(r.all)continue;break}c=e.values[l],VG(c)&&(o||0===t||mV(t)===mV(c))&&(t+=c)}return t}}function dQ(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function AQ(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function hQ(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function fQ(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=r,l=o.axis,c=s.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(o,s,r),d=t.length;let A;for(let h=0;h<d;++h){const e=t[h],{[l]:n,[c]:o}=e;A=(e._stacks||(e._stacks={}))[c]=AQ(i,u,n),A[a]=o,A._top=hQ(A,s,!0,r.type),A._bottom=hQ(A,s,!1,r.type)}}function pQ(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function gQ(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n]}}}const mQ=e=>"reset"===e||"none"===e,vQ=(e,t)=>t?e:Object.assign({},e);class bQ{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=dQ(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&gQ(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=WG(n.xAxisID,pQ(e,"x")),o=t.yAxisID=WG(n.yAxisID,pQ(e,"y")),s=t.rAxisID=WG(n.rAxisID,pQ(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,i,o,s),c=t.vAxisID=r(a,o,i,s);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&DV(this._data,this),e._stacked&&gQ(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(GG(t))this._data=function(e){const t=Object.keys(e),n=new Array(t.length);let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],n[r]={x:o,y:e[o]};return n}(t);else if(n!==t){if(n){DV(n,this);const e=this._cachedMeta;gQ(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),LV.forEach((t=>{const n="_onData"+iV(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];const s=r.apply(this,i);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...i)})),s}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=dQ(t.vScale,t),t.stack!==n.stack&&(r=!0,gQ(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&fQ(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,s=i.axis;let a,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=UG(r[e])?this.parseArrayData(n,r,e,t):GG(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[s]||d&&l[s]<d[s];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(i()&&(u=!1),d=l);n._sorted=u}o&&fQ(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:o}=e,s=i.axis,a=o.axis,l=i.getLabels(),c=i===o,u=new Array(r);let d,A,h;for(d=0,A=r;d<A;++d)h=d+n,u[d]={[s]:c||i.parse(l[h],h),[a]:o.parse(t[h],h)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:o}=e,s=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],s[a]={x:i.parse(u[0],c),y:o.parse(u[1],c)};return s}parseObjectData(e,t,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,d,A;for(c=0,u=r;c<u;++c)d=c+n,A=t[d],l[c]={x:i.parse(rV(A,s),d),y:o.parse(rV(A,a),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,o=t[e.axis];return uQ({keys:cQ(r,!0),values:t._stacks[e.axis]},o,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let o=null===i?NaN:i;const s=r&&n._stacks[t.axis];r&&s&&(r.values=s,o=uQ(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,s=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:cQ(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(s);let d,A;function h(){A=r[d];const t=A[s.axis];return!VG(A[e.axis])||c>t||u<t}for(d=0;d<o&&(h()||(this.updateRangeFromParsed(l,e,A,a),!i));++d);if(i)for(d=o-1;d>=0;--d)if(!h()){this.updateRangeFromParsed(l,e,A,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r][e.axis],VG(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return GG(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(WG(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=lQ(e,n),i=lQ(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,s,a),c=s;c<s+a;++c){const t=r[c];t.hidden||(t.active&&l?o.push(t):t.draw(e,i))}for(c=0;c<o.length;++c)o[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return sW(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return sW(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,o=e+"-"+t,s=i[o],a=this.enableOptionSharing&&oV(n);if(s)return vQ(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),A=Object.keys(LH.elements[e]),h=l.resolveNamedOptions(d,A,(()=>this.getContext(n,r)),u);return h.$shared&&(h.$shared=a,i[o]=Object.freeze(vQ(h,a))),h}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,o="animation-".concat(t),s=i[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),o=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(o,this.getContext(e,n,t))}const l=new aQ(r,a&&a.animations);return a&&a._cacheable&&(i[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||mQ(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:o}}updateElement(e,t,n,r){mQ(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!mQ(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[s,a,l]of this._syncList)this[s](a,l);this._syncList=[];const r=n.length,i=t.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,o=e+t;let s;const a=e=>{for(e.length+=t,s=e.length-1;s>=o;s--)e[s]=e[s-t]};for(a(i),s=e;s<o;++s)i[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&gQ(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function yQ(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=FV(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,i,o,s,a=t._length;const l=()=>{32767!==o&&-32768!==o&&(oV(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(r=0,i=n.length;r<i;++r)o=t.getPixelForValue(n[r]),l();for(s=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),l();return a}function xQ(e,t,n,r){return UG(e)?function(e,t,n,r){const i=n.parse(e[0],r),o=n.parse(e[1],r),s=Math.min(i,o),a=Math.max(i,o);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:o,min:s,max:a}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function wQ(e,t,n,r){const i=e.iScale,o=e.vScale,s=i.getLabels(),a=i===o,l=[];let c,u,d,A;for(c=n,u=n+r;c<u;++c)A=t[c],d={},d[i.axis]=a||i.parse(s[c],c),l.push(xQ(A,d,o,c));return l}function _Q(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function SQ(e,t,n,r){let i=t.borderSkipped;const o={};if(!i)return void(e.borderSkipped=o);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,o;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:t,top:i,bottom:o}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(o[CQ(u,s,a,l)]=!0,i=c)),o[CQ(i,s,a,l)]=!0,e.borderSkipped=o}function CQ(e,t,n,r){var i,o,s;return r?(s=n,e=EQ(e=(i=e)===(o=t)?s:i===s?o:i,n,t)):e=EQ(e,t,n),e}function EQ(e,t,n){return"start"===e?t:"end"===e?n:e}function MQ(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}bQ.defaults={},bQ.prototype.datasetElementType=null,bQ.prototype.dataElementType=null;class PQ extends bQ{parsePrimitiveData(e,t,n,r){return wQ(e,t,n,r)}parseArrayData(e,t,n,r){return wQ(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?s:a,c="x"===o.axis?s:a,u=[];let d,A,h,f;for(d=n,A=n+r;d<A;++d)f=t[d],h={},h[i.axis]=i.parse(rV(f,l),d),u.push(xQ(rV(f,c),h,o,d));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),o=i._custom,s=_Q(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r);for(let A=t;A<t+n;A++){const t=this.getParsed(A),n=i||jG(t[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(A),h=this._calculateBarIndexPixels(A,c),f=(t._stacks||{})[s.axis],p={horizontal:l,base:n.base,enableBorderRadius:!f||_Q(t._custom)||o===f._top||o===f._bottom,x:l?n.head:h.center,y:l?h.center:n.head,height:l?h.size:Math.abs(n.size),width:l?Math.abs(n.size):h.size};d&&(p.options=u||this.resolveDataElementOptions(A,e[A].active?"active":r));const g=p.options||e[A].options;SQ(p,g,f,o),MQ(p,g,c.ratio),this.updateElement(e[A],A,p,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,o=[],s=e=>{const n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(jG(r)||isNaN(r))return!0};for(const a of r)if((void 0===t||!s(a))&&((!1===i||-1===o.indexOf(a.stack)||void 0===i&&void 0===a.stack)&&o.push(a.stack),a.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,o;for(i=0,o=t.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const s=e.barThickness;return{min:s||yQ(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n},options:{base:r,minBarLength:i}}=this,o=r||0,s=this.getParsed(e),a=s._custom,l=_Q(a);let c,u,d=s[t.axis],A=0,h=n?this.applyStack(t,s,n):d;h!==d&&(A=h-d,h=d),l&&(d=a.barStart,h=a.barEnd-a.barStart,0!==d&&mV(d)!==mV(a.barEnd)&&(A=0),A+=d);const f=jG(r)||l?A:r;let p=t.getPixelForValue(f);if(c=this.chart.getDataVisibility(e)?t.getPixelForValue(A+h):p,u=c-p,Math.abs(u)<i){u=function(e,t,n){return 0!==e?mV(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,o)*i,d===o&&(p-=u/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),r=Math.min(e,n),s=Math.max(e,n);p=Math.max(Math.min(p,s),r),c=p+u}if(p===t.getPixelForValue(o)){const e=mV(u)*t.getLineWidthForValue(o)/2;p+=e,u-=e}return{size:u,base:p,head:c,center:c+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,o=WG(r.maxBarThickness,1/0);let s,a;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,o=i[e];let s=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===s&&(s=o-(null===a?t.end-t.start:a-o)),null===a&&(a=o+o-s);const c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let o,s;return jG(i)?(o=t.min*n.categoryPercentage,s=n.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:t.pixels[e]-o/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);s=l.start+l.chunk*c+l.chunk/2,a=Math.min(o,l.chunk*l.ratio)}else s=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(o,t.min*t.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[t.axis]&&n[i].draw(this._ctx)}}PQ.id="bar",PQ.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},PQ.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class TQ extends bQ{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let o=0;o<i.length;o++){const e=t[n+o];i[o]._custom=WG(e[2],this.resolveDataElementOptions(o+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let o=0;o<i.length;o++){const e=t[n+o];i[o]._custom=WG(e&&e.r&&+e.r,this.resolveDataElementOptions(o+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:n,yScale:r}=t,i=this.getParsed(e),o=n.getLabelForValue(i.x),s=r.getLabelForValue(i.y),a=i._custom;return{label:t.label,value:"("+o+", "+s+(a?", "+a:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,r),c=o.axis,u=s.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!i&&this.getParsed(d),A={},h=A[c]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),f=A[u]=i?s.getBasePixel():s.getPixelForValue(n[u]);A.skip=isNaN(h)||isNaN(f),l&&(A.options=a||this.resolveDataElementOptions(d,t.active?"active":r),i&&(A.options.radius=0)),this.updateElement(t,d,A,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=WG(n&&n._custom,i),r}}TQ.id="bubble",TQ.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},TQ.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class kQ extends bQ{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,o,s=e=>+n[e];if(GG(n[e])){const{key:e="value"}=this._parsing;s=t=>+rV(n[t],e)}for(i=e,o=e+t;i<o;++i)r._parsed[i]=s(i)}}_getRotation(){return wV(this.options.rotation-90)}_getCircumference(){return wV(this.options.circumference)}_getRotationExtents(){let e=cV,t=-cV;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-o)/2,0),a=Math.min((l=this.options.cutout,c=s,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:A}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:p,offsetY:g}=function(e,t,n){let r=1,i=1,o=0,s=0;if(t<cV){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),A=Math.sin(l),h=(e,t,r)=>TV(e,a,l,!0)?1:Math.max(t,t*n,r,r*n),f=(e,t,r)=>TV(e,a,l,!0)?-1:Math.min(t,t*n,r,r*n),p=h(0,c,d),g=h(hV,u,A),m=f(lV,c,d),v=f(lV+hV,u,A);r=(p-m)/2,i=(g-v)/2,o=-(p+m)/2,s=-(g+v)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}(A,d,a),m=(n.width-o)/h,v=(n.height-o)/f,b=Math.max(Math.min(m,v)/2,0),y=QG(this.options.radius,b),x=(y-Math.max(y*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*y,this.offsetY=g*y,r.total=this.calculateTotal(),this.outerRadius=y-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/cV)}updateElements(e,t,n,r){const i="reset"===r,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,u=i&&a.animateScale,d=u?0:this.innerRadius,A=u?0:this.outerRadius,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(t,r);let p,g=this._getRotation();for(p=0;p<t;++p)g+=this._circumference(p,i);for(p=t;p<t+n;++p){const t=this._circumference(p,i),n=e[p],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:A,innerRadius:d};f&&(o.options=h||this.resolveDataElementOptions(p,n.active?"active":r)),g+=t,this.updateElement(n,p,o,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?cV*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=WW(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,o,s,a;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),e=o.data,s=o.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)a=s.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(WG(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}kQ.id="doughnut",kQ.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},kQ.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},kQ.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,r)=>{const i=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const n=": "+e.formattedValue;return UG(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class BQ extends bQ{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,o=this.chart._animationsDisabled;let{start:s,count:a}=GV(t,r,o);this._drawStart=s,this._drawCount=a,VV(t)&&(s=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(r,s,a,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),d=o.axis,A=s.axis,{spanGaps:h,segment:f}=this.options,p=bV(h)?h:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r;let m=t>0&&this.getParsed(t-1);for(let v=t;v<t+n;++v){const t=e[v],n=this.getParsed(v),h=g?t:{},b=jG(n[A]),y=h[d]=o.getPixelForValue(n[d],v),x=h[A]=i||b?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[A],v);h.skip=isNaN(y)||isNaN(x)||b,h.stop=v>0&&Math.abs(n[d]-m[d])>p,f&&(h.parsed=n,h.raw=l.data[v]),u&&(h.options=c||this.resolveDataElementOptions(v,t.active?"active":r)),g||this.updateElement(t,v,h,r),m=n}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}BQ.id="line",BQ.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},BQ.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class OQ extends bQ{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=WW(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return yW.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,n,r){const i="reset"===r,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*lV;let d,A=u;const h=360/this.countVisibleElements();for(d=0;d<t;++d)A+=this._computeAngle(d,r,h);for(d=t;d<t+n;d++){const t=e[d];let n=A,f=A+this._computeAngle(d,r,h),p=o.getDataVisibility(d)?a.getDistanceFromCenterForValue(this.getParsed(d).r):0;A=f,i&&(s.animateScale&&(p=0),s.animateRotate&&(n=f=u));const g={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?wV(this.resolveDataElementOptions(e,t).angle||n):0}}OQ.id="polarArea",OQ.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},OQ.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,r)=>{const i=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class IQ extends kQ{}IQ.id="pie",IQ.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class RQ extends bQ{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return yW.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let s=t;s<t+n;s++){const t=e[s],n=this.resolveDataElementOptions(s,t.active?"active":r),a=i.getPointPositionForValue(s,this.getParsed(s).r),l=o?i.xCenter:a.x,c=o?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,s,u,r)}}}RQ.id="radar",RQ.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},RQ.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class LQ{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return bV(this.x)&&bV(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}LQ.defaults={},LQ.defaultRoutes=void 0;const DQ={values:e=>UG(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,o=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),o=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const s=gV(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),WW(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=e/Math.pow(10,Math.floor(gV(e)));return 1===r||2===r||5===r?DQ.numeric.call(this,e,t,n):""}};var FQ={formatters:DQ};function NQ(e,t){const n=e.options.ticks,r=n.maxTicksLimit||function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],o=i.length,s=i[0],a=i[o-1],l=[];if(o>r)return function(e,t,n,r){let i,o=0,s=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===s&&(t.push(e[i]),o++,s=n[o*r])}(t,l,i,o/r),l;const c=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const o=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let s=0,a=o.length-1;s<a;s++){const e=o[s];if(e>i)return e}return Math.max(i,1)}(i,t,r);if(o>0){let e,n;const r=o>1?Math.round((a-s)/(o-1)):null;for(zQ(t,l,c,jG(r)?0:s-r,s),e=0,n=o-1;e<n;e++)zQ(t,l,c,i[e],i[e+1]);return zQ(t,l,c,a,jG(r)?t.length:a+r),l}return zQ(t,l,c),l}function zQ(e,t,n,r,i){const o=WG(r,0),s=Math.min(WG(i,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=o;c<0;)u++,c=Math.round(o+u*n);for(l=Math.max(o,0);l<s;l++)l===c&&(t.push(e[l]),u++,c=Math.round(o+u*n))}LH.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:FQ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),LH.route("scale.ticks","color","","color"),LH.route("scale.grid","color","","borderColor"),LH.route("scale.grid","borderColor","","borderColor"),LH.route("scale.title","color","","color"),LH.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),LH.describe("scales",{_fallback:"scale"}),LH.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e});const jQ=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n;function UQ(e,t){const n=[],r=e.length/t,i=e.length;let o=0;for(;o<i;o+=r)n.push(e[Math.floor(o)]);return n}function GQ(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),o=e._startPixel,s=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-o,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<o-a||c>s+a)))return c}function VQ(e){return e.drawTicks?e.tickLength:0}function HQ(e,t){if(!e.display)return 0;const n=iW(e.font,t),r=rW(e.padding);return(UG(e.text)?e.text.length:1)*n.lineHeight+r.height}function WQ(e,t,n){let r=jV(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class QQ extends LQ{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=HG(e,Number.POSITIVE_INFINITY),t=HG(t,Number.NEGATIVE_INFINITY),n=HG(n,Number.POSITIVE_INFINITY),r=HG(r,Number.NEGATIVE_INFINITY),{min:HG(e,n),max:HG(t,r),minDefined:VG(e),maxDefined:VG(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)t=s[a].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),o||(r=Math.max(r,t.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:HG(n,HG(r,n)),max:HG(r,HG(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){JG(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,o=QG(t,(i-r)/2),s=(e,t)=>n&&0===e?0:e+t;return{min:s(r,-Math.abs(o)),max:s(i,o)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?UQ(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=NQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){JG(this.options.afterUpdate,[this])}beforeSetDimensions(){JG(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){JG(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),JG(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){JG(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=JG(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){JG(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){JG(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=this.ticks.length,r=t.minRotation||0,i=t.maxRotation;let o,s,a,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,A=kV(this.chart.width-u,0,this.maxWidth);o=e.offset?this.maxWidth/n:A/(n-1),u+6>o&&(o=A/(n-(e.offset?.5:1)),s=this.maxHeight-VQ(e.grid)-t.padding-HQ(e.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=_V(Math.min(Math.asin(kV((c.highest.height+6)/o,-1,1)),Math.asin(kV(s/a,-1,1))-Math.asin(kV(d/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){JG(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){JG(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=HQ(r,t.options.font);if(s?(e.width=this.maxWidth,e.height=VQ(i)+o):(e.height=this.maxHeight,e.width=VQ(i)+o),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:o}=this._getLabelSizes(),a=2*n.padding,l=wV(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const t=n.mirror?0:u*i.width+c*o.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*i.width+u*o.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===i?d=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+o)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){JG(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)jG(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=UQ(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,t){const{ctx:n,_longestTextCache:r}=this,i=[],o=[];let s,a,l,c,u,d,A,h,f,p,g,m=0,v=0;for(s=0;s<t;++s){if(c=e[s].label,u=this._resolveTickFontOptions(s),n.font=d=u.string,A=r[d]=r[d]||{data:{},gc:[]},h=u.lineHeight,f=p=0,jG(c)||UG(c)){if(UG(c))for(a=0,l=c.length;a<l;++a)g=c[a],jG(g)||UG(g)||(f=DH(n,A.data,A.gc,f,g),p+=h)}else f=DH(n,A.data,A.gc,f,c),p=h;i.push(f),o.push(p),m=Math.max(f,m),v=Math.max(p,v)}!function(e,t){KG(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(r,t);const b=i.indexOf(m),y=o.indexOf(v),x=e=>({width:i[e]||0,height:o[e]||0});return{first:x(0),last:x(t-1),widest:x(b),highest:x(y),widths:i,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return kV(this._alignToPixels?NH(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return sW(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return sW(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=wV(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,s=i?i.widest.width+o:0,a=i?i.highest.height+o:0;return this.isHorizontal()?a*n>s*r?s/n:a/r:a*r<s*n?a/n:s/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:o}=r,s=i.offset,a=this.isHorizontal(),l=this.ticks.length+(s?1:0),c=VQ(i),u=[],d=i.setContext(this.getContext()),A=d.drawBorder?d.borderWidth:0,h=A/2,f=function(e){return NH(n,e,A)};let p,g,m,v,b,y,x,w,_,S,C,E;if("top"===o)p=f(this.bottom),y=this.bottom-c,w=p-h,S=f(e.top)+h,E=e.bottom;else if("bottom"===o)p=f(this.top),S=e.top,E=f(e.bottom)-h,y=p+h,w=this.top+c;else if("left"===o)p=f(this.right),b=this.right-c,x=p-h,_=f(e.left)+h,C=e.right;else if("right"===o)p=f(this.left),_=e.left,C=f(e.right)-h,b=p+h,x=this.left+c;else if("x"===t){if("center"===o)p=f((e.top+e.bottom)/2+.5);else if(GG(o)){const e=Object.keys(o)[0],t=o[e];p=f(this.chart.scales[e].getPixelForValue(t))}S=e.top,E=e.bottom,y=p+h,w=y+c}else if("y"===t){if("center"===o)p=f((e.left+e.right)/2);else if(GG(o)){const e=Object.keys(o)[0],t=o[e];p=f(this.chart.scales[e].getPixelForValue(t))}b=p-h,x=b-c,_=e.left,C=e.right}const M=WG(r.ticks.maxTicksLimit,l),P=Math.max(1,Math.ceil(l/M));for(g=0;g<l;g+=P){const e=i.setContext(this.getContext(g)),t=e.lineWidth,r=e.color,o=e.borderDash||[],l=e.borderDashOffset,c=e.tickWidth,d=e.tickColor,A=e.tickBorderDash||[],h=e.tickBorderDashOffset;m=GQ(this,g,s),void 0!==m&&(v=NH(n,m,t),a?b=x=_=C=v:y=w=S=E=v,u.push({tx1:b,ty1:y,tx2:x,ty2:w,x1:_,y1:S,x2:C,y2:E,width:t,color:r,borderDash:o,borderDashOffset:l,tickWidth:c,tickColor:d,tickBorderDash:A,tickBorderDashOffset:h}))}return this._ticksLength=l,this._borderValue=p,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,d=VQ(n.grid),A=d+c,h=u?-c:A,f=-wV(this.labelRotation),p=[];let g,m,v,b,y,x,w,_,S,C,E,M,P="middle";if("top"===r)x=this.bottom-h,w=this._getXAxisLabelAlignment();else if("bottom"===r)x=this.top+h,w=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);w=e.textAlign,y=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);w=e.textAlign,y=e.x}else if("x"===t){if("center"===r)x=(e.top+e.bottom)/2+A;else if(GG(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)+A}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)y=(e.left+e.right)/2-A;else if(GG(r)){const e=Object.keys(r)[0],t=r[e];y=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===a?P="top":"end"===a&&(P="bottom"));const T=this._getLabelSizes();for(g=0,m=s.length;g<m;++g){v=s[g],b=v.label;const e=i.setContext(this.getContext(g));_=this.getPixelForTick(g)+i.labelOffset,S=this._resolveTickFontOptions(g),C=S.lineHeight,E=UG(b)?b.length:1;const t=E/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let d,A=w;if(o?(y=_,"inner"===w&&(A=g===m-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),M="top"===r?"near"===l||0!==f?-E*C+C/2:"center"===l?-T.highest.height/2-t*C+C:-T.highest.height+C/2:"near"===l||0!==f?C/2:"center"===l?T.highest.height/2-t*C:T.highest.height-E*C,u&&(M*=-1)):(x=_,M=(1-E)*C/2),e.showLabelBackdrop){const t=rW(e.backdropPadding),n=T.heights[g],r=T.widths[g];let i=x+M-t.top,o=y-t.left;switch(P){case"middle":i-=n/2;break;case"bottom":i-=n}switch(w){case"center":o-=r/2;break;case"right":o-=r}d={left:o,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}p.push({rotation:f,label:b,font:S,color:n,strokeColor:a,strokeWidth:c,textOffset:M,textAlign:A,textBaseline:P,translation:[y,x],backdrop:d})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-wV(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=e+i,s=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const s=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,o=r.length;i<o;++i){const e=r[i];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:n}}=this,r=n.setContext(this.getContext()),i=n.drawBorder?r.borderWidth:0;if(!i)return;const o=n.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let a,l,c,u;this.isHorizontal()?(a=NH(e,this.left,i)-i/2,l=NH(e,this.right,o)+o/2,c=u=s):(c=NH(e,this.top,i)-i/2,u=NH(e,this.bottom,o)+o/2,a=l=s),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(a,c),t.lineTo(l,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&VH(t,n);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let i,o;for(i=0,o=r.length;i<o;++i){const e=r[i],n=e.font,o=e.label;e.backdrop&&(t.fillStyle=e.backdrop.color,t.fillRect(e.backdrop.left,e.backdrop.top,e.backdrop.width,e.backdrop.height)),JH(t,o,0,e.textOffset,n,e)}n&&HH(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=iW(n.font),o=rW(n.padding),s=n.align;let a=i.lineHeight/2;"bottom"===t||"center"===t||GG(t)?(a+=o.bottom,UG(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:i,left:o,bottom:s,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d,A,h,f=0;const p=s-i,g=a-o;if(e.isHorizontal()){if(A=UV(r,o,a),GG(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)+p-t}else h="center"===n?(c.bottom+c.top)/2+p-t:jQ(e,n,t);d=a-o}else{if(GG(n)){const e=Object.keys(n)[0],r=n[e];A=u[e].getPixelForValue(r)-g+t}else A="center"===n?(c.left+c.right)/2-g+t:jQ(e,n,t);h=UV(r,s,i),f="left"===n?-hV:hV}return{titleX:A,titleY:h,maxWidth:d,rotation:f}}(this,a,t,s);JH(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:WQ(s,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=WG(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===QQ.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=t.length;i<o;++i){const o=t[i];o[n]!==this.id||e&&o.type!==e||r.push(o)}return r}_resolveTickFontOptions(e){return iW(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class JQ{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=$G(Object.create(null),[n?LH.get(n):{},LH.get(t),e.defaults]);LH.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),o=[e].concat(r).join("."),s=t[n].split("."),a=s.pop(),l=s.join(".");LH.route(o,i,l,a)}))}(t,e.defaultRoutes);e.descriptors&&LH.describe(t,e.descriptors)}(e,o,n),this.override&&LH.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in LH[r]&&(delete LH[r][n],this.override&&delete BH[n])}}var KQ=new class{constructor(){this.controllers=new JQ(bQ,"datasets",!0),this.elements=new JQ(LQ,"elements"),this.plugins=new JQ(Object,"plugins"),this.scales=new JQ(QQ,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):KG(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=iV(e);JG(n["before"+r],[],n),t[e](n),JG(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}};class XQ extends bQ{update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:o}=GV(t,n,r);if(this._drawStart=i,this._drawCount=o,VV(t)&&(i=0,o=n.length),this.options.showLine){const{dataset:i,_dataset:o}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:s},e)}this.updateElements(n,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=KQ.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),A=o.axis,h=s.axis,{spanGaps:f,segment:p}=this.options,g=bV(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=m?t:{},f=jG(n[h]),y=c[A]=o.getPixelForValue(n[A],b),x=c[h]=i||f?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[h],b);c.skip=isNaN(y)||isNaN(x)||f,c.stop=b>0&&Math.abs(n[A]-v[A])>g,p&&(c.parsed=n,c.raw=l.data[b]),d&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":r)),m||this.updateElement(t,b,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,o)/2}}XQ.id="scatter",XQ.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},XQ.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function YQ(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qQ{constructor(e){this.options=e||{}}init(e){}formats(){return YQ()}parse(e,t){return YQ()}format(e,t){return YQ()}add(e,t,n){return YQ()}diff(e,t,n){return YQ()}startOf(e,t,n){return YQ()}endOf(e,t){return YQ()}}qQ.override=function(e){Object.assign(qQ.prototype,e)};var ZQ={_date:qQ};function $Q(e,t,n,r){const{controller:i,data:o,_sorted:s}=e,a=i._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&s&&o.length){const e=a._reversePixels?RV:IV;if(!r)return e(o,t,n);if(i._sharedOptions){const r=o[0],i="function"===typeof r.getRange&&r.getRange(t);if(i){const r=e(o,t,n-i),s=e(o,t,n+i);return{lo:r.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function eJ(e,t,n,r,i){const o=e.getSortedVisibleDatasetMetas(),s=n[t];for(let a=0,l=o.length;a<l;++a){const{index:e,data:n}=o[a],{lo:l,hi:c}=$Q(o[a],t,s,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function tJ(e,t,n,r,i){const o=[];if(!i&&!e.isPointInArea(t))return o;return eJ(e,n,t,(function(n,s,a){(i||GH(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&o.push({element:n,datasetIndex:s,index:a})}),!0),o}function nJ(e,t,n,r,i,o){let s=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return eJ(e,n,t,(function(n,c,u){const d=n.inRange(t.x,t.y,i);if(r&&!d)return;const A=n.getCenterPoint(i);if(!(!!o||e.isPointInArea(A))&&!d)return;const h=a(t,A);h<l?(s=[{element:n,datasetIndex:c,index:u}],l=h):h===l&&s.push({element:n,datasetIndex:c,index:u})})),s}function rJ(e,t,n,r,i,o){return o||e.isPointInArea(t)?"r"!==n||r?nJ(e,t,n,r,i,o):function(e,t,n,r){let i=[];return eJ(e,n,t,(function(e,n,o){const{startAngle:s,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=CV(e,{x:t.x,y:t.y});TV(l,s,a)&&i.push({element:e,datasetIndex:n,index:o})})),i}(e,t,n,i):[]}function iJ(e,t,n,r,i){const o=[],s="x"===n?"inXRange":"inYRange";let a=!1;return eJ(e,n,t,((e,r,l)=>{e[s](t[n],i)&&(o.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,i))})),r&&!a?[]:o}var oJ={evaluateInteractionItems:eJ,modes:{index(e,t,n,r){const i=LW(t,e),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?tJ(e,i,o,r,s):rJ(e,i,o,!1,r,s),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=LW(t,e),o=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?tJ(e,i,o,r,s):rJ(e,i,o,!1,r,s);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,r)=>tJ(e,LW(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=LW(t,e),o=n.axis||"xy",s=n.includeInvisible||!1;return rJ(e,i,o,n.intersect,r,s)},x:(e,t,n,r)=>iJ(e,LW(t,e),"x",n.intersect,r),y:(e,t,n,r)=>iJ(e,LW(t,e),"y",n.intersect,r)}};const sJ=["left","top","right","bottom"];function aJ(e,t){return e.filter((e=>e.pos===t))}function lJ(e,t){return e.filter((e=>-1===sJ.indexOf(e.pos)&&e.box.axis===t))}function cJ(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function uJ(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!sJ.includes(r))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let o,s,a;for(o=0,s=e.length;o<s;++o){a=e[o];const{fullSize:s}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:s&&t.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:s&&t.availableHeight)}return n}function dJ(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function AJ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function hJ(e,t,n,r){const{pos:i,box:o}=n,s=e.maxPadding;if(!GG(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?o.height:o.width),n.size=t.size/t.count,e[i]+=n.size}o.getPadding&&AJ(s,o.getPadding());const a=Math.max(0,t.outerWidth-dJ(s,e,"left","right")),l=Math.max(0,t.outerHeight-dJ(s,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function fJ(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function pJ(e,t,n,r){const i=[];let o,s,a,l,c,u;for(o=0,s=e.length,c=0;o<s;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,fJ(a.horizontal,t));const{same:s,other:d}=hJ(t,n,a,r);c|=s&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&pJ(i,t,n,r)||u}function gJ(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function mJ(e,t,n,r){const i=n.padding;let{x:o,y:s}=t;for(const a of e){const e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,o=l.size||e.height;oV(l.start)&&(s=l.start),e.fullSize?gJ(e,i.left,s,n.outerWidth-i.right-i.left,o):gJ(e,t.left+l.placed,s,r,o),l.start=s,l.placed+=r,s=e.bottom}else{const r=t.h*c,s=l.size||e.width;oV(l.start)&&(o=l.start),e.fullSize?gJ(e,o,i.top,s,n.outerHeight-i.bottom-i.top):gJ(e,o,t.top+l.placed,s,r),l.start=o,l.placed+=r,o=e.right}}t.x=o,t.y=s}LH.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var vJ={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=rW(e.options.layout.padding),o=Math.max(t-i.width,0),s=Math.max(n-i.height,0),a=function(e){const t=function(e){const t=[];let n,r,i,o,s,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:o,options:{stack:s,stackWeight:a=1}}=i),t.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return t}(e),n=cJ(t.filter((e=>e.box.fullSize)),!0),r=cJ(aJ(t,"left"),!0),i=cJ(aJ(t,"right")),o=cJ(aJ(t,"top"),!0),s=cJ(aJ(t,"bottom")),a=lJ(t,"x"),l=lJ(t,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(s).concat(a),chartArea:aJ(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(s).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;KG(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),A=Object.assign({},i);AJ(A,rW(r));const h=Object.assign({maxPadding:A,w:o,h:s,x:i.left,y:i.top},i),f=uJ(l.concat(c),d);pJ(a.fullSize,h,d,f),pJ(l,h,d,f),pJ(c,h,d,f)&&pJ(l,h,d,f),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(h),mJ(a.leftAndTop,h,d,f),h.x+=h.w,h.y+=h.h,mJ(a.rightAndBottom,h,d,f),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},KG(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})}))}};class bJ{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class yJ extends bJ{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xJ="$chartjs",wJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_J=e=>null===e||""===e;const SJ=!!zW&&{passive:!0};function CJ(e,t,n){e.canvas.removeEventListener(t,n,SJ)}function EJ(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function MJ(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||EJ(n.addedNodes,r),t=t&&!EJ(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function PJ(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||EJ(n.removedNodes,r),t=t&&!EJ(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const TJ=new Map;let kJ=0;function BJ(){const e=window.devicePixelRatio;e!==kJ&&(kJ=e,TJ.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function OJ(e,t,n){const r=e.canvas,i=r&&TW(r);if(!i)return;const o=zV(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),s=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||o(n,r)}));return s.observe(i),function(e,t){TJ.size||window.addEventListener("resize",BJ),TJ.set(e,t)}(e,o),s}function IJ(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){TJ.delete(e),TJ.size||window.removeEventListener("resize",BJ)}(e)}function RJ(e,t,n){const r=e.canvas,i=zV((t=>{null!==e.ctx&&n(function(e,t){const n=wJ[e.type]||e.type,{x:r,y:i}=LW(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e,(e=>{const t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,n){e.addEventListener(t,n,SJ)}(r,t,i),i}class LJ extends bJ{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[xJ]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_J(i)){const t=jW(e,"width");void 0!==t&&(e.width=t)}if(_J(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=jW(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[xJ])return!1;const n=t[xJ].initial;["height","width"].forEach((e=>{const r=n[e];jG(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[xJ],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:MJ,detach:PJ,resize:OJ}[t]||RJ;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:IJ,detach:IJ,resize:IJ}[t]||CJ)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return FW(e,t,n,r)}isAttached(e){const t=TW(e);return!(!t||!t.isConnected)}}class DJ{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===JG(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){jG(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=WG(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(KQ.plugins.items);for(let o=0;o<r.length;o++)n.push(KQ.getPlugin(r[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const e=i[o];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:o}=t;const s=[],a=e.getContext();for(const l of i){const t=l.id,i=FJ(n[t],r);null!==i&&s.push({plugin:l,options:NJ(e.config,{plugin:l,local:o[t]},i,a)})}return s}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function FJ(e,t){return t||!1!==e?!0===e?{}:e:null}function NJ(e,t,n,r){let{plugin:i,local:o}=t;const s=e.pluginScopeKeys(i),a=e.getOptionScopes(n,s);return o&&i.defaults&&a.push(i.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zJ(e,t){const n=LH.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function jJ(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.charAt(0).toLowerCase();var n}function UJ(e){const t=e.options||(e.options={});t.plugins=WG(t.plugins,{}),t.scales=function(e,t){const n=BH[e.type]||{scales:{}},r=t.scales||{},i=zJ(e.type,t),o=Object.create(null),s=Object.create(null);return Object.keys(r).forEach((e=>{const t=r[e];if(!GG(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const a=jJ(e,t),l=function(e,t){return e===t?"_index_":"_value_"}(a,i),c=n.scales||{};o[a]=o[a]||e,s[e]=eV(Object.create(null),[{axis:a},t,c[a],c[l]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,a=n.indexAxis||zJ(i,t),l=(BH[i]||{}).scales||{};Object.keys(l).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),i=n[t+"AxisID"]||o[t]||t;s[i]=s[i]||Object.create(null),eV(s[i],[{axis:t},r[i],l[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];eV(t,[LH.scales[t.type],LH.scale])})),s}(e,t)}function GJ(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const VJ=new Map,HJ=new Set;function WJ(e,t){let n=VJ.get(e);return n||(n=t(),VJ.set(e,n),HJ.add(n)),n}const QJ=(e,t,n)=>{const r=rV(t,n);void 0!==r&&e.add(r)};class JJ{constructor(e){this._config=function(e){return(e=e||{}).data=GJ(e.data),UJ(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=GJ(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),UJ(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return WJ(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return WJ("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return WJ("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return WJ("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),s=o.get(t);if(s)return s;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>QJ(a,e,t)))),t.forEach((e=>QJ(a,r,e))),t.forEach((e=>QJ(a,BH[i]||{},e))),t.forEach((e=>QJ(a,LH,e))),t.forEach((e=>QJ(a,OH,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),HJ.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,BH[t]||{},LH.datasets[t]||{},{type:t},LH,OH]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:o,subPrefixes:s}=KJ(this._resolverCache,e,r);let a=o;if(function(e,t){const{isScriptable:n,isIndexable:r}=cW(e);for(const i of t){const t=n(i),o=r(i),s=(o||t)&&e[i];if(t&&(sV(s)||XJ(s))||o&&UG(s))return!0}return!1}(o,t)){i.$shared=!1;a=lW(o,n=sV(n)?n():n,this.createResolver(e,n,s))}for(const l of t)i[l]=a[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=KJ(this._resolverCache,e,n);return GG(t)?lW(i,t,void 0,r):i}}function KJ(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let o=r.get(i);if(!o){o={resolver:aW(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,o)}return o}const XJ=e=>GG(e)&&Object.getOwnPropertyNames(e).reduce(((t,n)=>t||sV(e[n])),!1);const YJ=["top","bottom","left","right","chartArea"];function qJ(e,t){return"top"===e||"bottom"===e||-1===YJ.indexOf(e)&&"x"===t}function ZJ(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function $J(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),JG(n&&n.onComplete,[e],t)}function eK(e){const t=e.chart,n=t.options.animation;JG(n&&n.onProgress,[e],t)}function tK(e){return PW()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const nK={},rK=e=>{const t=tK(e);return Object.values(nK).filter((e=>e.canvas===t)).pop()};function iK(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}class oK{constructor(e,t){const n=this.config=new JJ(t),r=tK(e),i=rK(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!PW()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?yJ:LJ}(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=zG(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new DJ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),o.resizeDelay||0),this._dataChanges=[],nK[this.id]=this,s&&a?(nQ.listen(this,"complete",$J),nQ.listen(this,"progress",eK),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return jG(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():NW(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zH(this.canvas,this.ctx),this}stop(){return nQ.stop(this),this}resize(e,t){nQ.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,i),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,NW(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),JG(n.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){KG(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=jJ(e,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),KG(i,(t=>{const i=t.options,o=i.id,s=jJ(o,i),a=WG(i.type,t.dtype);void 0!==i.position&&qJ(i.position,s)===qJ(t.dposition)||(i.position=t.dposition),r[o]=!0;let l=null;if(o in n&&n[o].type===a)l=n[o];else{l=new(KQ.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),KG(r,((e,t)=>{e||delete n[t]})),KG(n,(e=>{vJ.configure(this,e,e.options),vJ.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(ZJ("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||zJ(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=KQ.getController(o),{datasetElementType:r,dataElementType:s}=LH.datasets[o];Object.assign(t.prototype,{dataElementType:KQ.getElement(s),datasetElementType:r&&KQ.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){KG(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||KG(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ZJ("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){KG(this.scales,(e=>{vJ.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);aV(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){iK(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!aV(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;vJ.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],KG(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,sV(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(nQ.has(this)?this.attached&&!nQ.running(this)&&nQ.start(this):(this.draw(),$J({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&VH(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&HH(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return GH(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=oJ.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=sW(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);oV(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),nQ.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),zH(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete nK[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};KG(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},t.isAttached(this.canvas)?s():o()}unbindEvents(){KG(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},KG(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,o,s,a;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=e.length;s<a;++s){o=e[s];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!XG(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),o=i(t,e),s=n?e:i(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,o=t,s=this._getActiveElements(e,r,n,o),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,JG(i.onHover,[e,s,this],this),a&&JG(i.onClick,[e,s,this],this));const c=!XG(s,r);return(c||t)&&(this._active=s,this._updateHoverStyles(s,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}const sK=()=>KG(oK.instances,(e=>e._plugins.invalidate())),aK=!0;function lK(e,t,n){const{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(o,s,a,r-c,n+c),l>i?(c=i/l,e.arc(o,s,l,n+c,r-c,!0)):e.arc(o,s,i,n+hV,r-hV),e.closePath(),e.clip()}function cK(e,t,n,r){const i=eW(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-t)/2,s=Math.min(o,r*t/2),a=e=>{const t=(n-Math.min(o,e))*r/2;return kV(e,0,Math.min(o,t))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:kV(i.innerStart,0,s),innerEnd:kV(i.innerEnd,0,s)}}function uK(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function dK(e,t,n,r,i,o){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+n-c,0),A=u>0?u+r+n+c:0;let h=0;const f=i-l;if(r){const e=((u>0?u-r:0)+(d>0?d-r:0))/2;h=(f-(0!==e?f*e/(e+r):f))/2}const p=(f-Math.max(.001,f*d-n/lV)/d)/2,g=l+p+h,m=i-p-h,{outerStart:v,outerEnd:b,innerStart:y,innerEnd:x}=cK(t,A,d,m-g),w=d-v,_=d-b,S=g+v/w,C=m-b/_,E=A+y,M=A+x,P=g+y/E,T=m-x/M;if(e.beginPath(),o){if(e.arc(s,a,d,S,C),b>0){const t=uK(_,C,s,a);e.arc(t.x,t.y,b,C,m+hV)}const t=uK(M,m,s,a);if(e.lineTo(t.x,t.y),x>0){const t=uK(M,T,s,a);e.arc(t.x,t.y,x,m+hV,T+Math.PI)}if(e.arc(s,a,A,m-x/A,g+y/A,!0),y>0){const t=uK(E,P,s,a);e.arc(t.x,t.y,y,P+Math.PI,g-hV)}const n=uK(w,g,s,a);if(e.lineTo(n.x,n.y),v>0){const t=uK(w,S,s,a);e.arc(t.x,t.y,v,g-hV,S)}}else{e.moveTo(s,a);const t=Math.cos(S)*d+s,n=Math.sin(S)*d+a;e.lineTo(t,n);const r=Math.cos(C)*d+s,i=Math.sin(C)*d+a;e.lineTo(r,i)}e.closePath()}function AK(e,t,n,r,i,o){const{options:s}=t,{borderWidth:a,borderJoinStyle:l}=s,c="inner"===s.borderAlign;a&&(c?(e.lineWidth=2*a,e.lineJoin=l||"round"):(e.lineWidth=a,e.lineJoin=l||"bevel"),t.fullCircles&&function(e,t,n){const{x:r,y:i,startAngle:o,pixelMargin:s,fullCircles:a}=t,l=Math.max(t.outerRadius-s,0),c=t.innerRadius+s;let u;for(n&&lK(e,t,o+cV),e.beginPath(),e.arc(r,i,c,o+cV,o,!0),u=0;u<a;++u)e.stroke();for(e.beginPath(),e.arc(r,i,l,o,o+cV),u=0;u<a;++u)e.stroke()}(e,t,c),c&&lK(e,t,i),dK(e,t,n,r,i,o),e.stroke())}Object.defineProperties(oK,{defaults:{enumerable:aK,value:LH},instances:{enumerable:aK,value:nK},overrides:{enumerable:aK,value:BH},registry:{enumerable:aK,value:KQ},version:{enumerable:aK,value:"3.9.1"},getChart:{enumerable:aK,value:rK},register:{enumerable:aK,value:function(){KQ.add(...arguments),sK()}},unregister:{enumerable:aK,value:function(){KQ.remove(...arguments),sK()}}});class hK extends LQ{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=CV(r,{x:e,y:t}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=this.options.spacing/2,A=WG(u,a-s)>=cV||TV(i,s,a),h=BV(o,l+d,c+d);return A&&h}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(o+s+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/2,i=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>cV?Math.floor(n/cV):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();let s=0;if(r){s=r/2;const t=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(t)*s,Math.sin(t)*s),this.circumference>=lV&&(s=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const a=function(e,t,n,r,i){const{fullCircles:o,startAngle:s,circumference:a}=t;let l=t.endAngle;if(o){dK(e,t,n,r,s+cV,i);for(let t=0;t<o;++t)e.fill();isNaN(a)||(l=s+a%cV,a%cV===0&&(l+=cV))}return dK(e,t,n,r,l,i),e.fill(),l}(e,this,s,i,o);AK(e,this,s,i,a,o),e.restore()}}function fK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=WG(n.borderCapStyle,t.borderCapStyle),e.setLineDash(WG(n.borderDash,t.borderDash)),e.lineDashOffset=WG(n.borderDashOffset,t.borderDashOffset),e.lineJoin=WG(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=WG(n.borderWidth,t.borderWidth),e.strokeStyle=WG(n.borderColor,t.borderColor)}function pK(e,t,n){e.lineTo(n.x,n.y)}function gK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:o=r-1}=n,{start:s,end:a}=t,l=Math.max(i,s),c=Math.min(o,a),u=i<s&&o<s||i>a&&o>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function mK(e,t,n,r){const{points:i,options:o}=t,{count:s,start:a,loop:l,ilen:c}=gK(i,n,r),u=function(e){return e.stepped?WH:e.tension||"monotone"===e.cubicInterpolationMode?QH:pK}(o);let d,A,h,{move:f=!0,reverse:p}=r||{};for(d=0;d<=c;++d)A=i[(a+(p?c-d:d))%s],A.skip||(f?(e.moveTo(A.x,A.y),f=!1):u(e,h,A,p,o.stepped),h=A);return l&&(A=i[(a+(p?c:0))%s],u(e,h,A,p,o.stepped)),!!l}function vK(e,t,n,r){const i=t.points,{count:o,start:s,ilen:a}=gK(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,A,h,f,p,g=0,m=0;const v=e=>(s+(c?a-e:e))%o,b=()=>{h!==f&&(e.lineTo(g,f),e.lineTo(g,h),e.lineTo(g,p))};for(l&&(d=i[v(0)],e.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=i[v(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===A?(n<h?h=n:n>f&&(f=n),g=(m*g+t)/++m):(b(),e.lineTo(t,n),A=r,m=0,h=f=n),p=n}b()}function bK(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?vK:mK}hK.id="arc",hK.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},hK.defaultRoutes={backgroundColor:"backgroundColor"};const yK="function"===typeof Path2D;function xK(e,t,n,r){yK&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),fK(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:o}=t,s=bK(t);for(const a of i)fK(e,o,a.style),e.beginPath(),s(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class wK extends LQ{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;MW(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const o=!!e._loop,{start:s,end:a}=function(e,t,n,r){let i=0,o=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}(n,i,o,r);return $W(e,!0===r?[{start:s,end:a,loop:o}]:function(e,t,n,r){const i=e.length,o=[];let s,a=t,l=e[t];for(s=t+1;s<=n;++s){const n=e[s%i];n.skip||n.stop?l.skip||(r=!1,o.push({start:t%i,end:(s-1)%i,loop:r}),t=a=n.stop?s:null):(a=s,l.skip&&(t=s)),l=n}return null!==a&&o.push({start:t%i,end:a%i,loop:r}),o}(n,s,a<s?a+i:a,!!e._fullLoop&&0===s&&a===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,o=ZW(this,{property:t,start:r,end:r});if(!o.length)return;const s=[],a=function(e){return e.stepped?GW:e.tension||"monotone"===e.cubicInterpolationMode?VW:UW}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],d=i[c],A=i[u];if(d===A){s.push(d);continue}const h=a(d,A,Math.abs((r-d[t])/(A[t]-d[t])),n.stepped);h[t]=e[t],s.push(h)}return 1===s.length?s[0]:s}pathSegment(e,t,n){return bK(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=bK(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const s of r)o&=i(e,this,s,{start:t,end:t+n-1});return!!o}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),xK(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function _K(e,t,n,r){const i=e.options,{[n]:o}=e.getProps([n],r);return Math.abs(t-o)<i.radius+i.hitRadius}wK.id="line",wK.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},wK.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},wK.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};class SK extends LQ{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return _K(this,e,"x",t)}inYRange(e,t){return _K(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!GH(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,jH(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function CK(e,t){const{x:n,y:r,base:i,width:o,height:s}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=s/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=o/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function EK(e,t,n,r){return e?0:kV(t,n,r)}function MK(e){const t=CK(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,o=tW(r);return{t:EK(i.top,o.top,0,n),r:EK(i.right,o.right,0,t),b:EK(i.bottom,o.bottom,0,n),l:EK(i.left,o.left,0,t)}}(e,n/2,r/2),o=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=nW(i),s=Math.min(t,n),a=e.borderSkipped,l=r||GG(i);return{topLeft:EK(!l||a.top||a.left,o.topLeft,0,s),topRight:EK(!l||a.top||a.right,o.topRight,0,s),bottomLeft:EK(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:EK(!l||a.bottom||a.right,o.bottomRight,0,s)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function PK(e,t,n,r){const i=null===t,o=null===n,s=e&&!(i&&o)&&CK(e,r);return s&&(i||BV(t,s.left,s.right))&&(o||BV(n,s.top,s.bottom))}function TK(e,t){e.rect(t.x,t.y,t.w,t.h)}function kK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-r,s=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+o,h:e.h+s,radius:e.radius}}SK.id="point",SK.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},SK.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class BK extends LQ{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=MK(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?XH:TK;var a;e.save(),o.w===i.w&&o.h===i.h||(e.beginPath(),s(e,kK(o,t,i)),e.clip(),s(e,kK(i,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),s(e,kK(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return PK(this,e,t,n)}inXRange(e,t){return PK(this,e,null,t)}inYRange(e,t){return PK(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}BK.id="bar",BK.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},BK.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function OK(e,t,n,r){if(r)return;let i=t[e],o=n[e];return"angle"===e&&(i=PV(i),o=PV(o)),{property:e,start:i,end:o}}function IK(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function RK(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function LK(e,t){let n=[],r=!1;return UG(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,o=[];return t.segments.forEach((e=>{let{start:t,end:s}=e;s=IK(t,s,i);const a=i[t],l=i[s];null!==r?(o.push({x:a.x,y:r}),o.push({x:l.x,y:r})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:l.y}))})),o}(e,t),n.length?new wK({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function DK(e){return e&&!1!==e.fill}function FK(e,t,n){let r=e[t].fill;const i=[t];let o;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!VG(r))return r;if(o=e[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function NK(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=WG(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(GG(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return VG(i)&&Math.floor(i)===i?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function zK(e,t,n){const r=[];for(let i=0;i<n.length;i++){const o=n[i],{first:s,last:a,point:l}=jK(o,t,"x");if(!(!l||s&&a))if(s)r.unshift(l);else if(e.push(l),!a)break}e.push(...r)}function jK(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],o=e.segments,s=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const e=o[c],t=s[e.start][n],r=s[e.end][n];if(BV(i,t,r)){a=i===t,l=i===r;break}}return{first:a,last:l,point:r}}class UK{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:i,radius:o}=this;return t=t||{start:0,end:cV},e.arc(r,i,o,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function GK(e){const{chart:t,fill:n,line:r}=e;if(VG(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,i=[],o=r.segments,s=r.points,a=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const e=r[i];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);a.push(LK({x:null,y:t.bottom},r));for(let l=0;l<o.length;l++){const e=o[l];for(let t=e.start;t<=e.end;t++)zK(i,s[t],a)}return new wK({points:i,options:{}})}(e);if("shape"===n)return!0;const i=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,o=r.reverse?t.max:t.min,s=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:GG(e)?e.value:t.getBaseValue(),r}(n,t,o),a=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,o);return new UK({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(s)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,s));return a}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:GG(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(VG(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return i instanceof UK?i:LK(i,r)}function VK(e,t,n){const r=GK(t),{line:i,scale:o,axis:s}=t,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};r&&i.points.length&&(VH(e,n),function(e,t){const{line:n,target:r,above:i,below:o,area:s,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),"x"===l&&o!==i&&(HK(e,r,s.top),WK(e,{line:n,target:r,color:i,scale:a,property:l}),e.restore(),e.save(),HK(e,r,s.bottom));WK(e,{line:n,target:r,color:o,scale:a,property:l}),e.restore()}(e,{line:i,target:r,above:u,below:d,area:n,scale:o,axis:s}),HH(e))}function HK(e,t,n){const{segments:r,points:i}=t;let o=!0,s=!1;e.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],u=i[IK(r,l,i)];o?(e.moveTo(c.x,c.y),o=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),s=!!t.pathSegment(e,a,{move:s}),s?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function WK(e,t){const{line:n,target:r,property:i,color:o,scale:s}=t,a=function(e,t,n){const r=e.segments,i=e.points,o=t.points,s=[];for(const a of r){let{start:e,end:r}=a;r=IK(e,r,i);const l=OK(n,i[e],i[r],a.loop);if(!t.segments){s.push({source:a,target:l,start:i[e],end:i[r]});continue}const c=ZW(t,l);for(const t of c){const e=OK(n,o[t.start],o[t.end],t.loop),r=qW(a,i,e);for(const i of r)s.push({source:i,target:t,start:{[n]:RK(l,e,"start",Math.max)},end:{[n]:RK(l,e,"end",Math.min)}})}}return s}(n,r,i);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:t=o}={}}=l,a=!0!==r;e.save(),e.fillStyle=t,QK(e,s,a&&OK(i,u,d)),e.beginPath();const A=!!n.pathSegment(e,l);let h;if(a){A?e.closePath():JK(e,r,d,i);const t=!!r.pathSegment(e,c,{move:A,reverse:!0});h=A&&t,h||JK(e,r,u,i)}e.closePath(),e.fill(h?"evenodd":"nonzero"),e.restore()}}function QK(e,t,n){const{top:r,bottom:i}=t.chart.chartArea,{property:o,start:s,end:a}=n||{};"x"===o&&(e.beginPath(),e.rect(s,r,a-s,i-r),e.clip())}function JK(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var KK={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let o,s,a,l;for(s=0;s<r;++s)o=e.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof wK&&(l={visible:e.isDatasetVisible(s),index:s,fill:NK(a,s,r),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(s=0;s<r;++s)l=i[s],l&&!1!==l.fill&&(l.fill=FK(i,s,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let s=i.length-1;s>=0;--s){const t=i[s].$filler;t&&(t.line.updateControlPoints(o,t.axis),r&&t.fill&&VK(e.ctx,t,o))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const t=r[i].$filler;DK(t)&&VK(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;DK(r)&&"beforeDatasetDraw"===n.drawTime&&VK(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const XK=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class YK extends LQ{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=JG(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=iW(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=XK(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,i,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,i,s,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+s;let u=e;i.textAlign="left",i.textBaseline="middle";let d=-1,A=-c;return this.legendItems.forEach(((e,h)=>{const f=n+t/2+i.measureText(e.text).width;(0===h||l[l.length-1]+f+2*s>o)&&(u+=c,l[l.length-(h>0?0:1)]=0,A+=c,d++),a[h]={left:0,top:A,row:d,width:f,height:r},l[l.length-1]+=f+s})),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-e;let u=s,d=0,A=0,h=0,f=0;return this.legendItems.forEach(((e,o)=>{const p=n+t/2+i.measureText(e.text).width;o>0&&A+r+2*s>c&&(u+=d+s,l.push({width:d,height:A}),h+=d+s,f++,d=A=0),a[o]={left:h,top:A,col:f,width:p,height:r},d=Math.max(d,p),A+=r+s})),u+=d,l.push({width:d,height:A}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,o=QW(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=UV(n,this.left+r,this.right-this.lineWidths[i]);for(const a of t)i!==a.row&&(i=a.row,s=UV(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+e+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let i=0,s=UV(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const a of t)a.col!==i&&(i=a.col,s=UV(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;VH(e,this),this._draw(),HH(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,s=LH.color,a=QW(e.rtl,this.left,this.width),l=iW(o.font),{color:c,padding:u}=o,d=l.size,A=d/2;let h;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=XK(o,d),m=this.isHorizontal(),v=this._computeTitleHeight();h=m?{x:UV(i,this.left+u,this.right-n[0]),y:this.top+u+v,line:0}:{x:this.left+u,y:UV(i,this.top+v+u,this.bottom-t[0].height),line:0},JW(this.ctx,e.textDirection);const b=g+u;this.legendItems.forEach(((y,x)=>{r.strokeStyle=y.fontColor||c,r.fillStyle=y.fontColor||c;const w=r.measureText(y.text).width,_=a.textAlign(y.textAlign||(y.textAlign=o.textAlign)),S=f+A+w;let C=h.x,E=h.y;a.setWidth(this.width),m?x>0&&C+S+u>this.right&&(E=h.y+=b,h.line++,C=h.x=UV(i,this.left+u,this.right-n[h.line])):x>0&&E+b>this.bottom&&(C=h.x=C+t[h.line].width+u,h.line++,E=h.y=UV(i,this.top+v+u,this.bottom-t[h.line].height));!function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=WG(n.lineWidth,1);if(r.fillStyle=WG(n.fillStyle,s),r.lineCap=WG(n.lineCap,"butt"),r.lineDashOffset=WG(n.lineDashOffset,0),r.lineJoin=WG(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=WG(n.strokeStyle,s),r.setLineDash(WG(n.lineDash,[])),o.usePointStyle){const s={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(e,f/2);UH(r,s,l,t+A,o.pointStyleWidth&&f)}else{const o=t+Math.max((d-p)/2,0),s=a.leftForLtr(e,f),l=nW(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?XH(r,{x:s,y:o,w:f,h:p,radius:l}):r.rect(s,o,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(C),E,y),C=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,C+f+A,m?C+S:this.right,e.rtl),function(e,t,n){JH(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(C),E,y),m?h.x+=S+u:h.y+=b})),KW(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=iW(t.font),r=rW(t.padding);if(!t.display)return;const i=QW(e.rtl,this.left,this.width),o=this.ctx,s=t.position,a=n.size/2,l=r.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=UV(e.align,u,this.right-d);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+UV(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const A=UV(s,u,u+d);o.textAlign=i.textAlign(jV(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,JH(o,t.text,A,c,n)}_computeTitleHeight(){const e=this.options.title,t=iW(e.font),n=rW(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(BV(e,this.left,this.right)&&BV(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],BV(e,r.left,r.left+r.width)&&BV(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&JG(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&JG(t.onHover,[e,n,this],this)}else n&&JG(t.onClick,[e,n,this],this)}}var qK={id:"legend",_element:YK,start(e,t,n){const r=e.legend=new YK({ctx:e.ctx,options:n,chart:e});vJ.configure(e,r,n),vJ.addBox(e,r)},stop(e){vJ.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;vJ.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const s=e.controller.getStyle(n?0:void 0),a=rW(s.borderWidth);return{text:t[e.index].label,fillStyle:s.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:s.borderCapStyle,lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:s.borderColor,pointStyle:r||s.pointStyle,rotation:s.rotation,textAlign:i||s.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ZK extends LQ{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=UG(n.text)?n.text.length:1;this._padding=rW(n.padding);const i=r*iW(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:o}=this,s=o.align;let a,l,c,u=0;return this.isHorizontal()?(l=UV(s,n,i),c=t+e,a=i-n):("left"===o.position?(l=n+e,c=UV(s,r,t),u=-.5*lV):(l=i-e,c=UV(s,t,r),u=.5*lV),a=r-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=iW(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);JH(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:a,textAlign:jV(t.align),textBaseline:"middle",translation:[i,o]})}}var $K={id:"title",_element:ZK,start(e,t,n){!function(e,t){const n=new ZK({ctx:e.ctx,options:t,chart:e});vJ.configure(e,n,t),vJ.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;vJ.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;vJ.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const eX={average(e){if(!e.length)return!1;let t,n,r=0,i=0,o=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r+=e.x,i+=e.y,++o}}return{x:r/o,y:i/o}},nearest(e,t){if(!e.length)return!1;let n,r,i,o=t.x,s=t.y,a=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=EV(t,r.getCenterPoint());e<a&&(a=e,i=r)}}if(i){const e=i.tooltipPosition();o=e.x,s=e.y}return{x:o,y:s}}};function tX(e,t){return t&&(UG(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function nX(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function rX(e,t){const{element:n,datasetIndex:r,index:i}=t,o=e.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:e,label:s,parsed:o.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function iX(e,t){const n=e.chart.ctx,{body:r,footer:i,title:o}=e,{boxWidth:s,boxHeight:a}=t,l=iW(t.bodyFont),c=iW(t.titleFont),u=iW(t.footerFont),d=o.length,A=i.length,h=r.length,f=rW(t.padding);let p=f.height,g=0,m=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(m+=e.beforeBody.length+e.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),m){p+=h*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(m-h)*l.lineHeight+(m-1)*t.bodySpacing}A&&(p+=t.footerMarginTop+A*u.lineHeight+(A-1)*t.footerSpacing);let v=0;const b=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,KG(e.title,b),n.font=l.string,KG(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?s+2+t.boxPadding:0,KG(r,(e=>{KG(e.before,b),KG(e.lines,b),KG(e.after,b)})),v=0,n.font=u.string,KG(e.footer,b),n.restore(),g+=f.width,{width:g,height:p}}function oX(e,t,n,r){const{x:i,width:o}=n,{width:s,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=s-o/2&&(c="right"),function(e,t,n,r){const{x:i,width:o}=r,s=n.caretSize+n.caretPadding;return"left"===e&&i+o+s>t.width||"right"===e&&i-o-s<0||void 0}(c,e,t,n)&&(c="center"),c}function sX(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||oX(e,t,n,r),yAlign:r}}function aX(e,t,n,r){const{caretSize:i,caretPadding:o,cornerRadius:s}=e,{xAlign:a,yAlign:l}=n,c=i+o,{topLeft:u,topRight:d,bottomLeft:A,bottomRight:h}=nW(s);let f=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,a);const p=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===a?f+=c:"right"===a&&(f-=c):"left"===a?f-=Math.max(u,A)+i:"right"===a&&(f+=Math.max(d,h)+i),{x:kV(f,0,r.width-t.width),y:kV(p,0,r.height-t.height)}}function lX(e,t,n){const r=rW(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function cX(e){return tX([],nX(e))}function uX(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class dX extends LQ{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new aQ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,sW(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=n.beforeTitle.apply(this,[e]),i=n.title.apply(this,[e]),o=n.afterTitle.apply(this,[e]);let s=[];return s=tX(s,nX(r)),s=tX(s,nX(i)),s=tX(s,nX(o)),s}getBeforeBody(e,t){return cX(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:n}=t,r=[];return KG(e,(e=>{const t={before:[],lines:[],after:[]},i=uX(n,e);tX(t.before,nX(i.beforeLabel.call(this,e))),tX(t.lines,i.label.call(this,e)),tX(t.after,nX(i.afterLabel.call(this,e))),r.push(t)})),r}getAfterBody(e,t){return cX(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:n}=t,r=n.beforeFooter.apply(this,[e]),i=n.footer.apply(this,[e]),o=n.afterFooter.apply(this,[e]);let s=[];return s=tX(s,nX(r)),s=tX(s,nX(i)),s=tX(s,nX(o)),s}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],o=[];let s,a,l=[];for(s=0,a=t.length;s<a;++s)l.push(rX(this.chart,t[s]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),KG(l,(t=>{const n=uX(e.callbacks,t);r.push(n.labelColor.call(this,t)),i.push(n.labelPointStyle.call(this,t)),o.push(n.labelTextColor.call(this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const e=eX[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const t=this._size=iX(this,n),s=Object.assign({},e,t),a=sX(this.chart,n,s),l=aX(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:s}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=nW(s),{x:d,y:A}=e,{width:h,height:f}=t;let p,g,m,v,b,y;return"center"===i?(b=A+f/2,"left"===r?(p=d,g=p-o,v=b+o,y=b-o):(p=d+h,g=p+o,v=b-o,y=b+o),m=p):(g="left"===r?d+Math.max(a,c)+o:"right"===r?d+h-Math.max(l,u)-o:this.caretX,"top"===i?(v=A,b=v-o,p=g-o,m=g+o):(v=A+f,b=v+o,p=g+o,m=g-o),y=v),{x1:p,x2:g,x3:m,y1:v,y2:b,y3:y}}drawTitle(e,t,n){const r=this.title,i=r.length;let o,s,a;if(i){const l=QW(n.rtl,this.x,this.width);for(e.x=lX(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",o=iW(n.titleFont),s=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,a=0;a<i;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s,a+1===i&&(e.y+=n.titleMarginBottom-s)}}_drawColorBox(e,t,n,r,i){const o=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:l,boxPadding:c}=i,u=iW(i.bodyFont),d=lX(this,"left",i),A=r.x(d),h=a<u.lineHeight?(u.lineHeight-a)/2:0,f=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=r.leftForLtr(A,l)+l/2,c=f+a/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,jH(e,t,n,c),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,jH(e,t,n,c)}else{e.lineWidth=GG(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=r.leftForLtr(A,l-c),n=r.leftForLtr(r.xPlus(A,1),l-c-2),s=nW(o.borderRadius);Object.values(s).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,XH(e,{x:t,y:f,w:l,h:a,radius:s}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),XH(e,{x:n,y:f+1,w:l-2,h:a-2,radius:s}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=o.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=iW(n.bodyFont);let d=u.lineHeight,A=0;const h=QW(n.rtl,this.x,this.width),f=function(n){t.fillText(n,h.x(e.x+A),e.y+d/2),e.y+=d+i},p=h.textAlign(o);let g,m,v,b,y,x,w;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=lX(this,p,n),t.fillStyle=n.bodyColor,KG(this.beforeBody,f),A=s&&"right"!==p?"center"===o?l/2+c:l+2+c:0,b=0,x=r.length;b<x;++b){for(g=r[b],m=this.labelTextColors[b],t.fillStyle=m,KG(g.before,f),v=g.lines,s&&v.length&&(this._drawColorBox(t,e,b,h,n),d=Math.max(u.lineHeight,a)),y=0,w=v.length;y<w;++y)f(v[y]),d=u.lineHeight;KG(g.after,f)}A=0,d=u.lineHeight,KG(this.afterBody,f),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let o,s;if(i){const a=QW(n.rtl,this.x,this.width);for(e.x=lX(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",o=iW(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,s=0;s<i;++s)t.fillText(r[s],a.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:o}=this,{x:s,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:A,bottomRight:h}=nW(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(s+u,a),"top"===o&&this.drawCaret(e,t,n,r),t.lineTo(s+l-d,a),t.quadraticCurveTo(s+l,a,s+l,a+d),"center"===o&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(s+l,a+c-h),t.quadraticCurveTo(s+l,a+c,s+l-h,a+c),"bottom"===o&&this.drawCaret(e,t,n,r),t.lineTo(s+A,a+c),t.quadraticCurveTo(s,a+c,s,a+c-A),"center"===o&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(s,a+u),t.quadraticCurveTo(s,a,s+u,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=eX[e.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=iX(this,e),s=Object.assign({},n,this._size),a=sX(t,e,s),l=aX(e,s,a,t);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=rW(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),JW(e,t.textDirection),i.y+=o.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),KW(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!XG(n,r),o=this._positionChanged(r,t);(i||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,t,n),s=this._positionChanged(o,e),a=t||!XG(o,i)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t;const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,o=eX[i.position].call(this,e,t);return!1!==o&&(n!==o.x||r!==o.y)}}dX.positioners=eX;var AX={id:"tooltip",_element:dX,positioners:eX,afterInit(e,t,n){n&&(e.tooltip=new dX({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:NG,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:NG,beforeBody:NG,beforeLabel:NG,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return jG(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:NG,afterBody:NG,beforeFooter:NG,footer:NG,afterFooter:NG}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function hX(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}class fX extends QQ{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(jG(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:kV(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:hX(n,e,WG(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function pX(e,t){const n=[],{bounds:r,step:i,min:o,max:s,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,A=i||1,h=c-1,{min:f,max:p}=t,g=!jG(o),m=!jG(s),v=!jG(l),b=(p-f)/(u+1);let y,x,w,_,S=vV((p-f)/h/A)*A;if(S<1e-14&&!g&&!m)return[{value:f},{value:p}];_=Math.ceil(p/S)-Math.floor(f/S),_>h&&(S=vV(_*S/h/A)*A),jG(a)||(y=Math.pow(10,a),S=Math.ceil(S*y)/y),"ticks"===r?(x=Math.floor(f/S)*S,w=Math.ceil(p/S)*S):(x=f,w=p),g&&m&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((s-o)/i,S/1e3)?(_=Math.round(Math.min((s-o)/S,c)),S=(s-o)/_,x=o,w=s):v?(x=g?o:x,w=m?s:w,_=l-1,S=(w-x)/_):(_=(w-x)/S,_=yV(_,Math.round(_),S/1e3)?Math.round(_):Math.ceil(_));const C=Math.max(SV(S),SV(x));y=Math.pow(10,jG(a)?C:a),x=Math.round(x*y)/y,w=Math.round(w*y)/y;let E=0;for(g&&(d&&x!==o?(n.push({value:o}),x<o&&E++,yV(Math.round((x+E*S)*y)/y,o,gX(o,b,e))&&E++):x<o&&E++);E<_;++E)n.push({value:Math.round((x+E*S)*y)/y});return m&&d&&w!==s?n.length&&yV(n[n.length-1].value,s,gX(s,b,e))?n[n.length-1].value=s:n.push({value:s}):m&&w!==s||n.push({value:w}),n}function gX(e,t,n){let{horizontal:r,minRotation:i}=n;const o=wV(i),s=(r?Math.sin(o):Math.cos(o))||.001,a=.75*t*(""+e).length;return Math.min(t/s,a)}fX.id="category",fX.defaults={ticks:{callback:fX.prototype.getLabelForValue}};class mX extends QQ{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return jG(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=e=>r=t?r:e,s=e=>i=n?i:e;if(e){const e=mV(r),t=mV(i);e<0&&t<0?s(0):e>0&&t>0&&o(0)}if(r===i){let t=1;(i>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*i)),s(i+t),e||o(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=pX({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&xV(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return WW(e,this.chart.options.locale,this.options.ticks.format)}}class vX extends mX{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=VG(e)?e:0,this.max=VG(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=wV(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function bX(e){return 1===e/Math.pow(10,Math.floor(gV(e)))}vX.id="linear",vX.defaults={ticks:{callback:FQ.formatters.numeric}};class yX extends QQ{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=mX.prototype.parse.apply(this,[e,t]);if(0!==n)return VG(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=VG(e)?Math.max(0,e):null,this.max=VG(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,o=e=>r=t?r:e,s=(e,t)=>Math.pow(10,Math.floor(gV(e))+t);n===r&&(n<=0?(i(1),o(10)):(i(s(n,-1)),o(s(r,1)))),n<=0&&i(s(r,-1)),r<=0&&o(s(n,1)),this._zero&&this.min!==this._suggestedMin&&n===s(this.min,0)&&i(s(n,-1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=function(e,t){const n=Math.floor(gV(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),i=[];let o=HG(e.min,Math.pow(10,Math.floor(gV(t.min)))),s=Math.floor(gV(o)),a=Math.floor(o/Math.pow(10,s)),l=s<0?Math.pow(10,Math.abs(s)):1;do{i.push({value:o,major:bX(o)}),++a,10===a&&(a=1,++s,l=s>=0?1:l),o=Math.round(a*Math.pow(10,s)*l)/l}while(s<n||s===n&&a<r);const c=HG(e.max,o);return i.push({value:c,major:bX(o)}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&xV(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":WW(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=gV(e),this._valueRange=gV(this.max)-gV(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(gV(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function xX(e){const t=e.ticks;if(t.display&&e.display){const e=rW(t.backdropPadding);return WG(t.font&&t.font.size,LH.font.size)+e.height}return 0}function wX(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function _X(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],o=e._pointLabels.length,s=e.options.pointLabels,a=s.centerPointLabels?lV/o:0;for(let d=0;d<o;d++){const o=s.setContext(e.getPointLabelContext(d));i[d]=o.padding;const A=e.getPointPosition(d,e.drawingArea+i[d],a),h=iW(o.font),f=(l=e.ctx,c=h,u=UG(u=e._pointLabels[d])?u:[u],{w:FH(l,c.string,u),h:u.length*c.lineHeight});r[d]=f;const p=PV(e.getIndexAngle(d)+a),g=Math.round(_V(p));SX(n,t,p,wX(g,A.x,f.w,0,180),wX(g,A.y,f.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,o=e.options,s=xX(o)/2,a=e.drawingArea,l=o.pointLabels.centerPointLabels?lV/i:0;for(let c=0;c<i;c++){const i=e.getPointPosition(c,a+s+n[c],l),o=Math.round(_V(PV(i.angle+hV))),u=t[c],d=MX(i.y,u.h,o),A=CX(o),h=EX(i.x,u.w,A);r.push({x:i.x,y:d,textAlign:A,left:h,top:d,right:h+u.w,bottom:d+u.h})}return r}(e,r,i)}function SX(e,t,n,r,i){const o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,l=0;r.start<t.l?(a=(t.l-r.start)/o,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/s,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function CX(e){return 0===e||180===e?"center":e<180?"left":"right"}function EX(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function MX(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function PX(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,cV);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=e.getPointPosition(o,t),i.lineTo(n.x,n.y)}}yX.id="logarithmic",yX.defaults={ticks:{callback:FQ.formatters.logarithmic,major:{enabled:!0}}};class TX extends mX{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=rW(xX(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=VG(e)&&!isNaN(e)?e:0,this.max=VG(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xX(this.options))}generateTickLabels(e){mX.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=JG(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?_X(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return PV(e*(cV/(this._pointLabels.length||1))+wV(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(jG(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(jG(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return sW(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-hV+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),PX(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r}=t,i=this._pointLabels.length;let o,s,a;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=r.setContext(e.getPointLabelContext(i)),o=iW(t.font),{x:s,y:a,textAlign:l,left:c,top:u,right:d,bottom:A}=e._pointLabelItems[i],{backdropColor:h}=t;if(!jG(h)){const e=nW(t.borderRadius),r=rW(t.backdropPadding);n.fillStyle=h;const i=c-r.left,o=u-r.top,s=d-c+r.width,a=A-u+r.height;Object.values(e).some((e=>0!==e))?(n.beginPath(),XH(n,{x:i,y:o,w:s,h:a,radius:e}),n.fill()):n.fillRect(i,o,s,a)}JH(n,e._pointLabels[i],s,a+o.lineHeight/2,o,{color:t.color,textAlign:l,textBaseline:"middle"})}}(this,i),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t){s=this.getDistanceFromCenterForValue(e.value);!function(e,t,n,r){const i=e.ctx,o=t.circular,{color:s,lineWidth:a}=t;!o&&!r||!s||!a||n<0||(i.save(),i.strokeStyle=s,i.lineWidth=a,i.setLineDash(t.borderDash),i.lineDashOffset=t.borderDashOffset,i.beginPath(),PX(e,n,o,r),i.closePath(),i.stroke(),i.restore())}(this,r.setContext(this.getContext(t-1)),s,i)}})),n.display){for(e.save(),o=i-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:l}=r;l&&i&&(e.lineWidth=l,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,s=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),a=this.getPointPosition(o,s),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(a.x,a.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,s)=>{if(0===s&&!t.reverse)return;const a=n.setContext(this.getContext(s)),l=iW(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){e.font=l.string,o=e.measureText(r.label).width,e.fillStyle=a.backdropColor;const t=rW(a.backdropPadding);e.fillRect(-o/2-t.left,-i-l.size/2-t.top,o+t.width,l.size+t.height)}JH(e,r.label,0,-i,l,{color:a.color})})),e.restore()}drawTitle(){}}TX.id="radialLinear",TX.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:FQ.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}},TX.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},TX.descriptors={angleLines:{_fallback:"grid"}};const kX={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},BX=Object.keys(kX);function OX(e,t){return e-t}function IX(e,t){if(jG(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:o}=e._parseOpts;let s=t;return"function"===typeof r&&(s=r(s)),VG(s)||(s="string"===typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&(s="week"!==i||!bV(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function RX(e,t,n,r){const i=BX.length;for(let o=BX.indexOf(e);o<i-1;++o){const e=kX[BX[o]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return BX[o]}return BX[i-1]}function LX(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=OV(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function DX(e,t,n){const r=[],i={},o=t.length;let s,a;for(s=0;s<o;++s)a=t[s],i[a]=s,r.push({value:a,major:!1});return 0!==o&&n?function(e,t,n,r){const i=e._adapter,o=+i.startOf(t[0].value,r),s=t[t.length-1].value;let a,l;for(a=o;a<=s;a=+i.add(a,1,r))l=n[a],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class FX extends QQ{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const n=e.time||(e.time={}),r=this._adapter=new ZQ._date(e.adapters.date);r.init(t),eV(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:IX(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();function a(e){o||isNaN(e.min)||(r=Math.min(r,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}o&&s||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),r=VG(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=VG(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?RX(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let o=BX.length-1;o>=BX.indexOf(n);o--){const n=BX[o];if(kX[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return BX[n?BX.indexOf(n):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=BX.indexOf(e)+1,n=BX.length;t<n;++t)if(kX[BX[t]].common)return BX[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),DX(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(e){let t,n,r=0,i=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),i=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=kV(r,0,o),i=kV(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||RX(i.minUnit,t,n,this._getLabelCapacity(t)),s=WG(i.stepSize,1),a="week"===o&&i.isoWeekday,l=bV(a)||!0===a,c={};let u,d,A=t;if(l&&(A=+e.startOf(A,"isoWeek",a)),A=+e.startOf(A,l?"day":o),e.diff(n,t,o)>1e5*s)throw new Error(t+" and "+n+" are too far apart with stepSize of "+s+" "+o);const h="data"===r.ticks.source&&this.getDataTimestamps();for(u=A,d=0;u<n;u=+e.add(u,s,o),d++)LX(c,u,h);return u!==n&&"ticks"!==r.bounds&&1!==d||LX(c,u,h),Object.keys(c).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,t,n,r){const i=this.options,o=i.time.displayFormats,s=this._unit,a=this._majorUnit,l=s&&o[s],c=a&&o[a],u=n[t],d=a&&c&&u&&u.major,A=this._adapter.format(e,r||(d?c:l)),h=i.ticks.callback;return h?JG(h,[A,t,n],this):A}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=wV(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:n*i+s*o,h:n*o+s*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,DX(this,[e],this._majorUnit),r),o=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(IX(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return FV(e.sort(OX))}}function NX(e,t,n){let r,i,o,s,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=IV(e,"pos",t)),({pos:r,time:o}=e[a]),({pos:i,time:s}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=IV(e,"time",t)),({time:r,pos:o}=e[a]),({time:i,pos:s}=e[l]));const c=i-r;return c?o+(s-o)*(t-r)/c:o}FX.id="time",FX.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class zX extends FX{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=NX(t,this.min),this._tableRange=NX(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let o,s,a,l,c;for(o=0,s=e.length;o<s;++o)l=e[o],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,s=r.length;o<s;++o)c=r[o+1],a=r[o-1],l=r[o],Math.round((c+a)/2)!==l&&i.push({time:l,pos:o/(s-1)});return i}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(NX(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return NX(this._table,n*this._tableRange+this._minPos,!0)}}zX.id="timeseries",zX.defaults=FX.defaults;const jX="label";function UX(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function GX(e,t){e.labels=t}function VX(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jX;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):{...t}}))}function HX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jX;const n={labels:[],datasets:[]};return GX(n,e.labels),VX(n,e.datasets,t),n}function WX(e,t){let{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:o,type:s,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=e;const f=(0,A.useRef)(null),p=(0,A.useRef)(),g=()=>{f.current&&(p.current=new oK(f.current,{type:s,data:HX(a,o),options:l&&{...l},plugins:c}),UX(t,p.current))},m=()=>{UX(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,A.useEffect)((()=>{var e,t;!i&&p.current&&l&&(e=p.current,t=l,Object.assign(e.options,t))}),[i,l]),(0,A.useEffect)((()=>{!i&&p.current&&GX(p.current.config.data,a.labels)}),[i,a.labels]),(0,A.useEffect)((()=>{!i&&p.current&&a.datasets&&VX(p.current.config.data,a.datasets,o)}),[i,a.datasets]),(0,A.useEffect)((()=>{p.current&&(i?(m(),setTimeout(g)):p.current.update(d))}),[i,l,a.labels,a.datasets,d]),(0,A.useEffect)((()=>{p.current&&(m(),setTimeout(g))}),[s]),(0,A.useEffect)((()=>(g(),()=>m())),[]),A.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:r},h),u)}const QX=(0,A.forwardRef)(WX);function JX(e,t){return oK.register(t),(0,A.forwardRef)(((t,n)=>A.createElement(QX,Object.assign({},t,{ref:n,type:e}))))}const KX=JX("bar",PQ),XX=JX("radar",RQ),YX=JX("doughnut",kQ),qX={plugins:{tooltip:{callbacks:{label:e=>{const t="".concat((100*e.parsed.r).toFixed(2)||0,"%");if(!e.dataset.descriptions||void 0===e.dataset.descriptions[e.dataIndex])return["".concat(t)];const n=e.dataset.descriptions[e.dataIndex];if(n.length>30){const e=n.lastIndexOf(" ",30);return["".concat(t),"".concat(n.slice(0,e)),"".concat(n.slice(e+1))]}return["".concat(t),"".concat(n)]}}},datalabels:{display:!1}},scales:{r:{ticks:{display:!1,backdropColor:"rgba(0, 0, 0, 0)"},angleLines:{color:"#696969"},suggestedMin:0,suggestedMax:1,grid:{color:"#959595",circular:!0},pointLabels:{color:"#bcbcbc",font:function(e){var t=Math.round((e.chart.height+e.chart.width)/2),n=Math.round(t/80);return{size:n>8?n:8}}}}}},ZX={scales:{r:{angleLines:{color:"#363636"},grid:{color:"#363636",circular:!0},pointLabels:{color:"#363636"},ticks:{color:"#363636",backdropColor:"rgba(0, 0, 0, 0)"}}}},$X={labels:[null,null,null],datasets:[{label:"Waiting for data...",data:[null,null,null],backgroundColor:"#00000000",borderColor:"#00000000",borderWidth:1}]};function eY(){oK.register(TX,SK,wK,KK,AX,qK);const e=te((e=>e.cityIOdataState.cityIOdata)),[t,n]=(0,A.useState)();return(0,A.useEffect)((()=>{if(e.indicators){const t=(t=>{let n={labels:[],datasets:[{label:"Project Values",data:[],backgroundColor:"#42a4f573",borderColor:"#42a5f5",borderWidth:1.5,descriptions:[]},{label:"reference",data:[],backgroundColor:"#55555581",borderColor:"#b4b4b4",borderWidth:1,descriptions:[]}]};for(let r=0;r<t.length;r++)"radar"===t[r].viz_type&&(n.labels.push(t[r].name),n.datasets[0].data.push(t[r].value),n.datasets[0].label=null===e||void 0===e?void 0:e.tableName,t[r].description?n.datasets[0].descriptions.push(t[r].description):n.datasets[0].descriptions.push("No description available"),n.datasets[1].data.push(t[r].ref_value));return n})(e.indicators);n(t)}else n($X)}),[e]),(0,m.jsx)(m.Fragment,{children:t&&(0,m.jsx)(XX,{data:t,options:e.indicators?qX:ZX})})}oK.register(fX,vX,BK,$K,AX,qK);const tY={plugins:{tooltip:{callbacks:{label:function(e){const t="".concat((100*e.parsed.y).toFixed(2)||0,"%");if(!e.dataset.descriptions||void 0===e.dataset.descriptions[e.dataIndex])return["".concat(t)];const n=e.dataset.descriptions[e.dataIndex];if(n.length>30){const e=n.lastIndexOf(" ",30);return["".concat(t),"".concat(n.slice(0,e)),"".concat(n.slice(e+1))]}return["".concat(t),"".concat(n)]}}},legend:{display:!1},datalabels:{display:!1}},maintainAspectRatio:!0,aspectRatio:1,scales:{y:{suggestedMin:0,suggestedMax:1,grid:{color:"#414141"},pointLabels:{color:"#414141"},ticks:{color:"#414141",format:{style:"percent"}}}},responsive:!0},nY={labels:["no data..."],datasets:[{label:"No indicator data...",data:[0],backgroundColor:"#696969"}]};function rY(){const e=te((e=>e.cityIOdataState.cityIOdata)),[t,n]=(0,A.useState)();(0,A.useEffect)((()=>{if(e.indicators){const t=r(e.indicators);n(t)}else n(nY)}),[e]);const r=e=>{let t={labels:[],datasets:[{descriptions:[],label:"Chart Data",data:[],backgroundColor:[],borderColor:[],borderWidth:1}]};for(let r=0;r<e.length;r++)if("bar"===e[r].viz_type){t.labels.push(e[r].name),t.datasets[0].data.push(e[r].value);var n=Hf(e[r].value,0,1);t.datasets[0].backgroundColor.push("rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", 0.5)")),t.datasets[0].borderColor.push("rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", 1)")),e[r].description?t.datasets[0].descriptions.push(e[r].description):t.datasets[0].descriptions.push("No description available")}return t};return(0,m.jsx)(m.Fragment,{children:t&&(0,m.jsx)(KX,{options:tY,data:t||nY})})}var iY=function(){if("undefined"!==typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),oY=function(e){var t,n=[];for(e=[].concat(e);e.length;)"string"===typeof(t=e.pop())?n.unshift.apply(n,t.split("\n")):Array.isArray(t)?e.push.apply(e,t):jG(e)||n.unshift(""+t);return n},sY=function(e,t,n){var r,i=[].concat(t),o=i.length,s=e.font,a=0;for(e.font=n.string,r=0;r<o;++r)a=Math.max(e.measureText(i[r]).width,a);return e.font=s,{height:o*n.lineHeight,width:a}},aY=function(e,t,n){return Math.max(e,Math.min(t,n))},lY=function(e,t){var n,r,i,o,s=e.slice(),a=[];for(n=0,i=t.length;n<i;++n)o=t[n],-1===(r=s.indexOf(o))?a.push([o,1]):s.splice(r,1);for(n=0,i=s.length;n<i;++n)a.push([s[n],-1]);return a},cY=function(e){return Math.round(e*iY)/iY};function uY(e,t){var n=t.x,r=t.y;if(null===n)return{x:0,y:-1};if(null===r)return{x:1,y:0};var i=e.x-n,o=e.y-r,s=Math.sqrt(i*i+o*o);return{x:s?i/s:0,y:s?o/s:-1}}var dY=0,AY=1,hY=2,fY=4,pY=8;function gY(e,t,n){var r=dY;return e<n.left?r|=AY:e>n.right&&(r|=hY),t<n.top?r|=pY:t>n.bottom&&(r|=fY),r}function mY(e,t){var n,r,i=t.anchor,o=e;return t.clamp&&(o=function(e,t){for(var n,r,i,o=e.x0,s=e.y0,a=e.x1,l=e.y1,c=gY(o,s,t),u=gY(a,l,t);c|u&&!(c&u);)(n=c||u)&pY?(r=o+(a-o)*(t.top-s)/(l-s),i=t.top):n&fY?(r=o+(a-o)*(t.bottom-s)/(l-s),i=t.bottom):n&hY?(i=s+(l-s)*(t.right-o)/(a-o),r=t.right):n&AY&&(i=s+(l-s)*(t.left-o)/(a-o),r=t.left),n===c?c=gY(o=r,s=i,t):u=gY(a=r,l=i,t);return{x0:o,x1:a,y0:s,y1:l}}(o,t.area)),"start"===i?(n=o.x0,r=o.y0):"end"===i?(n=o.x1,r=o.y1):(n=(o.x0+o.x1)/2,r=(o.y0+o.y1)/2),function(e,t,n,r,i){switch(i){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:i*=Math.PI/180,n=Math.cos(i),r=Math.sin(i)}return{x:e,y:t,vx:n,vy:r}}(n,r,e.vx,e.vy,t.align)}var vY=function(e,t){var n=(e.startAngle+e.endAngle)/2,r=Math.cos(n),i=Math.sin(n),o=e.innerRadius,s=e.outerRadius;return mY({x0:e.x+r*o,y0:e.y+i*o,x1:e.x+r*s,y1:e.y+i*s,vx:r,vy:i},t)},bY=function(e,t){var n=uY(e,t.origin),r=n.x*e.options.radius,i=n.y*e.options.radius;return mY({x0:e.x-r,y0:e.y-i,x1:e.x+r,y1:e.y+i,vx:n.x,vy:n.y},t)},yY=function(e,t){var n=uY(e,t.origin),r=e.x,i=e.y,o=0,s=0;return e.horizontal?(r=Math.min(e.x,e.base),o=Math.abs(e.base-e.x)):(i=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),mY({x0:r,y0:i+s,x1:r+o,y1:i,vx:n.x,vy:n.y},t)},xY=function(e,t){var n=uY(e,t.origin);return mY({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:n.x,vy:n.y},t)},wY=cY;function _Y(e,t){var n=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!n)return null;if(void 0!==n.xCenter&&void 0!==n.yCenter)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function SY(e,t,n){var r=n.backgroundColor,i=n.borderColor,o=n.borderWidth;(r||i&&o)&&(e.beginPath(),function(e,t,n,r,i,o){var s=Math.PI/2;if(o){var a=Math.min(o,i/2,r/2),l=t+a,c=n+a,u=t+r-a,d=n+i-a;e.moveTo(t,c),l<u&&c<d?(e.arc(l,c,a,-Math.PI,-s),e.arc(u,c,a,-s,0),e.arc(u,d,a,0,s),e.arc(l,d,a,s,Math.PI)):l<u?(e.moveTo(l,n),e.arc(u,c,a,-s,s),e.arc(l,c,a,s,Math.PI+s)):c<d?(e.arc(l,c,a,-Math.PI,0),e.arc(l,d,a,0,Math.PI)):e.arc(l,c,a,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,i)}(e,wY(t.x)+o/2,wY(t.y)+o/2,wY(t.w)-o,wY(t.h)-o,n.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),i&&o&&(e.strokeStyle=i,e.lineWidth=o,e.lineJoin="miter",e.stroke()))}function CY(e,t,n){var r=e.shadowBlur,i=n.stroked,o=wY(n.x),s=wY(n.y),a=wY(n.w);i&&e.strokeText(t,o,s,a),n.filled&&(r&&i&&(e.shadowBlur=0),e.fillText(t,o,s,a),r&&i&&(e.shadowBlur=r))}var EY=function(e,t,n,r){var i=this;i._config=e,i._index=r,i._model=null,i._rects=null,i._ctx=t,i._el=n};$G(EY.prototype,{_modelize:function(e,t,n,r){var i,o=this,s=o._index,a=iW(oW([n.font,{}],r,s)),l=oW([n.color,LH.color],r,s);return{align:oW([n.align,"center"],r,s),anchor:oW([n.anchor,"center"],r,s),area:r.chart.chartArea,backgroundColor:oW([n.backgroundColor,null],r,s),borderColor:oW([n.borderColor,null],r,s),borderRadius:oW([n.borderRadius,0],r,s),borderWidth:oW([n.borderWidth,0],r,s),clamp:oW([n.clamp,!1],r,s),clip:oW([n.clip,!1],r,s),color:l,display:e,font:a,lines:t,offset:oW([n.offset,4],r,s),opacity:oW([n.opacity,1],r,s),origin:_Y(o._el,r),padding:rW(oW([n.padding,4],r,s)),positioner:(i=o._el,i instanceof hK?vY:i instanceof SK?bY:i instanceof BK?yY:xY),rotation:oW([n.rotation,0],r,s)*(Math.PI/180),size:sY(o._ctx,t,a),textAlign:oW([n.textAlign,"start"],r,s),textShadowBlur:oW([n.textShadowBlur,0],r,s),textShadowColor:oW([n.textShadowColor,l],r,s),textStrokeColor:oW([n.textStrokeColor,l],r,s),textStrokeWidth:oW([n.textStrokeWidth,0],r,s)}},update:function(e){var t,n,r,i=this,o=null,s=null,a=i._index,l=i._config,c=oW([l.display,!0],e,a);c&&(t=e.dataset.data[a],(r=jG(n=WG(JG(l.formatter,[t,e]),t))?[]:oY(n)).length&&(s=function(e){var t=e.borderWidth||0,n=e.padding,r=e.size.height,i=e.size.width,o=-i/2,s=-r/2;return{frame:{x:o-n.left-t,y:s-n.top-t,w:i+n.width+2*t,h:r+n.height+2*t},text:{x:o,y:s,w:i,h:r}}}(o=i._modelize(c,r,l,e)))),i._model=o,i._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n,r=e.ctx,i=this._model,o=this._rects;this.visible()&&(r.save(),i.clip&&(n=i.area,r.beginPath(),r.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),r.clip()),r.globalAlpha=aY(0,i.opacity,1),r.translate(wY(t.x),wY(t.y)),r.rotate(i.rotation),SY(r,o.frame,i),function(e,t,n,r){var i,o=r.textAlign,s=r.color,a=!!s,l=r.font,c=t.length,u=r.textStrokeColor,d=r.textStrokeWidth,A=u&&d;if(c&&(a||A))for(n=function(e,t,n){var r=n.lineHeight,i=e.w,o=e.x;return"center"===t?o+=i/2:"end"!==t&&"right"!==t||(o+=i),{h:r,w:i,x:o,y:e.y+r/2}}(n,o,l),e.font=l.string,e.textAlign=o,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,a&&(e.fillStyle=s),A&&(e.lineJoin="round",e.lineWidth=d,e.strokeStyle=u),i=0,c=t.length;i<c;++i)CY(e,t[i],{stroked:A,filled:a,w:n.w,x:n.x,y:n.y+n.h*i})}(r,i.lines,o.text,i),r.restore())}});var MY=Number.MIN_SAFE_INTEGER||-9007199254740991,PY=Number.MAX_SAFE_INTEGER||9007199254740991;function TY(e,t,n){var r=Math.cos(n),i=Math.sin(n),o=t.x,s=t.y;return{x:o+r*(e.x-o)-i*(e.y-s),y:s+i*(e.x-o)+r*(e.y-s)}}function kY(e,t){var n,r,i,o,s,a=PY,l=MY,c=t.origin;for(n=0;n<e.length;++n)i=(r=e[n]).x-c.x,o=r.y-c.y,s=t.vx*i+t.vy*o,a=Math.min(a,s),l=Math.max(l,s);return{min:a,max:l}}function BY(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);return{vx:(t.x-e.x)/i,vy:(t.y-e.y)/i,origin:e,ln:i}}var OY=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function IY(e,t,n){var r=t.positioner(e,t),i=r.vx,o=r.vy;if(!i&&!o)return{x:r.x,y:r.y};var s=n.w,a=n.h,l=t.rotation,c=Math.abs(s/2*Math.cos(l))+Math.abs(a/2*Math.sin(l)),u=Math.abs(s/2*Math.sin(l))+Math.abs(a/2*Math.cos(l)),d=1/Math.max(Math.abs(i),Math.abs(o));return c*=i*d,u*=o*d,c+=t.offset*i,u+=t.offset*o,{x:r.x+c,y:r.y+u}}$G(OY.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,n=t._rect;return!((e=TY(e,t.center(),-t._rotation)).x<n.x-1||e.y<n.y-1||e.x>n.x+n.w+2||e.y>n.y+n.h+2)},intersects:function(e){var t,n,r,i=this._points(),o=e._points(),s=[BY(i[0],i[1]),BY(i[0],i[3])];for(this._rotation!==e._rotation&&s.push(BY(o[0],o[1]),BY(o[0],o[3])),t=0;t<s.length;++t)if(n=kY(i,s[t]),r=kY(o,s[t]),n.max<r.min||r.max<n.min)return!1;return!0},_points:function(){var e=this,t=e._rect,n=e._rotation,r=e.center();return[TY({x:t.x,y:t.y},r,n),TY({x:t.x+t.w,y:t.y},r,n),TY({x:t.x+t.w,y:t.y+t.h},r,n),TY({x:t.x,y:t.y+t.h},r,n)]}});var RY={prepare:function(e){var t,n,r,i,o,s=[];for(t=0,r=e.length;t<r;++t)for(n=0,i=e[t].length;n<i;++n)o=e[t][n],s.push(o),o.$layout={_box:new OY,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return s.sort((function(e,t){var n=e.$layout,r=t.$layout;return n._idx===r._idx?r._set-n._set:r._idx-n._idx})),this.update(s),s},update:function(e){var t,n,r,i,o,s=!1;for(t=0,n=e.length;t<n;++t)i=(r=e[t]).model(),(o=r.$layout)._hidable=i&&"auto"===i.display,o._visible=r.visible(),s|=o._hidable;s&&function(e){var t,n,r,i,o,s,a;for(t=0,n=e.length;t<n;++t)(i=(r=e[t]).$layout)._visible&&(a=new Proxy(r._el,{get:(e,t)=>e.getProps([t],!0)[t]}),o=r.geometry(),s=IY(a,r.model(),o),i._box.update(s,o,r.rotation()));(function(e,t){var n,r,i,o;for(n=e.length-1;n>=0;--n)for(i=e[n].$layout,r=n-1;r>=0&&i._visible;--r)(o=e[r].$layout)._visible&&i._box.intersects(o._box)&&t(i,o)})(e,(function(e,t){var n=e._hidable,r=t._hidable;n&&r||r?t._visible=!1:n&&(e._visible=!1)}))}(e)},lookup:function(e,t){var n,r;for(n=e.length-1;n>=0;--n)if((r=e[n].$layout)&&r._visible&&r._box.contains(t))return e[n];return null},draw:function(e,t){var n,r,i,o,s,a;for(n=0,r=t.length;n<r;++n)(o=(i=t[n]).$layout)._visible&&(s=i.geometry(),a=IY(i._el,i.model(),s),o._box.update(a,s,i.rotation()),i.draw(e,a))}},LY={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if(jG(e))return null;var t,n,r,i=e;if(GG(e))if(jG(e.label))if(jG(e.r))for(i="",r=0,n=(t=Object.keys(e)).length;r<n;++r)i+=(0!==r?", ":"")+t[r]+": "+e[t[r]];else i=e.r;else i=e.label;return""+i},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},DY="$datalabels",FY="$default";function NY(e,t,n,r){if(t){var i,o=n.$context,s=n.$groups;t[s._set]&&(i=t[s._set][s._key])&&!0===JG(i,[o,r])&&(e[DY]._dirty=!0,n.update(o))}}function zY(e,t){var n,r,i=e[DY],o=i._listeners;if(o.enter||o.leave){if("mousemove"===t.type)r=RY.lookup(i._labels,t);else if("mouseout"!==t.type)return;n=i._hovered,i._hovered=r,function(e,t,n,r,i){var o,s;(n||r)&&(n?r?n!==r&&(s=o=!0):s=!0:o=!0,s&&NY(e,t.leave,n,i),o&&NY(e,t.enter,r,i))}(e,o,n,r,t)}}var jY={id:"datalabels",defaults:LY,beforeInit:function(e){e[DY]={_actives:[]}},beforeUpdate:function(e){var t=e[DY];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var r,i,o,s,a,l,c,u,d=t.index,A=e[DY],h=A._datasets[d]=[],f=e.isDatasetVisible(d),p=e.data.datasets[d],g=function(e,t){var n,r,i,o=e.datalabels,s=[];return!1===o?null:(!0===o&&(o={}),t=$G({},[t,o]),r=t.labels||{},i=Object.keys(r),delete t.labels,i.length?i.forEach((function(e){r[e]&&s.push($G({},[t,r[e],{_key:e}]))})):s.push(t),n=s.reduce((function(e,t){return KG(t.listeners||{},(function(n,r){e[r]=e[r]||{},e[r][t._key||FY]=n})),delete t.listeners,e}),{}),{labels:s,listeners:n})}(p,n),m=t.meta.data||[],v=e.ctx;for(v.save(),r=0,o=m.length;r<o;++r)if((c=m[r])[DY]=[],f&&c&&e.getDataVisibility(r)&&!c.skip)for(i=0,s=g.labels.length;i<s;++i)l=(a=g.labels[i])._key,(u=new EY(a,v,c,r)).$groups={_set:d,_key:l||FY},u.$context={active:!1,chart:e,dataIndex:r,dataset:p,datasetIndex:d},u.update(u.$context),c[DY].push(u),h.push(u);v.restore(),$G(A._listeners,g.listeners,{merger:function(e,n,r){n[e]=n[e]||{},n[e][t.index]=r[e],A._listened=!0}})},afterUpdate:function(e){e[DY]._labels=RY.prepare(e[DY]._datasets)},afterDatasetsDraw:function(e){RY.draw(e,e[DY]._labels)},beforeEvent:function(e,t){if(e[DY]._listened){var n=t.event;switch(n.type){case"mousemove":case"mouseout":zY(e,n);break;case"click":!function(e,t){var n=e[DY],r=n._listeners.click,i=r&&RY.lookup(n._labels,t);i&&NY(e,r,i,t)}(e,n)}}},afterEvent:function(e){var t,n,r,i,o,s,a,l=e[DY],c=l._actives,u=l._actives=e.getActiveElements(),d=lY(c,u);for(t=0,n=d.length;t<n;++t)if((o=d[t])[1])for(r=0,i=(a=o[0].element[DY]||[]).length;r<i;++r)(s=a[r]).$context.active=1===o[1],s.update(s.$context);(l._dirty||d.length)&&(RY.update(l._labels),e.render()),delete l._dirty}};function UY(e){return(0,Fn.Ay)("MuiSwitch",e)}const GY=(0,Tn.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),VY=["className","color","edge","size","sx"],HY=zo(),WY=(0,Ln.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t["edge".concat((0,Dn.A)(n.edge))],t["size".concat((0,Dn.A)(n.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(GY.thumb)]:{width:16,height:16},["& .".concat(GY.switchBase)]:{padding:4,["&.".concat(GY.checked)]:{transform:"translateX(16px)"}}}}]}),QY=(0,Ln.Ay)($s,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{["& .".concat(GY.input)]:t.input},"default"!==n.color&&t["color".concat((0,Dn.A)(n.color))]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(GY.checked)]:{transform:"translateX(20px)"},["&.".concat(GY.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(GY.checked," + .").concat(GY.track)]:{opacity:.5},["&.".concat(GY.disabled," + .").concat(GY.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(GY.input)]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(GY.checked)]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(GY.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(n,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,Jn.a)(t.palette[n].main,.62):(0,Jn.e$)(t.palette[n].main,.55))}},["&.".concat(GY.checked," + .").concat(GY.track)]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}})),JY=(0,Ln.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),KY=(0,Ln.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),XY=A.forwardRef((function(e,t){const n=HY({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:s="medium",sx:a}=n,l=(0,C.A)(n,VY),c=(0,h.A)({},n,{color:i,edge:o,size:s}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:s}=e,a={root:["root",n&&"edge".concat((0,Dn.A)(n)),"size".concat((0,Dn.A)(r))],switchBase:["switchBase","color".concat((0,Dn.A)(i)),o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,Rn.A)(a,UY,t);return(0,h.A)({},t,l)})(c),d=(0,m.jsx)(KY,{className:u.thumb,ownerState:c});return(0,m.jsxs)(WY,{className:(0,_n.A)(u.root,r),sx:a,ownerState:c,children:[(0,m.jsx)(QY,(0,h.A)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,h.A)({},u,{root:u.switchBase})})),(0,m.jsx)(JY,{className:u.track,ownerState:c})]})})),YY=XY,qY={plugins:{legend:{display:!0,position:"left",align:"center",textDirection:"ltr",labels:{usePointStyle:!0,font:function(e){var t=Math.round((e.chart.height+e.chart.width)/2),n=Math.round(t/40);return{size:n>8?n:8}}}},tooltip:{callbacks:{label:e=>{const t=e.label,n="".concat(e.parsed.toFixed(0)||0," m\xb2"),r="".concat(Math.floor(10.7639*e.parsed)||0," ft\xb2");return"".concat(t," [").concat(n,"] [").concat(r,"]")}}},datalabels:{anchor:"center",rotation:function(e){const t=e.dataset.data.slice(0,e.dataIndex).reduce(((e,t)=>e+t),0),n=e.dataset.data.reduce(((e,t)=>e+t),0),r=(t+e.dataset.data[e.dataIndex]/2)/n*360;return r<180?r-90:r+90},color:e=>e.dataset.borderColor[e.dataIndex],formatter:(e,t)=>{const n=t.chart.data.labels[t.dataIndex].slice(0,10),r=e.toFixed(0),i=Math.floor(10.7639*r);return"".concat(n,"..\n").concat(r," m\xb2 \n").concat(i," ft\xb2")},font:e=>{var t=Math.round((e.chart.height+e.chart.width)/2),n=Math.round(t/80);return{size:n>5?n:0}}}}};function ZY(){const e=te((e=>e.cityIOdataState.cityIOdata)),[t,n]=(0,A.useState)({labels:[],datasets:[]}),[r,i]=(0,A.useState)(!1);oK.register(hK,AX,qK,jY);(0,A.useEffect)((()=>{e.GEOGRIDDATA&&(t=>{var i,o,s;const a=null===e||void 0===e||null===(i=e.GEOGRID)||void 0===i||null===(o=i.properties)||void 0===o||null===(s=o.header)||void 0===s?void 0:s.cellSize,l=a*a,c={labels:[],datasets:[{label:"Area Calculation",data:[],backgroundColor:[],borderColor:[],borderWidth:1}]};t.forEach((e=>{if(r&&!e.interactive)return;const t=e.name;if(!t||"None"===t||"none"===t||""===t)return;const n=Array.isArray(e.height)?e.height[1]:e.height?e.height:0,i=(e,t,n)=>{const r=c.labels.indexOf(e);c.datasets[0].data[r]+=t>0?n*t:n};c.labels.includes(t)||(c.labels.push(t),c.datasets[0].data.push(0),c.datasets[0].backgroundColor.push("rgba(".concat(e.color[0],", ").concat(e.color[1],", ").concat(e.color[2],", 0.2)")),c.datasets[0].borderColor.push("rgba(".concat(e.color[0],", ").concat(e.color[1],", ").concat(e.color[2],", 0.8)"))),i(t,n,l)})),n(c)})(e.GEOGRIDDATA)}),[e,r]);return(0,m.jsx)(m.Fragment,{children:e.GEOGRIDDATA&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(YX,{data:t,options:qY}),(0,m.jsx)(xf,{children:(0,m.jsx)(Js,{control:(0,m.jsx)(YY,{onChange:e=>{i(e.target.checked)},size:"small"}),label:(0,m.jsx)(Hn,{variant:"caption",component:"div",children:r?"display only interactive cells":"display all cells"})})})]})})}const $Y=function(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(Xh,{direction:"right",width:window.innerWidth/5,children:(0,m.jsx)(In,{p:1,children:(0,m.jsxs)(Ir,{container:!0,spacing:1,children:[(0,m.jsx)(Ir,{item:!0,xs:12,md:12,lg:12,xl:12,children:(0,m.jsx)(Df,{collapse:!0,variant:"outlined",title:"Land-use",subheader:"Land-uses Area",toolTipInfo:"Land use distribution and area. Each cell is calculated for its area (square meter ^ 2 per cell) times its floors (4.5 meters per floor)",children:(0,m.jsx)(ZY,{})})}),(0,m.jsx)(Ir,{item:!0,xs:12,md:12,lg:12,xl:12,children:(0,m.jsx)(Df,{collapse:!0,variant:"outlined",title:"Radar Chart",subheader:"Metrics and KPIs",children:(0,m.jsx)(eY,{})})}),(0,m.jsx)(Ir,{item:!0,xs:12,md:12,lg:12,xl:12,children:(0,m.jsx)(Df,{collapse:!0,variant:"outlined",title:"Bar Chart",subheader:"Metrics and KPIs",children:(0,m.jsx)(rY,{})})})]})})})})};function eq(){const e=te((e=>e.cityIOdataState.cityIOisDone)),t=te((e=>e.cityIOdataState.cityIOtableName));return(0,m.jsxs)(m.Fragment,{children:[t&&(0,m.jsx)(br,{tableName:t}),e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(FG,{}),(0,m.jsx)(jf,{}),(0,m.jsx)($Y,{})]})]})}function tq(){const[e,t]=(0,A.useState)(0),n=(0,Ln.Ay)(mr)((e=>{let{theme:t}=e;return{height:10}}));return(0,A.useEffect)((()=>{const e=setInterval((()=>{t((e=>{if(100===e)return 0;const t=10*Math.random();return Math.min(e+t,100)}))}),500);return()=>{clearInterval(e)}}),[]),(0,m.jsx)(In,{sx:{width:"100%",position:"fixed",bottom:"0px"},children:(0,m.jsx)(n,{variant:"determinate",value:e})})}function nq(e,t){return function(){return e.apply(t,arguments)}}const{toString:rq}=Object.prototype,{getPrototypeOf:iq}=Object,oq=(e=>t=>{const n=rq.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),sq=e=>(e=e.toLowerCase(),t=>oq(t)===e),aq=e=>t=>typeof t===e,{isArray:lq}=Array,cq=aq("undefined");const uq=sq("ArrayBuffer");const dq=aq("string"),Aq=aq("function"),hq=aq("number"),fq=e=>null!==e&&"object"===typeof e,pq=e=>{if("object"!==oq(e))return!1;const t=iq(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gq=sq("Date"),mq=sq("File"),vq=sq("Blob"),bq=sq("FileList"),yq=sq("URLSearchParams");function xq(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),lq(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function wq(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const _q="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Sq=e=>!cq(e)&&e!==_q;const Cq=(Eq="undefined"!==typeof Uint8Array&&iq(Uint8Array),e=>Eq&&e instanceof Eq);var Eq;const Mq=sq("HTMLFormElement"),Pq=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Tq=sq("RegExp"),kq=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};xq(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},Bq="abcdefghijklmnopqrstuvwxyz",Oq="0123456789",Iq={DIGIT:Oq,ALPHA:Bq,ALPHA_DIGIT:Bq+Bq.toUpperCase()+Oq};const Rq=sq("AsyncFunction"),Lq={isArray:lq,isArrayBuffer:uq,isBuffer:function(e){return null!==e&&!cq(e)&&null!==e.constructor&&!cq(e.constructor)&&Aq(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Aq(e.append)&&("formdata"===(t=oq(e))||"object"===t&&Aq(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&uq(e.buffer),t},isString:dq,isNumber:hq,isBoolean:e=>!0===e||!1===e,isObject:fq,isPlainObject:pq,isUndefined:cq,isDate:gq,isFile:mq,isBlob:vq,isRegExp:Tq,isFunction:Aq,isStream:e=>fq(e)&&Aq(e.pipe),isURLSearchParams:yq,isTypedArray:Cq,isFileList:bq,forEach:xq,merge:function e(){const{caseless:t}=Sq(this)&&this||{},n={},r=(r,i)=>{const o=t&&wq(n,i)||i;pq(n[o])&&pq(r)?n[o]=e(n[o],r):pq(r)?n[o]=e({},r):lq(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&xq(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return xq(t,((t,r)=>{n&&Aq(t)?e[r]=nq(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&iq(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:oq,kindOfTest:sq,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(lq(e))return e;let t=e.length;if(!hq(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Mq,hasOwnProperty:Pq,hasOwnProp:Pq,reduceDescriptors:kq,freezeMethods:e=>{kq(e,((t,n)=>{if(Aq(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Aq(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return lq(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:wq,global:_q,isContextDefined:Sq,ALPHABET:Iq,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Iq.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Aq(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(fq(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=lq(e)?[]:{};return xq(e,((e,t)=>{const o=n(e,r+1);!cq(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Rq,isThenable:e=>e&&(fq(e)||Aq(e))&&Aq(e.then)&&Aq(e.catch)};function Dq(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Lq.inherits(Dq,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Lq.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Fq=Dq.prototype,Nq={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Nq[e]={value:e}})),Object.defineProperties(Dq,Nq),Object.defineProperty(Fq,"isAxiosError",{value:!0}),Dq.from=(e,t,n,r,i,o)=>{const s=Object.create(Fq);return Lq.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Dq.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const zq=Dq;function jq(e){return Lq.isPlainObject(e)||Lq.isArray(e)}function Uq(e){return Lq.endsWith(e,"[]")?e.slice(0,-2):e}function Gq(e,t,n){return e?e.concat(t).map((function(e,t){return e=Uq(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Vq=Lq.toFlatObject(Lq,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Hq=function(e,t,n){if(!Lq.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Lq.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Lq.isUndefined(t[e])}));const r=n.metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Lq.isSpecCompliantForm(t);if(!Lq.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Lq.isDate(e))return e.toISOString();if(!a&&Lq.isBlob(e))throw new zq("Blob is not supported. Use a Buffer instead.");return Lq.isArrayBuffer(e)||Lq.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(Lq.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Lq.isArray(e)&&function(e){return Lq.isArray(e)&&!e.some(jq)}(e)||(Lq.isFileList(e)||Lq.endsWith(n,"[]"))&&(a=Lq.toArray(e)))return n=Uq(n),a.forEach((function(e,r){!Lq.isUndefined(e)&&null!==e&&t.append(!0===s?Gq([n],r,o):null===s?n:n+"[]",l(e))})),!1;return!!jq(e)||(t.append(Gq(i,n,o),l(e)),!1)}const u=[],d=Object.assign(Vq,{defaultVisitor:c,convertValue:l,isVisitable:jq});if(!Lq.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Lq.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Lq.forEach(n,(function(n,o){!0===(!(Lq.isUndefined(n)||null===n)&&i.call(t,n,Lq.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t};function Wq(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Qq(e,t){this._pairs=[],e&&Hq(e,this,t)}const Jq=Qq.prototype;Jq.append=function(e,t){this._pairs.push([e,t])},Jq.toString=function(e){const t=e?function(t){return e.call(this,t,Wq)}:Wq;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Kq=Qq;function Xq(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Yq(e,t,n){if(!t)return e;const r=n&&n.encode||Xq,i=n&&n.serialize;let o;if(o=i?i(t,n):Lq.isURLSearchParams(t)?t.toString():new Kq(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const qq=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Lq.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Zq={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$q={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Kq,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},eZ="undefined"!==typeof window&&"undefined"!==typeof document,tZ=(nZ="undefined"!==typeof navigator&&navigator.product,eZ&&["ReactNative","NativeScript","NS"].indexOf(nZ)<0);var nZ;const rZ="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,iZ={...d,...$q};const oZ=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&Lq.isArray(r)?r.length:o,a)return Lq.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&Lq.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&Lq.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(Lq.isFormData(e)&&Lq.isFunction(e.entries)){const n={};return Lq.forEachEntry(e,((e,r)=>{t(function(e){return Lq.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const sZ={transitional:Zq,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Lq.isObject(e);i&&Lq.isHTMLForm(e)&&(e=new FormData(e));if(Lq.isFormData(e))return r?JSON.stringify(oZ(e)):e;if(Lq.isArrayBuffer(e)||Lq.isBuffer(e)||Lq.isStream(e)||Lq.isFile(e)||Lq.isBlob(e))return e;if(Lq.isArrayBufferView(e))return e.buffer;if(Lq.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Hq(e,new iZ.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return iZ.isNode&&Lq.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=Lq.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Hq(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Lq.isString(e))try{return(t||JSON.parse)(e),Lq.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||sZ.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Lq.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw zq.from(i,zq.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:iZ.classes.FormData,Blob:iZ.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Lq.forEach(["delete","get","head","post","put","patch"],(e=>{sZ.headers[e]={}}));const aZ=sZ,lZ=Lq.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cZ=Symbol("internals");function uZ(e){return e&&String(e).trim().toLowerCase()}function dZ(e){return!1===e||null==e?e:Lq.isArray(e)?e.map(dZ):String(e)}function AZ(e,t,n,r,i){return Lq.isFunction(r)?r.call(this,t,n):(i&&(t=n),Lq.isString(t)?Lq.isString(r)?-1!==t.indexOf(r):Lq.isRegExp(r)?r.test(t):void 0:void 0)}class hZ{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=uZ(t);if(!i)throw new Error("header name must be a non-empty string");const o=Lq.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=dZ(e))}const o=(e,t)=>Lq.forEach(e,((e,n)=>i(e,n,t)));return Lq.isPlainObject(e)||e instanceof this.constructor?o(e,t):Lq.isString(e)&&(e=e.trim())&&!(e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))(e)?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&lZ[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=uZ(e)){const n=Lq.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Lq.isFunction(t))return t.call(this,e,n);if(Lq.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=uZ(e)){const n=Lq.findKey(this,e);return!(!n||void 0===this[n]||t&&!AZ(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=uZ(e)){const i=Lq.findKey(n,e);!i||t&&!AZ(0,n[i],i,t)||(delete n[i],r=!0)}}return Lq.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!AZ(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Lq.forEach(this,((r,i)=>{const o=Lq.findKey(n,i);if(o)return t[o]=dZ(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=dZ(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Lq.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Lq.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[cZ]=this[cZ]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=uZ(e);t[r]||(!function(e,t){const n=Lq.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Lq.isArray(e)?e.forEach(r):r(e),this}}hZ.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Lq.reduceDescriptors(hZ.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Lq.freezeMethods(hZ);const fZ=hZ;function pZ(e,t){const n=this||aZ,r=t||n,i=fZ.from(r.headers);let o=r.data;return Lq.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function gZ(e){return!(!e||!e.__CANCEL__)}function mZ(e,t,n){zq.call(this,null==e?"canceled":e,zq.ERR_CANCELED,t,n),this.name="CanceledError"}Lq.inherits(mZ,zq,{__CANCEL__:!0});const vZ=mZ;const bZ=iZ.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];Lq.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Lq.isString(r)&&s.push("path="+r),Lq.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function yZ(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const xZ=iZ.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=Lq.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const wZ=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[s];i||(i=l),n[o]=a,r[o]=l;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-i<t)return;const A=c&&l-c;return A?Math.round(1e3*d/A):void 0}};function _Z(e,t){let n=0;const r=wZ(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,l=r(a);n=o;const c={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const SZ="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=fZ.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(Lq.isFormData(r))if(iZ.hasStandardBrowserEnv||iZ.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const d=yZ(e.baseURL,e.url);function A(){if(!u)return;const r=fZ.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new zq("Request failed with status code "+n.status,[zq.ERR_BAD_REQUEST,zq.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),Yq(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=A:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(A)},u.onabort=function(){u&&(n(new zq("Request aborted",zq.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new zq("Network Error",zq.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Zq;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new zq(t,r.clarifyTimeoutError?zq.ETIMEDOUT:zq.ECONNABORTED,e,u)),u=null},iZ.hasStandardBrowserEnv&&(l&&Lq.isFunction(l)&&(l=l(e)),l||!1!==l&&xZ(d))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&bZ.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&Lq.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),Lq.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",_Z(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",_Z(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{u&&(n(!t||t.type?new vZ(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);h&&-1===iZ.protocols.indexOf(h)?n(new zq("Unsupported protocol "+h+":",zq.ERR_BAD_REQUEST,e)):u.send(r||null)}))},CZ={http:null,xhr:SZ};Lq.forEach(CZ,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const EZ=e=>"- ".concat(e),MZ=e=>Lq.isFunction(e)||null===e||!1===e,PZ=e=>{e=Lq.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!MZ(n)&&(r=CZ[(t=String(n)).toLowerCase()],void 0===r))throw new zq("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(EZ).join("\n"):" "+EZ(e[0]):"as no adapter specified";throw new zq("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function TZ(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vZ(null,e)}function kZ(e){TZ(e),e.headers=fZ.from(e.headers),e.data=pZ.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return PZ(e.adapter||aZ.adapter)(e).then((function(t){return TZ(e),t.data=pZ.call(e,e.transformResponse,t),t.headers=fZ.from(t.headers),t}),(function(t){return gZ(t)||(TZ(e),t&&t.response&&(t.response.data=pZ.call(e,e.transformResponse,t.response),t.response.headers=fZ.from(t.response.headers))),Promise.reject(t)}))}const BZ=e=>e instanceof fZ?{...e}:e;function OZ(e,t){t=t||{};const n={};function r(e,t,n){return Lq.isPlainObject(e)&&Lq.isPlainObject(t)?Lq.merge.call({caseless:n},e,t):Lq.isPlainObject(t)?Lq.merge({},t):Lq.isArray(t)?t.slice():t}function i(e,t,n){return Lq.isUndefined(t)?Lq.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!Lq.isUndefined(t))return r(void 0,t)}function s(e,t){return Lq.isUndefined(t)?Lq.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(BZ(e),BZ(t),!0)};return Lq.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,s=o(e[r],t[r],r);Lq.isUndefined(s)&&o!==a||(n[r]=s)})),n}const IZ="1.6.8",RZ={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{RZ[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const LZ={};RZ.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new zq(r(i," has been removed"+(t?" in "+t:"")),zq.ERR_DEPRECATED);return t&&!LZ[i]&&(LZ[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const DZ={assertOptions:function(e,t,n){if("object"!==typeof e)throw new zq("options must be an object",zq.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new zq("option "+o+" must be "+n,zq.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new zq("Unknown option "+o,zq.ERR_BAD_OPTION)}},validators:RZ},FZ=DZ.validators;class NZ{constructor(e){this.defaults=e,this.interceptors={request:new qq,response:new qq}}async request(e,t){try{return await this._request(e,t)}catch(o0){if(o0 instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";o0.stack?n&&!String(o0.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(o0.stack+="\n"+n):o0.stack=n}throw o0}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=OZ(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&DZ.assertOptions(n,{silentJSONParsing:FZ.transitional(FZ.boolean),forcedJSONParsing:FZ.transitional(FZ.boolean),clarifyTimeoutError:FZ.transitional(FZ.boolean)},!1),null!=r&&(Lq.isFunction(r)?t.paramsSerializer={serialize:r}:DZ.assertOptions(r,{encode:FZ.function,serialize:FZ.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Lq.merge(i.common,i[t.method]);i&&Lq.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=fZ.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[kZ.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let A=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{A=e(A)}catch(h){t.call(this,h);break}}try{c=kZ.call(this,A)}catch(h){return Promise.reject(h)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Yq(yZ((e=OZ(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Lq.forEach(["delete","get","head","options"],(function(e){NZ.prototype[e]=function(t,n){return this.request(OZ(n||{},{method:e,url:t,data:(n||{}).data}))}})),Lq.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(OZ(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}NZ.prototype[e]=t(),NZ.prototype[e+"Form"]=t(!0)}));const zZ=NZ;class jZ{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new vZ(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new jZ((function(t){e=t}));return{token:t,cancel:e}}}const UZ=jZ;const GZ={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(GZ).forEach((e=>{let[t,n]=e;GZ[n]=t}));const VZ=GZ;const HZ=function e(t){const n=new zZ(t),r=nq(zZ.prototype.request,n);return Lq.extend(r,zZ.prototype,n,{allOwnKeys:!0}),Lq.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(OZ(t,n))},r}(aZ);HZ.Axios=zZ,HZ.CanceledError=vZ,HZ.CancelToken=UZ,HZ.isCancel=gZ,HZ.VERSION=IZ,HZ.toFormData=Hq,HZ.AxiosError=zq,HZ.Cancel=HZ.CanceledError,HZ.all=function(e){return Promise.all(e)},HZ.spread=function(e){return function(t){return e.apply(null,t)}},HZ.isAxiosError=function(e){return Lq.isObject(e)&&!0===e.isAxiosError},HZ.mergeConfig=OZ,HZ.AxiosHeaders=fZ,HZ.formToJSON=e=>oZ(Lq.isHTMLForm(e)?new FormData(e):e),HZ.getAdapter=PZ,HZ.HttpStatusCode=VZ,HZ.default=HZ;const WZ=HZ;function QZ(e){const t=e.getTablesList,[n,r]=(0,A.useState)([]),[i,o]=(0,A.useState)(!0);(0,A.useEffect)((()=>{n&&t(n)}),[n]);return(0,A.useEffect)((()=>{(async()=>{const e=vn.cityIO.baseURL+vn.cityIO.headers;let t=await WZ.get(e);t=t.data.map((e=>{const t="".concat(vn.cityIO.baseURL,"table/").concat(e.tableName,"/");return{...e,tableURL:t}})),r((e=>[...t])),o(!1)})()}),[]),(0,m.jsx)(m.Fragment,{children:i&&(0,m.jsx)(tq,{})})}function JZ(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function KZ(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const XZ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:s=!1}=e;return(e,a)=>{let{inputValue:l,getOptionLabel:c}=a,u=s?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=JZ(u));const d=u?e.filter((e=>{let r=(o||c)(e);return n&&(r=r.toLowerCase()),t&&(r=JZ(r)),"start"===i?0===r.indexOf(u):r.indexOf(u)>-1})):e;return"number"===typeof r?d.slice(0,r):d}}(),YZ=e=>{var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))};function qZ(e){const{unstable_isActiveElementInListbox:t=YZ,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:o=!1,blurOnSelect:s=!1,clearOnBlur:a=!e.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=(e.multiple?[]:null),disableClearable:d=!1,disableCloseOnSelect:f=!1,disabled:p,disabledItemsFocusable:g=!1,disableListWrap:m=!1,filterOptions:v=XZ,filterSelectedOptions:b=!1,freeSolo:y=!1,getOptionDisabled:x,getOptionKey:w,getOptionLabel:_=(e=>{var t;return null!=(t=e.label)?t:e}),groupBy:S,handleHomeEndKeys:C=!e.freeSolo,id:E,includeInputInList:M=!1,inputValue:P,isOptionEqualToValue:T=((e,t)=>e===t),multiple:k=!1,onChange:B,onClose:O,onHighlightChange:I,onInputChange:R,onOpen:L,open:D,openOnFocus:F=!1,options:N,readOnly:z=!1,selectOnFocus:j=!e.freeSolo,value:U}=e,G=(0,$c.A)(E);let V=_;V=e=>{const t=_(e);return"string"!==typeof t?String(t):t};const H=A.useRef(!1),W=A.useRef(!0),Q=A.useRef(null),J=A.useRef(null),[K,X]=A.useState(null),[Y,q]=A.useState(-1),Z=i?0:-1,$=A.useRef(Z),[ee,te]=(0,yo.A)({controlled:U,default:u,name:c}),[ne,re]=(0,yo.A)({controlled:P,default:"",name:c,state:"inputValue"}),[ie,oe]=A.useState(!1),se=A.useCallback(((e,t)=>{if(!(k?ee.length<t.length:null!==t)&&!a)return;let n;if(k)n="";else if(null==t)n="";else{const e=V(t);n="string"===typeof e?e:""}ne!==n&&(re(n),R&&R(e,n,"reset"))}),[V,ne,k,R,re,a,ee]),[ae,le]=(0,yo.A)({controlled:D,default:!1,name:c,state:"open"}),[ce,ue]=A.useState(!0),de=!k&&null!=ee&&ne===V(ee),Ae=ae&&!z,he=Ae?v(N.filter((e=>!b||!(k?ee:[ee]).some((t=>null!==t&&T(e,t))))),{inputValue:de&&ce?"":ne,getOptionLabel:V}):[],fe=Hc({filteredOptions:he,value:ee,inputValue:ne});A.useEffect((()=>{const e=ee!==fe.value;ie&&!e||y&&!e||se(null,ee)}),[ee,se,ie,fe.value,y]);const pe=ae&&he.length>0&&!z;const ge=(0,So.A)((e=>{-1===e?Q.current.focus():K.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));A.useEffect((()=>{k&&Y>ee.length-1&&(q(-1),ge(-1))}),[ee,k,Y,ge]);const me=(0,So.A)((e=>{let{event:t,index:r,reason:i="auto"}=e;if($.current=r,-1===r?Q.current.removeAttribute("aria-activedescendant"):Q.current.setAttribute("aria-activedescendant","".concat(G,"-option-").concat(r)),I&&I(t,-1===r?null:he[r],i),!J.current)return;const o=J.current.querySelector('[role="option"].'.concat(n,"-focused"));o&&(o.classList.remove("".concat(n,"-focused")),o.classList.remove("".concat(n,"-focusVisible")));let s=J.current;if("listbox"!==J.current.getAttribute("role")&&(s=J.current.parentElement.querySelector('[role="listbox"]')),!s)return;if(-1===r)return void(s.scrollTop=0);const a=J.current.querySelector('[data-option-index="'.concat(r,'"]'));if(a&&(a.classList.add("".concat(n,"-focused")),"keyboard"===i&&a.classList.add("".concat(n,"-focusVisible")),s.scrollHeight>s.clientHeight&&"mouse"!==i&&"touch"!==i)){const e=a,t=s.clientHeight+s.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?s.scrollTop=n-s.clientHeight:e.offsetTop-e.offsetHeight*(S?1.3:0)<s.scrollTop&&(s.scrollTop=e.offsetTop-e.offsetHeight*(S?1.3:0))}})),ve=(0,So.A)((e=>{let{event:t,diff:n,direction:i="next",reason:o="auto"}=e;if(!Ae)return;const s=function(e,t){if(!J.current||e<0||e>=he.length)return-1;let n=e;for(;;){const r=J.current.querySelector('[data-option-index="'.concat(n,'"]')),i=!g&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(r&&r.hasAttribute("tabindex")&&!i)return n;if(n="next"===t?(n+1)%he.length:(n-1+he.length)%he.length,n===e)return-1}}((()=>{const e=he.length-1;if("reset"===n)return Z;if("start"===n)return 0;if("end"===n)return e;const t=$.current+n;return t<0?-1===t&&M?-1:m&&-1!==$.current||Math.abs(n)>1?0:e:t>e?t===e+1&&M?-1:m||Math.abs(n)>1?e:0:t})(),i);if(me({index:s,reason:o,event:t}),r&&"reset"!==n)if(-1===s)Q.current.value=ne;else{const e=V(he[s]);Q.current.value=e;0===e.toLowerCase().indexOf(ne.toLowerCase())&&ne.length>0&&Q.current.setSelectionRange(ne.length,e.length)}})),be=A.useCallback((()=>{if(!Ae)return;const e=(()=>{if(-1!==$.current&&fe.filteredOptions&&fe.filteredOptions.length!==he.length&&fe.inputValue===ne&&(k?ee.length===fe.value.length&&fe.value.every(((e,t)=>V(ee[t])===V(e))):(e=fe.value,t=ee,(e?V(e):"")===(t?V(t):"")))){const e=fe.filteredOptions[$.current];if(e)return KZ(he,(t=>V(t)===V(e)))}var e,t;return-1})();if(-1!==e)return void($.current=e);const t=k?ee[0]:ee;if(0!==he.length&&null!=t){if(J.current)if(null==t)$.current>=he.length-1?me({index:he.length-1}):me({index:$.current});else{const e=he[$.current];if(k&&e&&-1!==KZ(ee,(t=>T(e,t))))return;const n=KZ(he,(e=>T(e,t)));-1===n?ve({diff:"reset"}):me({index:n})}}else ve({diff:"reset"})}),[he.length,!k&&ee,b,ve,me,Ae,ne,k]),ye=(0,So.A)((e=>{(0,ic.A)(J,e),e&&be()}));A.useEffect((()=>{be()}),[be]);const xe=e=>{ae||(le(!0),ue(!0),L&&L(e))},we=(e,t)=>{ae&&(le(!1),O&&O(e,t))},_e=(e,t,n,r)=>{if(k){if(ee.length===t.length&&ee.every(((e,n)=>e===t[n])))return}else if(ee===t)return;B&&B(e,t,n,r),te(t)},Se=A.useRef(!1),Ce=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",i=t;if(k){i=Array.isArray(ee)?ee.slice():[];const e=KZ(i,(e=>T(t,e)));-1===e?i.push(t):"freeSolo"!==n&&(i.splice(e,1),r="removeOption")}se(e,i),_e(e,i,r,{option:t}),f||e&&(e.ctrlKey||e.metaKey)||we(e,r),(!0===s||"touch"===s&&Se.current||"mouse"===s&&!Se.current)&&Q.current.blur()};const Ee=(e,t)=>{if(!k)return;""===ne&&we(e,"toggleInput");let n=Y;-1===Y?""===ne&&"previous"===t&&(n=ee.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===ee.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===ee.length||"previous"===t&&-1===n)return-1;const e=K.querySelector('[data-tag-index="'.concat(n,'"]'));if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),q(n),ge(n)},Me=e=>{H.current=!0,re(""),R&&R(e,"","clear"),_e(e,k?[]:null,"clear")},Pe=e=>t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Y&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(q(-1),ge(-1)),229!==t.which))switch(t.key){case"Home":Ae&&C&&(t.preventDefault(),ve({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":Ae&&C&&(t.preventDefault(),ve({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),ve({diff:-5,direction:"previous",reason:"keyboard",event:t}),xe(t);break;case"PageDown":t.preventDefault(),ve({diff:5,direction:"next",reason:"keyboard",event:t}),xe(t);break;case"ArrowDown":t.preventDefault(),ve({diff:1,direction:"next",reason:"keyboard",event:t}),xe(t);break;case"ArrowUp":t.preventDefault(),ve({diff:-1,direction:"previous",reason:"keyboard",event:t}),xe(t);break;case"ArrowLeft":Ee(t,"previous");break;case"ArrowRight":Ee(t,"next");break;case"Enter":if(-1!==$.current&&Ae){const e=he[$.current],n=!!x&&x(e);if(t.preventDefault(),n)return;Ce(t,e,"selectOption"),r&&Q.current.setSelectionRange(Q.current.value.length,Q.current.value.length)}else y&&""!==ne&&!1===de&&(k&&t.preventDefault(),Ce(t,ne,"createOption","freeSolo"));break;case"Escape":Ae?(t.preventDefault(),t.stopPropagation(),we(t,"escape")):l&&(""!==ne||k&&ee.length>0)&&(t.preventDefault(),t.stopPropagation(),Me(t));break;case"Backspace":if(k&&!z&&""===ne&&ee.length>0){const e=-1===Y?ee.length-1:Y,n=ee.slice();n.splice(e,1),_e(t,n,"removeOption",{option:ee[e]})}break;case"Delete":if(k&&!z&&""===ne&&ee.length>0&&-1!==Y){const e=Y,n=ee.slice();n.splice(e,1),_e(t,n,"removeOption",{option:ee[e]})}}},Te=e=>{oe(!0),F&&!H.current&&xe(e)},ke=e=>{t(J)?Q.current.focus():(oe(!1),W.current=!0,H.current=!1,o&&-1!==$.current&&Ae?Ce(e,he[$.current],"blur"):o&&y&&""!==ne?Ce(e,ne,"blur","freeSolo"):a&&se(e,ee),we(e,"blur"))},Be=e=>{const t=e.target.value;ne!==t&&(re(t),ue(!1),R&&R(e,t,"input")),""===t?d||k||_e(e,null,"clear"):xe(e)},Oe=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));$.current!==t&&me({event:e,index:t,reason:"mouse"})},Ie=e=>{me({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Se.current=!0},Re=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));Ce(e,he[t],"selectOption"),Se.current=!1},Le=e=>t=>{const n=ee.slice();n.splice(e,1),_e(t,n,"removeOption",{option:ee[e]})},De=e=>{ae?we(e,"toggleInput"):xe(e)},Fe=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==G&&e.preventDefault()},Ne=e=>{e.currentTarget.contains(e.target)&&(Q.current.focus(),j&&W.current&&Q.current.selectionEnd-Q.current.selectionStart===0&&Q.current.select(),W.current=!1)},ze=e=>{p||""!==ne&&ae||De(e)};let je=y&&ne.length>0;je=je||(k?ee.length>0:null!==ee);let Ue=he;if(S){new Map;Ue=he.reduce(((e,t,n)=>{const r=S(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return p&&ie&&ke(),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,h.A)({"aria-owns":pe?"".concat(G,"-listbox"):null},e,{onKeyDown:Pe(e),onMouseDown:Fe,onClick:Ne})},getInputLabelProps:()=>({id:"".concat(G,"-label"),htmlFor:G}),getInputProps:()=>({id:G,value:ne,onBlur:ke,onFocus:Te,onChange:Be,onMouseDown:ze,"aria-activedescendant":Ae?"":null,"aria-autocomplete":r?"both":"list","aria-controls":pe?"".concat(G,"-listbox"):void 0,"aria-expanded":pe,autoComplete:"off",ref:Q,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:p}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Me}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:De}),getTagProps:e=>{let{index:t}=e;return(0,h.A)({key:t,"data-tag-index":t,tabIndex:-1},!z&&{onDelete:Le(t)})},getListboxProps:()=>({role:"listbox",id:"".concat(G,"-listbox"),"aria-labelledby":"".concat(G,"-label"),ref:ye,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:e=>{let{index:t,option:n}=e;var r;const i=(k?ee:[ee]).some((e=>null!=e&&T(n,e))),o=!!x&&x(n);return{key:null!=(r=null==w?void 0:w(n))?r:V(n),tabIndex:-1,role:"option",id:"".concat(G,"-option-").concat(t),onMouseMove:Oe,onClick:Re,onTouchStart:Ie,"data-option-index":t,"aria-disabled":o,"aria-selected":i}},id:G,inputValue:ne,value:ee,dirty:je,expanded:Ae&&K,popupOpen:Ae,focused:ie||-1!==Y,anchorEl:K,setAnchorEl:X,focusedTag:Y,groupedOptions:Ue}}function ZZ(e){return(0,Fn.Ay)("MuiListSubheader",e)}(0,Tn.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const $Z=["className","color","component","disableGutters","disableSticky","inset"],e$=(0,Ln.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat((0,Dn.A)(n.color))],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:(t.vars||t).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),t$=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiListSubheader"}),{className:r,color:i="default",component:o="li",disableGutters:s=!1,disableSticky:a=!1,inset:l=!1}=n,c=(0,C.A)(n,$Z),u=(0,h.A)({},n,{color:i,component:o,disableGutters:s,disableSticky:a,inset:l}),d=(e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,s={root:["root","default"!==n&&"color".concat((0,Dn.A)(n)),!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,Rn.A)(s,ZZ,t)})(u);return(0,m.jsx)(e$,(0,h.A)({as:o,className:(0,_n.A)(d.root,r),ref:t,ownerState:u},c))}));t$.muiSkipListHighlight=!0;const n$=t$,r$=(0,ea.A)((0,m.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function i$(e){return(0,Fn.Ay)("MuiChip",e)}const o$=(0,Tn.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),s$=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],a$=(0,Ln.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:o,onDelete:s,size:a,variant:l}=n;return[{["& .".concat(o$.avatar)]:t.avatar},{["& .".concat(o$.avatar)]:t["avatar".concat((0,Dn.A)(a))]},{["& .".concat(o$.avatar)]:t["avatarColor".concat((0,Dn.A)(r))]},{["& .".concat(o$.icon)]:t.icon},{["& .".concat(o$.icon)]:t["icon".concat((0,Dn.A)(a))]},{["& .".concat(o$.icon)]:t["iconColor".concat((0,Dn.A)(i))]},{["& .".concat(o$.deleteIcon)]:t.deleteIcon},{["& .".concat(o$.deleteIcon)]:t["deleteIcon".concat((0,Dn.A)(a))]},{["& .".concat(o$.deleteIcon)]:t["deleteIconColor".concat((0,Dn.A)(r))]},{["& .".concat(o$.deleteIcon)]:t["deleteIcon".concat((0,Dn.A)(l),"Color").concat((0,Dn.A)(r))]},t.root,t["size".concat((0,Dn.A)(a))],t["color".concat((0,Dn.A)(r))],o&&t.clickable,o&&"default"!==r&&t["clickableColor".concat((0,Dn.A)(r),")")],s&&t.deletable,s&&"default"!==r&&t["deletableColor".concat((0,Dn.A)(r))],t[l],t["".concat(l).concat((0,Dn.A)(r))]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return(0,h.A)({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",["&.".concat(o$.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["& .".concat(o$.avatar)]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:r,fontSize:t.typography.pxToRem(12)},["& .".concat(o$.avatarColorPrimary)]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},["& .".concat(o$.avatarColorSecondary)]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},["& .".concat(o$.avatarSmall)]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},["& .".concat(o$.icon)]:(0,h.A)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,h.A)({color:t.vars?t.vars.palette.Chip.defaultIconColor:r},"default"!==n.color&&{color:"inherit"})),["& .".concat(o$.deleteIcon)]:(0,h.A)({WebkitTapHighlightColor:"transparent",color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.26)"):(0,Jn.X4)(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):(0,Jn.X4)(t.palette.text.primary,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:t.vars?"rgba(".concat(t.vars.palette[n.color].contrastTextChannel," / 0.7)"):(0,Jn.X4)(t.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},n.onDelete&&{["&.".concat(o$.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Jn.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{["&.".concat(o$.focusVisible)]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Jn.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},["&.".concat(o$.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Jn.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},n.clickable&&"default"!==n.color&&{["&:hover, &.".concat(o$.focusVisible)]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:t.vars?"1px solid ".concat(t.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]),["&.".concat(o$.clickable,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(o$.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["& .".concat(o$.avatar)]:{marginLeft:4},["& .".concat(o$.avatarSmall)]:{marginLeft:2},["& .".concat(o$.icon)]:{marginLeft:4},["& .".concat(o$.iconSmall)]:{marginLeft:2},["& .".concat(o$.deleteIcon)]:{marginRight:5},["& .".concat(o$.deleteIconSmall)]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.7)"):(0,Jn.X4)(t.palette[n.color].main,.7)),["&.".concat(o$.clickable,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Jn.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity)},["&.".concat(o$.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.focusOpacity,")"):(0,Jn.X4)(t.palette[n.color].main,t.palette.action.focusOpacity)},["& .".concat(o$.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.7)"):(0,Jn.X4)(t.palette[n.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].main}}})})),l$=(0,Ln.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t["label".concat((0,Dn.A)(r))]]}})((e=>{let{ownerState:t}=e;return(0,h.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===t.variant&&{paddingLeft:11,paddingRight:11},"small"===t.size&&{paddingLeft:8,paddingRight:8},"small"===t.size&&"outlined"===t.variant&&{paddingLeft:7,paddingRight:7})}));function c$(e){return"Backspace"===e.key||"Delete"===e.key}const u$=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiChip"}),{avatar:r,className:i,clickable:o,color:s="default",component:a,deleteIcon:l,disabled:c=!1,icon:u,label:d,onClick:p,onDelete:g,onKeyDown:v,onKeyUp:b,size:y="medium",variant:x="filled",tabIndex:w,skipFocusWhenDisabled:_=!1}=n,S=(0,C.A)(n,s$),E=A.useRef(null),M=(0,Lr.A)(E,t),P=e=>{e.stopPropagation(),g&&g(e)},T=!(!1===o||!p)||o,k=T||g?gi:a||"div",B=(0,h.A)({},n,{component:k,disabled:c,size:y,color:s,iconColor:A.isValidElement(u)&&u.props.color||s,onDelete:!!g,clickable:T,variant:x}),O=(e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:o,onDelete:s,clickable:a,variant:l}=e,c={root:["root",l,n&&"disabled","size".concat((0,Dn.A)(r)),"color".concat((0,Dn.A)(i)),a&&"clickable",a&&"clickableColor".concat((0,Dn.A)(i)),s&&"deletable",s&&"deletableColor".concat((0,Dn.A)(i)),"".concat(l).concat((0,Dn.A)(i))],label:["label","label".concat((0,Dn.A)(r))],avatar:["avatar","avatar".concat((0,Dn.A)(r)),"avatarColor".concat((0,Dn.A)(i))],icon:["icon","icon".concat((0,Dn.A)(r)),"iconColor".concat((0,Dn.A)(o))],deleteIcon:["deleteIcon","deleteIcon".concat((0,Dn.A)(r)),"deleteIconColor".concat((0,Dn.A)(i)),"deleteIcon".concat((0,Dn.A)(l),"Color").concat((0,Dn.A)(i))]};return(0,Rn.A)(c,i$,t)})(B),I=k===gi?(0,h.A)({component:a||"div",focusVisibleClassName:O.focusVisible},g&&{disableRipple:!0}):{};let R=null;g&&(R=l&&A.isValidElement(l)?A.cloneElement(l,{className:(0,_n.A)(l.props.className,O.deleteIcon),onClick:P}):(0,m.jsx)(r$,{className:(0,_n.A)(O.deleteIcon),onClick:P}));let L=null;r&&A.isValidElement(r)&&(L=A.cloneElement(r,{className:(0,_n.A)(O.avatar,r.props.className)}));let D=null;return u&&A.isValidElement(u)&&(D=A.cloneElement(u,{className:(0,_n.A)(O.icon,u.props.className)})),(0,m.jsxs)(a$,(0,h.A)({as:k,className:(0,_n.A)(O.root,i),disabled:!(!T||!c)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&c$(e)&&e.preventDefault(),v&&v(e)},onKeyUp:e=>{e.currentTarget===e.target&&(g&&c$(e)?g(e):"Escape"===e.key&&E.current&&E.current.blur()),b&&b(e)},ref:M,tabIndex:_&&c?-1:w,ownerState:B},I,S,{children:[L||D,(0,m.jsx)(l$,{className:(0,_n.A)(O.label),ownerState:B,children:d}),R]}))})),d$=u$,A$=(0,ea.A)((0,m.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function h$(e){return(0,Fn.Ay)("MuiAutocomplete",e)}const f$=(0,Tn.A)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var p$,g$;const m$=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],v$=["ref"],b$=zo(),y$=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:s,size:a}=n;return[{["& .".concat(f$.tag)]:t.tag},{["& .".concat(f$.tag)]:t["tagSize".concat((0,Dn.A)(a))]},{["& .".concat(f$.inputRoot)]:t.inputRoot},{["& .".concat(f$.input)]:t.input},{["& .".concat(f$.input)]:s&&t.inputFocused},t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})({["&.".concat(f$.focused," .").concat(f$.clearIndicator)]:{visibility:"visible"},"@media (pointer: fine)":{["&:hover .".concat(f$.clearIndicator)]:{visibility:"visible"}},["& .".concat(f$.tag)]:{margin:3,maxWidth:"calc(100% - 6px)"},["& .".concat(f$.inputRoot)]:{flexWrap:"wrap",[".".concat(f$.hasPopupIcon,"&, .").concat(f$.hasClearIcon,"&")]:{paddingRight:30},[".".concat(f$.hasPopupIcon,".").concat(f$.hasClearIcon,"&")]:{paddingRight:56},["& .".concat(f$.input)]:{width:0,minWidth:30}},["& .".concat(gd.root)]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},["& .".concat(gd.root,".").concat(sd.sizeSmall)]:{["& .".concat(gd.input)]:{padding:"2px 4px 3px 0"}},["& .".concat(Rd.root)]:{padding:9,[".".concat(f$.hasPopupIcon,"&, .").concat(f$.hasClearIcon,"&")]:{paddingRight:39},[".".concat(f$.hasPopupIcon,".").concat(f$.hasClearIcon,"&")]:{paddingRight:65},["& .".concat(f$.input)]:{padding:"7.5px 4px 7.5px 5px"},["& .".concat(f$.endAdornment)]:{right:9}},["& .".concat(Rd.root,".").concat(sd.sizeSmall)]:{paddingTop:6,paddingBottom:6,paddingLeft:6,["& .".concat(f$.input)]:{padding:"2.5px 4px 2.5px 8px"}},["& .".concat(_d.root)]:{paddingTop:19,paddingLeft:8,[".".concat(f$.hasPopupIcon,"&, .").concat(f$.hasClearIcon,"&")]:{paddingRight:39},[".".concat(f$.hasPopupIcon,".").concat(f$.hasClearIcon,"&")]:{paddingRight:65},["& .".concat(_d.input)]:{padding:"7px 4px"},["& .".concat(f$.endAdornment)]:{right:9}},["& .".concat(_d.root,".").concat(sd.sizeSmall)]:{paddingBottom:1,["& .".concat(_d.input)]:{padding:"2.5px 4px"}},["& .".concat(sd.hiddenLabel)]:{paddingTop:8},["& .".concat(_d.root,".").concat(sd.hiddenLabel)]:{paddingTop:0,paddingBottom:0,["& .".concat(f$.input)]:{paddingTop:16,paddingBottom:17}},["& .".concat(_d.root,".").concat(sd.hiddenLabel,".").concat(sd.sizeSmall)]:{["& .".concat(f$.input)]:{paddingTop:8,paddingBottom:9}},["& .".concat(f$.input)]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{["& .".concat(f$.tag)]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{["& .".concat(f$.input)]:{opacity:1}}}]}),x$=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),w$=(0,Ln.Ay)(Vc,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),_$=(0,Ln.Ay)(Vc,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,h.A)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),S$=(0,Ln.Ay)(Sc,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(f$.option)]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}})),C$=(0,Ln.Ay)(qi,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})((e=>{let{theme:t}=e;return(0,h.A)({},t.typography.body1,{overflow:"auto"})})),E$=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),M$=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),P$=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})((e=>{let{theme:t}=e;return{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",["& .".concat(f$.option)]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},["&.".concat(f$.focused)]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["&.".concat(f$.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Jn.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(f$.focused)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Jn.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},["&.".concat(f$.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Jn.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}})),T$=(0,Ln.Ay)(n$,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}})),k$=(0,Ln.Ay)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,["& .".concat(f$.option)]:{paddingLeft:24}}),B$=A.forwardRef((function(e,t){var n,r,i,o;const s=b$({props:e,name:"MuiAutocomplete"}),{autoComplete:a=!1,autoHighlight:l=!1,autoSelect:c=!1,blurOnSelect:u=!1,ChipProps:d,className:f,clearIcon:p=p$||(p$=(0,m.jsx)(A$,{fontSize:"small"})),clearOnBlur:g=!s.freeSolo,clearOnEscape:v=!1,clearText:b="Clear",closeText:y="Close",componentsProps:x={},defaultValue:w=(s.multiple?[]:null),disableClearable:_=!1,disableCloseOnSelect:S=!1,disabled:E=!1,disabledItemsFocusable:M=!1,disableListWrap:P=!1,disablePortal:T=!1,filterSelectedOptions:k=!1,forcePopupIcon:B="auto",freeSolo:O=!1,fullWidth:I=!1,getLimitTagsText:R=(e=>"+".concat(e)),getOptionLabel:L,groupBy:D,handleHomeEndKeys:F=!s.freeSolo,includeInputInList:N=!1,limitTags:z=-1,ListboxComponent:j="ul",ListboxProps:U,loading:G=!1,loadingText:V="Loading\u2026",multiple:H=!1,noOptionsText:W="No options",openOnFocus:Q=!1,openText:J="Open",PaperComponent:K=qi,PopperComponent:X=Sc,popupIcon:Y=g$||(g$=(0,m.jsx)(ch,{})),readOnly:q=!1,renderGroup:Z,renderInput:$,renderOption:ee,renderTags:te,selectOnFocus:ne=!s.freeSolo,size:re="medium",slotProps:ie={}}=s,oe=(0,C.A)(s,m$),{getRootProps:se,getInputProps:ae,getInputLabelProps:le,getPopupIndicatorProps:ce,getClearProps:ue,getTagProps:de,getListboxProps:Ae,getOptionProps:he,value:fe,dirty:pe,expanded:ge,id:me,popupOpen:ve,focused:be,focusedTag:ye,anchorEl:xe,setAnchorEl:we,inputValue:_e,groupedOptions:Se}=qZ((0,h.A)({},s,{componentName:"Autocomplete"})),Ce=!_&&!E&&pe&&!q,Ee=(!O||!0===B)&&!1!==B,{onMouseDown:Me}=ae(),{ref:Pe}=null!=U?U:{},Te=Ae(),{ref:ke}=Te,Be=(0,C.A)(Te,v$),Oe=(0,Lr.A)(ke,Pe),Ie=L||(e=>{var t;return null!=(t=e.label)?t:e}),Re=(0,h.A)({},s,{disablePortal:T,expanded:ge,focused:be,fullWidth:I,getOptionLabel:Ie,hasClearIcon:Ce,hasPopupIcon:Ee,inputFocused:-1===ye,popupOpen:ve,size:re}),Le=(e=>{const{classes:t,disablePortal:n,expanded:r,focused:i,fullWidth:o,hasClearIcon:s,hasPopupIcon:a,inputFocused:l,popupOpen:c,size:u}=e,d={root:["root",r&&"expanded",i&&"focused",o&&"fullWidth",s&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag","tagSize".concat((0,Dn.A)(u))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,Rn.A)(d,h$,t)})(Re);let De;if(H&&fe.length>0){const e=e=>(0,h.A)({className:Le.tag,disabled:E},de(e));De=te?te(fe,e,Re):fe.map(((t,n)=>(0,m.jsx)(d$,(0,h.A)({label:Ie(t),size:re},e({index:n}),d))))}if(z>-1&&Array.isArray(De)){const e=De.length-z;!be&&e>0&&(De=De.splice(0,z),De.push((0,m.jsx)("span",{className:Le.tag,children:R(e)},De.length)))}const Fe=Z||(e=>(0,m.jsxs)("li",{children:[(0,m.jsx)(T$,{className:Le.groupLabel,ownerState:Re,component:"div",children:e.group}),(0,m.jsx)(k$,{className:Le.groupUl,ownerState:Re,children:e.children})]},e.key)),Ne=ee||((e,t)=>(0,A.createElement)("li",(0,h.A)({},e,{key:e.key}),Ie(t))),ze=(e,t)=>{const n=he({option:e,index:t});return Ne((0,h.A)({},n,{className:Le.option}),e,{selected:n["aria-selected"],index:t,inputValue:_e},Re)},je=null!=(n=ie.clearIndicator)?n:x.clearIndicator,Ue=null!=(r=ie.paper)?r:x.paper,Ge=null!=(i=ie.popper)?i:x.popper,Ve=null!=(o=ie.popupIndicator)?o:x.popupIndicator,He=e=>(0,m.jsx)(S$,(0,h.A)({as:X,disablePortal:T,style:{width:xe?xe.clientWidth:null},ownerState:Re,role:"presentation",anchorEl:xe,open:ve},Ge,{className:(0,_n.A)(Le.popper,null==Ge?void 0:Ge.className),children:(0,m.jsx)(C$,(0,h.A)({ownerState:Re,as:K},Ue,{className:(0,_n.A)(Le.paper,null==Ue?void 0:Ue.className),children:e}))}));let We=null;return Se.length>0?We=He((0,m.jsx)(P$,(0,h.A)({as:j,className:Le.listbox,ownerState:Re},Be,U,{ref:Oe,children:Se.map(((e,t)=>D?Fe({key:e.key,group:e.group,children:e.options.map(((t,n)=>ze(t,e.index+n)))}):ze(e,t)))}))):G&&0===Se.length?We=He((0,m.jsx)(E$,{className:Le.loading,ownerState:Re,children:V})):0!==Se.length||O||G||(We=He((0,m.jsx)(M$,{className:Le.noOptions,ownerState:Re,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:W}))),(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(y$,(0,h.A)({ref:t,className:(0,_n.A)(Le.root,f),ownerState:Re},se(oe),{children:$({id:me,disabled:E,fullWidth:!0,size:"small"===re?"small":void 0,InputLabelProps:le(),InputProps:(0,h.A)({ref:we,className:Le.inputRoot,startAdornment:De,onClick:e=>{e.target===e.currentTarget&&Me(e)}},(Ce||Ee)&&{endAdornment:(0,m.jsxs)(x$,{className:Le.endAdornment,ownerState:Re,children:[Ce?(0,m.jsx)(w$,(0,h.A)({},ue(),{"aria-label":b,title:b,ownerState:Re},je,{className:(0,_n.A)(Le.clearIndicator,null==je?void 0:je.className),children:p})):null,Ee?(0,m.jsx)(_$,(0,h.A)({},ce(),{disabled:E,"aria-label":ve?y:J,title:ve?y:J,ownerState:Re},Ve,{className:(0,_n.A)(Le.popupIndicator,null==Ve?void 0:Ve.className),children:Y})):null]})}),inputProps:(0,h.A)({className:Le.input,disabled:E,readOnly:q},ae())})})),xe?We:null]})})),O$=B$;function I$(e){return(0,Fn.Ay)("MuiLink",e)}const R$=(0,Tn.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var L$=n(7162);const D$={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},F$=e=>{let{theme:t,ownerState:n}=e;const r=(e=>D$[e]||e)(n.color),i=(0,L$.Yn)(t,"palette.".concat(r),!1)||n.color,o=(0,L$.Yn)(t,"palette.".concat(r,"Channel"));return"vars"in t&&o?"rgba(".concat(o," / 0.4)"):(0,Jn.X4)(i,.4)},N$=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],z$=(0,Ln.Ay)(Hn,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["underline".concat((0,Dn.A)(n.underline))],"button"===n.component&&t.button]}})((e=>{let{theme:t,ownerState:n}=e;return(0,h.A)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,h.A)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:F$({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(R$.focusVisible)]:{outline:"auto"}})})),j$=A.forwardRef((function(e,t){const n=(0,f.A)({props:e,name:"MuiLink"}),{className:r,color:i="primary",component:o="a",onBlur:s,onFocus:a,TypographyClasses:l,underline:c="always",variant:u="inherit",sx:d}=n,p=(0,C.A)(n,N$),{isFocusVisibleRef:g,onBlur:v,onFocus:b,ref:y}=(0,Fr.A)(),[x,w]=A.useState(!1),_=(0,Lr.A)(t,y),S=(0,h.A)({},n,{color:i,component:o,focusVisible:x,underline:c,variant:u}),E=(e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,o={root:["root","underline".concat((0,Dn.A)(i)),"button"===n&&"button",r&&"focusVisible"]};return(0,Rn.A)(o,I$,t)})(S);return(0,m.jsx)(z$,(0,h.A)({color:i,className:(0,_n.A)(E.root,r),classes:l,component:o,onBlur:e=>{v(e),!1===g.current&&w(!1),s&&s(e)},onFocus:e=>{b(e),!0===g.current&&w(!0),a&&a(e)},ref:_,ownerState:S,variant:u,sx:[...Object.keys(D$).includes(i)?[]:[{color:i}],...Array.isArray(d)?d:[d]]},p))})),U$=j$;function G$(e){const t=e.clicked,n=mn.csjsURL+"/?cityscope=",r=mn.csjsURL+"_projection_mapping/?cityscope=",[i,o]=(0,A.useState)(!1);(0,A.useEffect)((()=>{o(!0)}),[t]);return(0,m.jsx)(Fu,{open:i,onClose:()=>{o(!1)},"aria-labelledby":"table-select-dialog-title","aria-describedby":"table-select-dialog-description",sx:{background:"rgba(0, 0, 0, 0.5)","& .MuiPaper-root":{background:"rgba(0, 0, 0, .8)",outline:"1px solid white"},"& .MuiBackdrop-root":{backgroundColor:"transparent"}},children:(0,m.jsxs)(Qu,{children:[(0,m.jsx)(Hn,{id:"table-select-dialog-title",variant:"h2",children:t.tableName}),(0,m.jsxs)(Hn,{children:[(0,m.jsx)(U$,{href:n+t.tableName.toLowerCase(),children:"Go to project"}),", ",(0,m.jsx)(U$,{href:r+t.tableName.toLowerCase(),children:"project this table to TUI"})," ","or"," ",(0,m.jsx)(U$,{target:"blank",href:t.tableURL,children:"view raw data on cityIO."})]})]})})}function V$(e){const t=e.tablesList,[n,r]=(0,A.useState)(null),i={options:t,getOptionLabel:e=>e.tableName};return(0,m.jsxs)(m.Fragment,{children:[n&&(0,m.jsx)(G$,{clicked:n}),(0,m.jsx)(O$,{...i,disablePortal:!0,id:"combo-box-demo",options:t,sx:{width:300},renderInput:e=>(0,m.jsx)(_h,{...e,label:"Search CityScope Project..."}),onChange:(e,t)=>{r(t)}})]})}var H$=n(6191);class W$ extends tC{applyConstraints(e){const{maxZoom:t,minZoom:n,zoom:r}=e;e.zoom=Em(r,n,t);const{longitude:i,latitude:o}=e;return(i<-180||i>180)&&(e.longitude=function(e,t){const n=e%t;return n<0?t+n:n}(i+180,360)-180),e.latitude=Em(o,-89,89),e}}class Q$ extends $S{constructor(){super(...arguments),pt(this,"ControllerState",W$),pt(this,"transition",{transitionDuration:300,transitionInterpolator:new VS(["longitude","latitude","zoom"])}),pt(this,"dragMode","pan")}setProps(e){super.setProps(e),this.dragRotate=!1,this.touchRotate=!1}}class J$ extends BS{get ViewportType(){return mI}get ControllerType(){return Q$}}pt(J$,"displayName","GlobeView");const K$={bearing:0,pitch:0,position:[0,0,0]},X$={speed:1.2,curve:1.414};class Y$ extends jS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),pt(this,"opts",void 0),this.opts={...X$,...e}}interpolateProps(e,t,n){const r=function(e,t,n,r){const{startZoom:i,startCenterXY:o,uDelta:s,w0:a,u1:l,S:c,rho:u,rho2:d,r0:A}=ub(e,t,r);if(l<ab){const r={};for(const i of lb){const o=e[i],s=t[i];r[i]=Rv(o,s,n)}return r}const h=n*c,f=Math.cosh(A)/Math.cosh(A+u*h),p=a*((Math.cosh(A)*Math.tanh(A+u*h)-Math.sinh(A))/d)/l,g=i+Jv(1/f),m=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}([],s,p);fv(m,m,o);const v=Xv(m);return{longitude:v[0],latitude:v[1],zoom:g}}(e,t,n,this.opts);for(const i in K$)r[i]=Mm(e[i]||K$[i],t[i]||K$[i],n);return r}getDuration(e,t){let{transitionDuration:n}=t;return"auto"===n&&(n=function(e,t,n){const r={...cb,...n},{screenSpeed:i,speed:o,maxDuration:s}=r,{S:a,rho:l}=ub(e,t,r),c=1e3*a;let u;return u=Number.isFinite(i)?c/(i/l):c/o,Number.isFinite(s)&&u>s?0:u}(e,t,this.opts)),n}}const q$=n.p+"static/media/legoio.148c5ab6b7715f0e6c55.png";function Z$(e){const[t,n]=(0,A.useState)([]),[r,i]=(0,A.useState)(),[o,s]=(0,A.useState)(),a={longitude:-71.060929,latitude:42.3545259,zoom:1,pitch:0,bearing:0,zHeight:2e6},[l,c]=(0,A.useState)(a),[u,d]=(0,A.useState)(l),[h,f]=(0,A.useState)(null);let p=!1;const g=()=>{let e=Math.floor(Math.random()*t.length);d({longitude:t[e].coord.to[0],latitude:t[e].coord.to[1],zoom:3,pitch:0,bearing:0,transitionDuration:8e3,transitionInterpolator:new Y$,transitionEasing:e=>e<.5?2*e*e:(4-2*e)*e-1})};(0,A.useEffect)((()=>{if(0===t.length)return;g();let e=setInterval((()=>{g()}),1e4);return f(e),()=>clearInterval(e)}),[t]),(0,A.useEffect)((()=>{r&&clearInterval(h)}),[r]),(0,A.useEffect)((()=>{s(a.zoom),document.getElementById("deckgl-wrapper").addEventListener("contextmenu",(e=>e.preventDefault())),document.getElementById("deckgl-wrapper").style.backgroundColor="black"}),[a.zoom]),(0,A.useEffect)((()=>{let t=[];e.cityIOdata.forEach(((e,n)=>{e.tableHeader.cs_project&&t.push({tableURL:e.tableURL,tableName:e.tableName,index:n,tableHeader:e.tableHeader,coord:{from:[e.tableHeader.longitude,e.tableHeader.latitude],to:[e.tableHeader.longitude+n/10,e.tableHeader.latitude+n/10,a.zHeight]}})})),n(t)}),[e,a.zHeight]);const v=[new pL({data:"https://api.mapbox.com/styles/v1/relnox/cjlu6w5sc1dy12rmn4kl2zljn/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg&attribution=false&logo=false&fresh=true",minZoom:0,maxZoom:19,tileSize:96,renderSubLayers:e=>{const{bbox:{west:t,south:n,east:r,north:i}}=e.tile;return new wL(e,{data:null,image:e.data,_imageCoordinateSystem:db.CARTESIAN,bounds:[t,n,r,i]})}}),new BL({id:"LineLayer",data:t,pickable:!0,getWidth:o<2?.3:.1,getSourcePosition:e=>e.coord.from,getTargetPosition:e=>e.coord.to,getColor:[255,255,255,100]}),new _O({id:"text-layer",data:t,pickable:!0,getPosition:e=>e.coord.to,getText:e=>e.tableName,getColor:[255,255,255],getSize:o<2?0:5,getAngle:0,getPixelOffset:[10,5],getTextAnchor:"start",getAlignmentBaseline:"center"}),new KB({id:"icon-layer",data:t,pickable:!0,iconAtlas:q$,onClick:e=>{d({longitude:e.object.coord.to[0],latitude:e.object.coord.to[1],zoom:3,pitch:0,bearing:0,transitionDuration:1e3,transitionInterpolator:new Y$}),i(e)},iconMapping:{marker:{x:0,y:0,width:768,height:768,mask:!1}},getIcon:e=>"marker",sizeScale:1,getSize:o<5?20:5,getPosition:e=>[e.coord.to[0],e.coord.to[1],a.zHeight]})];return(0,m.jsxs)("div",{style:{backgroundColor:"black"},width:"100%",height:"100%",children:[r&&r.object&&(0,m.jsx)(G$,{clicked:r.object,onClose:()=>i(null)}),(0,m.jsx)(oT,{views:new J$,onHover:e=>{let{object:t}=e;return p=Boolean(t)},getCursor:e=>{let{isDragging:t}=e;return t?"grabbing":p?"crosshair":"grab"},layers:v,controller:!0,initialViewState:u,onViewportChange:c,onViewStateChange:e=>s(e.viewState.zoom)})]})}function $$(){const[e,t]=(0,A.useState)([]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Z$,{cityIOdata:e}),(0,m.jsxs)(In,{sx:{width:"100%",padding:10},children:[(0,m.jsx)(QZ,{getTablesList:t}),(0,m.jsxs)(Ir,{container:!0,spacing:5,justifyContent:"center",children:[(0,m.jsx)(Ir,{item:!0,xs:12,lg:4,zIndex:10,children:(0,m.jsx)(Hn,{variant:"h1",children:"MIT CityScope"})}),(0,m.jsx)(Ir,{item:!0,xs:12,lg:4,zIndex:10,children:(0,m.jsxs)(Hn,{variant:"h4",children:["MIT CityScope is an open-source urban modeling and simulation platform project developed by the City Science group at the MIT Media Lab","  ",(0,m.jsx)(U$,{href:"https://github.com/CityScope",target:"blank",children:(0,m.jsx)(H$.A,{fontSize:"small"})})]})}),(0,m.jsx)(Ir,{item:!0,xs:12,lg:4,zIndex:10,children:(0,m.jsx)(V$,{tablesList:e})})]})]})]})}const e0=()=>{const e=ue(),[t,n]=(0,A.useState)();(0,A.useEffect)((()=>{document.title=t?"CityScopeJS | ".concat(t):"CityScopeJS"}),[t]);const[r,i]=(0,A.useState)();return(0,A.useEffect)((()=>{const t=window.location,r=hn.parse(t.search);Object.keys(r).includes("cityscope")?((t,r)=>{const o=r&&r.toLowerCase();o&&""!==o?(n(o),e(dn(o)),i(t)):i("cityio")})("cityscopejs",r.cityscope):i("cityio")}),[]),(0,m.jsxs)(j,{theme:gn,children:[(0,m.jsx)(S,{}),(0,m.jsxs)(m.Fragment,{children:["cityscopejs"===r&&(0,m.jsx)(eq,{}),"cityio"===r&&(0,m.jsx)($$,{})]})]})},t0=St({cityIOdataState:An,menuState:hs});var n0=n(4391);const r0=function(e){var t,n=Xt(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,s=r.middleware,a=void 0===s?n():s,l=r.devTools,c=void 0===l||l,u=r.preloadedState,d=void 0===u?void 0:u,A=r.enhancers,h=void 0===A?void 0:A;if("function"===typeof o)t=o;else{if(!Ht(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=St(o)}var f=a;"function"===typeof f&&(f=f(n));var p=Et.apply(void 0,f),g=Ct;c&&(g=Vt(jt({trace:!1},"object"===typeof c&&c)));var m=new Jt(p),v=m;return Array.isArray(h)?v=Ot([p],h):"function"===typeof h&&(v=h(m)),_t(t,d,g.apply(void 0,v))}({reducer:t0}),i0=document.getElementById("root");(0,n0.H)(i0).render((0,m.jsx)(A.StrictMode,{children:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(se,{store:r0,children:(0,m.jsx)(e0,{})})})}))})()})();
//# sourceMappingURL=main.ce6b9974.js.map