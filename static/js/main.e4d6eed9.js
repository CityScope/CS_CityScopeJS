/*! For license information please see main.e4d6eed9.js.LICENSE.txt */
(()=>{var t={5513:(t,e,n)=>{"use strict";n.d(e,{A:()=>it});var r=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function c(t,e){return t.indexOf(e)}function u(t,e){return 0|t.charCodeAt(e)}function d(t,e,n){return t.slice(e,n)}function h(t){return t.length}function f(t){return t.length}function p(t,e){return e.push(t),t}var g=1,m=1,v=0,b=0,y=0,x="";function A(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:g,column:m,length:s,return:""}}function _(t,e){return s(A("",null,null,"",null,null,0),t,{length:-t.length},e)}function w(){return y=b>0?u(x,--b):0,m--,10===y&&(m=1,g--),y}function S(){return y=b<v?u(x,b++):0,m++,10===y&&(m=1,g++),y}function C(){return u(x,b)}function E(){return b}function P(t,e){return d(x,t,e)}function M(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T(t){return g=m=1,v=h(x=t),b=0,[]}function O(t){return x="",t}function k(t){return a(P(b-1,B(91===t?t+2:40===t?t+1:t)))}function R(t){for(;(y=C())&&y<33;)S();return M(t)>2||M(y)>3?"":" "}function I(t,e){for(;--e&&S()&&!(y<48||y>102||y>57&&y<65||y>70&&y<97););return P(t,E()+(e<6&&32==C()&&32==S()))}function B(t){for(;S();)switch(y){case t:return b;case 34:case 39:34!==t&&39!==t&&B(y);break;case 40:41===t&&B(t);break;case 92:S()}return b}function L(t,e){for(;S()&&t+y!==57&&(t+y!==84||47!==C()););return"/*"+P(e,b-1)+"*"+o(47===t?t:S())}function D(t){for(;!M(C());)S();return P(t,b)}var F="-ms-",N="-moz-",j="-webkit-",z="comm",U="rule",V="decl",G="@keyframes";function W(t,e){for(var n="",r=f(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function H(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case V:return t.return=t.return||t.value;case z:return"";case G:return t.return=t.value+"{"+W(t.children,r)+"}";case U:t.value=t.props.join(",")}return h(n=W(t.children,r))?t.return=t.value+"{"+n+"}":""}function J(t){return O(K("",null,null,null,[""],t=T(t),0,[0],t))}function K(t,e,n,r,i,s,a,d,f){for(var g=0,m=0,v=a,b=0,y=0,x=0,A=1,_=1,P=1,M=0,T="",O=i,B=s,F=r,N=T;_;)switch(x=M,M=S()){case 40:if(108!=x&&58==u(N,v-1)){-1!=c(N+=l(k(M),"&","&\f"),"&\f")&&(P=-1);break}case 34:case 39:case 91:N+=k(M);break;case 9:case 10:case 13:case 32:N+=R(x);break;case 92:N+=I(E()-1,7);continue;case 47:switch(C()){case 42:case 47:p(q(L(S(),E()),e,n),f);break;default:N+="/"}break;case 123*A:d[g++]=h(N)*P;case 125*A:case 59:case 0:switch(M){case 0:case 125:_=0;case 59+m:-1==P&&(N=l(N,/\f/g,"")),y>0&&h(N)-v&&p(y>32?Y(N+";",r,n,v-1):Y(l(N," ","")+";",r,n,v-2),f);break;case 59:N+=";";default:if(p(F=X(N,e,n,g,m,i,d,T,O=[],B=[],v),s),123===M)if(0===m)K(N,e,F,F,O,s,v,d,B);else switch(99===b&&110===u(N,3)?100:b){case 100:case 108:case 109:case 115:K(t,F,F,r&&p(X(t,F,F,0,0,i,d,T,i,O=[],v),B),i,B,v,d,r?O:B);break;default:K(N,F,F,F,[""],B,0,d,B)}}g=m=y=0,A=P=1,T=N="",v=a;break;case 58:v=1+h(N),y=x;default:if(A<1)if(123==M)--A;else if(125==M&&0==A++&&125==w())continue;switch(N+=o(M),M*A){case 38:P=m>0?1:(N+="\f",-1);break;case 44:d[g++]=(h(N)-1)*P,P=1;break;case 64:45===C()&&(N+=k(S())),b=C(),m=v=h(T=N+=D(E())),M++;break;case 45:45===x&&2==h(N)&&(A=0)}}return s}function X(t,e,n,r,o,s,c,u,h,p,g){for(var m=o-1,v=0===o?s:[""],b=f(v),y=0,x=0,_=0;y<r;++y)for(var w=0,S=d(t,m+1,m=i(x=c[y])),C=t;w<b;++w)(C=a(x>0?v[w]+" "+S:l(S,/&\f/g,v[w])))&&(h[_++]=C);return A(t,e,n,0===o?U:u,h,p,g)}function q(t,e,n){return A(t,e,n,z,o(y),d(t,2,-2),0)}function Y(t,e,n,r){return A(t,e,n,V,d(t,0,r),d(t,r+1,-1),r)}var Q=function(t,e,n){for(var r=0,i=0;r=i,i=C(),38===r&&12===i&&(e[n]=1),!M(i);)S();return P(t,b)},Z=function(t,e){return O(function(t,e){var n=-1,r=44;do{switch(M(r)){case 0:38===r&&12===C()&&(e[n]=1),t[n]+=Q(b-1,e,n);break;case 2:t[n]+=k(r);break;case 4:if(44===r){t[++n]=58===C()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=o(r)}}while(r=S());return t}(T(t),e))},$=new WeakMap,tt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||$.get(n))&&!r){$.set(t,!0);for(var i=[],o=Z(e,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)t.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},et=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function nt(t,e){switch(function(t,e){return 45^u(t,0)?(((e<<2^u(t,0))<<2^u(t,1))<<2^u(t,2))<<2^u(t,3):0}(t,e)){case 5103:return j+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return j+t+N+t+F+t+t;case 6828:case 4268:return j+t+F+t+t;case 6165:return j+t+F+"flex-"+t+t;case 5187:return j+t+l(t,/(\w+).+(:[^]+)/,j+"box-$1$2"+F+"flex-$1$2")+t;case 5443:return j+t+F+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return j+t+F+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return j+t+F+l(t,"shrink","negative")+t;case 5292:return j+t+F+l(t,"basis","preferred-size")+t;case 6060:return j+"box-"+l(t,"-grow","")+j+t+F+l(t,"grow","positive")+t;case 4554:return j+l(t,/([^-])(transform)/g,"$1"+j+"$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,j+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,j+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(t)-1-e>6)switch(u(t,e+1)){case 109:if(45!==u(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1"+j+"$2-$3$1"+N+(108==u(t,e+3)?"$3":"$2-$3"))+t;case 115:return~c(t,"stretch")?nt(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==u(t,e+1))break;case 6444:switch(u(t,h(t)-3-(~c(t,"!important")&&10))){case 107:return l(t,":",":"+j)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===u(t,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+F+"$2box$3")+t}break;case 5936:switch(u(t,e+11)){case 114:return j+t+F+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return j+t+F+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return j+t+F+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return j+t+F+t+t}return t}var rt=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case V:t.return=nt(t.value,t.length);break;case G:return W([_(t,{value:l(t.value,"@","@"+j)})],r);case U:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([_(t,{props:[l(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([_(t,{props:[l(e,/:(plac\w+)/,":"+j+"input-$1")]}),_(t,{props:[l(e,/:(plac\w+)/,":-moz-$1")]}),_(t,{props:[l(e,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],it=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||rt;var o,s,a={},l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;l.push(t)}));var c,u,d=[H,(u=function(t){c.insert(t)},function(t){t.root||(t=t.return)&&u(t)})],h=function(t){var e=f(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}([tt,et].concat(i,d));s=function(t,e,n,r){c=n,W(J(t?t+"{"+e.styles+"}":e.styles),h),r&&(p.inserted[e.name]=!0)};var p={key:e,sheet:new r({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:s};return p.sheet.hydrate(l),p}},918:(t,e,n)=>{"use strict";function r(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}n.d(e,{A:()=>r})},5756:(t,e,n)=>{"use strict";n.d(e,{C:()=>a,T:()=>c,i:()=>o,w:()=>l});var r=n(5043),i=n(5513),o=(n(2830),n(9436),!0),s=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=s.Provider,l=function(t){return(0,r.forwardRef)((function(e,n){var i=(0,r.useContext)(s);return t(e,i,n)}))};o||(l=function(t){return function(e){var n=(0,r.useContext)(s);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(s.Provider,{value:n},t(e,n))):t(e,n)}});var c=r.createContext({})},3290:(t,e,n)=>{"use strict";n.d(e,{AH:()=>c,i7:()=>u,mL:()=>l});var r=n(5756),i=n(5043),o=n(1722),s=n(9436),a=n(2830),l=(n(5513),n(219),(0,r.w)((function(t,e){var n=t.styles,l=(0,a.J)([n],void 0,i.useContext(r.T));if(!r.i){for(var c,u=l.name,d=l.styles,h=l.next;void 0!==h;)u+=" "+h.name,d+=h.styles,h=h.next;var f=!0===e.compat,p=e.insert("",{name:u,styles:d},e.sheet,f);return f?null:i.createElement("style",((c={})["data-emotion"]=e.key+"-global "+u,c.dangerouslySetInnerHTML={__html:p},c.nonce=e.sheet.nonce,c))}var g=i.useRef();return(0,s.i)((function(){var t=e.key+"-global",n=new e.sheet.constructor({key:t,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+t+" "+l.name+'"]');return e.sheet.tags.length&&(n.before=e.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",t),n.hydrate([i])),g.current=[n,r],function(){n.flush()}}),[e]),(0,s.i)((function(){var t=g.current,n=t[0];if(t[1])t[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(e,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}e.insert("",l,n,!1)}}),[e,l.name]),null})));function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.J)(e)}var u=function(){var t=c.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2830:(t,e,n)=>{"use strict";n.d(e,{J:()=>p});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(t){return 45===t.charCodeAt(1)},l=function(t){return null!=t&&"boolean"!==typeof t},c=(0,i.A)((function(t){return a(t)?t:t.replace(o,"-$&").toLowerCase()})),u=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(s,(function(t,e,n){return h={name:e,styles:n,next:h},e}))}return 1===r[t]||a(t)||"number"!==typeof e||0===e?e:e+"px"};function d(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return h={name:n.name,styles:n.styles,next:h},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)h={name:r.name,styles:r.styles,next:h},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(t,e,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=e&&void 0!==e[s]?r+=o+"{"+e[s]+"}":l(s)&&(r+=c(o)+":"+u(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=e&&void 0!==e[s[0]]){var a=d(t,e,s);switch(o){case"animation":case"animationName":r+=c(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var h=0;h<s.length;h++)l(s[h])&&(r+=c(o)+":"+u(o,s[h])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=h,o=n(t);return h=i,d(t,e,o)}}if(null==e)return n;var s=e[n];return void 0!==s?s:n}var h,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var p=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";h=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=d(n,e,o)):i+=o[0];for(var s=1;s<t.length;s++)i+=d(n,e,t[s]),r&&(i+=o[s]);f.lastIndex=0;for(var a,l="";null!==(a=f.exec(i));)l+="-"+a[1];var c=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:h}}},9436:(t,e,n)=>{"use strict";var r;n.d(e,{i:()=>a,s:()=>s});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(t){return t()},a=o||i.useLayoutEffect},1722:(t,e,n)=>{"use strict";n.d(e,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}var i=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},o=function(t,e,n){i(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var o=e;do{t.insert(e===o?"."+r:"",o,t.sheet,!0),o=o.next}while(void 0!==o)}}},2954:(t,e,n)=>{"use strict";var r=n(4994);e.A=void 0;var i=r(n(39)),o=n(579);e.A=(0,i.default)((0,o.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload")},3471:(t,e,n)=>{"use strict";var r=n(4994);e.A=void 0;var i=r(n(39)),o=n(579);e.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},6577:(t,e,n)=>{"use strict";var r=n(4994);e.A=void 0;var i=r(n(39)),o=n(579);e.A=(0,i.default)((0,o.jsx)("path",{d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3zm2-8h6v8H5zm5-6H6L5 5H2v2h12V5h-3z"}),"DeleteSweepOutlined")},5540:(t,e,n)=>{"use strict";var r=n(4994);e.A=void 0;var i=r(n(39)),o=n(579);e.A=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},7948:(t,e,n)=>{"use strict";var r=n(4994);e.A=void 0;var i=r(n(39)),o=n(579);e.A=(0,i.default)((0,o.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline")},6191:(t,e,n)=>{"use strict";var r=n(4994);e.A=void 0;!function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=s(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}r.default=t,n&&n.set(t,r)}(n(5043));var i=r(n(39)),o=n(579);function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(s=function(t){return t?n:e})(t)}e.A=(0,i.default)((0,o.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub")},7058:(t,e,n)=>{"use strict";var r=n(4994);e.A=void 0;var i=r(n(39)),o=n(579);e.A=(0,i.default)((0,o.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-6.99 15c-.7 0-1.26-.56-1.26-1.26 0-.71.56-1.25 1.26-1.25.71 0 1.25.54 1.25 1.25-.01.69-.54 1.26-1.25 1.26m3.01-7.4c-.76 1.11-1.48 1.46-1.87 2.17-.16.29-.22.48-.22 1.41h-1.82c0-.49-.08-1.29.31-1.98.49-.87 1.42-1.39 1.96-2.16.57-.81.25-2.33-1.37-2.33-1.06 0-1.58.8-1.8 1.48l-1.65-.7C9.01 7.15 10.22 6 11.99 6c1.48 0 2.49.67 3.01 1.52.44.72.7 2.07.02 3.08"}),"HelpCenter")},4681:(t,e,n)=>{"use strict";var r=n(4994);e.A=void 0;var i=r(n(39)),o=n(579);e.A=(0,i.default)((0,o.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7.17L18 8.83zm-9.55-9.43L7.28 9.4V13h3.6l-1.44-1.44c.52-1.01 1.58-1.71 2.79-1.71 1.74 0 3.15 1.41 3.15 3.15s-1.41 3.15-3.15 3.15c-1.07 0-2.02-.54-2.58-1.35H8.1c.69 1.58 2.28 2.7 4.12 2.7 2.48 0 4.5-2.02 4.5-4.5s-2.02-4.5-4.5-4.5c-1.59 0-2.97.83-3.77 2.07"}),"RestorePageOutlined")},39:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(1512)},7344:(t,e,n)=>{"use strict";n.d(e,{A:()=>B});var r=n(8168),i=n(8587),o=n(6632),s=n(3216),a=n(7758),l=n(8812),c=n(8280);var u=n(7266);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},f={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},g={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},b={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},y=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},A={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _(t,e,n,r){const i=r.light||r,o=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,u.a)(t.main,i):"dark"===e&&(t.dark=(0,u.e$)(t.main,o)))}function w(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:a=.2}=t,l=(0,i.A)(t,y),c=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(e),w=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[200],light:f[50],dark:f[400]}:{main:f[500],light:f[300],dark:f[700]}}(e),S=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(e),C=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(e),E=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:b[800],light:b[500],dark:b[900]}}(e),P=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:"#ed6c02",light:g[500],dark:g[900]}}(e);function M(t){return(0,u.eM)(t,A.text.primary)>=n?A.text.primary:x.text.primary}const T=t=>{let{color:e,name:n,mainShade:i=500,lightShade:s=300,darkShade:l=700}=t;if(e=(0,r.A)({},e),!e.main&&e[i]&&(e.main=e[i]),!e.hasOwnProperty("main"))throw new Error((0,o.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof e.main)throw new Error((0,o.A)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return _(e,"light",s,a),_(e,"dark",l,a),e.contrastText||(e.contrastText=M(e.main)),e},O={dark:A,light:x};return(0,s.A)((0,r.A)({common:(0,r.A)({},d),mode:e,primary:T({color:c,name:"primary"}),secondary:T({color:w,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:T({color:S,name:"error"}),warning:T({color:P,name:"warning"}),info:T({color:C,name:"info"}),success:T({color:E,name:"success"}),grey:h,contrastThreshold:n,getContrastText:M,augmentColor:T,tonalOffset:a},O[e]),l)}const S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const C={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function P(t,e){const n="function"===typeof e?e(t):e,{fontFamily:o=E,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:f,pxToRem:p}=n,g=(0,i.A)(n,S);const m=a/14,v=p||(t=>"".concat(t/h*m,"rem")),b=(t,e,n,i,s)=>{return(0,r.A)({fontFamily:o,fontWeight:t,fontSize:v(e),lineHeight:n},o===E?{letterSpacing:"".concat((a=i/e,Math.round(1e5*a)/1e5),"em")}:{},s,f);var a},y={h1:b(l,96,1.167,-1.5),h2:b(l,60,1.2,-.5),h3:b(c,48,1.167,0),h4:b(c,34,1.235,.25),h5:b(c,24,1.334,0),h6:b(u,20,1.6,.15),subtitle1:b(c,16,1.75,.15),subtitle2:b(u,14,1.57,.1),body1:b(c,16,1.5,.15),body2:b(c,14,1.43,.15),button:b(u,14,1.75,.4,C),caption:b(c,12,1.66,.4),overline:b(c,12,2.66,1,C),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,s.A)((0,r.A)({htmlFontSize:h,pxToRem:v,fontFamily:o,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},y),g,{clone:!1})}function M(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const T=["none",M(0,2,1,-1,0,1,1,0,0,1,3,0),M(0,3,1,-2,0,2,2,0,0,1,5,0),M(0,3,3,-2,0,3,4,0,0,1,8,0),M(0,2,4,-1,0,4,5,0,0,1,10,0),M(0,3,5,-1,0,5,8,0,0,1,14,0),M(0,3,5,-1,0,6,10,0,0,1,18,0),M(0,4,5,-2,0,7,10,1,0,2,16,1),M(0,5,5,-3,0,8,10,1,0,3,14,2),M(0,5,6,-3,0,9,12,1,0,3,16,2),M(0,6,6,-3,0,10,14,1,0,4,18,3),M(0,6,7,-4,0,11,15,1,0,4,20,3),M(0,7,8,-4,0,12,17,2,0,5,22,4),M(0,7,8,-4,0,13,19,2,0,5,24,4),M(0,7,9,-4,0,14,21,2,0,5,26,4),M(0,8,9,-5,0,15,22,2,0,6,28,5),M(0,8,10,-5,0,16,24,2,0,6,30,5),M(0,8,11,-5,0,17,26,2,0,6,32,5),M(0,9,11,-5,0,18,28,2,0,7,34,6),M(0,9,12,-6,0,19,29,2,0,7,36,6),M(0,10,13,-6,0,20,31,3,0,8,38,7),M(0,10,13,-6,0,21,33,3,0,8,40,7),M(0,10,14,-6,0,22,35,3,0,8,42,7),M(0,11,14,-7,0,23,36,3,0,9,44,8),M(0,11,15,-7,0,24,38,3,0,9,46,8)];var O=n(4318);const k={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},R=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function I(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:e={},palette:n={},transitions:u={},typography:d={}}=t,h=(0,i.A)(t,R);if(t.vars)throw new Error((0,o.A)(18));const f=w(n),p=(0,c.A)(t);let g=(0,s.A)(p,{mixins:(m=p.breakpoints,v=e,(0,r.A)({toolbar:{minHeight:56,[m.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[m.up("sm")]:{minHeight:64}}},v)),palette:f,shadows:T.slice(),typography:P(f,d),transitions:(0,O.Ay)(u),zIndex:(0,r.A)({},k)});var m,v;g=(0,s.A)(g,h);for(var b=arguments.length,y=new Array(b>1?b-1:0),x=1;x<b;x++)y[x-1]=arguments[x];return g=y.reduce(((t,e)=>(0,s.A)(t,e)),g),g.unstable_sxConfig=(0,r.A)({},a.A,null==h?void 0:h.unstable_sxConfig),g.unstable_sx=function(t){return(0,l.A)({sx:t,theme:this})},g}const B=I},4318:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>u,p0:()=>a});var r=n(8587),i=n(8168);const o=["duration","easing","delay"],s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(t){return"".concat(Math.round(t),"ms")}function c(t){if(!t)return 0;const e=t/36;return Math.round(10*(4+15*e**.25+e/5))}function u(t){const e=(0,i.A)({},s,t.easing),n=(0,i.A)({},a,t.duration);return(0,i.A)({getAutoHeightDuration:c,create:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:a=e.easeInOut,delay:c=0}=i;(0,r.A)(i,o);return(Array.isArray(t)?t:[t]).map((t=>"".concat(t," ").concat("string"===typeof s?s:l(s)," ").concat(a," ").concat("string"===typeof c?c:l(c)))).join(",")}},t,{easing:e,duration:n})}},5170:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=(0,n(7344).A)()},3375:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r="$$material"},1475:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(7123);const i=t=>(0,r.A)(t)&&"classes"!==t},7123:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}},4535:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>a});var r=n(8052),i=n(5170),o=n(3375),s=n(1475);const a=(0,r.Ay)({themeId:o.A,defaultTheme:i.A,rootShouldForwardProp:s.A})},2876:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(2919),i=n(5170),o=n(3375);function s(t){let{props:e,name:n}=t;return(0,r.A)({props:e,name:n,defaultTheme:i.A,themeId:o.A})}},6803:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(410).A},6593:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(4708).A},9662:(t,e,n)=>{"use strict";n.d(e,{A:()=>y});var r=n(8168),i=n(5043),o=n(8587),s=n(8387),a=n(8606),l=n(6803),c=n(2876),u=n(4535),d=n(7056),h=n(2400);function f(t){return(0,h.Ay)("MuiSvgIcon",t)}(0,d.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(579);const g=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"inherit"!==n.color&&e["color".concat((0,l.A)(n.color))],e["fontSize".concat((0,l.A)(n.fontSize))]]}})((t=>{let{theme:e,ownerState:n}=t;var r,i,o,s,a,l,c,u,d,h,f,p,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=e.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=e.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=e.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=e.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=e.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(f=(e.vars||e).palette)||null==(f=f[n.color])?void 0:f.main)?h:{action:null==(p=(e.vars||e).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(g=(e.vars||e).palette)||null==(g=g.action)?void 0:g.disabled,inherit:void 0}[n.color]}})),v=i.forwardRef((function(t,e){const n=(0,c.A)({props:t,name:"MuiSvgIcon"}),{children:u,className:d,color:h="inherit",component:v="svg",fontSize:b="medium",htmlColor:y,inheritViewBox:x=!1,titleAccess:A,viewBox:_="0 0 24 24"}=n,w=(0,o.A)(n,g),S=i.isValidElement(u)&&"svg"===u.type,C=(0,r.A)({},n,{color:h,component:v,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:x,viewBox:_,hasSvgAsChild:S}),E={};x||(E.viewBox=_);const P=(t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root","inherit"!==e&&"color".concat((0,l.A)(e)),"fontSize".concat((0,l.A)(n))]};return(0,a.A)(i,f,r)})(C);return(0,p.jsxs)(m,(0,r.A)({as:v,className:(0,s.A)(P.root,d),focusable:"false",color:y,"aria-hidden":!A||void 0,role:A?"img":void 0,ref:e},E,w,S&&u.props,{ownerState:C,children:[S?u.props.children:u,A?(0,p.jsx)("title",{children:A}):null]}))}));v.muiName="SvgIcon";const b=v;function y(t,e){function n(n,i){return(0,p.jsx)(b,(0,r.A)({"data-testid":"".concat(e,"Icon"),ref:i},n,{children:t}))}return n.muiName=b.muiName,i.memo(i.forwardRef(n))}},950:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(6440).A},1512:(t,e,n)=>{"use strict";n.r(e),n.d(e,{capitalize:()=>i.A,createChainedFunction:()=>o.A,createSvgIcon:()=>s.A,debounce:()=>a.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>d.A,requirePropFactory:()=>h,setRef:()=>f,unstable_ClassNameGenerator:()=>A,unstable_useEnhancedEffect:()=>p.A,unstable_useId:()=>g.A,unsupportedProp:()=>m,useControlled:()=>v.A,useEventCallback:()=>b.A,useForkRef:()=>y.A,useIsFocusVisible:()=>x.A});var r=n(5430),i=n(6803),o=n(6593),s=n(9662),a=n(950);const l=function(t,e){return()=>null};var c=n(154),u=n(2427),d=n(6078);n(8168);const h=function(t,e){return()=>null};const f=n(9184).A;var p=n(5013),g=n(5879);const m=function(t,e,n,r,i){return null};var v=n(4516),b=n(3319),y=n(5849),x=n(7844);const A={configure:t=>{r.A.configure(t)}}},154:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(5043);const i=function(t,e){var n,i;return r.isValidElement(t)&&-1!==e.indexOf(null!=(n=t.type.muiName)?n:null==(i=t.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}},2427:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(2144).A},6078:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(6288).A},4516:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(1944).A},5013:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(3844).A},3319:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(4626).A},5849:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(7042).A},5879:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(992).A},7844:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(932).A},869:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});n(5043);var r=n(3290),i=n(579);function o(t){const{styles:e,defaultTheme:n={}}=t,o="function"===typeof e?t=>{return e(void 0===(r=t)||null===r||0===Object.keys(r).length?n:t);var r}:e;return(0,i.jsx)(r.mL,{styles:o})}},3174:(t,e,n)=>{"use strict";n.r(e),n.d(e,{GlobalStyles:()=>w.A,StyledEngineProvider:()=>_,ThemeContext:()=>l.T,css:()=>b.AH,default:()=>S,internal_processStyles:()=>C,keyframes:()=>b.i7});var r=n(8168),i=n(5043),o=n(918),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.A)((function(t){return s.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),l=n(5756),c=n(1722),u=n(2830),d=n(9436),h=a,f=function(t){return"theme"!==t},p=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?h:f},g=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},m=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;return(0,c.SF)(e,n,r),(0,d.s)((function(){return(0,c.sk)(e,n,r)})),null},v=function t(e,n){var o,s,a=e.__emotion_real===e,d=a&&e.__emotion_base||e;void 0!==n&&(o=n.label,s=n.target);var h=g(e,n,a),f=h||p(d),v=!f("as");return function(){var b=arguments,y=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==o&&y.push("label:"+o+";"),null==b[0]||void 0===b[0].raw)y.push.apply(y,b);else{0,y.push(b[0][0]);for(var x=b.length,A=1;A<x;A++)y.push(b[A],b[0][A])}var _=(0,l.w)((function(t,e,n){var r=v&&t.as||d,o="",a=[],g=t;if(null==t.theme){for(var b in g={},t)g[b]=t[b];g.theme=i.useContext(l.T)}"string"===typeof t.className?o=(0,c.Rk)(e.registered,a,t.className):null!=t.className&&(o=t.className+" ");var x=(0,u.J)(y.concat(a),e.registered,g);o+=e.key+"-"+x.name,void 0!==s&&(o+=" "+s);var A=v&&void 0===h?p(r):f,_={};for(var w in t)v&&"as"===w||A(w)&&(_[w]=t[w]);return _.className=o,_.ref=n,i.createElement(i.Fragment,null,i.createElement(m,{cache:e,serialized:x,isStringTag:"string"===typeof r}),i.createElement(r,_))}));return _.displayName=void 0!==o?o:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",_.defaultProps=e.defaultProps,_.__emotion_real=_,_.__emotion_base=d,_.__emotion_styles=y,_.__emotion_forwardProp=h,Object.defineProperty(_,"toString",{value:function(){return"."+s}}),_.withComponent=function(e,i){return t(e,(0,r.A)({},n,i,{shouldForwardProp:g(_,i,!0)})).apply(void 0,y)},_}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){v[t]=v(t)}));var b=n(3290),y=n(5513),x=n(579);let A;function _(t){const{injectFirst:e,children:n}=t;return e&&A?(0,x.jsx)(l.C,{value:A,children:n}):n}"object"===typeof document&&(A=(0,y.A)({key:"css",prepend:!0}));var w=n(869);function S(t,e){return v(t,e)}const C=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}},7266:(t,e,n)=>{"use strict";var r=n(4994);e.X4=f,e.e$=p,e.eM=function(t,e){const n=h(t),r=h(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},e.a=g;var i=r(n(7245)),o=r(n(5383));function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(t,e,n)}function a(t){t=t.slice(1);const e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g");let n=t.match(e);return n&&1===n[0].length&&(n=n.map((t=>t+t))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((t,e)=>e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3)).join(", "),")"):""}function l(t){if(t.type)return t;if("#"===t.charAt(0))return l(a(t));const e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,t));let r,o=t.substring(e+1,t.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((t=>parseFloat(t))),{type:n,values:o,colorSpace:r}}const c=t=>{const e=l(t);return e.values.slice(0,3).map(((t,n)=>-1!==e.type.indexOf("hsl")&&0!==n?"".concat(t,"%"):t)).join(" ")};function u(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return-1!==e.indexOf("rgb")?r=r.map(((t,e)=>e<3?parseInt(t,10):t)):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function d(t){t=l(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-o*Math.max(Math.min(e-3,9-e,1),-1)};let a="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===t.type&&(a+="a",c.push(e[3])),u({type:a,values:c})}function h(t){let e="hsl"===(t=l(t)).type||"hsla"===t.type?l(d(t)).values:t.values;return e=e.map((e=>("color"!==t.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4))),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function f(t,e){return t=l(t),e=s(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,u(t)}function p(t,e){if(t=l(t),e=s(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return u(t)}function g(t,e){if(t=l(t),e=s(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return u(t)}function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(t)>.5?p(t,e):g(t,e)}},8052:(t,e,n)=>{"use strict";var r=n(4994);e.Ay=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:e,defaultTheme:n=g,rootShouldForwardProp:r=p,slotShouldForwardProp:l=p}=t,u=t=>(0,c.default)((0,i.default)({},t,{theme:v((0,i.default)({},t,{defaultTheme:n,themeId:e}))}));return u.__mui_systemSx=!0,function(t){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(t,(t=>t.filter((t=>!(null!=t&&t.__mui_systemSx)))));const{name:d,slot:f,skipVariantsResolver:g,skipSx:x,overridesResolver:A=b(m(f))}=c,_=(0,o.default)(c,h),w=void 0!==g?g:f&&"Root"!==f&&"root"!==f||!1,S=x||!1;let C=p;"Root"===f||"root"===f?C=r:f?C=l:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(C=void 0);const E=(0,s.default)(t,(0,i.default)({shouldForwardProp:C,label:undefined},_)),P=t=>"function"===typeof t&&t.__emotion_real!==t||(0,a.isPlainObject)(t)?r=>y(t,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:e})})):t,M=function(r){let o=P(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];const c=a?a.map(P):[];d&&A&&c.push((t=>{const r=v((0,i.default)({},t,{defaultTheme:n,themeId:e}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,s={};return Object.entries(o).forEach((e=>{let[n,o]=e;s[n]=y(o,(0,i.default)({},t,{theme:r}))})),A(t,s)})),d&&!w&&c.push((t=>{var r;const o=v((0,i.default)({},t,{defaultTheme:n,themeId:e}));return y({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},t,{theme:o}))})),S||c.push(u);const h=c.length-a.length;if(Array.isArray(r)&&h>0){const t=new Array(h).fill("");o=[...r,...t],o.raw=[...r.raw,...t]}const f=E(o,...c);return t.muiName&&(f.muiName=t.muiName),f};return E.withConfig&&(M.withConfig=E.withConfig),M}};var i=r(n(4634)),o=r(n(4893)),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=f(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}(n(3174)),a=n(4534),l=(r(n(578)),r(n(2046)),r(n(4989))),c=r(n(3234));const u=["ownerState"],d=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(f=function(t){return t?n:e})(t)}function p(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}const g=(0,l.default)(),m=t=>t?t.charAt(0).toLowerCase()+t.slice(1):t;function v(t){let{defaultTheme:e,theme:n,themeId:r}=t;return i=n,0===Object.keys(i).length?e:n[r]||n;var i}function b(t){return t?(e,n)=>n[t]:null}function y(t,e){let{ownerState:n}=e,r=(0,o.default)(e,u);const s="function"===typeof t?t((0,i.default)({ownerState:n},r)):t;if(Array.isArray(s))return s.flatMap((t=>y(t,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:t=[]}=s;let e=(0,o.default)(s,d);return t.forEach((t=>{let o=!0;"function"===typeof t.props?o=t.props((0,i.default)({ownerState:n},r,n)):Object.keys(t.props).forEach((e=>{(null==n?void 0:n[e])!==t.props[e]&&r[e]!==t.props[e]&&(o=!1)})),o&&(Array.isArray(e)||(e=[e]),e.push("function"===typeof t.style?t.style((0,i.default)({ownerState:n},r,n)):t.style))})),e}return s}},9751:(t,e,n)=>{"use strict";n.d(e,{EU:()=>a,NI:()=>s,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>i});var r=n(3216);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:t=>"@media (min-width:".concat(i[t],"px)")};function s(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const t=r.breakpoints||o;return e.reduce(((r,i,o)=>(r[t.up(t.keys[o])]=n(e[o]),r)),{})}if("object"===typeof e){const t=r.breakpoints||o;return Object.keys(e).reduce(((r,o)=>{if(-1!==Object.keys(t.values||i).indexOf(o)){r[t.up(o)]=n(e[o],o)}else{const t=o;r[t]=e[t]}return r}),{})}return n(e)}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;return(null==(e=t.keys)?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function l(t,e){return t.reduce(((t,e)=>{const n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}function c(t){const e=a(t);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const s=[e,...i].reduce(((t,e)=>(0,r.A)(t,e)),{});return l(Object.keys(e),s)}function u(t){let{values:e,breakpoints:n,base:r}=t;const i=r||function(t,e){if("object"!==typeof t)return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach(((e,r)=>{r<t.length&&(n[e]=!0)})):r.forEach((e=>{null!=t[e]&&(n[e]=!0)})),n}(e,n),o=Object.keys(i);if(0===o.length)return e;let s;return o.reduce(((t,n,r)=>(Array.isArray(e)?(t[n]=null!=e[r]?e[r]:e[s],s=r):"object"===typeof e?(t[n]=null!=e[n]?e[n]:e[s],s=n):t[n]=e,t)),{})}},9703:(t,e,n)=>{"use strict";function r(t,e){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:e}}return n.palette.mode===t?e:{}}n.d(e,{A:()=>r})},4853:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(8587),i=n(8168);const o=["values","unit","step"],s=t=>{const e=Object.keys(t).map((e=>({key:e,val:t[e]})))||[];return e.sort(((t,e)=>t.val-e.val)),e.reduce(((t,e)=>(0,i.A)({},t,{[e.key]:e.val})),{})};function a(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=t,l=(0,r.A)(t,o),c=s(e),u=Object.keys(c);function d(t){const r="number"===typeof e[t]?e[t]:t;return"@media (min-width:".concat(r).concat(n,")")}function h(t){const r="number"===typeof e[t]?e[t]:t;return"@media (max-width:".concat(r-a/100).concat(n,")")}function f(t,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof e[t]?e[t]:t).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof e[u[i]]?e[u[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:u,values:c,up:d,down:h,between:f,only:function(t){return u.indexOf(t)+1<u.length?f(t,u[u.indexOf(t)+1]):d(t)},not:function(t){const e=u.indexOf(t);return 0===e?d(u[1]):e===u.length-1?h(u[e]):f(t,u[u.indexOf(t)+1]).replace("@media","@media not all and")},unit:n},l)}},8280:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var r=n(8168),i=n(8587),o=n(3216),s=n(4853);const a={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),d=n(9703);const h=["breakpoints","palette","spacing","shape"];const f=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:e={},palette:n={},spacing:f,shape:p={}}=t,g=(0,i.A)(t,h),m=(0,s.A)(e),v=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;const e=(0,l.LX)({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((t=>{const n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(f);let b=(0,o.A)({breakpoints:m,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:v,shape:(0,r.A)({},a,p)},g);b.applyStyles=d.A;for(var y=arguments.length,x=new Array(y>1?y-1:0),A=1;A<y;A++)x[A-1]=arguments[A];return b=x.reduce(((t,e)=>(0,o.A)(t,e)),b),b.unstable_sxConfig=(0,r.A)({},u.A,null==g?void 0:g.unstable_sxConfig),b.unstable_sx=function(t){return(0,c.A)({sx:t,theme:this})},b}},4989:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(8280),i=n(4853),o=n(9703)},3815:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(3216);const i=function(t,e){return e?(0,r.A)(t,e,{clone:!1}):t}},8604:(t,e,n)=>{"use strict";n.d(e,{LX:()=>p,MA:()=>f,_W:()=>g,Lc:()=>b,Ms:()=>y});var r=n(9751),i=n(7162),o=n(3815);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(t){const e={};return n=>(void 0===e[n]&&(e[n]=t(n)),e[n])}((t=>{if(t.length>2){if(!l[t])return[t];t=l[t]}const[e,n]=t.split(""),r=s[e],i=a[n]||"";return Array.isArray(i)?i.map((t=>r+t)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function f(t,e,n,r){var o;const s=null!=(o=(0,i.Yn)(t,e,!1))?o:n;return"number"===typeof s?t=>"string"===typeof t?t:s*t:Array.isArray(s)?t=>"string"===typeof t?t:s[t]:"function"===typeof s?s:()=>{}}function p(t){return f(t,"spacing",8)}function g(t,e){if("string"===typeof e||null==e)return e;const n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function m(t,e,n,i){if(-1===e.indexOf(n))return null;const o=function(t,e){return n=>t.reduce(((t,r)=>(t[r]=g(e,n),t)),{})}(c(n),i),s=t[n];return(0,r.NI)(t,s,o)}function v(t,e){const n=p(t.theme);return Object.keys(t).map((r=>m(t,e,r,n))).reduce(o.A,{})}function b(t){return v(t,u)}function y(t){return v(t,d)}function x(t){return v(t,h)}b.propTypes={},b.filterProps=u,y.propTypes={},y.filterProps=d,x.propTypes={},x.filterProps=h},7162:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(410),i=n(9751);function o(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){const n="vars.".concat(e).split(".").reduce(((t,e)=>t&&t[e]?t[e]:null),t);if(null!=n)return n}return e.split(".").reduce(((t,e)=>t&&null!=t[e]?t[e]:null),t)}function s(t,e,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:o(t,n)||i,e&&(r=e(r,i,t)),r}const a=function(t){const{prop:e,cssProperty:n=t.prop,themeKey:a,transform:l}=t,c=t=>{if(null==t[e])return null;const c=t[e],u=o(t.theme,a)||{};return(0,i.NI)(t,c,(t=>{let i=s(u,l,t);return t===i&&"string"===typeof t&&(i=s(u,l,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[e],c}},7758:(t,e,n)=>{"use strict";n.d(e,{A:()=>B});var r=n(8604),i=n(7162),o=n(3815);const s=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.reduce(((t,e)=>(e.filterProps.forEach((n=>{t[n]=e})),t)),{}),i=t=>Object.keys(t).reduce(((e,n)=>r[n]?(0,o.A)(e,r[n](t)):e),{});return i.propTypes={},i.filterProps=e.reduce(((t,e)=>t.concat(e.filterProps)),[]),i};var a=n(9751);function l(t){return"number"!==typeof t?t:"".concat(t,"px solid")}function c(t,e){return(0,i.Ay)({prop:t,themeKey:"borders",transform:e})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),f=c("borderBottom",l),p=c("borderLeft",l),g=c("borderColor"),m=c("borderTopColor"),v=c("borderRightColor"),b=c("borderBottomColor"),y=c("borderLeftColor"),x=c("outline",l),A=c("outlineColor"),_=t=>{if(void 0!==t.borderRadius&&null!==t.borderRadius){const e=(0,r.MA)(t.theme,"shape.borderRadius",4,"borderRadius"),n=t=>({borderRadius:(0,r._W)(e,t)});return(0,a.NI)(t,t.borderRadius,n)}return null};_.propTypes={},_.filterProps=["borderRadius"];s(u,d,h,f,p,g,m,v,b,y,_,x,A);const w=t=>{if(void 0!==t.gap&&null!==t.gap){const e=(0,r.MA)(t.theme,"spacing",8,"gap"),n=t=>({gap:(0,r._W)(e,t)});return(0,a.NI)(t,t.gap,n)}return null};w.propTypes={},w.filterProps=["gap"];const S=t=>{if(void 0!==t.columnGap&&null!==t.columnGap){const e=(0,r.MA)(t.theme,"spacing",8,"columnGap"),n=t=>({columnGap:(0,r._W)(e,t)});return(0,a.NI)(t,t.columnGap,n)}return null};S.propTypes={},S.filterProps=["columnGap"];const C=t=>{if(void 0!==t.rowGap&&null!==t.rowGap){const e=(0,r.MA)(t.theme,"spacing",8,"rowGap"),n=t=>({rowGap:(0,r._W)(e,t)});return(0,a.NI)(t,t.rowGap,n)}return null};C.propTypes={},C.filterProps=["rowGap"];s(w,S,C,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function E(t,e){return"grey"===e?e:t}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:E}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:E}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:E}));function P(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}const M=(0,i.Ay)({prop:"width",transform:P}),T=t=>{if(void 0!==t.maxWidth&&null!==t.maxWidth){const e=e=>{var n,r;const i=(null==(n=t.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[e])||a.zu[e];return i?"px"!==(null==(r=t.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(t.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:P(e)}};return(0,a.NI)(t,t.maxWidth,e)}return null};T.filterProps=["maxWidth"];const O=(0,i.Ay)({prop:"minWidth",transform:P}),k=(0,i.Ay)({prop:"height",transform:P}),R=(0,i.Ay)({prop:"maxHeight",transform:P}),I=(0,i.Ay)({prop:"minHeight",transform:P}),B=((0,i.Ay)({prop:"size",cssProperty:"width",transform:P}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:P}),s(M,T,O,k,R,I,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:_},color:{themeKey:"palette",transform:E},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:E},backgroundColor:{themeKey:"palette",transform:E},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:w},rowGap:{style:C},columnGap:{style:S},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:P},maxWidth:{style:T},minWidth:{transform:P},height:{transform:P},maxHeight:{transform:P},minHeight:{transform:P},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8698:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var r=n(8168),i=n(8587),o=n(3216),s=n(7758);const a=["sx"],l=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:s.A;return Object.keys(t).forEach((e=>{i[e]?r.systemProps[e]=t[e]:r.otherProps[e]=t[e]})),r};function c(t){const{sx:e}=t,n=(0,i.A)(t,a),{systemProps:s,otherProps:c}=l(n);let u;return u=Array.isArray(e)?[s,...e]:"function"===typeof e?function(){const t=e(...arguments);return(0,o.Q)(t)?(0,r.A)({},s,t):s}:(0,r.A)({},s,e),(0,r.A)({},c,{sx:u})}},3234:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A,extendSxProp:()=>i.A,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>o.A});var r=n(8812),i=n(8698),o=n(7758)},8812:(t,e,n)=>{"use strict";n.d(e,{A:()=>u,k:()=>l});var r=n(410),i=n(3815),o=n(7162),s=n(9751),a=n(7758);function l(){function t(t,e,n,i){const a={[t]:e,theme:n},l=i[t];if(!l)return{[t]:e};const{cssProperty:c=t,themeKey:u,transform:d,style:h}=l;if(null==e)return null;if("typography"===u&&"inherit"===e)return{[t]:e};const f=(0,o.Yn)(n,u)||{};if(h)return h(a);return(0,s.NI)(a,e,(e=>{let n=(0,o.BO)(f,d,e);return e===n&&"string"===typeof e&&(n=(0,o.BO)(f,d,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===c?n:{[c]:n}}))}return function e(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(l.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],d=l,"function"===typeof a?a(d):a);var a,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,t(n,o,l,c));else{const t=(0,s.NI)({theme:l},o,(t=>({[n]:t})));!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.reduce(((t,e)=>t.concat(Object.keys(e))),[]),i=new Set(r);return e.every((t=>i.size===Object.keys(t).length))}(t,o)?u=(0,i.A)(u,t):u[n]=e({sx:o,theme:l})}else u=(0,i.A)(u,t(n,o,l,c))})),(0,s.vf)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},5527:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(8280),i=n(7082);const o=(0,r.A)();const s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,i.A)(t)}},2919:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(2018);var i=n(5527);function o(t){let{props:e,name:n,defaultTheme:o,themeId:s}=t,a=(0,i.A)(o);s&&(a=a[s]||a);const l=function(t){const{theme:e,name:n,props:i}=t;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?(0,r.A)(e.components[n].defaultProps,i):i}({theme:a,name:n,props:e});return l}},7082:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(5043),i=n(5756);const o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=r.useContext(i.T);return e&&(n=e,0!==Object.keys(n).length)?e:t;var n}},2374:(t,e,n)=>{"use strict";e.A=void 0;var r=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=i?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}(n(5043)),i=n(3174);function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}e.A=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=r.useContext(i.ThemeContext);return e&&(n=e,0!==Object.keys(n).length)?e:t;var n}},5430:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const r=t=>t,i=(()=>{let t=r;return{configure(e){t=e},generate:e=>t(e),reset(){t=r}}})()},410:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(6632);function i(t){if("string"!==typeof t)throw new Error((0,r.A)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},578:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A});var r=n(410)},7040:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(e,Math.min(t,n))}},5383:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A});var r=n(7040)},8606:(t,e,n)=>{"use strict";function r(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(t).forEach((i=>{r[i]=t[i].reduce(((t,r)=>{if(r){const i=e(r);""!==i&&t.push(i),n&&n[r]&&t.push(n[r])}return t}),[]).join(" ")})),r}n.d(e,{A:()=>r})},4708:(t,e,n)=>{"use strict";function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}),(()=>{}))}n.d(e,{A:()=>r})},6440:(t,e,n)=>{"use strict";function r(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(e),e=setTimeout((()=>{t.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(e)},r}n.d(e,{A:()=>r})},3216:(t,e,n)=>{"use strict";n.d(e,{A:()=>s,Q:()=>i});var r=n(8168);function i(t){if("object"!==typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function o(t){if(!i(t))return t;const e={};return Object.keys(t).forEach((n=>{e[n]=o(t[n])})),e}function s(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},t):t;return i(t)&&i(e)&&Object.keys(e).forEach((r=>{"__proto__"!==r&&(i(e[r])&&r in t&&i(t[r])?a[r]=s(t[r],e[r],n):n.clone?a[r]=i(e[r])?o(e[r]):e[r]:a[r]=e[r])})),a}},4534:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(t,e,n)=>{"use strict";function r(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{A:()=>r})},7245:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A});var r=n(6632)},2400:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>o,li:()=>i});var r=n(5430);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[e];return o?"".concat(n,"-").concat(o):"".concat(r.A.generate(t),"-").concat(e)}},7056:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(2400);function i(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return e.forEach((e=>{i[e]=(0,r.Ay)(t,e,n)})),i}},2046:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l,getFunctionName:()=>o});var r=n(2086);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(t){const e="".concat(t).match(i);return e&&e[1]||""}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.displayName||t.name||o(t)||e}function a(t,e,n){const r=s(e);return t.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function l(t){if(null!=t){if("string"===typeof t)return t;if("function"===typeof t)return s(t,"Component");if("object"===typeof t)switch(t.$$typeof){case r.ForwardRef:return a(t,t.render,"ForwardRef");case r.Memo:return a(t,t.type,"memo");default:return}}}},2144:(t,e,n)=>{"use strict";function r(t){return t&&t.ownerDocument||document}n.d(e,{A:()=>r})},6288:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(2144);function i(t){return(0,r.A)(t).defaultView||window}},2018:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(8168);function i(t,e){const n=(0,r.A)({},e);return Object.keys(t).forEach((o=>{if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.A)({},t[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=t[o]||{},a=e[o];n[o]={},a&&Object.keys(a)?s&&Object.keys(s)?(n[o]=(0,r.A)({},a),Object.keys(s).forEach((t=>{n[o][t]=i(s[t],a[t])}))):n[o]=a:n[o]=s}else void 0===n[o]&&(n[o]=t[o])})),n}},9184:(t,e,n)=>{"use strict";function r(t,e){"function"===typeof t?t(e):t&&(t.current=e)}n.d(e,{A:()=>r})},1944:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(5043);function i(t){let{controlled:e,default:n,name:i,state:o="value"}=t;const{current:s}=r.useRef(void 0!==e),[a,l]=r.useState(n);return[s?e:a,r.useCallback((t=>{s||l(t)}),[])]}},3844:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(5043);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},4626:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(5043),i=n(3844);const o=function(t){const e=r.useRef(t);return(0,i.A)((()=>{e.current=t})),r.useRef((function(){return(0,e.current)(...arguments)})).current}},7042:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(5043),i=n(9184);function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.useMemo((()=>e.every((t=>null==t))?null:t=>{e.forEach((e=>{(0,i.A)(e,t)}))}),e)}},992:(t,e,n)=>{"use strict";var r;n.d(e,{A:()=>a});var i=n(5043);let o=0;const s=(r||(r=n.t(i,2)))["useId".toString()];function a(t){if(void 0!==s){const e=s();return null!=t?t:e}return function(t){const[e,n]=i.useState(t),r=t||e;return i.useEffect((()=>{null==e&&(o+=1,n("mui-".concat(o)))}),[e]),r}(t)}},932:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var r=n(5043),i=n(1140);let o=!0,s=!1;const a=new i.E,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(t){t.metaKey||t.altKey||t.ctrlKey||(o=!0)}function u(){o=!1}function d(){"hidden"===this.visibilityState&&s&&(o=!0)}function h(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(n){}return o||function(t){const{type:e,tagName:n}=t;return!("INPUT"!==n||!l[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}function f(){const t=r.useCallback((t=>{var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",c,!0),e.addEventListener("mousedown",u,!0),e.addEventListener("pointerdown",u,!0),e.addEventListener("touchstart",u,!0),e.addEventListener("visibilitychange",d,!0))}),[]),e=r.useRef(!1);return{isFocusVisibleRef:e,onFocus:function(t){return!!h(t)&&(e.current=!0,!0)},onBlur:function(){return!!e.current&&(s=!0,a.start(100,(()=>{s=!1})),e.current=!1,!0)},ref:t}}},1140:(t,e,n)=>{"use strict";n.d(e,{E:()=>s,A:()=>a});var r=n(5043);const i={};const o=[];class s{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new s}start(t,e){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,e()}),t)}}function a(){const t=function(t,e){const n=r.useRef(i);return n.current===i&&(n.current=t(e)),n}(s.create).current;var e;return e=t.disposeEffect,r.useEffect(e,o),t}},5707:t=>{"use strict";var e="%[a-f0-9]{2}",n=new RegExp("("+e+")|([^%]+?)","gi"),r=new RegExp("("+e+")+","gi");function i(t,e){try{return[decodeURIComponent(t.join(""))]}catch(o){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],i(n),i(r))}function o(t){try{return decodeURIComponent(t)}catch(o){for(var e=t.match(n)||[],r=1;r<e.length;r++)e=(t=i(e,r).join("")).match(n)||[];return t}}t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},i=r.exec(t);i;){try{n[i[0]]=decodeURIComponent(i[0])}catch(e){var s=o(i[0]);s!==i[0]&&(n[i[0]]=s)}i=r.exec(t)}n["%C2"]="\ufffd";for(var a=Object.keys(n),l=0;l<a.length;l++){var c=a[l];t=t.replace(new RegExp(c,"g"),n[c])}return t}(t)}}},973:t=>{"use strict";function e(t,e,r){r=r||2;var o,s,a,l,d,h,p,g=e&&e.length,m=g?e[0]*r:t.length,v=n(t,0,m,r,!0),b=[];if(!v||v.next===v.prev)return b;if(g&&(v=function(t,e,r,i){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(c),o=0;o<l.length;o++)r=u(l[o],r);return r}(t,e,v,r)),t.length>80*r){o=a=t[0],s=l=t[1];for(var y=r;y<m;y+=r)(d=t[y])<o&&(o=d),(h=t[y+1])<s&&(s=h),d>a&&(a=d),h>l&&(l=h);p=0!==(p=Math.max(a-o,l-s))?32767/p:0}return i(v,b,r,o,s,p,0),b}function n(t,e,n,r,i){var o,s;if(i===E(t,e,n,r)>0)for(o=e;o<n;o+=r)s=w(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=w(o,t[o],t[o+1],s);return s&&v(s,s.next)&&(S(s),s=s.next),s}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,c,u,d,f){if(t){!f&&d&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=h(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,c,u,d);for(var p,g,m=t;t.prev!==t.next;)if(p=t.prev,g=t.next,d?s(t,c,u,d):o(t))e.push(p.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),S(t),t=g.next,m=g.next;else if((t=g)===m){f?1===f?i(t=a(r(t),e,n),e,n,c,u,d,2):2===f&&l(t,e,n,c,u,d):i(r(t),e,n,c,u,d,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,c=r.y,u=i<o?i<s?i:s:o<s?o:s,d=a<l?a<c?a:c:l<c?l:c,h=i>o?i>s?i:s:o>s?o:s,f=a>l?a>c?a:c:l>c?l:c,g=r.next;g!==e;){if(g.x>=u&&g.x<=h&&g.y>=d&&g.y<=f&&p(i,a,o,l,s,c,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,s=t.next;if(m(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,c=s.x,u=i.y,d=o.y,f=s.y,g=a<l?a<c?a:c:l<c?l:c,v=u<d?u<f?u:f:d<f?d:f,b=a>l?a>c?a:c:l>c?l:c,y=u>d?u>f?u:f:d>f?d:f,x=h(g,v,e,n,r),A=h(b,y,e,n,r),_=t.prevZ,w=t.nextZ;_&&_.z>=x&&w&&w.z<=A;){if(_.x>=g&&_.x<=b&&_.y>=v&&_.y<=y&&_!==i&&_!==s&&p(a,u,l,d,c,f,_.x,_.y)&&m(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,w.x>=g&&w.x<=b&&w.y>=v&&w.y<=y&&w!==i&&w!==s&&p(a,u,l,d,c,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;_&&_.z>=x;){if(_.x>=g&&_.x<=b&&_.y>=v&&_.y<=y&&_!==i&&_!==s&&p(a,u,l,d,c,f,_.x,_.y)&&m(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=A;){if(w.x>=g&&w.x<=b&&w.y>=v&&w.y<=y&&w!==i&&w!==s&&p(a,u,l,d,c,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function a(t,e,n){var i=t;do{var o=i.prev,s=i.next.next;!v(o,s)&&b(o,i,i.next,s)&&A(o,s)&&A(s,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),S(i),S(i.next),i=t=s),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=_(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,e,n,o,s,a,0),void i(u,e,n,o,s,a,0)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,c=n,u=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&p(o<h?i:s,o,u,h,o<h?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),A(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&d(n,r)))&&(n=r,f=l)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var i=_(n,t);return r(i,i.next),r(n,n.next)}function d(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function h(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function p(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(A(t,e)&&A(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||v(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){var i=x(m(t,e,n)),o=x(m(t,e,r)),s=x(m(n,r,t)),a=x(m(n,r,e));return i!==o&&s!==a||(!(0!==i||!y(t,n,e))||(!(0!==o||!y(t,r,e))||(!(0!==s||!y(n,t,r))||!(0!==a||!y(n,e,r)))))}function y(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function x(t){return t>0?1:t<0?-1:0}function A(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function _(t,e){var n=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(t,e,n,r){var i=new C(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(E(t,0,o,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;s-=Math.abs(E(t,c,u,n))}var d=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;d+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},38:t=>{"use strict";t.exports=function(t,e){for(var n={},r=Object.keys(t),i=Array.isArray(e),o=0;o<r.length;o++){var s=r[o],a=t[s];(i?-1!==e.indexOf(s):e(s,a,t))&&(n[s]=a)}return n}},6895:(t,e,n)=>{var r;!function(i,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),d="function",h=Math.round,f=Math.abs,p=Date.now;function g(t,e,n){return setTimeout(_(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(v(t,n[e],n),!0)}function v(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function b(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}l="function"!==typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var y=b((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),x=b((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function A(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return typeof t==d?t.apply(e&&e[0]||a,e):t}function S(t,e){return t===a?e:t}function C(t,e,n){v(T(e),(function(e){t.addEventListener(e,n,!1)}))}function E(t,e,n){v(T(e),(function(e){t.removeEventListener(e,n,!1)}))}function P(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function M(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function O(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function k(t){return Array.prototype.slice.call(t,0)}function R(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];O(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function I(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return a}var B=1;function L(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var D="ontouchstart"in i,F=I(i,"PointerEvent")!==a,N=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j="touch",z="mouse",U=25,V=1,G=4,W=8,H=1,J=2,K=4,X=8,q=16,Y=J|K,Q=X|q,Z=Y|Q,$=["x","y"],tt=["clientX","clientY"];function et(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function nt(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&V&&r-i===0,s=e&(G|W)&&r-i===0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=rt(e));i>1&&!n.firstMultiple?n.firstMultiple=rt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=e.center=it(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=lt(l,c),e.distance=at(l,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==V&&o.eventType!==G||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=st(e.deltaX,e.deltaY);var u=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=f(u.x)>f(u.y)?u.x:u.y,e.scale=s?(d=s.pointers,h=r,at(h[0],h[1],tt)/at(d[0],d[1],tt)):1,e.rotation=s?function(t,e){return lt(e[1],e[0],tt)+lt(t[1],t[0],tt)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=W&&(l>U||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,d=ot(l,c,u);r=d.x,i=d.y,n=f(d.x)>f(d.y)?d.x:d.y,o=st(c,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var d,h;var g=t.element;P(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function rt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:it(e),deltaX:t.deltaX,deltaY:t.deltaY}}function it(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function ot(t,e,n){return{x:e/t||0,y:n/t||0}}function st(t,e){return t===e?H:f(t)>=f(e)?t<0?J:K:e<0?X:q}function at(t,e,n){n||(n=$);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function lt(t,e,n){n||(n=$);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(L(this.element),this.evWin,this.domHandler)}};var ct={mousedown:V,mousemove:2,mouseup:G},ut="mousedown",dt="mousemove mouseup";function ht(){this.evEl=ut,this.evWin=dt,this.pressed=!1,et.apply(this,arguments)}A(ht,et,{handler:function(t){var e=ct[t.type];e&V&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=G),this.pressed&&(e&G&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:z,srcEvent:t}))}});var ft={pointerdown:V,pointermove:2,pointerup:G,pointercancel:W,pointerout:W},pt={2:j,3:"pen",4:z,5:"kinect"},gt="pointerdown",mt="pointermove pointerup pointercancel";function vt(){this.evEl=gt,this.evWin=mt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(gt="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),A(vt,et,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=ft[r],o=pt[t.pointerType]||t.pointerType,s=o==j,a=O(e,t.pointerId,"pointerId");i&V&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):i&(G|W)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var bt={touchstart:V,touchmove:2,touchend:G,touchcancel:W};function yt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function xt(t,e){var n=k(t.touches),r=k(t.changedTouches);return e&(G|W)&&(n=R(n.concat(r),"identifier",!0)),[n,r]}A(yt,et,{handler:function(t){var e=bt[t.type];if(e===V&&(this.started=!0),this.started){var n=xt.call(this,t,e);e&(G|W)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}});var At={touchstart:V,touchmove:2,touchend:G,touchcancel:W},_t="touchstart touchmove touchend touchcancel";function wt(){this.evTarget=_t,this.targetIds={},et.apply(this,arguments)}function St(t,e){var n=k(t.touches),r=this.targetIds;if(e&(2|V)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=k(t.changedTouches),a=[],l=this.target;if(o=n.filter((function(t){return P(t.target,l)})),e===V)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),e&(G|W)&&delete r[s[i].identifier],i++;return a.length?[R(o.concat(a),"identifier",!0),a]:void 0}A(wt,et,{handler:function(t){var e=At[t.type],n=St.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}});var Ct=2500;function Et(){et.apply(this,arguments);var t=_(this.handler,this);this.touch=new wt(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Pt(t,e){t&V?(this.primaryTouch=e.changedPointers[0].identifier,Mt.call(this,e)):t&(G|W)&&Mt.call(this,e)}function Mt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Ct)}}function Tt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}A(Et,et,{handler:function(t,e,n){var r=n.pointerType==j,i=n.pointerType==z;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Pt.call(this,e,n);else if(i&&Tt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ot=I(u.style,"touchAction"),kt=Ot!==a,Rt="compute",It="auto",Bt="manipulation",Lt="none",Dt="pan-x",Ft="pan-y",Nt=function(){if(!kt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function jt(t,e){this.manager=t,this.set(e)}jt.prototype={set:function(t){t==Rt&&(t=this.compute()),kt&&this.manager.element.style&&Nt[t]&&(this.manager.element.style[Ot]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(M(t,Lt))return Lt;var e=M(t,Dt),n=M(t,Ft);if(e&&n)return Lt;if(e||n)return e?Dt:Ft;if(M(t,Bt))return Bt;return It}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=M(r,Lt)&&!Nt[Lt],o=M(r,Ft)&&!Nt[Ft],s=M(r,Dt)&&!Nt[Dt];if(i){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return i||o&&n&Y||s&&n&Q?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var zt=1,Ut=32;function Vt(t){this.options=l({},this.defaults,t||{}),this.id=B++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function Gt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Wt(t){return t==q?"down":t==X?"up":t==J?"left":t==K?"right":""}function Ht(t,e){var n=e.manager;return n?n.get(t):t}function Jt(){Vt.apply(this,arguments)}function Kt(){Jt.apply(this,arguments),this.pX=null,this.pY=null}function Xt(){Jt.apply(this,arguments)}function qt(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Yt(){Jt.apply(this,arguments)}function Qt(){Jt.apply(this,arguments)}function Zt(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function $t(t,e){return(e=e||{}).recognizers=S(e.recognizers,$t.defaults.preset),new te(t,e)}Vt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ht(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Ht(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===O(e,t=Ht(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Ht(t,this);var e=O(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Gt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Gt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ut},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ut|zt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=Ut);56&this.state&&(this.state=zt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},A(Jt,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(n&W||!i)?16|e:r||i?n&G?8|e:2&e?4|e:2:Ut}}),A(Kt,Jt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&Y&&e.push(Ft),t&Q&&e.push(Dt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(e.direction&Y?(i=0===o?H:o<0?J:K,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?H:s<0?X:q,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Jt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Wt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),A(Xt,Jt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Lt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),A(qt,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[It]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(G|W)&&!i)this.reset();else if(t.eventType&V)this.reset(),this._timer=g((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&G)return 8;return Ut},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&G?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),A(Yt,Jt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Lt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),A(Qt,Jt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Y|Q,pointers:1},getTouchAction:function(){return Kt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Y|Q)?e=t.overallVelocity:n&Y?e=t.overallVelocityX:n&Q&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&G},emit:function(t){var e=Wt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),A(Zt,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Bt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&V&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=G)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=g((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ut},failTimeout:function(){return this._timer=g((function(){this.state=Ut}),this.options.interval,this),Ut},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),$t.VERSION="2.0.7",$t.defaults={domEvents:!1,touchAction:Rt,enable:!0,inputTarget:null,inputClass:null,preset:[[Yt,{enable:!1}],[Xt,{enable:!1},["rotate"]],[Qt,{direction:Y}],[Kt,{direction:Y},["swipe"]],[Zt],[Zt,{event:"doubletap",taps:2},["tap"]],[qt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function te(t,e){var n;this.options=l({},$t.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(F?vt:N?wt:D?Et:ht))(n,nt),this.touchAction=new jt(this,this.options.touchAction),ee(this,!0),v(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,r=t.element;r.style&&(v(t.options.cssProps,(function(i,o){n=I(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}te.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=O(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return v(T(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return v(T(t),(function(t){e?n[t]&&n[t].splice(O(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l($t,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:G,INPUT_CANCEL:W,STATE_POSSIBLE:zt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ut,DIRECTION_NONE:H,DIRECTION_LEFT:J,DIRECTION_RIGHT:K,DIRECTION_UP:X,DIRECTION_DOWN:q,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:Q,DIRECTION_ALL:Z,Manager:te,Input:et,TouchAction:jt,TouchInput:wt,MouseInput:ht,PointerEventInput:vt,TouchMouseInput:Et,SingleTouchInput:yt,Recognizer:Vt,AttrRecognizer:Jt,Tap:Zt,Pan:Kt,Swipe:Qt,Pinch:Xt,Rotate:Yt,Press:qt,on:C,off:E,each:v,merge:x,extend:y,assign:l,inherit:A,bindFn:_,prefixed:I}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=$t,(r=function(){return $t}.call(e,n,e,t))===a||(t.exports=r)}(window,document)},219:(t,e,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return r.isMemo(t)?s:a[t.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&t(e,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(e),g=l(n),m=0;m<s.length;++m){var v=s[m];if(!o[v]&&(!r||!r[v])&&(!g||!g[v])&&(!a||!a[v])){var b=h(n,v);try{c(e,v,b)}catch(y){}}}}return e}},4983:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function A(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case d:case o:case a:case s:case f:return t;default:switch(t=t&&t.$$typeof){case c:case h:case m:case g:case l:return t;default:return e}}case i:return e}}}function _(t){return A(t)===d}e.AsyncMode=u,e.ConcurrentMode=d,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=h,e.Fragment=o,e.Lazy=m,e.Memo=g,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return _(t)||A(t)===u},e.isConcurrentMode=_,e.isContextConsumer=function(t){return A(t)===c},e.isContextProvider=function(t){return A(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return A(t)===h},e.isFragment=function(t){return A(t)===o},e.isLazy=function(t){return A(t)===m},e.isMemo=function(t){return A(t)===g},e.isPortal=function(t){return A(t)===i},e.isProfiler=function(t){return A(t)===a},e.isStrictMode=function(t){return A(t)===s},e.isSuspense=function(t){return A(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===d||t===a||t===s||t===f||t===p||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===l||t.$$typeof===c||t.$$typeof===h||t.$$typeof===b||t.$$typeof===y||t.$$typeof===x||t.$$typeof===v)},e.typeOf=A},3763:(t,e,n)=>{"use strict";t.exports=n(4983)},9370:(t,e,n)=>{"use strict";const r=n(7491),i=n(5707),o=n(1289),s=n(38),a=Symbol("encodeFragmentIdentifier");function l(t){if("string"!==typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function u(t,e){return e.decode?i(t):t}function d(t){return Array.isArray(t)?t.sort():"object"===typeof t?d(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function h(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function f(t){const e=(t=h(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function p(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"===typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function g(t,e){l((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"colon-list-separator":return(t,n,r)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const i="string"===typeof n&&n.includes(t.arrayFormatSeparator),o="string"===typeof n&&!i&&u(n,t).includes(t.arrayFormatSeparator);n=o?u(n,t):n;const s=i||o?n.split(t.arrayFormatSeparator).map((e=>u(e,t))):null===n?n:u(n,t);r[e]=s};case"bracket-separator":return(e,n,r)=>{const i=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!i)return void(r[e]=n?u(n,t):n);const o=null===n?[]:n.split(t.arrayFormatSeparator).map((e=>u(e,t)));void 0!==r[e]?r[e]=[].concat(r[e],o):r[e]=o};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),r=Object.create(null);if("string"!==typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const i of t.split("&")){if(""===i)continue;let[t,s]=o(e.decode?i.replace(/\+/g," "):i,"=");s=void 0===s?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?s:u(s,e),n(u(t,e),s,r)}for(const i of Object.keys(r)){const t=r[i];if("object"===typeof t&&null!==t)for(const n of Object.keys(t))t[n]=p(t[n],e);else r[i]=p(t,e)}return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce(((t,e)=>{const n=r[e];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?t[e]=d(n):t[e]=n,t}),Object.create(null))}e.extract=f,e.parse=g,e.stringify=(t,e)=>{if(!t)return"";l((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const n=n=>{return e.skipNull&&(null===(r=t[n])||void 0===r)||e.skipEmptyString&&""===t[n];var r},r=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const i=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),"[",i,"]"].join("")]:[...n,[c(e,t),"[",c(i,t),"]=",c(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),"[]"].join("")]:[...n,[c(e,t),"[]=",c(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),":list="].join("")]:[...n,[c(e,t),":list=",c(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[c(n,t),e,c(i,t)].join("")]:[[r,c(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,c(e,t)]:[...n,[c(e,t),"=",c(r,t)].join("")]}}(e),i={};for(const s of Object.keys(t))n(s)||(i[s]=t[s]);const o=Object.keys(i);return!1!==e.sort&&o.sort(e.sort),o.map((n=>{const i=t[n];return void 0===i?"":null===i?c(n,e):Array.isArray(i)?0===i.length&&"bracket-separator"===e.arrayFormat?c(n,e)+"[]":i.reduce(r(n),[]).join("&"):c(n,e)+"="+c(i,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[n,r]=o(t,"#");return Object.assign({url:n.split("?")[0]||"",query:g(f(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,e)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const r=h(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),s=Object.assign(o,t.query);let l=e.stringify(s,n);l&&(l="?".concat(l));let u=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(u="#".concat(n[a]?c(t.fragmentIdentifier,n):t.fragmentIdentifier)),"".concat(r).concat(l).concat(u)},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[a]:!1},r);const{url:i,query:o,fragmentIdentifier:l}=e.parseUrl(t,r);return e.stringifyUrl({url:i,query:s(o,n),fragmentIdentifier:l},r)},e.exclude=(t,n,r)=>{const i=Array.isArray(n)?t=>!n.includes(t):(t,e)=>!n(t,e);return e.pick(t,i,r)}},2730:(t,e,n)=>{"use strict";var r=n(5043),i=n(8853);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,r,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}function y(t,e,n,r){var i=m.hasOwnProperty(e)?m[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!d.call(p,t)||!d.call(f,t)&&(h.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,b);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,b);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,b);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),P=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var B=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=B&&t[B]||t["@@iterator"])?t:null}var D,F=Object.assign;function N(t){if(void 0===D)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);D=e&&e[1]||""}return"\n"+D+t}var j=!1;function z(t,e){if(!t||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?N(t):""}function U(t){switch(t.tag){case 5:return N(t.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return t=z(t.type,!1);case 11:return t=z(t.type.render,!1);case 1:return t=z(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case w:return"Fragment";case _:return"Portal";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case P:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case k:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case R:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function G(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function H(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function J(t){t._valueTracker||(t._valueTracker=function(t){var e=H(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=H(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function X(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function q(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Y(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&y(t,"checked",e,!1)}function Z(t,e){Q(t,e);var n=W(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&X(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function ot(t,e){var n=W(e.value),r=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,dt=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function ht(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var vt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function yt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function At(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var _t=null,wt=null,St=null;function Ct(t){if(t=yi(t)){if("function"!==typeof _t)throw Error(o(280));var e=t.stateNode;e&&(e=Ai(e),_t(t.stateNode,t.type,e))}}function Et(t){wt?St?St.push(t):St=[t]:wt=t}function Pt(){if(wt){var t=wt,e=St;if(St=wt=null,Ct(t),e)for(t=0;t<e.length;t++)Ct(e[t])}}function Mt(t,e){return t(e)}function Tt(){}var Ot=!1;function kt(t,e,n){if(Ot)return t(e,n);Ot=!0;try{return Mt(t,e,n)}finally{Ot=!1,(null!==wt||null!==St)&&(Tt(),Pt())}}function Rt(t,e){var n=t.stateNode;if(null===n)return null;var r=Ai(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var It=!1;if(u)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){It=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(ut){It=!1}function Lt(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Dt=!1,Ft=null,Nt=!1,jt=null,zt={onError:function(t){Dt=!0,Ft=t}};function Ut(t,e,n,r,i,o,s,a,l){Dt=!1,Ft=null,Lt.apply(zt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Gt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(Vt(t)!==t)throw Error(o(188))}function Ht(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Wt(i),t;if(s===r)return Wt(i),e;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Jt(t):null}function Jt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Jt(t);if(null!==e)return e;t=t.sibling}return null}var Kt=i.unstable_scheduleCallback,Xt=i.unstable_cancelCallback,qt=i.unstable_shouldYield,Yt=i.unstable_requestPaint,Qt=i.unstable_now,Zt=i.unstable_getCurrentPriorityLevel,$t=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function de(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function he(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=de(a):0!==(o&=s)&&(r=de(o))}else 0!==(s=n&~i)?r=de(s):0!==o&&(r=de(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-se(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function be(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-se(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function xe(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var Ae,_e,we,Se,Ce,Ee=!1,Pe=[],Me=null,Te=null,Oe=null,ke=new Map,Re=new Map,Ie=[],Be="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Le(t,e){switch(t){case"focusin":case"focusout":Me=null;break;case"dragenter":case"dragleave":Te=null;break;case"mouseover":case"mouseout":Oe=null;break;case"pointerover":case"pointerout":ke.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Re.delete(e.pointerId)}}function De(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=yi(e))&&_e(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Fe(t){var e=bi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Gt(n)))return t.blockedOn=e,void Ce(t.priority,(function(){we(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ne(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=yi(n))&&_e(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,e.shift()}return!0}function je(t,e,n){Ne(t)&&n.delete(e)}function ze(){Ee=!1,null!==Me&&Ne(Me)&&(Me=null),null!==Te&&Ne(Te)&&(Te=null),null!==Oe&&Ne(Oe)&&(Oe=null),ke.forEach(je),Re.forEach(je)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ze)))}function Ve(t){function e(e){return Ue(e,t)}if(0<Pe.length){Ue(Pe[0],t);for(var n=1;n<Pe.length;n++){var r=Pe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Me&&Ue(Me,t),null!==Te&&Ue(Te,t),null!==Oe&&Ue(Oe,t),ke.forEach(e),Re.forEach(e),n=0;n<Ie.length;n++)(r=Ie[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ie.length&&null===(n=Ie[0]).blockedOn;)Fe(n),null===n.blockedOn&&Ie.shift()}var Ge=x.ReactCurrentBatchConfig,We=!0;function He(t,e,n,r){var i=ye,o=Ge.transition;Ge.transition=null;try{ye=1,Ke(t,e,n,r)}finally{ye=i,Ge.transition=o}}function Je(t,e,n,r){var i=ye,o=Ge.transition;Ge.transition=null;try{ye=4,Ke(t,e,n,r)}finally{ye=i,Ge.transition=o}}function Ke(t,e,n,r){if(We){var i=qe(t,e,n,r);if(null===i)Wr(t,e,r,Xe,n),Le(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Me=De(Me,t,e,n,r,i),!0;case"dragenter":return Te=De(Te,t,e,n,r,i),!0;case"mouseover":return Oe=De(Oe,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ke.set(o,De(ke.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Re.set(o,De(Re.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Le(t,r),4&e&&-1<Be.indexOf(t)){for(;null!==i;){var o=yi(i);if(null!==o&&Ae(o),null===(o=qe(t,e,n,r))&&Wr(t,e,r,Xe,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(t,e,r,null,n)}}var Xe=null;function qe(t,e,n,r){if(Xe=null,null!==(t=bi(t=At(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Gt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ye(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case $t:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Qe=null,Ze=null,$e=null;function tn(){if($e)return $e;var t,e,n=Ze,r=n.length,i="value"in Qe?Qe.value:Qe.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return $e=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=F({},cn,{view:0,detail:0}),hn=on(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=on(fn),gn=on(F({},fn,{dataTransfer:0})),mn=on(F({},dn,{relatedTarget:0})),vn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=F({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yn=on(bn),xn=on(F({},cn,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=wn[t])&&!!e[t]}function Cn(){return Sn}var En=F({},dn,{key:function(t){if(t.key){var e=An[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?_n[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Pn=on(En),Mn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=F({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(kn),In=[9,13,27,32],Bn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Dn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Bn||Ln&&8<Ln&&11>=Ln),Nn=String.fromCharCode(32),jn=!1;function zn(t,e){switch(t){case"keyup":return-1!==In.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Gn[t.type]:"textarea"===e}function Hn(t,e,n,r){Et(r),0<(e=Jr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jn=null,Kn=null;function Xn(t){Nr(t,0)}function qn(t){if(K(xi(t)))return t}function Yn(t,e){if("change"===t)return e}var Qn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),$n="function"===typeof tr.oninput}Zn=$n}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function er(){Jn&&(Jn.detachEvent("onpropertychange",nr),Kn=Jn=null)}function nr(t){if("value"===t.propertyName&&qn(Kn)){var e=[];Hn(e,Kn,t,At(t)),kt(Xn,e)}}function rr(t,e,n){"focusin"===t?(er(),Kn=n,(Jn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qn(Kn)}function or(t,e){if("click"===t)return qn(e)}function sr(t,e){if("input"===t||"change"===t)return qn(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function dr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?dr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function hr(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=X((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=hr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,br=null,yr=!1;function xr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Jr(vr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function Ar(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _r={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionend:Ar("Transition","TransitionEnd")},wr={},Sr={};function Cr(t){if(wr[t])return wr[t];if(!_r[t])return t;var e,n=_r[t];for(e in n)if(n.hasOwnProperty(e)&&e in Sr)return wr[t]=n[e];return t}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Cr("animationend"),Pr=Cr("animationiteration"),Mr=Cr("animationstart"),Tr=Cr("transitionend"),Or=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){Or.set(t,e),l(e,[t])}for(var Ir=0;Ir<kr.length;Ir++){var Br=kr[Ir];Rr(Br.toLowerCase(),"on"+(Br[0].toUpperCase()+Br.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Pr,"onAnimationIteration"),Rr(Mr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,s,a,l,c){if(Ut.apply(this,arguments),Dt){if(!Dt)throw Error(o(198));var u=Ft;Dt=!1,Ft=null,Nt||(Nt=!0,jt=u)}}(r,e,void 0,t),t.currentTarget=null}function Nr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break t;Fr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break t;Fr(i,a,c),o=l}}}if(Nt)throw t=jt,Nt=!1,jt=null,t}function jr(t,e){var n=e[gi];void 0===n&&(n=e[gi]=new Set);var r=t+"__bubble";n.has(r)||(Gr(e,t,2,!1),n.add(r))}function zr(t,e,n){var r=0;e&&(r|=4),Gr(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Ur]){t[Ur]=!0,s.forEach((function(e){"selectionchange"!==e&&(Dr.has(e)||zr(e,!1,t),zr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,zr("selectionchange",!1,e))}}function Gr(t,e,n,r){switch(Ye(e)){case 1:var i=He;break;case 4:i=Je;break;default:i=Ke}n=i.bind(null,e,n,t),i=void 0,!It||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=bi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue t}a=a.parentNode}}r=r.return}kt((function(){var r=o,i=At(n),s=[];t:{var a=Or.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Pn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Er:case Pr:case Mr:l=vn;break;case Tr:l=On;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&e),d=!u&&"scroll"===t,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Rt(p,h))&&u.push(Hr(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===xt||!(c=n.relatedTarget||n.fromElement)||!bi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bi(c):null)&&(c!==(d=Vt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Mn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:xi(l),f=null==c?a:xi(c),(a=new u(g,p+"leave",l,n,i)).target=d,a.relatedTarget=f,g=null,bi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)t:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,g=h;g;g=Kr(g))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break t;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Xr(s,a,l,u,!1),null!==c&&null!==d&&Xr(s,d,c,u,!0)}if("select"===(l=(a=r?xi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(Wn(a))if(Qn)m=sr;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(t,r))?Hn(s,m,n,i):(v&&v(t,a,r),"focusout"===t&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&tt(a,"number",a.value)),v=r?xi(r):window,t){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,br=null);break;case"focusout":br=vr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,xr(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(s,n,i)}var b;if(Bn)t:{switch(t){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Vn?zn(t,n)&&(y="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(y="onCompositionStart");y&&(Fn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Vn&&(b=tn()):(Ze="value"in(Qe=i)?Qe.value:Qe.textContent,Vn=!0)),0<(v=Jr(r,y)).length&&(y=new xn(y,t,null,n,i),s.push({event:y,listeners:v}),b?y.data=b:null!==(b=Un(n))&&(y.data=b))),(b=Dn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(jn=!0,Nn);case"textInput":return(t=e.data)===Nn&&jn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Bn&&zn(t,e)?(t=tn(),$e=Ze=Qe=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Jr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b))}Nr(s,e)}))}function Hr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Rt(t,n))&&r.unshift(Hr(t,o,i)),null!=(o=Rt(t,e))&&r.push(Hr(t,o,i))),t=t.return}return r}function Kr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Xr(t,e,n,r,i){for(var o=e._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Rt(n,o))&&s.unshift(Hr(n,l,a)):i||null!=(l=Rt(n,o))&&s.push(Hr(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(t){return("string"===typeof t?t:""+t).replace(qr,"\n").replace(Yr,"")}function Zr(t,e,n){if(e=Qr(e),Qr(t)!==e&&n)throw Error(o(425))}function $r(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(ai)}:ri;function ai(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function ci(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,vi="__reactHandles$"+di;function bi(t){var e=t[hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[hi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ui(t);null!==t;){if(n=t[hi])return n;t=ui(t)}return e}n=(t=n).parentNode}return null}function yi(t){return!(t=t[hi]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function Ai(t){return t[fi]||null}var _i=[],wi=-1;function Si(t){return{current:t}}function Ci(t){0>wi||(t.current=_i[wi],_i[wi]=null,wi--)}function Ei(t,e){wi++,_i[wi]=t.current,t.current=e}var Pi={},Mi=Si(Pi),Ti=Si(!1),Oi=Pi;function ki(t,e){var n=t.type.contextTypes;if(!n)return Pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ii(){Ci(Ti),Ci(Mi)}function Bi(t,e,n){if(Mi.current!==Pi)throw Error(o(168));Ei(Mi,e),Ei(Ti,n)}function Li(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,G(t)||"Unknown",i));return F({},n,r)}function Di(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,Oi=Mi.current,Ei(Mi,t),Ei(Ti,Ti.current),!0}function Fi(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Li(t,e,Oi),r.__reactInternalMemoizedMergedChildContext=t,Ci(Ti),Ci(Mi),Ei(Mi,t)):Ci(Ti),Ei(Ti,n)}var Ni=null,ji=!1,zi=!1;function Ui(t){null===Ni?Ni=[t]:Ni.push(t)}function Vi(){if(!zi&&null!==Ni){zi=!0;var t=0,e=ye;try{var n=Ni;for(ye=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Ni=null,ji=!1}catch(i){throw null!==Ni&&(Ni=Ni.slice(t+1)),Kt($t,Vi),i}finally{ye=e,zi=!1}}return null}var Gi=[],Wi=0,Hi=null,Ji=0,Ki=[],Xi=0,qi=null,Yi=1,Qi="";function Zi(t,e){Gi[Wi++]=Ji,Gi[Wi++]=Hi,Hi=t,Ji=e}function $i(t,e,n){Ki[Xi++]=Yi,Ki[Xi++]=Qi,Ki[Xi++]=qi,qi=t;var r=Yi;t=Qi;var i=32-se(r)-1;r&=~(1<<i),n+=1;var o=32-se(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-se(e)+i|n<<i|r,Qi=o+t}else Yi=1<<o|n<<i|r,Qi=t}function to(t){null!==t.return&&(Zi(t,1),$i(t,1,0))}function eo(t){for(;t===Hi;)Hi=Gi[--Wi],Gi[Wi]=null,Ji=Gi[--Wi],Gi[Wi]=null;for(;t===qi;)qi=Ki[--Xi],Ki[Xi]=null,Qi=Ki[--Xi],Ki[Xi]=null,Yi=Ki[--Xi],Ki[Xi]=null}var no=null,ro=null,io=!1,oo=null;function so(t,e){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ao(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ci(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==qi?{id:Yi,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(io){var e=ro;if(e){var n=e;if(!ao(t,e)){if(lo(t))throw Error(o(418));e=ci(n.nextSibling);var r=no;e&&ao(t,e)?so(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return uo(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw fo(),Error(o(418));for(;e;)so(t,e),e=ci(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ci(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ci(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=ro;t;)t=ci(t.nextSibling)}function po(){ro=no=null,io=!1}function go(t){null===oo?oo=[t]:oo.push(t)}var mo=x.ReactCurrentBatchConfig;function vo(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var bo=Si(null),yo=null,xo=null,Ao=null;function _o(){Ao=xo=yo=null}function wo(t){var e=bo.current;Ci(bo),t._currentValue=e}function So(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Co(t,e){yo=t,Ao=xo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(xa=!0),t.firstContext=null)}function Eo(t){var e=t._currentValue;if(Ao!==t)if(t={context:t,memoizedValue:e,next:null},null===xo){if(null===yo)throw Error(o(308));xo=t,yo.dependencies={lanes:0,firstContext:t}}else xo=xo.next=t;return e}var Po=null;function Mo(t){null===Po?Po=[t]:Po.push(t)}function To(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Mo(e)):(n.next=i.next,i.next=n),e.interleaved=n,Oo(t,r)}function Oo(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var ko=!1;function Ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Io(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lo(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Oo(t,n)}return null===(i=r.interleaved)?(e.next=e,Mo(r)):(e.next=i.next,i.next=e),r.interleaved=e,Oo(t,n)}function Do(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,be(t,n)}}function Fo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function No(t,e,n,r){var i=t.updateQueue;ko=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break t}d=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break t;d=F({},d,h);break t;case 2:ko=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Fl|=s,t.lanes=s,t.memoizedState=d}}function jo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var zo=(new r.Component).refs;function Uo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ec(),i=nc(t),o=Bo(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Lo(t,o,i))&&(rc(e,t,i,r),Do(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ec(),i=nc(t),o=Bo(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Lo(t,o,i))&&(rc(e,t,i,r),Do(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),r=nc(t),i=Bo(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Lo(t,i,r))&&(rc(e,t,r,n),Do(e,t,r))}};function Go(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Wo(t,e,n){var r=!1,i=Pi,o=e.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(i=Ri(e)?Oi:Mi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?ki(t,i):Pi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ho(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function Jo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=zo,Ro(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Eo(o):(o=Ri(e)?Oi:Mi.current,i.context=ki(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Uo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),No(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Ko(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=i.refs;e===zo&&(e=i.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Xo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qo(t){return(0,t._init)(t._payload)}function Yo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Bc(t,e)).index=0,t.sibling=null,t}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Nc(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){var o=n.type;return o===w?d(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&qo(o)===e.type)?((r=i(e,n.props)).ref=Ko(t,e,n),r.return=t,r):((r=Lc(n.type,n.key,n.props,null,t.mode,r)).ref=Ko(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=jc(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function d(t,e,n,r,o){return null===e||7!==e.tag?((e=Dc(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Nc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case A:return(n=Lc(e.type,e.key,e.props,null,t.mode,n)).ref=Ko(t,null,e),n.return=t,n;case _:return(e=jc(e,t.mode,n)).return=t,e;case R:return h(t,(0,e._init)(e._payload),n)}if(et(e)||L(e))return(e=Dc(e,t.mode,n,null)).return=t,e;Xo(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case A:return n.key===i?c(t,e,n,r):null;case _:return n.key===i?u(t,e,n,r):null;case R:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||L(n))return null!==i?null:d(t,e,n,r,null);Xo(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case A:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case _:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case R:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||L(r))return d(e,t=t.get(n)||null,r,i,null);Xo(e,r)}return null}function g(i,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(i,d,a[g],l);if(null===v){null===d&&(d=m);break}t&&d&&null===v.alternate&&e(i,d),o=s(v,o,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===a.length)return n(i,d),io&&Zi(i,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&Zi(i,g),c}for(d=r(i,d);g<a.length;g++)null!==(m=p(d,i,g,a[g],l))&&(t&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return t&&d.forEach((function(t){return e(i,t)})),io&&Zi(i,g),c}function m(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,v=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var y=f(i,g,b.value,c);if(null===y){null===g&&(g=v);break}t&&g&&null===y.alternate&&e(i,g),a=s(y,a,m),null===d?u=y:d.sibling=y,d=y,g=v}if(b.done)return n(i,g),io&&Zi(i,m),u;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=h(i,b.value,c))&&(a=s(b,a,m),null===d?u=b:d.sibling=b,d=b);return io&&Zi(i,m),u}for(g=r(i,g);!b.done;m++,b=l.next())null!==(b=p(g,i,m,b.value,c))&&(t&&null!==b.alternate&&g.delete(null===b.key?m:b.key),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b);return t&&g.forEach((function(t){return e(i,t)})),io&&Zi(i,m),u}return function t(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===w&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case A:t:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===w){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&qo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Ko(r,u,s),o.return=r,r=o;break t}n(r,u);break}e(r,u),u=u.sibling}s.type===w?((o=Dc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Lc(s.type,s.key,s.props,null,r.mode,l)).ref=Ko(r,o,s),l.return=r,r=l)}return a(r);case _:t:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=jc(s,r.mode,l)).return=r,r=o}return a(r);case R:return t(r,o,(u=s._init)(s._payload),l)}if(et(s))return g(r,o,s,l);if(L(s))return m(r,o,s,l);Xo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Nc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Qo=Yo(!0),Zo=Yo(!1),$o={},ts=Si($o),es=Si($o),ns=Si($o);function rs(t){if(t===$o)throw Error(o(174));return t}function is(t,e){switch(Ei(ns,e),Ei(es,t),Ei(ts,$o),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ci(ts),Ei(ts,e)}function os(){Ci(ts),Ci(es),Ci(ns)}function ss(t){rs(ns.current);var e=rs(ts.current),n=lt(e,t.type);e!==n&&(Ei(es,t),Ei(ts,n))}function as(t){es.current===t&&(Ci(ts),Ci(es))}var ls=Si(0);function cs(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var us=[];function ds(){for(var t=0;t<us.length;t++)us[t]._workInProgressVersionPrimary=null;us.length=0}var hs=x.ReactCurrentDispatcher,fs=x.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,vs=null,bs=!1,ys=!1,xs=0,As=0;function _s(){throw Error(o(321))}function ws(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function Ss(t,e,n,r,i,s){if(ps=s,gs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hs.current=null===t||null===t.memoizedState?aa:la,t=n(r,i),ys){s=0;do{if(ys=!1,xs=0,25<=s)throw Error(o(301));s+=1,vs=ms=null,e.updateQueue=null,hs.current=ca,t=n(r,i)}while(ys)}if(hs.current=sa,e=null!==ms&&null!==ms.next,ps=0,vs=ms=gs=null,bs=!1,e)throw Error(o(300));return t}function Cs(){var t=0!==xs;return xs=0,t}function Es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=t:vs=vs.next=t,vs}function Ps(){if(null===ms){var t=gs.alternate;t=null!==t?t.memoizedState:null}else t=ms.next;var e=null===vs?gs.memoizedState:vs.next;if(null!==e)vs=e,ms=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ms=t).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=t:vs=vs.next=t}return vs}function Ms(t,e){return"function"===typeof e?e(t):e}function Ts(t){var e=Ps(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ms,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ps&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,gs.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,e.memoizedState)||(xa=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{s=i.lane,gs.lanes|=s,Fl|=s,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Os(t){var e=Ps(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=t(s,a.action),a=a.next}while(a!==i);ar(s,e.memoizedState)||(xa=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ks(){}function Rs(t,e){var n=gs,r=Ps(),i=e(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,xa=!0),r=r.queue,Ws(Ls.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,js(9,Bs.bind(null,n,r,i,e),void 0,null),null===Ol)throw Error(o(349));0!==(30&ps)||Is(n,e,i)}return i}function Is(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Bs(t,e,n,r){e.value=n,e.getSnapshot=r,Ds(e)&&Fs(t)}function Ls(t,e,n){return n((function(){Ds(e)&&Fs(t)}))}function Ds(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(r){return!0}}function Fs(t){var e=Oo(t,1);null!==e&&rc(e,t,1,-1)}function Ns(t){var e=Es();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,gs,t),[e.memoizedState,t]}function js(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function zs(){return Ps().memoizedState}function Us(t,e,n,r){var i=Es();gs.flags|=t,i.memoizedState=js(1|e,n,void 0,void 0===r?null:r)}function Vs(t,e,n,r){var i=Ps();r=void 0===r?null:r;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==r&&ws(r,s.deps))return void(i.memoizedState=js(e,n,o,r))}gs.flags|=t,i.memoizedState=js(1|e,n,o,r)}function Gs(t,e){return Us(8390656,8,t,e)}function Ws(t,e){return Vs(2048,8,t,e)}function Hs(t,e){return Vs(4,2,t,e)}function Js(t,e){return Vs(4,4,t,e)}function Ks(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Xs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Vs(4,4,Ks.bind(null,e,t),n)}function qs(){}function Ys(t,e){var n=Ps();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ws(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qs(t,e){var n=Ps();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ws(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Zs(t,e,n){return 0===(21&ps)?(t.baseState&&(t.baseState=!1,xa=!0),t.memoizedState=n):(ar(n,e)||(n=ge(),gs.lanes|=n,Fl|=n,t.baseState=!0),e)}function $s(t,e){var n=ye;ye=0!==n&&4>n?n:4,t(!0);var r=fs.transition;fs.transition={};try{t(!1),e()}finally{ye=n,fs.transition=r}}function ta(){return Ps().memoizedState}function ea(t,e,n){var r=nc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(t))ia(e,n);else if(null!==(n=To(t,e,n,r))){rc(n,t,r,ec()),oa(n,e,r)}}function na(t,e,n){var r=nc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(t))ia(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=e.interleaved;return null===l?(i.next=i,Mo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(c){}null!==(n=To(t,e,i,r))&&(rc(n,t,r,i=ec()),oa(n,e,r))}}function ra(t){var e=t.alternate;return t===gs||null!==e&&e===gs}function ia(t,e){ys=bs=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oa(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,be(t,n)}}var sa={readContext:Eo,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useInsertionEffect:_s,useLayoutEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useMutableSource:_s,useSyncExternalStore:_s,useId:_s,unstable_isNewReconciler:!1},aa={readContext:Eo,useCallback:function(t,e){return Es().memoizedState=[t,void 0===e?null:e],t},useContext:Eo,useEffect:Gs,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Us(4194308,4,Ks.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Us(4194308,4,t,e)},useInsertionEffect:function(t,e){return Us(4,2,t,e)},useMemo:function(t,e){var n=Es();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Es();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ea.bind(null,gs,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Es().memoizedState=t},useState:Ns,useDebugValue:qs,useDeferredValue:function(t){return Es().memoizedState=t},useTransition:function(){var t=Ns(!1),e=t[0];return t=$s.bind(null,t[1]),Es().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gs,i=Es();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Ol)throw Error(o(349));0!==(30&ps)||Is(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Gs(Ls.bind(null,r,s,t),[t]),r.flags|=2048,js(9,Bs.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Es(),e=Ol.identifierPrefix;if(io){var n=Qi;e=":"+e+"R"+(n=(Yi&~(1<<32-se(Yi)-1)).toString(32)+n),0<(n=xs++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=As++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Eo,useCallback:Ys,useContext:Eo,useEffect:Ws,useImperativeHandle:Xs,useInsertionEffect:Hs,useLayoutEffect:Js,useMemo:Qs,useReducer:Ts,useRef:zs,useState:function(){return Ts(Ms)},useDebugValue:qs,useDeferredValue:function(t){return Zs(Ps(),ms.memoizedState,t)},useTransition:function(){return[Ts(Ms)[0],Ps().memoizedState]},useMutableSource:ks,useSyncExternalStore:Rs,useId:ta,unstable_isNewReconciler:!1},ca={readContext:Eo,useCallback:Ys,useContext:Eo,useEffect:Ws,useImperativeHandle:Xs,useInsertionEffect:Hs,useLayoutEffect:Js,useMemo:Qs,useReducer:Os,useRef:zs,useState:function(){return Os(Ms)},useDebugValue:qs,useDeferredValue:function(t){var e=Ps();return null===ms?e.memoizedState=t:Zs(e,ms.memoizedState,t)},useTransition:function(){return[Os(Ms)[0],Ps().memoizedState]},useMutableSource:ks,useSyncExternalStore:Rs,useId:ta,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",r=e;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function da(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ha(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,Jl=r),ha(0,e)},n}function ga(t,e,n){(n=Bo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,e),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new fa;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ec.bind(null,t,e,n),e.then(t,t))}function va(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ba(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Bo(-1,1)).tag=2,Lo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var ya=x.ReactCurrentOwner,xa=!1;function Aa(t,e,n,r){e.child=null===t?Zo(e,null,n,r):Qo(e,t.child,n,r)}function _a(t,e,n,r,i){n=n.render;var o=e.ref;return Co(e,i),r=Ss(t,e,n,r,o,i),n=Cs(),null===t||xa?(io&&n&&to(e),e.flags|=1,Aa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ha(t,e,i))}function wa(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Ic(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Lc(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Sa(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&t.ref===e.ref)return Ha(t,e,i)}return e.flags|=1,(t=Bc(o,r)).ref=e.ref,t.return=e,e.child=t}function Sa(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(xa=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Ha(t,e,i);0!==(131072&t.flags)&&(xa=!0)}}return Pa(t,e,n,r,i)}function Ca(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Bl,Il),Il|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ei(Bl,Il),Il|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ei(Bl,Il),Il|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ei(Bl,Il),Il|=r;return Aa(t,e,i,n),e.child}function Ea(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pa(t,e,n,r,i){var o=Ri(n)?Oi:Mi.current;return o=ki(e,o),Co(e,i),n=Ss(t,e,n,r,o,i),r=Cs(),null===t||xa?(io&&r&&to(e),e.flags|=1,Aa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ha(t,e,i))}function Ma(t,e,n,r,i){if(Ri(n)){var o=!0;Di(e)}else o=!1;if(Co(e,i),null===e.stateNode)Wa(t,e),Wo(e,n,r),Jo(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Eo(c):c=ki(e,c=Ri(n)?Oi:Mi.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Ho(e,s,r,c),ko=!1;var h=e.memoizedState;s.state=h,No(e,r,s,i),l=e.memoizedState,a!==r||h!==l||Ti.current||ko?("function"===typeof u&&(Uo(e,n,u,r),l=e.memoizedState),(a=ko||Go(e,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Io(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vo(e.type,a),s.props=c,d=e.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Eo(l):l=ki(e,l=Ri(n)?Oi:Mi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Ho(e,s,r,l),ko=!1,h=e.memoizedState,s.state=h,No(e,r,s,i);var p=e.memoizedState;a!==d||h!==p||Ti.current||ko?("function"===typeof f&&(Uo(e,n,f,r),p=e.memoizedState),(c=ko||Go(e,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ta(t,e,n,r,o,i)}function Ta(t,e,n,r,i,o){Ea(t,e);var s=0!==(128&e.flags);if(!r&&!s)return i&&Fi(e,n,!1),Ha(t,e,o);r=e.stateNode,ya.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=Qo(e,t.child,null,o),e.child=Qo(e,null,a,o)):Aa(t,e,a,o),e.memoizedState=r.state,i&&Fi(e,n,!0),e.child}function Oa(t){var e=t.stateNode;e.pendingContext?Bi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Bi(0,e.context,!1),is(t,e.containerInfo)}function ka(t,e,n,r,i){return po(),go(i),e.flags|=256,Aa(t,e,n,r),e.child}var Ra,Ia,Ba,La,Da={dehydrated:null,treeContext:null,retryLane:0};function Fa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Na(t,e,n){var r,i=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&s)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Ei(ls,1&s),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),t=Dc(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fa(n),e.memoizedState=Da,t):ja(e,l));if(null!==(s=t.memoizedState)&&null!==(r=s.dehydrated))return function(t,e,n,r,i,s,a){if(n)return 256&e.flags?(e.flags&=-257,za(t,e,a,r=da(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(s=Dc(s,i,a,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,0!==(1&e.mode)&&Qo(e,t.child,null,a),e.child.memoizedState=Fa(a),e.memoizedState=Da,s);if(0===(1&e.mode))return za(t,e,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(t,e,a,r=da(s=Error(o(419)),r,void 0))}if(l=0!==(a&t.childLanes),xa||l){if(null!==(r=Ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Oo(t,i),rc(r,t,i,-1))}return mc(),za(t,e,a,r=da(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Mc.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ro=ci(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Ki[Xi++]=Yi,Ki[Xi++]=Qi,Ki[Xi++]=qi,Yi=t.id,Qi=t.overflow,qi=e),e=ja(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,s,n);if(a){a=i.fallback,l=e.mode,r=(s=t.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=c,e.deletions=null):(i=Bc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Bc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Da,i}return t=(a=t.child).sibling,i=Bc(a,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function ja(t,e){return(e=Fc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function za(t,e,n,r){return null!==r&&go(r),Qo(e,t.child,null,n),(t=ja(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ua(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),So(t.return,e,n)}function Va(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ga(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Aa(t,e,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ua(t,n,e);else if(19===t.tag)Ua(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ei(ls,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===cs(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Va(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===cs(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Va(e,!0,n,null,o);break;case"together":Va(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wa(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ha(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Bc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Bc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ja(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ka(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xa(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(e),null;case 1:case 17:return Ri(e.type)&&Ii(),Ka(e),null;case 3:return r=e.stateNode,os(),Ci(Ti),Ci(Mi),ds(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ia(t,e),Ka(e),null;case 5:as(e);var i=rs(ns.current);if(n=e.type,null!==t&&null!=e.stateNode)Ba(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Ka(e),null}if(t=rs(ts.current),ho(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[hi]=e,r[fi]=s,t=0!==(1&e.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,s),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jr("invalid",r);break;case"textarea":it(r,s),jr("invalid",r)}for(var l in bt(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,t),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,t),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":J(r),$(r,s,!0);break;case"textarea":J(r),st(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[hi]=e,t[fi]=r,Ra(t,e,!1,!1),e.stateNode=t;t:{switch(l=yt(n,r),n){case"dialog":jr("cancel",t),jr("close",t),i=r;break;case"iframe":case"object":case"embed":jr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],t);i=r;break;case"source":jr("error",t),i=r;break;case"img":case"image":case"link":jr("error",t),jr("load",t),i=r;break;case"details":jr("toggle",t),i=r;break;case"input":Y(t,r),i=q(t,r),jr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),jr("invalid",t)}for(s in bt(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?mt(t,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&dt(t,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&ht(t,u):"number"===typeof u&&ht(t,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&jr("scroll",t):null!=u&&y(t,s,u,l))}switch(n){case"input":J(t),$(t,r,!1);break;case"textarea":J(t),st(t);break;case"option":null!=r.value&&t.setAttribute("value",""+W(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?nt(t,!!r.multiple,s,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ka(e),null;case 6:if(t&&null!=e.stateNode)La(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(ts.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[hi]=e,(s=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Zr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=e,e.stateNode=r}return Ka(e),null;case 13:if(Ci(ls),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,s=!1;else if(s=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!s)throw Error(o(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ka(e),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Ll&&(Ll=3):mc())),null!==e.updateQueue&&(e.flags|=4),Ka(e),null);case 4:return os(),Ia(t,e),null===t&&Vr(e.stateNode.containerInfo),Ka(e),null;case 10:return wo(e.type._context),Ka(e),null;case 19:if(Ci(ls),null===(s=e.memoizedState))return Ka(e),null;if(r=0!==(128&e.flags),null===(l=s.rendering))if(r)Ja(s,!1);else{if(0!==Ll||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=cs(t))){for(e.flags|=128,Ja(s,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ei(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&Qt()>Gl&&(e.flags|=128,r=!0,Ja(s,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=cs(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ja(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ka(e),null}else 2*Qt()-s.renderingStartTime>Gl&&1073741824!==n&&(e.flags|=128,r=!0,Ja(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,n=ls.current,Ei(ls,r?1&n|2:1&n),e):(Ka(e),null);case 22:case 23:return hc(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Il)&&(Ka(e),6&e.subtreeFlags&&(e.flags|=8192)):Ka(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function qa(t,e){switch(eo(e),e.tag){case 1:return Ri(e.type)&&Ii(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return os(),Ci(Ti),Ci(Mi),ds(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(Ci(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ci(ls),null;case 4:return os(),null;case 10:return wo(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ra=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ia=function(){},Ba=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rs(ts.current);var o,s=null;switch(n){case"input":i=q(t,i),r=q(t,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=rt(t,i),r=rt(t,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=$r)}for(u in bt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}},La=function(t,e,n,r){n!==r&&(e.flags|=4)};var Ya=!1,Qa=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Cc(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,n,o)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[hi],delete e[fi],delete e[gi],delete e[mi],delete e[vi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=$r));else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var dl=null,hl=!1;function fl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(a){}switch(n.tag){case 5:Qa||tl(n,e);case 6:var r=dl,i=hl;dl=null,fl(t,e,n),hl=i,null!==(dl=r)&&(hl?(t=dl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(t=dl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ve(t)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(t,e,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,e,s),i=i.next}while(i!==r)}fl(t,e,n);break;case 1:if(!Qa&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cc(n,e,a)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?(Qa=(r=Qa)||null!==n.memoizedState,fl(t,e,n),Qa=r):fl(t,e,n);break;default:fl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Za),e.forEach((function(e){var r=Tc.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break t;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===dl)throw Error(o(160));pl(s,a,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)vl(e,t),e=e.sibling}function vl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),bl(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(m){Cc(t,t.return,m)}try{rl(5,t,t.return)}catch(m){Cc(t,t.return,m)}}break;case 1:ml(e,t),bl(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),bl(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{ht(i,"")}catch(m){Cc(t,t.return,m)}}if(4&r&&null!=(i=t.stateNode)){var s=t.memoizedProps,a=null!==n?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),yt(l,a);var u=yt(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?mt(i,h):"dangerouslySetInnerHTML"===d?dt(i,h):"children"===d?ht(i,h):y(i,d,h,u)}switch(l){case"input":Z(i,s);break;case"textarea":ot(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?nt(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?nt(i,!!s.multiple,s.defaultValue,!0):nt(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Cc(t,t.return,m)}}break;case 6:if(ml(e,t),bl(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Cc(t,t.return,m)}}break;case 3:if(ml(e,t),bl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(m){Cc(t,t.return,m)}break;case 4:default:ml(e,t),bl(t);break;case 13:ml(e,t),bl(t),8192&(i=t.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Qt())),4&r&&gl(t);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&t.mode?(Qa=(u=Qa)||d,ml(e,t),Qa=u):ml(e,t),bl(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!d&&0!==(1&t.mode))for($a=t,d=t.child;null!==d;){for(h=$a=d;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Cc(r,n,m)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==p?(p.return=f,$a=p):_l(h)}d=d.sibling}t:for(d=null,h=t;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",a))}catch(m){Cc(t,t.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Cc(t,t.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===t)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===t)break t;for(;null===h.sibling;){if(null===h.return||h.return===t)break t;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(e,t),bl(t),4&r&&gl(t);case 21:}}function bl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ht(i,""),r.flags&=-33),ul(t,ll(t),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(t,ll(t),s);break;default:throw Error(o(161))}}catch(a){Cc(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){$a=t,xl(t,e,n)}function xl(t,e,n){for(var r=0!==(1&t.mode);null!==$a;){var i=$a,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ya;var c=Qa;if(Ya=s,(Qa=l)&&!c)for($a=i;null!==$a;)l=(s=$a).child,22===s.tag&&null!==s.memoizedState?wl(i):null!==l?(l.return=s,$a=l):wl(i);for(;null!==o;)$a=o,xl(o,e,n),o=o.sibling;$a=i,Ya=a,Qa=c}Al(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$a=o):Al(t)}}function Al(t){for(;null!==$a;){var e=$a;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qa||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Qa)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&jo(e,s,r);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}jo(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ve(h)}}}break;default:throw Error(o(163))}Qa||512&e.flags&&ol(e)}catch(f){Cc(e,e.return,f)}}if(e===t){$a=null;break}if(null!==(n=e.sibling)){n.return=e.return,$a=n;break}$a=e.return}}function _l(t){for(;null!==$a;){var e=$a;if(e===t){$a=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$a=n;break}$a=e.return}}function wl(t){for(;null!==$a;){var e=$a;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Cc(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Cc(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Cc(e,o,l)}break;case 5:var s=e.return;try{ol(e)}catch(l){Cc(e,s,l)}}}catch(l){Cc(e,e.return,l)}if(e===t){$a=null;break}var a=e.sibling;if(null!==a){a.return=e.return,$a=a;break}$a=e.return}}var Sl,Cl=Math.ceil,El=x.ReactCurrentDispatcher,Pl=x.ReactCurrentOwner,Ml=x.ReactCurrentBatchConfig,Tl=0,Ol=null,kl=null,Rl=0,Il=0,Bl=Si(0),Ll=0,Dl=null,Fl=0,Nl=0,jl=0,zl=null,Ul=null,Vl=0,Gl=1/0,Wl=null,Hl=!1,Jl=null,Kl=null,Xl=!1,ql=null,Yl=0,Ql=0,Zl=null,$l=-1,tc=0;function ec(){return 0!==(6&Tl)?Qt():-1!==$l?$l:$l=Qt()}function nc(t){return 0===(1&t.mode)?1:0!==(2&Tl)&&0!==Rl?Rl&-Rl:null!==mo.transition?(0===tc&&(tc=ge()),tc):0!==(t=ye)?t:t=void 0===(t=window.event)?16:Ye(t.type)}function rc(t,e,n,r){if(50<Ql)throw Ql=0,Zl=null,Error(o(185));ve(t,n,r),0!==(2&Tl)&&t===Ol||(t===Ol&&(0===(2&Tl)&&(Nl|=n),4===Ll&&lc(t,Rl)),ic(t,r),1===n&&0===Tl&&0===(1&e.mode)&&(Gl=Qt()+500,ji&&Vi()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-se(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=fe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var r=he(t,t===Ol?Rl:0);if(0===r)null!==n&&Xt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Xt(n),1===e)0===t.tag?function(t){ji=!0,Ui(t)}(cc.bind(null,t)):Ui(cc.bind(null,t)),si((function(){0===(6&Tl)&&Vi()})),n=null;else{switch(xe(r)){case 1:n=$t;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Oc(n,oc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oc(t,e){if($l=-1,tc=0,0!==(6&Tl))throw Error(o(327));var n=t.callbackNode;if(wc()&&t.callbackNode!==n)return null;var r=he(t,t===Ol?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=vc(t,r);else{e=r;var i=Tl;Tl|=2;var s=gc();for(Ol===t&&Rl===e||(Wl=null,Gl=Qt()+500,fc(t,e));;)try{yc();break}catch(l){pc(t,l)}_o(),El.current=s,Tl=i,null!==kl?e=0:(Ol=null,Rl=0,e=Ll)}if(0!==e){if(2===e&&(0!==(i=pe(t))&&(r=i,e=sc(t,i))),1===e)throw n=Dl,fc(t,0),lc(t,r),ic(t,Qt()),n;if(6===e)lc(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=vc(t,r))&&(0!==(s=pe(t))&&(r=s,e=sc(t,s))),1===e))throw n=Dl,fc(t,0),lc(t,r),ic(t,Qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:_c(t,Ul,Wl);break;case 3:if(lc(t,r),(130023424&r)===r&&10<(e=Vl+500-Qt())){if(0!==he(t,0))break;if(((i=t.suspendedLanes)&r)!==r){ec(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(_c.bind(null,t,Ul,Wl),e);break}_c(t,Ul,Wl);break;case 4:if(lc(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-se(r);s=1<<a,(a=e[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){t.timeoutHandle=ri(_c.bind(null,t,Ul,Wl),r);break}_c(t,Ul,Wl);break;default:throw Error(o(329))}}}return ic(t,Qt()),t.callbackNode===n?oc.bind(null,t):null}function sc(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),2!==(t=vc(t,e))&&(e=Ul,Ul=n,null!==e&&ac(e)),t}function ac(t){null===Ul?Ul=t:Ul.push.apply(Ul,t)}function lc(t,e){for(e&=~jl,e&=~Nl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),r=1<<n;t[n]=-1,e&=~r}}function cc(t){if(0!==(6&Tl))throw Error(o(327));wc();var e=he(t,0);if(0===(1&e))return ic(t,Qt()),null;var n=vc(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=sc(t,r))}if(1===n)throw n=Dl,fc(t,0),lc(t,e),ic(t,Qt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_c(t,Ul,Wl),ic(t,Qt()),null}function uc(t,e){var n=Tl;Tl|=1;try{return t(e)}finally{0===(Tl=n)&&(Gl=Qt()+500,ji&&Vi())}}function dc(t){null!==ql&&0===ql.tag&&0===(6&Tl)&&wc();var e=Tl;Tl|=1;var n=Ml.transition,r=ye;try{if(Ml.transition=null,ye=1,t)return t()}finally{ye=r,Ml.transition=n,0===(6&(Tl=e))&&Vi()}}function hc(){Il=Bl.current,Ci(Bl)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==kl)for(n=kl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:os(),Ci(Ti),Ci(Mi),ds();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ci(ls);break;case 10:wo(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ol=t,kl=t=Bc(t.current,null),Rl=Il=e,Ll=0,Dl=null,jl=Nl=Fl=0,Ul=zl=null,null!==Po){for(e=0;e<Po.length;e++)if(null!==(r=(n=Po[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Po=null}return t}function pc(t,e){for(;;){var n=kl;try{if(_o(),hs.current=sa,bs){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}bs=!1}if(ps=0,vs=ms=gs=null,ys=!1,xs=0,Pl.current=null,null===n||null===n.return){Ll=1,Dl=e,kl=null;break}t:{var s=t,a=n.return,l=n,c=e;if(e=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ba(p,a,l,0,e),1&p.mode&&ma(s,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ma(s,u,e),mc();break t}c=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ba(v,a,l,0,e),go(ua(c,l));break t}}s=c=ua(c,l),4!==Ll&&(Ll=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,Fo(s,pa(0,c,e));break t;case 1:l=c;var b=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Kl||!Kl.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e,Fo(s,ga(s,l,e));break t}}s=s.return}while(null!==s)}Ac(n)}catch(x){e=x,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function gc(){var t=El.current;return El.current=sa,null===t?sa:t}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Ol||0===(268435455&Fl)&&0===(268435455&Nl)||lc(Ol,Rl)}function vc(t,e){var n=Tl;Tl|=2;var r=gc();for(Ol===t&&Rl===e||(Wl=null,fc(t,e));;)try{bc();break}catch(i){pc(t,i)}if(_o(),Tl=n,El.current=r,null!==kl)throw Error(o(261));return Ol=null,Rl=0,Ll}function bc(){for(;null!==kl;)xc(kl)}function yc(){for(;null!==kl&&!qt();)xc(kl)}function xc(t){var e=Sl(t.alternate,t,Il);t.memoizedProps=t.pendingProps,null===e?Ac(t):kl=e,Pl.current=null}function Ac(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Xa(n,e,Il)))return void(kl=n)}else{if(null!==(n=qa(n,e)))return n.flags&=32767,void(kl=n);if(null===t)return Ll=6,void(kl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(kl=e);kl=e=t}while(null!==e);0===Ll&&(Ll=5)}function _c(t,e,n){var r=ye,i=Ml.transition;try{Ml.transition=null,ye=1,function(t,e,n,r){do{wc()}while(null!==ql);if(0!==(6&Tl))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-se(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,s),t===Ol&&(kl=Ol=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Oc(ee,(function(){return wc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ml.transition,Ml.transition=null;var a=ye;ye=1;var l=Tl;Tl|=4,Pl.current=null,function(t,e){if(ti=We,fr(t=hr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(A){n=null;break t}var a=0,l=-1,c=-1,u=0,d=0,h=t,f=null;e:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===t)break e;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},We=!1,$a=e;null!==$a;)if(t=(e=$a).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,$a=t;else for(;null!==$a;){e=$a;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,b=e.stateNode,y=b.getSnapshotBeforeUpdate(e.elementType===e.type?m:vo(e.type,m),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(A){Cc(e,e.return,A)}if(null!==(t=e.sibling)){t.return=e.return,$a=t;break}$a=e.return}g=nl,nl=!1}(t,n),vl(n,t),pr(ei),We=!!ti,ei=ti=null,t.current=n,yl(n,t,i),Yt(),Tl=l,ye=a,Ml.transition=s}else t.current=n;if(Xl&&(Xl=!1,ql=t,Yl=i),s=t.pendingLanes,0===s&&(Kl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,Qt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,t=Jl,Jl=null,t;0!==(1&Yl)&&0!==t.tag&&wc(),s=t.pendingLanes,0!==(1&s)?t===Zl?Ql++:(Ql=0,Zl=t):Ql=0,Vi()}(t,e,n,r)}finally{Ml.transition=i,ye=r}return null}function wc(){if(null!==ql){var t=xe(Yl),e=Ml.transition,n=ye;try{if(Ml.transition=null,ye=16>t?16:t,null===ql)var r=!1;else{if(t=ql,ql=null,Yl=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,$a=t.current;null!==$a;){var s=$a,a=s.child;if(0!==(16&$a.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var d=$a;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var h=d.child;if(null!==h)h.return=d,$a=h;else for(;null!==$a;){var f=(d=$a).sibling,p=d.return;if(sl(d),d===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$a=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,$a=a;else t:for(;null!==$a;){if(0!==(2048&(s=$a).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,$a=b;break t}$a=s.return}}var y=t.current;for($a=y;null!==$a;){var x=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,$a=x;else t:for(a=y;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Cc(l,l.return,_)}if(l===a){$a=null;break t}var A=l.sibling;if(null!==A){A.return=l.return,$a=A;break t}$a=l.return}}if(Tl=i,Vi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(_){}r=!0}return r}finally{ye=n,Ml.transition=e}}return!1}function Sc(t,e,n){t=Lo(t,e=pa(0,e=ua(n,e),1),1),e=ec(),null!==t&&(ve(t,1,e),ic(t,e))}function Cc(t,e,n){if(3===t.tag)Sc(t,t,n);else for(;null!==e;){if(3===e.tag){Sc(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){e=Lo(e,t=ga(e,t=ua(n,t),1),1),t=ec(),null!==e&&(ve(e,1,t),ic(e,t));break}}e=e.return}}function Ec(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Ol===t&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Qt()-Vl?fc(t,0):jl|=n),ic(t,e)}function Pc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Oo(t,e))&&(ve(t,e,n),ic(t,n))}function Mc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Pc(t,n)}function Tc(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Pc(t,n)}function Oc(t,e){return Kt(t,e)}function kc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(t,e,n,r){return new kc(t,e,n,r)}function Ic(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Bc(t,e){var n=t.alternate;return null===n?((n=Rc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,r,i,s){var a=2;if(r=t,"function"===typeof t)Ic(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case w:return Dc(n.children,i,s,e);case S:a=8,i|=8;break;case C:return(t=Rc(12,n,e,2|i)).elementType=C,t.lanes=s,t;case T:return(t=Rc(13,n,e,i)).elementType=T,t.lanes=s,t;case O:return(t=Rc(19,n,e,i)).elementType=O,t.lanes=s,t;case I:return Fc(n,i,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:a=10;break t;case P:a=9;break t;case M:a=11;break t;case k:a=14;break t;case R:a=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Rc(a,n,e,i)).elementType=t,e.type=r,e.lanes=s,e}function Dc(t,e,n,r){return(t=Rc(7,t,r,e)).lanes=n,t}function Fc(t,e,n,r){return(t=Rc(22,t,r,e)).elementType=I,t.lanes=n,t.stateNode={isHidden:!1},t}function Nc(t,e,n){return(t=Rc(6,t,null,e)).lanes=n,t}function jc(t,e,n){return(e=Rc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zc(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(t,e,n,r,i,o,s,a,l){return t=new zc(t,e,n,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Rc(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(o),t}function Vc(t){if(!t)return Pi;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ri(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Ri(n))return Li(t,n,e)}return e}function Gc(t,e,n,r,i,o,s,a,l){return(t=Uc(n,r,!0,t,0,o,0,a,l)).context=Vc(null),n=t.current,(o=Bo(r=ec(),i=nc(n))).callback=void 0!==e&&null!==e?e:null,Lo(n,o,i),t.current.lanes=i,ve(t,i,r),ic(t,r),t}function Wc(t,e,n,r){var i=e.current,o=ec(),s=nc(i);return n=Vc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Bo(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Lo(i,e,s))&&(rc(t,i,s,o),Do(t,i,s)),s}function Hc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Jc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Kc(t,e){Jc(t,e),(t=t.alternate)&&Jc(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ti.current)xa=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return xa=!1,function(t,e,n){switch(e.tag){case 3:Oa(e),po();break;case 5:ss(e);break;case 1:Ri(e.type)&&Di(e);break;case 4:is(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ei(bo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ei(ls,1&ls.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Na(t,e,n):(Ei(ls,1&ls.current),null!==(t=Ha(t,e,n))?t.sibling:null);Ei(ls,1&ls.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Ga(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ls,ls.current),r)break;return null;case 22:case 23:return e.lanes=0,Ca(t,e,n)}return Ha(t,e,n)}(t,e,n);xa=0!==(131072&t.flags)}else xa=!1,io&&0!==(1048576&e.flags)&&$i(e,Ji,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wa(t,e),t=e.pendingProps;var i=ki(e,Mi.current);Co(e,n),i=Ss(null,e,r,t,i,n);var s=Cs();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ri(r)?(s=!0,Di(e)):s=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ro(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,Jo(e,r,t,n),e=Ta(null,e,r,!0,s,n)):(e.tag=0,io&&s&&to(e),Aa(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Wa(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Ic(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===k)return 14}return 2}(r),t=vo(r,t),i){case 0:e=Pa(null,e,r,t,n);break t;case 1:e=Ma(null,e,r,t,n);break t;case 11:e=_a(null,e,r,t,n);break t;case 14:e=wa(null,e,r,vo(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Pa(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ma(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 3:t:{if(Oa(e),null===t)throw Error(o(387));r=e.pendingProps,i=(s=e.memoizedState).element,Io(t,e),No(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=ka(t,e,r,n,i=ua(Error(o(423)),e));break t}if(r!==i){e=ka(t,e,r,n,i=ua(Error(o(424)),e));break t}for(ro=ci(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=Zo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){e=Ha(t,e,n);break t}Aa(t,e,r,n)}e=e.child}return e;case 5:return ss(e),null===t&&co(e),r=e.type,i=e.pendingProps,s=null!==t?t.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(e.flags|=32),Ea(t,e),Aa(t,e,a,n),e.child;case 6:return null===t&&co(e),null;case 13:return Na(t,e,n);case 4:return is(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Qo(e,null,r,n):Aa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,_a(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 7:return Aa(t,e,e.pendingProps,n),e.child;case 8:case 12:return Aa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ei(bo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ti.current){e=Ha(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Bo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),So(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),So(a,n,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Aa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Co(e,n),r=r(i=Eo(i)),e.flags|=1,Aa(t,e,r,n),e.child;case 14:return i=vo(r=e.type,e.pendingProps),wa(t,e,r,i=vo(r.type,i),n);case 15:return Sa(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vo(r,i),Wa(t,e),e.tag=1,Ri(r)?(t=!0,Di(e)):t=!1,Co(e,n),Wo(e,r,i),Jo(e,r,i,n),Ta(null,e,r,!0,t,n);case 19:return Ga(t,e,n);case 22:return Ca(t,e,n)}throw Error(o(156,e.tag))};var Xc="function"===typeof reportError?reportError:function(t){console.error(t)};function qc(t){this._internalRoot=t}function Yc(t){this._internalRoot=t}function Qc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Zc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $c(){}function tu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var t=Hc(s);a.call(t)}}Wc(e,s,t,i)}else s=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Hc(s);o.call(t)}}var s=Gc(e,r,t,0,null,!1,0,"",$c);return t._reactRootContainer=s,t[pi]=s.current,Vr(8===t.nodeType?t.parentNode:t),dc(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var a=r;r=function(){var t=Hc(l);a.call(t)}}var l=Uc(t,0,!1,null,0,!1,0,"",$c);return t._reactRootContainer=l,t[pi]=l.current,Vr(8===t.nodeType?t.parentNode:t),dc((function(){Wc(e,l,n,r)})),l}(n,e,t,i,r);return Hc(s)}Yc.prototype.render=qc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Wc(t,e,null,null)},Yc.prototype.unmount=qc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;dc((function(){Wc(null,t,null,null)})),e[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Se();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ie.length&&0!==e&&e<Ie[n].priority;n++);Ie.splice(n,0,t),0===n&&Fe(t)}},Ae=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=de(e.pendingLanes);0!==n&&(be(e,1|n),ic(e,Qt()),0===(6&Tl)&&(Gl=Qt()+500,Vi()))}break;case 13:dc((function(){var e=Oo(t,1);if(null!==e){var n=ec();rc(e,t,1,n)}})),Kc(t,1)}},_e=function(t){if(13===t.tag){var e=Oo(t,134217728);if(null!==e)rc(e,t,134217728,ec());Kc(t,134217728)}},we=function(t){if(13===t.tag){var e=nc(t),n=Oo(t,e);if(null!==n)rc(n,t,e,ec());Kc(t,e)}},Se=function(){return ye},Ce=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}},_t=function(t,e,n){switch(e){case"input":if(Z(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ai(r);if(!i)throw Error(o(90));K(r),Z(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Mt=uc,Tt=dc;var eu={usingClientEntryPoint:!1,Events:[yi,xi,Ai,Et,Pt,uc]},nu={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ht(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ie=iu.inject(ru),oe=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Qc(t))throw Error(o(299));var n=!1,r="",i=Xc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Uc(t,1,!1,null,0,n,0,r,i),t[pi]=e.current,Vr(8===t.nodeType?t.parentNode:t),new qc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Ht(e))?null:t.stateNode},e.flushSync=function(t){return dc(t)},e.hydrate=function(t,e,n){if(!Zc(e))throw Error(o(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qc(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Gc(e,null,t,1,null!=n?n:null,i,0,s,a),t[pi]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Yc(e)},e.render=function(t,e,n){if(!Zc(e))throw Error(o(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Zc(t))throw Error(o(40));return!!t._reactRootContainer&&(dc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zc(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tu(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},4391:(t,e,n)=>{"use strict";var r=n(7950);e.H=r.createRoot,r.hydrateRoot},7950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2730)},5082:(t,e)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function v(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case o:case a:case s:case h:case f:return t;default:switch(t=t&&t.$$typeof){case u:case c:case d:case g:case p:case l:return t;default:return e}}case i:return e}}}n=Symbol.for("react.module.reference"),e.ForwardRef=d,e.Memo=p},2086:(t,e,n)=>{"use strict";t.exports=n(5082)},5332:(t,e,n)=>{"use strict";e.vj=e.Ay=void 0;var r=n(4061);Object.defineProperty(e,"Ay",{enumerable:!0,get:function(){return r.useWebSocket}});var i=n(2690);var o=n(7205);Object.defineProperty(e,"vj",{enumerable:!0,get:function(){return o.ReadyState}});var s=n(4386);var a=n(858)},1360:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.attachListeners=void 0;var i=n(5304),o=n(8540),s=n(7205),a=n(858);e.attachListeners=function(t,e,n,l,c,u){var d,h,f,p=e.setLastMessage,g=e.setReadyState;return n.current.fromSocketIO&&(d=(0,i.setUpSocketIOPing)(u)),function(t,e,n){var r;if(e.current.heartbeat&&t instanceof WebSocket){var i="boolean"===typeof e.current.heartbeat?void 0:e.current.heartbeat;r=(0,o.heartbeat)(t,i)}t.onmessage=function(t){var i;null===r||void 0===r||r(),e.current.onMessage&&e.current.onMessage(t),"function"===typeof e.current.filter&&!0!==e.current.filter(t)||e.current.heartbeat&&"boolean"!==typeof e.current.heartbeat&&(null===(i=e.current.heartbeat)||void 0===i?void 0:i.returnMessage)===t.data||n(t)}}(t,n,p),function(t,e,n,r){t.onopen=function(t){e.current.onOpen&&e.current.onOpen(t),r.current=0,n(s.ReadyState.OPEN)}}(t,n,g,c),h=function(t,e,n,r,i){return s.isEventSourceSupported&&t instanceof EventSource?function(){}:((0,a.assertIsWebSocket)(t,e.current.skipAssert),t.onclose=function(t){var a;if(e.current.onClose&&e.current.onClose(t),n(s.ReadyState.CLOSED),e.current.shouldReconnect&&e.current.shouldReconnect(t)){var l=null!==(a=e.current.reconnectAttempts)&&void 0!==a?a:s.DEFAULT_RECONNECT_LIMIT;if(i.current<l){var c="function"===typeof e.current.reconnectInterval?e.current.reconnectInterval(i.current):e.current.reconnectInterval;o=window.setTimeout((function(){i.current++,r()}),null!==c&&void 0!==c?c:s.DEFAULT_RECONNECT_INTERVAL_MS)}else e.current.onReconnectStop&&e.current.onReconnectStop(l),console.warn("Max reconnect attempts of ".concat(l," exceeded"))}},function(){return o&&window.clearTimeout(o)});var o}(t,n,g,l,c),f=function(t,e,n,i,o){var a;return t.onerror=function(l){var c;if(e.current.onError&&e.current.onError(l),s.isEventSourceSupported&&t instanceof EventSource&&(e.current.onClose&&e.current.onClose(r(r({},l),{code:1006,reason:"An error occurred with the EventSource: ".concat(l),wasClean:!1})),n(s.ReadyState.CLOSED),t.close()),e.current.retryOnError)if(o.current<(null!==(c=e.current.reconnectAttempts)&&void 0!==c?c:s.DEFAULT_RECONNECT_LIMIT)){var u="function"===typeof e.current.reconnectInterval?e.current.reconnectInterval(o.current):e.current.reconnectInterval;a=window.setTimeout((function(){o.current++,i()}),null!==u&&void 0!==u?u:s.DEFAULT_RECONNECT_INTERVAL_MS)}else e.current.onReconnectStop&&e.current.onReconnectStop(e.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(e.current.reconnectAttempts," exceeded"))},function(){return a&&window.clearTimeout(a)}}(t,n,g,l,c),function(){g(s.ReadyState.CLOSING),h(),f(),t.close(),d&&clearInterval(d)}}},1961:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.attachSharedListeners=void 0;var i=n(9596),o=n(7205),s=n(1875),a=n(5304),l=n(8540);e.attachSharedListeners=function(t,e,n,c){var u;return n.current.fromSocketIO&&(u=(0,a.setUpSocketIOPing)(c)),function(t,e,n){var r;n&&t instanceof WebSocket&&(r=(0,l.heartbeat)(t,"boolean"===typeof n?void 0:n)),t.onmessage=function(t){null===r||void 0===r||r(),(0,s.getSubscribers)(e).forEach((function(e){e.optionsRef.current.onMessage&&e.optionsRef.current.onMessage(t),"function"===typeof e.optionsRef.current.filter&&!0!==e.optionsRef.current.filter(t)||n&&"boolean"!==typeof n&&(null===n||void 0===n?void 0:n.returnMessage)===t.data||e.setLastMessage(t)}))}}(t,e,n.current.heartbeat),function(t,e){t instanceof WebSocket&&(t.onclose=function(t){(0,s.getSubscribers)(e).forEach((function(e){e.optionsRef.current.onClose&&e.optionsRef.current.onClose(t),e.setReadyState(o.ReadyState.CLOSED)})),delete i.sharedWebSockets[e],(0,s.getSubscribers)(e).forEach((function(e){var n;if(e.optionsRef.current.shouldReconnect&&e.optionsRef.current.shouldReconnect(t)){var r=null!==(n=e.optionsRef.current.reconnectAttempts)&&void 0!==n?n:o.DEFAULT_RECONNECT_LIMIT;if(e.reconnectCount.current<r){var i="function"===typeof e.optionsRef.current.reconnectInterval?e.optionsRef.current.reconnectInterval(e.reconnectCount.current):e.optionsRef.current.reconnectInterval;setTimeout((function(){e.reconnectCount.current++,e.reconnect.current()}),null!==i&&void 0!==i?i:o.DEFAULT_RECONNECT_INTERVAL_MS)}else e.optionsRef.current.onReconnectStop&&e.optionsRef.current.onReconnectStop(e.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(r," exceeded"))}}))})}(t,e),function(t,e){t.onopen=function(t){(0,s.getSubscribers)(e).forEach((function(e){e.reconnectCount.current=0,e.optionsRef.current.onOpen&&e.optionsRef.current.onOpen(t),e.setReadyState(o.ReadyState.OPEN)}))}}(t,e),function(t,e){t.onerror=function(n){(0,s.getSubscribers)(e).forEach((function(e){e.optionsRef.current.onError&&e.optionsRef.current.onError(n),o.isEventSourceSupported&&t instanceof EventSource&&(e.optionsRef.current.onClose&&e.optionsRef.current.onClose(r(r({},n),{code:1006,reason:"An error occurred with the EventSource: ".concat(n),wasClean:!1})),e.setReadyState(o.ReadyState.CLOSED))})),o.isEventSourceSupported&&t instanceof EventSource&&t.close()}}(t,e),function(){u&&clearInterval(u)}}},7205:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isEventSourceSupported=e.isReactNative=e.ReadyState=e.DEFAULT_HEARTBEAT=e.UNPARSABLE_JSON_OBJECT=e.DEFAULT_RECONNECT_INTERVAL_MS=e.DEFAULT_RECONNECT_LIMIT=e.SOCKET_IO_PING_CODE=e.SOCKET_IO_PATH=e.SOCKET_IO_PING_INTERVAL=e.DEFAULT_EVENT_SOURCE_OPTIONS=e.EMPTY_EVENT_HANDLERS=e.DEFAULT_OPTIONS=void 0;e.DEFAULT_OPTIONS={},e.EMPTY_EVENT_HANDLERS={},e.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:e.EMPTY_EVENT_HANDLERS},e.SOCKET_IO_PING_INTERVAL=25e3,e.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",e.SOCKET_IO_PING_CODE="2",e.DEFAULT_RECONNECT_LIMIT=20,e.DEFAULT_RECONNECT_INTERVAL_MS=5e3,e.UNPARSABLE_JSON_OBJECT={},e.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3},function(t){t[t.UNINSTANTIATED=-1]="UNINSTANTIATED",t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED"}(e.ReadyState||(e.ReadyState={}));e.isReactNative="undefined"!==typeof navigator&&"ReactNative"===navigator.product,e.isEventSourceSupported=!e.isReactNative&&function(){try{return"EventSource"in globalThis}catch(t){return!1}}()},3791:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createOrJoinSocket=void 0;var r=n(9596),i=n(7205),o=n(1360),s=n(1961),a=n(1875);e.createOrJoinSocket=function(t,e,n,l,c,u,d,h){if(!i.isEventSourceSupported&&l.current.eventSourceOptions)throw i.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(l.current.share){var f=null;void 0===r.sharedWebSockets[e]?(r.sharedWebSockets[e]=l.current.eventSourceOptions?new EventSource(e,l.current.eventSourceOptions):new WebSocket(e,l.current.protocols),t.current=r.sharedWebSockets[e],n(i.ReadyState.CONNECTING),f=(0,s.attachSharedListeners)(r.sharedWebSockets[e],e,l,h)):(t.current=r.sharedWebSockets[e],n(r.sharedWebSockets[e].readyState));var p={setLastMessage:c,setReadyState:n,optionsRef:l,reconnectCount:d,reconnect:u};return(0,a.addSubscriber)(e,p),function(t,e,n,o,s){return function(){if((0,a.removeSubscriber)(t,e),!(0,a.hasSubscribers)(t)){try{var l=r.sharedWebSockets[t];l instanceof WebSocket&&(l.onclose=function(t){n.current.onClose&&n.current.onClose(t),o(i.ReadyState.CLOSED)}),l.close()}catch(c){}s&&s(),delete r.sharedWebSockets[t]}}}(e,p,l,n,f)}if(t.current=l.current.eventSourceOptions?new EventSource(e,l.current.eventSourceOptions):new WebSocket(e,l.current.protocols),n(i.ReadyState.CONNECTING),!t.current)throw new Error("WebSocket failed to be created");return(0,o.attachListeners)(t.current,{setLastMessage:c,setReadyState:n},l,u.current,d,h)}},2852:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getUrl=void 0;var o=n(5304),s=n(7205);e.getUrl=function(t,n,a){return void 0===a&&(a=0),r(void 0,void 0,void 0,(function(){var r,l,c,u,d,h,f;return i(this,(function(i){switch(i.label){case 0:if("function"!==typeof t)return[3,10];i.label=1;case 1:return i.trys.push([1,3,,9]),[4,t()];case 2:return r=i.sent(),[3,9];case 3:return i.sent(),n.current.retryOnError?(l=null!==(d=n.current.reconnectAttempts)&&void 0!==d?d:s.DEFAULT_RECONNECT_LIMIT,a<l?(c="function"===typeof n.current.reconnectInterval?n.current.reconnectInterval(a):n.current.reconnectInterval,[4,(p=null!==c&&void 0!==c?c:s.DEFAULT_RECONNECT_INTERVAL_MS,new Promise((function(t){return window.setTimeout(t,p)})))]):[3,5]):[3,7];case 4:return i.sent(),[2,(0,e.getUrl)(t,n,a+1)];case 5:return null===(f=(h=n.current).onReconnectStop)||void 0===f||f.call(h,a),[2,null];case 6:return[3,8];case 7:return[2,null];case 8:return[3,9];case 9:return[3,11];case 10:r=t,i.label=11;case 11:return u=n.current.fromSocketIO?(0,o.parseSocketIOUrl)(r):r,[2,n.current.queryParams?(0,o.appendQueryParams)(u,n.current.queryParams):u]}var p}))}))}},9596:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetWebSockets=e.sharedWebSockets=void 0,e.sharedWebSockets={};e.resetWebSockets=function(t){if(t&&e.sharedWebSockets.hasOwnProperty(t))delete e.sharedWebSockets[t];else for(var n in e.sharedWebSockets)e.sharedWebSockets.hasOwnProperty(n)&&delete e.sharedWebSockets[n]}},8540:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.heartbeat=void 0;var r=n(7205);e.heartbeat=function(t,e){var n=e||{},i=n.interval,o=void 0===i?r.DEFAULT_HEARTBEAT.interval:i,s=n.timeout,a=void 0===s?r.DEFAULT_HEARTBEAT.timeout:s,l=n.message,c=void 0===l?r.DEFAULT_HEARTBEAT.message:l,u=!1,d=setInterval((function(){try{"function"===typeof c?t.send(c()):t.send(c)}catch(e){}}),o),h=setInterval((function(){u?u=!1:t.close()}),a);return t.addEventListener("close",(function(){clearInterval(d),clearInterval(h)})),function(){u=!0}}},1875:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetSubscribers=e.removeSubscriber=e.addSubscriber=e.hasSubscribers=e.getSubscribers=void 0;var n={},r=[];e.getSubscribers=function(t){return(0,e.hasSubscribers)(t)?Array.from(n[t]):r};e.hasSubscribers=function(t){var e;return(null===(e=n[t])||void 0===e?void 0:e.size)>0};e.addSubscriber=function(t,e){n[t]=n[t]||new Set,n[t].add(e)};e.removeSubscriber=function(t,e){n[t].delete(e)};e.resetSubscribers=function(t){if(t&&n.hasOwnProperty(t))delete n[t];else for(var e in n)n.hasOwnProperty(e)&&delete n[e]}},1808:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.websocketWrapper=void 0;e.websocketWrapper=function(t,e){return new Proxy(t,{get:function(t,n){var r=t[n];return"reconnect"===n?e:"function"===typeof r?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):r},set:function(t,e,n){return/^on/.test(e)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(t[e]=n,!0)}})},e.default=e.websocketWrapper},5304:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setUpSocketIOPing=e.appendQueryParams=e.parseSocketIOUrl=void 0;var r=n(7205);e.parseSocketIOUrl=function(t){if(t){var e=/^https|wss/.test(t),n=t.replace(/^(https?|wss?)(:\/\/)?/,"").replace(/\/$/,"");return"".concat(i=e?"wss":"ws","://").concat(n).concat(r.SOCKET_IO_PATH)}if(""===t){var i=(e=/^https/.test(window.location.protocol))?"wss":"ws",o=window.location.port?":".concat(window.location.port):"";return"".concat(i,"://").concat(window.location.hostname).concat(o).concat(r.SOCKET_IO_PATH)}return t};e.appendQueryParams=function(t,e){void 0===e&&(e={});var n=/\?([\w]+=[\w]+)/.test(t),r="".concat(Object.entries(e).reduce((function(t,e){var n=e[0],r=e[1];return t+"".concat(n,"=").concat(r,"&")}),"").slice(0,-1));return"".concat(t).concat(n?"&":"?").concat(r)};e.setUpSocketIOPing=function(t,e){void 0===e&&(e=r.SOCKET_IO_PING_INTERVAL);return window.setInterval((function(){return t(r.SOCKET_IO_PING_CODE)}),e)}},4386:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(e,"__esModule",{value:!0}),e.useEventSource=void 0;var o=n(5043),s=n(4061),a=n(7205);e.useEventSource=function(t,e,n){void 0===e&&(e=a.DEFAULT_EVENT_SOURCE_OPTIONS);var l=e.withCredentials,c=e.events,u=i(e,["withCredentials","events"]);void 0===n&&(n=!0);var d=r(r({},u),{eventSourceOptions:{withCredentials:l}}),h=(0,o.useRef)(a.EMPTY_EVENT_HANDLERS);c&&(h.current=c);var f=(0,s.useWebSocket)(t,d,n),p=f.lastMessage,g=f.readyState,m=f.getWebSocket;return(0,o.useEffect)((function(){(null===p||void 0===p?void 0:p.type)&&Object.entries(h.current).forEach((function(t){var e=t[0],n=t[1];e===p.type&&n(p)}))}),[p]),{lastEvent:p,readyState:g,getEventSource:m}}},2690:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.useSocketIO=void 0;var i=n(5043),o=n(4061),s=n(7205),a={type:"empty",payload:null};e.useSocketIO=function(t,e,n){void 0===e&&(e=s.DEFAULT_OPTIONS),void 0===n&&(n=!0);var l=(0,i.useMemo)((function(){return r(r({},e),{fromSocketIO:!0})}),[]),c=(0,o.useWebSocket)(t,l,n),u=c.sendMessage,d=c.sendJsonMessage,h=c.lastMessage,f=c.readyState,p=c.getWebSocket,g=(0,i.useMemo)((function(){return function(t){if(!t||!t.data)return a;var e=t.data.match(/\[.*]/);if(!e)return a;var n=JSON.parse(e);return Array.isArray(n)&&n[1]?{type:n[0],payload:n[1]}:a}(h)}),[h]);return{sendMessage:u,sendJsonMessage:d,lastMessage:g,lastJsonMessage:g,readyState:f,getWebSocket:p}}},4061:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.useWebSocket=void 0;var a=n(5043),l=n(7950),c=n(7205),u=n(3791),d=n(2852),h=s(n(1808)),f=n(858);e.useWebSocket=function(t,e,n){void 0===e&&(e=c.DEFAULT_OPTIONS),void 0===n&&(n=!0);var s=(0,a.useState)(null),p=s[0],g=s[1],m=(0,a.useState)({}),v=m[0],b=m[1],y=(0,a.useMemo)((function(){if(p)try{return JSON.parse(p.data)}catch(t){return c.UNPARSABLE_JSON_OBJECT}return null}),[p]),x=(0,a.useRef)(null),A=(0,a.useRef)(null),_=(0,a.useRef)((function(){})),w=(0,a.useRef)(0),S=(0,a.useRef)([]),C=(0,a.useRef)(null),E=(0,a.useRef)(e);E.current=e;var P=x.current&&void 0!==v[x.current]?v[x.current]:null!==t&&!0===n?c.ReadyState.CONNECTING:c.ReadyState.UNINSTANTIATED,M=e.queryParams?JSON.stringify(e.queryParams):null,T=(0,a.useCallback)((function(t,e){var n;void 0===e&&(e=!0),c.isEventSourceSupported&&A.current instanceof EventSource?console.warn("Unable to send a message from an eventSource"):(null===(n=A.current)||void 0===n?void 0:n.readyState)===c.ReadyState.OPEN?((0,f.assertIsWebSocket)(A.current,E.current.skipAssert),A.current.send(t)):e&&S.current.push(t)}),[]),O=(0,a.useCallback)((function(t,e){void 0===e&&(e=!0),T(JSON.stringify(t),e)}),[T]),k=(0,a.useCallback)((function(){return!0!==E.current.share||c.isEventSourceSupported&&A.current instanceof EventSource?A.current:(null===C.current&&A.current&&((0,f.assertIsWebSocket)(A.current,E.current.skipAssert),C.current=(0,h.default)(A.current,_)),C.current)}),[]);return(0,a.useEffect)((function(){if(null!==t&&!0===n){var e,s=!1,a=!0,h=function(){return i(void 0,void 0,void 0,(function(){var n,i,h;return o(this,(function(o){switch(o.label){case 0:return n=x,[4,(0,d.getUrl)(t,E)];case 1:return n.current=o.sent(),null===x.current?(console.error("Failed to get a valid URL. WebSocket connection aborted."),x.current="ABORTED",(0,l.flushSync)((function(){return b((function(t){return r(r({},t),{ABORTED:c.ReadyState.CLOSED})}))})),[2]):(i=function(t){s||(0,l.flushSync)((function(){return g(t)}))},h=function(t){s||(0,l.flushSync)((function(){return b((function(e){var n;return r(r({},e),x.current&&((n={})[x.current]=t,n))}))}))},a&&(e=(0,u.createOrJoinSocket)(A,x.current,h,E,i,_,w,T)),[2])}}))}))};return _.current=function(){s||(C.current&&(C.current=null),null===e||void 0===e||e(),h())},h(),function(){s=!0,a=!1,C.current&&(C.current=null),null===e||void 0===e||e(),g(null)}}null!==t&&!1!==n||(w.current=0,b((function(t){var e;return r(r({},t),x.current&&((e={})[x.current]=c.ReadyState.CLOSED,e))})))}),[t,n,M,T]),(0,a.useEffect)((function(){P===c.ReadyState.OPEN&&S.current.splice(0).forEach((function(t){T(t)}))}),[P]),{sendMessage:T,sendJsonMessage:O,lastMessage:p,lastJsonMessage:y,readyState:P,getWebSocket:k}}},858:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetGlobalState=e.assertIsWebSocket=void 0;var r=n(9596),i=n(1875);e.assertIsWebSocket=function(t,e){if(!e&&t instanceof WebSocket===!1)throw new Error("")},e.resetGlobalState=function(t){(0,i.resetSubscribers)(t),(0,r.resetWebSockets)(t)}},1153:(t,e,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:u,props:o,_owner:a.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},4202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function b(){}function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,g(x,v.prototype),x.isPureReactComponent=!0;var A=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(t,e,r){var i,o={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)_.call(e,i)&&!S.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:s,ref:a,props:o,_owner:w.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var P=/\/+/g;function M(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function T(t,e,i,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=t),t=""===o?"."+M(l,0):o,A(s)?(i="",null!=t&&(i=t.replace(P,"$&/")+"/"),T(s,e,i,"",(function(t){return t}))):null!=s&&(E(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(P,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",A(t))for(var c=0;c<t.length;c++){var u=o+M(a=t[c],c);l+=T(a,e,i,u,s)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=T(a=a.value,e,i,u=o+M(a,c++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function O(t,e,n){if(null==t)return t;var r=[],i=0;return T(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function k(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var R={current:null},I={transition:null},B={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:I,ReactCurrentOwner:w};e.Children={map:O,forEach:function(t,e,n){O(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return O(t,(function(){e++})),e},toArray:function(t){return O(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=i,e.Profiler=s,e.PureComponent=y,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=g({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=w.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)_.call(e,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:s,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=C,e.createFactory=function(t){var e=C.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:h,_payload:{_status:-1,_result:t},_init:k}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=I.transition;I.transition={};try{t()}finally{I.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return R.current.useCallback(t,e)},e.useContext=function(t){return R.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return R.current.useDeferredValue(t)},e.useEffect=function(t,e){return R.current.useEffect(t,e)},e.useId=function(){return R.current.useId()},e.useImperativeHandle=function(t,e,n){return R.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return R.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return R.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return R.current.useMemo(t,e)},e.useReducer=function(t,e,n){return R.current.useReducer(t,e,n)},e.useRef=function(t){return R.current.useRef(t)},e.useState=function(t){return R.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return R.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return R.current.useTransition()},e.version="18.2.0"},5043:(t,e,n)=>{"use strict";t.exports=n(4202)},579:(t,e,n)=>{"use strict";t.exports=n(1153)},7234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=t[a],c=a+1,u=t[c];if(0>o(l,n))c<i&&0>o(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=r(u)}}function A(t){if(m=!1,x(t),!g)if(null!==r(c))g=!0,I(_);else{var e=r(u);null!==e&&B(A,e.startTime-t)}}function _(t,n){g=!1,m&&(m=!1,b(E),E=-1),p=!0;var o=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||t&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&B(A,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,C=null,E=-1,P=5,M=-1;function T(){return!(e.unstable_now()-M<P)}function O(){if(null!==C){var t=e.unstable_now();M=t;var n=!0;try{n=C(!0,t)}finally{n?w():(S=!1,C=null)}}else S=!1}if("function"===typeof y)w=function(){y(O)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,R=k.port2;k.port1.onmessage=O,w=function(){R.postMessage(null)}}else w=function(){v(O,0)};function I(t){C=t,S||(S=!0,w())}function B(t,n){E=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,I(_))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:d++,callback:i,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(u,t),null===r(c)&&t===r(u)&&(m?(b(E),E=-1):m=!0,B(A,o-s))):(t.sortIndex=a,n(c,t),g||p||(g=!0,I(_))),t},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},8853:(t,e,n)=>{"use strict";t.exports=n(7234)},1289:t=>{"use strict";t.exports=(t,e)=>{if("string"!==typeof t||"string"!==typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}},7491:t=>{"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>"%".concat(t.charCodeAt(0).toString(16).toUpperCase())))},5956:(t,e,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i(t,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=o({inst:{value:n,getSnapshot:e}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=e,c(i)&&u({inst:i})}),[t,n,e]),s((function(){return c(i)&&u({inst:i}),t((function(){c(i)&&u({inst:i})}))}),[t]),l(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},5039:(t,e,n)=>{"use strict";var r=n(5043),i=n(9461);var o="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},s=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function t(t){if(!l){if(l=!0,s=t,t=r(t),void 0!==i&&h.hasValue){var e=h.value;if(i(e,t))return a=e}return a=t}if(e=a,o(s,t))return e;var n=r(t);return void 0!==i&&i(e,n)?e:(s=t,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]}),[e,n,r,i]);var f=s(t,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=f}),[f]),u(f),f}},9461:(t,e,n)=>{"use strict";t.exports=n(5956)},8443:(t,e,n)=>{"use strict";t.exports=n(5039)},4634:t=>{function e(){return t.exports=e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4994:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},4893:t=>{t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},t.exports.__esModule=!0,t.exports.default=t.exports},8168:(t,e,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{A:()=>r})},8587:(t,e,n)=>{"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,{A:()=>r})},8387:(t,e,n)=>{"use strict";function r(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}n.d(e,{A:()=>i});const i=function(){for(var t,e,n=0,i="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&i&&r;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>r[t]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"static/js/"+t+".18025603.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="cityscopejs:";n.l=(r,i,o,s)=>{if(t[r])t[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+o),a.src=r),t[r]=[i];var h=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((t=>t(n))),e)return e(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="https://cityscope.media.mit.edu/CS_cityscopeJS/",(()=>{var t={792:0};n.f.j=(e,r)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=t[e]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(e),a=new Error;n.l(s,(r=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+e,e)}};var e=(e,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(e&&e(r);c<s.length;c++)o=s[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=self.webpackChunkcityscopejs=self.webpackChunkcityscopejs||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),(()=>{"use strict";var t={};n.r(t),n.d(t,{readFileAsArrayBuffer:()=>LN,readFileAsText:()=>DN,requireFromFile:()=>FN,requireFromString:()=>NN});var e={};n.r(e),n.d(e,{decode:()=>Zj,name:()=>Qj});var r={};n.r(r),n.d(r,{name:()=>iz,preprocess:()=>oz});var i={};n.r(i),n.d(i,{name:()=>az,preprocess:()=>lz});var o={};n.r(o),n.d(o,{decode:()=>Tz,encode:()=>Oz,name:()=>Pz,preprocess:()=>Mz});var s={};n.r(s),n.d(s,{decode:()=>Uz,name:()=>Fz});var a={};n.r(a),n.d(a,{decode:()=>Kz,encode:()=>Xz,name:()=>Jz});var l={};n.r(l),n.d(l,{decode:()=>Qz,encode:()=>Zz,name:()=>Yz});var c={};n.r(c),n.d(c,{decode:()=>eU,encode:()=>nU,name:()=>tU});var u={};n.r(u),n.d(u,{decode:()=>sU,name:()=>oU});var d={};n.r(d),n.d(d,{hasBrowserEnv:()=>uQ,hasStandardBrowserEnv:()=>dQ,hasStandardBrowserWebWorkerEnv:()=>fQ});var h=n(5043),f=n(8168),p=n(2876),g=n(869),m=n(5527),v=n(579);const b=function(t){let{styles:e,themeId:n,defaultTheme:r={}}=t;const i=(0,m.A)(r),o="function"===typeof e?e(n&&i[n]||i):e;return(0,v.jsx)(g.A,{styles:o})};var y=n(5170),x=n(3375);const A=function(t){return(0,v.jsx)(b,(0,f.A)({},t,{defaultTheme:y.A,themeId:x.A}))},_=(t,e)=>(0,f.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),w=t=>(0,f.A)({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}});const S=function(t){const e=(0,p.A)({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return(0,v.jsxs)(h.Fragment,{children:[(0,v.jsx)(A,{styles:t=>function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach((e=>{let[n,i]=e;var o;r[t.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(o=i.palette)?void 0:o.mode}}));let i=(0,f.A)({html:_(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:(0,f.A)({margin:0},w(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const o=null==(n=t.components)||null==(n=n.MuiCssBaseline)?void 0:n.styleOverrides;return o&&(i=[i,o]),i}(t,r)}),n]})};var C=n(8587);const E=h.createContext(null);function P(){return h.useContext(E)}const M="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const T=function(t){const{children:e,theme:n}=t,r=P(),i=h.useMemo((()=>{const t=null===r?n:function(t,e){if("function"===typeof e)return e(t);return(0,f.A)({},t,e)}(r,n);return null!=t&&(t[M]=null!==r),t}),[n,r]);return(0,v.jsx)(E.Provider,{value:i,children:e})};var O=n(5756),k=n(7082);const R=["value"],I=h.createContext();const B=()=>{const t=h.useContext(I);return null!=t&&t},L=function(t){let{value:e}=t,n=(0,C.A)(t,R);return(0,v.jsx)(I.Provider,(0,f.A)({value:null==e||e},n))},D={};function F(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return h.useMemo((()=>{const i=t&&e[t]||e;if("function"===typeof n){const o=n(i),s=t?(0,f.A)({},e,{[t]:o}):o;return r?()=>s:s}return t?(0,f.A)({},e,{[t]:n}):(0,f.A)({},e,n)}),[t,e,n,r])}const N=function(t){const{children:e,theme:n,themeId:r}=t,i=(0,k.A)(D),o=P()||D,s=F(r,i,n),a=F(r,o,n,!0),l="rtl"===s.direction;return(0,v.jsx)(T,{theme:a,children:(0,v.jsx)(O.T.Provider,{value:s,children:(0,v.jsx)(L,{value:l,children:e})})})},j=["theme"];function z(t){let{theme:e}=t,n=(0,C.A)(t,j);const r=e[x.A];return(0,v.jsx)(N,(0,f.A)({},n,{themeId:r?x.A:void 0,theme:r||e}))}var U=n(9461),V=n(8443),G=n(7950);let W=function(t){t()};const H=()=>W,J=Symbol.for("react-redux-context"),K="undefined"!==typeof globalThis?globalThis:{};function X(){var t;if(!h.createContext)return{};const e=null!=(t=K[J])?t:K[J]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const q=X();function Y(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return function(){return(0,h.useContext)(t)}}const Q=Y();let Z=()=>{throw new Error("uSES not initialized!")};const $=(t,e)=>t===e;function tt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;const e=t===q?Q:Y(t);return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=$,stabilityCheck:i,noopCheck:o}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:a,getServerState:l,stabilityCheck:c,noopCheck:u}=e(),d=((0,h.useRef)(!0),(0,h.useCallback)({[t.name]:e=>t(e)}[t.name],[t,c,i])),f=Z(a.addNestedSub,s.getState,l||s.getState,d,r);return(0,h.useDebugValue)(f),f}}const et=tt();n(219),n(2086);const nt={notify(){},get:()=>[]};function rt(t,e){let n,r=nt,i=0,o=!1;function s(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=e?e.addNestedSub(s):t.subscribe(s),r=function(){const t=H();let e=null,n=null;return{clear(){e=null,n=null},notify(){t((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let r=!0,i=n={callback:t,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=nt)}const c={addNestedSub:function(t){a();const e=r.subscribe(t);let n=!1;return()=>{n||(n=!0,e(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,a())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return c}const it=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?h.useLayoutEffect:h.useEffect;let ot=null;const st=function(t){let{store:e,context:n,children:r,serverState:i,stabilityCheck:o="once",noopCheck:s="once"}=t;const a=h.useMemo((()=>{const t=rt(e);return{store:e,subscription:t,getServerState:i?()=>i:void 0,stabilityCheck:o,noopCheck:s}}),[e,i,o,s]),l=h.useMemo((()=>e.getState()),[e]);it((()=>{const{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),l!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[a,l]);const c=n||q;return h.createElement(c.Provider,{value:a},r)};function at(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;const e=t===q?Q:Y(t);return function(){const{store:t}=e();return t}}const lt=at();function ct(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;const e=t===q?lt:at(t);return function(){return e().dispatch}}const ut=ct();var dt;function ht(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ft(t){return!!t&&!!t[ne]}function pt(t){var e;return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===re}(t)||Array.isArray(t)||!!t[ee]||!!(null===(e=t.constructor)||void 0===e?void 0:e[ee])||At(t)||_t(t))}function gt(t,e,n){void 0===n&&(n=!1),0===mt(t)?(n?Object.keys:ie)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function mt(t){var e=t[ne];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:At(t)?2:_t(t)?3:0}function vt(t,e){return 2===mt(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function bt(t,e){return 2===mt(t)?t.get(e):t[e]}function yt(t,e,n){var r=mt(t);2===r?t.set(e,n):3===r?t.add(n):t[e]=n}function xt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function At(t){return Qt&&t instanceof Map}function _t(t){return Zt&&t instanceof Set}function wt(t){return t.o||t.t}function St(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=oe(t);delete e[ne];for(var n=ie(e),r=0;r<n.length;r++){var i=n[r],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Ct(t,e){return void 0===e&&(e=!1),Pt(t)||ft(t)||!pt(t)||(mt(t)>1&&(t.set=t.add=t.clear=t.delete=Et),Object.freeze(t),e&&gt(t,(function(t,e){return Ct(e,!0)}),!0)),t}function Et(){ht(2)}function Pt(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function Mt(t){var e=se[t];return e||ht(18,t),e}function Tt(t,e){se[t]||(se[t]=e)}function Ot(){return qt}function kt(t,e){e&&(Mt("Patches"),t.u=[],t.s=[],t.v=e)}function Rt(t){It(t),t.p.forEach(Lt),t.p=null}function It(t){t===qt&&(qt=t.l)}function Bt(t){return qt={p:[],l:qt,h:t,m:!0,_:0}}function Lt(t){var e=t[ne];0===e.i||1===e.i?e.j():e.g=!0}function Dt(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.O||Mt("ES5").S(e,t,r),r?(n[ne].P&&(Rt(e),ht(4)),pt(t)&&(t=Ft(e,t),e.l||jt(e,t)),e.u&&Mt("Patches").M(n[ne].t,t,e.u,e.s)):t=Ft(e,n,[]),Rt(e),e.u&&e.v(e.u,e.s),t!==te?t:void 0}function Ft(t,e,n){if(Pt(e))return e;var r=e[ne];if(!r)return gt(e,(function(i,o){return Nt(t,r,e,i,o,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return jt(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=St(r.k):r.o,o=i,s=!1;3===r.i&&(o=new Set(i),i.clear(),s=!0),gt(o,(function(e,o){return Nt(t,r,i,e,o,n,s)})),jt(t,i,!1),n&&t.u&&Mt("Patches").N(r,n,t.u,t.s)}return r.o}function Nt(t,e,n,r,i,o,s){if(ft(i)){var a=Ft(t,i,o&&e&&3!==e.i&&!vt(e.R,r)?o.concat(r):void 0);if(yt(n,r,a),!ft(a))return;t.m=!1}else s&&n.add(i);if(pt(i)&&!Pt(i)){if(!t.h.D&&t._<1)return;Ft(t,i),e&&e.A.l||jt(t,i)}}function jt(t,e,n){void 0===n&&(n=!1),!t.l&&t.h.D&&t.m&&Ct(e,n)}function zt(t,e){var n=t[ne];return(n?wt(n):t)[e]}function Ut(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Vt(t){t.P||(t.P=!0,t.l&&Vt(t.l))}function Gt(t){t.o||(t.o=St(t.t))}function Wt(t,e,n){var r=At(e)?Mt("MapSet").F(e,n):_t(e)?Mt("MapSet").T(e,n):t.O?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:Ot(),P:!1,I:!1,R:{},l:e,t:t,k:null,o:null,j:null,C:!1},i=r,o=ae;n&&(i=[r],o=le);var s=Proxy.revocable(i,o),a=s.revoke,l=s.proxy;return r.k=l,r.j=a,l}(e,n):Mt("ES5").J(e,n);return(n?n.A:Ot()).p.push(r),r}function Ht(t){return ft(t)||ht(22,t),function t(e){if(!pt(e))return e;var n,r=e[ne],i=mt(e);if(r){if(!r.P&&(r.i<4||!Mt("ES5").K(r)))return r.t;r.I=!0,n=Jt(e,i),r.I=!1}else n=Jt(e,i);return gt(n,(function(e,i){r&&bt(r.t,e)===i||yt(n,e,t(i))})),3===i?new Set(n):n}(t)}function Jt(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return St(t)}function Kt(){function t(t,e){var n=i[t];return n?n.enumerable=e:i[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[ne];return ae.get(e,t)},set:function(e){var n=this[ne];ae.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var i=t[e][ne];if(!i.P)switch(i.i){case 5:r(i)&&Vt(i);break;case 4:n(i)&&Vt(i)}}}function n(t){for(var e=t.t,n=t.k,r=ie(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==ne){var s=e[o];if(void 0===s&&!vt(e,o))return!0;var a=n[o],l=a&&a[ne];if(l?l.t!==s:!xt(a,s))return!0}}var c=!!e[ne];return r.length!==ie(e).length+(c?0:1)}function r(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var i={};Tt("ES5",{J:function(e,n){var r=Array.isArray(e),i=function(e,n){if(e){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,t(i,!0));return r}var o=oe(n);delete o[ne];for(var s=ie(o),a=0;a<s.length;a++){var l=s[a];o[l]=t(l,e||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,e),o={i:r?5:4,A:n?n.A:Ot(),P:!1,I:!1,R:{},l:n,t:e,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,ne,{value:o,writable:!0}),i},S:function(t,n,i){i?ft(n)&&n[ne].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[ne];if(n){var i=n.t,o=n.k,s=n.R,a=n.i;if(4===a)gt(o,(function(e){e!==ne&&(void 0!==i[e]||vt(i,e)?s[e]||t(o[e]):(s[e]=!0,Vt(n)))})),gt(i,(function(t){void 0!==o[t]||vt(o,t)||(s[t]=!1,Vt(n))}));else if(5===a){if(r(n)&&(Vt(n),s.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)s[l]=!1;else for(var c=i.length;c<o.length;c++)s[c]=!0;for(var u=Math.min(o.length,i.length),d=0;d<u;d++)o.hasOwnProperty(d)||(s[d]=!0),void 0===s[d]&&t(o[d])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):r(t)}})}(t=>{Z=t})(V.useSyncExternalStoreWithSelector),(t=>{ot=t})(U.useSyncExternalStore),dt=G.unstable_batchedUpdates,W=dt;var Xt,qt,Yt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Qt="undefined"!=typeof Map,Zt="undefined"!=typeof Set,$t="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,te=Yt?Symbol.for("immer-nothing"):((Xt={})["immer-nothing"]=!0,Xt),ee=Yt?Symbol.for("immer-draftable"):"__$immer_draftable",ne=Yt?Symbol.for("immer-state"):"__$immer_state",re=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ie="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,oe=Object.getOwnPropertyDescriptors||function(t){var e={};return ie(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},se={},ae={get:function(t,e){if(e===ne)return t;var n=wt(t);if(!vt(n,e))return function(t,e,n){var r,i=Ut(e,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!pt(r)?r:r===zt(t.t,e)?(Gt(t),t.o[e]=Wt(t.A.h,r,t)):r},has:function(t,e){return e in wt(t)},ownKeys:function(t){return Reflect.ownKeys(wt(t))},set:function(t,e,n){var r=Ut(wt(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=zt(wt(t),e),o=null==i?void 0:i[ne];if(o&&o.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(xt(n,i)&&(void 0!==n||vt(t.t,e)))return!0;Gt(t),Vt(t)}return t.o[e]===n&&(void 0!==n||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return void 0!==zt(t.t,e)||e in t.t?(t.R[e]=!1,Gt(t),Vt(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=wt(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){ht(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){ht(12)}},le={};gt(ae,(function(t,e){le[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),le.deleteProperty=function(t,e){return le.set.call(this,t,e,void 0)},le.set=function(t,e,n){return ae.set.call(this,t[0],e,n,t[0])};var ce=function(){function t(t){var e=this;this.O=$t,this.D=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var i=n;n=t;var o=e;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,s=Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return o.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(s))}))}}var s;if("function"!=typeof n&&ht(6),void 0!==r&&"function"!=typeof r&&ht(7),pt(t)){var a=Bt(e),l=Wt(e,t,void 0),c=!0;try{s=n(l),c=!1}finally{c?Rt(a):It(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(t){return kt(a,r),Dt(t,a)}),(function(t){throw Rt(a),t})):(kt(a,r),Dt(s,a))}if(!t||"object"!=typeof t){if(void 0===(s=n(t))&&(s=t),s===te&&(s=void 0),e.D&&Ct(s,!0),r){var u=[],d=[];Mt("Patches").M(t,s,u,d),r(u,d)}return s}ht(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(i))}))};var r,i,o=e.produce(t,n,(function(t,e){r=t,i=e}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return[t,r,i]})):[o,r,i]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){pt(t)||ht(8),ft(t)&&(t=Ht(t));var e=Bt(this),n=Wt(this,t,void 0);return n[ne].C=!0,It(e),n},e.finishDraft=function(t,e){var n=(t&&t[ne]).A;return kt(n,e),Dt(void 0,n)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!$t&&ht(20),this.O=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var i=Mt("Patches").$;return ft(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),ue=new ce,de=ue.produce;ue.produceWithPatches.bind(ue),ue.setAutoFreeze.bind(ue),ue.setUseProxies.bind(ue),ue.applyPatches.bind(ue),ue.createDraft.bind(ue),ue.finishDraft.bind(ue);const he=de;function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function pe(t){var e=function(t,e){if("object"!=fe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fe(e)?e:e+""}function ge(t,e,n){return(e=pe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach((function(e){ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function be(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var ye="function"===typeof Symbol&&Symbol.observable||"@@observable",xe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ae={INIT:"@@redux/INIT"+xe(),REPLACE:"@@redux/REPLACE"+xe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+xe()}};function _e(t){if("object"!==typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function we(t,e,n){var r;if("function"===typeof e&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(be(0));if("function"===typeof e&&"undefined"===typeof n&&(n=e,e=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(be(1));return n(we)(t,e)}if("function"!==typeof t)throw new Error(be(2));var i=t,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(be(3));return o}function d(t){if("function"!==typeof t)throw new Error(be(4));if(l)throw new Error(be(5));var e=!0;return c(),a.push(t),function(){if(e){if(l)throw new Error(be(6));e=!1,c();var n=a.indexOf(t);a.splice(n,1),s=null}}}function h(t){if(!_e(t))throw new Error(be(7));if("undefined"===typeof t.type)throw new Error(be(8));if(l)throw new Error(be(9));try{l=!0,o=i(o,t)}finally{l=!1}for(var e=s=a,n=0;n<e.length;n++){(0,e[n])()}return t}return h({type:Ae.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(t){if("function"!==typeof t)throw new Error(be(10));i=t,h({type:Ae.REPLACE})}})[ye]=function(){var t,e=d;return(t={subscribe:function(t){if("object"!==typeof t||null===t)throw new Error(be(11));function n(){t.next&&t.next(u())}return n(),{unsubscribe:e(n)}}})[ye]=function(){return this},t},r}function Se(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];0,"function"===typeof t[i]&&(n[i]=t[i])}var o,s=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if("undefined"===typeof n(void 0,{type:Ae.INIT}))throw new Error(be(12));if("undefined"===typeof n(void 0,{type:Ae.PROBE_UNKNOWN_ACTION()}))throw new Error(be(13))}))}(n)}catch(a){o=a}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var l=s[a],c=n[l],u=t[l],d=c(u,e);if("undefined"===typeof d){e&&e.type;throw new Error(be(14))}i[l]=d,r=r||d!==u}return(r=r||s.length!==Object.keys(t).length)?i:t}}function Ce(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function Ee(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(be(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map((function(t){return t(i)}));return r=Ce.apply(void 0,o)(n.dispatch),ve(ve({},n),{},{dispatch:r})}}}function Pe(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"===typeof i?i(n,r,t):e(i)}}}}var Me=Pe();Me.withExtraArgument=Pe;const Te=Me;var Oe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Re=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Ie=Object.defineProperty,Be=Object.defineProperties,Le=Object.getOwnPropertyDescriptors,De=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,je=function(t,e,n){return e in t?Ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ze=function(t,e){for(var n in e||(e={}))Fe.call(e,n)&&je(t,n,e[n]);if(De)for(var r=0,i=De(e);r<i.length;r++){n=i[r];Ne.call(e,n)&&je(t,n,e[n])}return t},Ue=function(t,e){return Be(t,Le(e))},Ve=function(t,e,n){return new Promise((function(r,i){var o=function(t){try{a(n.next(t))}catch(e){i(e)}},s=function(t){try{a(n.throw(t))}catch(e){i(e)}},a=function(t){return t.done?r(t.value):Promise.resolve(t.value).then(o,s)};a((n=n.apply(t,e)).next())}))},Ge="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Ce:Ce.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function We(t){if("object"!==typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}function He(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var i=e.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ze(ze({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}var Je=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Oe(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,Re([void 0],t[0].concat(this)))):new(e.bind.apply(e,Re([void 0],t.concat(this))))},e}(Array),Ke=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Oe(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,Re([void 0],t[0].concat(this)))):new(e.bind.apply(e,Re([void 0],t.concat(this))))},e}(Array);function Xe(t){return pt(t)?he(t,(function(){})):t}function qe(){return function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,r=(t.immutableCheck,t.serializableCheck,t.actionCreatorCheck,new Je);n&&(!function(t){return"boolean"===typeof t}(n)?r.push(Te.withExtraArgument(n.extraArgument)):r.push(Te));0;return r}(t)}}function Ye(t){var e,n={},r=[],i={addCase:function(t,e){var r="string"===typeof t?t:t.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=e,i},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),i},addDefaultCase:function(t){return e=t,i}};return t(i),[n,r,e]}function Qe(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof t.initialState?t.initialState:Xe(t.initialState),i=t.reducers||{},o=Object.keys(i),s={},a={},l={};function c(){var e="function"===typeof t.extraReducers?Ye(t.extraReducers):[t.extraReducers],n=e[0],i=void 0===n?{}:n,o=e[1],s=void 0===o?[]:o,l=e[2],c=void 0===l?void 0:l,u=ze(ze({},i),a);return function(t,e,n,r){void 0===n&&(n=[]);var i,o="function"===typeof e?Ye(e):[e,n,r],s=o[0],a=o[1],l=o[2];if(function(t){return"function"===typeof t}(t))i=function(){return Xe(t())};else{var c=Xe(t);i=function(){return c}}function u(t,e){void 0===t&&(t=i());var n=Re([s[e.type]],a.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[l]),n.reduce((function(t,n){if(n){var r;if(ft(t))return void 0===(r=n(t,e))?t:r;if(pt(t))return he(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}return u.getInitialState=i,u}(r,(function(t){for(var e in u)t.addCase(e,u[e]);for(var n=0,r=s;n<r.length;n++){var i=r[n];t.addMatcher(i.matcher,i.reducer)}c&&t.addDefaultCase(c)}))}return o.forEach((function(t){var n,r,o=i[t],c=e+"/"+t;"reducer"in o?(n=o.reducer,r=o.prepare):n=o,s[t]=n,a[c]=n,l[t]=r?He(c,r):He(c)})),{name:e,reducer:function(t,e){return n||(n=c()),n(t,e)},actions:l,caseReducers:s,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var Ze=function(t){void 0===t&&(t=21);for(var e="",n=t;n--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},$e=["name","message","stack","code"],tn=function(t,e){this.payload=t,this.meta=e},en=function(t,e){this.payload=t,this.meta=e},nn=function(t){if("object"===typeof t&&null!==t){for(var e={},n=0,r=$e;n<r.length;n++){var i=r[n];"string"===typeof t[i]&&(e[i]=t[i])}return e}return{message:String(t)}};!function(){function t(t,e,n){var r=He(t+"/fulfilled",(function(t,e,n,r){return{payload:t,meta:Ue(ze({},r||{}),{arg:n,requestId:e,requestStatus:"fulfilled"})}})),i=He(t+"/pending",(function(t,e,n){return{payload:void 0,meta:Ue(ze({},n||{}),{arg:e,requestId:t,requestStatus:"pending"})}})),o=He(t+"/rejected",(function(t,e,r,i,o){return{payload:i,error:(n&&n.serializeError||nn)(t||"Rejected"),meta:Ue(ze({},o||{}),{arg:r,requestId:e,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==t?void 0:t.name),condition:"ConditionError"===(null==t?void 0:t.name)})}})),s="undefined"!==typeof AbortController?AbortController:function(){function t(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return t.prototype.abort=function(){0},t}();return Object.assign((function(t){return function(a,l,c){var u,d=(null==n?void 0:n.idGenerator)?n.idGenerator(t):Ze(),h=new s;function f(t){u=t,h.abort()}var p=function(){return Ve(this,null,(function(){var s,p,g,m,v,b;return ke(this,(function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),m=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,t,{getState:l,extra:c}),null===(x=m)||"object"!==typeof x||"function"!==typeof x.then?[3,2]:[4,m];case 1:m=y.sent(),y.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,v=new Promise((function(t,e){return h.signal.addEventListener("abort",(function(){return e({name:"AbortError",message:u||"Aborted"})}))})),a(i(d,t,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:d,arg:t},{getState:l,extra:c}))),[4,Promise.race([v,Promise.resolve(e(t,{dispatch:a,getState:l,extra:c,requestId:d,signal:h.signal,abort:f,rejectWithValue:function(t,e){return new tn(t,e)},fulfillWithValue:function(t,e){return new en(t,e)}})).then((function(e){if(e instanceof tn)throw e;return e instanceof en?r(e.payload,d,t,e.meta):r(e,d,t)}))])];case 3:return g=y.sent(),[3,5];case 4:return b=y.sent(),g=b instanceof tn?o(null,d,t,b.payload,b.meta):o(b,d,t),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(g)&&g.meta.condition||a(g),[2,g]}var x}))}))}();return Object.assign(p,{abort:f,requestId:d,arg:t,unwrap:function(){return p.then(rn)}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:t})}t.withTypes=function(){return t}}();function rn(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}Object.assign;var on="listenerMiddleware";He(on+"/add"),He(on+"/removeAll"),He(on+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var sn,an=function(t){return function(e){setTimeout(e,t)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:an(10);Kt();const ln=Qe({name:"cityIOdataState",initialState:{},cityIOisDone:!1,cityIOtableName:"",reducers:{updateCityIOdata:(t,e)=>{t.cityIOdata=e.payload},toggleCityIOisDone:(t,e)=>{t.cityIOisDone=e.payload},updateCityIOtableName:(t,e)=>{t.cityIOtableName=e.payload}}}),{updateCityIOdata:cn,toggleCityIOisDone:un,updateCityIOtableName:dn}=ln.actions,hn=ln.reducer;var fn=n(9370);const pn={fontFamily:'"Roboto Mono", sans-serif',fontSize:11,fontWeightLight:100,fontWeightRegular:500,fontWeightMedium:700,h1:{fontWeight:700,fontSize:45,letterSpacing:"-1px"},h2:{fontWeight:800,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:700,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}};var gn=n(7344);const mn=(0,gn.A)({typography:pn,palette:{mode:"dark"}}),vn={csjsURL:(()=>{const t=window.location,e="cityscopejs_local"in fn.parse(t.search)?"http://localhost:3000":"https://cityscope.media.mit.edu/CS_cityscopeJS";return console.log("cityScopeJS location: ",e),e})()},bn={docsURL:"https://raw.githubusercontent.com/CityScope/CS_cityscopeJS/master/docs/",cityIO:{baseURL:(()=>{const t=window.location,e="cityio_local"in fn.parse(t.search)?"http://localhost:8080/api/":"https://cityio.media.mit.edu/cityio/api/";return console.log("cityIO server location: ",e),e})(),websocketURL:(()=>{const t=window.location,e="cityio_local"in fn.parse(t.search)?"ws://localhost:8080/interface":"wss://cityio.media.mit.edu/cityio/interface";return console.log("cityIO websocket server location: ",e),e})(),ListOfTables:"table/list/",headers:"table/headers/",interval:500,cityIOmodules:[{name:"header",expectUpdate:!1},{name:"GEOGRID",expectUpdate:!1},{name:"ABM2",expectUpdate:!0},{name:"geojson",expectUpdate:!0},{name:"grid",expectUpdate:!1},{name:"access",expectUpdate:!0},{name:"GEOGRIDDATA",expectUpdate:!1},{name:"indicators",expectUpdate:!0},{name:"textual",expectUpdate:!0},{name:"scenarios",expectUpdate:!0},{name:"tui",expectUpdate:!0},{name:"geo_heatmap",expectUpdate:!0},{name:"traffic",expectUpdate:!0}]}},yn={map:{mapboxLink:"mapbox://styles/relnox/",mapboxRefreshString:"?fresh=true",mapStyles:{Dark:"ck0h5xn701bpr1dqs3he2lecq",Inverse:"cjlu6w5sc1dy12rmn4kl2zljn",Normal:"cl8dv36nv000t14qik9yg4ys6"},layers:{ABM:{endTime:86400,startTime:43200,animationSpeed:100}},initialViewState:{maxZoom:22,pitch:0,bearing:0,longitude:-122.41669,latitude:37.7853,zoom:13}}},xn={GRID_LAYER_CHECKBOX:{displayName:"CS Grid",cityIOmoduleName:"GEOGRID",initState:!0,initSliderValue:50},ABM_LAYER_CHECKBOX:{displayName:"Trips Volume",cityIOmoduleName:"ABM2",initState:!1,initSliderValue:5},AGGREGATED_TRIPS_LAYER_CHECKBOX:{displayName:"Origin-Destination",cityIOmoduleName:"ABM2",initState:!1,initSliderValue:20},ACCESS_LAYER_CHECKBOX:{displayName:"Heatmap",cityIOmoduleName:"access",initState:!1,initSliderValue:50,selected:0}},An={RESET_VIEW_BUTTON:{displayName:"Reset View",initState:!1},ORTHO_VIEW_BUTTON:{displayName:"Ortho View",initState:!1},NORTH_VIEW_BUTTON:{displayName:"North View",initState:!1}};var _n=n(5332),wn=n(8387),Sn=n(3174),Cn=n(8812),En=n(8698);const Pn=["className","component"];var Mn=n(5430),Tn=n(7056);const On=(0,Tn.A)("MuiBox",["root"]),kn=(0,gn.A)(),Rn=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=(0,Sn.default)("div",{shouldForwardProp:t=>"theme"!==t&&"sx"!==t&&"as"!==t})(Cn.A),s=h.forwardRef((function(t,s){const a=(0,m.A)(n),l=(0,En.A)(t),{className:c,component:u="div"}=l,d=(0,C.A)(l,Pn);return(0,v.jsx)(o,(0,f.A)({as:u,ref:s,className:(0,wn.A)(c,i?i(r):r),theme:e&&a[e]||a},d))}));return s}({themeId:x.A,defaultTheme:kn,defaultClassName:On.root,generateClassName:Mn.A.generate}),In=Rn;var Bn=n(8606),Ln=n(4535),Dn=n(6803),Fn=n(2400);function Nn(t){return(0,Fn.Ay)("MuiTypography",t)}(0,Tn.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const jn=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],zn=(0,Ln.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e["align".concat((0,Dn.A)(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&e.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Un={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Vn={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Gn=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiTypography"}),r=(t=>Vn[t]||t)(n.color),i=(0,En.A)((0,f.A)({},n,{color:r})),{align:o="inherit",className:s,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=Un}=i,g=(0,C.A)(i,jn),m=(0,f.A)({},i,{align:o,color:r,className:s,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),b=a||(u?"p":h[d]||Un[d])||"span",y=(t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=t,a={root:["root",o,"inherit"!==t.align&&"align".concat((0,Dn.A)(e)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,Bn.A)(a,Nn,s)})(m);return(0,v.jsx)(zn,(0,f.A)({as:b,ref:e,ownerState:m,className:(0,wn.A)(y.root,s)},g))})),Wn=Gn;function Hn(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Jn=n(3290),Kn=n(7266);function Xn(t){return(0,Fn.Ay)("MuiLinearProgress",t)}(0,Tn.A)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var qn,Yn,Qn,Zn,$n,tr;const er=["className","color","value","valueBuffer","variant"];let nr,rr,ir,or,sr,ar;const lr=(0,Jn.i7)(nr||(nr=qn||(qn=Hn(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),cr=(0,Jn.i7)(rr||(rr=Yn||(Yn=Hn(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),ur=(0,Jn.i7)(ir||(ir=Qn||(Qn=Hn(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),dr=(t,e)=>"inherit"===e?"currentColor":t.vars?t.vars.palette.LinearProgress["".concat(e,"Bg")]:"light"===t.palette.mode?(0,Kn.a)(t.palette[e].main,.62):(0,Kn.e$)(t.palette[e].main,.5),hr=(0,Ln.Ay)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["color".concat((0,Dn.A)(n.color))],e[n.variant]]}})((t=>{let{ownerState:e,theme:n}=t;return(0,f.A)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:dr(n,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"})})),fr=(0,Ln.Ay)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e["dashedColor".concat((0,Dn.A)(n.color))]]}})((t=>{let{ownerState:e,theme:n}=t;const r=dr(n,e.color);return(0,f.A)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,Jn.AH)(or||(or=Zn||(Zn=Hn(["\n    animation: "," 3s infinite linear;\n  "]))),ur)),pr=(0,Ln.Ay)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e["barColor".concat((0,Dn.A)(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&e.bar1Indeterminate,"determinate"===n.variant&&e.bar1Determinate,"buffer"===n.variant&&e.bar1Buffer]}})((t=>{let{ownerState:e,theme:n}=t;return(0,f.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(n.vars||n).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===e.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(t=>{let{ownerState:e}=t;return("indeterminate"===e.variant||"query"===e.variant)&&(0,Jn.AH)(sr||(sr=$n||($n=Hn(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),lr)})),gr=(0,Ln.Ay)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e["barColor".concat((0,Dn.A)(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&e.bar2Indeterminate,"buffer"===n.variant&&e.bar2Buffer]}})((t=>{let{ownerState:e,theme:n}=t;return(0,f.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(n.vars||n).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:dr(n,e.color),transition:"transform .".concat(4,"s linear")})}),(t=>{let{ownerState:e}=t;return("indeterminate"===e.variant||"query"===e.variant)&&(0,Jn.AH)(ar||(ar=tr||(tr=Hn(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),cr)})),mr=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiLinearProgress"}),{className:r,color:i="primary",value:o,valueBuffer:s,variant:a="indeterminate"}=n,l=(0,C.A)(n,er),c=(0,f.A)({},n,{color:i,variant:a}),u=(t=>{const{classes:e,variant:n,color:r}=t,i={root:["root","color".concat((0,Dn.A)(r)),n],dashed:["dashed","dashedColor".concat((0,Dn.A)(r))],bar1:["bar","barColor".concat((0,Dn.A)(r)),("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&"barColor".concat((0,Dn.A)(r)),"buffer"===n&&"color".concat((0,Dn.A)(r)),("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,Bn.A)(i,Xn,e)})(c),d=B(),h={},g={bar1:{},bar2:{}};if("determinate"===a||"buffer"===a)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let t=o-100;d&&(t=-t),g.bar1.transform="translateX(".concat(t,"%)")}else 0;if("buffer"===a)if(void 0!==s){let t=(s||0)-100;d&&(t=-t),g.bar2.transform="translateX(".concat(t,"%)")}else 0;return(0,v.jsxs)(hr,(0,f.A)({className:(0,wn.A)(u.root,r),ownerState:c,role:"progressbar"},h,{ref:e},l,{children:["buffer"===a?(0,v.jsx)(fr,{className:u.dashed,ownerState:c}):null,(0,v.jsx)(pr,{className:u.bar1,ownerState:c,style:g.bar1}),"determinate"===a?null:(0,v.jsx)(gr,{className:u.bar2,ownerState:c,style:g.bar2})]}))})),vr=mr,br=t=>{let{loadingModules:e,barHeight:n}=t;const r=n||2;return(0,v.jsx)(v.Fragment,{children:e.map(((t,e)=>{const n=10+e*r*10;return(0,v.jsxs)(In,{sx:{bottom:"".concat(n,"px"),width:"15vw",zIndex:999,position:"fixed",left:"1vw"},children:[(0,v.jsxs)(Wn,{variant:"caption",color:"secondary",style:{marginRight:"1vw"},children:[t,"..."]}),(0,v.jsx)(vr,{sx:{height:r},color:"secondary"})]},"box_"+t)}))})},yr=t=>{const e=ut(),n=et((t=>t.cityIOdataState.cityIOdata)),{tableName:r}=t,i=bn.cityIO.cityIOmodules.map((t=>t.name)),[o,s]=(0,h.useState)([]),{sendJsonMessage:a,lastJsonMessage:l,readyState:c}=(0,_n.Ay)(bn.cityIO.websocketURL,{share:!0,shouldReconnect:()=>!0});return(0,h.useEffect)((()=>{console.log("Connection state changed"),c===_n.vj.OPEN&&(a({type:"LISTEN",content:{gridId:r}}),s(["Loading ".concat(r," data.")]))}),[c]),(0,h.useEffect)((()=>{if(null==l)return;console.log("Got a new message: ".concat(JSON.stringify(l)));let t=l.type;if("TABLE_SNAPSHOT"===t){console.log(" --- trying to update GEOGRID --- ".concat(JSON.stringify(l.content))),s([]);let t={...n,GEOGRID:l.content.GEOGRID,GEOGRIDDATA:l.content.GEOGRIDDATA,tableName:r};Object.keys(l.content).forEach((e=>{i.includes(e)&&"scenarios"!==e&&"indicators"!==e?t[e]=l.content[e]:"LAYERS"===e?t={...t,layers:l.content[e]}:"NUMERICINDICATORS"===e&&(t={...t,indicators:l.content[e]})})),a({type:"REQUEST_CORE_MODULES_LIST",content:{}}),a({type:"LIST_SCENARIOS",content:{}}),e(cn(t)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),e(un(!0))}else if("GEOGRIDDATA_UPDATE"===t){console.log(" --- trying to update GEOGRIDDATA --- ".concat(JSON.stringify(l.content)));let t={...n,GEOGRIDDATA:l.content};e(cn(t)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),e(un(!0))}else if("MODULE"===t){console.log(" --- trying to update MODULE data --- ".concat(JSON.stringify(l.content)));let t={...n};if("numeric"in l.content.moduleData){var o=[],c=[];l.content.moduleData.numeric.forEach((t=>{c.push(t),o.push(t.name)}));const e=t.indicators;e&&e.forEach((t=>{o.includes(t.name)||c.push(t)})),t={...t,indicators:c}}if("layers"in l.content.moduleData){var u=[],d=[];l.content.moduleData.layers.forEach((t=>{d.push(t),u.push(t.id)}));const e=t.layers;e&&e.forEach((t=>{u.includes(t.id)||d.push(t)})),t={...t,layers:d}}e(cn(t)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),e(un(!0))}else if("CORE_MODULES_LIST"===t){console.log(" --- trying to update CORE_MODULES_LIST --- ".concat(JSON.stringify(l.content)));let t={...n,core_modules:l.content};e(cn(t)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),e(un(!0))}else if("SCENARIOS"===t){console.log(" --- trying to update SCENARIOS --- ".concat(JSON.stringify(l.content)));let t={...n,scenarios:l.content};e(cn(t)),console.log("%c --- done updating from cityIO ---","color: rgb(0, 255, 0)"),e(un(!0))}}),[l]),(0,v.jsx)(br,{loadingModules:o})};var xr=n(9751);function Ar(){const t=(0,m.A)(y.A);return t[x.A]||t}const _r=h.createContext();function wr(t){return(0,Fn.Ay)("MuiGrid",t)}const Sr=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Cr=(0,Tn.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((t=>"spacing-xs-".concat(t))),...["column-reverse","column","row-reverse","row"].map((t=>"direction-xs-".concat(t))),...["nowrap","wrap-reverse","wrap"].map((t=>"wrap-xs-".concat(t))),...Sr.map((t=>"grid-xs-".concat(t))),...Sr.map((t=>"grid-sm-".concat(t))),...Sr.map((t=>"grid-md-".concat(t))),...Sr.map((t=>"grid-lg-".concat(t))),...Sr.map((t=>"grid-xl-".concat(t)))]),Er=Cr,Pr=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Mr(t){const e=parseFloat(t);return"".concat(e).concat(String(t).replace(String(e),"")||"px")}function Tr(t){let{breakpoints:e,values:n}=t,r="";Object.keys(n).forEach((t=>{""===r&&0!==n[t]&&(r=t)}));const i=Object.keys(e).sort(((t,n)=>e[t]-e[n]));return i.slice(0,i.indexOf(r))}const Or=(0,Ln.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||t<=0)return[];if("string"===typeof t&&!Number.isNaN(Number(t))||"number"===typeof t)return[n["spacing-xs-".concat(String(t))]];const r=[];return e.forEach((e=>{const i=t[e];Number(i)>0&&r.push(n["spacing-".concat(e,"-").concat(String(i))])})),r}(s,c,e));const d=[];return c.forEach((t=>{const r=n[t];r&&d.push(e["grid-".concat(t,"-").concat(String(r))])})),[e.root,r&&e.container,o&&e.item,l&&e.zeroMinWidth,...u,"row"!==i&&e["direction-xs-".concat(String(i))],"wrap"!==a&&e["wrap-xs-".concat(String(a))],...d]}})((t=>{let{ownerState:e}=t;return(0,f.A)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"wrap"!==e.wrap&&{flexWrap:e.wrap})}),(function(t){let{theme:e,ownerState:n}=t;const r=(0,xr.kW)({values:n.direction,breakpoints:e.breakpoints.values});return(0,xr.NI)({theme:e},r,(t=>{const e={flexDirection:t};return 0===t.indexOf("column")&&(e["& > .".concat(Er.item)]={maxWidth:"none"}),e}))}),(function(t){let{theme:e,ownerState:n}=t;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const t=(0,xr.kW)({values:i,breakpoints:e.breakpoints.values});let n;"object"===typeof t&&(n=Tr({breakpoints:e.breakpoints.values,values:t})),o=(0,xr.NI)({theme:e},t,((t,r)=>{var i;const o=e.spacing(t);return"0px"!==o?{marginTop:"-".concat(Mr(o)),["& > .".concat(Er.item)]:{paddingTop:Mr(o)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,["& > .".concat(Er.item)]:{paddingTop:0}}}))}return o}),(function(t){let{theme:e,ownerState:n}=t;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const t=(0,xr.kW)({values:i,breakpoints:e.breakpoints.values});let n;"object"===typeof t&&(n=Tr({breakpoints:e.breakpoints.values,values:t})),o=(0,xr.NI)({theme:e},t,((t,r)=>{var i;const o=e.spacing(t);return"0px"!==o?{width:"calc(100% + ".concat(Mr(o),")"),marginLeft:"-".concat(Mr(o)),["& > .".concat(Er.item)]:{paddingLeft:Mr(o)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,["& > .".concat(Er.item)]:{paddingLeft:0}}}))}return o}),(function(t){let e,{theme:n,ownerState:r}=t;return n.breakpoints.keys.reduce(((t,i)=>{let o={};if(r[i]&&(e=r[i]),!e)return t;if(!0===e)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===e)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=(0,xr.kW)({values:r.columns,breakpoints:n.breakpoints.values}),a="object"===typeof s?s[i]:s;if(void 0===a||null===a)return t;const l="".concat(Math.round(e/a*1e8)/1e6,"%");let c={};if(r.container&&r.item&&0!==r.columnSpacing){const t=n.spacing(r.columnSpacing);if("0px"!==t){const e="calc(".concat(l," + ").concat(Mr(t),")");c={flexBasis:e,maxWidth:e}}}o=(0,f.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[i]?Object.assign(t,o):t[n.breakpoints.up(i)]=o,t}),{})}));const kr=t=>{const{classes:e,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=t;let c=[];n&&(c=function(t,e){if(!t||t<=0)return[];if("string"===typeof t&&!Number.isNaN(Number(t))||"number"===typeof t)return["spacing-xs-".concat(String(t))];const n=[];return e.forEach((e=>{const r=t[e];if(Number(r)>0){const t="spacing-".concat(e,"-").concat(String(r));n.push(t)}})),n}(o,l));const u=[];l.forEach((e=>{const n=t[e];n&&u.push("grid-".concat(e,"-").concat(String(n)))}));const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,"row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==s&&"wrap-xs-".concat(String(s)),...u]};return(0,Bn.A)(d,wr,e)},Rr=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiGrid"}),{breakpoints:r}=Ar(),i=(0,En.A)(n),{className:o,columns:s,columnSpacing:a,component:l="div",container:c=!1,direction:u="row",item:d=!1,rowSpacing:g,spacing:m=0,wrap:b="wrap",zeroMinWidth:y=!1}=i,x=(0,C.A)(i,Pr),A=g||m,_=a||m,w=h.useContext(_r),S=c?s||12:w,E={},P=(0,f.A)({},x);r.keys.forEach((t=>{null!=x[t]&&(E[t]=x[t],delete P[t])}));const M=(0,f.A)({},i,{columns:S,container:c,direction:u,item:d,rowSpacing:A,columnSpacing:_,wrap:b,zeroMinWidth:y,spacing:m},E,{breakpoints:r.keys}),T=kr(M);return(0,v.jsx)(_r.Provider,{value:S,children:(0,v.jsx)(Or,(0,f.A)({ownerState:M,className:(0,wn.A)(T.root,o),as:l,ref:e},P))})}));const Ir=Rr;function Br(t){return"string"===typeof t}var Lr=n(5849),Dr=n(3319),Fr=n(7844);function Nr(t,e){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nr(t,e)}function jr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Nr(t,e)}const zr=h.createContext(null);function Ur(t,e){var n=Object.create(null);return t&&h.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,h.isValidElement)(t)?e(t):t}(t)})),n}function Vr(t,e,n){return null!=n[e]?n[e]:t.props[e]}function Gr(t,e,n){var r=Ur(t.children),i=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var s in t)s in e?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(e,r);return Object.keys(i).forEach((function(o){var s=i[o];if((0,h.isValidElement)(s)){var a=o in e,l=o in r,c=e[o],u=(0,h.isValidElement)(c)&&!c.props.in;!l||a&&!u?l||!a||u?l&&a&&(0,h.isValidElement)(c)&&(i[o]=(0,h.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:Vr(s,"exit",t),enter:Vr(s,"enter",t)})):i[o]=(0,h.cloneElement)(s,{in:!1}):i[o]=(0,h.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:Vr(s,"exit",t),enter:Vr(s,"enter",t)})}})),i}var Wr=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},Hr=function(t){function e(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}jr(e,t);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(t,e){var n,r,i=e.children,o=e.handleExited;return{children:e.firstRender?(n=t,r=o,Ur(n.children,(function(t){return(0,h.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:Vr(t,"appear",n),enter:Vr(t,"enter",n),exit:Vr(t,"exit",n)})}))):Gr(t,i,o),firstRender:!1}},n.handleExited=function(t,e){var n=Ur(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,f.A)({},e.children);return delete n[t.key],{children:n}})))},n.render=function(){var t=this.props,e=t.component,n=t.childFactory,r=(0,C.A)(t,["component","childFactory"]),i=this.state.contextValue,o=Wr(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===e?h.createElement(zr.Provider,{value:i},o):h.createElement(zr.Provider,{value:i},h.createElement(e,r,o))},e}(h.Component);Hr.propTypes={},Hr.defaultProps={component:"div",childFactory:function(t){return t}};const Jr=Hr;var Kr=n(1140);const Xr=function(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:l,timeout:c}=t,[u,d]=h.useState(!1),f=(0,wn.A)(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),p={width:s,height:s,top:-s/2+o,left:-s/2+i},g=(0,wn.A)(n.child,u&&n.childLeaving,r&&n.childPulsate);return a||u||d(!0),h.useEffect((()=>{if(!a&&null!=l){const t=setTimeout(l,c);return()=>{clearTimeout(t)}}}),[l,a,c]),(0,v.jsx)("span",{className:f,style:p,children:(0,v.jsx)("span",{className:g})})};const qr=(0,Tn.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var Yr,Qr,Zr,$r;const ti=["center","classes","className"];let ei,ni,ri,ii;const oi=(0,Jn.i7)(ei||(ei=Yr||(Yr=Hn(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),si=(0,Jn.i7)(ni||(ni=Qr||(Qr=Hn(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),ai=(0,Jn.i7)(ri||(ri=Zr||(Zr=Hn(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),li=(0,Ln.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ci=(0,Ln.Ay)(Xr,{name:"MuiTouchRipple",slot:"Ripple"})(ii||(ii=$r||($r=Hn(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),qr.rippleVisible,oi,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),qr.ripplePulsate,(t=>{let{theme:e}=t;return e.transitions.duration.shorter}),qr.child,qr.childLeaving,si,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),qr.childPulsate,ai,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut})),ui=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o}=n,s=(0,C.A)(n,ti),[a,l]=h.useState([]),c=h.useRef(0),u=h.useRef(null);h.useEffect((()=>{u.current&&(u.current(),u.current=null)}),[a]);const d=h.useRef(!1),g=(0,Kr.A)(),m=h.useRef(null),b=h.useRef(null),y=h.useCallback((t=>{const{pulsate:e,rippleX:n,rippleY:r,rippleSize:o,cb:s}=t;l((t=>[...t,(0,v.jsx)(ci,{classes:{ripple:(0,wn.A)(i.ripple,qr.ripple),rippleVisible:(0,wn.A)(i.rippleVisible,qr.rippleVisible),ripplePulsate:(0,wn.A)(i.ripplePulsate,qr.ripplePulsate),child:(0,wn.A)(i.child,qr.child),childLeaving:(0,wn.A)(i.childLeaving,qr.childLeaving),childPulsate:(0,wn.A)(i.childPulsate,qr.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:o},c.current)])),c.current+=1,u.current=s}),[i]),x=h.useCallback((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||e.pulsate,fakeElement:s=!1}=e;if("mousedown"===(null==t?void 0:t.type)&&d.current)return void(d.current=!1);"touchstart"===(null==t?void 0:t.type)&&(d.current=!0);const a=s?null:b.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(o||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:e,clientY:n}=t.touches&&t.touches.length>0?t.touches[0]:t;c=Math.round(e-l.left),u=Math.round(n-l.top)}if(o)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const t=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,e=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;h=Math.sqrt(t**2+e**2)}null!=t&&t.touches?null===m.current&&(m.current=()=>{y({pulsate:i,rippleX:c,rippleY:u,rippleSize:h,cb:n})},g.start(80,(()=>{m.current&&(m.current(),m.current=null)}))):y({pulsate:i,rippleX:c,rippleY:u,rippleSize:h,cb:n})}),[r,y,g]),A=h.useCallback((()=>{x({},{pulsate:!0})}),[x]),_=h.useCallback(((t,e)=>{if(g.clear(),"touchend"===(null==t?void 0:t.type)&&m.current)return m.current(),m.current=null,void g.start(0,(()=>{_(t,e)}));m.current=null,l((t=>t.length>0?t.slice(1):t)),u.current=e}),[g]);return h.useImperativeHandle(e,(()=>({pulsate:A,start:x,stop:_})),[A,x,_]),(0,v.jsx)(li,(0,f.A)({className:(0,wn.A)(qr.root,i.root,o),ref:b},s,{children:(0,v.jsx)(Jr,{component:null,exit:!0,children:a})}))})),di=ui;function hi(t){return(0,Fn.Ay)("MuiButtonBase",t)}const fi=(0,Tn.A)("MuiButtonBase",["root","disabled","focusVisible"]),pi=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],gi=(0,Ln.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(fi.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),mi=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:s,component:a="button",disabled:l=!1,disableRipple:c=!1,disableTouchRipple:u=!1,focusRipple:d=!1,LinkComponent:g="a",onBlur:m,onClick:b,onContextMenu:y,onDragLeave:x,onFocus:A,onFocusVisible:_,onKeyDown:w,onKeyUp:S,onMouseDown:E,onMouseLeave:P,onMouseUp:M,onTouchEnd:T,onTouchMove:O,onTouchStart:k,tabIndex:R=0,TouchRippleProps:I,touchRippleRef:B,type:L}=n,D=(0,C.A)(n,pi),F=h.useRef(null),N=h.useRef(null),j=(0,Lr.A)(N,B),{isFocusVisibleRef:z,onFocus:U,onBlur:V,ref:G}=(0,Fr.A)(),[W,H]=h.useState(!1);l&&W&&H(!1),h.useImperativeHandle(r,(()=>({focusVisible:()=>{H(!0),F.current.focus()}})),[]);const[J,K]=h.useState(!1);h.useEffect((()=>{K(!0)}),[]);const X=J&&!c&&!l;function q(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return(0,Dr.A)((r=>{e&&e(r);return!n&&N.current&&N.current[t](r),!0}))}h.useEffect((()=>{W&&d&&!c&&J&&N.current.pulsate()}),[c,d,W,J]);const Y=q("start",E),Q=q("stop",y),Z=q("stop",x),$=q("stop",M),tt=q("stop",(t=>{W&&t.preventDefault(),P&&P(t)})),et=q("start",k),nt=q("stop",T),rt=q("stop",O),it=q("stop",(t=>{V(t),!1===z.current&&H(!1),m&&m(t)}),!1),ot=(0,Dr.A)((t=>{F.current||(F.current=t.currentTarget),U(t),!0===z.current&&(H(!0),_&&_(t)),A&&A(t)})),st=()=>{const t=F.current;return a&&"button"!==a&&!("A"===t.tagName&&t.href)},at=h.useRef(!1),lt=(0,Dr.A)((t=>{d&&!at.current&&W&&N.current&&" "===t.key&&(at.current=!0,N.current.stop(t,(()=>{N.current.start(t)}))),t.target===t.currentTarget&&st()&&" "===t.key&&t.preventDefault(),w&&w(t),t.target===t.currentTarget&&st()&&"Enter"===t.key&&!l&&(t.preventDefault(),b&&b(t))})),ct=(0,Dr.A)((t=>{d&&" "===t.key&&N.current&&W&&!t.defaultPrevented&&(at.current=!1,N.current.stop(t,(()=>{N.current.pulsate(t)}))),S&&S(t),b&&t.target===t.currentTarget&&st()&&" "===t.key&&!t.defaultPrevented&&b(t)}));let ut=a;"button"===ut&&(D.href||D.to)&&(ut=g);const dt={};"button"===ut?(dt.type=void 0===L?"button":L,dt.disabled=l):(D.href||D.to||(dt.role="button"),l&&(dt["aria-disabled"]=l));const ht=(0,Lr.A)(e,G,F);const ft=(0,f.A)({},n,{centerRipple:i,component:a,disabled:l,disableRipple:c,disableTouchRipple:u,focusRipple:d,tabIndex:R,focusVisible:W}),pt=(t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o={root:["root",e&&"disabled",n&&"focusVisible"]},s=(0,Bn.A)(o,hi,i);return n&&r&&(s.root+=" ".concat(r)),s})(ft);return(0,v.jsxs)(gi,(0,f.A)({as:ut,className:(0,wn.A)(pt.root,s),ownerState:ft,onBlur:it,onClick:b,onContextMenu:Q,onFocus:ot,onKeyDown:lt,onKeyUp:ct,onMouseDown:Y,onMouseLeave:tt,onMouseUp:$,onDragLeave:Z,onTouchEnd:nt,onTouchMove:rt,onTouchStart:et,ref:ht,tabIndex:l?-1:R,type:L},dt,D,{children:[o,X?(0,v.jsx)(di,(0,f.A)({ref:j,center:i},I)):null]}))}));var vi=n(154),bi=n(5013);const yi=h.createContext({});function xi(t){return(0,Fn.Ay)("MuiListItem",t)}const Ai=(0,Tn.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);const _i=(0,Tn.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function wi(t){return(0,Fn.Ay)("MuiListItemSecondaryAction",t)}(0,Tn.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const Si=["className"],Ci=(0,Ln.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})((t=>{let{ownerState:e}=t;return(0,f.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})})),Ei=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiListItemSecondaryAction"}),{className:r}=n,i=(0,C.A)(n,Si),o=h.useContext(yi),s=(0,f.A)({},n,{disableGutters:o.disableGutters}),a=(t=>{const{disableGutters:e,classes:n}=t,r={root:["root",e&&"disableGutters"]};return(0,Bn.A)(r,wi,n)})(s);return(0,v.jsx)(Ci,(0,f.A)({className:(0,wn.A)(a.root,r),ownerState:s,ref:e},i))}));Ei.muiName="ListItemSecondaryAction";const Pi=Ei,Mi=["className"],Ti=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Oi=(0,Ln.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,f.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(_i.root)]:{paddingRight:48}},{["&.".concat(Ai.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(Ai.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,Kn.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(Ai.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,Kn.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(Ai.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Ai.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,Kn.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,Kn.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),ki=(0,Ln.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),Ri=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiListItem"}),{alignItems:r="center",autoFocus:i=!1,button:o=!1,children:s,className:a,component:l,components:c={},componentsProps:u={},ContainerComponent:d="li",ContainerProps:{className:g}={},dense:m=!1,disabled:b=!1,disableGutters:y=!1,disablePadding:x=!1,divider:A=!1,focusVisibleClassName:_,secondaryAction:w,selected:S=!1,slotProps:E={},slots:P={}}=n,M=(0,C.A)(n.ContainerProps,Mi),T=(0,C.A)(n,Ti),O=h.useContext(yi),k=h.useMemo((()=>({dense:m||O.dense||!1,alignItems:r,disableGutters:y})),[r,O.dense,m,y]),R=h.useRef(null);(0,bi.A)((()=>{i&&R.current&&R.current.focus()}),[i]);const I=h.Children.toArray(s),B=I.length&&(0,vi.A)(I[I.length-1],["ListItemSecondaryAction"]),L=(0,f.A)({},n,{alignItems:r,autoFocus:i,button:o,dense:k.dense,disabled:b,disableGutters:y,disablePadding:x,divider:A,hasSecondaryAction:B,selected:S}),D=(t=>{const{alignItems:e,button:n,classes:r,dense:i,disabled:o,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=t,d={root:["root",i&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===e&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,Bn.A)(d,xi,r)})(L),F=(0,Lr.A)(R,e),N=P.root||c.Root||Oi,j=E.root||u.root||{},z=(0,f.A)({className:(0,wn.A)(D.root,j.className,a),disabled:b},T);let U=l||"li";return o&&(z.component=l||"div",z.focusVisibleClassName=(0,wn.A)(Ai.focusVisible,_),U=mi),B?(U=z.component||l?U:"div","li"===d&&("li"===U?U="div":"li"===z.component&&(z.component="div")),(0,v.jsx)(yi.Provider,{value:k,children:(0,v.jsxs)(ki,(0,f.A)({as:d,className:(0,wn.A)(D.container,g),ref:F,ownerState:L},M,{children:[(0,v.jsx)(N,(0,f.A)({},j,!Br(N)&&{as:U,ownerState:(0,f.A)({},L,j.ownerState)},z,{children:I})),I.pop()]}))})):(0,v.jsx)(yi.Provider,{value:k,children:(0,v.jsxs)(N,(0,f.A)({},j,{as:U,ref:F},!Br(N)&&{ownerState:(0,f.A)({},L,j.ownerState)},z,{children:[I,w&&(0,v.jsx)(Pi,{children:w})]}))})})),Ii=Ri;var Bi=n(2018),Li=n(1475);function Di(t){return(0,Fn.Ay)("MuiButton",t)}const Fi=(0,Tn.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const Ni=h.createContext({});const ji=h.createContext(void 0),zi=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ui=t=>(0,f.A)({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Vi=(0,Ln.Ay)(mi,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e["".concat(n.variant).concat((0,Dn.A)(n.color))],e["size".concat((0,Dn.A)(n.size))],e["".concat(n.variant,"Size").concat((0,Dn.A)(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((t=>{let{theme:e,ownerState:n}=t;var r,i;const o="light"===e.palette.mode?e.palette.grey[300]:e.palette.grey[800],s="light"===e.palette.mode?e.palette.grey.A100:e.palette.grey[700];return(0,f.A)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,f.A)({textDecoration:"none",backgroundColor:e.vars?"rgba(".concat(e.vars.palette.text.primaryChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((e.vars||e).palette[n.color].main),backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}}),"&:active":(0,f.A)({},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[8]}),["&.".concat(Fi.focusVisible)]:(0,f.A)({},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[6]}),["&.".concat(Fi.disabled)]:(0,f.A)({color:(e.vars||e).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.action.disabledBackground)},"contained"===n.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].main,border:e.vars?"1px solid rgba(".concat(e.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,Kn.X4)(e.palette[n.color].main,.5))},"contained"===n.variant&&{color:e.vars?e.vars.palette.text.primary:null==(r=(i=e.palette).getContrastText)?void 0:r.call(i,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:o,boxShadow:(e.vars||e).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(t=>{let{ownerState:e}=t;return e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(Fi.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(Fi.disabled)]:{boxShadow:"none"}}})),Gi=(0,Ln.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e["iconSize".concat((0,Dn.A)(n.size))]]}})((t=>{let{ownerState:e}=t;return(0,f.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Ui(e))})),Wi=(0,Ln.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e["iconSize".concat((0,Dn.A)(n.size))]]}})((t=>{let{ownerState:e}=t;return(0,f.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Ui(e))})),Hi=h.forwardRef((function(t,e){const n=h.useContext(Ni),r=h.useContext(ji),i=(0,Bi.A)(n,t),o=(0,p.A)({props:i,name:"MuiButton"}),{children:s,color:a="primary",component:l="button",className:c,disabled:u=!1,disableElevation:d=!1,disableFocusRipple:g=!1,endIcon:m,focusVisibleClassName:b,fullWidth:y=!1,size:x="medium",startIcon:A,type:_,variant:w="text"}=o,S=(0,C.A)(o,zi),E=(0,f.A)({},o,{color:a,component:l,disabled:u,disableElevation:d,disableFocusRipple:g,fullWidth:y,size:x,type:_,variant:w}),P=(t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=t,a={root:["root",o,"".concat(o).concat((0,Dn.A)(e)),"size".concat((0,Dn.A)(i)),"".concat(o,"Size").concat((0,Dn.A)(i)),"color".concat((0,Dn.A)(e)),n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon","iconSize".concat((0,Dn.A)(i))],endIcon:["icon","endIcon","iconSize".concat((0,Dn.A)(i))]},l=(0,Bn.A)(a,Di,s);return(0,f.A)({},s,l)})(E),M=A&&(0,v.jsx)(Gi,{className:P.startIcon,ownerState:E,children:A}),T=m&&(0,v.jsx)(Wi,{className:P.endIcon,ownerState:E,children:m}),O=r||"";return(0,v.jsxs)(Vi,(0,f.A)({ownerState:E,className:(0,wn.A)(n.className,P.root,c,O),component:l,disabled:u,focusRipple:!g,focusVisibleClassName:(0,wn.A)(P.focusVisible,b),ref:e,type:_},S,{classes:P,children:[M,s,T]}))})),Ji=Hi,Ki=t=>{let e;return e=t<1?5.11916*t**2:4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function Xi(t){return(0,Fn.Ay)("MuiPaper",t)}(0,Tn.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const qi=["className","component","elevation","square","variant"],Yi=(0,Ln.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((t=>{let{theme:e,ownerState:n}=t;var r;return(0,f.A)({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!n.square&&{borderRadius:e.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.divider)},"elevation"===n.variant&&(0,f.A)({boxShadow:(e.vars||e).shadows[n.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Kn.X4)("#fff",Ki(n.elevation)),", ").concat((0,Kn.X4)("#fff",Ki(n.elevation)),")")},e.vars&&{backgroundImage:null==(r=e.vars.overlays)?void 0:r[n.elevation]}))})),Qi=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=(0,C.A)(n,qi),c=(0,f.A)({},n,{component:i,elevation:o,square:s,variant:a}),u=(t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,Bn.A)(o,Xi,i)})(c);return(0,v.jsx)(Yi,(0,f.A)({as:i,ownerState:c,className:(0,wn.A)(u.root,r),ref:e},l))}));function Zi(t){return(0,Fn.Ay)("MuiCard",t)}(0,Tn.A)("MuiCard",["root"]);const $i=["className","raised"],to=(0,Ln.Ay)(Qi,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({overflow:"hidden"}))),eo=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiCard"}),{className:r,raised:i=!1}=n,o=(0,C.A)(n,$i),s=(0,f.A)({},n,{raised:i}),a=(t=>{const{classes:e}=t;return(0,Bn.A)({root:["root"]},Zi,e)})(s);return(0,v.jsx)(to,(0,f.A)({className:(0,wn.A)(a.root,r),elevation:i?8:void 0,ref:e,ownerState:s},o))}));function no(t){return(0,Fn.Ay)("MuiCardContent",t)}(0,Tn.A)("MuiCardContent",["root"]);const ro=["className","component"],io=(0,Ln.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),oo=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiCardContent"}),{className:r,component:i="div"}=n,o=(0,C.A)(n,ro),s=(0,f.A)({},n,{component:i}),a=(t=>{const{classes:e}=t;return(0,Bn.A)({root:["root"]},no,e)})(s);return(0,v.jsx)(io,(0,f.A)({as:i,className:(0,wn.A)(a.root,r),ownerState:s,ref:e},o))}));function so(t){return(0,Fn.Ay)("MuiDivider",t)}(0,Tn.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const ao=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],lo=(0,Ln.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,"vertical"===n.orientation&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&"vertical"===n.orientation&&e.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignLeft]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:e.vars?"rgba(".concat(e.vars.palette.dividerChannel," / 0.08)"):(0,Kn.X4)(e.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(t=>{let{ownerState:e}=t;return(0,f.A)({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((e.vars||e).palette.divider)}})}),(t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((e.vars||e).palette.divider)}})}),(t=>{let{ownerState:e}=t;return(0,f.A)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),co=(0,Ln.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,"vertical"===n.orientation&&e.wrapperVertical]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({display:"inline-block",paddingLeft:"calc(".concat(e.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(e.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(e.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(e.spacing(1)," * 1.2)")})})),uo=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiDivider"}),{absolute:r=!1,children:i,className:o,component:s=(i?"div":"hr"),flexItem:a=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==s?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=n,g=(0,C.A)(n,ao),m=(0,f.A)({},n,{absolute:r,component:s,flexItem:a,light:l,orientation:c,role:u,textAlign:d,variant:h}),b=(t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:l}=t,c={root:["root",e&&"absolute",l,o&&"light","vertical"===s&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===s&&"withChildrenVertical","right"===a&&"vertical"!==s&&"textAlignRight","left"===a&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,Bn.A)(c,so,r)})(m);return(0,v.jsx)(lo,(0,f.A)({as:s,className:(0,wn.A)(b.root,o),role:u,ref:e,ownerState:m},g,{children:i?(0,v.jsx)(co,{className:b.wrapper,ownerState:m,children:i}):null}))}));uo.muiSkipListHighlight=!0;const ho=uo;var fo=n(7042);function po(t,e,n){return void 0===t||Br(t)?e:(0,f.A)({},e,{ownerState:(0,f.A)({},e.ownerState,n)})}function go(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)return{};const n={};return Object.keys(t).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof t[n]&&!e.includes(n))).forEach((e=>{n[e]=t[e]})),n}function mo(t){if(void 0===t)return{};const e={};return Object.keys(t).filter((e=>!(e.match(/^on[A-Z]/)&&"function"===typeof t[e]))).forEach((n=>{e[n]=t[n]})),e}const vo=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function bo(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=t,s=(0,C.A)(t,vo),a=o?{}:function(t,e,n){return"function"===typeof t?t(e,n):t}(r,i),{props:l,internalRef:c}=function(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const t=(0,wn.A)(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),e=(0,f.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),s=(0,f.A)({},n,i,r);return t.length>0&&(s.className=t),Object.keys(e).length>0&&(s.style=e),{props:s,internalRef:void 0}}const s=go((0,f.A)({},i,r)),a=mo(r),l=mo(i),c=e(s),u=(0,wn.A)(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,f.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),h=(0,f.A)({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}((0,f.A)({},s,{externalSlotProps:a})),u=(0,fo.A)(c,null==a?void 0:a.ref,null==(e=t.additionalProps)?void 0:e.ref);return po(n,(0,f.A)({},l,{ref:u}),i)}var yo=n(2144),xo=n(1944),Ao=n(7040),_o=n(932),wo=n(3844),So=n(4626);const Co={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Eo(t,e){return t-e}function Po(t,e){var n;const{index:r}=null!=(n=t.reduce(((t,n,r)=>{const i=Math.abs(e-n);return null===t||i<t.distance||i===t.distance?{distance:i,index:r}:t}),null))?n:{};return r}function Mo(t,e){if(void 0!==e.current&&t.changedTouches){const n=t;for(let t=0;t<n.changedTouches.length;t+=1){const r=n.changedTouches[t];if(r.identifier===e.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function To(t,e,n){return 100*(t-e)/(n-e)}function Oo(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(function(t){if(Math.abs(t)<1){const e=t.toExponential().split("e-"),n=e[0].split(".")[1];return(n?n.length:0)+parseInt(e[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}(e)))}function ko(t){let{values:e,newValue:n,index:r}=t;const i=e.slice();return i[r]=n,i.sort(Eo)}function Ro(t){let{sliderRef:e,activeIndex:n,setActive:r}=t;var i,o;const s=(0,yo.A)(e.current);var a;null!=(i=e.current)&&i.contains(s.activeElement)&&Number(null==s||null==(o=s.activeElement)?void 0:o.getAttribute("data-index"))===n||(null==(a=e.current)||a.querySelector('[type="range"][data-index="'.concat(n,'"]')).focus());r&&r(n)}function Io(t,e){return"number"===typeof t&&"number"===typeof e?t===e:"object"===typeof t&&"object"===typeof e&&function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t===e;return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}(t,e)}const Bo={horizontal:{offset:t=>({left:"".concat(t,"%")}),leap:t=>({width:"".concat(t,"%")})},"horizontal-reverse":{offset:t=>({right:"".concat(t,"%")}),leap:t=>({width:"".concat(t,"%")})},vertical:{offset:t=>({bottom:"".concat(t,"%")}),leap:t=>({height:"".concat(t,"%")})}},Lo=t=>t;let Do;function Fo(){return void 0===Do&&(Do="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),Do}function No(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:s=!1,max:a=100,min:l=0,name:c,onChange:u,onChangeCommitted:d,orientation:p="horizontal",rootRef:g,scale:m=Lo,step:v=1,shiftStep:b=10,tabIndex:y,value:x}=t,A=h.useRef(),[_,w]=h.useState(-1),[S,C]=h.useState(-1),[E,P]=h.useState(!1),M=h.useRef(0),[T,O]=(0,xo.A)({controlled:x,default:null!=n?n:l,name:"Slider"}),k=u&&((t,e,n)=>{const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:e,name:c}}),u(i,e,n)}),R=Array.isArray(T);let I=R?T.slice().sort(Eo):[T];I=I.map((t=>null==t?l:(0,Ao.A)(t,l,a)));const B=!0===s&&null!==v?[...Array(Math.floor((a-l)/v)+1)].map(((t,e)=>({value:l+v*e}))):s||[],L=B.map((t=>t.value)),{isFocusVisibleRef:D,onBlur:F,onFocus:N,ref:j}=(0,_o.A)(),[z,U]=h.useState(-1),V=h.useRef(),G=(0,fo.A)(j,V),W=(0,fo.A)(g,G),H=t=>e=>{var n;const r=Number(e.currentTarget.getAttribute("data-index"));N(e),!0===D.current&&U(r),C(r),null==t||null==(n=t.onFocus)||n.call(t,e)},J=t=>e=>{var n;F(e),!1===D.current&&U(-1),C(-1),null==t||null==(n=t.onBlur)||n.call(t,e)},K=(t,e)=>{const n=Number(t.currentTarget.getAttribute("data-index")),r=I[n],o=L.indexOf(r);let s=e;if(B&&null==v){const t=L[L.length-1];s=s>t?t:s<L[0]?L[0]:s<r?L[o-1]:L[o+1]}if(s=(0,Ao.A)(s,l,a),R){i&&(s=(0,Ao.A)(s,I[n-1]||-1/0,I[n+1]||1/0));const t=s;s=ko({values:I,newValue:s,index:n});let e=n;i||(e=s.indexOf(t)),Ro({sliderRef:V,activeIndex:e})}O(s),U(n),k&&!Io(s,T)&&k(t,s,n),d&&d(t,s)},X=t=>e=>{var n;if(null!==v){const t=Number(e.currentTarget.getAttribute("data-index")),n=I[t];let r=null;("ArrowLeft"===e.key||"ArrowDown"===e.key)&&e.shiftKey||"PageDown"===e.key?r=Math.max(n-b,l):(("ArrowRight"===e.key||"ArrowUp"===e.key)&&e.shiftKey||"PageUp"===e.key)&&(r=Math.min(n+b,a)),null!==r&&(K(e,r),e.preventDefault())}null==t||null==(n=t.onKeyDown)||n.call(t,e)};(0,wo.A)((()=>{var t;r&&V.current.contains(document.activeElement)&&(null==(t=document.activeElement)||t.blur())}),[r]),r&&-1!==_&&w(-1),r&&-1!==z&&U(-1);const q=h.useRef();let Y=p;o&&"horizontal"===p&&(Y+="-reverse");const Q=t=>{let{finger:e,move:n=!1}=t;const{current:r}=V,{width:o,height:s,bottom:c,left:u}=r.getBoundingClientRect();let d,h;if(d=0===Y.indexOf("vertical")?(c-e.y)/s:(e.x-u)/o,-1!==Y.indexOf("-reverse")&&(d=1-d),h=function(t,e,n){return(n-e)*t+e}(d,l,a),v)h=Oo(h,v,l);else{const t=Po(L,h);h=L[t]}h=(0,Ao.A)(h,l,a);let f=0;if(R){f=n?q.current:Po(I,h),i&&(h=(0,Ao.A)(h,I[f-1]||-1/0,I[f+1]||1/0));const t=h;h=ko({values:I,newValue:h,index:f}),i&&n||(f=h.indexOf(t),q.current=f)}return{newValue:h,activeIndex:f}},Z=(0,So.A)((t=>{const e=Mo(t,A);if(!e)return;if(M.current+=1,"mousemove"===t.type&&0===t.buttons)return void $(t);const{newValue:n,activeIndex:r}=Q({finger:e,move:!0});Ro({sliderRef:V,activeIndex:r,setActive:w}),O(n),!E&&M.current>2&&P(!0),k&&!Io(n,T)&&k(t,n,r)})),$=(0,So.A)((t=>{const e=Mo(t,A);if(P(!1),!e)return;const{newValue:n}=Q({finger:e,move:!0});w(-1),"touchend"===t.type&&C(-1),d&&d(t,n),A.current=void 0,et()})),tt=(0,So.A)((t=>{if(r)return;Fo()||t.preventDefault();const e=t.changedTouches[0];null!=e&&(A.current=e.identifier);const n=Mo(t,A);if(!1!==n){const{newValue:e,activeIndex:r}=Q({finger:n});Ro({sliderRef:V,activeIndex:r,setActive:w}),O(e),k&&!Io(e,T)&&k(t,e,r)}M.current=0;const i=(0,yo.A)(V.current);i.addEventListener("touchmove",Z,{passive:!0}),i.addEventListener("touchend",$,{passive:!0})})),et=h.useCallback((()=>{const t=(0,yo.A)(V.current);t.removeEventListener("mousemove",Z),t.removeEventListener("mouseup",$),t.removeEventListener("touchmove",Z),t.removeEventListener("touchend",$)}),[$,Z]);h.useEffect((()=>{const{current:t}=V;return t.addEventListener("touchstart",tt,{passive:Fo()}),()=>{t.removeEventListener("touchstart",tt),et()}}),[et,tt]),h.useEffect((()=>{r&&et()}),[r,et]);const nt=To(R?I[0]:l,l,a),rt=To(I[I.length-1],l,a)-nt,it=t=>e=>{var n;null==(n=t.onMouseLeave)||n.call(t,e),C(-1)};return{active:_,axis:Y,axisProps:Bo,dragging:E,focusedThumbIndex:z,getHiddenInputProps:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const s=go(n),u={onChange:(d=s||{},t=>{var e;null==(e=d.onChange)||e.call(d,t),K(t,t.target.valueAsNumber)}),onFocus:H(s||{}),onBlur:J(s||{}),onKeyDown:X(s||{})};var d;const h=(0,f.A)({},s,u);return(0,f.A)({tabIndex:y,"aria-labelledby":e,"aria-orientation":p,"aria-valuemax":m(a),"aria-valuemin":m(l),name:c,type:"range",min:t.min,max:t.max,step:null===t.step&&t.marks?"any":null!=(i=t.step)?i:void 0,disabled:r},n,h,{style:(0,f.A)({},Co,{direction:o?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=go(t),n={onMouseDown:(i=e||{},t=>{var e;if(null==(e=i.onMouseDown)||e.call(i,t),r)return;if(t.defaultPrevented)return;if(0!==t.button)return;t.preventDefault();const n=Mo(t,A);if(!1!==n){const{newValue:e,activeIndex:r}=Q({finger:n});Ro({sliderRef:V,activeIndex:r,setActive:w}),O(e),k&&!Io(e,T)&&k(t,e,r)}M.current=0;const o=(0,yo.A)(V.current);o.addEventListener("mousemove",Z,{passive:!0}),o.addEventListener("mouseup",$)})};var i;const o=(0,f.A)({},e,n);return(0,f.A)({},t,{ref:W},o)},getThumbProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=go(t),n={onMouseOver:(r=e||{},t=>{var e;null==(e=r.onMouseOver)||e.call(r,t);const n=Number(t.currentTarget.getAttribute("data-index"));C(n)}),onMouseLeave:it(e||{})};var r;return(0,f.A)({},t,e,n)},marks:B,open:S,range:R,rootRef:W,trackLeap:rt,trackOffset:nt,values:I,getThumbStyle:t=>({pointerEvents:-1!==_&&_!==t?"none":void 0})}}function jo(t){return p.A}var zo=n(7123);const Uo=t=>!t||!Br(t);function Vo(t){return(0,Fn.Ay)("MuiSlider",t)}const Go=(0,Tn.A)("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);const Wo=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"],Ho=jo();function Jo(t){return t}const Ko=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["color".concat((0,Dn.A)(n.color))],"medium"!==n.size&&e["size".concat((0,Dn.A)(n.size))],n.marked&&e.marked,"vertical"===n.orientation&&e.vertical,"inverted"===n.track&&e.trackInverted,!1===n.track&&e.trackFalse]}})((t=>{let{theme:e}=t;var n;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},["&.".concat(Go.disabled)]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},["&.".concat(Go.dragging)]:{["& .".concat(Go.thumb,", & .").concat(Go.track)]:{transition:"none"}},variants:[...Object.keys((null!=(n=e.vars)?n:e).palette).filter((t=>{var n;return(null!=(n=e.vars)?n:e).palette[t].main})).map((t=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}})),Xo=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),qo=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})((t=>{let{theme:e}=t;var n;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys((null!=(n=e.vars)?n:e).palette).filter((t=>{var n;return(null!=(n=e.vars)?n:e).palette[t].main})).map((t=>({props:{color:t,track:"inverted"},style:(0,f.A)({},e.vars?{backgroundColor:e.vars.palette.Slider["".concat(t,"Track")],borderColor:e.vars.palette.Slider["".concat(t,"Track")]}:(0,f.A)({backgroundColor:(0,Kn.a)(e.palette[t].main,.62),borderColor:(0,Kn.a)(e.palette[t].main,.62)},e.applyStyles("dark",{backgroundColor:(0,Kn.e$)(e.palette[t].main,.5)}),e.applyStyles("dark",{borderColor:(0,Kn.e$)(e.palette[t].main,.5)})))})))]}})),Yo=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e["thumbColor".concat((0,Dn.A)(n.color))],"medium"!==n.size&&e["thumbSize".concat((0,Dn.A)(n.size))]]}})((t=>{let{theme:e}=t;var n;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},["&.".concat(Go.disabled)]:{"&:hover":{boxShadow:"none"}},variants:[...Object.keys((null!=(n=e.vars)?n:e).palette).filter((t=>{var n;return(null!=(n=e.vars)?n:e).palette[t].main})).map((t=>({props:{color:t},style:{["&:hover, &.".concat(Go.focusVisible)]:(0,f.A)({},e.vars?{boxShadow:"0px 0px 0px 8px rgba(".concat(e.vars.palette[t].mainChannel," / 0.16)")}:{boxShadow:"0px 0px 0px 8px ".concat((0,Kn.X4)(e.palette[t].main,.16))},{"@media (hover: none)":{boxShadow:"none"}}),["&.".concat(Go.active)]:(0,f.A)({},e.vars?{boxShadow:"0px 0px 0px 14px rgba(".concat(e.vars.palette[t].mainChannel," / 0.16)}")}:{boxShadow:"0px 0px 0px 14px ".concat((0,Kn.X4)(e.palette[t].main,.16))})}}))),{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}}]}})),Qo=(0,Ln.Ay)((function(t){const{children:e,className:n,value:r}=t,i=(t=>{const{open:e}=t;return{offset:(0,wn.A)(e&&Go.valueLabelOpen),circle:Go.valueLabelCircle,label:Go.valueLabelLabel}})(t);return e?h.cloneElement(e,{className:(0,wn.A)(e.props.className)},(0,v.jsxs)(h.Fragment,{children:[e.props.children,(0,v.jsx)("span",{className:(0,wn.A)(i.offset,n),"aria-hidden":!0,children:(0,v.jsx)("span",{className:i.circle,children:(0,v.jsx)("span",{className:i.label,children:r})})})]})):null}),{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})((t=>{let{theme:e}=t;return(0,f.A)({zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},["&.".concat(Go.valueLabelOpen)]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},["&.".concat(Go.valueLabelOpen)]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})})),Zo=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>(0,zo.A)(t)&&"markActive"!==t,overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})((t=>{let{theme:e}=t;return{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}})),$o=(0,Ln.Ay)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>(0,zo.A)(t)&&"markLabelActive"!==t,overridesResolver:(t,e)=>e.markLabel})((t=>{let{theme:e}=t;return(0,f.A)({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]})})),ts=t=>{let{children:e}=t;return e},es=h.forwardRef((function(t,e){var n,r,i,o,s,a,l,c,u,d,p,g,m,b,y,x,A,_,w,S,E,P,M,T;const O=Ho({props:t,name:"MuiSlider"}),k=B(),{"aria-label":R,"aria-valuetext":I,"aria-labelledby":L,component:D="span",components:F={},componentsProps:N={},color:j="primary",classes:z,className:U,disableSwap:V=!1,disabled:G=!1,getAriaLabel:W,getAriaValueText:H,marks:J=!1,max:K=100,min:X=0,orientation:q="horizontal",shiftStep:Y=10,size:Q="medium",step:Z=1,scale:$=Jo,slotProps:tt,slots:et,track:nt="normal",valueLabelDisplay:rt="off",valueLabelFormat:it=Jo}=O,ot=(0,C.A)(O,Wo),st=(0,f.A)({},O,{isRtl:k,max:K,min:X,classes:z,disabled:G,disableSwap:V,orientation:q,marks:J,color:j,size:Q,step:Z,shiftStep:Y,scale:$,track:nt,valueLabelDisplay:rt,valueLabelFormat:it}),{axisProps:at,getRootProps:lt,getHiddenInputProps:ct,getThumbProps:ut,open:dt,active:ht,axis:ft,focusedThumbIndex:pt,range:gt,dragging:mt,marks:vt,values:bt,trackOffset:yt,trackLeap:xt,getThumbStyle:At}=No((0,f.A)({},st,{rootRef:e}));st.marked=vt.length>0&&vt.some((t=>t.label)),st.dragging=mt,st.focusedThumbIndex=pt;const _t=(t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:o,classes:s,color:a,size:l}=t,c={root:["root",e&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===o&&"trackInverted",!1===o&&"trackFalse",a&&"color".concat((0,Dn.A)(a)),l&&"size".concat((0,Dn.A)(l))],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",l&&"thumbSize".concat((0,Dn.A)(l)),a&&"thumbColor".concat((0,Dn.A)(a))],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,Bn.A)(c,Vo,s)})(st),wt=null!=(n=null!=(r=null==et?void 0:et.root)?r:F.Root)?n:Ko,St=null!=(i=null!=(o=null==et?void 0:et.rail)?o:F.Rail)?i:Xo,Ct=null!=(s=null!=(a=null==et?void 0:et.track)?a:F.Track)?s:qo,Et=null!=(l=null!=(c=null==et?void 0:et.thumb)?c:F.Thumb)?l:Yo,Pt=null!=(u=null!=(d=null==et?void 0:et.valueLabel)?d:F.ValueLabel)?u:Qo,Mt=null!=(p=null!=(g=null==et?void 0:et.mark)?g:F.Mark)?p:Zo,Tt=null!=(m=null!=(b=null==et?void 0:et.markLabel)?b:F.MarkLabel)?m:$o,Ot=null!=(y=null!=(x=null==et?void 0:et.input)?x:F.Input)?y:"input",kt=null!=(A=null==tt?void 0:tt.root)?A:N.root,Rt=null!=(_=null==tt?void 0:tt.rail)?_:N.rail,It=null!=(w=null==tt?void 0:tt.track)?w:N.track,Bt=null!=(S=null==tt?void 0:tt.thumb)?S:N.thumb,Lt=null!=(E=null==tt?void 0:tt.valueLabel)?E:N.valueLabel,Dt=null!=(P=null==tt?void 0:tt.mark)?P:N.mark,Ft=null!=(M=null==tt?void 0:tt.markLabel)?M:N.markLabel,Nt=null!=(T=null==tt?void 0:tt.input)?T:N.input,jt=bo({elementType:wt,getSlotProps:lt,externalSlotProps:kt,externalForwardedProps:ot,additionalProps:(0,f.A)({},Uo(wt)&&{as:D}),ownerState:(0,f.A)({},st,null==kt?void 0:kt.ownerState),className:[_t.root,U]}),zt=bo({elementType:St,externalSlotProps:Rt,ownerState:st,className:_t.rail}),Ut=bo({elementType:Ct,externalSlotProps:It,additionalProps:{style:(0,f.A)({},at[ft].offset(yt),at[ft].leap(xt))},ownerState:(0,f.A)({},st,null==It?void 0:It.ownerState),className:_t.track}),Vt=bo({elementType:Et,getSlotProps:ut,externalSlotProps:Bt,ownerState:(0,f.A)({},st,null==Bt?void 0:Bt.ownerState),className:_t.thumb}),Gt=bo({elementType:Pt,externalSlotProps:Lt,ownerState:(0,f.A)({},st,null==Lt?void 0:Lt.ownerState),className:_t.valueLabel}),Wt=bo({elementType:Mt,externalSlotProps:Dt,ownerState:st,className:_t.mark}),Ht=bo({elementType:Tt,externalSlotProps:Ft,ownerState:st,className:_t.markLabel}),Jt=bo({elementType:Ot,getSlotProps:ct,externalSlotProps:Nt,ownerState:st});return(0,v.jsxs)(wt,(0,f.A)({},jt,{children:[(0,v.jsx)(St,(0,f.A)({},zt)),(0,v.jsx)(Ct,(0,f.A)({},Ut)),vt.filter((t=>t.value>=X&&t.value<=K)).map(((t,e)=>{const n=To(t.value,X,K),r=at[ft].offset(n);let i;return i=!1===nt?-1!==bt.indexOf(t.value):"normal"===nt&&(gt?t.value>=bt[0]&&t.value<=bt[bt.length-1]:t.value<=bt[0])||"inverted"===nt&&(gt?t.value<=bt[0]||t.value>=bt[bt.length-1]:t.value>=bt[0]),(0,v.jsxs)(h.Fragment,{children:[(0,v.jsx)(Mt,(0,f.A)({"data-index":e},Wt,!Br(Mt)&&{markActive:i},{style:(0,f.A)({},r,Wt.style),className:(0,wn.A)(Wt.className,i&&_t.markActive)})),null!=t.label?(0,v.jsx)(Tt,(0,f.A)({"aria-hidden":!0,"data-index":e},Ht,!Br(Tt)&&{markLabelActive:i},{style:(0,f.A)({},r,Ht.style),className:(0,wn.A)(_t.markLabel,Ht.className,i&&_t.markLabelActive),children:t.label})):null]},e)})),bt.map(((t,e)=>{const n=To(t,X,K),r=at[ft].offset(n),i="off"===rt?ts:Pt;return(0,v.jsx)(i,(0,f.A)({},!Br(i)&&{valueLabelFormat:it,valueLabelDisplay:rt,value:"function"===typeof it?it($(t),e):it,index:e,open:dt===e||ht===e||"on"===rt,disabled:G},Gt,{children:(0,v.jsx)(Et,(0,f.A)({"data-index":e},Vt,{className:(0,wn.A)(_t.thumb,Vt.className,ht===e&&_t.active,pt===e&&_t.focusVisible),style:(0,f.A)({},r,At(e),Vt.style),children:(0,v.jsx)(Ot,(0,f.A)({"data-index":e,"aria-label":W?W(e):R,"aria-valuenow":$(t),"aria-labelledby":L,"aria-valuetext":H?H($(t),e):I,value:bt[e]},Jt))}))}),e)}))]}))})),ns=es;function rs(t){return(0,Fn.Ay)("MuiList",t)}(0,Tn.A)("MuiList",["root","padding","dense","subheader"]);const is=["children","className","component","dense","disablePadding","subheader"],os=(0,Ln.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((t=>{let{ownerState:e}=t;return(0,f.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})})),ss=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiList"}),{children:r,className:i,component:o="ul",dense:s=!1,disablePadding:a=!1,subheader:l}=n,c=(0,C.A)(n,is),u=h.useMemo((()=>({dense:s})),[s]),d=(0,f.A)({},n,{component:o,dense:s,disablePadding:a}),g=(t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,Bn.A)(o,rs,e)})(d);return(0,v.jsx)(yi.Provider,{value:u,children:(0,v.jsxs)(os,(0,f.A)({as:o,className:(0,wn.A)(g.root,i),ref:e,ownerState:d},c,{children:[l,r]}))})})),as=Qe({name:"menuState",initialState:{editMenuState:{},typesMenuState:{},layersMenuState:{},viewSettingsMenuState:{},animationMenuState:{toggleAnimationState:!1,animationSpeedSliderValue:10}},reducers:{updateLayersMenuState:(t,e)=>{t.layersMenuState=e.payload},updateTypesMenuState:(t,e)=>{t.typesMenuState=e.payload},updateEditMenuState:(t,e)=>{t.editMenuState=e.payload},updateViewSettingsMenuState:(t,e)=>{t.viewSettingsMenuState=e.payload},updateAnimationMenuState:(t,e)=>{t.animationMenuState=e.payload}}}),{updateLayersMenuState:ls,updateTypesMenuState:cs,updateEditMenuState:us,updateViewSettingsMenuState:ds,updateAnimationMenuState:hs}=as.actions,fs=as.reducer;function ps(){var t,e,n;const r=ut(),i=et((t=>t.cityIOdataState.cityIOdata)),o=i.GEOGRID.properties.types,s=null===i||void 0===i||null===(t=i.GEOGRID)||void 0===t||null===(e=t.properties)||void 0===e||null===(n=e.header)||void 0===n?void 0:n.cellSize,a=s*s,[l,c]=(0,h.useState)(),[u,d]=(0,h.useState)();(0,h.useEffect)((()=>{r(cs({SELECTED_TYPE:l}))}),[l]);const f=l&&l.LBCS,p=l&&l.NAICS;let g=l&&l.description?l.description:null;return(0,v.jsx)(v.Fragment,{children:(t=>{let e=[];return Object.keys(t).forEach(((n,r)=>{let i=t[n].color;"string"!==typeof i&&(i="rgb("+t[n].color[0]+","+t[n].color[1]+","+t[n].color[2]+")"),e.push((0,v.jsxs)("div",{children:[(0,v.jsx)(Ii,{children:(0,v.jsx)(Ji,{fullWidth:!0,size:"small",variant:"outlined",sx:{"&.MuiButton-text":{color:{col:i}},border:"solid 1px "+i},onClick:()=>{return e=t[n],r=n,e={...e,thisTypeName:r},void c(e);var e,r},children:(0,v.jsx)(Wn,{color:i,variant:"caption",children:n})},Math.random())},"li_menu_".concat(r)),l&&l.thisTypeName===n&&(0,v.jsx)(Ii,{children:(0,v.jsx)(eo,{variant:"outlined",sx:{width:"100%"},children:(0,v.jsxs)(oo,{children:[g&&(0,v.jsx)(Wn,{variant:"caption",children:g}),(0,v.jsx)(ho,{sx:{marginTop:"10px",marginBottom:"10px"}}),l&&l.thisTypeName&&l.height&&(0,v.jsxs)("div",{children:[(0,v.jsx)(Wn,{children:"Set Floors"}),u&&Array.isArray(u.height)&&(0,v.jsxs)(Wn,{variant:"caption",children:["Each cell adds"," ",a*u.height[1],"m\xb2"]}),(0,v.jsx)(ns,{valueLabelDisplay:"auto",size:"small",onChange:(t,e)=>d((t=>{const n={...t},r=[l.height[0],e,l.height[2]];return Object.assign(n,{height:r}),n})),onChangeCommitted:(t,e)=>{c({...l,height:[l.height[0],e,l.height[2]]})},min:l.height[0],value:u&&u[l]&&u[l].height[1],max:l.height[2]},"li_types_slider_".concat(l.thisTypeName))]},"li_types_div_".concat(r)),f&&(0,v.jsxs)("div",{children:[(0,v.jsx)(Wn,{children:"LBCS"}),(0,v.jsx)(Wn,{variant:"caption",children:JSON.stringify(f,null,"\t")})]}),p&&(0,v.jsxs)("div",{children:[(0,v.jsx)(Wn,{children:"NAICS"}),(0,v.jsx)(Wn,{variant:"caption",children:JSON.stringify(p,null,"\t")})]})]})},"li_types_card_".concat(r))},"li_types_".concat(r))]},"li_types_top_div_".concat(r)))})),(0,v.jsx)(ss,{sx:{display:"flex",flexDirection:"column",maxHeight:400,overflow:"hidden",overflowY:"scroll"},children:e})})(o)})}const gs=h.createContext(void 0);function ms(){return h.useContext(gs)}var vs=n(3216),bs=n(8280);const ys=["ownerState"],xs=["variants"],As=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function _s(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}const ws=(0,bs.A)(),Ss=t=>t?t.charAt(0).toLowerCase()+t.slice(1):t;function Cs(t){let{defaultTheme:e,theme:n,themeId:r}=t;return i=n,0===Object.keys(i).length?e:n[r]||n;var i}function Es(t){return t?(e,n)=>n[t]:null}function Ps(t,e){let{ownerState:n}=e,r=(0,C.A)(e,ys);const i="function"===typeof t?t((0,f.A)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap((t=>Ps(t,(0,f.A)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:t=[]}=i;let e=(0,C.A)(i,xs);return t.forEach((t=>{let i=!0;"function"===typeof t.props?i=t.props((0,f.A)({ownerState:n},r,n)):Object.keys(t.props).forEach((e=>{(null==n?void 0:n[e])!==t.props[e]&&r[e]!==t.props[e]&&(i=!1)})),i&&(Array.isArray(e)||(e=[e]),e.push("function"===typeof t.style?t.style((0,f.A)({ownerState:n},r,n)):t.style))})),e}return i}const Ms=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:e,defaultTheme:n=ws,rootShouldForwardProp:r=_s,slotShouldForwardProp:i=_s}=t,o=t=>(0,Cn.A)((0,f.A)({},t,{theme:Cs((0,f.A)({},t,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Sn.internal_processStyles)(t,(t=>t.filter((t=>!(null!=t&&t.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=Es(Ss(l))}=s,h=(0,C.A)(s,As),p=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,g=u||!1;let m=_s;"Root"===l||"root"===l?m=r:l?m=i:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(m=void 0);const v=(0,Sn.default)(t,(0,f.A)({shouldForwardProp:m,label:undefined},h)),b=t=>"function"===typeof t&&t.__emotion_real!==t||(0,vs.Q)(t)?r=>Ps(t,(0,f.A)({},r,{theme:Cs({theme:r.theme,defaultTheme:n,themeId:e})})):t,y=function(r){let i=b(r);for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];const u=l?l.map(b):[];a&&d&&u.push((t=>{const r=Cs((0,f.A)({},t,{defaultTheme:n,themeId:e}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={};return Object.entries(i).forEach((e=>{let[n,i]=e;o[n]=Ps(i,(0,f.A)({},t,{theme:r}))})),d(t,o)})),a&&!p&&u.push((t=>{var r;const i=Cs((0,f.A)({},t,{defaultTheme:n,themeId:e}));return Ps({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,f.A)({},t,{theme:i}))})),g||u.push(o);const h=u.length-l.length;if(Array.isArray(r)&&h>0){const t=new Array(h).fill("");i=[...r,...t],i.raw=[...r.raw,...t]}const m=v(i,...u);return t.muiName&&(m.muiName=t.muiName),m};return v.withConfig&&(y.withConfig=v.withConfig),y}}(),Ts=Ms;var Os=n(2919),ks=n(8604);const Rs=["component","direction","spacing","divider","children","className","useFlexGap"],Is=(0,bs.A)(),Bs=Ts("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function Ls(t){return(0,Os.A)({props:t,name:"MuiStack",defaultTheme:Is})}function Ds(t,e){const n=h.Children.toArray(t).filter(Boolean);return n.reduce(((t,r,i)=>(t.push(r),i<n.length-1&&t.push(h.cloneElement(e,{key:"separator-".concat(i)})),t)),[])}const Fs=t=>{let{ownerState:e,theme:n}=t,r=(0,f.A)({display:"flex",flexDirection:"column"},(0,xr.NI)({theme:n},(0,xr.kW)({values:e.direction,breakpoints:n.breakpoints.values}),(t=>({flexDirection:t}))));if(e.spacing){const t=(0,ks.LX)(n),i=Object.keys(n.breakpoints.values).reduce(((t,n)=>(("object"===typeof e.spacing&&null!=e.spacing[n]||"object"===typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t)),{}),o=(0,xr.kW)({values:e.direction,base:i}),s=(0,xr.kW)({values:e.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((t,e,n)=>{if(!o[t]){const r=e>0?o[n[e-1]]:"column";o[t]=r}}));const a=(n,r)=>{return e.useFlexGap?{gap:(0,ks._W)(t,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((i=r?o[r]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:(0,ks._W)(t,n)}};var i};r=(0,vs.A)(r,(0,xr.NI)({theme:n},s,a))}return r=(0,xr.iZ)(n.breakpoints,r),r};const Ns=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:e=Bs,useThemeProps:n=Ls,componentName:r="MuiStack"}=t,i=e(Fs),o=h.forwardRef((function(t,e){const o=n(t),s=(0,En.A)(o),{component:a="div",direction:l="column",spacing:c=0,divider:u,children:d,className:h,useFlexGap:p=!1}=s,g=(0,C.A)(s,Rs),m={direction:l,spacing:c,useFlexGap:p},b=(0,Bn.A)({root:["root"]},(t=>(0,Fn.Ay)(r,t)),{});return(0,v.jsx)(i,(0,f.A)({as:a,ownerState:m,ref:e,className:(0,wn.A)(b.root,h)},g,{children:u?Ds(d,u):d}))}));return o}({createStyledComponent:(0,Ln.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>(0,p.A)({props:t,name:"MuiStack"})}),js=Ns;function zs(t){return(0,Fn.Ay)("MuiFormControlLabel",t)}const Us=(0,Tn.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);function Vs(t){let{props:e,states:n,muiFormControl:r}=t;return n.reduce(((t,n)=>(t[n]=e[n],r&&"undefined"===typeof e[n]&&(t[n]=r[n]),t)),{})}const Gs=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Ws=(0,Ln.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(Us.label)]:e.label},e.root,e["labelPlacement".concat((0,Dn.A)(n.labelPlacement))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(Us.disabled)]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(Us.label)]:{["&.".concat(Us.disabled)]:{color:(e.vars||e).palette.text.disabled}}})})),Hs=(0,Ln.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})((t=>{let{theme:e}=t;return{["&.".concat(Us.error)]:{color:(e.vars||e).palette.error.main}}})),Js=h.forwardRef((function(t,e){var n,r;const i=(0,p.A)({props:t,name:"MuiFormControlLabel"}),{className:o,componentsProps:s={},control:a,disabled:l,disableTypography:c,label:u,labelPlacement:d="end",required:g,slotProps:m={}}=i,b=(0,C.A)(i,Gs),y=ms(),x=null!=(n=null!=l?l:a.props.disabled)?n:null==y?void 0:y.disabled,A=null!=g?g:a.props.required,_={disabled:x,required:A};["checked","name","onChange","value","inputRef"].forEach((t=>{"undefined"===typeof a.props[t]&&"undefined"!==typeof i[t]&&(_[t]=i[t])}));const w=Vs({props:i,muiFormControl:y,states:["error"]}),S=(0,f.A)({},i,{disabled:x,labelPlacement:d,required:A,error:w.error}),E=(t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t,s={root:["root",n&&"disabled","labelPlacement".concat((0,Dn.A)(r)),i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return(0,Bn.A)(s,zs,e)})(S),P=null!=(r=m.typography)?r:s.typography;let M=u;return null==M||M.type===Wn||c||(M=(0,v.jsx)(Wn,(0,f.A)({component:"span"},P,{className:(0,wn.A)(E.label,null==P?void 0:P.className),children:M}))),(0,v.jsxs)(Ws,(0,f.A)({className:(0,wn.A)(E.root,o),ownerState:S,ref:e},b,{children:[h.cloneElement(a,_),A?(0,v.jsxs)(js,{display:"block",children:[M,(0,v.jsxs)(Hs,{ownerState:S,"aria-hidden":!0,className:E.asterisk,children:["\u2009","*"]})]}):M]}))})),Ks=Js;var Xs=n(4516);function qs(t){return(0,Fn.Ay)("PrivateSwitchBase",t)}(0,Tn.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ys=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Qs=(0,Ln.Ay)(mi)((t=>{let{ownerState:e}=t;return(0,f.A)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})})),Zs=(0,Ln.Ay)("input",{shouldForwardProp:Li.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),$s=h.forwardRef((function(t,e){const{autoFocus:n,checked:r,checkedIcon:i,className:o,defaultChecked:s,disabled:a,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:g,onBlur:m,onChange:b,onFocus:y,readOnly:x,required:A=!1,tabIndex:_,type:w,value:S}=t,E=(0,C.A)(t,Ys),[P,M]=(0,Xs.A)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),T=ms();let O=a;T&&"undefined"===typeof O&&(O=T.disabled);const k="checkbox"===w||"radio"===w,R=(0,f.A)({},t,{checked:P,disabled:O,disableFocusRipple:l,edge:c}),I=(t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&"edge".concat((0,Dn.A)(i))],input:["input"]};return(0,Bn.A)(o,qs,e)})(R);return(0,v.jsxs)(Qs,(0,f.A)({component:"span",className:(0,wn.A)(I.root,o),centerRipple:!0,focusRipple:!l,disabled:O,tabIndex:null,role:void 0,onFocus:t=>{y&&y(t),T&&T.onFocus&&T.onFocus(t)},onBlur:t=>{m&&m(t),T&&T.onBlur&&T.onBlur(t)},ownerState:R,ref:e},E,{children:[(0,v.jsx)(Zs,(0,f.A)({autoFocus:n,checked:r,defaultChecked:s,className:I.input,disabled:O,id:k?d:void 0,name:g,onChange:t=>{if(t.nativeEvent.defaultPrevented)return;const e=t.target.checked;M(e),b&&b(t,e)},readOnly:x,ref:p,required:A,ownerState:R,tabIndex:_,type:w},"checkbox"===w&&void 0===S?{}:{value:S},h)),P?i:u]}))}));var ta=n(9662);const ea=(0,ta.A)((0,v.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),na=(0,ta.A)((0,v.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ra=(0,ta.A)((0,v.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function ia(t){return(0,Fn.Ay)("MuiCheckbox",t)}const oa=(0,Tn.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),sa=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],aa=(0,Ln.Ay)($s,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e["size".concat((0,Dn.A)(n.size))],"default"!==n.color&&e["color".concat((0,Dn.A)(n.color))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({color:(e.vars||e).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat("default"===n.color?e.vars.palette.action.activeChannel:e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)("default"===n.color?e.palette.action.active:e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(oa.checked,", &.").concat(oa.indeterminate)]:{color:(e.vars||e).palette[n.color].main},["&.".concat(oa.disabled)]:{color:(e.vars||e).palette.action.disabled}})})),la=(0,v.jsx)(na,{}),ca=(0,v.jsx)(ea,{}),ua=(0,v.jsx)(ra,{}),da=h.forwardRef((function(t,e){var n,r;const i=(0,p.A)({props:t,name:"MuiCheckbox"}),{checkedIcon:o=la,color:s="primary",icon:a=ca,indeterminate:l=!1,indeterminateIcon:c=ua,inputProps:u,size:d="medium",className:g}=i,m=(0,C.A)(i,sa),b=l?c:a,y=l?c:o,x=(0,f.A)({},i,{color:s,indeterminate:l,size:d}),A=(t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,o={root:["root",n&&"indeterminate","color".concat((0,Dn.A)(r)),"size".concat((0,Dn.A)(i))]},s=(0,Bn.A)(o,ia,e);return(0,f.A)({},e,s)})(x);return(0,v.jsx)(aa,(0,f.A)({type:"checkbox",inputProps:(0,f.A)({"data-indeterminate":l},u),icon:h.cloneElement(b,{fontSize:null!=(n=b.props.fontSize)?n:d}),checkedIcon:h.cloneElement(y,{fontSize:null!=(r=y.props.fontSize)?r:d}),ownerState:x,ref:e,className:(0,wn.A)(A.root,g)},m,{classes:A}))})),ha=da;const fa=function(){const t=ut(),e=et((t=>t.cityIOdataState.cityIOdata)),n=et((t=>t.menuState.layersMenuState)),r=Object.keys(e),[i,o]=(0,h.useState)((()=>{const t={};for(const e in xn)t[e]=xn[e].initSliderValue;return t}));let s={};const[a,l]=(0,h.useState)((()=>{for(const t in xn)s[t]={isOn:xn[t].initState,slider:xn[t].initSliderValue};return s}));(0,h.useEffect)((()=>{t(ls(a))}),[a]);const c=(t,e)=>{o({...i,[t]:e})},u=(t,e)=>{l({...n,[t]:{...n[t],isOn:e}})},d=(t,e)=>{l({...n,[t]:{...n[t],slider:e}})},f=[];return(()=>{for(const e in xn){const n=xn[e].cityIOmoduleName;var t;if(r.includes(n))f.push((0,v.jsxs)(In,{children:[(0,v.jsx)(Ks,{control:(0,v.jsx)(ha,{checked:a[e]&&a[e].isOn||!1,color:"primary",onChange:t=>u(e,t.target.checked)},"checkbox_"+e),label:(0,v.jsx)(Wn,{variant:"caption",children:xn[e].displayName},"label_"+e)},"formControl_"+e),a[e]&&a[e].isOn&&(0,v.jsx)(ns,{size:"small",valueLabelDisplay:"auto",onChangeCommitted:(t,n)=>d(e,n),onChange:(t,n)=>c(e,n),value:null!==(t=i[e])&&void 0!==t?t:0},"slider_"+e)]},"box_"+e))}if(e.layers)for(let r=0;r<e.layers.length;r++){var n;const t=e.layers[r].id;a[t]||l({...a,[t]:{isOn:!0,slider:50}}),console.log(t),f.push((0,v.jsxs)(In,{children:[(0,v.jsx)(Ks,{control:(0,v.jsx)(ha,{checked:a[t]&&a[t].isOn||!1,color:"primary",onChange:e=>u(t,e.target.checked)},"checkbox_"+t),label:(0,v.jsx)(Wn,{variant:"caption",children:t},"label_"+t)},"formControl_"+t),a[t]&&a[t].isOn&&(0,v.jsx)(ns,{size:"small",valueLabelDisplay:"auto",onChangeCommitted:(e,n)=>d(t,n),onChange:(e,n)=>c(t,n),value:null!==(n=i[t])&&void 0!==n?n:50},"slider_"+t)]},"box_"+t))}return f})()};function pa(t){return(0,Fn.Ay)("MuiButtonGroup",t)}const ga=(0,Tn.A)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),ma=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],va=(0,Ln.Ay)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(ga.grouped)]:e.grouped},{["& .".concat(ga.grouped)]:e["grouped".concat((0,Dn.A)(n.orientation))]},{["& .".concat(ga.grouped)]:e["grouped".concat((0,Dn.A)(n.variant))]},{["& .".concat(ga.grouped)]:e["grouped".concat((0,Dn.A)(n.variant)).concat((0,Dn.A)(n.orientation))]},{["& .".concat(ga.grouped)]:e["grouped".concat((0,Dn.A)(n.variant)).concat((0,Dn.A)(n.color))]},{["& .".concat(ga.firstButton)]:e.firstButton},{["& .".concat(ga.lastButton)]:e.lastButton},{["& .".concat(ga.middleButton)]:e.middleButton},e.root,e[n.variant],!0===n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,"vertical"===n.orientation&&e.vertical]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[2]},n.disableElevation&&{boxShadow:"none"},n.fullWidth&&{width:"100%"},"vertical"===n.orientation&&{flexDirection:"column"},{["& .".concat(ga.grouped)]:(0,f.A)({minWidth:40,"&:hover":(0,f.A)({},"contained"===n.variant&&{boxShadow:"none"})},"contained"===n.variant&&{boxShadow:"none"}),["& .".concat(ga.firstButton,",& .").concat(ga.middleButton)]:(0,f.A)({},"horizontal"===n.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===n.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===n.variant&&"horizontal"===n.orientation&&{borderRight:e.vars?"1px solid rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(ga.disabled)]:{borderRight:"1px solid ".concat((e.vars||e).palette.action.disabled)}},"text"===n.variant&&"vertical"===n.orientation&&{borderBottom:e.vars?"1px solid rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(ga.disabled)]:{borderBottom:"1px solid ".concat((e.vars||e).palette.action.disabled)}},"text"===n.variant&&"inherit"!==n.color&&{borderColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / 0.5)"):(0,Kn.X4)(e.palette[n.color].main,.5)},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"transparent"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"transparent"},"contained"===n.variant&&"horizontal"===n.orientation&&{borderRight:"1px solid ".concat((e.vars||e).palette.grey[400]),["&.".concat(ga.disabled)]:{borderRight:"1px solid ".concat((e.vars||e).palette.action.disabled)}},"contained"===n.variant&&"vertical"===n.orientation&&{borderBottom:"1px solid ".concat((e.vars||e).palette.grey[400]),["&.".concat(ga.disabled)]:{borderBottom:"1px solid ".concat((e.vars||e).palette.action.disabled)}},"contained"===n.variant&&"inherit"!==n.color&&{borderColor:(e.vars||e).palette[n.color].dark},{"&:hover":(0,f.A)({},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"currentColor"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"currentColor"})}),["& .".concat(ga.lastButton,",& .").concat(ga.middleButton)]:(0,f.A)({},"horizontal"===n.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===n.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===n.variant&&"horizontal"===n.orientation&&{marginLeft:-1},"outlined"===n.variant&&"vertical"===n.orientation&&{marginTop:-1})})})),ba=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiButtonGroup"}),{children:r,className:i,color:o="primary",component:s="div",disabled:a=!1,disableElevation:l=!1,disableFocusRipple:c=!1,disableRipple:u=!1,fullWidth:d=!1,orientation:g="horizontal",size:m="medium",variant:b="outlined"}=n,y=(0,C.A)(n,ma),x=(0,f.A)({},n,{color:o,component:s,disabled:a,disableElevation:l,disableFocusRipple:c,disableRipple:u,fullWidth:d,orientation:g,size:m,variant:b}),A=(t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:s,variant:a}=t,l={root:["root",a,"vertical"===s&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped","grouped".concat((0,Dn.A)(s)),"grouped".concat((0,Dn.A)(a)),"grouped".concat((0,Dn.A)(a)).concat((0,Dn.A)(s)),"grouped".concat((0,Dn.A)(a)).concat((0,Dn.A)(n)),r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,Bn.A)(l,pa,e)})(x),_=h.useMemo((()=>({className:A.grouped,color:o,disabled:a,disableElevation:l,disableFocusRipple:c,disableRipple:u,fullWidth:d,size:m,variant:b})),[o,a,l,c,u,d,m,b,A.grouped]),w=function(t){return h.Children.toArray(t).filter((t=>h.isValidElement(t)))}(r),S=w.length,E=t=>{const e=0===t,n=t===S-1;return e&&n?"":e?A.firstButton:n?A.lastButton:A.middleButton};return(0,v.jsx)(va,(0,f.A)({as:s,role:"group",className:(0,wn.A)(A.root,i),ref:e,ownerState:x},y,{children:(0,v.jsx)(Ni.Provider,{value:_,children:w.map(((t,e)=>(0,v.jsx)(ji.Provider,{value:E(e),children:t},e)))})}))})),ya=ba;const xa=function(){const t=ut(),[e,n]=(0,h.useState)();(0,h.useLayoutEffect)((()=>{t(ds(e))}),[e]);const r=t=>{n({...e,VIEW_CONTROL_BUTTONS:t})};return(0,v.jsx)(ss,{children:(t=>{const e=[];for(const n in t)e.push((0,v.jsx)(Ji,{size:"small",onClick:()=>r(n),children:t[n].displayName},Math.random()));return(0,v.jsx)(ya,{fullWidth:!0,sx:{width:"100%"},color:"primary",children:e})})(An)})};const Aa=function(){return(0,v.jsx)(ss,{children:(0,v.jsx)(xa,{})})},_a=!1;var wa="unmounted",Sa="exited",Ca="entering",Ea="entered",Pa="exiting",Ma=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=Sa,r.appearStatus=Ca):i=Ea:i=e.unmountOnExit||e.mountOnEnter?wa:Sa,r.state={status:i},r.nextCallback=null,r}jr(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===wa?{status:Sa}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Ca&&n!==Ea&&(e=Ca):n!==Ca&&n!==Ea||(e=Pa)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===Ca){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:G.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Sa&&this.setState({status:wa})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[G.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!t&&!n||_a?this.safeSetState({status:Ea},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:Ca},(function(){e.props.onEntering(o,s),e.onTransitionEnd(l,(function(){e.safeSetState({status:Ea},(function(){e.props.onEntered(o,s)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:G.findDOMNode(this);e&&!_a?(this.props.onExit(r),this.safeSetState({status:Pa},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Sa},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:Sa},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:G.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===wa)return null;var e=this.props,n=e.children,r=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,(0,C.A)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return h.createElement(zr.Provider,{value:null},"function"===typeof n?n(t,r):h.cloneElement(h.Children.only(n),r))},e}(h.Component);function Ta(){}Ma.contextType=zr,Ma.propTypes={},Ma.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ta,onEntering:Ta,onEntered:Ta,onExit:Ta,onExiting:Ta,onExited:Ta},Ma.UNMOUNTED=wa,Ma.EXITED=Sa,Ma.ENTERING=Ca,Ma.ENTERED=Ea,Ma.EXITING=Pa;const Oa=Ma,ka=t=>t.scrollTop;function Ra(t,e){var n,r;const{timeout:i,easing:o,style:s={}}=t;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[e.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[e.mode]:o,delay:s.transitionDelay}}const Ia=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Ba(t){return"scale(".concat(t,", ").concat(t**2,")")}const La={entering:{opacity:1,transform:Ba(1)},entered:{opacity:1,transform:"none"}},Da="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Fa=h.forwardRef((function(t,e){const{addEndListener:n,appear:r=!0,children:i,easing:o,in:s,onEnter:a,onEntered:l,onEntering:c,onExit:u,onExited:d,onExiting:p,style:g,timeout:m="auto",TransitionComponent:b=Oa}=t,y=(0,C.A)(t,Ia),x=(0,Kr.A)(),A=h.useRef(),_=Ar(),w=h.useRef(null),S=(0,Lr.A)(w,i.ref,e),E=t=>e=>{if(t){const n=w.current;void 0===e?t(n):t(n,e)}},P=E(c),M=E(((t,e)=>{ka(t);const{duration:n,delay:r,easing:i}=Ra({style:g,timeout:m,easing:o},{mode:"enter"});let s;"auto"===m?(s=_.transitions.getAutoHeightDuration(t.clientHeight),A.current=s):s=n,t.style.transition=[_.transitions.create("opacity",{duration:s,delay:r}),_.transitions.create("transform",{duration:Da?s:.666*s,delay:r,easing:i})].join(","),a&&a(t,e)})),T=E(l),O=E(p),k=E((t=>{const{duration:e,delay:n,easing:r}=Ra({style:g,timeout:m,easing:o},{mode:"exit"});let i;"auto"===m?(i=_.transitions.getAutoHeightDuration(t.clientHeight),A.current=i):i=e,t.style.transition=[_.transitions.create("opacity",{duration:i,delay:n}),_.transitions.create("transform",{duration:Da?i:.666*i,delay:Da?n:n||.333*i,easing:r})].join(","),t.style.opacity=0,t.style.transform=Ba(.75),u&&u(t)})),R=E(d);return(0,v.jsx)(b,(0,f.A)({appear:r,in:s,nodeRef:w,onEnter:M,onEntered:T,onEntering:P,onExit:k,onExited:R,onExiting:O,addEndListener:t=>{"auto"===m&&x.start(A.current||0,t),n&&n(w.current,t)},timeout:"auto"===m?null:m},y,{children:(t,e)=>h.cloneElement(i,(0,f.A)({style:(0,f.A)({opacity:0,transform:Ba(.75),visibility:"exited"!==t||s?void 0:"hidden"},La[t],g,i.props.style),ref:S},e))}))}));Fa.muiSupportAuto=!0;const Na=Fa;function ja(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function za(t){return t instanceof ja(t).Element||t instanceof Element}function Ua(t){return t instanceof ja(t).HTMLElement||t instanceof HTMLElement}function Va(t){return"undefined"!==typeof ShadowRoot&&(t instanceof ja(t).ShadowRoot||t instanceof ShadowRoot)}var Ga=Math.max,Wa=Math.min,Ha=Math.round;function Ja(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Ka(){return!/^((?!chrome|android).)*safari/i.test(Ja())}function Xa(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&Ua(t)&&(i=t.offsetWidth>0&&Ha(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ha(r.height)/t.offsetHeight||1);var s=(za(t)?ja(t):window).visualViewport,a=!Ka()&&n,l=(r.left+(a&&s?s.offsetLeft:0))/i,c=(r.top+(a&&s?s.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function qa(t){var e=ja(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ya(t){return t?(t.nodeName||"").toLowerCase():null}function Qa(t){return((za(t)?t.ownerDocument:t.document)||window.document).documentElement}function Za(t){return Xa(Qa(t)).left+qa(t).scrollLeft}function $a(t){return ja(t).getComputedStyle(t)}function tl(t){var e=$a(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function el(t,e,n){void 0===n&&(n=!1);var r=Ua(e),i=Ua(e)&&function(t){var e=t.getBoundingClientRect(),n=Ha(e.width)/t.offsetWidth||1,r=Ha(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),o=Qa(e),s=Xa(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==Ya(e)||tl(o))&&(a=function(t){return t!==ja(t)&&Ua(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:qa(t);var e}(e)),Ua(e)?((l=Xa(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Za(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function nl(t){var e=Xa(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function rl(t){return"html"===Ya(t)?t:t.assignedSlot||t.parentNode||(Va(t)?t.host:null)||Qa(t)}function il(t){return["html","body","#document"].indexOf(Ya(t))>=0?t.ownerDocument.body:Ua(t)&&tl(t)?t:il(rl(t))}function ol(t,e){var n;void 0===e&&(e=[]);var r=il(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),o=ja(r),s=i?[o].concat(o.visualViewport||[],tl(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(ol(rl(s)))}function sl(t){return["table","td","th"].indexOf(Ya(t))>=0}function al(t){return Ua(t)&&"fixed"!==$a(t).position?t.offsetParent:null}function ll(t){for(var e=ja(t),n=al(t);n&&sl(n)&&"static"===$a(n).position;)n=al(n);return n&&("html"===Ya(n)||"body"===Ya(n)&&"static"===$a(n).position)?e:n||function(t){var e=/firefox/i.test(Ja());if(/Trident/i.test(Ja())&&Ua(t)&&"fixed"===$a(t).position)return null;var n=rl(t);for(Va(n)&&(n=n.host);Ua(n)&&["html","body"].indexOf(Ya(n))<0;){var r=$a(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var cl="top",ul="bottom",dl="right",hl="left",fl="auto",pl=[cl,ul,dl,hl],gl="start",ml="end",vl="clippingParents",bl="viewport",yl="popper",xl="reference",Al=pl.reduce((function(t,e){return t.concat([e+"-"+gl,e+"-"+ml])}),[]),_l=[].concat(pl,[fl]).reduce((function(t,e){return t.concat([e,e+"-"+gl,e+"-"+ml])}),[]),wl=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Sl(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function Cl(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var El={placement:"bottom",modifiers:[],strategy:"absolute"};function Pl(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function Ml(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?El:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},El,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},s=[],a=!1,l={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:za(t)?ol(t):t.contextElement?ol(t.contextElement):[],popper:ol(e)};var u=function(t){var e=Sl(t);return wl.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(t){return t.enabled})),i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var a=o({state:i,name:e,instance:l,options:r}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var t=i.elements,e=t.reference,n=t.popper;if(Pl(e,n)){i.rects={reference:el(e,ll(n),"fixed"===i.options.strategy),popper:nl(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:Cl((function(){return new Promise((function(t){l.forceUpdate(),t(i)}))})),destroy:function(){c(),a=!0}};if(!Pl(t,e))return l;function c(){s.forEach((function(t){return t()})),s=[]}return l.setOptions(n).then((function(t){!a&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var Tl={passive:!0};const Ol={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,l=ja(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,Tl)})),a&&l.addEventListener("resize",n.update,Tl),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,Tl)})),a&&l.removeEventListener("resize",n.update,Tl)}},data:{}};function kl(t){return t.split("-")[0]}function Rl(t){return t.split("-")[1]}function Il(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Bl(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?kl(i):null,s=i?Rl(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case cl:e={x:a,y:n.y-r.height};break;case ul:e={x:a,y:n.y+n.height};break;case dl:e={x:n.x+n.width,y:l};break;case hl:e={x:n.x-r.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?Il(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case gl:e[c]=e[c]-(n[u]/2-r[u]/2);break;case ml:e[c]=e[c]+(n[u]/2-r[u]/2)}}return e}var Ll={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Dl(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=s.x,f=void 0===h?0:h,p=s.y,g=void 0===p?0:p,m="function"===typeof u?u({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var v=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),y=hl,x=cl,A=window;if(c){var _=ll(n),w="clientHeight",S="clientWidth";if(_===ja(n)&&"static"!==$a(_=Qa(n)).position&&"absolute"===a&&(w="scrollHeight",S="scrollWidth"),i===cl||(i===hl||i===dl)&&o===ml)x=ul,g-=(d&&_===A&&A.visualViewport?A.visualViewport.height:_[w])-r.height,g*=l?1:-1;if(i===hl||(i===cl||i===ul)&&o===ml)y=dl,f-=(d&&_===A&&A.visualViewport?A.visualViewport.width:_[S])-r.width,f*=l?1:-1}var C,E=Object.assign({position:a},c&&Ll),P=!0===u?function(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ha(n*i)/i||0,y:Ha(r*i)/i||0}}({x:f,y:g},ja(n)):{x:f,y:g};return f=P.x,g=P.y,l?Object.assign({},E,((C={})[x]=b?"0":"",C[y]=v?"0":"",C.transform=(A.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",C)):Object.assign({},E,((e={})[x]=b?g+"px":"",e[y]=v?f+"px":"",e.transform="",e))}const Fl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:kl(e.placement),variation:Rl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Dl(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Dl(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};const Nl={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];Ua(i)&&Ya(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});Ua(r)&&Ya(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};const jl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,s=_l.reduce((function(t,n){return t[n]=function(t,e,n){var r=kl(t),i=[hl,cl].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[hl,dl].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,e.rects,o),t}),{}),a=s[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}};var zl={left:"right",right:"left",bottom:"top",top:"bottom"};function Ul(t){return t.replace(/left|right|bottom|top/g,(function(t){return zl[t]}))}var Vl={start:"end",end:"start"};function Gl(t){return t.replace(/start|end/g,(function(t){return Vl[t]}))}function Wl(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Va(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Hl(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Jl(t,e,n){return e===bl?Hl(function(t,e){var n=ja(t),r=Qa(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=Ka();(c||!c&&"fixed"===e)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+Za(t),y:l}}(t,n)):za(e)?function(t,e){var n=Xa(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Hl(function(t){var e,n=Qa(t),r=qa(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=Ga(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Ga(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Za(t),l=-r.scrollTop;return"rtl"===$a(i||n).direction&&(a+=Ga(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(Qa(t)))}function Kl(t,e,n,r){var i="clippingParents"===e?function(t){var e=ol(rl(t)),n=["absolute","fixed"].indexOf($a(t).position)>=0&&Ua(t)?ll(t):t;return za(n)?e.filter((function(t){return za(t)&&Wl(t,n)&&"body"!==Ya(t)})):[]}(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(e,n){var i=Jl(t,n,r);return e.top=Ga(i.top,e.top),e.right=Wa(i.right,e.right),e.bottom=Wa(i.bottom,e.bottom),e.left=Ga(i.left,e.left),e}),Jl(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Xl(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function ql(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function Yl(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.strategy,s=void 0===o?t.strategy:o,a=n.boundary,l=void 0===a?vl:a,c=n.rootBoundary,u=void 0===c?bl:c,d=n.elementContext,h=void 0===d?yl:d,f=n.altBoundary,p=void 0!==f&&f,g=n.padding,m=void 0===g?0:g,v=Xl("number"!==typeof m?m:ql(m,pl)),b=h===yl?xl:yl,y=t.rects.popper,x=t.elements[p?b:h],A=Kl(za(x)?x:x.contextElement||Qa(t.elements.popper),l,u,s),_=Xa(t.elements.reference),w=Bl({reference:_,element:y,strategy:"absolute",placement:i}),S=Hl(Object.assign({},y,w)),C=h===yl?S:_,E={top:A.top-C.top+v.top,bottom:C.bottom-A.bottom+v.bottom,left:A.left-C.left+v.left,right:C.right-A.right+v.right},P=t.modifiersData.offset;if(h===yl&&P){var M=P[i];Object.keys(E).forEach((function(t){var e=[dl,ul].indexOf(t)>=0?1:-1,n=[cl,ul].indexOf(t)>=0?"y":"x";E[t]+=M[n]*e}))}return E}const Ql={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,g=n.allowedAutoPlacements,m=e.options.placement,v=kl(m),b=l||(v===m||!p?[Ul(m)]:function(t){if(kl(t)===fl)return[];var e=Ul(t);return[Gl(t),e,Gl(e)]}(m)),y=[m].concat(b).reduce((function(t,n){return t.concat(kl(n)===fl?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?_l:l,u=Rl(r),d=u?a?Al:Al.filter((function(t){return Rl(t)===u})):pl,h=d.filter((function(t){return c.indexOf(t)>=0}));0===h.length&&(h=d);var f=h.reduce((function(e,n){return e[n]=Yl(t,{placement:n,boundary:i,rootBoundary:o,padding:s})[kl(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):n)}),[]),x=e.rects.reference,A=e.rects.popper,_=new Map,w=!0,S=y[0],C=0;C<y.length;C++){var E=y[C],P=kl(E),M=Rl(E)===gl,T=[cl,ul].indexOf(P)>=0,O=T?"width":"height",k=Yl(e,{placement:E,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),R=T?M?dl:hl:M?ul:cl;x[O]>A[O]&&(R=Ul(R));var I=Ul(R),B=[];if(o&&B.push(k[P]<=0),a&&B.push(k[R]<=0,k[I]<=0),B.every((function(t){return t}))){S=E,w=!1;break}_.set(E,B)}if(w)for(var L=function(t){var e=y.find((function(e){var n=_.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return S=e,"break"},D=p?3:1;D>0;D--){if("break"===L(D))break}e.placement!==S&&(e.modifiersData[r]._skip=!0,e.placement=S,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Zl(t,e,n){return Ga(t,Wa(e,n))}const $l={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=void 0===h||h,p=n.tetherOffset,g=void 0===p?0:p,m=Yl(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=kl(e.placement),b=Rl(e.placement),y=!b,x=Il(v),A="x"===x?"y":"x",_=e.modifiersData.popperOffsets,w=e.rects.reference,S=e.rects.popper,C="function"===typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,E="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(_){if(o){var T,O="y"===x?cl:hl,k="y"===x?ul:dl,R="y"===x?"height":"width",I=_[x],B=I+m[O],L=I-m[k],D=f?-S[R]/2:0,F=b===gl?w[R]:S[R],N=b===gl?-S[R]:-w[R],j=e.elements.arrow,z=f&&j?nl(j):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=U[O],G=U[k],W=Zl(0,w[R],z[R]),H=y?w[R]/2-D-W-V-E.mainAxis:F-W-V-E.mainAxis,J=y?-w[R]/2+D+W+G+E.mainAxis:N+W+G+E.mainAxis,K=e.elements.arrow&&ll(e.elements.arrow),X=K?"y"===x?K.clientTop||0:K.clientLeft||0:0,q=null!=(T=null==P?void 0:P[x])?T:0,Y=I+J-q,Q=Zl(f?Wa(B,I+H-q-X):B,I,f?Ga(L,Y):L);_[x]=Q,M[x]=Q-I}if(a){var Z,$="x"===x?cl:hl,tt="x"===x?ul:dl,et=_[A],nt="y"===A?"height":"width",rt=et+m[$],it=et-m[tt],ot=-1!==[cl,hl].indexOf(v),st=null!=(Z=null==P?void 0:P[A])?Z:0,at=ot?rt:et-w[nt]-S[nt]-st+E.altAxis,lt=ot?et+w[nt]+S[nt]-st-E.altAxis:it,ct=f&&ot?function(t,e,n){var r=Zl(t,e,n);return r>n?n:r}(at,et,lt):Zl(f?at:rt,et,f?lt:it);_[A]=ct,M[A]=ct-et}e.modifiersData[r]=M}},requiresIfExists:["offset"]};const tc={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=kl(n.placement),l=Il(a),c=[hl,dl].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(t,e){return Xl("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:ql(t,pl))}(i.padding,n),d=nl(o),h="y"===l?cl:hl,f="y"===l?ul:dl,p=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],g=s[l]-n.rects.reference[l],m=ll(o),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,b=p/2-g/2,y=u[h],x=v-d[c]-u[f],A=v/2-d[c]/2+b,_=Zl(y,A,x),w=l;n.modifiersData[r]=((e={})[w]=_,e.centerOffset=_-A,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r)))&&Wl(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ec(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function nc(t){return[cl,dl,ul,hl].some((function(e){return t[e]>=0}))}var rc=Ml({defaultModifiers:[Ol,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Bl({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Fl,Nl,jl,Ql,$l,tc,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Yl(e,{elementContext:"reference"}),a=Yl(e,{altBoundary:!0}),l=ec(s,r),c=ec(a,i,o),u=nc(l),d=nc(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),ic=n(9184);const oc=h.forwardRef((function(t,e){const{children:n,container:r,disablePortal:i=!1}=t,[o,s]=h.useState(null),a=(0,fo.A)(h.isValidElement(n)?n.ref:null,e);if((0,wo.A)((()=>{i||s(function(t){return"function"===typeof t?t():t}(r)||document.body)}),[r,i]),(0,wo.A)((()=>{if(o&&!i)return(0,ic.A)(e,o),()=>{(0,ic.A)(e,null)}}),[e,o,i]),i){if(h.isValidElement(n)){const t={ref:a};return h.cloneElement(n,t)}return(0,v.jsx)(h.Fragment,{children:n})}return(0,v.jsx)(h.Fragment,{children:o?G.createPortal(n,o):o})}));const sc="base";function ac(t,e){const n=Fn.li[e];return n?(r=n,"".concat(sc,"--").concat(r)):function(t,e){return"".concat(sc,"-").concat(t,"-").concat(e)}(t,e);var r}const lc="Popper";function cc(t){return ac(lc,t)}!function(t,e){const n={};e.forEach((e=>{n[e]=ac(t,e)}))}(lc,["root"]);const uc={disableDefaultClasses:!1},dc=h.createContext(uc);const hc=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],fc=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function pc(t){return"function"===typeof t?t():t}function gc(t){return void 0!==t.nodeType}const mc=()=>(0,Bn.A)({root:["root"]},function(t){const{disableDefaultClasses:e}=h.useContext(dc);return n=>e?"":t(n)}(cc)),vc={},bc=h.forwardRef((function(t,e){var n;const{anchorEl:r,children:i,direction:o,disablePortal:s,modifiers:a,open:l,placement:c,popperOptions:u,popperRef:d,slotProps:p={},slots:g={},TransitionProps:m}=t,b=(0,C.A)(t,hc),y=h.useRef(null),x=(0,fo.A)(y,e),A=h.useRef(null),_=(0,fo.A)(A,d),w=h.useRef(_);(0,wo.A)((()=>{w.current=_}),[_]),h.useImperativeHandle(d,(()=>A.current),[]);const S=function(t,e){if("ltr"===e)return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}(c,o),[E,P]=h.useState(S),[M,T]=h.useState(pc(r));h.useEffect((()=>{A.current&&A.current.forceUpdate()})),h.useEffect((()=>{r&&T(pc(r))}),[r]),(0,wo.A)((()=>{if(!M||!l)return;let t=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:t=>{let{state:e}=t;P(e.placement)}}];null!=a&&(t=t.concat(a)),u&&null!=u.modifiers&&(t=t.concat(u.modifiers));const e=rc(M,y.current,(0,f.A)({placement:S},u,{modifiers:t}));return w.current(e),()=>{e.destroy(),w.current(null)}}),[M,s,a,l,u,S]);const O={placement:E};null!==m&&(O.TransitionProps=m);const k=mc(),R=null!=(n=g.root)?n:"div",I=bo({elementType:R,externalSlotProps:p.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:x},ownerState:t,className:k.root});return(0,v.jsx)(R,(0,f.A)({},I,{children:"function"===typeof i?i(O):i}))})),yc=h.forwardRef((function(t,e){const{anchorEl:n,children:r,container:i,direction:o="ltr",disablePortal:s=!1,keepMounted:a=!1,modifiers:l,open:c,placement:u="bottom",popperOptions:d=vc,popperRef:p,style:g,transition:m=!1,slotProps:b={},slots:y={}}=t,x=(0,C.A)(t,fc),[A,_]=h.useState(!0);if(!a&&!c&&(!m||A))return null;let w;if(i)w=i;else if(n){const t=pc(n);w=t&&gc(t)?(0,yo.A)(t).body:(0,yo.A)(null).body}const S=c||!a||m&&!A?void 0:"none",E=m?{in:c,onEnter:()=>{_(!1)},onExited:()=>{_(!0)}}:void 0;return(0,v.jsx)(oc,{disablePortal:s,container:w,children:(0,v.jsx)(bc,(0,f.A)({anchorEl:n,direction:o,disablePortal:s,modifiers:l,ref:e,open:m?!A:c,placement:u,popperOptions:d,popperRef:p,slotProps:b,slots:y},x,{style:(0,f.A)({position:"fixed",top:0,left:0,display:S},g),TransitionProps:E,children:r}))})}));var xc=n(2374);const Ac=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],_c=(0,Ln.Ay)(yc,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),wc=h.forwardRef((function(t,e){var n;const r=(0,xc.A)(),i=(0,p.A)({props:t,name:"MuiPopper"}),{anchorEl:o,component:s,components:a,componentsProps:l,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:g,placement:m,popperOptions:b,popperRef:y,transition:x,slots:A,slotProps:_}=i,w=(0,C.A)(i,Ac),S=null!=(n=null==A?void 0:A.root)?n:null==a?void 0:a.Root,E=(0,f.A)({anchorEl:o,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:g,placement:m,popperOptions:b,popperRef:y,transition:x},w);return(0,v.jsx)(_c,(0,f.A)({as:s,direction:null==r?void 0:r.direction,slots:{root:S},slotProps:null!=_?_:l},E,{ref:e}))})),Sc=wc;var Cc=n(5879);function Ec(t){return(0,Fn.Ay)("MuiTooltip",t)}const Pc=(0,Tn.A)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Mc=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const Tc=(0,Ln.Ay)(Sc,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})((t=>{let{theme:e,ownerState:n,open:r}=t;return(0,f.A)({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{['&[data-popper-placement*="bottom"] .'.concat(Pc.arrow)]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},['&[data-popper-placement*="top"] .'.concat(Pc.arrow)]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},['&[data-popper-placement*="right"] .'.concat(Pc.arrow)]:(0,f.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),['&[data-popper-placement*="left"] .'.concat(Pc.arrow)]:(0,f.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),Oc=(0,Ln.Ay)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e["tooltipPlacement".concat((0,Dn.A)(n.placement.split("-")[0]))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:(0,Kn.X4)(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat((r=16/14,Math.round(1e5*r)/1e5),"em"),fontWeight:e.typography.fontWeightRegular},{[".".concat(Pc.popper,'[data-popper-placement*="left"] &')]:(0,f.A)({transformOrigin:"right center"},n.isRtl?(0,f.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,f.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[".".concat(Pc.popper,'[data-popper-placement*="right"] &')]:(0,f.A)({transformOrigin:"left center"},n.isRtl?(0,f.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,f.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[".".concat(Pc.popper,'[data-popper-placement*="top"] &')]:(0,f.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[".".concat(Pc.popper,'[data-popper-placement*="bottom"] &')]:(0,f.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var r})),kc=(0,Ln.Ay)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})((t=>{let{theme:e}=t;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:(0,Kn.X4)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let Rc=!1;const Ic=new Kr.E;let Bc={x:0,y:0};function Lc(t,e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e&&e(n,...i),t(n,...i)}}const Dc=h.forwardRef((function(t,e){var n,r,i,o,s,a,l,c,u,d,g,m,b,y,x,A,_,w,S;const E=(0,p.A)({props:t,name:"MuiTooltip"}),{arrow:P=!1,children:M,components:T={},componentsProps:O={},describeChild:k=!1,disableFocusListener:R=!1,disableHoverListener:I=!1,disableInteractive:L=!1,disableTouchListener:D=!1,enterDelay:F=100,enterNextDelay:N=0,enterTouchDelay:j=700,followCursor:z=!1,id:U,leaveDelay:V=0,leaveTouchDelay:G=1500,onClose:W,onOpen:H,open:J,placement:K="bottom",PopperComponent:X,PopperProps:q={},slotProps:Y={},slots:Q={},title:Z,TransitionComponent:$=Na,TransitionProps:tt}=E,et=(0,C.A)(E,Mc),nt=h.isValidElement(M)?M:(0,v.jsx)("span",{children:M}),rt=Ar(),it=B(),[ot,st]=h.useState(),[at,lt]=h.useState(null),ct=h.useRef(!1),ut=L||z,dt=(0,Kr.A)(),ht=(0,Kr.A)(),ft=(0,Kr.A)(),pt=(0,Kr.A)(),[gt,mt]=(0,Xs.A)({controlled:J,default:!1,name:"Tooltip",state:"open"});let vt=gt;const bt=(0,Cc.A)(U),yt=h.useRef(),xt=(0,Dr.A)((()=>{void 0!==yt.current&&(document.body.style.WebkitUserSelect=yt.current,yt.current=void 0),pt.clear()}));h.useEffect((()=>xt),[xt]);const At=t=>{Ic.clear(),Rc=!0,mt(!0),H&&!vt&&H(t)},_t=(0,Dr.A)((t=>{Ic.start(800+V,(()=>{Rc=!1})),mt(!1),W&&vt&&W(t),dt.start(rt.transitions.duration.shortest,(()=>{ct.current=!1}))})),wt=t=>{ct.current&&"touchstart"!==t.type||(ot&&ot.removeAttribute("title"),ht.clear(),ft.clear(),F||Rc&&N?ht.start(Rc?N:F,(()=>{At(t)})):At(t))},St=t=>{ht.clear(),ft.start(V,(()=>{_t(t)}))},{isFocusVisibleRef:Ct,onBlur:Et,onFocus:Pt,ref:Mt}=(0,Fr.A)(),[,Tt]=h.useState(!1),Ot=t=>{Et(t),!1===Ct.current&&(Tt(!1),St(t))},kt=t=>{ot||st(t.currentTarget),Pt(t),!0===Ct.current&&(Tt(!0),wt(t))},Rt=t=>{ct.current=!0;const e=nt.props;e.onTouchStart&&e.onTouchStart(t)},It=t=>{Rt(t),ft.clear(),dt.clear(),xt(),yt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",pt.start(j,(()=>{document.body.style.WebkitUserSelect=yt.current,wt(t)}))},Bt=t=>{nt.props.onTouchEnd&&nt.props.onTouchEnd(t),xt(),ft.start(G,(()=>{_t(t)}))};h.useEffect((()=>{if(vt)return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)};function t(t){"Escape"!==t.key&&"Esc"!==t.key||_t(t)}}),[_t,vt]);const Lt=(0,Lr.A)(nt.ref,Mt,st,e);Z||0===Z||(vt=!1);const Dt=h.useRef(),Ft={},Nt="string"===typeof Z;k?(Ft.title=vt||!Nt||I?null:Z,Ft["aria-describedby"]=vt?bt:null):(Ft["aria-label"]=Nt?Z:null,Ft["aria-labelledby"]=vt&&!Nt?bt:null);const jt=(0,f.A)({},Ft,et,nt.props,{className:(0,wn.A)(et.className,nt.props.className),onTouchStart:Rt,ref:Lt},z?{onMouseMove:t=>{const e=nt.props;e.onMouseMove&&e.onMouseMove(t),Bc={x:t.clientX,y:t.clientY},Dt.current&&Dt.current.update()}}:{});const zt={};D||(jt.onTouchStart=It,jt.onTouchEnd=Bt),I||(jt.onMouseOver=Lc(wt,jt.onMouseOver),jt.onMouseLeave=Lc(St,jt.onMouseLeave),ut||(zt.onMouseOver=wt,zt.onMouseLeave=St)),R||(jt.onFocus=Lc(kt,jt.onFocus),jt.onBlur=Lc(Ot,jt.onBlur),ut||(zt.onFocus=kt,zt.onBlur=Ot));const Ut=h.useMemo((()=>{var t;let e=[{name:"arrow",enabled:Boolean(at),options:{element:at,padding:4}}];return null!=(t=q.popperOptions)&&t.modifiers&&(e=e.concat(q.popperOptions.modifiers)),(0,f.A)({},q.popperOptions,{modifiers:e})}),[at,q]),Vt=(0,f.A)({},E,{isRtl:it,arrow:P,disableInteractive:ut,placement:K,PopperComponentProp:X,touch:ct.current}),Gt=(t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:o}=t,s={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch","tooltipPlacement".concat((0,Dn.A)(o.split("-")[0]))],arrow:["arrow"]};return(0,Bn.A)(s,Ec,e)})(Vt),Wt=null!=(n=null!=(r=Q.popper)?r:T.Popper)?n:Tc,Ht=null!=(i=null!=(o=null!=(s=Q.transition)?s:T.Transition)?o:$)?i:Na,Jt=null!=(a=null!=(l=Q.tooltip)?l:T.Tooltip)?a:Oc,Kt=null!=(c=null!=(u=Q.arrow)?u:T.Arrow)?c:kc,Xt=po(Wt,(0,f.A)({},q,null!=(d=Y.popper)?d:O.popper,{className:(0,wn.A)(Gt.popper,null==q?void 0:q.className,null==(g=null!=(m=Y.popper)?m:O.popper)?void 0:g.className)}),Vt),qt=po(Ht,(0,f.A)({},tt,null!=(b=Y.transition)?b:O.transition),Vt),Yt=po(Jt,(0,f.A)({},null!=(y=Y.tooltip)?y:O.tooltip,{className:(0,wn.A)(Gt.tooltip,null==(x=null!=(A=Y.tooltip)?A:O.tooltip)?void 0:x.className)}),Vt),Qt=po(Kt,(0,f.A)({},null!=(_=Y.arrow)?_:O.arrow,{className:(0,wn.A)(Gt.arrow,null==(w=null!=(S=Y.arrow)?S:O.arrow)?void 0:w.className)}),Vt);return(0,v.jsxs)(h.Fragment,{children:[h.cloneElement(nt,jt),(0,v.jsx)(Wt,(0,f.A)({as:null!=X?X:Sc,placement:K,anchorEl:z?{getBoundingClientRect:()=>({top:Bc.y,left:Bc.x,right:Bc.x,bottom:Bc.y,width:0,height:0})}:ot,popperRef:Dt,open:!!ot&&vt,id:bt,transition:!0},zt,Xt,{popperOptions:Ut,children:t=>{let{TransitionProps:e}=t;return(0,v.jsx)(Ht,(0,f.A)({timeout:rt.transitions.duration.shorter},e,qt,{children:(0,v.jsxs)(Jt,(0,f.A)({},Yt,{children:[Z,P?(0,v.jsx)(Kt,(0,f.A)({},Qt,{ref:lt})):null]}))}))}}))]})})),Fc=Dc;function Nc(t){return(0,Fn.Ay)("MuiIconButton",t)}const jc=(0,Tn.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),zc=["edge","children","className","color","disabled","disableFocusRipple","size"],Uc=(0,Ln.Ay)(mi,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"default"!==n.color&&e["color".concat((0,Dn.A)(n.color))],n.edge&&e["edge".concat((0,Dn.A)(n.edge))],e["size".concat((0,Dn.A)(n.size))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(t=>{let{theme:e,ownerState:n}=t;var r;const i=null==(r=(e.vars||e).palette)?void 0:r[n.color];return(0,f.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,f.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,f.A)({},i&&{backgroundColor:e.vars?"rgba(".concat(i.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)(i.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{["&.".concat(jc.disabled)]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})})),Vc=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:s="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,C.A)(n,zc),d=(0,f.A)({},n,{edge:r,color:s,disabled:a,disableFocusRipple:l,size:c}),h=(t=>{const{classes:e,disabled:n,color:r,edge:i,size:o}=t,s={root:["root",n&&"disabled","default"!==r&&"color".concat((0,Dn.A)(r)),i&&"edge".concat((0,Dn.A)(i)),"size".concat((0,Dn.A)(o))]};return(0,Bn.A)(s,Nc,e)})(d);return(0,v.jsx)(Uc,(0,f.A)({className:(0,wn.A)(h.root,o),centerRipple:!0,focusRipple:!l,disabled:a,ref:e},u,{ownerState:d,children:i}))})),Gc=Vc,Wc=t=>{const e=h.useRef({});return h.useEffect((()=>{e.current=t})),e.current};function Hc(t){return(0,Fn.Ay)("MuiBadge",t)}const Jc=(0,Tn.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Kc=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Xc=jo(),qc=(0,Ln.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,e)=>e.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Yc=(0,Ln.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e["anchorOrigin".concat((0,Dn.A)(n.anchorOrigin.vertical)).concat((0,Dn.A)(n.anchorOrigin.horizontal)).concat((0,Dn.A)(n.overlap))],"default"!==n.color&&e["color".concat((0,Dn.A)(n.color))],n.invisible&&e.invisible]}})((t=>{let{theme:e}=t;var n;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(n=e.vars)?n:e).palette).filter((t=>{var n,r;return(null!=(n=e.vars)?n:e).palette[t].main&&(null!=(r=e.vars)?r:e).palette[t].contrastText})).map((t=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:t=>{let{ownerState:e}=t;return"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(Jc.invisible)]:{transform:"scale(0) translate(50%, -50%)"}}},{props:t=>{let{ownerState:e}=t;return"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(Jc.invisible)]:{transform:"scale(0) translate(50%, 50%)"}}},{props:t=>{let{ownerState:e}=t;return"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(Jc.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:t=>{let{ownerState:e}=t;return"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(Jc.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:t=>{let{ownerState:e}=t;return"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(Jc.invisible)]:{transform:"scale(0) translate(50%, -50%)"}}},{props:t=>{let{ownerState:e}=t;return"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(Jc.invisible)]:{transform:"scale(0) translate(50%, 50%)"}}},{props:t=>{let{ownerState:e}=t;return"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(Jc.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:t=>{let{ownerState:e}=t;return"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(Jc.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}})),Qc=h.forwardRef((function(t,e){var n,r,i,o,s,a;const l=Xc({props:t,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:h={},componentsProps:p={},children:g,overlap:m="rectangular",color:b="default",invisible:y=!1,max:x=99,badgeContent:A,slots:_,slotProps:w,showZero:S=!1,variant:E="standard"}=l,P=(0,C.A)(l,Kc),{badgeContent:M,invisible:T,max:O,displayValue:k}=function(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,o=Wc({badgeContent:e,max:r});let s=n;!1!==n||0!==e||i||(s=!0);const{badgeContent:a,max:l=r}=s?o:t;return{badgeContent:a,invisible:s,max:l,displayValue:a&&Number(a)>l?"".concat(l,"+"):a}}({max:x,invisible:y,badgeContent:A,showZero:S}),R=Wc({anchorOrigin:c,color:b,overlap:m,variant:E,badgeContent:A}),I=T||null==M&&"dot"!==E,{color:B=b,overlap:L=m,anchorOrigin:D=c,variant:F=E}=I?R:l,N="dot"!==F?k:void 0,j=(0,f.A)({},l,{badgeContent:M,invisible:I,max:O,displayValue:N,showZero:S,anchorOrigin:D,color:B,overlap:L,variant:F}),z=(t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:s={}}=t,a={root:["root"],badge:["badge",o,r&&"invisible","anchorOrigin".concat((0,Dn.A)(n.vertical)).concat((0,Dn.A)(n.horizontal)),"anchorOrigin".concat((0,Dn.A)(n.vertical)).concat((0,Dn.A)(n.horizontal)).concat((0,Dn.A)(i)),"overlap".concat((0,Dn.A)(i)),"default"!==e&&"color".concat((0,Dn.A)(e))]};return(0,Bn.A)(a,Hc,s)})(j),U=null!=(n=null!=(r=null==_?void 0:_.root)?r:h.Root)?n:qc,V=null!=(i=null!=(o=null==_?void 0:_.badge)?o:h.Badge)?i:Yc,G=null!=(s=null==w?void 0:w.root)?s:p.root,W=null!=(a=null==w?void 0:w.badge)?a:p.badge,H=bo({elementType:U,externalSlotProps:G,externalForwardedProps:P,additionalProps:{ref:e,as:d},ownerState:j,className:(0,wn.A)(null==G?void 0:G.className,z.root,u)}),J=bo({elementType:V,externalSlotProps:W,ownerState:j,className:(0,wn.A)(z.badge,null==W?void 0:W.className)});return(0,v.jsxs)(U,(0,f.A)({},H,{children:[g,(0,v.jsx)(V,(0,f.A)({},J,{children:N}))]}))})),Zc=Qc;var $c=n(992),tu=n(4708),eu=n(6288);function nu(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function ru(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function iu(t){return parseInt((0,eu.A)(t).getComputedStyle(t).paddingRight,10)||0}function ou(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,(t=>{const e=-1===o.indexOf(t),n=!function(t){const e=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName),n="INPUT"===t.tagName&&"hidden"===t.getAttribute("type");return e||n}(t);e&&n&&ru(t,i)}))}function su(t,e){let n=-1;return t.some(((t,r)=>!!e(t)&&(n=r,!0))),n}function au(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(function(t){const e=(0,yo.A)(t);return e.body===t?(0,eu.A)(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(r)){const t=nu((0,yo.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(iu(r)+t,"px");const e=(0,yo.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(e,(e=>{n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(iu(e)+t,"px")}))}let t;if(r.parentNode instanceof DocumentFragment)t=(0,yo.A)(r).body;else{const e=r.parentElement,n=(0,eu.A)(r);t="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===n.getComputedStyle(e).overflowY?e:r}n.push({value:t.style.overflow,property:"overflow",el:t},{value:t.style.overflowX,property:"overflow-x",el:t},{value:t.style.overflowY,property:"overflow-y",el:t}),t.style.overflow="hidden"}return()=>{n.forEach((t=>{let{value:e,el:n,property:r}=t;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}const lu=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,e){let n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&ru(t.modalRef,!1);const r=function(t){const e=[];return[].forEach.call(t.children,(t=>{"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);ou(e,t.mount,t.modalRef,r,!0);const i=su(this.containers,(t=>t.container===e));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:r}),n)}mount(t,e){const n=su(this.containers,(e=>-1!==e.modals.indexOf(t))),r=this.containers[n];r.restore||(r.restore=au(r,e))}remove(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(t);if(-1===n)return n;const r=su(this.containers,(e=>-1!==e.modals.indexOf(t))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(t),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),t.modalRef&&ru(t.modalRef,e),ou(i.container,t.mount,t.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const t=i.modals[i.modals.length-1];t.modalRef&&ru(t.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}};function cu(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=lu,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=t,p=h.useRef({}),g=h.useRef(null),m=h.useRef(null),v=(0,fo.A)(m,d),[b,y]=h.useState(!u),x=function(t){return!!t&&t.props.hasOwnProperty("in")}(l);let A=!0;"false"!==t["aria-hidden"]&&!1!==t["aria-hidden"]||(A=!1);const _=()=>(p.current.modalRef=m.current,p.current.mount=g.current,p.current),w=()=>{i.mount(_(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},S=(0,So.A)((()=>{const t=function(t){return"function"===typeof t?t():t}(e)||(0,yo.A)(g.current).body;i.add(_(),t),m.current&&w()})),C=h.useCallback((()=>i.isTopModal(_())),[i]),E=(0,So.A)((t=>{g.current=t,t&&(u&&C()?w():m.current&&ru(m.current,A))})),P=h.useCallback((()=>{i.remove(_(),A)}),[A,i]);h.useEffect((()=>()=>{P()}),[P]),h.useEffect((()=>{u?S():x&&o||P()}),[u,P,x,o,S]);const M=t=>e=>{var r;null==(r=t.onKeyDown)||r.call(t,e),"Escape"===e.key&&229!==e.which&&C()&&(n||(e.stopPropagation(),c&&c(e,"escapeKeyDown")))},T=t=>e=>{var n;null==(n=t.onClick)||n.call(t,e),e.target===e.currentTarget&&c&&c(e,"backdropClick")};return{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=go(t);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,f.A)({},n,e);return(0,f.A)({role:"presentation"},r,{onKeyDown:M(r),ref:v})},getBackdropProps:function(){const t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.A)({"aria-hidden":!0},t,{onClick:T(t),open:u})},getTransitionProps:()=>({onEnter:(0,tu.A)((()=>{y(!1),s&&s()}),null==l?void 0:l.props.onEnter),onExited:(0,tu.A)((()=>{y(!0),a&&a(),o&&P()}),null==l?void 0:l.props.onExited)}),rootRef:v,portalRef:E,isTopModal:C,exited:b,hasTransition:x}}const uu=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function du(t){const e=[],n=[];return Array.from(t.querySelectorAll(uu)).forEach(((t,r)=>{const i=function(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==i&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;const e=e=>t.ownerDocument.querySelector('input[type="radio"]'.concat(e));let n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===i?e.push(t):n.push({documentOrder:r,tabIndex:i,node:t}))})),n.sort(((t,e)=>t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex)).map((t=>t.node)).concat(e)}function hu(){return!0}function fu(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=du,isEnabled:s=hu,open:a}=t,l=h.useRef(!1),c=h.useRef(null),u=h.useRef(null),d=h.useRef(null),f=h.useRef(null),p=h.useRef(!1),g=h.useRef(null),m=(0,fo.A)(e.ref,g),b=h.useRef(null);h.useEffect((()=>{a&&g.current&&(p.current=!n)}),[n,a]),h.useEffect((()=>{if(!a||!g.current)return;const t=(0,yo.A)(g.current);return g.current.contains(t.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),p.current&&g.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}}),[a]),h.useEffect((()=>{if(!a||!g.current)return;const t=(0,yo.A)(g.current),e=e=>{b.current=e,!r&&s()&&"Tab"===e.key&&t.activeElement===g.current&&e.shiftKey&&(l.current=!0,u.current&&u.current.focus())},n=()=>{const e=g.current;if(null===e)return;if(!t.hasFocus()||!s()||l.current)return void(l.current=!1);if(e.contains(t.activeElement))return;if(r&&t.activeElement!==c.current&&t.activeElement!==u.current)return;if(t.activeElement!==f.current)f.current=null;else if(null!==f.current)return;if(!p.current)return;let n=[];if(t.activeElement!==c.current&&t.activeElement!==u.current||(n=o(g.current)),n.length>0){var i,a;const t=Boolean((null==(i=b.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=b.current)?void 0:a.key)),e=n[0],r=n[n.length-1];"string"!==typeof e&&"string"!==typeof r&&(t?r.focus():e.focus())}else e.focus()};t.addEventListener("focusin",n),t.addEventListener("keydown",e,!0);const i=setInterval((()=>{t.activeElement&&"BODY"===t.activeElement.tagName&&n()}),50);return()=>{clearInterval(i),t.removeEventListener("focusin",n),t.removeEventListener("keydown",e,!0)}}),[n,r,i,s,a,o]);const y=t=>{null===d.current&&(d.current=t.relatedTarget),p.current=!0};return(0,v.jsxs)(h.Fragment,{children:[(0,v.jsx)("div",{tabIndex:a?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),h.cloneElement(e,{ref:m,onFocus:t=>{null===d.current&&(d.current=t.relatedTarget),p.current=!0,f.current=t.target;const n=e.props.onFocus;n&&n(t)}}),(0,v.jsx)("div",{tabIndex:a?0:-1,onFocus:y,ref:u,"data-testid":"sentinelEnd"})]})}const pu=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],gu={entering:{opacity:1},entered:{opacity:1}},mu=h.forwardRef((function(t,e){const n=Ar(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,easing:a,in:l,onEnter:c,onEntered:u,onEntering:d,onExit:p,onExited:g,onExiting:m,style:b,timeout:y=r,TransitionComponent:x=Oa}=t,A=(0,C.A)(t,pu),_=h.useRef(null),w=(0,Lr.A)(_,s.ref,e),S=t=>e=>{if(t){const n=_.current;void 0===e?t(n):t(n,e)}},E=S(d),P=S(((t,e)=>{ka(t);const r=Ra({style:b,timeout:y,easing:a},{mode:"enter"});t.style.webkitTransition=n.transitions.create("opacity",r),t.style.transition=n.transitions.create("opacity",r),c&&c(t,e)})),M=S(u),T=S(m),O=S((t=>{const e=Ra({style:b,timeout:y,easing:a},{mode:"exit"});t.style.webkitTransition=n.transitions.create("opacity",e),t.style.transition=n.transitions.create("opacity",e),p&&p(t)})),k=S(g);return(0,v.jsx)(x,(0,f.A)({appear:o,in:l,nodeRef:_,onEnter:P,onEntered:M,onEntering:E,onExit:O,onExited:k,onExiting:T,addEndListener:t=>{i&&i(_.current,t)},timeout:y},A,{children:(t,e)=>h.cloneElement(s,(0,f.A)({style:(0,f.A)({opacity:0,visibility:"exited"!==t||l?void 0:"hidden"},gu[t],b,s.props.style),ref:w},e))}))})),vu=mu;function bu(t){return(0,Fn.Ay)("MuiBackdrop",t)}(0,Tn.A)("MuiBackdrop",["root","invisible"]);const yu=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],xu=(0,Ln.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})((t=>{let{ownerState:e}=t;return(0,f.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})})),Au=h.forwardRef((function(t,e){var n,r,i;const o=(0,p.A)({props:t,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:g={},slots:m={},TransitionComponent:b=vu,transitionDuration:y}=o,x=(0,C.A)(o,yu),A=(0,f.A)({},o,{component:l,invisible:d}),_=(t=>{const{classes:e,invisible:n}=t,r={root:["root",n&&"invisible"]};return(0,Bn.A)(r,bu,e)})(A),w=null!=(n=g.root)?n:u.root;return(0,v.jsx)(b,(0,f.A)({in:h,timeout:y},x,{children:(0,v.jsx)(xu,(0,f.A)({"aria-hidden":!0},w,{as:null!=(r=null!=(i=m.root)?i:c.Root)?r:l,className:(0,wn.A)(_.root,a,null==w?void 0:w.className),ownerState:(0,f.A)({},A,null==w?void 0:w.ownerState),classes:_,ref:e,children:s}))}))}));function _u(t){return(0,Fn.Ay)("MuiModal",t)}(0,Tn.A)("MuiModal",["root","hidden","backdrop"]);const wu=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Su=(0,Ln.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Cu=(0,Ln.Ay)(Au,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),Eu=h.forwardRef((function(t,e){var n,r,i,o,s,a;const l=(0,p.A)({name:"MuiModal",props:t}),{BackdropComponent:c=Cu,BackdropProps:u,className:d,closeAfterTransition:g=!1,children:m,container:b,component:y,components:x={},componentsProps:A={},disableAutoFocus:_=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:S=!1,disablePortal:E=!1,disableRestoreFocus:P=!1,disableScrollLock:M=!1,hideBackdrop:T=!1,keepMounted:O=!1,onBackdropClick:k,open:R,slotProps:I,slots:B}=l,L=(0,C.A)(l,wu),D=(0,f.A)({},l,{closeAfterTransition:g,disableAutoFocus:_,disableEnforceFocus:w,disableEscapeKeyDown:S,disablePortal:E,disableRestoreFocus:P,disableScrollLock:M,hideBackdrop:T,keepMounted:O}),{getRootProps:F,getBackdropProps:N,getTransitionProps:j,portalRef:z,isTopModal:U,exited:V,hasTransition:G}=cu((0,f.A)({},D,{rootRef:e})),W=(0,f.A)({},D,{exited:V}),H=(t=>{const{open:e,exited:n,classes:r}=t,i={root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]};return(0,Bn.A)(i,_u,r)})(W),J={};if(void 0===m.props.tabIndex&&(J.tabIndex="-1"),G){const{onEnter:t,onExited:e}=j();J.onEnter=t,J.onExited=e}const K=null!=(n=null!=(r=null==B?void 0:B.root)?r:x.Root)?n:Su,X=null!=(i=null!=(o=null==B?void 0:B.backdrop)?o:x.Backdrop)?i:c,q=null!=(s=null==I?void 0:I.root)?s:A.root,Y=null!=(a=null==I?void 0:I.backdrop)?a:A.backdrop,Q=bo({elementType:K,externalSlotProps:q,externalForwardedProps:L,getSlotProps:F,additionalProps:{ref:e,as:y},ownerState:W,className:(0,wn.A)(d,null==q?void 0:q.className,null==H?void 0:H.root,!W.open&&W.exited&&(null==H?void 0:H.hidden))}),Z=bo({elementType:X,externalSlotProps:Y,additionalProps:u,getSlotProps:t=>N((0,f.A)({},t,{onClick:e=>{k&&k(e),null!=t&&t.onClick&&t.onClick(e)}})),className:(0,wn.A)(null==Y?void 0:Y.className,null==u?void 0:u.className,null==H?void 0:H.backdrop),ownerState:W});return O||R||G&&!V?(0,v.jsx)(oc,{ref:z,container:b,disablePortal:E,children:(0,v.jsxs)(K,(0,f.A)({},Q,{children:[!T&&c?(0,v.jsx)(X,(0,f.A)({},Z)):null,(0,v.jsx)(fu,{disableEnforceFocus:w,disableAutoFocus:_,disableRestoreFocus:P,isEnabled:U,open:R,children:h.cloneElement(m,J)})]}))}):null})),Pu=Eu;function Mu(t){return(0,Fn.Ay)("MuiDialog",t)}const Tu=(0,Tn.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const Ou=h.createContext({}),ku=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Ru=(0,Ln.Ay)(Au,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),Iu=(0,Ln.Ay)(Pu,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),Bu=(0,Ln.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e["scroll".concat((0,Dn.A)(n.scroll))]]}})((t=>{let{ownerState:e}=t;return(0,f.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),Lu=(0,Ln.Ay)(Qi,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e["scrollPaper".concat((0,Dn.A)(n.scroll))],e["paperWidth".concat((0,Dn.A)(String(n.maxWidth)))],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):"max(".concat(e.breakpoints.values.xs).concat(e.breakpoints.unit,", 444px)"),["&.".concat(Tu.paperScrollBody)]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:"".concat(e.breakpoints.values[n.maxWidth]).concat(e.breakpoints.unit),["&.".concat(Tu.paperScrollBody)]:{[e.breakpoints.down(e.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(Tu.paperScrollBody)]:{margin:0,maxWidth:"100%"}})})),Du=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiDialog"}),r=Ar(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":s,BackdropComponent:a,BackdropProps:l,children:c,className:u,disableEscapeKeyDown:d=!1,fullScreen:g=!1,fullWidth:m=!1,maxWidth:b="sm",onBackdropClick:y,onClose:x,open:A,PaperComponent:_=Qi,PaperProps:w={},scroll:S="paper",TransitionComponent:E=vu,transitionDuration:P=i,TransitionProps:M}=n,T=(0,C.A)(n,ku),O=(0,f.A)({},n,{disableEscapeKeyDown:d,fullScreen:g,fullWidth:m,maxWidth:b,scroll:S}),k=(t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=t,s={root:["root"],container:["container","scroll".concat((0,Dn.A)(n))],paper:["paper","paperScroll".concat((0,Dn.A)(n)),"paperWidth".concat((0,Dn.A)(String(r))),i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,Bn.A)(s,Mu,e)})(O),R=h.useRef(),I=(0,$c.A)(s),B=h.useMemo((()=>({titleId:I})),[I]);return(0,v.jsx)(Iu,(0,f.A)({className:(0,wn.A)(k.root,u),closeAfterTransition:!0,components:{Backdrop:Ru},componentsProps:{backdrop:(0,f.A)({transitionDuration:P,as:a},l)},disableEscapeKeyDown:d,onClose:x,open:A,ref:e,onClick:t=>{R.current&&(R.current=null,y&&y(t),x&&x(t,"backdropClick"))},ownerState:O},T,{children:(0,v.jsx)(E,(0,f.A)({appear:!0,in:A,timeout:P,role:"presentation"},M,{children:(0,v.jsx)(Bu,{className:(0,wn.A)(k.container),onMouseDown:t=>{R.current=t.target===t.currentTarget},ownerState:O,children:(0,v.jsx)(Lu,(0,f.A)({as:_,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":I},w,{className:(0,wn.A)(k.paper,w.className),ownerState:O,children:(0,v.jsx)(Ou.Provider,{value:B,children:c})}))})}))}))})),Fu=Du;function Nu(t){return(0,Fn.Ay)("MuiDialogTitle",t)}const ju=(0,Tn.A)("MuiDialogTitle",["root"]),zu=["className","id"],Uu=(0,Ln.Ay)(Wn,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),Vu=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiDialogTitle"}),{className:r,id:i}=n,o=(0,C.A)(n,zu),s=n,a=(t=>{const{classes:e}=t;return(0,Bn.A)({root:["root"]},Nu,e)})(s),{titleId:l=i}=h.useContext(Ou);return(0,v.jsx)(Uu,(0,f.A)({component:"h2",className:(0,wn.A)(a.root,r),ownerState:s,ref:e,variant:"h6",id:null!=i?i:l},o))}));function Gu(t){return(0,Fn.Ay)("MuiDialogContent",t)}(0,Tn.A)("MuiDialogContent",["root","dividers"]);const Wu=["className","dividers"],Hu=(0,Ln.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((e.vars||e).palette.divider),borderBottom:"1px solid ".concat((e.vars||e).palette.divider)}:{[".".concat(ju.root," + &")]:{paddingTop:0}})})),Ju=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=(0,C.A)(n,Wu),s=(0,f.A)({},n,{dividers:i}),a=(t=>{const{classes:e,dividers:n}=t,r={root:["root",n&&"dividers"]};return(0,Bn.A)(r,Gu,e)})(s);return(0,v.jsx)(Hu,(0,f.A)({className:(0,wn.A)(a.root,r),ownerState:s,ref:e},o))}));function Ku(t){return(0,Fn.Ay)("MuiDialogContentText",t)}(0,Tn.A)("MuiDialogContentText",["root"]);const Xu=["children","className"],qu=(0,Ln.Ay)(Wn,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Yu=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiDialogContentText"}),{className:r}=n,i=(0,C.A)(n,Xu),o=(t=>{const{classes:e}=t,n=(0,Bn.A)({root:["root"]},Ku,e);return(0,f.A)({},e,n)})(i);return(0,v.jsx)(qu,(0,f.A)({component:"p",variant:"body1",color:"text.secondary",ref:e,ownerState:i,className:(0,wn.A)(o.root,r)},n,{classes:o}))}));var Qu=n(6632),Zu=n(6440);const $u=["onChange","maxRows","minRows","style","value"];function td(t){return parseInt(t,10)||0}const ed={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const nd=h.forwardRef((function(t,e){const{onChange:n,maxRows:r,minRows:i=1,style:o,value:s}=t,a=(0,C.A)(t,$u),{current:l}=h.useRef(null!=s),c=h.useRef(null),u=(0,fo.A)(e,c),d=h.useRef(null),p=h.useCallback((()=>{const e=c.current,n=(0,eu.A)(e).getComputedStyle(e);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const o=d.current;o.style.width=n.width,o.value=e.value||t.placeholder||"x","\n"===o.value.slice(-1)&&(o.value+=" ");const s=n.boxSizing,a=td(n.paddingBottom)+td(n.paddingTop),l=td(n.borderBottomWidth)+td(n.borderTopWidth),u=o.scrollHeight;o.value="x";const h=o.scrollHeight;let f=u;i&&(f=Math.max(Number(i)*h,f)),r&&(f=Math.min(Number(r)*h,f)),f=Math.max(f,h);return{outerHeightStyle:f+("border-box"===s?a+l:0),overflowing:Math.abs(f-u)<=1}}),[r,i,t.placeholder]),g=h.useCallback((()=>{const t=p();if(void 0===(e=t)||null===e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflowing)return;var e;const n=c.current;n.style.height="".concat(t.outerHeightStyle,"px"),n.style.overflow=t.overflowing?"hidden":""}),[p]);(0,wo.A)((()=>{const t=()=>{g()};let e;const n=(0,Zu.A)(t),r=c.current,i=(0,eu.A)(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(t),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(e),i.removeEventListener("resize",n),o&&o.disconnect()}}),[p,g]),(0,wo.A)((()=>{g()}));return(0,v.jsxs)(h.Fragment,{children:[(0,v.jsx)("textarea",(0,f.A)({value:s,onChange:t=>{l||g(),n&&n(t)},ref:u,rows:i,style:o},a)),(0,v.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,f.A)({},ed,o,{paddingTop:0,paddingBottom:0})})]})}));function rd(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function id(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(rd(t.value)&&""!==t.value||e&&rd(t.defaultValue)&&""!==t.defaultValue)}function od(t){return(0,Fn.Ay)("MuiInputBase",t)}const sd=(0,Tn.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),ad=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],ld=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat((0,Dn.A)(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},cd=(t,e)=>{const{ownerState:n}=t;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},ud=(0,Ln.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ld})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(sd.disabled)]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},n.multiline&&(0,f.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),dd=(0,Ln.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:cd})((t=>{let{theme:e,ownerState:n}=t;const r="light"===e.palette.mode,i=(0,f.A)({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),o={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,f.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(sd.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(sd.disabled)]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),hd=(0,v.jsx)(A,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),fd=h.forwardRef((function(t,e){var n;const r=(0,p.A)({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:s,className:a,components:l={},componentsProps:c={},defaultValue:u,disabled:d,disableInjectingGlobalStyles:g,endAdornment:m,fullWidth:b=!1,id:y,inputComponent:x="input",inputProps:A={},inputRef:_,maxRows:w,minRows:S,multiline:E=!1,name:P,onBlur:M,onChange:T,onClick:O,onFocus:k,onKeyDown:R,onKeyUp:I,placeholder:B,readOnly:L,renderSuffix:D,rows:F,slotProps:N={},slots:j={},startAdornment:z,type:U="text",value:V}=r,G=(0,C.A)(r,ad),W=null!=A.value?A.value:V,{current:H}=h.useRef(null!=W),J=h.useRef(),K=h.useCallback((t=>{0}),[]),X=(0,Lr.A)(J,_,A.ref,K),[q,Y]=h.useState(!1),Q=ms();const Z=Vs({props:r,muiFormControl:Q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Z.focused=Q?Q.focused:q,h.useEffect((()=>{!Q&&d&&q&&(Y(!1),M&&M())}),[Q,d,q,M]);const $=Q&&Q.onFilled,tt=Q&&Q.onEmpty,et=h.useCallback((t=>{id(t)?$&&$():tt&&tt()}),[$,tt]);(0,bi.A)((()=>{H&&et({value:W})}),[W,et,H]);h.useEffect((()=>{et(J.current)}),[]);let nt=x,rt=A;E&&"input"===nt&&(rt=F?(0,f.A)({type:void 0,minRows:F,maxRows:F},rt):(0,f.A)({type:void 0,maxRows:w,minRows:S},rt),nt=nd);h.useEffect((()=>{Q&&Q.setAdornedStart(Boolean(z))}),[Q,z]);const it=(0,f.A)({},r,{color:Z.color||"primary",disabled:Z.disabled,endAdornment:m,error:Z.error,focused:Z.focused,formControl:Q,fullWidth:b,hiddenLabel:Z.hiddenLabel,multiline:E,size:Z.size,startAdornment:z,type:U}),ot=(t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=t,g={root:["root","color".concat((0,Dn.A)(n)),r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",h&&"medium"!==h&&"size".concat((0,Dn.A)(h)),u&&"multiline",f&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return(0,Bn.A)(g,od,e)})(it),st=j.root||l.Root||ud,at=N.root||c.root||{},lt=j.input||l.Input||dd;return rt=(0,f.A)({},rt,null!=(n=N.input)?n:c.input),(0,v.jsxs)(h.Fragment,{children:[!g&&hd,(0,v.jsxs)(st,(0,f.A)({},at,!Br(st)&&{ownerState:(0,f.A)({},it,at.ownerState)},{ref:e,onClick:t=>{J.current&&t.currentTarget===t.target&&J.current.focus(),O&&O(t)}},G,{className:(0,wn.A)(ot.root,at.className,a,L&&"MuiInputBase-readOnly"),children:[z,(0,v.jsx)(gs.Provider,{value:null,children:(0,v.jsx)(lt,(0,f.A)({ownerState:it,"aria-invalid":Z.error,"aria-describedby":i,autoComplete:o,autoFocus:s,defaultValue:u,disabled:Z.disabled,id:y,onAnimationStart:t=>{et("mui-auto-fill-cancel"===t.animationName?J.current:{value:"x"})},name:P,placeholder:B,readOnly:L,required:Z.required,rows:F,value:W,onKeyDown:R,onKeyUp:I,type:U},rt,!Br(lt)&&{as:nt,ownerState:(0,f.A)({},it,rt.ownerState)},{ref:X,className:(0,wn.A)(ot.input,rt.className,L&&"MuiInputBase-readOnly"),onBlur:t=>{M&&M(t),A.onBlur&&A.onBlur(t),Q&&Q.onBlur?Q.onBlur(t):Y(!1)},onChange:function(t){if(!H){const e=t.target||J.current;if(null==e)throw new Error((0,Qu.A)(1));et({value:e.value})}for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];A.onChange&&A.onChange(t,...n),T&&T(t,...n)},onFocus:t=>{Z.disabled?t.stopPropagation():(k&&k(t),A.onFocus&&A.onFocus(t),Q&&Q.onFocus?Q.onFocus(t):Y(!0))}}))}),m,D?D((0,f.A)({},Z,{startAdornment:z})):null]}))]})})),pd=fd;function gd(t){return(0,Fn.Ay)("MuiInput",t)}const md=(0,f.A)({},sd,(0,Tn.A)("MuiInput",["root","underline","input"])),vd=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],bd=(0,Ln.Ay)(ud,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...ld(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;let r="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r="rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")")),(0,f.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat((e.vars||e).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(md.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(md.error)]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(md.disabled,", .").concat(md.error,"):before")]:{borderBottom:"2px solid ".concat((e.vars||e).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},["&.".concat(md.disabled,":before")]:{borderBottomStyle:"dotted"}})})),yd=(0,Ln.Ay)(dd,{name:"MuiInput",slot:"Input",overridesResolver:cd})({}),xd=h.forwardRef((function(t,e){var n,r,i,o;const s=(0,p.A)({props:t,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:g,slots:m={},type:b="text"}=s,y=(0,C.A)(s,vd),x=(t=>{const{classes:e,disableUnderline:n}=t,r={root:["root",!n&&"underline"],input:["input"]},i=(0,Bn.A)(r,gd,e);return(0,f.A)({},e,i)})(s),A={root:{ownerState:{disableUnderline:a}}},_=(null!=g?g:c)?(0,vs.A)(null!=g?g:c,A):A,w=null!=(n=null!=(r=m.root)?r:l.Root)?n:bd,S=null!=(i=null!=(o=m.input)?o:l.Input)?i:yd;return(0,v.jsx)(pd,(0,f.A)({slots:{root:w,input:S},slotProps:_,fullWidth:u,inputComponent:d,multiline:h,ref:e,type:b},y,{classes:x}))}));xd.muiName="Input";const Ad=xd;function _d(t){return(0,Fn.Ay)("MuiFilledInput",t)}const wd=(0,f.A)({},sd,(0,Tn.A)("MuiFilledInput",["root","underline","input"])),Sd=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Cd=(0,Ln.Ay)(ud,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...ld(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;var r;const i="light"===e.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,f.A)({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},["&.".concat(wd.focused)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},["&.".concat(wd.disabled)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat(null==(r=(e.vars||e).palette[n.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(wd.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(wd.error)]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(wd.disabled,", .").concat(wd.error,"):before")]:{borderBottom:"1px solid ".concat((e.vars||e).palette.text.primary)},["&.".concat(wd.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,f.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),Ed=(0,Ln.Ay)(dd,{name:"MuiFilledInput",slot:"Input",overridesResolver:cd})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),Pd=h.forwardRef((function(t,e){var n,r,i,o;const s=(0,p.A)({props:t,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:g={},type:m="text"}=s,b=(0,C.A)(s,Sd),y=(0,f.A)({},s,{fullWidth:c,inputComponent:u,multiline:d,type:m}),x=(t=>{const{classes:e,disableUnderline:n}=t,r={root:["root",!n&&"underline"],input:["input"]},i=(0,Bn.A)(r,_d,e);return(0,f.A)({},e,i)})(s),A={root:{ownerState:y},input:{ownerState:y}},_=(null!=h?h:l)?(0,vs.A)(A,null!=h?h:l):A,w=null!=(n=null!=(r=g.root)?r:a.Root)?n:Cd,S=null!=(i=null!=(o=g.input)?o:a.Input)?i:Ed;return(0,v.jsx)(pd,(0,f.A)({slots:{root:w,input:S},componentsProps:_,fullWidth:c,inputComponent:u,multiline:d,ref:e,type:m},b,{classes:x}))}));Pd.muiName="Input";const Md=Pd;var Td;const Od=["children","classes","className","label","notched"],kd=(0,Ln.Ay)("fieldset",{shouldForwardProp:Li.A})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Rd=(0,Ln.Ay)("legend",{shouldForwardProp:Li.A})((t=>{let{ownerState:e,theme:n}=t;return(0,f.A)({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},e.withLabel&&(0,f.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function Id(t){return(0,Fn.Ay)("MuiOutlinedInput",t)}const Bd=(0,f.A)({},sd,(0,Tn.A)("MuiOutlinedInput",["root","notchedOutline","input"])),Ld=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Dd=(0,Ln.Ay)(ud,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiOutlinedInput",slot:"Root",overridesResolver:ld})((t=>{let{theme:e,ownerState:n}=t;const r="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,f.A)({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,["&:hover .".concat(Bd.notchedOutline)]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(Bd.notchedOutline)]:{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):r}},["&.".concat(Bd.focused," .").concat(Bd.notchedOutline)]:{borderColor:(e.vars||e).palette[n.color].main,borderWidth:2},["&.".concat(Bd.error," .").concat(Bd.notchedOutline)]:{borderColor:(e.vars||e).palette.error.main},["&.".concat(Bd.disabled," .").concat(Bd.notchedOutline)]:{borderColor:(e.vars||e).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,f.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),Fd=(0,Ln.Ay)((function(t){const{className:e,label:n,notched:r}=t,i=(0,C.A)(t,Od),o=null!=n&&""!==n,s=(0,f.A)({},t,{notched:r,withLabel:o});return(0,v.jsx)(kd,(0,f.A)({"aria-hidden":!0,className:e,ownerState:s},i,{children:(0,v.jsx)(Rd,{ownerState:s,children:o?(0,v.jsx)("span",{children:n}):Td||(Td=(0,v.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})((t=>{let{theme:e}=t;const n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),Nd=(0,Ln.Ay)(dd,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:cd})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),jd=h.forwardRef((function(t,e){var n,r,i,o,s;const a=(0,p.A)({props:t,name:"MuiOutlinedInput"}),{components:l={},fullWidth:c=!1,inputComponent:u="input",label:d,multiline:g=!1,notched:m,slots:b={},type:y="text"}=a,x=(0,C.A)(a,Ld),A=(t=>{const{classes:e}=t,n=(0,Bn.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Id,e);return(0,f.A)({},e,n)})(a),_=ms(),w=Vs({props:a,muiFormControl:_,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S=(0,f.A)({},a,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:_,fullWidth:c,hiddenLabel:w.hiddenLabel,multiline:g,size:w.size,type:y}),E=null!=(n=null!=(r=b.root)?r:l.Root)?n:Dd,P=null!=(i=null!=(o=b.input)?o:l.Input)?i:Nd;return(0,v.jsx)(pd,(0,f.A)({slots:{root:E,input:P},renderSuffix:t=>(0,v.jsx)(Fd,{ownerState:S,className:A.notchedOutline,label:null!=d&&""!==d&&w.required?s||(s=(0,v.jsxs)(h.Fragment,{children:[d,"\u2009","*"]})):d,notched:"undefined"!==typeof m?m:Boolean(t.startAdornment||t.filled||t.focused)}),fullWidth:c,inputComponent:u,multiline:g,ref:e,type:y},x,{classes:(0,f.A)({},A,{notchedOutline:null})}))}));jd.muiName="Input";const zd=jd;function Ud(t){return(0,Fn.Ay)("MuiFormLabel",t)}const Vd=(0,Tn.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Gd=["children","className","color","component","disabled","error","filled","focused","required"],Wd=(0,Ln.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,f.A)({},e.root,"secondary"===n.color&&e.colorSecondary,n.filled&&e.filled)}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(Vd.focused)]:{color:(e.vars||e).palette[n.color].main},["&.".concat(Vd.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(Vd.error)]:{color:(e.vars||e).palette.error.main}})})),Hd=(0,Ln.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})((t=>{let{theme:e}=t;return{["&.".concat(Vd.error)]:{color:(e.vars||e).palette.error.main}}})),Jd=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,s=(0,C.A)(n,Gd),a=Vs({props:n,muiFormControl:ms(),states:["color","required","focused","disabled","error","filled"]}),l=(0,f.A)({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=t,l={root:["root","color".concat((0,Dn.A)(n)),i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return(0,Bn.A)(l,Ud,e)})(l);return(0,v.jsxs)(Wd,(0,f.A)({as:o,ownerState:l,className:(0,wn.A)(c.root,i),ref:e},s,{children:[r,a.required&&(0,v.jsxs)(Hd,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),Kd=Jd;function Xd(t){return(0,Fn.Ay)("MuiInputLabel",t)}(0,Tn.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const qd=["disableAnimation","margin","shrink","variant","className"],Yd=(0,Ln.Ay)(Kd,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(Vd.asterisk)]:e.asterisk},e.root,n.formControl&&e.formControl,"small"===n.size&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===n.variant&&(0,f.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,f.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,f.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Qd=h.forwardRef((function(t,e){const n=(0,p.A)({name:"MuiInputLabel",props:t}),{disableAnimation:r=!1,shrink:i,className:o}=n,s=(0,C.A)(n,qd),a=ms();let l=i;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=Vs({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),u=(0,f.A)({},n,{disableAnimation:r,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=t,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&"size".concat((0,Dn.A)(r)),s],asterisk:[a&&"asterisk"]},c=(0,Bn.A)(l,Xd,e);return(0,f.A)({},e,c)})(u);return(0,v.jsx)(Yd,(0,f.A)({"data-shrink":l,ownerState:u,ref:e,className:(0,wn.A)(d.root,o)},s,{classes:d}))}));function Zd(t){return(0,Fn.Ay)("MuiFormControl",t)}(0,Tn.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const $d=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],th=(0,Ln.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,f.A)({},e.root,e["margin".concat((0,Dn.A)(n.margin))],n.fullWidth&&e.fullWidth)}})((t=>{let{ownerState:e}=t;return(0,f.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})})),eh=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiFormControl"}),{children:r,className:i,color:o="primary",component:s="div",disabled:a=!1,error:l=!1,focused:c,fullWidth:u=!1,hiddenLabel:d=!1,margin:g="none",required:m=!1,size:b="medium",variant:y="outlined"}=n,x=(0,C.A)(n,$d),A=(0,f.A)({},n,{color:o,component:s,disabled:a,error:l,fullWidth:u,hiddenLabel:d,margin:g,required:m,size:b,variant:y}),_=(t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root","none"!==n&&"margin".concat((0,Dn.A)(n)),r&&"fullWidth"]};return(0,Bn.A)(i,Zd,e)})(A),[w,S]=h.useState((()=>{let t=!1;return r&&h.Children.forEach(r,(e=>{if(!(0,vi.A)(e,["Input","Select"]))return;const n=(0,vi.A)(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)})),t})),[E,P]=h.useState((()=>{let t=!1;return r&&h.Children.forEach(r,(e=>{(0,vi.A)(e,["Input","Select"])&&(id(e.props,!0)||id(e.props.inputProps,!0))&&(t=!0)})),t})),[M,T]=h.useState(!1);a&&M&&T(!1);const O=void 0===c||a?M:c;let k;const R=h.useMemo((()=>({adornedStart:w,setAdornedStart:S,color:o,disabled:a,error:l,filled:E,focused:O,fullWidth:u,hiddenLabel:d,size:b,onBlur:()=>{T(!1)},onEmpty:()=>{P(!1)},onFilled:()=>{P(!0)},onFocus:()=>{T(!0)},registerEffect:k,required:m,variant:y})),[w,o,a,l,E,O,u,d,k,m,b,y]);return(0,v.jsx)(gs.Provider,{value:R,children:(0,v.jsx)(th,(0,f.A)({as:s,ownerState:A,className:(0,wn.A)(_.root,i),ref:e},x,{children:r}))})})),nh=eh;function rh(t){return(0,Fn.Ay)("MuiFormHelperText",t)}const ih=(0,Tn.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var oh;const sh=["children","className","component","disabled","error","filled","focused","margin","required","variant"],ah=(0,Ln.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e["size".concat((0,Dn.A)(n.size))],n.contained&&e.contained,n.filled&&e.filled]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(ih.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(ih.error)]:{color:(e.vars||e).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),lh=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,s=(0,C.A)(n,sh),a=Vs({props:n,muiFormControl:ms(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,f.A)({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=t,c={root:["root",i&&"disabled",o&&"error",r&&"size".concat((0,Dn.A)(r)),n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return(0,Bn.A)(c,rh,e)})(l);return(0,v.jsx)(ah,(0,f.A)({as:o,ownerState:l,className:(0,wn.A)(c.root,i),ref:e},s,{children:" "===r?oh||(oh=(0,v.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),ch=lh;var uh=n(2427);const dh=nu,hh=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function fh(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function ph(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function gh(t,e){if(void 0===e)return!0;let n=t.innerText;return void 0===n&&(n=t.textContent),n=n.trim().toLowerCase(),0!==n.length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function mh(t,e,n,r,i,o){let s=!1,a=i(t,e,!!e&&n);for(;a;){if(a===t.firstChild){if(s)return!1;s=!0}const e=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&gh(a,o)&&!e)return a.focus(),!0;a=i(t,a,n)}return!1}const vh=h.forwardRef((function(t,e){const{actions:n,autoFocus:r=!1,autoFocusItem:i=!1,children:o,className:s,disabledItemsFocusable:a=!1,disableListWrap:l=!1,onKeyDown:c,variant:u="selectedMenu"}=t,d=(0,C.A)(t,hh),p=h.useRef(null),g=h.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,bi.A)((()=>{r&&p.current.focus()}),[r]),h.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(t,e)=>{let{direction:n}=e;const r=!p.current.style.width;if(t.clientHeight<p.current.clientHeight&&r){const e="".concat(dh((0,uh.A)(t)),"px");p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=e,p.current.style.width="calc(100% + ".concat(e,")")}return p.current}})),[]);const m=(0,Lr.A)(p,e);let b=-1;h.Children.forEach(o,((t,e)=>{h.isValidElement(t)?(t.props.disabled||("selectedMenu"===u&&t.props.selected||-1===b)&&(b=e),b===e&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(b+=1,b>=o.length&&(b=-1))):b===e&&(b+=1,b>=o.length&&(b=-1))}));const y=h.Children.map(o,((t,e)=>{if(e===b){const e={};return i&&(e.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===u&&(e.tabIndex=0),h.cloneElement(t,e)}return t}));return(0,v.jsx)(ss,(0,f.A)({role:"menu",ref:m,className:s,onKeyDown:t=>{const e=p.current,n=t.key,r=(0,uh.A)(e).activeElement;if("ArrowDown"===n)t.preventDefault(),mh(e,r,l,a,fh);else if("ArrowUp"===n)t.preventDefault(),mh(e,r,l,a,ph);else if("Home"===n)t.preventDefault(),mh(e,null,l,a,fh);else if("End"===n)t.preventDefault(),mh(e,null,l,a,ph);else if(1===n.length){const i=g.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const l=r&&!i.repeating&&gh(r,i);i.previousKeyMatched&&(l||mh(e,r,!1,a,fh,i))?t.preventDefault():i.previousKeyMatched=!1}c&&c(t)},tabIndex:r?0:-1},d,{children:y}))})),bh=vh;var yh=n(950),xh=n(6078);function Ah(t){return(0,Fn.Ay)("MuiPopover",t)}(0,Tn.A)("MuiPopover",["root","paper"]);const _h=["onEntering"],wh=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Sh=["slotProps"];function Ch(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function Eh(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function Ph(t){return[t.horizontal,t.vertical].map((t=>"number"===typeof t?"".concat(t,"px"):t)).join(" ")}function Mh(t){return"function"===typeof t?t():t}const Th=(0,Ln.Ay)(Pu,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Oh=(0,Ln.Ay)(Qi,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),kh=h.forwardRef((function(t,e){var n,r,i;const o=(0,p.A)({props:t,name:"MuiPopover"}),{action:s,anchorEl:a,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:c,anchorReference:u="anchorEl",children:d,className:g,container:m,elevation:b=8,marginThreshold:y=16,open:x,PaperProps:A={},slots:_,slotProps:w,transformOrigin:S={vertical:"top",horizontal:"left"},TransitionComponent:E=Na,transitionDuration:P="auto",TransitionProps:{onEntering:M}={},disableScrollLock:T=!1}=o,O=(0,C.A)(o.TransitionProps,_h),k=(0,C.A)(o,wh),R=null!=(n=null==w?void 0:w.paper)?n:A,I=h.useRef(),B=(0,Lr.A)(I,R.ref),L=(0,f.A)({},o,{anchorOrigin:l,anchorReference:u,elevation:b,marginThreshold:y,externalPaperSlotProps:R,transformOrigin:S,TransitionComponent:E,transitionDuration:P,TransitionProps:O}),D=(t=>{const{classes:e}=t;return(0,Bn.A)({root:["root"],paper:["paper"]},Ah,e)})(L),F=h.useCallback((()=>{if("anchorPosition"===u)return c;const t=Mh(a),e=(t&&1===t.nodeType?t:(0,uh.A)(I.current).body).getBoundingClientRect();return{top:e.top+Ch(e,l.vertical),left:e.left+Eh(e,l.horizontal)}}),[a,l.horizontal,l.vertical,c,u]),N=h.useCallback((t=>({vertical:Ch(t,S.vertical),horizontal:Eh(t,S.horizontal)})),[S.horizontal,S.vertical]),j=h.useCallback((t=>{const e={width:t.offsetWidth,height:t.offsetHeight},n=N(e);if("none"===u)return{top:null,left:null,transformOrigin:Ph(n)};const r=F();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+e.height,l=o+e.width,c=(0,xh.A)(Mh(a)),d=c.innerHeight-y,h=c.innerWidth-y;if(null!==y&&i<y){const t=i-y;i-=t,n.vertical+=t}else if(null!==y&&s>d){const t=s-d;i-=t,n.vertical+=t}if(null!==y&&o<y){const t=o-y;o-=t,n.horizontal+=t}else if(l>h){const t=l-h;o-=t,n.horizontal+=t}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:Ph(n)}}),[a,u,F,N,y]),[z,U]=h.useState(x),V=h.useCallback((()=>{const t=I.current;if(!t)return;const e=j(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin,U(!0)}),[j]);h.useEffect((()=>(T&&window.addEventListener("scroll",V),()=>window.removeEventListener("scroll",V))),[a,T,V]);h.useEffect((()=>{x&&V()})),h.useImperativeHandle(s,(()=>x?{updatePosition:()=>{V()}}:null),[x,V]),h.useEffect((()=>{if(!x)return;const t=(0,yh.A)((()=>{V()})),e=(0,xh.A)(a);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[a,x,V]);let G=P;"auto"!==P||E.muiSupportAuto||(G=void 0);const W=m||(a?(0,uh.A)(Mh(a)).body:void 0),H=null!=(r=null==_?void 0:_.root)?r:Th,J=null!=(i=null==_?void 0:_.paper)?i:Oh,K=bo({elementType:J,externalSlotProps:(0,f.A)({},R,{style:z?R.style:(0,f.A)({},R.style,{opacity:0})}),additionalProps:{elevation:b,ref:B},ownerState:L,className:(0,wn.A)(D.paper,null==R?void 0:R.className)}),X=bo({elementType:H,externalSlotProps:(null==w?void 0:w.root)||{},externalForwardedProps:k,additionalProps:{ref:e,slotProps:{backdrop:{invisible:!0}},container:W,open:x},ownerState:L,className:(0,wn.A)(D.root,g)}),{slotProps:q}=X,Y=(0,C.A)(X,Sh);return(0,v.jsx)(H,(0,f.A)({},Y,!Br(H)&&{slotProps:q,disableScrollLock:T},{children:(0,v.jsx)(E,(0,f.A)({appear:!0,in:x,onEntering:(t,e)=>{M&&M(t,e),V()},onExited:()=>{U(!1)},timeout:G},O,{children:(0,v.jsx)(J,(0,f.A)({},K,{children:d}))}))}))})),Rh=kh;function Ih(t){return(0,Fn.Ay)("MuiMenu",t)}(0,Tn.A)("MuiMenu",["root","paper","list"]);const Bh=["onEntering"],Lh=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Dh={vertical:"top",horizontal:"right"},Fh={vertical:"top",horizontal:"left"},Nh=(0,Ln.Ay)(Rh,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),jh=(0,Ln.Ay)(Oh,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),zh=(0,Ln.Ay)(bh,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Uh=h.forwardRef((function(t,e){var n,r;const i=(0,p.A)({props:t,name:"MuiMenu"}),{autoFocus:o=!0,children:s,className:a,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:u,open:d,PaperProps:g={},PopoverClasses:m,transitionDuration:b="auto",TransitionProps:{onEntering:y}={},variant:x="selectedMenu",slots:A={},slotProps:_={}}=i,w=(0,C.A)(i.TransitionProps,Bh),S=(0,C.A)(i,Lh),E=B(),P=(0,f.A)({},i,{autoFocus:o,disableAutoFocusItem:l,MenuListProps:c,onEntering:y,PaperProps:g,transitionDuration:b,TransitionProps:w,variant:x}),M=(t=>{const{classes:e}=t;return(0,Bn.A)({root:["root"],paper:["paper"],list:["list"]},Ih,e)})(P),T=o&&!l&&d,O=h.useRef(null);let k=-1;h.Children.map(s,((t,e)=>{h.isValidElement(t)&&(t.props.disabled||("selectedMenu"===x&&t.props.selected||-1===k)&&(k=e))}));const R=null!=(n=A.paper)?n:jh,I=null!=(r=_.paper)?r:g,L=bo({elementType:A.root,externalSlotProps:_.root,ownerState:P,className:[M.root,a]}),D=bo({elementType:R,externalSlotProps:I,ownerState:P,className:M.paper});return(0,v.jsx)(Nh,(0,f.A)({onClose:u,anchorOrigin:{vertical:"bottom",horizontal:E?"right":"left"},transformOrigin:E?Dh:Fh,slots:{paper:R,root:A.root},slotProps:{root:L,paper:D},open:d,ref:e,transitionDuration:b,TransitionProps:(0,f.A)({onEntering:(t,e)=>{O.current&&O.current.adjustStyleForScrollbar(t,{direction:E?"rtl":"ltr"}),y&&y(t,e)}},w),ownerState:P},S,{classes:m,children:(0,v.jsx)(zh,(0,f.A)({onKeyDown:t=>{"Tab"===t.key&&(t.preventDefault(),u&&u(t,"tabKeyDown"))},actions:O,autoFocus:o&&(-1===k||l),autoFocusItem:T,variant:x},c,{className:(0,wn.A)(M.list,c.className),children:s}))}))})),Vh=Uh;function Gh(t){return(0,Fn.Ay)("MuiNativeSelect",t)}const Wh=(0,Tn.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Hh=["className","disabled","error","IconComponent","inputRef","variant"],Jh=t=>{let{ownerState:e,theme:n}=t;return(0,f.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,f.A)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(Wh.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},Kh=(0,Ln.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Li.A,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{["&.".concat(Wh.multiple)]:e.multiple}]}})(Jh),Xh=t=>{let{ownerState:e,theme:n}=t;return(0,f.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(Wh.disabled)]:{color:(n.vars||n).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7})},qh=(0,Ln.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat((0,Dn.A)(n.variant))],n.open&&e.iconOpen]}})(Xh),Yh=h.forwardRef((function(t,e){const{className:n,disabled:r,error:i,IconComponent:o,inputRef:s,variant:a="standard"}=t,l=(0,C.A)(t,Hh),c=(0,f.A)({},t,{disabled:r,variant:a,error:i}),u=(t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat((0,Dn.A)(n)),o&&"iconOpen",r&&"disabled"]};return(0,Bn.A)(a,Gh,e)})(c);return(0,v.jsxs)(h.Fragment,{children:[(0,v.jsx)(Kh,(0,f.A)({ownerState:c,className:(0,wn.A)(u.select,n),disabled:r,ref:s||e},l)),t.multiple?null:(0,v.jsx)(qh,{as:o,ownerState:c,className:u.icon})]})})),Qh=Yh;function Zh(t){return(0,Fn.Ay)("MuiSelect",t)}const $h=(0,Tn.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var tf;const ef=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],nf=(0,Ln.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["&.".concat($h.select)]:e.select},{["&.".concat($h.select)]:e[n.variant]},{["&.".concat($h.error)]:e.error},{["&.".concat($h.multiple)]:e.multiple}]}})(Jh,{["&.".concat($h.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),rf=(0,Ln.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat((0,Dn.A)(n.variant))],n.open&&e.iconOpen]}})(Xh),of=(0,Ln.Ay)("input",{shouldForwardProp:t=>(0,zo.A)(t)&&"classes"!==t,name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function sf(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}function af(t){return null==t||"string"===typeof t&&!t.trim()}const lf=h.forwardRef((function(t,e){var n;const{"aria-describedby":r,"aria-label":i,autoFocus:o,autoWidth:s,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:d,displayEmpty:p,error:g=!1,IconComponent:m,inputRef:b,labelId:y,MenuProps:x={},multiple:A,name:_,onBlur:w,onChange:S,onClose:E,onFocus:P,onOpen:M,open:T,readOnly:O,renderValue:k,SelectDisplayProps:R={},tabIndex:I,value:B,variant:L="standard"}=t,D=(0,C.A)(t,ef),[F,N]=(0,Xs.A)({controlled:B,default:u,name:"Select"}),[j,z]=(0,Xs.A)({controlled:T,default:c,name:"Select"}),U=h.useRef(null),V=h.useRef(null),[G,W]=h.useState(null),{current:H}=h.useRef(null!=T),[J,K]=h.useState(),X=(0,Lr.A)(e,b),q=h.useCallback((t=>{V.current=t,t&&W(t)}),[]),Y=null==G?void 0:G.parentNode;h.useImperativeHandle(X,(()=>({focus:()=>{V.current.focus()},node:U.current,value:F})),[F]),h.useEffect((()=>{c&&j&&G&&!H&&(K(s?null:Y.clientWidth),V.current.focus())}),[G,s]),h.useEffect((()=>{o&&V.current.focus()}),[o]),h.useEffect((()=>{if(!y)return;const t=(0,uh.A)(V.current).getElementById(y);if(t){const e=()=>{getSelection().isCollapsed&&V.current.focus()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}}),[y]);const Q=(t,e)=>{t?M&&M(e):E&&E(e),H||(K(s?null:Y.clientWidth),z(t))},Z=h.Children.toArray(a),$=t=>e=>{let n;if(e.currentTarget.hasAttribute("tabindex")){if(A){n=Array.isArray(F)?F.slice():[];const e=F.indexOf(t.props.value);-1===e?n.push(t.props.value):n.splice(e,1)}else n=t.props.value;if(t.props.onClick&&t.props.onClick(e),F!==n&&(N(n),S)){const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:_}}),S(i,t)}A||Q(!1,e)}},tt=null!==G&&j;let et,nt;delete D["aria-invalid"];const rt=[];let it=!1,ot=!1;(id({value:F})||p)&&(k?et=k(F):it=!0);const st=Z.map((t=>{if(!h.isValidElement(t))return null;let e;if(A){if(!Array.isArray(F))throw new Error((0,Qu.A)(2));e=F.some((e=>sf(e,t.props.value))),e&&it&&rt.push(t.props.children)}else e=sf(F,t.props.value),e&&it&&(nt=t.props.children);return e&&(ot=!0),h.cloneElement(t,{"aria-selected":e?"true":"false",onClick:$(t),onKeyUp:e=>{" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:e,value:void 0,"data-value":t.props.value})}));it&&(et=A?0===rt.length?null:rt.reduce(((t,e,n)=>(t.push(e),n<rt.length-1&&t.push(", "),t)),[]):nt);let at,lt=J;!s&&H&&G&&(lt=Y.clientWidth),at="undefined"!==typeof I?I:d?null:0;const ct=R.id||(_?"mui-component-select-".concat(_):void 0),ut=(0,f.A)({},t,{variant:L,value:F,open:tt,error:g}),dt=(t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat((0,Dn.A)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,Bn.A)(a,Zh,e)})(ut),ht=(0,f.A)({},x.PaperProps,null==(n=x.slotProps)?void 0:n.paper),ft=(0,$c.A)();return(0,v.jsxs)(h.Fragment,{children:[(0,v.jsx)(nf,(0,f.A)({ref:q,tabIndex:at,role:"combobox","aria-controls":ft,"aria-disabled":d?"true":void 0,"aria-expanded":tt?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[y,ct].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:t=>{if(!O){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),Q(!0,t))}},onMouseDown:d||O?null:t=>{0===t.button&&(t.preventDefault(),V.current.focus(),Q(!0,t))},onBlur:t=>{!tt&&w&&(Object.defineProperty(t,"target",{writable:!0,value:{value:F,name:_}}),w(t))},onFocus:P},R,{ownerState:ut,className:(0,wn.A)(R.className,dt.select,l),id:ct,children:af(et)?tf||(tf=(0,v.jsx)("span",{className:"notranslate",children:"\u200b"})):et})),(0,v.jsx)(of,(0,f.A)({"aria-invalid":g,value:Array.isArray(F)?F.join(","):F,name:_,ref:U,"aria-hidden":!0,onChange:t=>{const e=Z.find((e=>e.props.value===t.target.value));void 0!==e&&(N(e.props.value),S&&S(t,e))},tabIndex:-1,disabled:d,className:dt.nativeInput,autoFocus:o,ownerState:ut},D)),(0,v.jsx)(rf,{as:m,className:dt.icon,ownerState:ut}),(0,v.jsx)(Vh,(0,f.A)({id:"menu-".concat(_||""),anchorEl:Y,open:tt,onClose:t=>{Q(!1,t)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},x,{MenuListProps:(0,f.A)({"aria-labelledby":y,role:"listbox","aria-multiselectable":A?"true":void 0,disableListWrap:!0,id:ft},x.MenuListProps),slotProps:(0,f.A)({},x.slotProps,{paper:(0,f.A)({},ht,{style:(0,f.A)({minWidth:lt},null!=ht?ht.style:null)})}),children:st}))]})})),cf=lf,uf=(0,ta.A)((0,v.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),df=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],hf=["root"],ff={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>(0,Li.A)(t)&&"variant"!==t,slot:"Root"},pf=(0,Ln.Ay)(Ad,ff)(""),gf=(0,Ln.Ay)(zd,ff)(""),mf=(0,Ln.Ay)(Md,ff)(""),vf=h.forwardRef((function(t,e){const n=(0,p.A)({name:"MuiSelect",props:t}),{autoWidth:r=!1,children:i,classes:o={},className:s,defaultOpen:a=!1,displayEmpty:l=!1,IconComponent:c=uf,id:u,input:d,inputProps:g,label:m,labelId:b,MenuProps:y,multiple:x=!1,native:A=!1,onClose:_,onOpen:w,open:S,renderValue:E,SelectDisplayProps:P,variant:M="outlined"}=n,T=(0,C.A)(n,df),O=A?Qh:cf,k=Vs({props:n,muiFormControl:ms(),states:["variant","error"]}),R=k.variant||M,I=(0,f.A)({},n,{variant:R,classes:o}),B=(t=>{const{classes:e}=t;return e})(I),L=(0,C.A)(B,hf),D=d||{standard:(0,v.jsx)(pf,{ownerState:I}),outlined:(0,v.jsx)(gf,{label:m,ownerState:I}),filled:(0,v.jsx)(mf,{ownerState:I})}[R],F=(0,Lr.A)(e,D.ref);return(0,v.jsx)(h.Fragment,{children:h.cloneElement(D,(0,f.A)({inputComponent:O,inputProps:(0,f.A)({children:i,error:k.error,IconComponent:c,variant:R,type:void 0,multiple:x},A?{id:u}:{autoWidth:r,defaultOpen:a,displayEmpty:l,labelId:b,MenuProps:y,onClose:_,onOpen:w,open:S,renderValue:E,SelectDisplayProps:(0,f.A)({id:u},P)},g,{classes:g?(0,vs.A)(L,g.classes):L},d?d.props.inputProps:{})},(x&&A||l)&&"outlined"===R?{notched:!0}:{},{ref:F,className:(0,wn.A)(D.props.className,s,B.root)},!d&&{variant:R},T))})}));vf.muiName="Select";const bf=vf;function yf(t){return(0,Fn.Ay)("MuiTextField",t)}(0,Tn.A)("MuiTextField",["root"]);const xf=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Af={standard:Ad,filled:Md,outlined:zd},_f=(0,Ln.Ay)(nh,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),wf=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:g,id:m,InputLabelProps:b,inputProps:y,InputProps:x,inputRef:A,label:_,maxRows:w,minRows:S,multiline:E=!1,name:P,onBlur:M,onChange:T,onFocus:O,placeholder:k,required:R=!1,rows:I,select:B=!1,SelectProps:L,type:D,value:F,variant:N="outlined"}=n,j=(0,C.A)(n,xf),z=(0,f.A)({},n,{autoFocus:i,color:a,disabled:c,error:u,fullWidth:h,multiline:E,required:R,select:B,variant:N}),U=(t=>{const{classes:e}=t;return(0,Bn.A)({root:["root"]},yf,e)})(z);const V={};"outlined"===N&&(b&&"undefined"!==typeof b.shrink&&(V.notched=b.shrink),V.label=_),B&&(L&&L.native||(V.id=void 0),V["aria-describedby"]=void 0);const G=(0,$c.A)(m),W=g&&G?"".concat(G,"-helper-text"):void 0,H=_&&G?"".concat(G,"-label"):void 0,J=Af[N],K=(0,v.jsx)(J,(0,f.A)({"aria-describedby":W,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:E,name:P,rows:I,maxRows:w,minRows:S,type:D,value:F,id:G,inputRef:A,onBlur:M,onChange:T,onFocus:O,placeholder:k,inputProps:y},V,x));return(0,v.jsxs)(_f,(0,f.A)({className:(0,wn.A)(U.root,s),disabled:c,error:u,fullWidth:h,ref:e,required:R,color:a,variant:N,ownerState:z},j,{children:[null!=_&&""!==_&&(0,v.jsx)(Qd,(0,f.A)({htmlFor:G,id:H},b,{children:_})),B?(0,v.jsx)(bf,(0,f.A)({"aria-describedby":W,id:G,labelId:H,value:F,input:K},L,{children:o})):K,g&&(0,v.jsx)(ch,(0,f.A)({id:W},d,{children:g}))]}))})),Sf=wf;function Cf(t){return(0,Fn.Ay)("MuiDialogActions",t)}(0,Tn.A)("MuiDialogActions",["root","spacing"]);const Ef=["className","disableSpacing"],Pf=(0,Ln.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})((t=>{let{ownerState:e}=t;return(0,f.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),Mf=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,C.A)(n,Ef),s=(0,f.A)({},n,{disableSpacing:i}),a=(t=>{const{classes:e,disableSpacing:n}=t,r={root:["root",!n&&"spacing"]};return(0,Bn.A)(r,Cf,e)})(s);return(0,v.jsx)(Pf,(0,f.A)({className:(0,wn.A)(a.root,r),ownerState:s,ref:e},o))}));var Tf=n(6577),Of=n(3471),kf=n(4681);function Rf(){const[t,e]=(0,h.useState)([]),[n,r]=(0,h.useState)([]),[i,o]=(0,h.useState)(),[s,a]=(0,h.useState)(!1),[l,c]=(0,h.useState)(!1),[u,d]=(0,h.useState)(!1),[f,p]=(0,h.useState)({name:"",description:""}),g=et((t=>t.cityIOdataState.cityIOdata)),{sendJsonMessage:m}=(0,_n.Ay)(bn.cityIO.websocketURL,{share:!0,shouldReconnect:()=>!0}),b=()=>{c(!1),a(!1),d(!1)},y=()=>{const t=g.scenarios.filter((t=>!t.isInBin)).map(((t,e)=>(0,v.jsxs)(Ii,{children:[(0,v.jsx)(Fc,{sx:{width:"100%"},arrow:!0,placement:"right",title:t.description||"No description",children:(0,v.jsx)(Ji,{fullWidth:!0,sx:{width:"100%"},size:"small",variant:"outlined",onClick:()=>(t=>{o(t),c(!0)})(t),children:(0,v.jsxs)(ss,{children:[(0,v.jsx)(Ii,{children:(0,v.jsx)(Wn,{children:t.name.substring(0,15)+"..."})}),(0,v.jsx)(Ii,{children:(0,v.jsx)(Wn,{variant:"caption",children:t.description.substring(0,20)+"..."})})]})},"scenario_button_"+e)},"scenario_tt_"+e),(0,v.jsx)(Gc,{onClick:e=>{(t=>{const e=[...g.scenarios];var n=e.filter((e=>e.hash===t.hash)),r=e.indexOf(n[0]);if(-1!==r){let t=e[r];m({type:"MODIFY_SCENARIO",content:{name:t.name,isInBin:!0}})}b()})(t)},"aria-label":"delete",size:"medium",children:(0,v.jsx)(Of.A,{color:"primary",fontSize:"inherit"},"scenario_delicon_"+e)},"scenario_ib_"+e)]},"scenario_grid_item_".concat(e))));return t},x=()=>{const t=g.scenarios.filter((t=>t.isInBin)).map(((t,e)=>(0,v.jsxs)(Ii,{children:[(0,v.jsx)(Fc,{sx:{width:"100%"},arrow:!0,placement:"right",title:t.description||"No description",children:(0,v.jsx)(Ji,{fullWidth:!0,sx:{width:"100%"},size:"small",variant:"outlined",children:(0,v.jsxs)(ss,{children:[(0,v.jsx)(Ii,{children:(0,v.jsx)(Wn,{children:t.name.substring(0,15)+"..."})}),(0,v.jsx)(Ii,{children:(0,v.jsx)(Wn,{variant:"caption",children:t.description.substring(0,20)+"..."})})]})},"scenario_button_"+e)},"scenario_tt_"+e),(0,v.jsx)(Gc,{onClick:e=>{(t=>{const e=[...g.scenarios];var n=e.filter((e=>e.hash===t.hash)),r=e.indexOf(n[0]);if(-1!==r){let t=e[r];m({type:"MODIFY_SCENARIO",content:{name:t.name,isInBin:!1}})}b()})(t)},"aria-label":"delete",size:"large",children:(0,v.jsx)(kf.A,{color:"primary",fontSize:"inherit"},"scenario_resticon_"+e)},"scenario_ib_"+e)]},"scenario_grid_item_".concat(e))));return t};return(0,h.useEffect)((()=>{if(!g.scenarios)return;const t=y();e(t);const n=x();r(n)}),[g]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(Zc,{sx:{width:"100%"},badgeContent:g.scenarios&&g.scenarios.length||0,color:"primary",children:[(0,v.jsx)(Ji,{fullWidth:!0,variant:"outlined",onClick:()=>a(!0),children:(0,v.jsx)(Wn,{children:"Save This Scenario"})},"save_state_button"),(0,v.jsx)(Ji,{onClick:()=>d(!0),children:(0,v.jsx)(Tf.A,{})})]}),(0,v.jsx)(ss,{children:t}),(0,v.jsxs)(Fu,{open:s,onClose:b,children:[(0,v.jsx)(Vu,{id:"save-dialog-title",children:"Save this Scenario"}),(0,v.jsxs)(Ju,{children:[(0,v.jsx)(Yu,{id:"alert-dialog-description",children:"Give your scenario a name and a description to help you remember what it is about."}),(0,v.jsxs)(ss,{children:[(0,v.jsx)(Ii,{children:(0,v.jsx)(Sf,{id:"name-basic",label:"Scenario Name",variant:"outlined",fullWidth:!0,onChange:t=>p({...f,name:t.target.value})})}),(0,v.jsx)(Ii,{children:(0,v.jsx)(Sf,{id:"desc-basic",label:"Description (optional)",fullWidth:!0,variant:"outlined",onChange:t=>p({...f,description:t.target.value})})})]})]}),(0,v.jsxs)(Mf,{children:[(0,v.jsx)(Ji,{onClick:b,children:"Cancel"}),(0,v.jsx)(Ji,{onClick:()=>{b();const t={name:f.name||"noname",description:f.description||"no description yet."};m({type:"SAVE_SCENARIO",content:t})},autoFocus:!0,children:"Save"})]})]}),(0,v.jsxs)(Fu,{open:l,onClose:b,children:[(0,v.jsx)(Vu,{id:"alert-dialog-title",children:"Revert to saved scenario?"}),(0,v.jsx)(Ju,{children:(0,v.jsx)(Yu,{id:"alert-dialog-description",children:"You can revert to this saved scenario by clicking the button below. Reverting will delete all changes made since the last commit."})}),(0,v.jsxs)(Mf,{children:[(0,v.jsx)(Ji,{onClick:b,children:"Cancel"}),(0,v.jsx)(Ji,{onClick:async()=>{i&&(m({type:"RESTORE_SCENARIO",content:{name:i.name}}),b())},autoFocus:!0,children:"Revert"})]})]}),(0,v.jsxs)(Fu,{open:u,onClose:b,children:[(0,v.jsx)(Vu,{id:"alert-dialog-title",children:"Bin"}),(0,v.jsx)(Yu,{id:"alert-dialog-description",sx:{padding:2},children:"The scenarios in the bin will be permanently deleted after 15 days."}),(0,v.jsx)(Ju,{children:(0,v.jsx)(ss,{children:n})}),(0,v.jsx)(Mf,{children:(0,v.jsx)(Ji,{onClick:b,children:"Cancel"})})]})]})}const If=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Bf(t,e,n){var r;const i=function(t,e,n){const r=e.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=(0,xh.A)(e);let s;if(e.fakeTransform)s=e.fakeTransform;else{const t=o.getComputedStyle(e);s=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("transform")}let a=0,l=0;if(s&&"none"!==s&&"string"===typeof s){const t=s.split("(")[1].split(")")[0].split(",");a=parseInt(t[4],10),l=parseInt(t[5],10)}return"left"===t?"translateX(".concat(i?i.right+a-r.left:o.innerWidth+a-r.left,"px)"):"right"===t?"translateX(-".concat(i?r.right-i.left-a:r.left+r.width-a,"px)"):"up"===t?"translateY(".concat(i?i.bottom+l-r.top:o.innerHeight+l-r.top,"px)"):"translateY(-".concat(i?r.top-i.top+r.height-l:r.top+r.height-l,"px)")}(t,e,"function"===typeof(r=n)?r():r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const Lf=h.forwardRef((function(t,e){const n=Ar(),r={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,container:l,direction:c="down",easing:u=r,in:d,onEnter:p,onEntered:g,onEntering:m,onExit:b,onExited:y,onExiting:x,style:A,timeout:_=i,TransitionComponent:w=Oa}=t,S=(0,C.A)(t,If),E=h.useRef(null),P=(0,Lr.A)(a.ref,E,e),M=t=>e=>{t&&(void 0===e?t(E.current):t(E.current,e))},T=M(((t,e)=>{Bf(c,t,l),ka(t),p&&p(t,e)})),O=M(((t,e)=>{const r=Ra({timeout:_,style:A,easing:u},{mode:"enter"});t.style.webkitTransition=n.transitions.create("-webkit-transform",(0,f.A)({},r)),t.style.transition=n.transitions.create("transform",(0,f.A)({},r)),t.style.webkitTransform="none",t.style.transform="none",m&&m(t,e)})),k=M(g),R=M(x),I=M((t=>{const e=Ra({timeout:_,style:A,easing:u},{mode:"exit"});t.style.webkitTransition=n.transitions.create("-webkit-transform",e),t.style.transition=n.transitions.create("transform",e),Bf(c,t,l),b&&b(t)})),B=M((t=>{t.style.webkitTransition="",t.style.transition="",y&&y(t)})),L=h.useCallback((()=>{E.current&&Bf(c,E.current,l)}),[c,l]);return h.useEffect((()=>{if(d||"down"===c||"right"===c)return;const t=(0,yh.A)((()=>{E.current&&Bf(c,E.current,l)})),e=(0,xh.A)(E.current);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[c,d,l]),h.useEffect((()=>{d||L()}),[d,L]),(0,v.jsx)(w,(0,f.A)({nodeRef:E,onEnter:T,onEntered:k,onEntering:O,onExit:I,onExited:B,onExiting:R,addEndListener:t=>{o&&o(E.current,t)},appear:s,in:d,timeout:_},S,{children:(t,e)=>h.cloneElement(a,(0,f.A)({ref:P,style:(0,f.A)({visibility:"exited"!==t||d?void 0:"hidden"},A,a.props.style)},e))}))})),Df=Lf;function Ff(t){return(0,Fn.Ay)("MuiDrawer",t)}(0,Tn.A)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Nf=["BackdropProps"],jf=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],zf=(t,e)=>{const{ownerState:n}=t;return[e.root,("permanent"===n.variant||"persistent"===n.variant)&&e.docked,e.modal]},Uf=(0,Ln.Ay)(Pu,{name:"MuiDrawer",slot:"Root",overridesResolver:zf})((t=>{let{theme:e}=t;return{zIndex:(e.vars||e).zIndex.drawer}})),Vf=(0,Ln.Ay)("div",{shouldForwardProp:Li.A,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:zf})({flex:"0 0 auto"}),Gf=(0,Ln.Ay)(Qi,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e["paperAnchor".concat((0,Dn.A)(n.anchor))],"temporary"!==n.variant&&e["paperAnchorDocked".concat((0,Dn.A)(n.anchor))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((e.vars||e).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((e.vars||e).palette.divider)})})),Wf={left:"right",right:"left",top:"down",bottom:"up"};const Hf=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiDrawer"}),r=Ar(),i=B(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:a,children:l,className:c,elevation:u=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:g}={},onClose:m,open:b=!1,PaperProps:y={},SlideProps:x,TransitionComponent:A=Df,transitionDuration:_=o,variant:w="temporary"}=n,S=(0,C.A)(n.ModalProps,Nf),E=(0,C.A)(n,jf),P=h.useRef(!1);h.useEffect((()=>{P.current=!0}),[]);const M=function(t,e){let{direction:n}=t;return"rtl"===n&&function(t){return-1!==["left","right"].indexOf(t)}(e)?Wf[e]:e}({direction:i?"rtl":"ltr"},s),T=s,O=(0,f.A)({},n,{anchor:T,elevation:u,open:b,variant:w},E),k=(t=>{const{classes:e,anchor:n,variant:r}=t,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,Dn.A)(n)),"temporary"!==r&&"paperAnchorDocked".concat((0,Dn.A)(n))]};return(0,Bn.A)(i,Ff,e)})(O),R=(0,v.jsx)(Gf,(0,f.A)({elevation:"temporary"===w?u:0,square:!0},y,{className:(0,wn.A)(k.paper,y.className),ownerState:O,children:l}));if("permanent"===w)return(0,v.jsx)(Vf,(0,f.A)({className:(0,wn.A)(k.root,k.docked,c),ownerState:O,ref:e},E,{children:R}));const I=(0,v.jsx)(A,(0,f.A)({in:b,direction:Wf[M],timeout:_,appear:P.current},x,{children:R}));return"persistent"===w?(0,v.jsx)(Vf,(0,f.A)({className:(0,wn.A)(k.root,k.docked,c),ownerState:O,ref:e},E,{children:I})):(0,v.jsx)(Uf,(0,f.A)({BackdropProps:(0,f.A)({},a,g,{transitionDuration:_}),className:(0,wn.A)(k.root,k.modal,c),open:b,ownerState:O,onClose:m,hideBackdrop:d,ref:e},E,S,{children:I}))})),Jf=Hf,Kf=20,Xf=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)-10,qf=5;function Yf(t){let{children:e,direction:n,width:r}=t;const[i,o]=(0,h.useState)(r||Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)/2),s=t=>{document.addEventListener("mouseup",a,!0),document.addEventListener("mousemove",l,!0),t.preventDefault()},a=t=>{document.removeEventListener("mouseup",a,!0),document.removeEventListener("mousemove",l,!0),t.preventDefault()},l=(0,h.useCallback)((t=>{let e=null;"right"===n?e=document.body.offsetLeft+document.body.offsetWidth-t.clientX+20:"left"===n||void 0===n?e=document.body.offsetLeft+t.clientX+20:"bottom"===n&&(e=document.documentElement.scrollHeight-t.clientY),e>qf&&e<Xf&&o(e),e>document.documentElement.scrollHeight-Kf&&o(document.documentElement.scrollHeight-Kf-10)}),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(In,{onMouseDown:t=>s(t),sx:{padding:Kf+"px 0 0",position:"fixed",width:()=>"right"===n||"left"===n||void 0===n?"".concat(Kf,"px"):"bottom"===n?"100vw":void 0,height:"bottom"===n?"".concat(Kf,"px"):"100vh",left:"left"===n?i+"px":void 0,right:"right"===n?i+"px":void 0,bottom:"bottom"===n?i+"px":void 0,zIndex:"bottom"===n?9999:100,cursor:"move",backgroundColor:"rgba(0,0,0,0.8)"}}),("right"===n||"left"===n||void 0===n)&&(0,v.jsx)(In,{onMouseDown:t=>s(t),onTouchStart:t=>s(t),onClick:t=>o(i<30?Xf/2:15),sx:{position:"fixed",top:"45%",width:Kf+5,height:"10vh",left:"left"===n?i+"px":void 0,right:"right"===n?i+"px":void 0,zIndex:1e3,borderRadius:"30px",cursor:"move"},children:(0,v.jsx)(In,{sx:{transform:"rotate(90deg)",position:"absolute",top:"40%",left:"40%"},children:"..."})}),(0,v.jsx)(Jf,{anchor:n,open:!0,variant:"persistent",ModalProps:{keepMounted:!0},PaperProps:"bottom"===n?{style:{height:i,zIndex:9999}}:{style:{width:i,zIndex:100}},children:(0,v.jsx)(Qi,{children:e})})]})}var Qf=n(5540),Zf=n(2954);function $f(){const t=ut(),[e,n]=(0,h.useState)({EDIT_BUTTON:!1});return(0,h.useEffect)((()=>{t(us(e))}),[e]),(0,v.jsx)(Ji,{fullWidth:!0,id:"EDIT_BUTTON",variant:"outlined",endIcon:e.EDIT_BUTTON?(0,v.jsx)(Zf.A,{}):(0,v.jsx)(Qf.A,{}),onClick:t=>{return r=t,void n({...e,[r.currentTarget.id]:!e[r.currentTarget.id]});var r},children:(0,v.jsx)(Wn,{children:e.EDIT_BUTTON?"submit edits":"start editing"})})}const tp=function(){const t=et((t=>t.cityIOdataState.cityIOtableName));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Wn,{gutterBottom:!0,children:"CityScope"}),(0,v.jsx)(Wn,{variant:"h3",children:t})]})},ep=(0,ta.A)((0,v.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),np=(0,ta.A)((0,v.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),rp=(0,Ln.Ay)("span",{shouldForwardProp:Li.A})({position:"relative",display:"flex"}),ip=(0,Ln.Ay)(ep)({transform:"scale(1)"}),op=(0,Ln.Ay)(np)((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},n.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})})}));const sp=function(t){const{checked:e=!1,classes:n={},fontSize:r}=t,i=(0,f.A)({},t,{checked:e});return(0,v.jsxs)(rp,{className:n.root,ownerState:i,children:[(0,v.jsx)(ip,{fontSize:r,className:n.background,ownerState:i}),(0,v.jsx)(op,{fontSize:r,className:n.dot,ownerState:i})]})};var ap=n(6593);const lp=h.createContext(void 0);function cp(t){return(0,Fn.Ay)("MuiRadio",t)}const up=(0,Tn.A)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),dp=["checked","checkedIcon","color","icon","name","onChange","size","className"],hp=(0,Ln.Ay)($s,{shouldForwardProp:t=>(0,Li.A)(t)||"classes"===t,name:"MuiRadio",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"medium"!==n.size&&e["size".concat((0,Dn.A)(n.size))],e["color".concat((0,Dn.A)(n.color))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({color:(e.vars||e).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat("default"===n.color?e.vars.palette.action.activeChannel:e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)("default"===n.color?e.palette.action.active:e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(up.checked)]:{color:(e.vars||e).palette[n.color].main}},{["&.".concat(up.disabled)]:{color:(e.vars||e).palette.action.disabled}})}));const fp=(0,v.jsx)(sp,{checked:!0}),pp=(0,v.jsx)(sp,{}),gp=h.forwardRef((function(t,e){var n,r;const i=(0,p.A)({props:t,name:"MuiRadio"}),{checked:o,checkedIcon:s=fp,color:a="primary",icon:l=pp,name:c,onChange:u,size:d="medium",className:g}=i,m=(0,C.A)(i,dp),b=(0,f.A)({},i,{color:a,size:d}),y=(t=>{const{classes:e,color:n,size:r}=t,i={root:["root","color".concat((0,Dn.A)(n)),"medium"!==r&&"size".concat((0,Dn.A)(r))]};return(0,f.A)({},e,(0,Bn.A)(i,cp,e))})(b),x=h.useContext(lp);let A=o;const _=(0,ap.A)(u,x&&x.onChange);let w=c;return x&&("undefined"===typeof A&&(A=function(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}(x.value,i.value)),"undefined"===typeof w&&(w=x.name)),(0,v.jsx)(hp,(0,f.A)({type:"radio",icon:h.cloneElement(l,{fontSize:null!=(n=pp.props.fontSize)?n:d}),checkedIcon:h.cloneElement(s,{fontSize:null!=(r=fp.props.fontSize)?r:d}),ownerState:b,classes:y,name:w,checked:A,onChange:_,ref:e,className:(0,wn.A)(y.root,g)},m))})),mp=gp;function vp(t){return(0,Fn.Ay)("MuiFormGroup",t)}(0,Tn.A)("MuiFormGroup",["root","row","error"]);const bp=["className","row"],yp=(0,Ln.Ay)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})((t=>{let{ownerState:e}=t;return(0,f.A)({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})})),xp=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiFormGroup"}),{className:r,row:i=!1}=n,o=(0,C.A)(n,bp),s=Vs({props:n,muiFormControl:ms(),states:["error"]}),a=(0,f.A)({},n,{row:i,error:s.error}),l=(t=>{const{classes:e,row:n,error:r}=t,i={root:["root",n&&"row",r&&"error"]};return(0,Bn.A)(i,vp,e)})(a);return(0,v.jsx)(yp,(0,f.A)({className:(0,wn.A)(l.root,r),ownerState:a,ref:e},o))})),Ap=xp;function _p(t){return(0,Fn.Ay)("MuiRadioGroup",t)}(0,Tn.A)("MuiRadioGroup",["root","row","error"]);const wp=["actions","children","className","defaultValue","name","onChange","value"],Sp=h.forwardRef((function(t,e){const{actions:n,children:r,className:i,defaultValue:o,name:s,onChange:a,value:l}=t,c=(0,C.A)(t,wp),u=h.useRef(null),d=(t=>{const{classes:e,row:n,error:r}=t,i={root:["root",n&&"row",r&&"error"]};return(0,Bn.A)(i,_p,e)})(t),[p,g]=(0,Xs.A)({controlled:l,default:o,name:"RadioGroup"});h.useImperativeHandle(n,(()=>({focus:()=>{let t=u.current.querySelector("input:not(:disabled):checked");t||(t=u.current.querySelector("input:not(:disabled)")),t&&t.focus()}})),[]);const m=(0,Lr.A)(e,u),b=(0,Cc.A)(s),y=h.useMemo((()=>({name:b,onChange(t){g(t.target.value),a&&a(t,t.target.value)},value:p})),[b,a,g,p]);return(0,v.jsx)(lp.Provider,{value:y,children:(0,v.jsx)(Ap,(0,f.A)({role:"radiogroup",ref:m,className:(0,wn.A)(d.root,i)},c,{children:r}))})})),Cp=Sp;var Ep=n(4318);function Pp(t){return(0,Fn.Ay)("MuiCollapse",t)}(0,Tn.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Mp=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Tp=(0,Ln.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],"entered"===n.state&&e.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&e.hidden]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===n.state&&(0,f.A)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),Op=(0,Ln.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})((t=>{let{ownerState:e}=t;return(0,f.A)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})})),kp=(0,Ln.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})((t=>{let{ownerState:e}=t;return(0,f.A)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})})),Rp=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiCollapse"}),{addEndListener:r,children:i,className:o,collapsedSize:s="0px",component:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:g,onExit:m,onExited:b,onExiting:y,orientation:x="vertical",style:A,timeout:_=Ep.p0.standard,TransitionComponent:w=Oa}=n,S=(0,C.A)(n,Mp),E=(0,f.A)({},n,{orientation:x,collapsedSize:s}),P=(t=>{const{orientation:e,classes:n}=t,r={root:["root","".concat(e)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(e)],wrapperInner:["wrapperInner","".concat(e)]};return(0,Bn.A)(r,Pp,n)})(E),M=Ar(),T=(0,Kr.A)(),O=h.useRef(null),k=h.useRef(),R="number"===typeof s?"".concat(s,"px"):s,I="horizontal"===x,B=I?"width":"height",L=h.useRef(null),D=(0,Lr.A)(e,L),F=t=>e=>{if(t){const n=L.current;void 0===e?t(n):t(n,e)}},N=()=>O.current?O.current[I?"clientWidth":"clientHeight"]:0,j=F(((t,e)=>{O.current&&I&&(O.current.style.position="absolute"),t.style[B]=R,u&&u(t,e)})),z=F(((t,e)=>{const n=N();O.current&&I&&(O.current.style.position="");const{duration:r,easing:i}=Ra({style:A,timeout:_,easing:l},{mode:"enter"});if("auto"===_){const e=M.transitions.getAutoHeightDuration(n);t.style.transitionDuration="".concat(e,"ms"),k.current=e}else t.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");t.style[B]="".concat(n,"px"),t.style.transitionTimingFunction=i,g&&g(t,e)})),U=F(((t,e)=>{t.style[B]="auto",d&&d(t,e)})),V=F((t=>{t.style[B]="".concat(N(),"px"),m&&m(t)})),G=F(b),W=F((t=>{const e=N(),{duration:n,easing:r}=Ra({style:A,timeout:_,easing:l},{mode:"exit"});if("auto"===_){const n=M.transitions.getAutoHeightDuration(e);t.style.transitionDuration="".concat(n,"ms"),k.current=n}else t.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");t.style[B]=R,t.style.transitionTimingFunction=r,y&&y(t)}));return(0,v.jsx)(w,(0,f.A)({in:c,onEnter:j,onEntered:U,onEntering:z,onExit:V,onExited:G,onExiting:W,addEndListener:t=>{"auto"===_&&T.start(k.current||0,t),r&&r(L.current,t)},nodeRef:L,timeout:"auto"===_?null:_},S,{children:(t,e)=>(0,v.jsx)(Tp,(0,f.A)({as:a,className:(0,wn.A)(P.root,o,{entered:P.entered,exited:!c&&"0px"===R&&P.hidden}[t]),style:(0,f.A)({[I?"minWidth":"minHeight"]:R},A),ref:D},e,{ownerState:(0,f.A)({},E,{state:t}),children:(0,v.jsx)(Op,{ownerState:(0,f.A)({},E,{state:t}),className:P.wrapper,ref:O,children:(0,v.jsx)(kp,{ownerState:(0,f.A)({},E,{state:t}),className:P.wrapperInner,children:i})})}))}))}));Rp.muiSupportAuto=!0;const Ip=Rp,Bp=(0,ta.A)((0,v.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var Lp=n(7058);function Dp(t){let{children:e,variant:n,title:r,subheader:i,collapse:o,toolTipInfo:s}=t;const[a,l]=(0,h.useState)(o);return(0,v.jsxs)("div",{children:[(0,v.jsx)(ho,{sx:{mt:1}}),(0,v.jsx)(Ir,{container:!0,justifyContent:"center",children:(0,v.jsxs)(Ji,{fullWidth:!0,onClick:()=>l(!a),sx:{justifyContent:"flex-start"},children:[(0,v.jsxs)(Ir,{item:!0,container:!0,xs:10,direction:"row",children:[(0,v.jsx)(Bp,{}),(0,v.jsxs)("div",{style:{display:"block",textAlign:"left"},children:[(0,v.jsx)(Wn,{variant:"h6",style:{color:"white",fontWeight:"bold",fontSize:"10px"},children:r||""}),(0,v.jsx)(Wn,{style:{color:"gray",fontSize:"10px"},children:i||""})]})]}),(0,v.jsx)(Ir,{item:!0,container:!0,xs:2,alignItems:"end",direction:"column",children:s&&(0,v.jsx)(Fc,{placement:"top",title:(0,v.jsx)(Wn,{children:s}),children:(0,v.jsx)(Lp.A,{})})})]})}),(0,v.jsx)(Qi,{children:(0,v.jsx)(Ip,{in:a,children:(0,v.jsx)(eo,{variant:n||"outlined",sx:{width:"100%"},children:(0,v.jsx)(oo,{children:e})})})})]})}function Fp(){const t=et((t=>t.menuState)).layersMenuState,e=ut(),n=et((t=>t.cityIOdataState.cityIOdata)).access,[r,i]=(0,h.useState)(),o=(n,r)=>{i(n);const o={...t,ACCESS_LAYER_CHECKBOX:{...t.ACCESS_LAYER_CHECKBOX,selected:r}};e(ls(o))};(0,h.useEffect)((()=>{o(n.properties[0],0)}),[]);const s=()=>{const t=n.properties.map(((t,e)=>(0,v.jsx)(Ks,{control:(0,v.jsx)(mp,{}),label:(0,v.jsx)(Wn,{variant:"caption",children:t}),onChange:()=>o(t,e),checked:r===t},e+"_access_checkboxFormControlLabel")));return(0,v.jsx)(nh,{children:(0,v.jsx)(Cp,{value:r,defaultValue:n.properties[0],children:t})})};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(Dp,{variant:"outlined",subheader:"Select Heatmap Sub-Layer",collapse:!0,children:(0,v.jsx)(s,{})})})}function Np(){const t=et((t=>t.menuState)).layersMenuState,e=ut(),n=et((t=>t.cityIOdataState.cityIOdata)).ABM2,r=n.attr.mode,i=n.attr.profile,[o,s]=(0,h.useState)(null),a=(n,r,i)=>{s(r);const o={...t,ABM_LAYER_CHECKBOX:{...t.ABM_LAYER_CHECKBOX,selected:{[n]:i}}};e(ls(o))};(0,h.useEffect)((()=>{a("mode",r[1].name,1)}),[]);const l=(t,e)=>{let n=[];for(const r in e)n.push((0,v.jsx)(Ks,{control:(0,v.jsx)(mp,{sx:{color:e[r].color}}),label:(0,v.jsx)(Wn,{variant:"caption",children:e[r].name}),onChange:()=>a(t,e[r].name,parseInt(r)),checked:o===e[r].name},r+"_access_checkboxFormControlLabel"));return(0,v.jsx)(nh,{children:(0,v.jsx)(Cp,{value:o,children:n})})};return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(Dp,{variant:"outlined",subheader:"Select ABM Sub-Layer",collapse:!0,children:[l("mode",r),l("profile",i)]})})}function jp(){const t=et((t=>t.menuState)).layersMenuState;return(0,v.jsxs)(v.Fragment,{children:[t.ACCESS_LAYER_CHECKBOX&&t.ACCESS_LAYER_CHECKBOX.isOn&&(0,v.jsx)(Fp,{}),(()=>{if(t.AGGREGATED_TRIPS_LAYER_CHECKBOX&&t.AGGREGATED_TRIPS_LAYER_CHECKBOX.isOn||t.ABM_LAYER_CHECKBOX&&t.ABM_LAYER_CHECKBOX.isOn)return(0,v.jsx)(Np,{})})()]})}const zp=function(){const t=[{component:(0,v.jsx)(tp,{}),collapse:!0},{component:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)($f,{}),(0,v.jsx)(ps,{})]}),collapse:!1,title:"Edit Mode",subheader:"Select Types & Edit"},{component:(0,v.jsx)(Rf,{}),collapse:!1,title:"Scenarios",subheader:"Save and Load Scenarios"},{component:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(fa,{}),(0,v.jsx)(jp,{})]}),collapse:!0,title:"Layers",subheader:"Layers visibility"},{component:(0,v.jsx)(Aa,{}),collapse:!1,title:"View Settings",subheader:"Toggle different visibility settings"}],e=()=>{const e=[];return t.forEach(((t,n)=>{e.push((0,v.jsx)(Ir,{item:!0,xs:12,md:12,lg:12,xl:12,children:(0,v.jsx)(Dp,{variant:"outlined",title:t.title,subheader:t.subheader,collapse:t.collapse,children:t.component})},t.title+"_grid"))})),e};return(0,v.jsx)(Yf,{direction:"left",width:300,children:(0,v.jsx)(In,{p:1,children:(0,v.jsx)(Ir,{container:!0,children:(0,v.jsx)(e,{})})})})};function Up(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}const Vp=t=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(t),Gp=(bn.cityIO.baseURL,t=>{var e,n,r,i,o,s,a,l;const c=null===t||void 0===t||null===(e=t.GEOGRID)||void 0===e||null===(n=e.features[(null===t||void 0===t||null===(i=t.GEOGRID)||void 0===i||null===(o=i.features)||void 0===o?void 0:o.length)-1])||void 0===n||null===(r=n.geometry)||void 0===r?void 0:r.coordinates[0][0],u=null===t||void 0===t||null===(s=t.GEOGRID)||void 0===s||null===(a=s.features[0])||void 0===a||null===(l=a.geometry)||void 0===l?void 0:l.coordinates[0][0];return[(u[0]+c[0])/2,(u[1]+c[1])/2]});function Wp(t,e,n){var r=t;if(e>0||n<1)if(t<e)r=0;else if(t>n)r=1;else{r=(t-e)/(n-e)}var i=function(t,e,n){var r,i,o;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=s(l,a,t+1/3),i=s(l,a,t),o=s(l,a,t-1/3)}return[Math.floor(255*r),Math.floor(255*i),Math.floor(255*o)]}(1.2*r/3.6,1,.5);return[i[0],i[1],i[2]]}var Hp=n(7948);const Jp=t=>{if(!t.mousePos||!t.hoveredCells)return null;const e=t.selectedType,n=t.hoveredCells.object.properties.interactive,r=t.mousePos,i=t.divSize;let o=e.color;Vp(o)&&(o=Up(o));const s="rgb("+o[0]+","+o[1]+","+o[2]+")",a="rgba("+o[0]+","+o[1]+","+o[2]+",0.6)";let l=r.clientX-i/2,c=r.clientY-i/2;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(In,{sx:{border:n?"3px solid":"1px dashed",borderRadius:"5%",position:"fixed",backgroundColor:t.mouseDown&&n?a:"rgba(0,0,0,0)",padding:"1vw",color:s,borderColor:s,zIndex:10,pointerEvents:"none",width:i,height:i,left:l,top:c}}),(0,v.jsxs)(In,{sx:{borderRadius:"5%",position:"fixed",left:l+i+10,top:c-10,display:"flex",flexDirection:"column",m:1,p:1,pointerEvents:"none",zIndex:10,color:s,backgroundColor:"rgba(0,0,0,0.8)"},children:[(0,v.jsx)(Wn,{variant:"caption",children:n&&(0,v.jsx)("strong",{children:e.thisTypeName})}),!n&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Hp.A,{sx:{color:s}}),(0,v.jsx)(Wn,{variant:"caption",children:(0,v.jsx)("strong",{children:e.thisTypeName})}),(0,v.jsxs)(Wn,{variant:"caption",children:["Cell ",t.hoveredCells.object.properties.id," is not interactive"]})]})]})]})},Kp=t=>{if(!t.mousePos)return null;const e=t.mousePos,n=t.hoveredObj;let r=n.object.properties.color;Vp(r)&&(r=Up(r));const i="rgb("+r[0]+","+r[1]+","+r[2]+")";return(0,v.jsxs)(In,{sx:{borderRadius:"5%",position:"fixed",padding:"0.25vw",zIndex:10,left:e.clientX+10,top:e.clientY+10,display:"flex",flexDirection:"column",pointerEvents:"none",backgroundColor:"rgba(0,0,0,0.8)",color:i,border:n.object.properties.interactive?"3px solid":"1px dashed",minWidth:"100px",minHeight:"50px"},children:[(0,v.jsx)(Wn,{children:n.object.properties.name}),(0,v.jsxs)(Wn,{variant:"caption",children:["height: ",n.object.properties.height]}),(0,v.jsxs)(Wn,{variant:"caption",children:["ID: ",n.object.properties.id]}),!n.object.properties.interactive&&(0,v.jsxs)("div",{style:{display:"flex",alignItems:"left"},children:[(0,v.jsx)(Hp.A,{sx:{color:i,fontSize:"1rem"}}),(0,v.jsx)(Wn,{variant:"caption",children:"Non-interactive"})]})]})};function Xp(t){let{editOn:e,mousePos:n,selectedType:r,pickingRadius:i,mouseDown:o,hoveredObj:s}=t;const a=()=>e&&r&&Object.keys(r).length&&s?(0,v.jsx)(Jp,{mousePos:n,selectedType:r,divSize:i,mouseDown:o,hoveredCells:s}):s?(0,v.jsx)(Kp,{mousePos:n,hoveredObj:s}):null;return(0,v.jsx)(a,{})}const qp=t=>{if(!t.mousePos)return null;const e=t.mousePos,n=t.layerHoveredData;return(0,v.jsx)(In,{sx:{borderRadius:"5%",position:"fixed",backgroundColor:"primary.opacityDarkBackground",padding:"1vw",color:"primary.main",zIndex:10,left:e.clientX-100,top:e.clientY,display:"flex",flexDirection:"column",pointerEvents:"none"},children:(0,v.jsx)(Wn,{variant:"caption",children:n&&n})})};let Yp=1,Qp=1;class Zp{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=t,o=Yp++,s={time:0,delay:e,duration:n,rate:r,repeat:i};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const r of e)this._setChannelTime(r,this.time);const n=this.animations.values();for(const r of n){const{animation:t,channel:e}=r;t.setTime(this.getTime(e))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=Qp++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const $p="Awaiting state",tg="Matched. State transferred from previous layer",eg="Initialized",ng="Discarded. Awaiting garbage collection",rg="No longer matched. Awaiting garbage collection",ig="Finalized! Awaiting garbage collection",og=Symbol.for("component"),sg=Symbol.for("propTypes"),ag=Symbol.for("deprecatedProps"),lg=Symbol.for("asyncPropDefaults"),cg=Symbol.for("asyncPropOriginal"),ug=Symbol.for("asyncPropResolved");function dg(t){if("undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof process&&"object"===typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function hg(){return!("object"===typeof process&&"[object process]"===String(process)&&!process.browser)||dg()}const fg="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source";hg();class pg{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";ge(this,"storage",void 0),ge(this,"id",void 0),ge(this,"config",void 0),this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(e){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function gg(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let mg;function vg(t){return"string"===typeof t?mg[t.toUpperCase()]||mg.WHITE:t}function bg(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(mg||(mg={}));const yg={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document,process:"object"===typeof process&&process},xg=yg.window||yg.self||yg.global,Ag=yg.process||{};function _g(){let t;var e,n;if(hg&&"performance"in xg)t=null===xg||void 0===xg||null===(e=xg.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Ag){var r;const e=null===Ag||void 0===Ag||null===(r=Ag.hrtime)||void 0===r?void 0:r.call(Ag);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const wg={debug:hg&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Sg={enabled:!0,level:0};function Cg(){}const Eg={},Pg={once:!0};class Mg{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};ge(this,"id",void 0),ge(this,"VERSION",fg),ge(this,"_startTs",_g()),ge(this,"_deltaTs",_g()),ge(this,"_storage",void 0),ge(this,"userData",{}),ge(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this.userData={},this._storage=new pg("__probe-".concat(this.id,"__"),Sg),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)"function"===typeof t[i]&&(e.find((t=>i===t))||(t[i]=t[i].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((_g()-this._startTs).toPrecision(10))}getDelta(){return Number((_g()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){bg(t,e)}warn(t){return this._getLogFunction(0,t,wg.warn,arguments,Pg)}error(t){return this._getLogFunction(0,t,wg.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,wg.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,wg.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,wg.debug||wg.info,arguments,Pg)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||Cg,n&&[n],{tag:kg(e)}):Cg}image(t){let{logLevel:e,priority:n,image:r,message:i="",scale:o=1}=t;return this._shouldLog(e||n)?hg?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"===typeof e){const t=new Image;return t.onload=()=>{const e=gg(t,n,r);console.log(...e)},t.src=e,Cg}const i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...gg(e,n,r)),Cg;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...gg(t,n,r)),t.src=e.toDataURL(),Cg}return Cg}({image:r,message:i,scale:o}):function(t){let{image:e,message:n="",scale:r=1}=t;return console.warn("removed"),Cg}({image:r,message:i,scale:o}):Cg}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||Cg)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Og({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Cg)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=Tg(t)}_getLogFunction(t,e,n,r,i){if(this._shouldLog(t)){i=Og({logLevel:t,message:e,args:r,opts:i}),bg(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=_g();const o=i.tag||i.message;if(i.once){if(Eg[o])return Cg;Eg[o]=_g()}return e=function(t,e,n){if("string"===typeof e){const r=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function(t,e,n){return hg||"string"!==typeof t||(e&&(e=vg(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=vg(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,i.message,i),n.bind(console,e,...i.args)}return Cg}}function Tg(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return bg(Number.isFinite(e)&&e>=0),e}function Og(t){const{logLevel:e,message:n}=t;t.logLevel=Tg(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());const i=typeof t.message;return bg("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function kg(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}ge(Mg,"VERSION",fg);const Rg=new Mg({id:"deck"});let Ig={};function Bg(t){Ig=t}function Lg(t,e,n,r){Rg.level>0&&Ig[t]&&Ig[t].call(null,e,n,r)}function Dg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(t)?Fg(t,e,[]):e(t)?[t]:[]}function Fg(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?Fg(i,e,n):e(i)&&n.push(i)}return n}function Ng(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)e[l++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s);return e}function jg(){let t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class zg{constructor(t,e){ge(this,"name",void 0),ge(this,"type",void 0),ge(this,"sampleSize",1),ge(this,"time",void 0),ge(this,"count",void 0),ge(this,"samples",void 0),ge(this,"lastTiming",void 0),ge(this,"lastSampleTime",void 0),ge(this,"lastSampleCount",void 0),ge(this,"_count",0),ge(this,"_time",0),ge(this,"_samples",0),ge(this,"_startTime",0),ge(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=jg(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(jg()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Ug{constructor(t){ge(this,"id",void 0),ge(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:n}=t;return this.stats[e]||(this.stats[e]=t instanceof zg?t:new zg(e,n)),this.stats[e]}}const Vg=t=>"boolean"===typeof t,Gg=t=>"function"===typeof t,Wg=t=>null!==t&&"object"===typeof t,Hg=t=>Wg(t)&&t.constructor==={}.constructor,Jg=t=>t&&"function"===typeof t[Symbol.iterator],Kg=t=>t&&"function"===typeof t[Symbol.asyncIterator],Xg=t=>"undefined"!==typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,qg=t=>"undefined"!==typeof Blob&&t instanceof Blob,Yg=t=>t&&"object"===typeof t&&t.isBuffer,Qg=t=>(t=>"undefined"!==typeof ReadableStream&&t instanceof ReadableStream||Wg(t)&&Gg(t.tee)&&Gg(t.cancel)&&Gg(t.getReader))(t)||(t=>Wg(t)&&Gg(t.read)&&Gg(t.pipe)&&Vg(t.readable))(t);function Zg(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function $g(t){var e;if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions)}function tm(t){var e,n;let r;return Zg(t,"null loader"),Zg($g(t),"invalid loader"),Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let em="";const nm={};const rm=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,im=/^([-\w.]+\/[-\w.+]+)/;function om(t){const e=rm.exec(t);return e?e[1]:""}const sm=/\?.*/;function am(t){return t.replace(sm,"")}function lm(t){if(Xg(t)){return t.url}if(qg(t)){return t.name||""}return"string"===typeof t?t:""}function cm(t){if(Xg(t)){const e=t,n=e.headers.get("content-type")||"",r=am(e.url);return function(t){const e=im.exec(t);return e?e[1]:t}(n)||om(r)}if(qg(t)){return t.type||""}return"string"===typeof t?om(t):""}async function um(t){if(Xg(t))return t;const e={},n=function(t){if(Xg(t))return t.headers["content-length"]||-1;if(qg(t))return t.size;return"string"===typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const r=lm(t),i=cm(t);i&&(e["content-type"]=i);const o=await async function(t){const e=5;if("string"===typeof t)return"data:,".concat(t.slice(0,e));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const n=new FileReader;n.onload=e=>{var n;return t(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const n=function(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}(t.slice(0,e));return"data:base64,".concat(n)}return null}(t);o&&(e["x-first-bytes"]=o),"string"===typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:r}),s}async function dm(t,e){if("string"===typeof t){t=function(t){for(const e in nm)if(t.startsWith(e)){const n=nm[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(em).concat(t)),t}(t);let n=e;return null!==e&&void 0!==e&&e.fetch&&"function"!==typeof(null===e||void 0===e?void 0:e.fetch)&&(n=e.fetch),await fetch(t,n)}return await um(t)}const hm=new Mg({id:"loaders.gl"});class fm{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const pm=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),gm="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),mm=(gm&&parseFloat(gm[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){ge(this,"console",void 0),this.console=console}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:pm,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),vm={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function bm(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const ym=()=>{const t=bm();return t.globalOptions=t.globalOptions||{...mm},t.globalOptions};function xm(t,e,n,r){return n=n||[],function(t,e){Am(t,null,mm,vm,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Am(r,n.id,i,o,e)}}(t,n=Array.isArray(n)?n:[n]),wm(e,t,r)}function Am(t,e,n,r,i){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const l=!e&&Wg(t[a]);if(!(a in n)&&!("baseUri"===a&&!e)&&!("workerUrl"===a&&e))if(a in r)hm.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const t=_m(a,i);hm.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(t))()}}}function _m(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const e in i.options){if(t===e)return"Did you mean '".concat(i.id,".").concat(e,"'?");const o=e.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(e,"'?"))}return r}function wm(t,e,n){const r={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new fm),Sm(r,ym()),Sm(r,e),r}function Sm(t,e){for(const n in e)if(n in e){const r=e[n];Hg(r)&&Hg(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function Cm(t,e){const n=ym(),r=t||n;return"function"===typeof r.fetch?r.fetch:Wg(r.fetch)?t=>dm(t,r):null!==e&&void 0!==e&&e.fetch?null===e||void 0===e?void 0:e.fetch:dm}function Em(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Pm="3.4.15";const Mm={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document},Tm=Mm.global||Mm.self||Mm.window||{},Om="object"!==typeof process||"[object process]"!==String(process)||process.browser,km="function"===typeof importScripts,Rm="undefined"!==typeof window&&"undefined"!==typeof window.orientation,Im="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);Im&&parseFloat(Im[1]);class Bm{terminate(){}}const Lm=new Map;function Dm(t){Em(t.source&&!t.url||!t.source&&t.url);let e=Lm.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Fm((e=t,"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var e}(t.url),Lm.set(t.url,e)),t.source&&(e=Fm(t.source),Lm.set(t.source,e))),Em(e),e}function Fm(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Nm(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(jm(t))r.add(t);else if(jm(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(const i in t)Nm(t[i],e,r)}else;return void 0===n?Array.from(r):[]}function jm(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const zm=()=>{};class Um{static isSupported(){return"undefined"!==typeof Worker&&Om||"undefined"!==typeof Bm&&!Om}constructor(t){ge(this,"name",void 0),ge(this,"source",void 0),ge(this,"url",void 0),ge(this,"terminated",!1),ge(this,"worker",void 0),ge(this,"onMessage",void 0),ge(this,"onError",void 0),ge(this,"_loadableURL","");const{name:e,source:n,url:r}=t;Em(n||r),this.name=e,this.source=n,this.url=r,this.onMessage=zm,this.onError=t=>console.log(t),this.worker=Om?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=zm,this.onError=zm,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||Nm(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=Dm({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new Bm(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new Bm(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class Vm{constructor(t,e){ge(this,"name",void 0),ge(this,"workerThread",void 0),ge(this,"isRunning",!0),ge(this,"result",void 0),ge(this,"_resolve",(()=>{})),ge(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){Em(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Em(this.isRunning),this.isRunning=!1,this._reject(t)}}class Gm{static isSupported(){return Um.isSupported()}constructor(t){ge(this,"name","unnamed"),ge(this,"source",void 0),ge(this,"url",void 0),ge(this,"maxConcurrency",1),ge(this,"maxMobileConcurrency",1),ge(this,"onDebug",(()=>{})),ge(this,"reuseWorkers",!0),ge(this,"props",{}),ge(this,"jobQueue",[]),ge(this,"idleQueue",[]),ge(this,"count",0),ge(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,n)=>t.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const r=new Promise((r=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new Vm(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Um({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Rm?this.maxMobileConcurrency:this.maxConcurrency}}const Wm={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Hm{static isSupported(){return Um.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Hm._workerFarm=Hm._workerFarm||new Hm({}),Hm._workerFarm.setProps(t),Hm._workerFarm}constructor(t){ge(this,"props",void 0),ge(this,"workerPools",new Map),this.props={...Wm},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:r}=t;let i=this.workerPools.get(e);return i||(i=new Gm({name:e,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ge(Hm,"_workerFarm",void 0);const Jm="latest";async function Km(t,e,n,r,i){const o=t.id,s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(i||"compression"!==t.id||(i=e.workerUrl),"test"===e._workerType&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let e=t.version;"latest"===e&&(e=Jm);const n=e?"@".concat(e):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(n,"/dist/").concat(r)}return Em(i),i}(t,n),a=Hm.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await a.startJob("process-on-worker",Xm.bind(null,i));l.postMessage("process",{input:e,options:n,context:r});const c=await l.result;return await c.result}async function Xm(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:o,input:s,options:a}=r;try{const n=await t(s,a);e.postMessage("done",{id:o,result:n})}catch(i){const t=i instanceof Error?i.message:"unknown error";e.postMessage("error",{id:o,error:t})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function qm(t,e,n){const r=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}async function Ym(t){const e=[];for await(const n of t)e.push(n);return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),i=r.reduce(((t,e)=>t+e.byteLength),0),o=new Uint8Array(i);let s=0;for(const a of r)o.set(a,s),s+=a.byteLength;return o.buffer}(...e)}const Qm=262144;const Zm=262144;const $m=1048576;function tv(t){if((e=t)&&"object"===typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"===typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"===typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function ev(t,e){return pm?async function*(t,e){const n=t.getReader();let r;try{for(;;){const t=r||n.read();null!==e&&void 0!==e&&e._streamReadAhead&&(r=n.read());const{done:i,value:o}=await t;if(i)return;yield tv(o)}}catch(i){n.releaseLock()}}(t,e):async function*(t,e){for await(const n of t)yield tv(n)}(t)}function nv(t,e){if("string"===typeof t)return function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||Qm;let r=0;const i=new TextEncoder;for(;r<t.length;){const e=Math.min(t.length-r,n),o=t.slice(r,r+e);r+=e,yield i.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=Zm}=e;let r=0;for(;r<t.byteLength;){const e=Math.min(t.byteLength-r,n),i=new ArrayBuffer(e),o=new Uint8Array(t,r,e);new Uint8Array(i).set(o),r+=e,yield i}}()}(t,e);if(qg(t))return async function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||$m;let r=0;for(;r<t.size;){const e=r+n,i=await t.slice(r,e).arrayBuffer();r=e,yield i}}(t,e);if(Qg(t))return ev(t,e);if(Xg(t)){return ev(t.body,e)}throw new Error("makeIterator")}const rv="Cannot convert supplied data type";async function iv(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"===typeof t||r)return function(t,e,n){if(e.text&&"string"===typeof t)return t;if(Yg(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const r=t.byteLength||t.length;return 0===t.byteOffset&&r===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw new Error(rv)}(t,e);if(qg(t)&&(t=await um(t)),Xg(t)){const n=t;return await async function(t){if(!t.ok){const e=await async function(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(n){}return e}(t);throw new Error(e)}}(n),e.binary?await n.arrayBuffer():await n.text()}if(Qg(t)&&(t=nv(t,n)),Jg(t)||Kg(t))return Ym(t);throw new Error(rv)}function ov(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function sv(t,e,n){if(n)return n;const r={fetch:Cm(e,t),...t};if(r.url){const t=am(r.url);r.baseUrl=t,r.queryString=function(t){const e=t.match(sm);return e&&e[0]}(r.url),r.filename=ov(t),r.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(r.loaders)||(r.loaders=null),r}const av=new Mg({id:"loaders.gl"}),lv=()=>{const t=bm();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};const cv=/\.([^.]+)$/;function uv(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!dv(t))return null;if(e&&!Array.isArray(e))return tm(e);let i=[];e&&(i=i.concat(e)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders||i.push(...lv()),function(t){for(const e of t)tm(e)}(i);const o=function(t,e,n,r){const i=lm(t),o=cm(t),s=am(i)||(null===r||void 0===r?void 0:r.url);let a=null,l="";null!==n&&void 0!==n&&n.mimeType&&(a=fv(e,null===n||void 0===n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType));var c;a=a||function(t,e){const n=e&&cv.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,r):null}(e,s),l=l||(a?"matched url ".concat(s):""),a=a||fv(e,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||function(t,e){if(!e)return null;for(const n of t)if("string"===typeof e){if(pv(e,n))return n}else if(ArrayBuffer.isView(e)){if(gv(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer){if(gv(e,0,n))return n}return null}(e,t),l=l||(a?"matched initial data ".concat(mv(t)):""),a=a||fv(e,null===n||void 0===n?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l&&av.log(1,"selectLoader selected ".concat(null===(c=a)||void 0===c?void 0:c.name,": ").concat(l,"."));return a}(t,i,n,r);if(!o&&(null===n||void 0===n||!n.nothrow))throw new Error(hv(t));return o}function dv(t){return!(t instanceof Response&&204===t.status)}function hv(t){const e=lm(t),n=cm(t);let r="No valid loader found (";r+=e?"".concat(ov(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?mv(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function fv(t,e){for(const n of t){if(n.mimeTypes&&n.mimeTypes.includes(e))return n;if(e==="application/x.".concat(n.id))return n}return null}function pv(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function gv(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((r=>function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":return r===vv(t,e,r.length);default:return!1}}(t,e,n,r)))}function mv(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return vv(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return vv(t,0,e)}return""}function vv(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}async function bv(t,e,n,r){Em(!r||"object"===typeof r),!e||Array.isArray(e)||$g(e)||(r=void 0,n=e,e=void 0),n=n||{};const i=lm(t=await t),o=function(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:null}(e,r),s=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!dv(t))return null;let i=uv(t,e,{...n,nothrow:!0},r);if(i)return i;if(qg(t)&&(i=uv(t=await t.slice(0,10).arrayBuffer(),e,n,r)),!i&&(null===n||void 0===n||!n.nothrow))throw new Error(hv(t));return i}(t,o,n);return s?(r=sv({url:i,parse:bv,loaders:o},n=xm(n,s,o,i),r||null),await async function(t,e,n,r){if(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pm;Em(t,"no worker provided");const n=t.version}(t),Xg(e)){const t=e,{ok:n,redirected:i,status:o,statusText:s,type:a,url:l}=t,c=Object.fromEntries(t.headers.entries());r.response={headers:c,ok:n,redirected:i,status:o,statusText:s,type:a,url:l}}if(e=await iv(e,t,n),t.parseTextSync&&"string"===typeof e)return n.dataType="text",t.parseTextSync(e,n,r,t);if(function(t,e){return!!Hm.isSupported()&&!!(Om||null!==e&&void 0!==e&&e._nodeWorkers)&&t.worker&&(null===e||void 0===e?void 0:e.worker)}(t,n))return await Km(t,e,n,r,bv);if(t.parseText&&"string"===typeof e)return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Em(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(s,t,n,r)):null}async function yv(t,e,n,r){Array.isArray(e)||$g(e)||(void 0,n=e,e=void 0);const i=Cm(n);let o=t;return"string"===typeof t&&(o=await i(t)),qg(t)&&(o=await i(t)),await bv(o,e,n)}class xv{constructor(t,e,n){ge(this,"id",void 0),ge(this,"context",void 0),ge(this,"isLoaded",void 0),ge(this,"persistent",void 0),ge(this,"_loadCount",0),ge(this,"_subscribers",new Set),ge(this,"_data",void 0),ge(this,"_loader",void 0),ge(this,"_error",void 0),ge(this,"_content",void 0),this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const n=++this._loadCount;let r=t;"string"===typeof t&&(r=yv(t)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const i of this._subscribers)i.onChange(this.getData())}}class Av{constructor(t){let{gl:e,protocol:n}=t;ge(this,"protocol",void 0),ge(this,"_context",void 0),ge(this,"_resources",void 0),ge(this,"_consumers",void 0),ge(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add(t){let{resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}=t,o=this._resources[e];o?o.setData(n,r):(o=new xv(e,n,this._context),this._resources[e]=o),o.persistent=i}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe(t){let{consumerId:e}=t;const n=this._consumers[e];if(n){for(const t in n){const e=n[t],r=this._resources[e.resourceId];r&&r.unsubscribe(e)}delete this._consumers[e],this.prune()}}subscribe(t){let{resourceId:e,onChange:n,consumerId:r,requestId:i="default"}=t;const{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,n,r){const i=this._consumers,o=i[t]=i[t]||{},s=o[e]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(o[e]=s,s.onChange=r,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}const _v=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ge(this,"_pool",[]),ge(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,n){let{size:r=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}=n;const c=i||t&&t.constructor||Float32Array,u=e*r+o;if(ArrayBuffer.isView(t)){if(u<=t.length)return t;if(u*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new c(t.buffer,0,u)}let d=1/0;l&&(d=l*r+o);const h=this._allocate(c,u,a,d);return t&&s?h.set(t):a||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,e,n,r){let i=Math.max(Math.ceil(e*this.opts.overAlloc),1);i>r&&(i=r);const o=this._pool,s=t.BYTES_PER_ELEMENT*i,a=o.findIndex((t=>t.byteLength>=s));if(a>=0){const e=new t(o.splice(a,1)[0],0,i);return n&&e.fill(0),e}return new t(i)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:n}=t,{byteLength:r}=n,i=e.findIndex((t=>t.byteLength>=r));i<0?e.push(n):(i>0||e.length<this.opts.poolSize)&&e.splice(i,0,n),e.length>this.opts.poolSize&&e.shift()}},wv=(Math.PI,Math.PI,{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0});function Sv(t){let{precision:e=wv.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=function(t){return Math.round(t/wv.EPSILON)*wv.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Cv(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ev(t,e,n){return Tv(t,(t=>Math.max(e,Math.min(n,t))))}function Pv(t,e,n){return Cv(t)?t.map(((t,r)=>Pv(t,e[r],n))):n*e+(1-n)*t}function Mv(t,e,n){const r=wv.EPSILON;n&&(wv.EPSILON=n);try{if(t===e)return!0;if(Cv(t)&&Cv(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Mv(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"===typeof t&&"number"===typeof e&&Math.abs(t-e)<=wv.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{wv.EPSILON=r}}function Tv(t,e,n){if(Cv(t)){const r=t;n=n||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}class Ov extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:Cv(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(wv)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Sv(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!Mv(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]+=r[t];return this.check()}subtract(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]-=r[t];return this.check()}scale(t){if("number"===typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(wv.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}function kv(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Rv(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(wv.debug&&!function(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function Iv(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class Bv extends Ov{get x(){return this[0]}set x(t){this[0]=kv(t)}get y(){return this[1]}set y(t){this[1]=kv(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-t[n];e+=r*r}return kv(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return kv(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=r[t];return this.check()}divide(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=r[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return Iv(t>=0&&t<this.ELEMENTS,"index is out of range"),kv(this[t])}setComponent(t,e){return Iv(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var Lv=1e-6,Dv="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Fv(){var t=new Dv(3);return Dv!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Nv(t,e,n){var r=new Dv(3);return r[0]=t,r[1]=e,r[2]=n,r}function jv(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zv(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],l=n[2];return t[0]=i*l-o*a,t[1]=o*s-r*l,t[2]=r*a-i*s,t}function Uv(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function Vv(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function Gv(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],l=e[1],c=e[2],u=i*c-o*l,d=o*a-r*c,h=r*l-i*a,f=i*h-o*d,p=o*u-r*h,g=r*d-i*u,m=2*s;return u*=m,d*=m,h*=m,f*=2,p*=2,g*=2,t[0]=a+u+f,t[1]=l+d+p,t[2]=c+h+g,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Wv=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},Hv=function(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)},Jv=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r};!function(){var t=Fv()}();function Kv(t,e,n){const r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/s,t[1]=(n[1]*r+n[5]*i+n[9]*o)/s,t[2]=(n[2]*r+n[6]*i+n[10]*o)/s,t}function Xv(t,e,n){const r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*o,t[1]=n[1]*r+n[4]*i+n[7]*o,t[2]=n[2]*r+n[5]*i+n[8]*o,t[3]=e[3],t}const qv=[0,0,0];let Yv;class Qv extends Bv{static get ZERO(){return Yv||(Yv=new Qv(0,0,0),Object.freeze(Yv)),Yv}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&Cv(t)?this.copy(t):(wv.debug&&(kv(t),kv(e),kv(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return wv.debug&&(kv(t.x),kv(t.y),kv(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=kv(t)}angle(t){return function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+s*s+a*a),c=l&&jv(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}(this,t)}cross(t){return zv(this,this,t),this.check()}rotateX(t){let{radians:e,origin:n=qv}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY(t){let{radians:e,origin:n=qv}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ(t){let{radians:e,origin:n=qv}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return Uv(this,this,t),this.check()}transformAsVector(t){return Kv(this,this,t),this.check()}transformByMatrix3(t){return Vv(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return Gv(this,this,t),this.check()}}const Zv=new Qv;function $v(t,e,n,r){Zv.set(t,e,n);const i=Zv.len();return{distance:r/i,normal:new Qv(-t/i,-e/i,-n/i)}}function tb(t){return t-Math.fround(t)}let eb;function nb(t,e){const{size:n=1,startIndex:r=0}=e,i=void 0!==e.endIndex?e.endIndex:t.length,o=(i-r)/n;eb=_v.allocate(eb,o,{type:Float32Array,size:2*n});let s=r,a=0;for(;s<i;){for(let e=0;e<n;e++){const r=t[s++];eb[a+e]=r,eb[a+e+n]=tb(r)}a+=2*n}return eb.subarray(0,o*n*2)}function rb(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}class ib extends Ov{toString(){let t="[";if(wv.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=kv(n),this}getColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=t*this.RANK;for(let r=0;r<this.RANK;++r)e[r]=this[n+r];return e}setColumn(t,e){const n=t*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}function ob(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],b=n*a-r*s,y=n*l-i*s,x=n*c-o*s,A=r*l-i*a,_=r*c-o*a,w=i*c-o*l,S=u*g-d*p,C=u*m-h*p,E=u*v-f*p,P=d*m-h*g,M=d*v-f*g,T=h*v-f*m,O=b*T-y*M+x*P+A*E-_*C+w*S;return O?(O=1/O,t[0]=(a*T-l*M+c*P)*O,t[1]=(i*M-r*T-o*P)*O,t[2]=(g*w-m*_+v*A)*O,t[3]=(h*_-d*w-f*A)*O,t[4]=(l*E-s*T-c*C)*O,t[5]=(n*T-i*E+o*C)*O,t[6]=(m*x-p*w-v*y)*O,t[7]=(u*w-h*x+f*y)*O,t[8]=(s*M-a*E+c*S)*O,t[9]=(r*E-n*M-o*S)*O,t[10]=(p*_-g*x+v*b)*O,t[11]=(d*x-u*_-f*b)*O,t[12]=(a*C-s*P-l*S)*O,t[13]=(n*P-r*C+i*S)*O,t[14]=(g*y-p*A-m*b)*O,t[15]=(u*A-d*y+h*b)*O,t):null}function sb(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],g=e[12],m=e[13],v=e[14],b=e[15],y=n[0],x=n[1],A=n[2],_=n[3];return t[0]=y*r+x*a+A*d+_*g,t[1]=y*i+x*l+A*h+_*m,t[2]=y*o+x*c+A*f+_*v,t[3]=y*s+x*u+A*p+_*b,y=n[4],x=n[5],A=n[6],_=n[7],t[4]=y*r+x*a+A*d+_*g,t[5]=y*i+x*l+A*h+_*m,t[6]=y*o+x*c+A*f+_*v,t[7]=y*s+x*u+A*p+_*b,y=n[8],x=n[9],A=n[10],_=n[11],t[8]=y*r+x*a+A*d+_*g,t[9]=y*i+x*l+A*h+_*m,t[10]=y*o+x*c+A*f+_*v,t[11]=y*s+x*u+A*p+_*b,y=n[12],x=n[13],A=n[14],_=n[15],t[12]=y*r+x*a+A*d+_*g,t[13]=y*i+x*l+A*h+_*m,t[14]=y*o+x*c+A*f+_*v,t[15]=y*s+x*u+A*p+_*b,t}function ab(t,e,n){var r,i,o,s,a,l,c,u,d,h,f,p,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=r*g+a*m+d*v+e[12],t[13]=i*g+l*m+h*v+e[13],t[14]=o*g+c*m+f*v+e[14],t[15]=s*g+u*m+p*v+e[15]),t}function lb(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function cb(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=s*i+u*r,t[6]=a*i+d*r,t[7]=l*i+h*r,t[8]=c*i-o*r,t[9]=u*i-s*r,t[10]=d*i-a*r,t[11]=h*i-l*r,t}function ub(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=s*i+u*r,t[2]=a*i+d*r,t[3]=l*i+h*r,t[4]=c*i-o*r,t[5]=u*i-s*r,t[6]=d*i-a*r,t[7]=h*i-l*r,t}function db(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],s=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(l,c,u),t}var hb=function(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t};var fb=function(t,e,n,r,i,o,s){var a=1/(e-n),l=1/(r-i),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(s+o)*c,t[15]=1,t};function pb(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function gb(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function mb(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}var vb=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};!function(){var t=function(){var t=new Dv(2);return Dv!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function bb(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function yb(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function xb(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function Ab(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}var _b;!function(){var t=function(){var t=new Dv(4);return Dv!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(_b||(_b={}));const wb=45*Math.PI/180,Sb=1,Cb=.1,Eb=500,Pb=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Mb extends ib{static get IDENTITY(){return function(){Ob||(Ob=new Mb,Object.freeze(Ob));return Ob}()}static get ZERO(){return function(){Tb||(Tb=new Mb([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Tb));return Tb}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return _b}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=c,this[10]=u,this[11]=d,this[12]=h,this[13]=f,this[14]=p,this[15]=g,this.check()}setRowMajor(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,g){return this[0]=t,this[1]=i,this[2]=l,this[3]=h,this[4]=e,this[5]=o,this[6]=c,this[7]=f,this[8]=n,this[9]=s,this[10]=u,this[11]=p,this[12]=r,this[13]=a,this[14]=d,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Pb)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,d=r*a,h=i*s,f=i*a,p=i*l,g=o*s,m=o*a,v=o*l;t[0]=1-d-p,t[1]=u+v,t[2]=h-m,t[3]=0,t[4]=u-v,t[5]=1-c-p,t[6]=f+g,t[7]=0,t[8]=h+m,t[9]=f-g,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:n,bottom:r,top:i,near:o=Cb,far:s=Eb}=t;return s===1/0?function(t,e,n,r,i,o){const s=2*o/(n-e),a=2*o/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,d=-1,h=-2*o;t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=d,t[12]=0,t[13]=0,t[14]=h,t[15]=0}(this,e,n,r,i,o):function(t,e,n,r,i,o,s){var a=1/(n-e),l=1/(i-r),c=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0}(this,e,n,r,i,o,s),this.check()}lookAt(t){const{eye:e,center:n=[0,0,0],up:r=[0,1,0]}=t;return function(t,e,n,r){var i,o,s,a,l,c,u,d,h,f,p=e[0],g=e[1],m=e[2],v=r[0],b=r[1],y=r[2],x=n[0],A=n[1],_=n[2];Math.abs(p-x)<Lv&&Math.abs(g-A)<Lv&&Math.abs(m-_)<Lv?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=p-x,d=g-A,h=m-_,i=b*(h*=f=1/Math.hypot(u,d,h))-y*(d*=f),o=y*(u*=f)-v*h,s=v*d-b*u,(f=Math.hypot(i,o,s))?(i*=f=1/f,o*=f,s*=f):(i=0,o=0,s=0),a=d*s-h*o,l=h*i-u*s,c=u*o-d*i,(f=Math.hypot(a,l,c))?(a*=f=1/f,l*=f,c*=f):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=s,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*p+o*g+s*m),t[13]=-(a*p+l*g+c*m),t[14]=-(u*p+d*g+h*m),t[15]=1)}(this,e,n,r),this.check()}ortho(t){const{left:e,right:n,bottom:r,top:i,near:o=Cb,far:s=Eb}=t;return fb(this,e,n,r,i,o,s),this.check()}orthographic(t){const{fovy:e=wb,aspect:n=Sb,focalDistance:r=1,near:i=Cb,far:o=Eb}=t;kb(e);const s=e/2,a=r*Math.tan(s),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:o})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=t;return kb(e),hb(this,e,n,r,i),this.check()}determinant(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*s-n*o)*(d*m-h*g)-(e*a-r*o)*(u*m-h*p)+(e*l-i*o)*(u*g-d*p)+(n*a-r*s)*(c*m-h*f)-(n*l-i*s)*(c*g-d*f)+(r*l-i*a)*(c*p-u*f)}(this)}getScale(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return ob(this,this),this.check()}multiplyLeft(t){return sb(this,t,this),this.check()}multiplyRight(t){return sb(this,this,t),this.check()}rotateX(t){return cb(this,this,t),this.check()}rotateY(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=s*i-u*r,t[2]=a*i-d*r,t[3]=l*i-h*r,t[8]=o*r+c*i,t[9]=s*r+u*i,t[10]=a*r+d*i,t[11]=l*r+h*i}(this,this,t),this.check()}rotateZ(t){return ub(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,n,r){var i,o,s,a,l,c,u,d,h,f,p,g,m,v,b,y,x,A,_,w,S,C,E,P,M=r[0],T=r[1],O=r[2],k=Math.hypot(M,T,O);k<Lv||(M*=k=1/k,T*=k,O*=k,i=Math.sin(n),s=1-(o=Math.cos(n)),a=e[0],l=e[1],c=e[2],u=e[3],d=e[4],h=e[5],f=e[6],p=e[7],g=e[8],m=e[9],v=e[10],b=e[11],y=M*M*s+o,x=T*M*s+O*i,A=O*M*s-T*i,_=M*T*s-O*i,w=T*T*s+o,S=O*T*s+M*i,C=M*O*s+T*i,E=T*O*s-M*i,P=O*O*s+o,t[0]=a*y+d*x+g*A,t[1]=l*y+h*x+m*A,t[2]=c*y+f*x+v*A,t[3]=u*y+p*x+b*A,t[4]=a*_+d*w+g*S,t[5]=l*_+h*w+m*S,t[6]=c*_+f*w+v*S,t[7]=u*_+p*w+b*S,t[8]=a*C+d*E+g*P,t[9]=l*C+h*E+m*P,t[10]=c*C+f*E+v*P,t[11]=u*C+p*E+b*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return lb(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return ab(this,this,t),this.check()}transform(t,e){return 4===t.length?(Rv(e=Ab(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;let r;switch(n){case 2:r=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(e||[-0,-0],t,this);break;case 3:r=Uv(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Rv(r,t.length),r}transformAsVector(t,e){let n;switch(t.length){case 2:n=function(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}(e||[-0,-0],t,this);break;case 3:n=Kv(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Rv(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}let Tb,Ob;function kb(t){if(t>2*Math.PI)throw Error("expected radians")}function Rb(t,e){const n=Ab([],e,t);return bb(n,n,1/n[3]),n}function Ib(t,e){const n=t%e;return n<0?e+n:n}function Bb(t,e,n){return n*e+(1-n)*t}function Lb(t,e,n){return t<e?e:t>n?n:t}const Db=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function Fb(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Nb=Math.PI,jb=Nb/4,zb=Nb/180,Ub=180/Nb,Vb=512,Gb=4003e4,Wb=85.051129,Hb=1.5;function Jb(t){return Math.pow(2,t)}function Kb(t){return Db(t)}function Xb(t){const[e,n]=t;Fb(Number.isFinite(e)),Fb(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*zb;return[Vb*(e*zb+Nb)/(2*Nb),Vb*(Nb+Math.log(Math.tan(jb+.5*r)))/(2*Nb)]}function qb(t){const[e,n]=t,r=e/Vb*(2*Nb)-Nb,i=2*(Math.atan(Math.exp(n/Vb*(2*Nb)-Nb))-jb);return[r*Ub,i*Ub]}function Yb(t){const e=Math.cos(t*zb);return Vb/Gb/e}function Qb(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Fb(Number.isFinite(e)&&Number.isFinite(n));const i=Vb,o=Math.cos(e*zb),s=i/360,a=s/o,l=i/Gb/o,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(r){const t=zb*Math.tan(e*zb)/o,n=s*t/2,r=i/Gb*t,u=r/a*l;c.unitsPerDegree2=[0,n,r],c.unitsPerMeter2=[u,0,u]}return c}function Zb(t,e){const[n,r,i]=t,[o,s,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=Qb({longitude:n,latitude:r,highPrecision:!0}),u=Xb(t);u[0]+=o*(l[0]+c[0]*s),u[1]+=s*(l[1]+c[1]*s);const d=qb(u),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[d[0],d[1],h]:d}function $b(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=ty(Hb)}=t;void 0!==r&&(u=ty(r));const d=u*zb,h=i*zb,f=ey(u);let p=f;s&&(p+=s[2]*a/Math.cos(h)/n);const g=d*(.5+(o?o[1]:0)/n),m=Math.sin(g)*p/Math.sin(Lb(Math.PI/2-h-g,.01,Math.PI-.01)),v=Math.sin(h)*m+p,b=10*p;return{fov:d,aspect:e/n,focalDistance:f,near:l,far:Math.min(v*c,b)}}function ty(t){return 2*Math.atan(.5/t)*Ub}function ey(t){return.5/Math.tan(.5*t*zb)}function ny(t,e){const[n,r,i=0]=t;return Fb(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Rb(e,[n,r,i,1])}function ry(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[r,i,o]=t;if(Fb(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){return Rb(e,[r,i,o,1])}const s=Rb(e,[r,i,0,1]),a=Rb(e,[r,i,1,1]),l=s[2],c=a[2];return mb([],s,a,l===c?0:((n||0)-l)/(c-l))}function iy(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,l],[c,u]]=r,d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof t)return{top:t,bottom:t,left:t,right:t};return Fb(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),h=Xb([a,Lb(u,-85.051129,Wb)]),f=Xb([c,Lb(l,-85.051129,Wb)]),p=[Math.max(Math.abs(f[0]-h[0]),i),Math.max(Math.abs(f[1]-h[1]),i)],g=[e-d.left-d.right-2*Math.abs(s[0]),n-d.top-d.bottom-2*Math.abs(s[1])];Fb(g[0]>0&&g[1]>0);const m=g[0]/p[0],v=g[1]/p[1],b=(d.right-d.left)/2/m,y=(d.top-d.bottom)/2/v,x=qb([(f[0]+h[0])/2+b,(f[1]+h[1])/2+y]),A=Math.min(o,Db(Math.abs(Math.min(m,v))));return Fb(Number.isFinite(A)),{longitude:x[0],latitude:x[1],zoom:A}}const oy=Math.PI/180;function sy(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Rb(r,[e,0,1,1]),o=Rb(r,[e,t.height,1,1]),s=qb(mb([],i,o,(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return s.push(n),s}const ay=.01,ly=["longitude","latitude","zoom"],cy={curve:1.414,speed:1.2};function uy(t,e,n){const r=(n=Object.assign({},cy,n)).curve,i=t.zoom,o=[t.longitude,t.latitude],s=Jb(i),a=e.zoom,l=[e.longitude,e.latitude],c=Jb(a-i),u=Xb(o),d=Xb(l),h=vb([],d,u),f=Math.max(t.width,t.height),p=f/c,g=gb(h)*s,m=Math.max(g,ay),v=r*r,b=(p*p-f*f+v*v*m*m)/(2*f*v*m),y=(p*p-f*f-v*v*m*m)/(2*p*v*m),x=Math.log(Math.sqrt(b*b+1)-b),A=Math.log(Math.sqrt(y*y+1)-y);return{startZoom:i,startCenterXY:u,uDelta:h,w0:f,u1:g,S:(A-x)/r,rho:r,rho2:v,r0:x,r1:A}}const dy={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(dy,"IDENTITY",{get:()=>(Rg.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const hy={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},fy={common:0,meters:1,pixels:2},py={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},gy=Math.PI/180,my=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],vy=[0,0,0],by={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class yy{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ge(this,"id",void 0),ge(this,"x",void 0),ge(this,"y",void 0),ge(this,"width",void 0),ge(this,"height",void 0),ge(this,"padding",void 0),ge(this,"isGeospatial",void 0),ge(this,"zoom",void 0),ge(this,"focalDistance",void 0),ge(this,"position",void 0),ge(this,"modelMatrix",void 0),ge(this,"distanceScales",void 0),ge(this,"scale",void 0),ge(this,"center",void 0),ge(this,"cameraPosition",void 0),ge(this,"projectionMatrix",void 0),ge(this,"viewMatrix",void 0),ge(this,"viewMatrixUncentered",void 0),ge(this,"viewMatrixInverse",void 0),ge(this,"viewProjectionMatrix",void 0),ge(this,"pixelProjectionMatrix",void 0),ge(this,"pixelUnprojectionMatrix",void 0),ge(this,"resolution",void 0),ge(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||by,this.focalDistance=t.focalDistance||1,this.position=t.position||vy,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?hy.WEB_MERCATOR:hy.WEB_MERCATOR_AUTO_OFFSET:hy.IDENTITY}equals(t){return t instanceof yy&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Mv(t.projectionMatrix,this.projectionMatrix)&&Mv(t.viewMatrix,this.viewMatrix))}project(t){let{topLeft:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ny(this.projectPosition(t),this.pixelProjectionMatrix),[r,i]=n,o=e?i:this.height-i;return 2===t.length?[r,o]:[r,o,n[2]]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=t,s=e?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],l=ry([r,s,o],this.pixelUnprojectionMatrix,a),[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=Xb(t);return e[1]=Ev(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?qb(t):t}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,0],t),n=this.unproject([this.width,0],t),r=this.unproject([0,this.height],t),i=this.unproject([this.width,this.height],t);return[Math.min(e[0],n[0],r[0],i[0]),Math.min(e[1],n[1],r[1],i[1]),Math.max(e[0],n[0],r[0],i[0]),Math.max(e[1],n[1],r[1],i[1])]}getDistanceScales(t){return t?Qb({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel(t){let{x:e,y:n,width:r=1,height:i=1}=t;return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:$v((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:$v(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:$v(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:$v(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:$v(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:$v(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=function(t){const{latitude:e}=t;Fb(Number.isFinite(e));const n=Math.cos(e*zb);return Kb(Gb*n)-9}({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||Qb({latitude:n,longitude:e}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:o}=t;let s=vy;if(i&&(s=o?new Mb(o).transformAsVector(i,[]):i),this.isGeospatial){const t=this.projectPosition([e,n,0]);this.center=new Qv(s).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:e=my,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:o=75,near:s=.1,far:a=1e3,padding:l=null,focalDistance:c=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new Mb).multiplyRight(e).translate(new Qv(this.center).negate()),this.projectionMatrix=n||function(t){let{width:e,height:n,orthographic:r,fovyRadians:i,focalDistance:o,padding:s,near:a,far:l}=t;const c=e/n,u=r?(new Mb).orthographic({fovy:i,aspect:c,focalDistance:o,near:a,far:l}):(new Mb).perspective({fovy:i,aspect:c,near:a,far:l});if(s){const{left:t=0,right:r=0,top:i=0,bottom:o=0}=s,a=Ev((t+e-r)/2,0,e)-e/2,l=Ev((i+n-o)/2,0,n)-n/2;u[8]-=2*a/e,u[9]+=2*l/n}return u}({width:this.width,height:this.height,orthographic:r,fovyRadians:i||o*gy,focalDistance:c,padding:l,near:s,far:a});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var d;sb(u,u,this.projectionMatrix),sb(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=ob([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(d=this.viewMatrixInverse)[12],d[13],d[14]];const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];lb(h,h,[this.width/2,-this.height/2,1]),ab(h,h,[1,-1,0]),sb(f,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=ob([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Rg.warn("Pixel project matrix not invertible")()}}ge(yy,"displayName","Viewport");const xy="vs",Ay="fs";function _y(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const wy={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function Sy(t){let e=Cy(t);return"object"===e?t?"type"in t?Object.assign({},t,wy[t.type]):"value"in t?(e=Cy(t.value),Object.assign({type:e},t,wy[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},wy[e])}function Cy(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class Ey{constructor(t){let{name:e,vs:n,fs:r,dependencies:i=[],uniforms:o,getUniforms:s,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:d}=t;_y("string"===typeof e),this.name=e,this.vs=n||u,this.fs=r||d,this.getModuleUniforms=s,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];"string"===typeof r&&(r={order:0,injection:r}),e[n.slice(0,2)][n]=r}return e}(c),o&&(this.uniforms=function(t){const e={};for(const n in t){const r=Sy(t[n]);e[n]=r}return e}(o))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:_y(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},n=this.uniforms;for(const r in n){const i=n[r];r in t&&!i.private?(i.validate&&_y(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}function Py(t){return My(Oy(t))}function My(t){const e={},n={};return Ty({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>e[t]))}function Ty(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)r[o.name]=o,(void 0===i[o.name]||i[o.name]<n)&&(i[o.name]=n);for(const o of e)o.dependencies&&Ty({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function Oy(t,e){return t.map((t=>(t instanceof Ey||(_y("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),_y(t.name,"shader module has no name"),(t=new Ey(t)).dependencies=Oy(t.dependencies)),t)))}const ky=7936,Ry=7937,Iy=7938,By=35724,Ly={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Dy={};Object.keys(Ly).forEach((t=>{Dy[t]=t}));const Fy={};function Ny(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Ly[e];if(_y(r,e),!function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!==typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(e in Fy)return Fy[e];const i=r[0],o=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),Fy[e]=l,l}function jy(t,e){const n=Ly[e];_y(n,e);const r=function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"===typeof r?Boolean(t.getExtension(r)):r;return _y(!1===i||!0===i),i}function zy(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>jy(t,e)))}function Uy(t){const e=function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||ky),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Ry);return{gpuVendor:function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(Iy),shadingLanguageVersion:t.getParameter(By)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}const Vy={[xy]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[Ay]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},Gy="__LUMA_INJECT_DECLARATIONS__",Wy=/void\s+main\s*\([^)]*\)\s*\{\n?/,Hy=/}\n?[^{}]*$/,Jy=[];function Ky(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e===xy;for(const o in n){const e=n[o];e.sort(((t,e)=>t.order-e.order)),Jy.length=e.length;for(let t=0,n=e.length;t<n;++t)Jy[t]=e[t].injection;const r="".concat(Jy.join("\n"),"\n");switch(o){case"vs:#decl":i&&(t=t.replace(Gy,r));break;case"vs:#main-start":i&&(t=t.replace(Wy,(t=>t+r)));break;case"vs:#main-end":i&&(t=t.replace(Hy,(t=>r+t)));break;case"fs:#decl":i||(t=t.replace(Gy,r));break;case"fs:#main-start":i||(t=t.replace(Wy,(t=>t+r)));break;case"fs:#main-end":i||(t=t.replace(Hy,(t=>r+t)));break;default:t=t.replace(o,(t=>t+r))}}return t=t.replace(Gy,""),r&&(t=t.replace(/\}\s*$/,(t=>t+Vy[e]))),t}function Xy(t){const e={};return _y(Array.isArray(t)&&t.length>1),t.forEach((t=>{for(const n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}function qy(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const Yy=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Qy=[...Yy,[qy("attribute"),"in $1"],[qy("varying"),"out $1"]],Zy=[...Yy,[qy("varying"),"in $1"]],$y=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],tx=[...$y,[qy("in"),"attribute $1"],[qy("out"),"varying $1"]],ex=[...$y,[qy("in"),"varying $1"]],nx="gl_FragColor",rx=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,ix=/void\s+main\s*\([^)]*\)\s*\{\n?/;function ox(t,e,n){switch(e){case 300:return n?sx(t,Qy):function(t){t=sx(t,Zy);const e=t.match(rx);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(nx,"\\b"),"g"),n)}else{const e="fragmentColor";t=t.replace(ix,(t=>"out vec4 ".concat(e,";\n").concat(t))).replace(new RegExp("\\b".concat(nx,"\\b"),"g"),e)}return t}(t);case 100:return n?sx(t,tx):function(t){t=sx(t,ex);const e=t.match(rx);if(e){const n=e[1];t=t.replace(rx,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),nx)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function sx(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}const ax="\n\n".concat(Gy,"\n\n"),lx={[xy]:"vertex",[Ay]:"fragment"},cx="precision highp float;\n\n";function ux(t,e){let{id:n,source:r,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:d}=e;_y("string"===typeof r,"shader source must be a string");const h=i===xy,f=r.split("\n");let p=100,g="",m=r;0===f[0].indexOf("#version ")?(p=300,g=f[0],m=f.slice(1).join("\n")):g="#version ".concat(p);const v={};o.forEach((t=>{Object.assign(v,t.getDefines())})),Object.assign(v,s);let b=u?"".concat(g,"\n").concat(function(t){let{id:e,source:n,type:r}=t;const i=e&&"string"===typeof e&&-1===n.indexOf("SHADER_NAME");return i?"\n#define SHADER_NAME ".concat(e,"_").concat(lx[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(lx[e].toUpperCase(),"\n")}({type:i}),"\n").concat(Uy(t),"\n").concat(function(t,e,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return zy(t,Dy.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),zy(t,Dy.GLSL_DERIVATIVES)&&Ny(t,Dy.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),zy(t,Dy.GLSL_FRAG_DATA)&&Ny(t,Dy.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),zy(t,Dy.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(v),"\n").concat(h?"":cx,"\n"):"".concat(g,"\n");const y=function(t){const e={vs:{},fs:{}};return t.forEach((t=>{let n;"string"!==typeof t?(n=t,t=n.hook):n={},t=t.trim();const[r,i]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(n,{signature:i})})),e}(a),x={},A={},_={};for(const w in l){const t="string"===typeof l[w]?{injection:l[w],order:0}:l[w],e=w.match(/^(v|f)s:(#)?([\w-]+)$/);if(e){const n=e[2],r=e[3];n?"decl"===r?A[w]=[t]:_[w]=[t]:x[w]=[t]}else _[w]=[t]}for(const w of o){d&&w.checkDeprecations(m,d);b+=w.getModuleSource(i,p);const t=w.injections[i];for(const e in t){const n=e.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?A:_;r[e]=r[e]||[],r[e].push(t[e])}else x[e]=x[e]||[],x[e].push(t[e])}}return b+=ax,b=Ky(b,i,A),b+=function(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){const t=e[r];t.sort(((t,e)=>t.order-e.order));for(const e of t)n+="  ".concat(e.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(y[i],x),b+=m,b=Ky(b,i,_),b=ox(b,c?100:p,h),b}function dx(t){return function(e){const n={};for(const r of t){const t=r.getUniforms(e,n);Object.assign(n,t)}return n}}const hx=new Mg({id:"luma.gl"});function fx(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const px="Invalid WebGLRenderingContext",gx="Requires WebGL2";function mx(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function vx(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function bx(t){return fx(mx(t),px),t}function yx(t){return fx(vx(t),gx),t}const xx={};function Ax(t,e){var n;xx[t]=!0,void 0!==e&&(n=e,globalThis.console&&globalThis.console.error&&globalThis.console.error(n))}const _x=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const e=new t.VertexAttrib(n);this.attribs[r]=e}this.maxAttrib=0};(_x.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const wx=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let n;do{n=e.apply(t),0!==n&&(xx[n]=!0)}while(0!==n);for(n in xx)if(xx[n])return delete xx[n],parseInt(n,10);return 0}}(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);return r.attribs[t].enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);return r.attribs[t].enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){const i=e.currentVertexArrayObject.attribs[t];switch(r){case 34975:return i.buffer;case 34338:return i.enabled;case 34339:return i.size;case 34340:return i.stride;case 34341:return i.type;case 34922:return i.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,s,a){const l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);const c=l.attribs[t];return c.buffer=e.currentArrayBuffer,c.size=r,c.type=i,c.normalized=o,c.stride=s,c.offset=a,c.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(()=>{var t;t="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(t),e.reset_()}),!0),this.reset_()};wx.prototype.VERTEX_ARRAY_BINDING_OES=34229,wx.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new _x(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},wx.prototype.createVertexArrayOES=function(){const t=new _x(this);return this.vertexArrayObjects.push(t),t},wx.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},wx.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof _x&&t.hasBeenBound&&t.ext===this)},wx.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void Ax(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(r===i)return;r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const s=Math.max(r?r.maxAttrib:0,i.maxAttrib);for(let a=0;a<=s;a++){const t=i.attribs[a],s=r?r.attribs[a]:null;if(r&&t.enabled===s.enabled||(t.enabled?n.enableVertexAttribArray.call(e,a):n.disableVertexAttribArray.call(e,a)),t.enabled){let i=!1;r&&t.buffer===s.buffer||(o!==t.buffer&&(n.bindBuffer.call(e,34962,t.buffer),o=t.buffer),i=!0),(i||t.cached!==s.cached)&&n.vertexAttribPointer.call(e,a,t.size,t.type,t.normalized,t.stride,t.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)};const Sx="OES_element_index",Cx="WEBGL_draw_buffers",Ex="WEBGL_debug_renderer_info",Px=35723,Mx=36795,Tx=34047,Ox=37445,kx=37446,Rx=t=>vx(t)?void 0:0,Ix={3074:t=>vx(t)?void 0:36064,[Px]:t=>vx(t)?void 0:4352,35977:Rx,32937:Rx,[Mx]:(t,e)=>{const n=vx(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[Ox]:(t,e)=>{const n=t.getExtension(Ex);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[kx]:(t,e)=>{const n=t.getExtension(Ex);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[Tx]:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Rx,35071:Rx,37447:Rx,36063:(t,e)=>{if(!vx(t)){const n=t.getExtension(Cx);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Rx,35374:Rx,35377:Rx,34852:t=>{if(!vx(t)){const e=t.getExtension(Cx);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Sx)?2147483647:65535,33001:t=>t.getExtension(Sx)?16777216:65535,33e3:t=>16777216,37157:Rx,35373:Rx,35657:Rx,36183:Rx,37137:Rx,34045:Rx,35978:Rx,35979:Rx,35968:Rx,35376:Rx,35375:Rx,35659:Rx,37154:Rx,35371:Rx,35658:Rx,35076:Rx,35077:Rx,35380:Rx};const Bx="OES_vertex_array_object",Lx="ANGLE_instanced_arrays",Dx="WEBGL_draw_buffers",Fx="EXT_disjoint_timer_query";const Nx={[Bx]:{meta:{suffix:"OES"},createVertexArray:()=>{fx(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Lx]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){fx(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[Dx]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{fx(!1)}},[Fx]:{meta:{suffix:"EXT"},createQuery:()=>{fx(!1)},deleteQuery:()=>{fx(!1)},beginQuery:()=>{fx(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},jx={readBuffer:(t,e,n)=>{vx(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:o}=function(t,e){return{webgl2:vx(t),ext:t.getExtension(e)}}(t,Lx);let s;switch(r){case 35069:s=!!i&&void 0;break;case 35070:s=i||o?void 0:0}return void 0!==s?s:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!vx(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>vx(t)||32937!==i?t.getInternalformatParameter(n,r,i):new Int32Array([0]),getTexParameter(t,e,n,r){if(34046===r){const{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){const r=Ix[n],i="function"===typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:(t,e,n,r)=>e(n,r)};function zx(t,e){let{extension:n,target:r,target2:i}=e;const o=Nx[n];fx(o);const{meta:s={}}=o,{suffix:a=""}=s,l=t.getExtension(n);for(const c of Object.keys(o)){const e="".concat(c).concat(a);let n=null;"meta"===c||"function"===typeof t[c]||(l&&"function"===typeof l[e]?n=function(){return l[e](...arguments)}:"function"===typeof o[c]&&(n=o[c].bind(r))),n&&(r[c]=n,i[c]=n)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(!function(t){if("function"===typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new wx(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&zx(t,{extension:n,target:t.luma,target2:t})}(t,Nx),function(t,e){let{target:n,target2:r}=e;Object.keys(jx).forEach((e=>{if("function"===typeof jx[e]){const i=t[e]?t[e].bind(t):()=>{},o=jx[e].bind(null,t,i);n[e]=o,r[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};const Ux={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Vx=(t,e,n)=>e?t.enable(n):t.disable(n),Gx=(t,e,n)=>t.hint(n,e),Wx=(t,e,n)=>t.pixelStorei(n,e);function Hx(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Jx={3042:Vx,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Vx,2885:(t,e)=>t.cullFace(e),2929:Vx,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Vx,35723:Gx,36006:(t,e)=>{const n=vx(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:Gx,2849:(t,e)=>t.lineWidth(e),32823:Vx,32824:"polygonOffset",10752:"polygonOffset",35977:Vx,32938:"sampleCoverage",32939:"sampleCoverage",3089:Vx,3088:(t,e)=>t.scissor(...e),2960:Vx,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Wx,3317:Wx,37440:Wx,37441:Wx,37443:Wx,3330:Wx,3332:Wx,3331:Wx,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:Wx,32878:Wx,3316:Wx,3315:Wx,32877:Wx,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Hx(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Hx(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Hx(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=Hx(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=Hx(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Kx(t,e,n){return void 0!==e[t]?e[t]:n[t]}const Xx={blendEquation:(t,e,n)=>t.blendEquationSeparate(Kx(32777,e,n),Kx(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Kx(32969,e,n),Kx(32968,e,n),Kx(32971,e,n),Kx(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Kx(32824,e,n),Kx(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Kx(32938,e,n),Kx(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Kx(2962,e,n),Kx(2967,e,n),Kx(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Kx(34816,e,n),Kx(36003,e,n),Kx(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Kx(2964,e,n),Kx(2965,e,n),Kx(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Kx(34817,e,n),Kx(34818,e,n),Kx(34819,e,n))},qx={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Yx=(t,e)=>t.isEnabled(e),Qx={3042:Yx,2884:Yx,2929:Yx,3024:Yx,32823:Yx,32926:Yx,32928:Yx,3089:Yx,2960:Yx,35977:Yx};function Zx(t){for(const e in t)return!1;return!0}function $x(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function tA(t,e){const n=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function eA(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];const{valueChanged:s,oldValue:a}=n(t.state._updateCache,...i);return s&&r(...i),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class nA{constructor(t){let{copyState:e=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?sA(t):Object.assign({},Ux),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){fx(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];oA(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in t){fx(void 0!==i);const o=t[i],s=this.cache[i];$x(o,s)||(n=!0,e=s,r&&!(i in r)&&(r[i]=s),this.cache[i]=o)}return{valueChanged:n,oldValue:e}}}function rA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(fx(void 0!==r),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new nA(t,{copyState:r}),function(t){const e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}(t);for(const n in qx){eA(t,n,qx[n])}tA(t,"getParameter"),tA(t,"isEnabled")}return t.state.enable=n,t}function iA(t){fx(t.state),t.state.pop()}function oA(t,e){if(fx(mx(t),"setParameters requires a WebGL context"),Zx(e))return;const n={};for(const i in e){const r=Number(i),o=Jx[i];o&&("string"===typeof o?n[o]=!0:o(t,e[i],r))}const r=t.state&&t.state.cache;if(r)for(const i in n){(0,Xx[i])(t,e,r)}}function sA(t,e){if("number"===typeof(e=e||Ux)){const n=e,r=Qx[n];return r?r(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const e=Qx[i];r[i]=e?e(t,Number(i)):t.getParameter(Number(i))}return r}function aA(t,e,n){if(Zx(e))return n(t);const{nocatch:r=!0}=e;let i;if(function(t){t.state||rA(t,{copyState:!1}),t.state.push()}(t),oA(t,e),r)i=n(t),iA(t);else try{i=n(t)}finally{iA(t)}return i}function lA(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function cA(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(t,e,n,r,i){const o=uA(t[0],e,n);let s=dA(t[1],e,r,i),a=uA(t[0]+1,e,n);const l=a===n-1?a:a-1;let c;a=dA(t[1]+1,e,r,i),i?(a=0===a?a:a+1,c=s,s=a):c=a===r-1?a:a-1;return{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(c-s+1,1)}}(e,lA(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function uA(t,e,n){return Math.min(Math.round(t*e),n-1)}function dA(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const hA=hg(),fA=hA&&"undefined"!==typeof document,pA={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function gA(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fx(hA,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},pA,t);const{width:e,height:n}=t;function r(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}let i;t.onError=r;const{canvas:o}=t,s=function(t){let e,{canvas:n,width:r=800,height:i=600,onError:o}=t;if("string"===typeof n){fA&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)}else n?e=n:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",e.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}({canvas:o,width:e,height:n,onError:r});return i=function(t,e){const{onError:n}=e;let r=null;const i=t=>r=t.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e));o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e));if(t.removeEventListener("webglcontextcreationerror",i,!1),!a)return n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"));e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1);e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1);return a}(s,t),i?(i=mA(i,t),function(t){const e=vx(t)?"WebGL2":"WebGL1",n=function(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";hx.info(1,"".concat(e).concat(i," context ").concat(r))()}(i),i):null}function mA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function(t){if("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)return 2;return 1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},pA,e);const{manageState:n,debug:r}=e;return n&&rA(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return hx.log(1,...e)()}}),hA&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),hx.level=Math.max(hx.level,1)):hx.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function vA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){return void function(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(hx.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1);t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let n=e;const o=Math.floor(r*n),s=Math.floor(i*n);t.canvas.width=o,t.canvas.height=s,t.drawingBufferWidth===o&&t.drawingBufferHeight===s||(hx.warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*n),t.canvas.height=Math.floor(i*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}(t,function(t){const e="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels),e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}const bA="8.5.21";const yA=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new Ug({id:t})),this.stats.get(t)}};if(globalThis.luma&&globalThis.luma.VERSION!==bA)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(bA));globalThis.luma||(hg()&&hx.log(1,"luma.gl ".concat(bA," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:bA,version:bA,log:hx,stats:yA,globals:{modules:{},nodeIO:{}}});globalThis.luma;function xA(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function AA(t,e){if("string"!==typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const r=t[e=e.replace(/^.*\./,"")];return xA(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function _A(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const wA={};function SA(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";wA[t]=wA[t]||1;const e=wA[t]++;return"".concat(t,"-").concat(e)}function CA(t){return xA("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function EA(t){let e=!0;for(const n in t){e=!1;break}return e}function PA(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach((t=>{o.methodName||(o[t]=()=>{throw hx.removed("Calling removed method ".concat(e,".").concat(t,": "),i)(),new Error(t)})}))}const MA="Resource subclass must define virtual methods";class TA{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bx(t);const{id:n,userData:r={}}=e;this.gl=t,this.gl2=t,this.id=n||SA(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xA(t=AA(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=vx(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const e=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return t?r:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:n}=t,r=this.constructor.PARAMETERS||{},i=vx(this.gl),o={},s=e||Object.keys(r);for(const a of s){const e=r[a];if(e&&(!("webgl2"in e)||i)&&(!("extension"in e)||this.gl.getExtension(e.extension))){const r=n?_A(this.gl,a):a;o[r]=this.getParameter(a,t),n&&"GLenum"===e.type&&(o[r]=_A(this.gl,o[r]))}}return o}setParameter(t,e){xA(t=AA(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=vx(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=AA(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return PA(this,t,e,n)}initialize(t){}_createHandle(){throw new Error(MA)}_deleteHandle(){throw new Error(MA)}_bindHandle(t){throw new Error(MA)}_getOptsFromHandle(){throw new Error(MA)}_getParameter(t,e){throw new Error(MA)}_setParameter(t,e){throw new Error(MA)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=yA.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];yA.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=yA.get("Memory Usage".concat(n));r.get("GPU Memory").addCount(t),r.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=yA.get("Memory Usage".concat(e));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(t," Memory")).subtractCount(this.byteLength)}}const OA="Failed to deduce GL constant from typed array";function kA(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(OA)}}function RA(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function IA(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let t=0;t<i;t++)for(let r=0;r<4;r++)s[4*(a*i+t)+r]=e[4*(2*a*n+2*t)+r];return{data:s,width:i,height:o}}function BA(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const a in r)if(a in e){const e=r[a]?"".concat(t,".").concat(r[a]):"N/A";hx.removed("".concat(t,".").concat(a),e)()}for(const a in i)if(a in e){const e=i[a];hx.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(e))()}let s=null;for(const a in o)if(a in e){const n=o[a];hx.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(n))(),s=s||Object.assign({},e),s[n]=e[a],delete s[a]}return s||e}const LA={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},DA={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class FA{static getBytesPerElement(t){return RA(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){xA(t.size);return RA(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new FA(...[LA,...e])}constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return FA.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return FA.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=BA("Accessor",t,DA),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}const NA={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},jA={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:NA},zA={removedProps:NA};class UA extends TA{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/FA.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/FA.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=BA("Buffer",t,jA),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=BA("Buffer",t,zA))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new FA(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:n=0,srcOffset:r=0}=t,i=t.byteLength||t.length;xA(e);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==i?(yx(this.gl),this.gl.bufferSubData(this.target,n,e,r,i)):this.gl.bufferSubData(o,n,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}=t;const{gl:o}=this;return yx(o),o.bindBuffer(36662,e.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,r,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:n=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};yx(this.gl);const i=RA(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(e),s=n;let a,l;t?(l=t.length,a=l-s):(a=Math.min(o,r||o),l=s+a);const c=Math.min(o,a);return r=r||c,xA(r<=c),t=t||new i(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,n,r),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,n,r):(xA(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;xA(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const i=kA(t);return xA(i),this.setAccessor(new FA(this.accessor,{type:i})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;xA(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/RA(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new FA(this.accessor,{type:kA(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return hx.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return hx.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return hx.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return hx.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new FA(this.accessor,t),this}}const VA={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},GA={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},WA={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};const HA=[9729,9728],JA=globalThis.WebGLBuffer||function(){};class KA extends TA{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:r}=e;let i=!0;return n&&(i=i&&function(t,e){const n=VA[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const r=vx(t)&&n.gl2||n.gl1;return"string"===typeof r?t.getExtension(r):r}(t,n),i=i&&(!r||function(t,e){const n=VA[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),i}constructor(t,e){const{id:n=SA("texture"),handle:r,target:i}=e;super(t,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const n="undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:r=null,format:i=6408,border:o=0,recreate:s=!1,parameters:a={},pixelStore:l={},textureUnit:c}=t;e||(e=r);let{width:u,height:d,dataFormat:h,type:f,compressed:p=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return({width:u,height:d,compressed:p,dataFormat:h,type:f}=this._deduceParameters({format:i,type:f,dataFormat:h,compressed:p,data:e,width:u,height:d})),this.width=u,this.height=d,this.depth=m,this.format=i,this.type=f,this.dataFormat=h,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(hx.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(a)),this.mipmaps=g,this.setImageData({data:e,width:u,height:d,depth:m,format:i,type:f,dataFormat:h,border:o,mipmaps:g,parameters:l,compressed:p}),g&&this.generateMipmap(),this.setParameters(a),s&&(this.data=e),n&&(this._video={video:e,parameters:a,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:n,mipmaps:r=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(hx.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),aA(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:r=0,format:i=this.format,border:o=this.border,offset:s=0,parameters:a={}}=t;let{data:l=null,type:c=this.type,width:u=this.width,height:d=this.height,dataFormat:h=this.dataFormat,compressed:f=!1}=t;l||(l=n),({type:c,dataFormat:h,compressed:f,width:u,height:d}=this._deduceParameters({format:i,type:c,dataFormat:h,compressed:f,data:l,width:u,height:d}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let g,m=null;({data:l,dataType:m}=this._getDataType({data:l,compressed:f}));let v=0;if(aA(this.gl,a,(()=>{switch(m){case"null":p.texImage2D(e,r,i,u,d,o,h,c,l);break;case"typed-array":p.texImage2D(e,r,i,u,d,o,h,c,l,s);break;case"buffer":g=yx(p),g.bindBuffer(35052,l.handle||l),g.texImage2D(e,r,i,u,d,o,h,c,s),g.bindBuffer(35052,null);break;case"browser-object":vx(p)?p.texImage2D(e,r,i,u,d,o,h,c,l):p.texImage2D(e,r,i,h,c,l);break;case"compressed":for(const[t,n]of l.entries())p.compressedTexImage2D(e,t,n.format,n.width,n.height,o,n.data),v+=n.levelSize;break;default:xA(!1,"Unknown image data type")}})),"compressed"===m)this._trackAllocatedMemory(v,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const t=GA[this.dataFormat]||4,e=WA[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:r=null,x:i=0,y:o=0,width:s=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:d=this.dataFormat,compressed:h=!1,offset:f=0,border:p=this.border,parameters:g={}}=t;if(({type:u,dataFormat:d,compressed:h,width:s,height:a}=this._deduceParameters({format:c,type:u,dataFormat:d,compressed:h,data:r,width:s,height:a})),xA(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const t=r;r=t.data,s=t.shape[0],a=t.shape[1]}r instanceof UA&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),aA(this.gl,g,(()=>{if(h)this.gl.compressedTexSubImage2D(e,l,i,o,s,a,c,r);else if(null===r)this.gl.texSubImage2D(e,l,i,o,s,a,d,u,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,l,i,o,s,a,d,u,r,f);else if(r instanceof JA){const t=yx(this.gl);t.bindBuffer(35052,r),t.texSubImage2D(e,l,i,o,s,a,d,u,f),t.bindBuffer(35052,null)}else if(vx(this.gl)){yx(this.gl).texSubImage2D(e,l,i,o,s,a,d,u,r)}else this.gl.texSubImage2D(e,l,i,o,d,u,r)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return hx.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof UA?{data:e.handle,dataType:"buffer"}:e instanceof JA?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:r,height:i,dataFormat:o,type:s,compressed:a}=t;const l=VA[e];return o=o||l&&l.dataFormat,s=s||l&&l.types[0],a=a||l&&l.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:o,type:s,compressed:a,width:r,height:i,format:e,data:n}}_deduceImageSize(t,e,n){let r;return r="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},xA(r,"Could not deduced texture size"),xA(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),xA(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:xA(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!vx(this.gl)&&(!(!this.width||!this.height)&&(!CA(this.width)||!CA(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===HA.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}let XA="";class qA extends KA{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return KA.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;bx(t),(e instanceof Promise||"string"===typeof e)&&(e={data:e}),"string"===typeof e.data&&(e=Object.assign({},e,{data:(n=e.data,xA("string"===typeof n),n=XA+n,new Promise(((t,e)=>{try{const i=new Image;i.onload=()=>t(i),i.onerror=()=>e(new Error("Could not load image ".concat(n,"."))),i.crossOrigin=r&&r.crossOrigin||"anonymous",i.src=n}catch(i){e(i)}})))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}const YA="EXT_color_buffer_float",QA={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:YA,bpp:2},33327:{gl2:YA,bpp:4},34842:{gl2:YA,bpp:8},33326:{gl2:YA,bpp:4},33328:{gl2:YA,bpp:8},34836:{gl2:YA,bpp:16},35898:{gl2:YA,bpp:4}};class ZA extends TA{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){const r=n[e];if(!r)return!1;const i=vx(t)&&r.gl2||r.gl1;return"string"===typeof i?t.getExtension(i):i}(t,e,QA)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:r=1,samples:i=0}=t;return xA(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&vx(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*QA[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,t)}}const $A=6144,t_="clear: bad arguments";function e_(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),r&&(s|=256,!0!==r&&(o.clearDepth=r)),i&&(s|=1024,!0!==r&&(o.clearStencil=r)),xA(0!==s,t_),aA(t,o,(()=>{t.clear(s)}))}function n_(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return xA(!1),0}}const r_=[34069,34070,34071,34072,34073,34074];class i_ extends KA{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bx(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)})),this}subImage(t){let{face:e,data:n,x:r=0,y:i=0,mipmapLevel:o=0}=t;return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:o})}async setCubeMapImageData(t){let{width:e,height:n,pixels:r,data:i,border:o=0,format:s=6408,type:a=5121}=t;const{gl:l}=this,c=r||i,u=await Promise.all(r_.map((t=>{const e=c[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),r_.forEach(((t,r)=>{u[r].length>1&&!1!==this.opts.mipmaps&&hx.warn("".concat(this.id," has mipmap and multiple LODs."))(),u[r].forEach(((r,i)=>{e&&n?l.texImage2D(t,i,s,e,n,o,s,a,r):l.texImage2D(t,i,s,s,a,r)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:l=5121}=t,{gl:c}=this,u=i||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n})))):this.width||this.height?c.texImage2D(e,0,a,n,r,s,a,l,u):c.texImage2D(e,0,a,a,l,u),this}}i_.FACES=r_;class o_ extends KA{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return vx(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yx(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:r,height:i,depth:o=1,border:s=0,format:a,type:l=5121,offset:c=0,data:u,parameters:d={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),aA(this.gl,d,(()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,n,r,i,o,s,a,l,u),u instanceof UA&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,n,r,i,o,s,a,l,c))})),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const t=GA[this.dataFormat]||4,e=WA[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}function s_(t,e){const{gl:n,width:r,height:i,id:o}=t;return new j_(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:t}}))}function a_(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:d}=u_(t);xA(u);const{gl:h,handle:f,attachments:p}=u;a=a||u.width,l=l||u.height,36064===o&&null===f&&(o=1028),xA(p[o]),c=c||p[o].type,s=function(t,e,n,r,i){if(t)return t;const o=RA(e=e||5121,{clamped:!1}),s=n_(n);return new o(r*i*s)}(s,c,i,a,l),c=c||kA(s);const g=h.bindFramebuffer(36160,f);return h.readPixels(n,r,a,l,i,c,s),h.bindFramebuffer(36160,g||null),d&&u.delete(),s}function l_(t,e){let{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408,target:o=null,targetByteOffset:s=0,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:d}=u_(t);xA(u),a=a||u.width,l=l||u.height;const h=yx(u.gl);if(c=c||(o?o.type:5121),!o){const t=n_(i),e=function(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return xA(!1),0}}(c);o=new UA(h,{byteLength:s+a*l*t*e,accessor:{type:c,size:t}})}return o.bind({target:35051}),aA(h,{framebuffer:u},(()=>{h.readPixels(n,r,a,l,i,c,s)})),o.unbind({target:35051}),d&&u.delete(),o}function c_(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a_(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=IA({data:r,width:i,height:o}));!function(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t;const s=n*i;o=o||new Uint8Array(s);for(let a=0;a<r/2;++a){const t=a*s,n=(r-a-1)*s;o.set(e.subarray(t,t+s)),e.copyWithin(t,n,n+s),e.set(o,n)}}({data:r,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),l=a.createImageData(i,o);return l.data.set(r),a.putImageData(l,0,0),s.toDataURL()}function u_(t){return t instanceof j_?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:s_(t),deleteFramebuffer:!0}}const d_="WEBGL2",h_="VERTEX_ARRAY_OBJECT",f_="TIMER_QUERY",p_="INSTANCED_RENDERING",g_="MULTIPLE_RENDER_TARGETS",m_="ELEMENT_INDEX_UINT32",v_="BLEND_EQUATION_MINMAX",b_="FLOAT_BLEND",y_="COLOR_ENCODING_SRGB",x_="TEXTURE_DEPTH",A_="TEXTURE_FLOAT",__="TEXTURE_HALF_FLOAT",w_="TEXTURE_FILTER_LINEAR_FLOAT",S_="TEXTURE_FILTER_LINEAR_HALF_FLOAT",C_="TEXTURE_FILTER_ANISOTROPIC",E_="COLOR_ATTACHMENT_RGBA32F",P_="COLOR_ATTACHMENT_FLOAT",M_="COLOR_ATTACHMENT_HALF_FLOAT",T_="GLSL_FRAG_DATA",O_="GLSL_FRAG_DEPTH",k_="GLSL_DERIVATIVES",R_="GLSL_TEXTURE_LOD";const I_={[d_]:[!1,!0],[h_]:["OES_vertex_array_object",!0],[f_]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[p_]:["ANGLE_instanced_arrays",!0],[g_]:["WEBGL_draw_buffers",!0],[m_]:["OES_element_index_uint",!0],[v_]:["EXT_blend_minmax",!0],[b_]:["EXT_float_blend"],[y_]:["EXT_sRGB",!0],[x_]:["WEBGL_depth_texture",!0],[A_]:["OES_texture_float",!0],[__]:["OES_texture_half_float",!0],[w_]:["OES_texture_float_linear"],[S_]:["OES_texture_half_float_linear"],[C_]:["EXT_texture_filter_anisotropic"],[E_]:[function(t){const e=new qA(t,{format:6408,type:5126,dataFormat:6408}),n=new j_(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"],[P_]:[!1,"EXT_color_buffer_float"],[M_]:["EXT_color_buffer_half_float"],[T_]:["WEBGL_draw_buffers",!0],[O_]:["EXT_frag_depth",!0],[k_]:["OES_standard_derivatives",!0],[R_]:["EXT_shader_texture_lod",!0]},B_=2;function L_(t,e){return D_(t,e)}function D_(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>F_(t,e)))}function F_(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const n=I_[e];let r;xA(n,e);const i=vx(t)&&n[1]||n[0];if("function"===typeof i)r=i(t);else if(Array.isArray(i)){r=!0;for(const e of i)r=r&&Boolean(t.getExtension(e))}else"string"===typeof i?r=Boolean(t.getExtension(i)):"boolean"===typeof i?r=i:xA(!1);return r}(t,e)),t.luma.caps[e]||hx.log(B_,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const N_="Multiple render targets not supported";class j_ extends TA{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:r}=e;let i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new j_(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=yx(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=yx(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:o=!0,stencil:s=!1,check:a=!0,readBuffer:l,drawBuffers:c}=t;if(xA(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const u in r){const t=r[u];(Array.isArray(t)?t[0]:t).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,o,s,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:c}),r&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:o=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:o});const{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),s.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return xA(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&hx.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))();for(const r in this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};e&&Object.keys(this.attachments).forEach((t=>{r[t]=null})),Object.assign(r,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){xA(void 0!==o,"Misspelled framebuffer binding point?");const t=Number(o),e=r[t];let i=e;if(i)if(i instanceof ZA)this._attachRenderbuffer({attachment:t,renderbuffer:i});else if(Array.isArray(e)){const[n,r=0,o=0]=e;i=n,this._attachTexture({attachment:t,texture:n,layer:r,level:o})}else this._attachTexture({attachment:t,texture:i,layer:0,level:0});else this._unattach(t);n&&i&&i.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(j_.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:n,stencil:r,drawBuffers:i=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&e_(this.gl,{color:e,depth:n,stencil:r}),i.forEach(((t,e)=>{!function(t){let{framebuffer:e=null,buffer:n=$A,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yx(t),aA(t,{framebuffer:e},(()=>{switch(n){case $A:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case 6145:t.clearBufferfv(6145,0,[i]);break;case 6146:t.clearBufferiv(6146,0,[i]);break;case 34041:const[e,o]=i;t.clearBufferfi(34041,0,e,o);break;default:xA(!1,t_)}}))}(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return hx.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return hx.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return hx.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return hx.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return hx.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return hx.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:r=0,width:i,height:o}=t;const s=yx(this.gl),a=s.bindFramebuffer(36008,this.handle);return 0===n&&0===r&&void 0===i&&void 0===o?s.invalidateFramebuffer(36008,e):s.invalidateFramebuffer(36008,e,n,r,i,o),s.bindFramebuffer(36008,a),this}getAttachmentParameter(t,e,n){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=_A(this.gl,r)),r}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const i of n){r[e?_A(this.gl,i):i]=this.getAttachmentParameter(t,i,e)}return r}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),n={};for(const r of e){const e=Number(r);n[t?_A(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!==typeof window&&window.open(c_(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>hx.level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);const n=c_(this,{targetMaxHeight:100});return hx.image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,r,i){let o=null;return t&&(o=o||{},o[36064]=new qA(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),e&&n?(o=o||{},o[33306]=new ZA(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new ZA(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&xA(!1),o}_unattach(t){const e=this.attachments[t];e&&(e instanceof ZA?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t;const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:r,level:i}=t;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:yx(o).framebufferTextureLayer(36160,e,n.target,i,r);break;case 34067:const t=function(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,e,t,n.handle,i);break;case 3553:o.framebufferTexture2D(36160,e,3553,n.handle,i);break;default:xA(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){const e=vx(n=this.gl)?n:null;var n;e?e.readBuffer(t):xA(36064===t||1029===t,N_),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,n=yx(e);if(n)n.drawBuffers(t);else{const n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):xA(1===t.length&&(36064===t[0]||1029===t[0]),N_)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=function(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in I_)void 0===t.luma.caps[e]&&(t.luma.caps[e]=F_(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}j_.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const z_={5126:tw.bind(null,"uniform1fv",J_,1,ew),35664:tw.bind(null,"uniform2fv",J_,2,ew),35665:tw.bind(null,"uniform3fv",J_,3,ew),35666:tw.bind(null,"uniform4fv",J_,4,ew),5124:tw.bind(null,"uniform1iv",K_,1,ew),35667:tw.bind(null,"uniform2iv",K_,2,ew),35668:tw.bind(null,"uniform3iv",K_,3,ew),35669:tw.bind(null,"uniform4iv",K_,4,ew),35670:tw.bind(null,"uniform1iv",K_,1,ew),35671:tw.bind(null,"uniform2iv",K_,2,ew),35672:tw.bind(null,"uniform3iv",K_,3,ew),35673:tw.bind(null,"uniform4iv",K_,4,ew),35674:tw.bind(null,"uniformMatrix2fv",J_,4,nw),35675:tw.bind(null,"uniformMatrix3fv",J_,9,nw),35676:tw.bind(null,"uniformMatrix4fv",J_,16,nw),35678:$_,35680:$_,5125:tw.bind(null,"uniform1uiv",X_,1,ew),36294:tw.bind(null,"uniform2uiv",X_,2,ew),36295:tw.bind(null,"uniform3uiv",X_,3,ew),36296:tw.bind(null,"uniform4uiv",X_,4,ew),35685:tw.bind(null,"uniformMatrix2x3fv",J_,6,nw),35686:tw.bind(null,"uniformMatrix2x4fv",J_,8,nw),35687:tw.bind(null,"uniformMatrix3x2fv",J_,6,nw),35688:tw.bind(null,"uniformMatrix3x4fv",J_,12,nw),35689:tw.bind(null,"uniformMatrix4x2fv",J_,8,nw),35690:tw.bind(null,"uniformMatrix4x3fv",J_,12,nw),35678:$_,35680:$_,35679:$_,35682:$_,36289:$_,36292:$_,36293:$_,36298:$_,36299:$_,36300:$_,36303:$_,36306:$_,36307:$_,36308:$_,36311:$_},U_={},V_={},G_={},W_=[0];function H_(t,e,n,r){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(W_[0]=t,t=W_);const i=t.length;if(i%e&&hx.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let s=0;s<i;s++)o[s]=t[s];return o}function J_(t,e){return H_(t,e,Float32Array,U_)}function K_(t,e){return H_(t,e,Int32Array,V_)}function X_(t,e){return H_(t,e,Uint32Array,G_)}function q_(t,e,n){const r=z_[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function Y_(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function Q_(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof KA||(t instanceof ZA||t instanceof j_&&Boolean(t.texture))))}function Z_(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let t=0,e=n.length;t<e;++t)r[t]=n[t]}else t[e]=n.slice();else t[e]=n}function $_(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function tw(t,e,n,r){let i=null,o=null;return(s,a,l)=>{const c=e(l,n),u=c.length;let d=!1;if(null===i)i=new Float32Array(u),o=u,d=!0;else{xA(o===u,"Uniform length cannot change.");for(let t=0;t<u;++t)if(c[t]!==i[t]){d=!0;break}}return d&&(r(s,t,a,c),i.set(c)),d}}function ew(t,e,n,r){t[e](n,r)}function nw(t,e,n,r){t[e](n,!1,r)}function rw(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:e}const iw=35632,ow=35633;function sw(t,e,n,r){const i=t.split(/\r?\n/),o={},s={},a=r||rw(e)||"(unnamed)",l="".concat(function(t){switch(t){case iw:return"fragment";case ow:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const e=i[u];if(e.length<=1)continue;const n=e.split(":"),r=n[0],a=parseInt(n[2],10);if(isNaN(a))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==r?o[a]=e:s[a]=e}const c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(((t,r)=>{const o=String(r+e),s=o.length;return lw(o,i-s)+n+t}))}(e);return{shaderName:l,errors:aw(o,c),warnings:aw(s,c)}}function aw(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){const e=t[r+1],i=e.split(":",3),o=i[0],s=parseInt(i[1],10)||0,a=e.substring(i.join(":").length+1).trim();n+=lw("^^^ ".concat(o,": ").concat(a,"\n\n"),s)}}return n}function lw(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}class cw extends TA{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return xA(!1),"unknown"}}constructor(t,e){bx(t),xA("string"===typeof e.source,"Shader: GLSL source code must be a JavaScript string");super(t,{id:rw(e.source,null)||e.id||SA("unnamed ".concat(cw.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const n=rw(e,null);n&&(this.id=SA(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(cw.getTypeName(this.shaderType),":").concat(this.id)}getName(){return rw(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:r}=sw(t,this.source,this.shaderType,this.id);throw hx.error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),hx.warn("GLSL compilation warnings in ".concat(e,"\n").concat(r))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class uw extends cw{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class dw extends cw{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const hw=5120,fw=5121,pw=5122,gw=5123,mw=0,vw=1,bw=2,yw=3,xw=4,Aw=5,_w=6,ww=5126,Sw=35664,Cw=35665,Ew=35666,Pw=5124,Mw=35667,Tw=35668,Ow=35669,kw=5125,Rw=36294,Iw=36295,Bw=36296,Lw=35670,Dw=35671,Fw=35672,Nw=35673,jw=35674,zw=35675,Uw=35676,Vw=35685,Gw=35686,Ww=35687,Hw=35688,Jw=35689,Kw=35690,Xw={[ww]:[ww,1,"float"],[Sw]:[ww,2,"vec2"],[Cw]:[ww,3,"vec3"],[Ew]:[ww,4,"vec4"],[Pw]:[Pw,1,"int"],[Mw]:[Pw,2,"ivec2"],[Tw]:[Pw,3,"ivec3"],[Ow]:[Pw,4,"ivec4"],[kw]:[kw,1,"uint"],[Rw]:[kw,2,"uvec2"],[Iw]:[kw,3,"uvec3"],[Bw]:[kw,4,"uvec4"],[Lw]:[ww,1,"bool"],[Dw]:[ww,2,"bvec2"],[Fw]:[ww,3,"bvec3"],[Nw]:[ww,4,"bvec4"],[jw]:[ww,8,"mat2"],[Vw]:[ww,8,"mat2x3"],[Gw]:[ww,8,"mat2x4"],[zw]:[ww,12,"mat3"],[Ww]:[ww,12,"mat3x2"],[Hw]:[ww,12,"mat3x4"],[Uw]:[ww,16,"mat4"],[Jw]:[ww,16,"mat4x2"],[Kw]:[ww,16,"mat4x3"]};function qw(t){switch(t){case mw:return mw;case vw:case yw:case bw:return vw;case xw:case Aw:case _w:return xw;default:return xA(!1),0}}function Yw(t){const e=Xw[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function Qw(t,e){switch(t){case hw:case fw:case pw:case gw:t=ww}for(const n in Xw){const[r,i,o]=Xw[n];if(r===t&&i===e)return{glType:n,name:o}}return null}class Zw{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getActiveAttrib(t.handle,r),s=e.getAttribLocation(t.handle,n);s>=0&&this._addAttribute(s,n,i,o)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!vx(e))return;const n=e.getProgramParameter(t.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,n,i,o)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,n,r){const{type:i,components:o}=Yw(n),s={type:i,size:r*o};this._inferProperties(t,e,s);const a={location:t,name:e,accessor:new FA(s)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,r){const{type:i,components:o}=Yw(n),s={location:t,name:e,accessor:new FA({type:i,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}const $w=35981,tS=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class eS extends TA{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",tS),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:n,fs:r,varyings:i,bufferMode:o=$w}=t;return this.hash=e||"",this.vs="string"===typeof n?new uw(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"===typeof r?new dw(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,xA(this.vs instanceof uw),xA(this.fs instanceof dw),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(yx(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Zw(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:o,end:s,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:d=null,transformFeedback:h,framebuffer:f,parameters:p={},uniforms:g,samplers:m}=t;if((g||m)&&(hx.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),hx.priority>=e){const t=f?f.id:"default",i="mode=".concat(_A(this.gl,n)," verts=").concat(r," ")+"instances=".concat(c," indexType=").concat(_A(this.gl,l)," ")+"isInstanced=".concat(u," isIndexed=").concat(a," ")+"Framebuffer=".concat(t);hx.log(e,i)()}return xA(d),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||u&&0===c)&&(d.bindForDraw(r,c,(()=>{if(void 0!==f&&(p=Object.assign({},p,{framebuffer:f})),h){const t=qw(n);h.begin(t)}this._bindTextures(),aA(this.gl,p,(()=>{a&&u?this.gl2.drawElementsInstanced(n,r,l,i,c):a&&vx(this.gl)&&!isNaN(o)&&!isNaN(s)?this.gl2.drawRangeElements(n,o,s,r,l,i):a?this.gl.drawElements(n,r,l,i):u?this.gl2.drawArraysInstanced(n,i,r,c):this.gl.drawArrays(n,i,r)})),h&&h.end()})),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hx.priority>=2&&function(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!Q_(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const n=t[e],r=this._uniformSetters[e];if(r){let t=n,i=!1;if(t instanceof j_&&(t=t.texture),t instanceof KA)if(i=this.uniforms[e]!==n,i){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=t,{textureIndex:i}=r;n.bind(i),t=i,this._textureUniforms[e]=n}else t=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(t)||i)&&Z_(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),n={};for(const r of e){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new uw({handle:r});break;case 35632:n.fs=new dw({handle:r})}}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=SA(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),hx.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),hx.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||hx.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);if(!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const n=this.gl.getActiveUniform(this.handle,e),{name:r}=Y_(n.name);let i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=q_(t,i,n),n.size>1)for(let e=0;e<n.size;e++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(e,"]")),this._uniformSetters["".concat(r,"[").concat(e,"]")]=q_(t,i,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}class nS{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new nS(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find((e=>e.name===t.name))||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e)),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:n="",defines:r={},inject:i={},varyings:o=[],bufferMode:s=35981,transpileToGLSL100:a=!1}=t,l=this._getModuleList(t.modules),c=this._getHash(e),u=this._getHash(n),d=l.map((t=>this._getHash(t.name))).sort(),h=o.map((t=>this._getHash(t))),f=Object.keys(r).sort(),p=Object.keys(i).sort(),g=[],m=[];for(const b of f)g.push(this._getHash(b)),g.push(this._getHash(r[b]));for(const b of p)m.push(this._getHash(b)),m.push(this._getHash(i[b]));const v="".concat(c,"/").concat(u,"D").concat(g.join("/"),"M").concat(d.join("/"),"I").concat(m.join("/"),"V").concat(h.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(a?"T":"");if(!this._programCache[v]){const t=function(t,e){const{vs:n,fs:r}=e,i=Py(e.modules||[]);return{gl:t,vs:ux(t,Object.assign({},e,{source:n,type:xy,modules:i})),fs:ux(t,Object.assign({},e,{source:r,type:Ay,modules:i})),getUniforms:dx(i)}}(this.gl,{vs:e,fs:n,modules:l,inject:i,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:a});this._programCache[v]=new eS(this.gl,{hash:v,vs:t.vs,fs:t.fs,varyings:o,bufferMode:s}),this._getUniforms[v]=t.getUniforms||(t=>{}),this._useCounts[v]=0}return this._useCounts[v]++,this._programCache[v]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),n={};let r=0;for(let i=0,o=this._defaultModules.length;i<o;++i){const t=this._defaultModules[i],o=t.name;e[r++]=t,n[o]=!0}for(let i=0,o=t.length;i<o;++i){const o=t[i],s=o.name;n[s]||(e[r++]=o,n[s]=!0)}return e.length=r,e}}const rS={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},iS="#define SMOOTH_EDGE_RADIUS 0.5",oS={name:"geometry",vs:"\n".concat(iS,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(iS,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},sS=Object.keys(dy).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(dy[t],";"))).join(""),aS=Object.keys(hy).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(hy[t],";"))).join(""),lS=Object.keys(fy).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(fy[t],";"))).join(""),cS="".concat(sS,"\n").concat(aS,"\n").concat(lS,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n");function uS(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function dS(t){let e,n={};return r=>{for(const i in r)if(!uS(r[i],n[i])){e=t(r),n=r;break}return e}}const hS=[0,0,0,0],fS=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],pS=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],gS=[0,0,0],mS=[0,0,0],vS=dS((function(t){let{viewport:e,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:i}=t;const{projectionCenter:o,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=function(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=hS,l=hS,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:h}=bS(t,e,n);h&&(l=t.projectPosition(u||d),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Ab([],l,s),o=r||o,s=sb([],i,o),s=sb([],s,fS));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:u}}(e,r,i),d=e.getDistanceScales(),h=[e.width*n,e.height*n],f=Ab([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,p={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:a.slice(0,3),project_uCenter:o,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:gS,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:pS,project_uCameraPosition:l};if(u){const t=e.getDistanceScales(u);switch(r){case dy.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case dy.LNGLAT:case dy.LNGLAT_OFFSETS:e._pseudoMeters||(p.project_uCommonUnitsPerMeter=t.unitsPerMeter),p.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case dy.CARTESIAN:p.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],p.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return p}));function bS(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mS;n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===dy.LNGLAT_OFFSETS||e===dy.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case hy.WEB_MERCATOR:e!==dy.LNGLAT&&e!==dy.CARTESIAN||(r=[0,0,0],o=!1);break;case hy.WEB_MERCATOR_AUTO_OFFSET:e===dy.LNGLAT?i=r:e===dy.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case hy.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case hy.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}const yS={};const xS={name:"project",dependencies:[rS,oS],vs:cS,getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yS;return"viewport"in t?function(t){let{viewport:e,devicePixelRatio:n=1,modelMatrix:r=null,coordinateSystem:i=dy.DEFAULT,coordinateOrigin:o=mS,autoWrapLongitude:s=!1}=t;i===dy.DEFAULT&&(i=e.isGeospatial?dy.LNGLAT:dy.CARTESIAN);const a=vS({viewport:e,devicePixelRatio:n,coordinateSystem:i,coordinateOrigin:o});return a.project_uWrapLongitude=s,a.project_uModelMatrix=r||pS,a}(t):{}}},AS=[xS],_S=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function wS(t){const e=nS.getDefaultProgramManager(t);for(const n of AS)e.addDefaultModule(n);for(const n of _S)e.addShaderHook(n);return e}class SS{constructor(t){let{deck:e,stats:n,viewport:r,timeline:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ge(this,"layers",void 0),ge(this,"context",void 0),ge(this,"resourceManager",void 0),ge(this,"_lastRenderedLayers",[]),ge(this,"_needsRedraw",!1),ge(this,"_needsUpdate",!1),ge(this,"_nextLayers",null),ge(this,"_debug",!1),ge(this,"activateViewport",(t=>{Lg("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)})),this.layers=[],this.resourceManager=new Av({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&wS(t),stats:n||new Ug({id:"deck.gl"}),viewport:r||new yy({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new Zp,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(t);e=e||r}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers(){let{layerIds:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){Lg("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const n=Dg(t,Boolean);for(const r of n)r.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}_updateLayers(t,e){const n={};for(const o of t)n[o.id]?Rg.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;const r=[];this._updateSublayersRecursively(e,n,r),this._finalizeOldLayers(n);let i=!1;for(const o of r)if(o.hasUniformTransition()){i="Uniform transition in ".concat(o);break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(t,e,n){for(const i of t){i.context=this.context;const t=e[i.id];null===t&&Rg.warn("Multiple new layers with same id ".concat(i.id))(),e[i.id]=null;let o=null;try{this._debug&&t!==i&&i.validateProps(),t?(this._transferLayerState(t,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite?i.getSubLayers():null}catch(r){this._handleError("matching",r,i)}o&&this._updateSublayersRecursively(o,e,n)}}_finalizeOldLayers(t){for(const e in t){const n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=eg}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=tg,e!==t&&(t.lifecycle=ng)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=rg;try{t._finalize(),t.lifecycle=ig}catch(e){this._handleError("finalization",e,t)}}}function CS(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!CS(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const o of r){if(!e.hasOwnProperty(o))return!1;if(!CS(t[o],e[o],n-1))return!1}return!0}return!1}class ES{constructor(t){ge(this,"width",void 0),ge(this,"height",void 0),ge(this,"views",void 0),ge(this,"viewState",void 0),ge(this,"controllers",void 0),ge(this,"timeline",void 0),ge(this,"_viewports",void 0),ge(this,"_viewportMap",void 0),ge(this,"_isUpdating",void 0),ge(this,"_needsRedraw",void 0),ge(this,"_needsUpdate",void 0),ge(this,"_eventManager",void 0),ge(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"===typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){const n=this.getViewports(),r={x:t[0],y:t[1]};for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.containsPixel(r)){const n=t.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Dg(t,Boolean);this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){!CS(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else Rg.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var n;return null===(n=this.getView(t.id))||void 0===n?void 0:n.makeViewport({viewState:e,width:this.width,height:this.height})}})}_updateController(t,e,n,r){const i=t.controller;if(i&&n){const o={...e,...i,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return r&&r.constructor===i.type||(r=this._createController(t,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=t.length;r--;){const i=t[r],o=this.getViewState(i),s=i.makeViewport({viewState:o,width:this.width,height:this.height});let a=e[i.id];const l=Boolean(i.controller);l&&!a&&(n=!0),!n&&l||!a||(a.finalize(),a=null),this.controllers[i.id]=this._updateController(i,o,s,a),s&&this._viewports.unshift(s)}for(const r in e){const t=e[r];t&&!this.controllers[r]&&t.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((n,r)=>!t[r].equals(e[r])))}}const PS=/([0-9]+\.?[0-9]*)(%|px)/;function MS(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=PS.exec(t);if(e&&e.length>=3){const t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function TS(t,e){return t.relative?Math.round(t.position*e):t.position}function OS(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class kS{constructor(t){ge(this,"id",void 0),ge(this,"viewportInstance",void 0),ge(this,"_x",void 0),ge(this,"_y",void 0),ge(this,"_width",void 0),ge(this,"_height",void 0),ge(this,"_padding",void 0),ge(this,"props",void 0);const{id:e,x:n=0,y:r=0,width:i="100%",height:o="100%",padding:s=null,viewportInstance:a}=t||{};OS(!a||a instanceof yy),this.viewportInstance=a,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=MS(n),this._y=MS(r),this._width=MS(i),this._height=MS(o),this._padding=s&&{left:MS(s.left||0),right:MS(s.right||0),top:MS(s.top||0),bottom:MS(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&CS(this.props,t.props,2))}makeViewport(t){let{width:e,height:n,viewState:r}=t;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return i.height&&i.width?new this.ViewportType({...r,...this.props,...i}):null}getViewStateId(){const{viewState:t}=this.props;return"string"===typeof t?t:(null===t||void 0===t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions(t){let{width:e,height:n}=t;const r={x:TS(this._x,e),y:TS(this._y,n),width:TS(this._width,e),height:TS(this._height,n)};return this._padding&&(r.padding={left:TS(this._padding.left,e),top:TS(this._padding.top,n),right:TS(this._padding.right,e),bottom:TS(this._padding.bottom,n)}),r}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"===typeof t?{type:t}:{type:this.ControllerType,...t}:null}}class RS extends yy{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:r=0,pitch:i=0,bearing:o=0,nearZMultiplier:s=.1,farZMultiplier:a=1.01,nearZ:l,farZ:c,orthographic:u=!1,projectionMatrix:d,repeat:h=!1,worldOffset:f=0,position:p,padding:g,legacyMeterSizes:m=!1}=t;let{width:v,height:b,altitude:y=1.5}=t;const x=Math.pow(2,r);let A;v=v||1,b=b||1;let _=null;if(d)y=d[5]/2,A=ty(y);else{let n;if(t.fovy?(A=t.fovy,y=ey(A)):A=ty(y),g){const{top:t=0,bottom:e=0}=g;n=[0,Ev((t+b-e)/2,0,b)-b/2]}_=$b({width:v,height:b,scale:x,center:p&&[0,0,p[2]*Yb(e)],offset:n,pitch:i,fovy:A,nearZMultiplier:s,farZMultiplier:a}),Number.isFinite(l)&&(_.near=l),Number.isFinite(c)&&(_.far=c)}let w=function(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ab(a,a,[0,0,-i]),cb(a,a,-n*zb),ub(a,a,r*zb);const l=o/e;return lb(a,a,[l,l,l]),s&&ab(a,a,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),a}({height:b,pitch:i,bearing:o,scale:x,altitude:y});if(f){w=(new Mb).translate([512*f,0,0]).multiplyLeft(w)}super({...t,width:v,height:b,viewMatrix:w,longitude:n,latitude:e,zoom:r,..._,fovy:A,focalDistance:y}),ge(this,"longitude",void 0),ge(this,"latitude",void 0),ge(this,"pitch",void 0),ge(this,"bearing",void 0),ge(this,"altitude",void 0),ge(this,"fovy",void 0),ge(this,"orthographic",void 0),ge(this,"_subViewports",void 0),ge(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=n,this.zoom=r,this.pitch=i,this.bearing=o,this.altitude=y,this.fovy=A,this.orthographic=u,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let r=e;r<=n;r++){const t=r?new RS({...this,worldOffset:r}):this;this._subViewports.push(t)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*Yb(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)/Yb(n)]}addMetersToLngLat(t,e){return Zb(t,e)}panByPosition(t,e){const n=ry(e,this.pixelUnprojectionMatrix),r=pb([],this.projectFlat(t),function(t,e){return t[0]=-e[0],t[1]=-e[1],t}([],n)),i=pb([],this.center,r),[o,s]=this.unprojectFlat(i);return{longitude:o,latitude:s}}getBounds(){const t=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:r,unproject:i}=t,o={targetZ:e},s=i([0,r],o),a=i([n,r],o);let l,c;return(t.fovy?.5*t.fovy*oy:Math.atan(.5/t.altitude))>(90-t.pitch)*oy-.01?(l=sy(t,0,e),c=sy(t,n,e)):(l=i([0,0],o),c=i([n,0],o)),[s,a,c,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:s}=iy({width:n,height:r,bounds:t,...e});return new RS({width:n,height:r,longitude:i,latitude:o,zoom:s})}}ge(RS,"displayName","WebMercatorViewport");class IS{constructor(t){ge(this,"_inProgress",void 0),ge(this,"_handle",void 0),ge(this,"_timeline",void 0),ge(this,"time",void 0),ge(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,n;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(n=this.settings).onStart)||void 0===e||e.call(n,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const BS=()=>{},LS=2,DS=3,FS=t=>t,NS=1;class jS{constructor(t){ge(this,"getControllerState",void 0),ge(this,"props",void 0),ge(this,"propsInTransition",void 0),ge(this,"transition",void 0),ge(this,"onViewStateChange",void 0),ge(this,"onStateChange",void 0),ge(this,"_onTransitionUpdate",(t=>{const{time:e,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:s}}=t,a=s(e/o),l=n.interpolateProps(r,i,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new IS(t.timeline),this.onViewStateChange=t.onViewStateChange||BS,this.onStateChange=t.onStateChange||BS}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let r=n;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;r={...n,...t===LS?e:this.propsInTransition||n}}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===DS||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const n=this.getControllerState(t),r=this.getControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0===o)return;const s=i.initializeProps(t,r);this.propsInTransition={};const a={duration:o,easing:e.transitionEasing||FS,interpolator:i,interruption:e.transitionInterruption||NS,startProps:s.start,endProps:s.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null===t||void 0===t||t(e)}}}class zS{constructor(t){ge(this,"_propsToCompare",void 0),ge(this,"_propsToExtract",void 0),ge(this,"_requiredProps",void 0);const{compare:e,extract:n,required:r}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=r}arePropsEqual(t,e){for(const n of this._propsToCompare)if(!(n in t)||!(n in e)||!Mv(t[n],e[n]))return!1;return!0}initializeProps(t,e){const n={},r={};for(const i of this._propsToExtract)(i in t||i in e)&&(n[i]=t[i],r[i]=e[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const n=t[e];OS(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}const US=["longitude","latitude","zoom","bearing","pitch"],VS=["longitude","latitude","zoom"];class GS extends zS{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:US,required:VS},super(n.transitionProps),ge(this,"opts",void 0),this.opts=n}initializeProps(t,e){const n=super.initializeProps(t,e),{makeViewport:r,around:i}=this.opts;if(r&&i){const o=r(t),s=r(e),a=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){const r={};for(const i of this._propsToExtract)r[i]=Pv(t[i]||0,e[i]||0,n);if(e.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...e,...r});Object.assign(r,i.panByPosition(e.aroundPosition,Pv(t.around,e.around,n)))}return r}}const WS={transitionDuration:0},HS=t=>1-(1-t)*(1-t),JS=["wheel"],KS=["panstart","panmove","panend"],XS=["pinchstart","pinchmove","pinchend"],qS=["tripanstart","tripanmove","tripanend"],YS=["doubletap"],QS=["keydown"],ZS={};class $S{constructor(t){ge(this,"props",void 0),ge(this,"state",{}),ge(this,"transitionManager",void 0),ge(this,"eventManager",void 0),ge(this,"onViewStateChange",void 0),ge(this,"onStateChange",void 0),ge(this,"makeViewport",void 0),ge(this,"_controllerState",void 0),ge(this,"_events",{}),ge(this,"_interactionState",{isDragging:!1}),ge(this,"_customEvents",[]),ge(this,"_eventStartBlocked",null),ge(this,"_panMove",!1),ge(this,"invertPan",!1),ge(this,"dragMode","rotate"),ge(this,"inertia",0),ge(this,"scrollZoom",!0),ge(this,"dragPan",!0),ge(this,"dragRotate",!0),ge(this,"doubleClickZoom",!0),ge(this,"touchZoom",!0),ge(this,"touchRotate",!1),ge(this,"keyboard",!0),this.transitionManager=new jS({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;if(this._events[e])null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:n}=this.props,{offsetCenter:r}=t;return[r.x-e,r.y-n]}isPointInBounds(t,e){const{width:n,height:r}=this.props;if(e&&e.handled)return!1;const i=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r;return i&&e&&e.stopPropagation(),i}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(JS,c&&n),this.toggleEvents(KS,c),this.toggleEvents(XS,c&&(s||a)),this.toggleEvents(qS,c&&a),this.toggleEvents(YS,c&&o),this.toggleEvents(QS,c&&l),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={...t.getViewportProps(),...e},i=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),i){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,WS,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,WS,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:HS},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,WS,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:HS},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;t.srcEvent.preventDefault();const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=t;let o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:e}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,WS,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const n=this.controllerState.rotate({pos:e});return this.updateViewport(n,WS,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:HS},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return ZS._startPinchRotation=t.rotation,ZS._lastPinchEvent=t,this.updateViewport(n,WS,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:n}=t,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=t;e=e.rotate({deltaAngleX:ZS._startPinchRotation-n})}return this.updateViewport(e,WS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ZS._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:n}=ZS;if(this.touchZoom&&e&&n&&t.scale!==n.scale){const r=this.getCenter(t);let i=this.controllerState.rotateEnd();const o=Math.log2(t.scale),s=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),a=Math.pow(2,o+s*e/2);i=i.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:e,transitionEasing:HS},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ZS._startPinchRotation=null,ZS._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const l={};switch(t.srcEvent.code){case"Minus":a=e?s.zoomOut(n).zoomOut(n):s.zoomOut(n),l.isZooming=!0;break;case"Equal":a=e?s.zoomIn(n).zoomIn(n):s.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":e?(a=s.rotateLeft(i),l.isRotating=!0):(a=s.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":e?(a=s.rotateRight(i),l.isRotating=!0):(a=s.moveRight(r),l.isPanning=!0);break;case"ArrowUp":e?(a=s.rotateUp(o),l.isRotating=!0):(a=s.moveUp(r),l.isPanning=!0);break;case"ArrowDown":e?(a=s.rotateDown(o),l.isRotating=!0):(a=s.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new GS({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:WS}}class tC{constructor(t,e){ge(this,"_viewportProps",void 0),ge(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class eC extends tC{constructor(t){const{width:e,height:n,latitude:r,longitude:i,zoom:o,bearing:s=0,pitch:a=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:u=20,minZoom:d=0,maxPitch:h=60,minPitch:f=0,startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:b,startZoom:y,normalize:x=!0}=t;OS(Number.isFinite(i)),OS(Number.isFinite(r)),OS(Number.isFinite(o)),super({width:e,height:n,latitude:r,longitude:i,zoom:o,bearing:s,pitch:a,altitude:l,maxZoom:u,minZoom:d,maxPitch:h,minPitch:f,normalize:x,position:c},{startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:b,startZoom:y}),ge(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan(t){let{pos:e,startPos:n}=t;const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(t){let{pos:e,deltaAngleX:n=0,deltaAngleY:r=0}=t;const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,i,s,o):{bearing:o+n,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:n,scale:r}=t,{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=Ev(l,a,s);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=Ev(r,n,e);const{maxPitch:i,minPitch:o,pitch:s}=t;t.pitch=Ev(s,o,i);const{normalize:a=!0}=t;return a&&Object.assign(t,function(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=t;(i<-180||i>180)&&(i=Ib(i+180,360)-180),(a<-180||a>180)&&(a=Ib(a+180,360)-180);const l=Db(n/512);if(s<=l)s=l,o=0;else{const t=n/2/Math.pow(2,s),e=qb([0,t])[1];if(o<e)o=e;else{const e=qb([0,512-t])[1];o>e&&(o=e)}}return{width:e,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}(t)),t}_zoomFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,r){const i=t[0]-e[0],o=t[1]-e[1],s=t[1],a=e[1],{width:l,height:c}=this.getViewportProps(),u=i/l;let d=0;o>0?Math.abs(c-a)>5&&(d=o/(a-c)*1.2):o<0&&a>5&&(d=1-s/a),d=Ev(d,-1,1);const{minPitch:h,maxPitch:f}=this.getViewportProps();let p=n;return d>0?p=n+d*(f-n):d<0&&(p=n-d*(h-n)),{pitch:p,bearing:r+180*u}}}class nC extends $S{constructor(){super(...arguments),ge(this,"ControllerState",eC),ge(this,"transition",{transitionDuration:300,transitionInterpolator:new GS({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),ge(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t);(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class rC extends kS{get ViewportType(){return RS}get ControllerType(){return nC}}ge(rC,"displayName","MapView");const iC=[255,255,255],oC=1;let sC=0;class aC{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ge(this,"id",void 0),ge(this,"color",void 0),ge(this,"intensity",void 0),ge(this,"type","ambient");const{color:e=iC}=t,{intensity:n=oC}=t;this.id=t.id||"ambient-".concat(sC++),this.color=e,this.intensity=n}}const lC=[255,255,255],cC=1,uC=[0,0,-1];let dC=0;class hC{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ge(this,"id",void 0),ge(this,"color",void 0),ge(this,"intensity",void 0),ge(this,"type","directional"),ge(this,"direction",void 0),ge(this,"shadow",void 0);const{color:e=lC}=t,{intensity:n=cC}=t,{direction:r=uC}=t,{_shadow:i=!1}=t;this.id=t.id||"directional-".concat(dC++),this.color=e,this.intensity=n,this.type="directional",this.direction=new Qv(r).normalize().toArray(),this.shadow=i}getProjectedLight(t){return this}}class fC{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};ge(this,"id",void 0),ge(this,"gl",void 0),ge(this,"props",void 0);const{id:n}=e;this.id=n,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class pC extends fC{constructor(){super(...arguments),ge(this,"_lastRenderIndex",-1)}render(t){return oA(this.gl,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:n,viewports:r,views:i,onViewportActive:o,clearStack:s=!0,clearCanvas:a=!0}=t;t.pass=t.pass||"unknown";const l=this.gl;a&&function(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;oA(t,{viewport:[0,0,n,r]}),t.clear(16640)}(l,e),s&&(this._lastRenderIndex=-1);const c=[];for(const u of r){const r=i&&i[u.id];null===o||void 0===o||o(u);const s=this._getDrawLayerParams(u,t),a=u.subViewports||[u];for(const i of a){const o=this._drawLayersInViewport(l,{target:e,moduleParameters:n,viewport:i,view:r,pass:t.pass,layers:t.layers},s);c.push(o)}}return c}_getDrawLayerParams(t,e){let{layers:n,pass:r,isPicking:i=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:l}=e,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=[],d=gC(this._lastRenderIndex+1),h={layer:n[0],viewport:t,isPicking:i,renderPass:r,cullRect:s},f={};for(let p=0;p<n.length;p++){const e=n[p],i=this._shouldDrawLayer(e,h,o,f),s={shouldDrawLayer:i};i&&!c&&(s.layerRenderIndex=d(e,i),s.moduleParameters=this._getModuleParameters(e,a,r,l),s.layerParameters=this.getLayerParameters(e,p,t)),u[p]=s}return u}_drawLayersInViewport(t,e,n){let{layers:r,moduleParameters:i,pass:o,target:s,viewport:a,view:l}=e;const c=function(t,e){let{moduleParameters:n,target:r,viewport:i}=e;const o=r&&"default-framebuffer"!==r.id,s=n&&n.devicePixelRatio||lA(t),a=o?r.height:t.drawingBufferHeight,l=i;return[l.x*s,a-(l.y+l.height)*s,l.width*s,l.height*s]}(t,{moduleParameters:i,target:s,viewport:a});if(l&&l.props.clear){const e=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;aA(t,{scissorTest:!0,scissor:c},(()=>e_(t,e)))}const u={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};oA(t,{viewport:c});for(let h=0;h<r.length;h++){const t=r[h],{shouldDrawLayer:e,layerRenderIndex:i,moduleParameters:s,layerParameters:l}=n[h];if(e&&t.props.pickable&&u.pickableCount++,t.isComposite)u.compositeCount++;else if(e){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,i),s.viewport=a;try{t._drawLayer({moduleParameters:s,uniforms:{layerIndex:i},parameters:l})}catch(d){t.raiseError(d,"drawing ".concat(t," to ").concat(o))}}}return u}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,r){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let i=t.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){const t=e.layer.id;if(t in r||(r[t]=n(e)),!r[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,r){var i;const o=Object.assign(Object.create((null===(i=t.internalState)||void 0===i?void 0:i.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:lA(this.gl)});if(e)for(const a of e){var s;Object.assign(o,null===(s=a.getModuleParameters)||void 0===s?void 0:s.call(a,t))}return Object.assign(o,this.getModuleParameters(t,e),r)}}function gC(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const t=n[l]=n[l]||gC(e[l],e);c=t(i,o),n[a]=t}else Number.isFinite(s)?(c=s+(e[l]||0),n[a]=null):c=t;return o&&c>=t&&(t=c+1),e[a]=c,c};return r}class mC extends pC{constructor(t,e){super(t,e),ge(this,"shadowMap",void 0),ge(this,"depthBuffer",void 0),ge(this,"fbo",void 0),this.shadowMap=new qA(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new ZA(t,{format:33189,width:1,height:1}),this.fbo=new j_(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){const e=this.fbo;aA(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=t.viewports[0],r=lA(this.gl),i=n.width*r,o=n.height*r;i===e.width&&o===e.height||e.resize({width:i,height:o}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const vC=dS((function(t){let{viewport:e,center:n}=t;return new Mb(e.viewProjectionMatrix).invert().transform(n)})),bC=dS((function(t){let{viewport:e,shadowMatrices:n}=t;const r=[],i=e.pixelUnprojectionMatrix,o=e.isGeospatial?void 0:1,s=[[0,0,o],[e.width,0,o],[0,e.height,o],[e.width,e.height,o],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((t=>function(t,e){const[n,r,i]=t,o=ry([n,r,i],e);if(Number.isFinite(i))return o;return[o[0],o[1],0]}(t,i)));for(const a of n){const t=a.clone().translate(new Qv(e.center).negate()),n=s.map((e=>t.transform(e))),i=(new Mb).ortho({left:Math.min(...n.map((t=>t[0]))),right:Math.max(...n.map((t=>t[0]))),bottom:Math.min(...n.map((t=>t[1]))),top:Math.max(...n.map((t=>t[1]))),near:Math.min(...n.map((t=>-t[2]))),far:Math.max(...n.map((t=>-t[2])))});r.push(i.multiplyRight(a))}return r})),yC=[0,0,0,1],xC=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const AC={name:"shadow",dependencies:[xS],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||yC,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=vC({viewport:t.viewport,center:e.project_uCenter}),o=[],s=bC({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const n=s[a],r=n.clone().translate(new Qv(t.viewport.center).negate());e.project_uCoordinateSystem===dy.LNGLAT&&e.project_uProjectionMode===hy.WEB_MERCATOR?(s[a]=r,o[a]=i):(s[a]=n.clone().multiplyRight(xC),o[a]=r.transform(i))}for(let a=0;a<s.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],r["shadow_uProjectCenters[".concat(a,"]")]=o[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}(t,e):{}}},_C={color:[255,255,255],intensity:1},wC=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],SC=[0,0,0,200/255];class CC{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ge(this,"id","lighting-effect"),ge(this,"props",void 0),ge(this,"shadowColor",SC),ge(this,"shadow",void 0),ge(this,"ambientLight",void 0),ge(this,"directionalLights",void 0),ge(this,"pointLights",void 0),ge(this,"shadowPasses",[]),ge(this,"shadowMaps",[]),ge(this,"dummyShadowMap",null),ge(this,"programManager",void 0),ge(this,"shadowMatrices",void 0),this.setProps(t)}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow)),this.props=t}preRender(t,e){let{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}=e;if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=nS.getDefaultProgramManager(t),AC&&this.programManager.addDefaultModule(AC)),this.dummyShadowMap||(this.dummyShadowMap=new qA(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(AC),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const n=(new Mb).lookAt({eye:new Qv(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const n=new mC(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new aC(_C),this.directionalLights.push(new hC(wC[0]),new hC(wC[1])))}}const EC=new CC;class PC{constructor(){ge(this,"effects",void 0),ge(this,"_resolvedEffects",[]),ge(this,"_defaultEffects",[]),ge(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const e=this._defaultEffects;if(!e.find((e=>e.id===t.id))){const n=e.findIndex((e=>function(t,e){var n,r;return(null!==(n=t.order)&&void 0!==n?n:1/0)-(null!==(r=e.order)&&void 0!==r?r:1/0)}(e,t)>0));n<0?e.push(t):e.splice(n,0,t),this._setEffects(this.effects)}}setProps(t){"effects"in t&&(CS(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){const e={};for(const r of this.effects)e[r.id]=r;const n=[];for(const r of t){const t=e[r.id];t&&t!==r?t.setProps?(t.setProps(r.props),n.push(t)):(t.cleanup(),n.push(r)):n.push(r),delete e[r.id]}for(const r in e)e[r].cleanup();this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),t.some((t=>t instanceof CC))||this._resolvedEffects.push(EC),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class MC extends pC{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}const TC={blendFunc:[1,0,32771,0],blendEquation:32774};class OC extends pC{constructor(){super(...arguments),ge(this,"pickZ",void 0),ge(this,"_colorEncoderState",null)}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer(t){let{layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:c,height:u},cullRect:d,effects:h,pass:f="picking",pickZ:p,moduleParameters:g}=t;const m=this.gl;this.pickZ=p;const v=this._resetColorEncoder(p),b=aA(m,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...TC,blend:!p},(()=>super.render({target:s,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:d,effects:null===h||void 0===h?void 0:h.filter((t=>t.useInPicking)),pass:f,isPicking:!0,moduleParameters:g})));this._colorEncoderState=null;return{decodePickingColor:v&&kC.bind(null,v),stats:b}}shouldDrawLayer(t){const{pickable:e,operation:n}=t.props;return e&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,n){const r={...t.props.parameters},{pickable:i,operation:o}=t.props;return this._colorEncoderState?i&&o.includes("draw")&&(Object.assign(r,TC),r.blend=!0,r.blendColor=function(t,e,n){const{byLayer:r,byAlpha:i}=t;let o,s=r.get(e);s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},r.set(e,s),i[o]=s):(Rg.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,t,n)):r.blend=!1,o.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function kC(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class RC{constructor(t){ge(this,"gl",void 0),ge(this,"layerFilter",void 0),ge(this,"drawPickingColors",void 0),ge(this,"drawLayersPass",void 0),ge(this,"pickLayersPass",void 0),ge(this,"renderCount",void 0),ge(this,"_needsRedraw",void 0),ge(this,"renderBuffers",void 0),ge(this,"lastPostProcessEffect",void 0),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new MC(t),this.pickLayersPass=new OC(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t,target:t.target||j_.getDefaultFramebuffer(this.gl)};n.effects&&this._preRender(n.effects,n);const r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target,i=e.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,Lg("deckRenderer.renderLayers",this,i,t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{};for(const n of t)e.preRenderStats[n.id]=n.preRender(this.gl,e),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this;0===t.length&&t.push(new j_(this.gl),new j_(this.gl));for(const e of t)e.resize()}_postRender(t,e){const{renderBuffers:n}=this,r={...e,inputBuffer:n[0],swapBuffer:n[1],target:null};for(const i of t)if(i.postRender){if(i.id===this.lastPostProcessEffect){r.target=e.target,i.postRender(this.gl,r);break}const t=i.postRender(this.gl,r);r.inputBuffer=t,r.swapBuffer=t===n[0]?n[1]:n[0]}}}const IC={pickedColor:null,pickedObjectIndex:-1};function BC(t){let{pickedColors:e,decodePickingColor:n,deviceX:r,deviceY:i,deviceRadius:o,deviceRect:s}=t;const{x:a,y:l,width:c,height:u}=s;let d=o*o,h=-1,f=0;for(let p=0;p<u;p++){const t=p+l-i,n=t*t;if(n>d)f+=4*c;else for(let i=0;i<c;i++){if(e[f+3]-1>=0){const t=i+a-r,e=t*t+n;e<=d&&(d=e,h=f)}f+=4}}if(h>=0){const t=e.slice(h,h+4),r=n(t);if(r){const e=Math.floor(h/4/c),n=h/4-e*c;return{...r,pickedColor:t,pickedX:a+n,pickedY:l+e}}Rg.error("Picked non-existent layer. Is picking buffer corrupt?")()}return IC}function LC(t){let e,{pickInfo:n,viewports:r,pixelRatio:i,x:o,y:s,z:a}=t,l=r[0];if(r.length>1&&(l=function(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}((null===n||void 0===n?void 0:n.pickedViewports)||r,{x:o,y:s})),l){const t=[o-l.x,s-l.y];void 0!==a&&(t[2]=a),e=l.unproject(t)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:e,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:i}}function DC(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,l=s?[s]:[];if("hover"===r){const t=n.index,e=n.layerId,r=s?s.props.id:null;if(r!==e||a!==t){if(r!==e){const t=i.find((t=>t.props.id===e));t&&l.unshift(t)}n.layerId=r,n.index=a,n.info=null}}const c=LC(t),u=new Map;return u.set(null,c),l.forEach((t=>{let e={...c};t===s&&(e.color=o,e.index=a,e.picked=!0),e=FC({layer:t,info:e,mode:r});const i=e.layer;t===s&&"hover"===r&&(n.info=e),u.set(i.id,e),"hover"===r&&i.updateAutoHighlight(e)})),u}function FC(t){let{layer:e,info:n,mode:r}=t;for(;e&&n;){const t=n.layer||null;n.sourceLayer=t,n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:t}),e=e.parent}return n}class NC{constructor(t){ge(this,"gl",void 0),ge(this,"pickingFBO",void 0),ge(this,"depthFBO",void 0),ge(this,"pickLayersPass",void 0),ge(this,"layerFilter",void 0),ge(this,"lastPickedInfo",void 0),ge(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new OC(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject(t){let{x:e,y:n,layers:r,viewports:i}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?r.find((t=>t.id===s)):null,c=a&&i.find((t=>t.id===a))||i[0],u=c&&c.unproject([e-c.x,n-c.y]),d={x:e,y:n,viewport:c,coordinate:u,layer:l};return{...o,...d}}_resizeBuffer(){var t,e;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new j_(n),j_.isSupported(n,{colorBufferFloat:!0}))){const t=new j_(n);t.attach({36064:new qA(n,{format:vx(n)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite));return e.length?e:null}_pickClosestObject(t){let{layers:e,views:n,viewports:r,x:i,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:d}=t;const h=this._getPickable(e),f=lA(this.gl);if(!h)return{result:[],emptyInfo:LC({viewports:r,x:i,y:o,pixelRatio:f})};this._resizeBuffer();const p=cA(this.gl,[i,o],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*f),{width:v,height:b}=this.pickingFBO,y=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:v,deviceHeight:b}),x={x:i-s,y:o-s,width:2*s+1,height:2*s+1};let A;const _=[],w=new Set;for(let S=0;S<a;S++){let t,e;if(y){t=BC({...this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:y,cullRect:x,effects:d,pass:"picking:".concat(l)}),deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:y})}else t={pickedColor:null,pickedObjectIndex:-1};if(t.pickedLayer&&c&&this.depthFBO){const{pickedColors:i}=this._drawAndSample({layers:[t.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:t.pickedX,y:t.pickedY,width:1,height:1},cullRect:x,effects:d,pass:"picking:".concat(l,":z")},!0);i[3]&&(e=i[0])}t.pickedLayer&&S+1<a&&(w.add(t.pickedLayer),t.pickedLayer.disablePickingIndex(t.pickedObjectIndex)),A=DC({pickInfo:t,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:r,x:i,y:o,z:e,pixelRatio:f});for(const n of A.values())n.layer&&_.push(n);if(!t.pickedColor)break}for(const S of w)S.restorePickingColors();return{result:_,emptyInfo:A.get(null)}}_pickVisibleObjects(t){let{layers:e,views:n,viewports:r,x:i,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:d}=t;const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const f=lA(this.gl),p=cA(this.gl,[i,o],!0),g=p.x,m=p.y+p.height,v=cA(this.gl,[i+s,o+a],!0),b=v.x+v.width,y=v.y,x={x:g,y:y,width:b-g,height:m-y},A=function(t){let{pickedColors:e,decodePickingColor:n}=t;const r=new Map;if(e)for(let i=0;i<e.length;i+=4)if(e[i+3]-1>=0){const t=e.slice(i,i+4),o=t.join(",");if(!r.has(o)){const e=n(t);e?r.set(o,{...e,color:t}):Rg.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:x,cullRect:{x:i,y:o,width:s,height:a},effects:d,pass:"picking:".concat(l)})),_=new Map,w=Number.isFinite(c);for(let C=0;C<A.length;C++){var S;if(w&&c&&_.size>=c)break;const t=A[C];let e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:f};e=FC({layer:t.pickedLayer,info:e,mode:l});const n=null!==(S=e.object)&&void 0!==S?S:"".concat(e.layer.id,"[").concat(e.index,"]");_.has(n)||_.set(n,e)}return Array.from(_.values())}_drawAndSample(t){let{layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:l}=t,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=c?this.depthFBO:this.pickingFBO,d={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const b of a)b.useInPicking&&(d.preRenderStats[b.id]=b.preRender(this.gl,d));const{decodePickingColor:h}=this.pickLayersPass.render(d),{x:f,y:p,width:g,height:m}=o,v=new(c?Float32Array:Uint8Array)(g*m*4);return a_(u,{sourceX:f,sourceY:p,sourceWidth:g,sourceHeight:m,target:v}),{pickedColors:v,decodePickingColor:h}}_getPickingRect(t){let{deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}=t;const s=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-s,c=Math.min(o,n+r+1)-a;return l<=0||c<=0?null:{x:s,y:a,width:l,height:c}}}const jC={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class zC{constructor(t){ge(this,"el",null),ge(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,jC),e.appendChild(this.el))}setTooltip(t,e,n){const r=this.el;if(r){if("string"===typeof t)r.innerText=t;else{if(!t)return this.isVisible=!1,void(r.style.display="none");t.text&&(r.innerText=t.text),t.html&&(r.innerHTML=t.html),t.className&&(r.className=t.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),t&&"object"===typeof t&&"style"in t&&Object.assign(r.style,t.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:UC}=globalThis,VC="undefined"!==typeof Image,GC="undefined"!==typeof ImageBitmap,WC=Boolean(UC),HC=!!pm||WC;function JC(t){const e=XC(t);if(!e)throw new Error("Not an image");return e}function KC(t){switch(JC(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function XC(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&t instanceof Image?"image":t&&"object"===typeof t&&t.data&&t.width&&t.height?"data":null}const qC=/^data:image\/svg\+xml/,YC=/\.svg((\?|#).*)?$/;function QC(t){return t&&(qC.test(t)||YC.test(t))}function ZC(t,e){if(QC(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function $C(t,e,n){const r=function(t,e){if(QC(e)){let e=(new TextDecoder).decode(t);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(n){throw new Error(n.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return ZC(t,e)}(t,n),i=self.URL||self.webkitURL,o="string"!==typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(i){r(i)}}))}(o||r,e)}finally{o&&i.revokeObjectURL(o)}}const tE={};let eE=!0;async function nE(t,e,n){let r;if(QC(n)){r=await $C(t,e,n)}else r=ZC(t,n);const i=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t){for(const e in t||tE)return!1;return!0}(e)&&eE||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),eE=!1}return await createImageBitmap(t)}(r,i)}function rE(t){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=(i=e,[...i].map((t=>t.charCodeAt(0))));var i;for(let o=0;o<r.length;++o)if(r[o]!==t[o+n])return!1;return!0}(t,"ftyp",4)?0===(96&t[8])?null:function(t){switch(function(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}const iE=!1,oE=!0;function sE(t){const e=aE(t);return function(t){const e=aE(t),n=e.byteLength>=24&&2303741511===e.getUint32(0,iE);if(!n)return null;return{mimeType:"image/png",width:e.getUint32(16,iE),height:e.getUint32(20,iE)}}(e)||function(t){const e=aE(t),n=e.byteLength>=3&&65496===e.getUint16(0,iE)&&255===e.getUint8(2);if(!n)return null;const{tableMarkers:r,sofMarkers:i}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let o=2;for(;o+9<e.byteLength;){const t=e.getUint16(o,iE);if(i.has(t))return{mimeType:"image/jpeg",height:e.getUint16(o+5,iE),width:e.getUint16(o+7,iE)};if(!r.has(t))return null;o+=2,o+=e.getUint16(o,iE)}return null}(e)||function(t){const e=aE(t),n=e.byteLength>=10&&1195984440===e.getUint32(0,iE);if(!n)return null;return{mimeType:"image/gif",width:e.getUint16(6,oE),height:e.getUint16(8,oE)}}(e)||function(t){const e=aE(t),n=e.byteLength>=14&&16973===e.getUint16(0,iE)&&e.getUint32(2,oE)===e.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:e.getUint32(18,oE),height:e.getUint32(22,oE)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=rE(e);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(e)}function aE(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const lE={id:"image",module:"images",name:"Images",version:"3.4.15",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:i}=n||{};let o;switch(function(t){switch(t){case"auto":case"data":return function(){if(GC)return"imagebitmap";if(VC)return"image";if(HC)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return GC||VC||HC;case"imagebitmap":return GC;case"image":return VC;case"data":return HC;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r)){case"imagebitmap":o=await nE(t,e,i);break;case"image":o=await $C(t,e,i);break;case"data":o=await async function(t,e){const{mimeType:n}=sE(t)||{},r=globalThis._parseImageNode;return Zg(r),await r(t,n)}(t);break;default:Zg(!1)}return"data"===r&&(o=KC(o)),o},tests:[t=>Boolean(sE(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};const cE={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse};const uE=function(){const t="8.9.35",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(Rg.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Rg,_registerLoggers:Bg},function(t){const e=lv();t=Array.isArray(t)?t:[t];for(const n of t){const t=tm(n);e.find((e=>t===e))||e.unshift(t)}}([cE,[lE,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}(),dE=globalThis;function hE(t){if(!t&&!hg())return"Node";if(dg(t))return"Electron";const e="undefined"!==typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":dE.chrome?"Chrome":dE.safari?"Safari":dE.mozInnerScreenX?"Firefox":"Unknown"}class fE extends TA{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=vx(t),r=D_(t,f_);let i=n||r;for(const o of e)switch(o){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:xA(!1)}return i}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return fE.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const pE=hg()&&"undefined"!==typeof document;let gE=0;class mE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>gA(t)),onAddHTML:n=null,onInitialize:r=(()=>{}),onRender:i=(()=>{}),onFinalize:o=(()=>{}),onError:s,gl:a=null,glOptions:l={},debug:c=!1,createFramebuffer:u=!1,autoResizeViewport:d=!0,autoResizeDrawingBuffer:h=!0,stats:f=yA.get("animation-loop-".concat(gE++))}=t;let{useDevicePixels:p=!0}=t;"useDevicePixelRatio"in t&&(hx.deprecated("useDevicePixelRatio","useDevicePixels")(),p=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:r,onRender:i,onFinalize:o,onError:s,gl:a,glOptions:l,debug:c,createFramebuffer:u},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:d,autoResizeDrawingBuffer:h,useDevicePixels:p}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return xA("string"===typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=fE.isSupported(this.gl,["timers"])?new fE(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())}));return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return hx.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=pE?new Promise(((t,e)=>{pE&&"complete"===document.readyState?t(document):window.addEventListener("load",(()=>{t(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):function(t){return"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(t)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"===typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!==typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?mA(this.props.gl,t):this.onCreateContext(t),!mx(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");oA(this.gl,Ux),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&vA(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new j_(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var vE=n(6895);const bE={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const n=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(e=>e.pointerId===t.pointerId))||n.push(t)),e.call(this,t)}}(vE.PointerEventInput),vE.MouseInput.prototype.handler=function(t){let e=bE[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const yE=vE.Manager,xE=vE;class AE{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}const _E=xE?[[xE.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[xE.Rotate,{enable:!1}],[xE.Pinch,{enable:!1}],[xE.Swipe,{enable:!1}],[xE.Pan,{threshold:0,enable:!1}],[xE.Press,{enable:!1}],[xE.Tap,{event:"doubletap",taps:2,enable:!1}],[xE.Tap,{event:"anytap",enable:!1}],[xE.Tap,{enable:!1}]]:null,wE={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},SE={doubletap:["tap"]},CE={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},EE={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},PE={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},ME={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},TE="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",OE="undefined"!==typeof window?window:n.g;"undefined"!==typeof n.g?n.g:window,"undefined"!==typeof document&&document;let kE=!1;try{const t={get passive(){return kE=!0,!0}};OE.addEventListener("test",null,t),OE.removeEventListener("test",null)}catch(g$){kE=!1}const RE=-1!==TE.indexOf("firefox"),{WHEEL_EVENTS:IE}=EE,BE="wheel",LE=4.000244140625;class DE extends AE{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;OE.WheelEvent&&(RE&&t.deltaMode===OE.WheelEvent.DOM_DELTA_PIXEL&&(e/=OE.devicePixelRatio),t.deltaMode===OE.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%LE===0&&(e=Math.floor(e/LE)),t.shiftKey&&e&&(e*=.25),this.callback({type:BE,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(IE),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!kE&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===BE&&(this.options.enable=e)}}const{MOUSE_EVENTS:FE}=EE,NE="pointermove",jE="pointerover",zE="pointerout",UE="pointerenter",VE="pointerleave";class GE extends AE{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(FE),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===NE&&(this.enableMoveEvent=e),t===jE&&(this.enableOverEvent=e),t===zE&&(this.enableOutEvent=e),t===UE&&(this.enableEnterEvent=e),t===VE&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(jE,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(zE,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(UE,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(VE,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit(NE,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:WE}=EE,HE="keydown",JE="keyup";class KE extends AE{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:HE,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:JE,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(WE),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===HE&&(this.enableDownEvent=e),t===JE&&(this.enableUpEvent=e)}}const XE="contextmenu";class qE extends AE{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:XE,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===XE&&(this.options.enable=e)}}const YE={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function QE(t){const e=YE[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===i,s=2===i,a=3===i):2===e?(o=Boolean(1&n),s=Boolean(4&n),a=Boolean(2&n)):1===e&&(o=0===r,s=1===r,a=2===r),{leftButton:o,middleButton:s,rightButton:a}}function ZE(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o}}}const $E={srcElement:"root",priority:0};class tP{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:s}=this;let a=$E;"string"===typeof n||n&&n.addEventListener?a={...$E,srcElement:n}:n&&(a={...$E,...n});let l=s.get(a.srcElement);l||(l=[],s.set(a.srcElement,l));const c={type:t,handler:e,srcElement:a.srcElement,priority:a.priority};r&&(c.once=!0),i&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(t,e){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);const t=r.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&r.delete(o.srcElement)}}this._active=n.some((t=>!t.passive))}_emit(t,e){const n=this.handlersByElement.get(e);if(n){let e=!1;const r=()=>{t.handled=!0},i=()=>{t.handled=!0,e=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:l,once:c}=n[s];if(l({...t,type:a,stopPropagation:r,stopImmediatePropagation:i}),c&&o.push(n[s]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:n}=o[t];this.remove(e,n)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...QE(t),...ZE(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const eP={events:null,recognizers:null,recognizerOptions:{},Manager:yE,touchAction:"none",tabIndex:0};class nP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this._onBasicInput=t=>{const{srcEvent:e}=t,n=CE[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...eP,...e},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,n=e.Manager;this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||_E}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(wE).forEach((t=>{const e=this.manager.get(t);e&&wE[t].forEach((t=>{e.recognizeWith(t)}))}));for(const r in e.recognizerOptions){const t=this.manager.get(r);if(t){const n=e.recognizerOptions[r];delete n.enable,t.set(n)}}this.wheelInput=new DE(t,this._onOtherEvent,{enable:!1}),this.moveInput=new GE(t,this._onOtherEvent,{enable:!1}),this.keyInput=new KE(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new qE(t,this._onOtherEvent,{enable:!1});for(const[r,i]of this.events)i.isEmpty()||(this._toggleRecognizer(i.recognizerName,!0),this.manager.on(r,i.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:n}=this;if(!n)return;const r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});const i=SE[t];i&&!this.options.recognizers&&i.forEach((i=>{const o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,r,i){if("string"!==typeof t){n=e;for(const e in t)this._addEventHandler(e,t[e],n,r,i);return}const{manager:o,events:s}=this,a=ME[t]||t;let l=s.get(a);l||(l=new tP(this),s.set(a,l),l.recognizerName=PE[a]||a,o&&o.on(a,l.handleEvent)),l.add(t,e,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!==typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:n}=this,r=ME[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){const{recognizerName:t}=i;let e=!1;for(const r of n.values())if(r.recognizerName===t&&!r.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function rP(){}const iP={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:rP,onResize:rP,onViewStateChange:rP,onInteractionStateChange:rP,onBeforeRender:rP,onAfterRender:rP,onLoad:rP,onError:t=>Rg.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:t=>{let{isDragging:e}=t;return e?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class oP{constructor(t){ge(this,"props",void 0),ge(this,"width",0),ge(this,"height",0),ge(this,"userData",{}),ge(this,"canvas",null),ge(this,"viewManager",null),ge(this,"layerManager",null),ge(this,"effectManager",null),ge(this,"deckRenderer",null),ge(this,"deckPicker",null),ge(this,"eventManager",null),ge(this,"tooltip",null),ge(this,"metrics",void 0),ge(this,"animationLoop",void 0),ge(this,"stats",void 0),ge(this,"viewState",void 0),ge(this,"cursorState",void 0),ge(this,"_needsRedraw",void 0),ge(this,"_pickRequest",void 0),ge(this,"_lastPointerDownInfo",null),ge(this,"_metricsCounter",void 0),ge(this,"_onPointerMove",(t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t})),ge(this,"_onEvent",(t=>{const e=py[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,s=o&&(o[e.handler]||o.props[e.handler]),a=this.props[e.handler];let l=!1;s&&(l=s.call(o,i,t)),!l&&a&&a(i,t)})),ge(this,"_onPointerDown",(t=>{const e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...iP,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Rg.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===hE()&&Rg.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new Ug({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&_v.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,n,r,i,o,s,a,l;(null===(t=this.animationLoop)||void 0===t||t.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(i=this.deckRenderer)||void 0===i||i.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas)||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Rg.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Rg.removed("onLayerClick","onClick")(),t.initialViewState&&!CS(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||o,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return OS(this.viewManager),this.viewManager.views}getViewports(t){return OS(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_pick(t,e,n){OS(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();const i=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(e).timeEnd(),i}_createCanvas(t){let e=t.canvas;if("string"===typeof e&&(e=document.getElementById(e),OS(e)),!e){e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay";(t.parent||document.body).appendChild(e)}return Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:n}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(n||0===n){var r;const e=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(r=t.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){var t,e;const{canvas:n}=this;if(!n)return;const r=null!==(t=n.clientWidth)&&void 0!==t?t:n.width,i=null!==(e=n.clientHeight)&&void 0!==e?e:n.height;var o,s;r===this.width&&i===this.height||(this.width=r,this.height=i,null===(o=this.viewManager)||void 0===o||o.setProps({width:r,height:i}),null===(s=this.layerManager)||void 0===s||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:i}))}_createAnimationLoop(t){const{width:e,height:n,gl:r,glOptions:i,debug:o,onError:s,onBeforeRender:a,onAfterRender:l,useDevicePixels:c}=t;return new mE({width:e,height:n,useDevicePixels:c,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:t=>gA({...i,...t,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:l,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new rC({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let i=r,o=!1;for(const s of n){var e;i=s,o=(null===(e=s.layer)||void 0===e?void 0:e.onHover(s,t.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip&&this.tooltip){const t=this.props.getTooltip(i);this.tooltip.setTooltip(t,i.x,i.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,mA(t,{enable:!0,copyState:!0})),this.tooltip=new zC(this.canvas),oA(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const e=new Zp;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new nP(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in py)this.eventManager.on(r,this._onEvent);this.viewManager=new ES({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new SS(t,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new PC,this.deckRenderer=new RC(t),this.deckPicker=new NC(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{gl:n}=this.layerManager.context;oA(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Rg.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const n=yA.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}ge(oP,"defaultProps",iP),ge(oP,"VERSION",uE);const sP="undefined"!==typeof window?h.useLayoutEffect:h.useEffect;function aP(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}class lP{constructor(t,e){ge(this,"opts",void 0),ge(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];const{value:n}=this.source,{size:r}=e;let i=n;if(n&&n.length!==r){i=new Float32Array(r);const t=e.elementOffset||0;for(let e=0;e<r;++e)i[e]=n[t+e]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function cP(t){return t.stride||t.size*t.bytesPerElement}function uP(t,e){e.offset&&Rg.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=cP(t),r=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:r,stride:n}}class dP{constructor(t,e,n){ge(this,"gl",void 0),ge(this,"id",void 0),ge(this,"size",void 0),ge(this,"settings",void 0),ge(this,"value",void 0),ge(this,"doublePrecision",void 0),ge(this,"_buffer",void 0),ge(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;const r=e.logicalType||e.type,i=5130===r;let o,{defaultValue:s}=e;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),o=i?5126:!r&&e.isIndexed?t&&L_(t,m_)?5125:5123:r||5126;let a=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||o||5126);this.doublePrecision=i,i&&!1===e.fp64&&(a=Float32Array),this.value=null,this.settings={...e,defaultType:a,defaultValue:s,logicalType:r,type:o,size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:e}=this.settings;this._buffer=new UA(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*cP(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),_v.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){const n={},r=this.value instanceof Float64Array,i=function(t,e){const n=uP(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),e||{});return n[t]=new lP(this,i.high),n["".concat(t,"64Low")]=r?new lP(this,i.low):new Float32Array(this.size),n}if(e){const n=uP(this.getAccessor(),e);return{[t]:new lP(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:n,size:r}=this,i=n*r;if(e&&i&&e.length>=i){const n=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let t=0;t<i;)for(let i=0;i<r;i++){const r=e[t++];r<n[i]&&(n[i]=r),r>o[i]&&(o[i]=r)}t=[n,o]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let n;n=ArrayBuffer.isView(t)?{value:t}:t instanceof UA?{buffer:t}:t;const r={...this.settings,...n};if(e.bufferAccessor=r,e.bounds=null,n.constant){let t=n.value;t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t));if(!(!e.constant||!this._areValuesEqual(t,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=t}else if(n.buffer){const t=n.buffer;e.externalBuffer=t,e.constant=!1,this.value=n.value||null;const i=n.value instanceof Float64Array;r.type=n.type||t.accessor.type,r.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=cP(r)}else if(n.value){this._checkExternalBuffer(n);let t=n.value;e.externalBuffer=null,e.constant=!1,this.value=t,r.bytesPerElement=t.BYTES_PER_ELEMENT,r.stride=cP(r);const{buffer:i,byteOffset:o}=this;this.doublePrecision&&t instanceof Float64Array&&(t=nb(t,r));const s=t.byteLength+o+2*r.stride;i.byteLength<s&&i.reallocate(s),i.setAccessor(null),i.subData({data:t,offset:o}),r.type=n.type||i.accessor.type}return!0}updateSubBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const e=this.value,{startOffset:n=0,endOffset:r}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?nb(e,{size:this.size,startIndex:n,endIndex:r}):e.subarray(n,r),offset:n*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,r=n.allocatedValue,i=_v.allocate(r,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=i;const{buffer:o,byteOffset:s}=this;return o.byteLength<i.byteLength+s&&(o.reallocate(i.byteLength+s),e&&r&&o.subData({data:r instanceof Float64Array?nb(r,this):r,offset:s})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||Rg.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((t=>(t+128)/255*2-1));case 5122:return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case 5121:return new Float32Array(t).map((t=>t/255));case 5123:return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t){let t=i;for(;--t>=0;)e[n+t]=r[t];return e}switch(i){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0];break;default:let o=i;for(;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:r[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}const hP=[],fP=[];function pP(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=hP;const i={index:-1,data:t,target:[]};return t?"function"===typeof t[Symbol.iterator]?r=t:t.length>0&&(fP.length=t.length,r=fP):r=hP,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function gP(t){return t&&t[Symbol.asyncIterator]}function mP(t,e){const{size:n,stride:r,offset:i,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(e,r)=>{let{index:i,target:a}=r;if(!o){const e=i*l+c;for(let r=0;r<n;r++)a[r]=t[e+r];return a}const d=o[i],h=o[i+1]||u;let f;if(s){f=new Array(h-d);for(let e=d;e<h;e++){const r=e*l+c;a=new Array(n);for(let e=0;e<n;e++)a[e]=t[r+e];f[e-d]=a}}else if(l===n)f=t.subarray(d*n+c,h*n+c);else{f=new t.constructor((h-d)*n);let e=0;for(let r=d;r<h;r++){const i=r*l+c;for(let r=0;r<n;r++)f[e++]=t[i+r]}}return f}}const vP=[],bP=[[0,1/0]];function yP(t){const{source:e,target:n,start:r=0,size:i,getData:o}=t,s=t.end||n.length,a=e.length,l=s-r;if(a>l)return void n.set(e.subarray(0,l),r);if(n.set(e,r),!o)return;let c=a;for(;c<l;){const t=o(c,e);for(let e=0;e<i;e++)n[r+c]=t[e]||0,c++}}const xP={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function AP(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...xP[n],...e,...t,type:n}}function _P(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function wP(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function SP(t){t.push(t.shift())}function CP(t,e){const{doublePrecision:n,settings:r,value:i,size:o}=t,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*s}function EP(t){let{buffer:e,numInstances:n,attribute:r,fromLength:i,fromStartIndices:o,getData:s=(t=>t)}=t;const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,l=r.size*a,c=r.byteOffset,u=r.startIndices,d=o&&u,h=CP(r,n),f=r.isConstant;if(!d&&i>=h)return;const p=f?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!f){const t=s;s=(e,n)=>r.normalizeConstant(t(e,n))}const g=f?(t,e)=>s(p,e):(t,e)=>s(p.subarray(t,t+l),e),m=e.getData({length:i}),v=new Float32Array(h);!function(t){let{source:e,target:n,size:r,getData:i,sourceStartIndices:o,targetStartIndices:s}=t;if(!Array.isArray(s))return yP({source:e,target:n,size:r,getData:i}),n;let a=0,l=0;const c=i&&((t,e)=>i(t+l,e)),u=Math.min(o.length,s.length);for(let d=1;d<u;d++){const t=o[d]*r,i=s[d]*r;yP({source:e.subarray(a,t),target:n,start:l,end:i,size:r,getData:c}),a=t,l=i}l<n.length&&yP({source:[],target:n,start:l,size:r,getData:c})}({source:m,target:v,sourceStartIndices:o,targetStartIndices:u,size:l,getData:g}),e.byteLength<v.byteLength+c&&e.reallocate(v.byteLength+c),e.subData({data:v,offset:c})}class PP extends dP{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:bP}),ge(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!==typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,n=this.settings.transition,r=Array.isArray(e)?t[e.find((e=>t[e]))]:t[e];return AP(r,n)}setNeedsUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=function(t,e){if(t===bP)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const n=[],r=t.length;let i=0;for(let o=0;o<r;o++){const r=t[o];r[1]<e[0]?(n.push(r),i=o+1):r[0]>e[1]?n.push(r):e=[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}return n.splice(i,0,e),n}(this.state.updateRanges,[t,n])}else this.state.updateRanges=bP}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=vP}setNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(t,e.updateRanges!==bP),!0))}updateBuffer(t){let{numInstances:e,data:n,props:r,context:i}=t;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[t,a]of o)s.call(i,this,{data:n,startRow:t,endRow:a,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[t,n]of o){const r=Number.isFinite(t)?this.getVertexOffset(t):0,i=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){if(void 0===t||"function"===typeof t)return!1;return this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:r}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw();if(r.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const i=t;OS(ArrayBuffer.isView(i.value),"invalid ".concat(r.accessor));const o=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=mP(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const n in t)Object.assign(e,super.getShaderAttributes(n,t[n]));return e}_autoUpdater(t,e){let{data:n,startRow:r,endRow:i,props:o,numInstances:s}=e;if(t.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:d}=t,{accessor:h,transform:f}=a,p=l.binaryAccessor||("function"===typeof h?h:o[h]);OS("function"===typeof p,'accessor "'.concat(h,'" is not a function'));let g=t.getVertexOffset(r);const{iterable:m,objectInfo:v}=pP(n,r,i);for(const b of m){v.index++;let e=p(b,v);if(f&&(e=f.call(this,e)),d){const n=(v.index<d.length-1?d[v.index+1]:s)-d[v.index];if(e&&Array.isArray(e[0])){let n=g;for(const r of e)t._normalizeValue(r,c,n),n+=u}else e&&e.length>u?c.set(e,g):(t._normalizeValue(e,v.target,0),Ng({target:c,source:v.target,start:g,count:n}));g+=n*u}else t._normalizeValue(e,c,g),g+=u}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||"function"===typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const MP="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",TP="#version 300 es\n".concat(MP);function OP(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;return{qualifier:r,type:i,name:o.split(";")[0]}}function kP(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return 300===e?TP:e>300?"#version ".concat(e,"\n").concat(MP):"void main() {gl_FragColor = vec4(0);}";const o=function(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return _y(!1),null}}(n,r);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(r," ").concat(n,";\nout vec4 ").concat(i,";\nvoid main() {\n  ").concat(i," = ").concat(o,";\n}"):"varying ".concat(r," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class RP extends TA{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return vx(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yx(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,EA(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:r,byteSize:i,byteOffset:o}=this._getBufferParams(e);return n<0?(this.unused[t]=r,hx.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,r,o,i),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,r;return t instanceof UA===!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}class IP{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=e;return{attributes:Object.assign({},n,t.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof UA?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&xA(vx(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const t=this.feedbackMap[r];r in e&&(n[t]=r)}Object.assign(n,t.feedbackBuffers);for(const r in n){const t=n[r];if("string"===typeof t){const i=e[t],{byteLength:o,usage:s,accessor:a}=i;n[r]=this._createNewBuffer(r,{byteLength:o,usage:s,accessor:a})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e;const{program:r}=n;t.transformFeedback=new RP(this.gl,{program:r,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],xA(n[i]instanceof UA)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){const n=new UA(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function BP(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}const LP={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},DP="transform_uSampler_",FP="transform_uSize_",NP="transform_position";function jP(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t;let o=Object.keys(n).length,s=null;const a={};let l=e,c={};if(o>0||r){const t=l.split("\n"),e=t.slice();if(t.forEach(((t,i,l)=>{if(o>0){const r=function(t,e){const n={},r=function(t){return OP(t,["attribute","in"])}(t);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:r,sizeName:s,uniformDeclerations:a}=function(t){const e="".concat(DP).concat(t),n="".concat(FP).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),l=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return _y(!1),null}}(i),c="  ".concat(i," ").concat(o," = transform_getInput(").concat(r,", ").concat(s,").").concat(l,";\n");n[r]=o;return{updatedLine:e,inject:{"vs:#decl":a,"vs:#main-start":c},samplerTextureMap:n}}return null}(t,n);if(r){const{updatedLine:t,inject:n}=r;e[i]=t,c=Xy([c,n]),Object.assign(a,r.samplerTextureMap),o--}}r&&!s&&(s=function(t,e){const n=OP(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){xA(i);const t="".concat(FP).concat(r),e="uniform vec2 ".concat(t,";\n"),n="     vec2 ".concat(NP," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(NP,", 0, 1.);\n");c=Xy([c,{"vs:#decl":e,"vs:#main-start":n}])}l=e.join("\n")}return{vs:l,targetTextureType:s,inject:c,samplerTextureMap:a}}const zP={10241:9728,10240:9728,10242:33071,10243:33071};class UP{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),s=Object.assign({},t.uniforms),a=Object.assign({},t.parameters);let l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const e in this.samplerTextureMap){const t=this.samplerTextureMap[e];s[e]=n[t]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let o,s;n&&(({width:o,height:s}=r),i["".concat(FP).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),i["".concat(FP).concat(a)]=[o,s];return i}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(s,t)}return this.hasTargetTexture&&(l=!1,a.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:s,discard:l,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],n=a_(e);if(!t)return n;const r=n.constructor,i=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return _y(!1),null}}(this.targetTextureType),o=new r(n.length*i/4);let s=0;for(let a=0;a<n.length;a+=4)for(let t=0;t<i;t++)o[s++]=n[a+t];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:n}=t;if(n instanceof qA)return n;const r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:n={},_targetTexture:r}=t,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:i}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!==typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach(((t,e,n)=>{n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new UA(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;const{width:e,height:n}=i,{framebuffer:r}=t;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:e,height:n})):t.framebuffer=new j_(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:i}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const n in e)e[n].setParameters(zP)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);e[this._swapTexture]=t.targetTexture;return{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=function(t,e){xA(t instanceof qA||t instanceof i_||t instanceof o_);const n=t.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u}=t;return new n(r,Object.assign({width:i,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u},e))}(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:o,inject:s,samplerTextureMap:a}=jP({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),l=Xy([t.inject||{},s]);this.targetTextureType=o,this.samplerTextureMap=a;return{vs:r,fs:t._fs||kP({version:BP(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[LP].concat(t.modules||[]):t.modules,uniforms:i,inject:l}}}let VP=null;function GP(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!VP||VP.byteLength<n)&&(VP=new ArrayBuffer(n)),VP),0,e)}class WP extends TA{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(vx(t)||"Chrome"===hE())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new WP(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return WP.MAX_ATTRIBUTES=WP.MAX_ATTRIBUTES||t.getParameter(34921),WP.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:WP._setConstantFloatArray(t,e,n);break;case Int32Array:WP._setConstantIntArray(t,e,n);break;case Uint32Array:WP._setConstantUintArray(t,e,n);break;default:xA(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return WP.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return xA(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);const{size:r,type:i,stride:o,offset:s,normalized:a,integer:l,divisor:c}=n,{gl:u,gl2:d}=this;return t=Number(t),this.bind((()=>{u.bindBuffer(34962,e.handle),l?(xA(vx(u)),d.vertexAttribIPointer(t,r,i,o,s)):u.vertexAttribPointer(t,r,i,a,o,s),u.enableVertexAttribArray(t),d.vertexAttribDivisor(t,c||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!WP.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t;let o=!this.buffer;if(this.buffer=this.buffer||new UA(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const t=GP(e.constructor,i);!function(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)e[l++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s)}({target:t,source:n,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:xA(!1)}}static _setConstantIntArray(t,e,n){switch(xA(vx(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:xA(!1)}}static _setConstantUintArray(t,e,n){switch(xA(vx(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:xA(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return xA(Number.isFinite(n)),this.bind((()=>34373===t?this.gl.getVertexAttribOffset(n,t):this.gl.getVertexAttrib(n,t)))}}const HP=/^(.+)__LOCATION_([0-9]+)$/,JP=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class KP{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new WP(t),PA(this,"VertexArray","v6.0",JP),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new UA(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof UA&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof UA&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,n){let r;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),r=n()})),r}_resolveLocationAndAccessor(t,e,n,r){const i={location:-1,accessor:null},{location:o,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,hx.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),i;const a=this._getAttributeInfo(s||o);if(!a)return i;const l=this.accessors[o]||{},c=FA.resolve(a.accessor,l,n,r),{size:u,type:d}=c;return xA(Number.isFinite(u)&&Number.isFinite(d)),{location:o,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const n=HP.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof UA)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof UA){const n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof UA))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=e;this.setBuffer(t,n.buffer,n)}}}_setConstantAttributes(t,e){const n=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}_setConstantAttributeZero(t,e){if(WP.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){WP.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const n=this.values[e],r=this.accessors[e];if(!n)return;const{divisor:i}=r,o=i>0;if(t.isInstanced=t.isInstanced||o,n instanceof UA){const e=n;if(o){const n=e.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,n)}else{const n=e.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,n)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return hx.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}function XP(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(i+=",".concat(s%r===0?" ":"")),i+=XP(t[s],e);const o=t.length>n?"...":"]";return"".concat(i).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function qP(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o,s,a,l="NOT PROVIDED",c=1,u=0,d=0;if(n&&(l=n.type,c=n.size,l=String(l).replace("Array",""),o=-1!==l.indexOf("nt")),e instanceof UA){const t=e,{data:h,changed:f}=t.getDebugData();let p;if(s=f?"*":"",a=h,d=t.byteLength,u=d/h.BYTES_PER_ELEMENT/c,n){const t=n.divisor>0;p="".concat(t?"I ":"P "," ").concat(u," (x").concat(c,"=").concat(d," bytes ").concat(_A(i,l),")")}else o=!0,p="".concat(d," bytes");return{[r]:"".concat(s).concat(XP(a,{size:c,isInteger:o})),"Format ":p}}return a=e,c=e.length,l=String(e.constructor.name).replace("Array",""),o=-1!==l.indexOf("nt"),{[r]:"".concat(XP(a,{size:c,isInteger:o})," (constant)"),"Format ":"".concat(c,"x").concat(l," (constant)")}}function YP(t,e){const{type:n,size:r}=e,i=Qw(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function QP(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;xA(n);const o=".*Matrix",s=n._uniformSetters,a={},l=Object.keys(s).sort();let c=0;for(const h of l)h.match(".*_.*")||h.match(o)||ZP({table:a,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&c++;for(const h of l)h.match(o)&&ZP({table:a,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&c++;for(const h of l)a[h]||ZP({table:a,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&c++;let u=0;const d={};if(!i)for(const h in r){const t=r[h];a[h]||(u++,d[h]={Type:"NOT USED: ".concat(t),[e]:XP(t)})}return{table:a,count:c,unusedTable:d,unusedCount:u}}function ZP(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t;const s=r[i],a=function(t){return void 0!==t&&null!==t}(s);return(!o||!a)&&(e[i]={[n]:a?XP(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0)}function $P(t){const{type:e,size:n}=t.accessor,r=Qw(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const tM={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function eM(t,e){const{attributeMap:n=tM}=e||{};return n&&n[t]||t}function nM(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}xA(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const rM=()=>{},iM={};class oM{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=SA("model")}=e;xA(mx(t)),this.id=n,this.gl=t,this.id=e.id||SA("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||nS.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},xA(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return xA(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return xA(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){const r={};let i=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=eM(o,n);if("indices"===o)i=s;else if(s.constant)r[a]=s.value;else{const e=s.value,n={...s};delete n.value,r[a]=[new UA(t,e),n],nM(o,n)}}if(i){const e=i.value||i;xA(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new UA(t,{data:e,target:34963}),n]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(EA(t))return this;const e={};for(const n in t){const r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return e_(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:n,uniforms:r={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:s={},vertexArray:a=this.vertexArray}=t;let l;this.setAttributes(i),this.updateModuleSettings(e),this.setUniforms(r),hx.priority>=2&&(l=this._logDrawCallStart(2));const c=this.vertexArray.getDrawParams(),{isIndexed:u=c.isIndexed,indexType:d=c.indexType,indexOffset:h=c.indexOffset,vertexArrayInstanced:f=c.isInstanced}=this.props;f&&!this.isInstanced&&hx.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:p,instanceCount:g}=this,{onBeforeRender:m=rM,onAfterRender:v=rM}=this.props;m(),this.program.setUniforms(this.uniforms);const b=this.program.draw(Object.assign(iM,t,{logPriority:l,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:a,transformFeedback:o,isIndexed:u,indexType:d,isInstanced:p,instanceCount:g,offset:u?h:0}));return v(),hx.priority>=2&&this._logDrawCallEnd(l,a,n),b}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:n,unbindModels:r=[]}=t;let{parameters:i}=t;n&&this._setFeedbackBuffers(n),e&&(i=Object.assign({},i,{35977:e})),r.forEach((t=>t.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},t,{parameters:i}))}finally{r.forEach((t=>t.vertexArray.bindBuffers()))}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hx.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}xA(t instanceof eS,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new KP(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof UA&&e.delete()}}_setAnimationProps(t){this.animated&&xA(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(EA(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new RP(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),hx.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:hx.level<=2})(),t}_logDrawCallEnd(t,e,n,r){if(void 0===t)return;const i=function(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=qP(e,e.elements,null,n));const i=e.values;for(const o in i){const t=e._getAttributeInfo(o);if(t){let s="".concat(o,": ").concat(t.name);const a=e.accessors[t.location];a&&(s="".concat(o,": ").concat(YP(t.name,a))),r[s]=qP(e,i[o],a,n)}}return r}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:s,unusedCount:a}=QP({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:c}=QP({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&hx.log("MISSING UNIFORMS",Object.keys(l))(),a>0&&hx.log("UNUSED UNIFORMS",Object.keys(s))();const u=function(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const t=$P(r);e["in ".concat(t)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const t=$P(r);e["out ".concat(t)]={[n]:JSON.stringify(r.accessor)}}return e}(this.vertexArray.configuration);hx.table(t,i)(),hx.table(t,o)(),hx.table(t+1,u)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),hx.groupEnd(2)()}}class sM{static isSupported(t){return vx(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)t=t||n.swap();xA(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e){const e=n.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)n.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new oM(e,Object.assign({},t,{fs:t.fs||kP({version:BP(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=r.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){if(!EA(t.feedbackBuffers)||!EA(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new IP(t,e)),function(t){if(!EA(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new UP(t,e)),xA(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=Object.assign(e,r.getDrawOptions(e));return e}}const aM="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";const lM={interpolation:class{constructor(t){let{gl:e,attribute:n,timeline:r}=t;ge(this,"gl",void 0),ge(this,"type","interpolation"),ge(this,"attributeInTransition",void 0),ge(this,"settings",void 0),ge(this,"attribute",void 0),ge(this,"transition",void 0),ge(this,"currentStartIndices",void 0),ge(this,"currentLength",void 0),ge(this,"transform",void 0),ge(this,"buffers",void 0),this.gl=e,this.transition=new IS(r),this.attribute=n,this.attributeInTransition=new PP(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function(t,e){const n=wP(e.size);return new sM(t,{vs:aM,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const i={byteLength:0,usage:35050};this.buffers=[new UA(e,i),new UA(e,i)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:n,buffers:r,attribute:i}=this;SP(r);const o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of r)EP({buffer:s,...o});this.currentStartIndices=i.startIndices,this.currentLength=CP(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:_P(0,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:n}=this.transition;let r=n/t;e&&(r=e(r)),this.transform.run({uniforms:{time:r}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}},spring:class{constructor(t){let{gl:e,attribute:n,timeline:r}=t;ge(this,"gl",void 0),ge(this,"type","spring"),ge(this,"attributeInTransition",void 0),ge(this,"settings",void 0),ge(this,"attribute",void 0),ge(this,"transition",void 0),ge(this,"currentStartIndices",void 0),ge(this,"currentLength",void 0),ge(this,"texture",void 0),ge(this,"framebuffer",void 0),ge(this,"transform",void 0),ge(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new IS(r),this.attribute=n,this.attributeInTransition=new PP(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function(t){return new qA(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(t,e){return new j_(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(t,e,n){const r=wP(e.size);return new sM(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new UA(e,i),new UA(e,i),new UA(e,i)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:n,buffers:r,attribute:i}=this,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of r)EP({buffer:s,...o});this.settings=t,this.currentStartIndices=i.startIndices,this.currentLength=CP(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:_P(0,i)}})}update(){const{buffers:t,transform:e,framebuffer:n,transition:r}=this;if(!r.update())return!1;const i=this.settings;e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.stiffness,damping:i.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),SP(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value});return a_(n)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class cM{constructor(t,e){let{id:n,timeline:r}=e;ge(this,"id",void 0),ge(this,"isSupported",void 0),ge(this,"gl",void 0),ge(this,"timeline",void 0),ge(this,"transitions",void 0),ge(this,"needsRedraw",void 0),ge(this,"numInstances",void 0),this.id=n,this.gl=t,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=sM.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update(t){let{attributes:e,transitions:n,numInstances:r}=t;this.numInstances=r||1;for(const i in e){const t=e[i],r=t.getTransitionSetting(n);r&&this._updateAttribute(i,t,r)}for(const i in this.transitions){const t=e[i];t&&t.getTransitionSetting(n)||this._removeTransition(i)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,n){const r=this.transitions[t];let i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void Rg.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);const o=lM[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(Rg.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const uM="attributeManager.invalidate";class dM{constructor(t){let{id:e="attribute-manager",stats:n,timeline:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ge(this,"id",void 0),ge(this,"gl",void 0),ge(this,"attributes",void 0),ge(this,"updateTriggers",void 0),ge(this,"needsRedraw",void 0),ge(this,"userData",void 0),ge(this,"stats",void 0),ge(this,"attributeTransitionManager",void 0),ge(this,"mergeBoundsMemoized",dS(rb)),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new cM(t,{id:"".concat(e,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const n=this._invalidateTrigger(t,e);Lg(uM,this,t,n)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);Lg(uM,this,"all")}update(t){let{data:e,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:s={},context:a={}}=t,l=!1;Lg("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const t=this.attributes[c],i=t.settings.accessor;t.startIndices=r,t.numInstances=n,o[c]&&Rg.removed("props.".concat(c),"data.attributes.".concat(c))(),t.setExternalBuffer(s[c])||t.setBinaryValue("string"===typeof i?s[i]:void 0,e.startIndices)||"string"===typeof i&&!s[i]&&t.setConstantValue(o[i])||t.needsUpdate()&&(l=!0,this._updateAttribute({attribute:t,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||t.needsRedraw()}l&&Lg("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getBounds(t){const e=t.map((t=>{var e;return null===(e=this.attributes[t])||void 0===e?void 0:e.getBounds()}));return this.mergeBoundsMemoized(e)}getChangedAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:e,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in e){const o=e[i];o.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getShaderAttributes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());const n={};for(const r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}_add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n in t){const r=t[n];this.attributes[n]=this._createAttribute(n,r,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,n){const r={...e,id:t,size:(e.isIndexed?1:e.size)||1,divisor:n.instanced?1:e.divisor||0};return new PP(this.gl,r)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes){this.attributes[e].getUpdateTriggers().forEach((n=>{t[n]||(t[n]=[]),t[n].push(e)}))}this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:n,updateTriggers:r}=this,i=r[t];return i&&i.forEach((t=>{const r=n[t];r&&r.setNeedsUpdate(r.id,e)})),i}_updateAttribute(t){const{attribute:e,numInstances:n}=t;if(Lg("attribute.updateStart",e),e.constant)return void e.setConstantValue(e.value);e.allocate(n)&&Lg("attribute.allocate",e,n);e.updateBuffer(t)&&(this.needsRedraw=!0,Lg("attribute.updateEnd",e,n))}}const hM=1e-5;function fM(t,e,n,r,i){const o=e-t;return(n-e)*i+-o*r+o+e}function pM(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}const gM={interpolation:class extends IS{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:n,duration:r,easing:i}}=this,o=i(t/r);this._value=Pv(e,n,o)}},spring:class extends IS{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:r}=this.settings,{_prevValue:i=t,_currValue:o=t}=this;let s=function(t,e,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=fM(t[s],e[s],n[s],r,i);return o}return fM(t,e,n,r,i)}(i,o,e,n,r);const a=pM(s,e),l=pM(s,o);a<hM&&l<hM&&(s=e,this.end()),this._prevValue=o,this._currValue=s}}};class mM{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,r){const{transitions:i}=this;if(i.has(t)){const n=i.get(t),{value:r=n.settings.fromValue}=n;e=r,this.remove(t)}if(!(r=AP(r)))return;const o=gM[r.type];if(!o)return void Rg.error("unsupported transition type '".concat(r.type,"'"))();const s=new o(this.timeline);s.start({...r,fromValue:e,toValue:n}),i.set(t,s)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function vM(t,e){const n=yM({newProps:t,oldProps:e,propTypes:t[sg],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e);let i=!1;return r||(i=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers){if(_M(t,e,"all"))return{all:!0}}const n={};let r=!1;for(const i in t.updateTriggers)if("all"!==i){_M(t,e,i)&&(n[i]=!0,r=!0)}return!!r&&n}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:AM(t,e),transitionsChanged:bM(t,e)}}function bM(t,e){if(!t.transitions)return!1;const n={},r=t[sg];let i=!1;for(const o in t.transitions){const s=r[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&xM(t[o],e[o],s)&&(n[o]=!0,i=!0)}return!!i&&n}function yM(t){let{newProps:e,oldProps:n,ignoreProps:r={},propTypes:i={},triggerName:o="props"}=t;if(n===e)return!1;if("object"!==typeof e||null===e)return"".concat(o," changed shallowly");if("object"!==typeof n||null===n)return"".concat(o," changed shallowly");for(const s of Object.keys(e))if(!(s in r)){if(!(s in n))return"".concat(o,".").concat(s," added");const t=xM(e[s],n[s],i[s]);if(t)return"".concat(o,".").concat(s," ").concat(t)}for(const s of Object.keys(n))if(!(s in r)){if(!(s in e))return"".concat(o,".").concat(s," dropped");if(!Object.hasOwnProperty.call(e,s)){const t=xM(e[s],n[s],i[s]);if(t)return"".concat(o,".").concat(s," ").concat(t)}}return!1}function xM(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||(r=t&&e&&t.equals,!r||r.call(t,e))?r||e===t?null:"changed shallowly":"changed deeply"}function AM(t,e){if(null===e)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function _M(t,e,n){let r=t.updateTriggers[n];r=void 0===r||null===r?{}:r;let i=e.updateTriggers[n];i=void 0===i||null===i?{}:i;return yM({oldProps:i,newProps:r,triggerName:n})}function wM(t){if(null===(e=t)||"object"!==typeof e)throw new Error("count(): argument not an object");var e;if("function"===typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}function SM(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=n.modules.findIndex((t=>"project32"===t.name));t>=0&&n.modules.splice(t,1)}if("inject"in e)if(t.inject){const r={...t.inject};for(const t in e.inject)r[t]=(r[t]||"")+e.inject[t];n.inject=r}else n.inject=e.inject;return n}const CM=[0,0,0];function EM(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.projectPosition(t);if(n&&e instanceof RS){const[n,i,o=0]=t,s=e.getDistanceScales([n,i]);r[2]=o*s.unitsPerMeter[2]}return r}function PM(t,e){let{viewport:n,modelMatrix:r,coordinateSystem:i,coordinateOrigin:o,offsetMode:s}=e,[a,l,c=0]=t;switch(r&&([a,l,c]=Ab([],[a,l,c,1],r)),i){case dy.LNGLAT:return EM([a,l,c],n,s);case dy.LNGLAT_OFFSETS:return EM([a+o[0],l+o[1],c+(o[2]||0)],n,s);case dy.METER_OFFSETS:return EM(Zb(o,[a,l,c]),n,s);case dy.CARTESIAN:default:return n.isGeospatial?[a+o[0],l+o[1],c+o[2]]:n.projectPosition([a,l,c])}}function MM(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return i===dy.DEFAULT&&(i=e.isGeospatial?dy.LNGLAT:dy.CARTESIAN),void 0===o&&(o=i),void 0===s&&(s=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=CM,shaderCoordinateOrigin:u=CM,offsetMode:d=!1}=l?bS(n,r,i):{},h=PM(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});if(d){const t=n.projectPosition(c||u);Wv(h,h,t)}return h}const TM={10241:9987,10240:9729,10242:33071,10243:33071},OM={};const kM={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||BM(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>CS(t,e,1)},accessor:{validate(t,e){const n=LM(t);return"function"===n||n===LM(e.value)},equal:(t,e,n)=>"function"===typeof e||CS(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||BM(t),equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?CS(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?CS(t,e,i):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"===typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return r&&r.gl?function(t,e,n,r){if(n instanceof qA)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const o=new qA(e,{...n,parameters:{...TM,...i,...r}});return OM[o.id]=t,o}(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{var r,i;r=n.id,(i=t)&&i instanceof qA&&OM[i.id]===r&&(i.delete(),delete OM[i.id])}}};function RM(t,e){switch(LM(e)){case"object":return IM(t,e);case"array":return IM(t,{type:"array",value:e,compare:!1});case"boolean":return IM(t,{type:"boolean",value:e});case"number":return IM(t,{type:"number",value:e});case"function":return IM(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function IM(t,e){return"type"in e?{name:t,...kM[e.type],...e}:"value"in e?{name:t,type:LM(e.value),...e}:{name:t,type:"object",value:e}}function BM(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function LM(t){return BM(t)?"array":null===t?"null":typeof t}const DM="_mergedDefaultProps";function FM(t,e){let n=DM;if(e)for(const i of e){const t=i.constructor;t&&(n+=":".concat(t.extensionName||t.name))}const r=zM(t,n);return r||(t[n]=function(t,e){const n=t.prototype;if(!n)return null;const r=Object.getPrototypeOf(t),i=FM(r),o=zM(t,"defaultProps")||{},s=function(t){const e={},n={},r={};for(const[i,o]of Object.entries(t)){const t=null===o||void 0===o?void 0:o.deprecatedFor;if(t)r[i]=Array.isArray(t)?t:[t];else{const t=RM(i,o);e[i]=t,n[i]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}(o),a=Object.assign(Object.create(null),i,s.defaultProps),l=Object.assign(Object.create(null),null===i||void 0===i?void 0:i[sg],s.propTypes),c=Object.assign(Object.create(null),null===i||void 0===i?void 0:i[ag],s.deprecatedProps);for(const u of e){const t=FM(u.constructor);t&&(Object.assign(a,t),Object.assign(l,t[sg]),Object.assign(c,t[ag]))}(function(t,e){const n=function(t){const e=t.componentName;e||Rg.warn("".concat(t.name,".componentName not specified"))();return e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})})(a,t),function(t,e){const n={},r={};for(const i in e){const t=e[i],{name:o,value:s}=t;t.async&&(n[o]=s,r[o]=NM(o))}t[lg]=n,t[cg]={},Object.defineProperties(t,r)}(a,l),function(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){const r="".concat(this.id,": ").concat(n);for(const i of e[n])jM(this,i)||(this[i]=t);Rg.deprecated(r,e[n].join("/"))()}})}(a,c),a[sg]=l,a[ag]=c,0!==e.length||jM(t,"_propTypes")||(t._propTypes=l);return a}(t,e||[]))}function NM(t){return{enumerable:!0,set(e){"string"===typeof e||e instanceof Promise||gP(e)?this[cg][t]=e:this[ug][t]=e},get(){if(this[ug]){if(t in this[ug]){return this[ug][t]||this[lg][t]}if(t in this[cg]){const e=this[og]&&this[og].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[lg][t]}}return this[lg][t]}}}function jM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zM(t,e){return jM(t,e)&&t[e]}let UM=0;class VM{constructor(){ge(this,"id",void 0),ge(this,"props",void 0),ge(this,"count",void 0);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.props=function(t,e){let n;for(let o=e.length-1;o>=0;o--){const t=e[o];"extensions"in t&&(n=t.extensions)}const r=FM(t.constructor,n),i=Object.create(r);i[og]=t,i[cg]={},i[ug]={};for(let o=0;o<e.length;++o){const t=e[o];for(const e in t)i[e]=t[e]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=UM++}clone(t){const{props:e}=this,n={};for(const r in e[lg])r in e[ug]?n[r]=e[ug][r]:r in e[cg]&&(n[r]=e[cg][r]);return new this.constructor({...e,...n,...t})}}ge(VM,"componentName","Component"),ge(VM,"defaultProps",{});const GM=Object.freeze({});class WM{constructor(t){ge(this,"component",void 0),ge(this,"onAsyncPropUpdated",void 0),ge(this,"asyncProps",void 0),ge(this,"oldProps",void 0),ge(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||GM}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[og]||this.component;const e=t[ug]||{},n=t[cg]||t,r=t[lg]||{};for(const i in e){const t=e[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,t),e[i]=this.getAsyncProp(i)}for(const i in n){const t=n[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,t)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"===typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):gP(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){const r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;e.then((e=>{this.component&&(e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,r),this._onResolve(t,e))})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],o=0;for await(const s of e){if(!this.component)return;const{dataTransform:e}=this.component.props;i=e?e(s,i):i.concat(s),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(t,i,r)}this._onResolve(t,i)}_postProcessValue(t,e){const n=t.type;return n&&this.component&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const n=this.component&&this.component.props[sg];this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}class HM extends WM{constructor(t){let{attributeManager:e,layer:n}=t;super(n),ge(this,"attributeManager",void 0),ge(this,"needsRedraw",void 0),ge(this,"needsUpdate",void 0),ge(this,"subLayers",void 0),ge(this,"usesPickingColorCache",void 0),ge(this,"hasPickingBuffer",void 0),ge(this,"changeFlags",void 0),ge(this,"viewport",void 0),ge(this,"uniformTransitions",void 0),ge(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,e){const n=this.layer,r=null===n||void 0===n?void 0:n.props.fetch;return r?r(e,{propName:t,layer:n}):super._fetch(t,e)}_onResolve(t,e){const n=this.layer;if(n){const r=n.props.onDataLoad;"data"===t&&r&&r(e,{propName:t,layer:n})}}_onError(t,e){const n=this.layer;n&&n.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}const JM=2**24-1,KM=Object.freeze([]),XM=dS((t=>{let{oldViewport:e,viewport:n}=t;return e.equals(n)}));let qM=new Uint8ClampedArray(0);const YM={data:{type:"data",value:KM,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,e)=>{let{propName:n,layer:r,loaders:i,loadOptions:o,signal:s}=e;const{resourceManager:a}=r.context;var l;(o=o||r.getLoadOptions(),i=i||r.props.loaders,s)&&(o={...o,fetch:{...null===(l=o)||void 0===l?void 0:l.fetch,signal:s}});let c=a.contains(t);return c||o||(a.add({resourceId:t,data:yv(t,i),persistent:!1}),c=!0),c?a.subscribe({resourceId:t,onChange:t=>{var e;return null===(e=r.internalState)||void 0===e?void 0:e.reloadAsyncProp(n,t)},consumerId:r.id,requestId:n}):yv(t,i,o)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:dy.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:t=>{let{layerIndex:e}=t;return[0,100*-e]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class QM extends VM{constructor(){super(...arguments),ge(this,"internalState",null),ge(this,"lifecycle",$p),ge(this,"context",void 0),ge(this,"state",void 0),ge(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){OS(this.internalState);const e=this.internalState.viewport||this.context.viewport,n=PM(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=ny(n,e.pixelProjectionMatrix);return 2===t.length?[r,i]:[r,i,o]}unproject(t){OS(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){OS(this.internalState);return MM(t,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===dy.DEFAULT||t===dy.LNGLAT||t===dy.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){OS(t instanceof Uint8Array);const[e,n,r]=t;return e+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:wM(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["positions","instancePositions"])}getShaders(t){for(const e of this.props.extensions)t=SM(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e)if(Array.isArray(n))for(const r of n)e.invalidateAll(r);else e.invalidateAll();if(e){const{props:n}=t,r=this.internalState.hasPickingBuffer,i=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((t=>t.getNeedsPickingBuffer.call(this,t)));if(r!==i){this.internalState.hasPickingBuffer=i;const{pickingColors:t,instancePickingColors:n}=e.attributes,r=t||n;r&&(i&&r.constant&&(r.constant=!1,e.invalidate(r.id)),r.value||i||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(t){for(const n of this.getModels())n.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo(t){let{info:e,mode:n,sourceLayer:r}=t;const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(t,e){var n,r,i,o;(e&&(t=new Error("".concat(e,": ").concat(t.message),{cause:t})),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,t,this))}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&XM({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,n=this.getNumInstances(),r=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),n=Object.create(this.props);for(const t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,e){let{numInstances:n}=e;if(t.constant)return;const r=Math.floor(qM.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>JM&&Rg.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),qM=_v.allocate(qM,n,{size:3,copy:!0,maxCount:Math.max(n,JM)});const t=Math.floor(qM.length/3),e=[];for(let n=r;n<t;n++)this.encodePickingColor(n,e),qM[3*n+0]=e[0],qM[3*n+1]=e[1],qM[3*n+2]=e[2]}t.value=qM.subarray(0,3*n)}_setModelAttributes(t,e){const n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}disablePickingIndex(t){const e=this.props.data;if(!("attributes"in e))return void this._disablePickingIndex(t);const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,o=i&&e.attributes&&e.attributes[i.id];if(o&&o.value){const n=o.value,r=this.encodePickingColor(t);for(let t=0;t<e.length;t++){const e=i.getVertexOffset(t);n[e]===r[0]&&n[e+1]===r[1]&&n[e+2]===r[2]&&this._disablePickingIndex(t)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;if(!r)return;const i=r.getVertexOffset(t),o=r.getVertexOffset(t+1);r.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==qM.buffer&&(n.value=qM.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){OS(!this.internalState),OS(Number.isFinite(this.props.coordinateSystem)),Lg("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new HM({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Rg.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new mM(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Lg("layer.matched",this,this===t);const{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Lg("layer.update",this,t),!t)return;const e=this.props,n=this.context,r=this.internalState,i=n.viewport,o=this._updateUniformTransition();r.propsInTransition=o,n.viewport=r.viewport||i,this.props=o;try{const t=this._getUpdateParams(),e=this.getModels();if(n.gl)this.updateState(t);else try{this.updateState(t)}catch(s){}for(const n of this.props.extensions)n.updateState.call(this,t,n);const r=this.getModels()[0]!==e[0];this._postUpdate(t,r)}finally{n.viewport=i,this.props=e,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Lg("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer(t){let{moduleParameters:e=null,uniforms:n={},parameters:r={}}=t;this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:t}=this.props,i=t&&t(n)||[0,0];oA(o.gl,{polygonOffset:i}),aA(o.gl,r,(()=>{const t={moduleParameters:e,uniforms:n,parameters:r,context:o};for(const e of this.props.extensions)e.draw.call(this,t,e);this.draw(t)}))}finally{this.props=i}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const r in t)if(t[r]){let n=!1;if("dataChanged"===r){const i=t[r],o=e[r];i&&Array.isArray(o)&&(e.dataChanged=Array.isArray(i)?o.concat(i):i,n=!0)}e[r]||(e[r]=t[r],n=!0),n&&Lg("layer.changeFlag",this,r,t)}const n=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const n=vM(t,e);if(n.updateTriggersChanged)for(const i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(n.transitionsChanged)for(const i in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(i,e[i],t[i],null===(r=t.transitions)||void 0===r?void 0:r[i])}return this.setChangeFlags(n)}validateProps(){!function(t){const e=t[sg];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"===typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new dM(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:n,oldProps:r}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;null===i||void 0===i||i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(e||r.autoHighlight!==o||r.highlightedObjectIndex!==s||r.highlightColor!==a){const t={};o||(t.pickingSelectedColor=null),Array.isArray(a)&&(t.pickingHighlightColor=a),(e||s!==r.highlightedObjectIndex)&&(t.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(t);if(e=e||r,e)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ge(QM,"defaultProps",YM),ge(QM,"layerName","Layer");const ZM={position:"absolute",zIndex:-1};function $M(t,e){if("function"===typeof t)return t(e);if(Array.isArray(t))return t.map((t=>$M(t,e)));if(tT(t)){if(function(t){var e;return null===(e=t.props)||void 0===e?void 0:e.mapStyle}(t))return e.style=ZM,(0,h.cloneElement)(t,e);if(function(t){const e=t.type;return e&&e.deckGLViewProps}(t))return(0,h.cloneElement)(t,e)}return t}function tT(t){return t&&"object"===typeof t&&"type"in t||!1}function eT(t){if("function"===typeof t)return(0,h.createElement)(kS,{},t);if(Array.isArray(t))return t.map(eT);if(tT(t)){if(t.type===h.Fragment)return eT(t.props.children);if(aP(t.type,kS))return t}return t}const nT={mixBlendMode:null};function rT(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}const iT=(0,h.forwardRef)(((t,e)=>{const[n,r]=(0,h.useState)(0),i=(0,h.useRef)({control:null,version:n,forceUpdate:()=>r((t=>t+1))}),o=i.current,s=(0,h.useRef)(null),a=(0,h.useRef)(null),l=(0,h.useMemo)((()=>function(t){let{children:e,layers:n=[],views:r=null}=t;const i=[],o=[],s={};return h.Children.forEach(eT(e),(t=>{if(tT(t)){const e=t.type;if(aP(e,QM)){const n=function(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}(e,t.props);o.push(n)}else i.push(t);if(aP(e,kS)&&e!==kS&&t.props.id){const n=new e(t.props);s[n.id]=n}}else t&&i.push(t)})),Object.keys(s).length>0&&(Array.isArray(r)?r.forEach((t=>{s[t.id]=t})):r&&(s[r.id]=r),r=Object.values(s)),n=o.length>0?[...o,...n]:n,{layers:n,children:i,views:r}}(t)),[t.layers,t.views,t.children]);let c=!0;const u=e=>{var n;return c&&t.viewState?(o.viewStateUpdateRequested=e,null):(o.viewStateUpdateRequested=null,null===(n=t.onViewStateChange)||void 0===n?void 0:n.call(t,e))},d=e=>{var n;c?o.interactionStateUpdateRequested=e:(o.interactionStateUpdateRequested=null,null===(n=t.onInteractionStateChange)||void 0===n||n.call(t,e))},f=(0,h.useMemo)((()=>{const e={...t,style:null,width:"100%",height:"100%",parent:s.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:d};return delete e._customRender,o.deck&&o.deck.setProps(e),e}),[t]);(0,h.useEffect)((()=>{const e=t.Deck||oP;return o.deck=function(t,e,n){const r=new e({...n,_customRender:e=>{t.redrawReason=e;const n=r.getViewports();t.lastRenderedViewports!==n?t.forceUpdate():rT(t)}});return r}(o,e,{...f,parent:s.current,canvas:a.current}),()=>{var t;return null===(t=o.deck)||void 0===t?void 0:t.finalize()}}),[]),sP((()=>{rT(o);const{viewStateUpdateRequested:t,interactionStateUpdateRequested:e}=o;t&&u(t),e&&d(e)})),(0,h.useImperativeHandle)(e,(()=>function(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}(o)),[]);const p=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:g,width:m,height:v,id:b,style:y}=t,{containerStyle:x,canvasStyle:A}=(0,h.useMemo)((()=>function(t){let{width:e,height:n,style:r}=t;const i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},o={left:0,top:0};if(r)for(const s in r)s in nT?o[s]=r[s]:i[s]=r[s];return{containerStyle:i,canvasStyle:o}}({width:m,height:v,style:y})),[m,v,y]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===p||o.version!==n){o.lastRenderedViewports=p,o.version=n;const t=function(t){let{children:e,deck:n,ContextProvider:r}=t;const{viewManager:i}=n||{};if(!i||!i.views.length)return[];const o={},s=i.views[0].id;for(const a of e){let t=s,e=a;tT(a)&&aP(a.type,kS)&&(t=a.props.id||s,e=a.props.children);const n=i.getViewport(t),r=i.getViewState(t);if(n){r.padding=n.padding;const{x:i,y:s,width:a,height:l}=n;e=$M(e,{x:i,y:s,width:a,height:l,viewport:n,viewState:r}),o[t]||(o[t]={viewport:n,children:[]}),o[t].children.push(e)}}return Object.keys(o).map((t=>{const{viewport:e,children:i}=o[t],{x:s,y:a,width:l,height:c}=e,u={position:"absolute",left:s,top:a,width:l,height:c},d="view-".concat(t),f=(0,h.createElement)("div",{key:d,id:d,style:u},...i);if(r){const i={viewport:e,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:e=>{e.viewId=t,n._onViewStateChange(e)}};return(0,h.createElement)(r,{key:d,value:i},f)}return f}))}({children:l.children,deck:o.deck,ContextProvider:g}),e=(0,h.createElement)("canvas",{key:"canvas",id:b||"deckgl-overlay",ref:a,style:A});o.control=(0,h.createElement)("div",{id:"".concat(b||"deckgl","-wrapper"),ref:s,style:x},[e,t])}return c=!1,o.control}));iT.defaultProps=oP.defaultProps;const oT=iT,sT=h.createContext(null);function aT(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function lT(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const e=t.center;t.center=new e.constructor(n.longitude,n.latitude),r=r||e!==t.center}if("zoom"in n){const e=t.zoom;t.zoom=n.zoom,r=r||e!==t.zoom}if("bearing"in n){const e=t.bearing;t.bearing=n.bearing,r=r||e!==t.bearing}if("pitch"in n){const e=t.pitch;t.pitch=n.pitch,r=r||e!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const cT=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function uT(t){if(!t)return null;if("string"===typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map((t=>{const n=e[t.ref];let r=null;if("interactive"in t&&(r={...t},delete r.interactive),n){r=r||{...t},delete r.ref;for(const t of cT)t in n&&(r[t]=n[t])}return r||t}));return{...t,layers:n}}function dT(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!dT(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){if(!e.hasOwnProperty(i))return!1;if(!dT(t[i],e[i]))return!1}return!0}return!1}const hT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},fT={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},pT={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},gT=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],mT=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class vT{constructor(t,e,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=t=>{const e=this.props[pT[t.type]];e&&e(t)},this._onPointerEvent=t=>{"mousemove"!==t.type&&"mouseout"!==t.type||this._updateHover(t);const e=this.props[hT[t.type]];if(e){if(this.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type){const e=this._hoveredFeatures||this._map.queryRenderedFeatures(t.point,{layers:this.props.interactiveLayerIds});t.features=e}e(t),delete t.features}},this._onCameraEvent=t=>{if(!this._internalUpdate){const e=this.props[fT[t.type]];e&&e(t)}t.type in this._deferredEvents&&(this._deferredEvents[t.type]=!1)},this._MapClass=t,this.props=e,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const e=this.props;this.props=t;const n=this._updateSettings(t,e);n&&this._createShadowTransform(this._map);const r=this._updateSize(t),i=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(t,e){const n=vT.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(e.className=i.className;i.childNodes.length>0;)e.appendChild(i.childNodes[0]);r._container=e,n.setProps({...t,styleDiffing:!1}),r.resize();const{initialViewState:o}=t;return o&&(o.bounds?r.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):n._updateViewState(o,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),n}_initialize(t){const{props:e}=this,n={...e,...e.initialViewState,accessToken:e.mapboxAccessToken||bT()||null,container:t,style:uT(e.mapStyle)},r=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),e.gl){const t=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=t,e.gl)}const i=new this._MapClass(n);r.padding&&i.setPadding(r.padding),e.cursor&&(i.getCanvas().style.cursor=e.cursor),this._createShadowTransform(i);const o=i._render;i._render=t=>{this._inRender=!0,o.call(i,t),this._inRender=!1};const s=i._renderTaskQueue.run;i._renderTaskQueue.run=t=>{s.call(i._renderTaskQueue,t),this._onBeforeRepaint()},i.on("render",(()=>this._onAfterRepaint()));const a=i.fire;i.fire=this._fireEvent.bind(this,a),i.on("resize",(()=>{this._renderTransform.resize(i.transform.width,i.transform.height)})),i.on("styledata",(()=>this._updateStyleComponents(this.props,{}))),i.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const l in hT)i.on(l,this._onPointerEvent);for(const l in fT)i.on(l,this._onCameraEvent);for(const l in pT)i.on(l,this._onEvent);this._map=i}recycle(){vT.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const e=function(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}(t.transform);t.painter.transform=e,this._renderTransform=e}_updateSize(t){const{viewState:e}=t;if(e){const t=this._map;if(e.width!==t.transform.width||e.height!==t.transform.height)return t.resize(),!0}return!1}_updateViewState(t,e){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:o,bearing:s}=r,a=n.isMoving();a&&(r.cameraElevationReference="sea");const l=lT(r,{...aT(n.transform),...t});if(a&&(r.cameraElevationReference="ground"),l&&e){const t=this._deferredEvents;t.move=!0,t.zoom||(t.zoom=i!==r.zoom),t.rotate||(t.rotate=s!==r.bearing),t.pitch||(t.pitch=o!==r.pitch)}return a||lT(n.transform,t),l}_updateSettings(t,e){const n=this._map;let r=!1;for(const i of gT)i in t&&!dT(t[i],e[i])&&(r=!0,n["set".concat(i[0].toUpperCase()).concat(i.slice(1))](t[i]));return r}_updateStyle(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==e.mapStyle){const e={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(e.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(uT(t.mapStyle),e),!0}return!1}_updateStyleComponents(t,e){const n=this._map;let r=!1;return n.style.loaded()&&("light"in t&&!dT(t.light,e.light)&&(r=!0,n.setLight(t.light)),"fog"in t&&!dT(t.fog,e.fog)&&(r=!0,n.setFog(t.fog)),"terrain"in t&&!dT(t.terrain,e.terrain)&&(t.terrain&&!n.getSource(t.terrain.source)||(r=!0,n.setTerrain(t.terrain)))),r}_updateHandlers(t,e){const n=this._map;let r=!1;for(const i of mT){const o=t[i];dT(o,e[i])||(r=!0,o?n[i].enable(o):n[i].disable())}return r}_updateHover(t){var e;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const i=t.type,o=(null===(e=this._hoveredFeatures)||void 0===e?void 0:e.length)>0;let s;if("mousemove"===i)try{s=this._map.queryRenderedFeatures(t.point,{layers:n.interactiveLayerIds})}catch(r){s=[]}else s=[];const a=s.length>0;!a&&o&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=s,a&&!o&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=i}else this._hoveredFeatures=null}_fireEvent(t,e,n){const r=this._map,i=r.transform,o="string"===typeof e?e:e.type;return"move"===o&&this._updateViewState(this.props,!1),o in fT&&("object"===typeof e&&(e.viewState=aT(i)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,e,n),r.transform=i,r):(t.call(r,e,n),r)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const e=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=e}}}function bT(){let t=null;if("undefined"!==typeof location){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"https://cityscope.media.mit.edu/CS_cityscopeJS",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg"}.MapboxAccessToken}catch(e){}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"https://cityscope.media.mit.edu/CS_cityscopeJS",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg"}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(n){}return t}vT.savedMaps=[];const yT=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function xT(t,e){if(!t)return null;const n=t.map,r={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:n=>t.transform.locationPoint(e.LngLat.convert(n)),unproject:n=>t.transform.pointLocation(e.Point.convert(n)),queryTerrainElevation:(e,r)=>{const i=n.transform;n.transform=t.transform;const o=n.queryTerrainElevation(e,r);return n.transform=i,o}};for(const i of function(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"===typeof t[r]&&"fire"!==r&&"setEventedParent"!==r&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}(n))i in r||yT.includes(i)||(r[i]=n[i].bind(n));return r}const AT="undefined"!==typeof document?h.useLayoutEffect:h.useEffect,_T=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const wT=h.createContext(null),ST={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},CT=(0,h.forwardRef)(((t,e)=>{const r=(0,h.useContext)(sT),[i,o]=(0,h.useState)(null),s=(0,h.useRef)(),{current:a}=(0,h.useRef)({mapLib:null,map:null});(0,h.useEffect)((()=>{const e=t.mapLib;let i,l=!0;return Promise.resolve(e||n.e(879).then(n.t.bind(n,879,23))).then((e=>{if(l){if(e.Map||(e=e.default),!e||!e.Map)throw new Error("Invalid mapLib");if(!e.supported(t))throw new Error("Map is not supported by this browser");!function(t,e){for(const n of _T)n in e&&(t[n]=e[n]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(e.RTLTextPlugin,(t=>{t&&console.error(t)}),!1)}(e,t),t.reuseMaps&&(i=vT.reuse(t,s.current)),i||(i=new vT(e.Map,t,s.current)),a.map=xT(i,e),a.mapLib=e,o(i),null===r||void 0===r||r.onMapMount(a.map,t.id)}})).catch((e=>{t.onError({type:"error",target:null,originalEvent:null,error:e})})),()=>{l=!1,i&&(null===r||void 0===r||r.onMapUnmount(t.id),t.reuseMaps?i.recycle():i.destroy())}}),[]),AT((()=>{i&&i.setProps(t)})),(0,h.useImperativeHandle)(e,(()=>a.map),[i]);const l=(0,h.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return h.createElement("div",{id:t.id,ref:s,style:l},i&&h.createElement(wT.Provider,{value:a},t.children))}));CT.displayName="Map",CT.defaultProps=ST;const ET=CT,PT=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function MT(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const t=e[r];Number.isFinite(t)&&!PT.test(r)?n[r]="".concat(t,"px"):n[r]=t}}function TT(t){const{map:e,mapLib:n}=(0,h.useContext)(wT),r=(0,h.useRef)({props:t});r.current.props=t;const i=(0,h.useMemo)((()=>{let e=!1;h.Children.forEach(t.children,(t=>{t&&(e=!0)}));const o={...t,element:e?document.createElement("div"):null},s=new n.Marker(o).setLngLat([t.longitude,t.latitude]);return s.getElement().addEventListener("click",(t=>{var e,n;null===(n=(e=r.current.props).onClick)||void 0===n||n.call(e,{type:"click",target:s,originalEvent:t})})),s.on("dragstart",(t=>{var e,n;const o=t;o.lngLat=i.getLngLat(),null===(n=(e=r.current.props).onDragStart)||void 0===n||n.call(e,o)})),s.on("drag",(t=>{var e,n;const o=t;o.lngLat=i.getLngLat(),null===(n=(e=r.current.props).onDrag)||void 0===n||n.call(e,o)})),s.on("dragend",(t=>{var e,n;const o=t;o.lngLat=i.getLngLat(),null===(n=(e=r.current.props).onDragEnd)||void 0===n||n.call(e,o)})),s}),[]);return(0,h.useEffect)((()=>(i.addTo(e.getMap()),()=>{i.remove()})),[]),(0,h.useEffect)((()=>{MT(i.getElement(),t.style)}),[t.style]),i.getLngLat().lng===t.longitude&&i.getLngLat().lat===t.latitude||i.setLngLat([t.longitude,t.latitude]),t.offset&&!function(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===o}(i.getOffset(),t.offset)&&i.setOffset(t.offset),i.isDraggable()!==t.draggable&&i.setDraggable(t.draggable),i.getRotation()!==t.rotation&&i.setRotation(t.rotation),i.getRotationAlignment()!==t.rotationAlignment&&i.setRotationAlignment(t.rotationAlignment),i.getPitchAlignment()!==t.pitchAlignment&&i.setPitchAlignment(t.pitchAlignment),i.getPopup()!==t.popup&&i.setPopup(t.popup),(0,G.createPortal)(t.children,i.getElement())}TT.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};h.memo(TT);function OT(t){return new Set(t?t.trim().split(/\s+/):[])}h.memo((function(t){const{map:e,mapLib:n}=(0,h.useContext)(wT),r=(0,h.useMemo)((()=>document.createElement("div")),[]),i=(0,h.useRef)({props:t});i.current.props=t;const o=(0,h.useMemo)((()=>{const e={...t},r=new n.Popup(e).setLngLat([t.longitude,t.latitude]);return r.once("open",(t=>{var e,n;null===(n=(e=i.current.props).onOpen)||void 0===n||n.call(e,t)})),r}),[]);if((0,h.useEffect)((()=>{const t=t=>{var e,n;null===(n=(e=i.current.props).onClose)||void 0===n||n.call(e,t)};return o.on("close",t),o.setDOMContent(r).addTo(e.getMap()),()=>{o.off("close",t),o.isOpen()&&o.remove()}}),[]),(0,h.useEffect)((()=>{MT(o.getElement(),t.style)}),[t.style]),o.isOpen()&&(o.getLngLat().lng===t.longitude&&o.getLngLat().lat===t.latitude||o.setLngLat([t.longitude,t.latitude]),t.offset&&!dT(o.options.offset,t.offset)&&o.setOffset(t.offset),o.options.anchor===t.anchor&&o.options.maxWidth===t.maxWidth||(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const e=OT(o.options.className),n=OT(t.className);for(const t of e)n.has(t)||o.removeClassName(t);for(const t of n)e.has(t)||o.addClassName(t);o.options.className=t.className}return(0,G.createPortal)(t.children,r)}));const kT=function(t,e,n,r){const i=(0,h.useContext)(wT),o=(0,h.useMemo)((()=>t(i)),[]);return(0,h.useEffect)((()=>{const t=r||n||e,s="function"===typeof e&&"function"===typeof n?e:null,a="function"===typeof n?n:"function"===typeof e?e:null,{map:l}=i;return l.hasControl(o)||(l.addControl(o,null===t||void 0===t?void 0:t.position),s&&s(i)),()=>{a&&a(i),l.hasControl(o)&&l.removeControl(o)}}),[]),o};h.memo((function(t){const e=kT((e=>{let{mapLib:n}=e;return new n.AttributionControl(t)}),{position:t.position});return(0,h.useEffect)((()=>{MT(e._container,t.style)}),[t.style]),null}));h.memo((function(t){const e=kT((e=>{let{mapLib:n}=e;return new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})}),{position:t.position});return(0,h.useEffect)((()=>{MT(e._controlContainer,t.style)}),[t.style]),null}));const RT=(0,h.forwardRef)(((t,e)=>{const n=(0,h.useRef)({props:t}),r=kT((e=>{let{mapLib:r}=e;const i=new r.GeolocateControl(t),o=i._setupUI;return i._setupUI=t=>{i._container.hasChildNodes()||o(t)},i.on("geolocate",(t=>{var e,r;null===(r=(e=n.current.props).onGeolocate)||void 0===r||r.call(e,t)})),i.on("error",(t=>{var e,r;null===(r=(e=n.current.props).onError)||void 0===r||r.call(e,t)})),i.on("outofmaxbounds",(t=>{var e,r;null===(r=(e=n.current.props).onOutOfMaxBounds)||void 0===r||r.call(e,t)})),i.on("trackuserlocationstart",(t=>{var e,r;null===(r=(e=n.current.props).onTrackUserLocationStart)||void 0===r||r.call(e,t)})),i.on("trackuserlocationend",(t=>{var e,r;null===(r=(e=n.current.props).onTrackUserLocationEnd)||void 0===r||r.call(e,t)})),i}),{position:t.position});return n.current.props=t,(0,h.useImperativeHandle)(e,(()=>({trigger:()=>r.trigger()})),[]),(0,h.useEffect)((()=>{MT(r._container,t.style)}),[t.style]),null}));RT.displayName="GeolocateControl";h.memo(RT);h.memo((function(t){const e=kT((e=>{let{mapLib:n}=e;return new n.NavigationControl(t)}),{position:t.position});return(0,h.useEffect)((()=>{MT(e._container,t.style)}),[t.style]),null}));function IT(t){const e=kT((e=>{let{mapLib:n}=e;return new n.ScaleControl(t)}),{position:t.position});return e.options.unit===t.unit&&e.options.maxWidth===t.maxWidth||(e.options.maxWidth=t.maxWidth,e.setUnit(t.unit)),(0,h.useEffect)((()=>{MT(e._container,t.style)}),[t.style]),null}IT.defaultProps={unit:"metric",maxWidth:100};h.memo(IT);function BT(t){var e;let{layers:n,draggingWhileEditing:r,setDeckGLRef:i}=t;const o=et((t=>t.cityIOdataState.cityIOdata)),s=et((t=>t.menuState)),[a,l]=(0,h.useState)(),c=(0,h.useRef)(null);(0,h.useEffect)((()=>{c.current&&i(c)}),[c]);const u=null===s||void 0===s||null===(e=s.viewSettingsMenuState)||void 0===e?void 0:e.VIEW_CONTROL_BUTTONS,d=()=>{const t=o.GEOGRID.properties.header,e=Gp(o);return{...a,longitude:e[0],latitude:e[1],zoom:15,pitch:45,bearing:360-t.rotation,orthographic:!1}};(0,h.useEffect)((()=>{const t=o.GEOGRID.properties.header,e=Gp(o);switch(u){case"RESET_VIEW_BUTTON":l((t=>({...t,longitude:e[0],latitude:e[1],pitch:0,bearing:0,orthographic:!1})));break;case"NORTH_VIEW_BUTTON":l((e=>({...e,bearing:360-t.rotation})));break;case"ORTHO_VIEW_BUTTON":l((t=>({...t,orthographic:!t.orthographic||!t.orthographic})))}}),[u]),(0,h.useEffect)((()=>{document.addEventListener("contextmenu",(t=>t.preventDefault())),d()}),[]);return(0,v.jsx)(oT,{ref:c,viewState:a,initialViewState:d(),onViewStateChange:t=>{let{viewState:e}=t;e.orthographic="ORTHO_VIEW_BUTTON"===u,l(e)},layers:n,controller:{touchZoom:!0,touchRotate:!0,dragPan:!r,dragRotate:!r,keyboard:!1},children:(0,v.jsx)(ET,{mapStyle:"mapbox://styles/relnox/ck0h5xn701bpr1dqs3he2lecq?fresh=true",mapboxAccessToken:"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg"})})}const LT={name:"project32",dependencies:[xS],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},DT="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",FT={lightSources:{}};function NT(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map((t=>t*e/255))}const jT={name:"lights",vs:DT,fs:DT,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FT;if("lightSources"in e){const{ambientLight:t,pointLights:n,directionalLights:r}=e.lightSources||{};return t||n&&n.length>0||r&&r.length>0?Object.assign({},function(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return i["lighting_uAmbientLight.color"]=e?NT(e):[0,0,0],n.forEach(((t,e)=>{i["lighting_uPointLight[".concat(e,"].color")]=NT(t),i["lighting_uPointLight[".concat(e,"].position")]=t.position,i["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),i.lighting_uPointLightCount=n.length,r.forEach(((t,e)=>{i["lighting_uDirectionalLight[".concat(e,"].color")]=NT(t),i["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),i.lighting_uDirectionalLightCount=r.length,i}({ambientLight:t,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights.push(t);break;case"point":n.pointLights.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},zT="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",UT={};function VT(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UT;if(!("material"in t))return{};const{material:e}=t;return e?function(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map((t=>t/255))}}(e):{lighting_uEnabled:!1}}const GT={name:"gouraud-lighting",dependencies:[jT],vs:zT,defines:{LIGHTING_VERTEX:1},getUniforms:VT},WT={name:"phong-lighting",dependencies:[jT],fs:zT,defines:{LIGHTING_FRAGMENT:1},getUniforms:VT},HT={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const JT={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:HT;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,(t=>t/255));Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}},KT={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...JT},XT={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class qT{static get DRAW_MODE(){return XT}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=SA("geometry"),drawMode:n=XT.TRIANGLES,attributes:r={},indices:i=null,vertexCount:o=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const n in t){let e=t[n];e=ArrayBuffer.isView(e)?{value:e}:e,xA(ArrayBuffer.isView(e.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||e.size||(e.size=3),"indices"===n?(xA(!this.indices),this.indices=e):this.attributes[n]=e}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const r in t){const e=t[r],{value:i,size:o,constant:s}=e;!s&&i&&o>=1&&(n=Math.min(n,i.length/o))}return xA(Number.isFinite(n)),n}}const YT=Math.PI/180,QT=new Float32Array(16),ZT=new Float32Array(12);function $T(t,e,n){const r=e[0]*YT,i=e[1]*YT,o=e[2]*YT,s=Math.sin(o),a=Math.sin(r),l=Math.sin(i),c=Math.cos(o),u=Math.cos(r),d=Math.cos(i),h=n[0],f=n[1],p=n[2];t[0]=h*d*u,t[1]=h*l*u,t[2]=h*-a,t[3]=f*(-l*c+d*a*s),t[4]=f*(d*c+l*a*s),t[5]=f*u*s,t[6]=p*(l*s+d*a*c),t[7]=p*(-d*s+l*a*c),t[8]=p*u*c}function tO(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const eO={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,e){let{startRow:n,endRow:r}=e;const{data:i,getOrientation:o,getScale:s,getTranslation:a,getTransformMatrix:l}=this.props,c=Array.isArray(l),u=c&&16===l.length,d=Array.isArray(s),h=Array.isArray(o),f=Array.isArray(a),p=u||!c&&Boolean(l(i[0]));t.constant=p?u:h&&d&&f;const g=t.value;if(t.constant){let e;if(p)QT.set(l),e=tO(QT);else{e=ZT;$T(e,o,s),e.set(a,9)}t.value=new Float32Array(e)}else{let e=n*t.size;const{iterable:c,objectInfo:m}=pP(i,n,r);for(const t of c){let n;if(m.index++,p)QT.set(u?l:l(t,m)),n=tO(QT);else{n=ZT;$T(n,h?o:o(t,m),d?s:s(t,m)),n.set(f?a:a(t,m),9)}g[e++]=n[0],g[e++]=n[1],g[e++]=n[2],g[e++]=n[3],g[e++]=n[4],g[e++]=n[5],g[e++]=n[6],g[e++]=n[7],g[e++]=n[8],g[e++]=n[9],g[e++]=n[10],g[e++]=n[11]}}}};function nO(t,e){return e===dy.CARTESIAN||e===dy.METER_OFFSETS||e===dy.DEFAULT&&!t.isGeospatial}function rO(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;const a=t.POSITION?t.POSITION.value:[],l=a&&a.length;for(let c=0;c<l;c+=3){const t=a[c],l=a[c+1],u=a[c+2];e=t<e?t:e,n=l<n?l:n,r=u<r?u:r,i=t>i?t:i,o=l>o?l:o,s=u>s?u:s}return[[e,n,r],[i,o,s]]}function iO(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),Rg.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function oO(t,e){if(t.attributes)return iO(t.attributes,e),t instanceof qT?t:new qT(t);if(t.positions||t.POSITION)return iO(t,e),new qT({attributes:t});throw Error("Invalid mesh")}const sO={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}};class aO extends QM{constructor(){super(...arguments),ge(this,"state",void 0)}getShaders(){const t=!vx(this.context.gl),e={};return L_(this.context.gl,k_)&&(e.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  DECKGL_FILTER_COLOR(color, geometry);\n\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n}\n",modules:[LT,WT,KT],transpileToGLSL100:t,defines:e})}getBounds(){var t;if(this.props._instanced)return super.getBounds();let e=this.state.positionBounds;if(e)return e;const{mesh:n}=this.props;if(!n)return null;if(e=null===(t=n.header)||void 0===t?void 0:t.boundingBox,!e){const{attributes:t}=oO(n,this.props._useMeshColors);t.POSITION=t.POSITION||t.positions,e=rO(t)}return this.state.positionBounds=e,e}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:eO}),this.setState({emptyTexture:new qA(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t;if(e.mesh!==n.mesh||r.extensionsChanged){var i;if(this.state.positionBounds=null,null===(i=this.state.model)||void 0===i||i.delete(),e.mesh){this.state.model=this.getModel(e.mesh);const t=e.mesh.attributes||e.mesh;this.setState({hasNormals:Boolean(t.NORMAL||t.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==n.texture&&this.setTexture(e.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(t){super.finalizeState(t),this.state.emptyTexture.delete()}draw(t){let{uniforms:e}=t;if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:r,coordinateSystem:i,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:r,composeModelMatrix:!o||nO(n,i),flatShading:!this.state.hasNormals}).draw()}get isLoaded(){var t;return(null===(t=this.state)||void 0===t?void 0:t.model)&&super.isLoaded}getModel(t){const e=new oM(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:oO(t,this.props._useMeshColors),isInstanced:!0}),{texture:n}=this.props,{emptyTexture:r}=this.state;return e.setUniforms({sampler:n||r,hasTexture:Boolean(n)}),e}setTexture(t){const{emptyTexture:e,model:n}=this.state;n&&n.setUniforms({sampler:t||e,hasTexture:Boolean(t)})}}ge(aO,"defaultProps",sO),ge(aO,"layerName","SimpleMeshLayer");const lO=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),cO=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),uO=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),dO=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),hO={POSITION:{size:3,value:new Float32Array(cO)},NORMAL:{size:3,value:new Float32Array(uO)},TEXCOORD_0:{size:2,value:new Float32Array(dO)}};class fO extends qT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=SA("cube-geometry")}=t;super({...t,id:e,indices:{size:1,value:new Uint16Array(lO)},attributes:{...hO,...t.attributes}})}}const pO=/^[og]\s*(.+)?/,gO=/^mtllib /,mO=/^usemtl /;class vO{constructor(t){let{index:e,name:n="",mtllib:r,smooth:i,groupStart:o}=t;this.index=e,this.name=n,this.mtllib=r,this.smooth=i,this.groupStart=o,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}clone(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.index;return new vO({index:t,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})}}class bO{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.name=t,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0,this.fromDeclaration=null}startMaterial(t,e){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r=new vO({index:this.materials.length,name:t,mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0});return this.materials.push(r),r}currentMaterial(){if(this.materials.length>0)return this.materials[this.materials.length-1]}_finalize(t){const e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(let n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}}class yO{constructor(){this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}startObject(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.object&&!this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=e);const n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object=new bO(t),this.object.fromDeclaration=e,n&&n.name&&"function"===typeof n.clone){const t=n.clone(0);t.inherited=!0,this.object.materials.push(t)}this.objects.push(this.object)}finalize(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)}parseVertexIndex(t,e){const n=parseInt(t);return 3*(n>=0?n-1:n+e/3)}parseNormalIndex(t,e){const n=parseInt(t);return 3*(n>=0?n-1:n+e/3)}parseUVIndex(t,e){const n=parseInt(t);return 2*(n>=0?n-1:n+e/2)}addVertex(t,e,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])}addVertexPoint(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}addVertexLine(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}addNormal(t,e,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])}addColor(t,e,n){const r=this.colors,i=this.object.geometry.colors;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])}addUV(t,e,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[t+0],r[t+1]),i.push(r[e+0],r[e+1]),i.push(r[n+0],r[n+1])}addUVLine(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])}addFace(t,e,n,r,i,o,s,a,l){const c=this.vertices.length;let u=this.parseVertexIndex(t,c),d=this.parseVertexIndex(e,c),h=this.parseVertexIndex(n,c);if(this.addVertex(u,d,h),void 0!==r&&""!==r){const t=this.uvs.length;u=this.parseUVIndex(r,t),d=this.parseUVIndex(i,t),h=this.parseUVIndex(o,t),this.addUV(u,d,h)}if(void 0!==s&&""!==s){const t=this.normals.length;u=this.parseNormalIndex(s,t),d=s===a?u:this.parseNormalIndex(a,t),h=s===l?u:this.parseNormalIndex(l,t),this.addNormal(u,d,h)}this.colors.length>0&&this.addColor(u,d,h)}addPointGeometry(t){this.object.geometry.type="Points";const e=this.vertices.length;for(const n of t)this.addVertexPoint(this.parseVertexIndex(n,e))}addLineGeometry(t,e){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(const i of t)this.addVertexLine(this.parseVertexIndex(i,n));for(const i of e)this.addUVLine(this.parseUVIndex(i,r))}}class xO{constructor(t,e){ge(this,"fields",void 0),ge(this,"metadata",void 0),function(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(t)),function(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(t),this.fields=t,this.metadata=e||new Map}compareTo(t){if(this.metadata!==t.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(let e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}select(){const t=Object.create(null);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const o of n)t[o]=!0;const i=this.fields.filter((e=>t[e.name]));return new xO(i,this.metadata)}selectAt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map((t=>this.fields[t])).filter(Boolean);return new xO(r,this.metadata)}assign(t){let e,n=this.metadata;if(t instanceof xO){const r=t;e=r.fields,n=AO(AO(new Map,this.metadata),r.metadata)}else e=t;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of e)r[o.name]=o;const i=Object.values(r);return new xO(i,n)}}function AO(t,e){return new Map([...t||new Map,...e||new Map])}let _O,wO,SO,CO,EO,PO,MO,TO,OO=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({});class kO{static isNull(t){return t&&t.typeId===OO.Null}static isInt(t){return t&&t.typeId===OO.Int}static isFloat(t){return t&&t.typeId===OO.Float}static isBinary(t){return t&&t.typeId===OO.Binary}static isUtf8(t){return t&&t.typeId===OO.Utf8}static isBool(t){return t&&t.typeId===OO.Bool}static isDecimal(t){return t&&t.typeId===OO.Decimal}static isDate(t){return t&&t.typeId===OO.Date}static isTime(t){return t&&t.typeId===OO.Time}static isTimestamp(t){return t&&t.typeId===OO.Timestamp}static isInterval(t){return t&&t.typeId===OO.Interval}static isList(t){return t&&t.typeId===OO.List}static isStruct(t){return t&&t.typeId===OO.Struct}static isUnion(t){return t&&t.typeId===OO.Union}static isFixedSizeBinary(t){return t&&t.typeId===OO.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===OO.FixedSizeList}static isMap(t){return t&&t.typeId===OO.Map}static isDictionary(t){return t&&t.typeId===OO.Dictionary}get typeId(){return OO.NONE}compareTo(t){return this===t}}Symbol.toStringTag;Symbol.toStringTag;_O=Symbol.toStringTag;class RO extends kO{constructor(t,e){super(),ge(this,"isSigned",void 0),ge(this,"bitWidth",void 0),this.isSigned=t,this.bitWidth=e}get typeId(){return OO.Int}get[_O](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class IO extends RO{constructor(){super(!0,8)}}class BO extends RO{constructor(){super(!0,16)}}class LO extends RO{constructor(){super(!0,32)}}class DO extends RO{constructor(){super(!1,8)}}class FO extends RO{constructor(){super(!1,16)}}class NO extends RO{constructor(){super(!1,32)}}const jO=32,zO=64;wO=Symbol.toStringTag;class UO extends kO{constructor(t){super(),ge(this,"precision",void 0),this.precision=t}get typeId(){return OO.Float}get[wO](){return"Float"}toString(){return"Float".concat(this.precision)}}class VO extends UO{constructor(){super(jO)}}class GO extends UO{constructor(){super(zO)}}Symbol.toStringTag;Symbol.toStringTag;SO=Symbol.toStringTag;CO=Symbol.toStringTag;EO=Symbol.toStringTag;PO=Symbol.toStringTag;MO=Symbol.toStringTag;class WO extends kO{constructor(t,e){super(),ge(this,"listSize",void 0),ge(this,"children",void 0),this.listSize=t,this.children=[e]}get typeId(){return OO.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[MO](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}TO=Symbol.toStringTag;function HO(t){switch(t.constructor){case Int8Array:return new IO;case Uint8Array:return new DO;case Int16Array:return new BO;case Uint16Array:return new FO;case Int32Array:return new LO;case Uint32Array:return new NO;case Float32Array:return new VO;case Float64Array:return new GO;default:throw new Error("array type not supported")}}class JO{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;ge(this,"name",void 0),ge(this,"type",void 0),ge(this,"nullable",void 0),ge(this,"metadata",void 0),this.name=t,this.type=e,this.nullable=n,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new JO(this.name,this.type,this.nullable,this.metadata)}compareTo(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}function KO(t,e){const n=new Map;for(const o in e)"value"!==o&&n.set(o,JSON.stringify(e[o]));const r=HO(e.value),i=!("size"in e)||1===e.size;return new JO(t,i?r:new WO(e.size,new JO("value",r)),!1,n)}function XO(t,e){const{meshes:n}=function(t){const e=new yO;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const n=t.split("\n");let r="",i="",o=0,s=[];const a="function"===typeof"".trimLeft;for(let u=0,d=n.length;u<d;u++)if(r=n[u],r=a?r.trimLeft():r.trim(),o=r.length,0!==o&&(i=r.charAt(0),"#"!==i))if("v"===i){const t=r.split(/\s+/);switch(t[0]){case"v":e.vertices.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),t.length>=7&&e.colors.push(parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6]));break;case"vn":e.normals.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]));break;case"vt":e.uvs.push(parseFloat(t[1]),parseFloat(t[2]))}}else if("f"===i){const t=r.substr(1).trim().split(/\s+/),n=[];for(let e=0,r=t.length;e<r;e++){const r=t[e];if(r.length>0){const t=r.split("/");n.push(t)}}const i=n[0];for(let r=1,o=n.length-1;r<o;r++){const t=n[r],o=n[r+1];e.addFace(i[0],t[0],o[0],i[1],t[1],o[1],i[2],t[2],o[2])}}else if("l"===i){const t=r.substring(1).trim().split(" ");let n;const i=[];if(-1===r.indexOf("/"))n=t;else{n=[];for(let e=0,r=t.length;e<r;e++){const r=t[e].split("/");""!==r[0]&&n.push(r[0]),""!==r[1]&&i.push(r[1])}}e.addLineGeometry(n,i)}else if("p"===i){const t=r.substr(1).trim().split(" ");e.addPointGeometry(t)}else if(null!==(s=pO.exec(r))){const t=(" "+s[0].substr(1).trim()).substr(1);e.startObject(t)}else if(mO.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(gO.test(r))e.materialLibraries.push(r.substring(7).trim());else{if("s"!==i){if("\0"===r)continue;throw new Error('Unexpected line: "'.concat(r,'"'))}{if(s=r.split(" "),s.length>1){const t=s[1].trim().toLowerCase();e.object.smooth="0"!==t&&"off"!==t}else e.object.smooth=!0;const t=e.object.currentMaterial();t&&(t.smooth=e.object.smooth)}}e.finalize();const l=[],c=[];for(const u of e.objects){const{geometry:t}=u;if(0===t.vertices.length)continue;const e={header:{vertexCount:t.vertices.length/3},attributes:{}};switch(t.type){case"Points":e.mode=0;break;case"Line":e.mode=1;break;default:e.mode=4}e.attributes.POSITION={value:new Float32Array(t.vertices),size:3},t.normals.length>0&&(e.attributes.NORMAL={value:new Float32Array(t.normals),size:3}),t.colors.length>0&&(e.attributes.COLOR_0={value:new Float32Array(t.colors),size:3}),t.uvs.length>0&&(e.attributes.TEXCOORD_0={value:new Float32Array(t.uvs),size:2}),e.materials=[];for(const n of u.materials){const t={name:n.name,flatShading:!n.smooth};e.materials.push(t),c.push(t)}e.name=u.name,l.push(e)}return{meshes:l,materials:c}}(t),r=n.reduce(((t,e)=>t+e.header.vertexCount),0),i=function(t,e){const n=new Float32Array(3*e);let r,i,o,s=0;for(const l of t){const{POSITION:t,NORMAL:a,COLOR_0:c,TEXCOORD_0:u}=l.attributes;n.set(t.value,3*s),a&&(r=r||new Float32Array(3*e),r.set(a.value,3*s)),c&&(i=i||new Float32Array(3*e),i.set(c.value,3*s)),u&&(o=o||new Float32Array(2*e),o.set(u.value,2*s)),s+=t.value.length/3}const a={};a.POSITION={value:n,size:3},r&&(a.NORMAL={value:r,size:3});i&&(a.COLOR_0={value:i,size:3});o&&(a.TEXCOORD_0={value:o,size:2});return a}(n,r),o={vertexCount:r,boundingBox:rO(i)},s=function(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const i in n)e=e||new Map,"value"!==i&&e.set(i,JSON.stringify(n[i]));const r=[];for(const i in t){const e=KO(i,t[i]);r.push(e)}return new xO(r,e)}(i,{mode:4,boundingBox:o.boundingBox});return{loaderData:{header:{}},schema:s,header:o,mode:4,attributes:i}}const qO=/\s+/;function YO(t,e){const n=[];let r={name:"placeholder"};const i=t.split("\n");for(let o of i){if(o.trim(),0===o.length||"#"===o.charAt(0))continue;const t=o.indexOf(" ");let e=t>=0?o.substring(0,t):o;e.toLowerCase();let i=t>=0?o.substring(t+1):"";switch(i.trim(),e){case"newmtl":({name:i}),n.push(r);break;case"ka":r.ambientColor=QO(i);break;case"kd":r.diffuseColor=QO(i);break;case"map_kd":r.diffuseTextureUrl=i;break;case"ks":r.specularColor=QO(i);break;case"map_ks":r.specularTextureUrl=i;break;case"ke":r.emissiveColor=QO(i);break;case"map_ke":r.emissiveTextureUrl=i;break;case"ns":r.shininess=parseFloat(i);break;case"map_ns":default:break;case"ni":r.refraction=parseFloat(i);break;case"illum":r.illumination=parseFloat(i)}}return n}function QO(t,e){const n=t.split(qO,3);return[parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2])]}const ZO={name:"OBJ",id:"obj",module:"obj",version:"3.4.15",worker:!0,extensions:["obj"],mimeTypes:["text/plain"],testText:function(t){return"v"===t[0]},options:{obj:{}}};const $O={name:"MTL",id:"mtl",module:"mtl",version:"3.4.15",worker:!0,extensions:["mtl"],mimeTypes:["text/plain"],testText:t=>t.includes("newmtl"),options:{mtl:{}}},tk={...ZO,parse:async(t,e)=>XO((new TextDecoder).decode(t)),parseTextSync:(t,e)=>XO(t)};function ek(t){let{data:e,intensity:n,selected:r,setLayerHoveredData:i}=t;const o=e.access&&e.access.features,s=new fO({type:"x,z",xlen:0,ylen:0,zlen:0}),a=e.GEOGRID.properties.header;return new aO({onHover:t=>{t.object&&i("".concat(e.access.properties[r],": ").concat(Math.floor(100*t.object.properties[r]),"%"))},pickable:!0,id:"ACCESS",opacity:.1+n/100,data:o&&o,loaders:[tk],mesh:s,getPosition:t=>[t.geometry.coordinates[0],t.geometry.coordinates[1],1],getColor:t=>{if(void 0===t.properties[r]||null===t.properties[r])return[0,0,0,0];{const e=Wp((t=>t>0&&t<1?t:t>=1?1:0)(t.properties[r]),0,1);return[e[0],e[1],e[2],200]}},getOrientation:t=>[-180,a.rotation,-90],getScale:t=>[e.GEOGRID.properties.header.cellSize/(2+n/100),1+t.properties[r]*n,e.GEOGRID.properties.header.cellSize/(2+n/100)],updateTriggers:{getScale:r},transitions:{getColor:500,getScale:500}})}const nk=[0,0,0,255],rk={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:nk},getTargetColor:{type:"accessor",value:nk},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,numSegments:{type:"number",value:50,min:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class ik extends QM{constructor(){super(...arguments),ge(this,"state",void 0)}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  if (dh == 0.0) {\n    return sourceZ + deltaZ * ratio;\n  }\n  float unitZ = deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    vec3 source_world = instanceSourcePositions;\n    vec3 target_world = instanceTargetPositions;\n    if (useShortestPath) {\n      source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n      target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n\n      float deltaLng = target_world.x - source_world.x;\n      if (deltaLng > 180.) target_world.x -= 360.;\n      if (deltaLng < -180.) source_world.x -= 360.;\n    }\n    source = project_position(source_world, instanceSourcePositions64Low);\n    target = project_position(target_world, instanceTargetPositions64Low);\n    float antiMeridianX = 0.0;\n\n    if (useShortestPath) {\n      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n      }\n      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\n\n      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\n        isValid = 0.0;\n        indexDir = sign(segmentRatio - thresholdRatio);\n        segmentRatio = thresholdRatio;\n      }\n    }\n\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n\n    if (useShortestPath) {\n      if (nextPos.x < antiMeridianX) {\n        currPos.x += TILE_SIZE;\n        nextPos.x += TILE_SIZE;\n      }\n    }\n\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(curr, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,KT]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:nk},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:nk},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t;if(r.extensionsChanged||r.propsChanged&&e.numSegments!==n.numSegments){var i;const{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:o,greatCircle:s,wrapLongitude:a}=this.props;this.state.model.setUniforms(e).setUniforms({greatCircle:s,widthUnits:fy[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a}).draw()}_getModel(t){const{id:e,numSegments:n}=this.props;let r=[];for(let o=0;o<n;o++)r=r.concat([o,1,0,o,-1,0]);const i=new oM(t,{...this.getShaders(),id:e,geometry:new qT({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0});return i.setUniforms({numSegments:n}),i}}function ok(t){let{data:e,selected:n,opacity:r}=t;if(e.ABM2&&n){const t="mode"in n?"mode":"profile";return new ik({id:"AGGREGATED_TRIPS",shadowEnabled:!1,data:e.ABM2.trips,getSourcePosition:e=>{if(n[t]===e[t])return e.path[0]},getTargetPosition:e=>{if(n[t]===e[t])return e.path[e.path.length-1]},getSourceColor:n=>Up(e.ABM2.attr[t][n[t]].color),getTargetColor:[0,0,0,100],getWidth:5*r,updateTriggers:{getSourcePosition:n,getTargetPosition:n}})}}ge(ik,"layerName","ArcLayer"),ge(ik,"defaultProps",rk);class sk{constructor(t){ge(this,"opts",void 0),ge(this,"typedArrayManager",void 0),ge(this,"indexStarts",[0]),ge(this,"vertexStarts",[0]),ge(this,"vertexCount",0),ge(this,"instanceCount",0),ge(this,"attributes",void 0),ge(this,"_attributeDefs",void 0),ge(this,"data",void 0),ge(this,"getGeometry",void 0),ge(this,"geometryBuffer",void 0),ge(this,"buffers",void 0),ge(this,"positionSize",void 0),ge(this,"normalize",void 0);const{attributes:e={}}=t;this.typedArrayManager=_v,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:o,dataChanged:s,normalize:a=!0}=this.opts;if(this.data=e,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===o?2:3),this.buffers=n,this.normalize=a,i&&(OS(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),a||(n.positions=i)),this.geometryBuffer=n.positions,Array.isArray(s))for(const l of s)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry(t){let{startRow:e,endRow:n}=t;this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?mP(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:o}=this;for(const s in i)if(s in r)o.release(n[s]),n[s]=null;else{const r=i[s];r.copy=e,n[s]=o.allocate(n[s],t,r)}}_forEachGeometry(t,e,n){const{data:r,getGeometry:i}=this,{iterable:o,objectInfo:s}=pP(r,e,n);for(const a of o){s.index++;t(i?i(a,s):null,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:n,instanceCount:r}=this;const{data:i,geometryBuffer:o}=this,{startRow:s=0,endRow:a=1/0}=t||{},l={};if(t||(e=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((t,e)=>{const r=t&&this.normalizeGeometry(t);l[e]=r,n[e+1]=n[e]+(r?this.getGeometrySize(r):0)}),s,a),r=n[n.length-1];else if(n=i.startIndices,r=n[i.length]||0,ArrayBuffer.isView(o))r=r||o.length/this.positionSize;else if(o instanceof UA){const t=o.accessor.stride||4*this.positionSize;r=r||o.byteLength/t}else if(o.buffer){const t=o.stride||4*this.positionSize;r=r||o.buffer.byteLength/t}else if(o.value){const t=o.value,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;r=r||t.length/e}this._allocate(r,Boolean(t)),this.indexStarts=e,this.vertexStarts=n,this.instanceCount=r;const c={};this._forEachGeometry(((t,i)=>{const o=l[i]||t;c.vertexStart=n[i],c.indexStart=e[i];const s=i<n.length-1?n[i+1]:r;c.geometrySize=s-n[i],c.geometryIndex=i,this.updateGeometryAttributes(o,c)}),s,a),this.vertexCount=e[e.length-1]}}const ak=1,lk=-1;function ck(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n=0,end:r=t.length}=e,i=e.size||2;let o=0;for(let s=n,a=r-i;s<r;s+=i)o+=(t[s]-t[a])*(t[s+1]+t[a+1]),a=s;return o/2}(t,e))}(t,n);return r!==e&&(function(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,o=(r-n)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const e=n+a*i,r=n+(o-1-a)*i;for(let n=0;n<i;++n){const i=t[e+n];t[e+n]=t[r+n],t[r+n]=i}}}(t,n),!0)}function uk(t,e,n,r){let i,o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(4&n)i=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(2&n)i=(r[2]-t[0])/(e[0]-t[0]),o=2;else{if(!(1&n))return null;i=(r[0]-t[0])/(e[0]-t[0]),o=0}for(let a=0;a<t.length;a++)s[a]=(1&o)===a?r[o]:i*(e[a]-t[a])+t[a];return s}function dk(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function hk(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function fk(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function pk(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const o=r+e*n;for(let s=0;s<n;s++)i[s]=t[o+s];return i}function gk(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=t.length}=e||{},l=(a-s)/n;let c=[];const u=[c],d=pk(t,0,n,s);let h,f;const p=Ak(d,i,o,[]),g=[];hk(c,d);for(let m=1;m<l;m++){for(h=pk(t,m,n,s,h),f=dk(h,p);f;){uk(d,h,f,p,g);const t=dk(g,p);t&&(uk(d,g,t,p,g),f=t),hk(c,g),fk(d,g),_k(p,i,f),r&&c.length>n&&(c=[],u.push(c),hk(c,d)),f=dk(h,p)}hk(c,h),fk(d,h)}return r?u:u[0]}const mk=0,vk=1;function bk(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function yk(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],l=[{pos:t,types:s?new Array(t.length/r).fill(vk):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:t,types:e,holes:n}=l.shift();wk(t,r,n[0]||t.length,c),u=Ak(c[0],i,o,u);const d=dk(c[1],u);if(d){let i=xk(t,e,r,0,n[0]||t.length,u,d);const o={pos:i[0].pos,types:i[0].types,holes:[]},a={pos:i[1].pos,types:i[1].types,holes:[]};l.push(o,a);for(let l=0;l<n.length;l++)i=xk(t,e,r,n[l],n[l+1]||t.length,u,d),i[0]&&(o.holes.push(o.pos.length),o.pos=bk(o.pos,i[0].pos),s&&(o.types=bk(o.types,i[0].types))),i[1]&&(a.holes.push(a.pos.length),a.pos=bk(a.pos,i[1].pos),s&&(a.types=bk(a.types,i[1].types)))}else{const r={positions:t};s&&(r.edgeTypes=e),n.length&&(r.holeIndices=n),a.push(r)}}return a}function xk(t,e,n,r,i,o,s){const a=(i-r)/n,l=[],c=[],u=[],d=[],h=[];let f,p,g;const m=pk(t,a-1,n,r);let v=Math.sign(8&s?m[1]-o[3]:m[0]-o[2]),b=e&&e[a-1],y=0,x=0;for(let A=0;A<a;A++)f=pk(t,A,n,r,f),p=Math.sign(8&s?f[1]-o[3]:f[0]-o[2]),g=e&&e[r/n+A],p&&v&&v!==p&&(uk(m,f,s,o,h),hk(l,h)&&u.push(b),hk(c,h)&&d.push(b)),p<=0?(hk(l,f)&&u.push(g),y-=p):u.length&&(u[u.length-1]=mk),p>=0?(hk(c,f)&&d.push(g),x+=p):d.length&&(d[d.length-1]=mk),fk(m,f),v=p,b=g;return[y?{pos:l,types:e&&u}:null,x?{pos:c,types:e&&d}:null]}function Ak(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}function _k(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function wk(t,e,n,r){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<n;l+=e){const e=t[l],n=t[l+1];i=e<i?e:i,o=e>o?e:o,s=n<s?n:s,a=n>a?n:a}return r[0][0]=i,r[0][1]=s,r[1][0]=o,r[1][1]=a,r}const Sk=85.051129;function Ck(t,e,n,r){let i=-1,o=-1;for(let s=n+1;s<r;s+=e){const e=Math.abs(t[s]);e>i&&(i=e,o=s-1)}return o}function Ek(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sk;const o=t[n],s=t[r-e];if(Math.abs(o-s)>180){const r=pk(t,0,e,n);r[0]+=360*Math.round((s-o)/360),hk(t,r),r[1]=Math.sign(r[1])*i,hk(t,r),r[0]=o,hk(t,r)}}function Pk(t,e,n,r){let i,o=t[0];for(let s=n;s<r;s+=e){i=t[s];const e=i-o;(e>180||e<-180)&&(i-=360*Math.round(e/360)),t[s]=o=i}}function Mk(t,e){let n;const r=t.length/e;for(let o=0;o<r&&(n=t[o*e],(n+180)%360===0);o++);const i=360*-Math.round(n/360);if(0!==i)for(let o=0;o<r;o++)t[o*e]+=i}function Tk(t,e,n,r){let i;if(Array.isArray(t[0])){const n=t.length*e;i=new Array(n);for(let r=0;r<t.length;r++)for(let n=0;n<e;n++)i[r*e+n]=t[r][n]||0}else i=t;return n?gk(i,{size:e,gridResolution:n}):r?function(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:o=!0}=e||{},s=t.slice(r,i);Pk(s,n,0,i-r);const a=gk(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)Mk(l,n);return a}(i,{size:e}):i}class Ok extends sk{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?Tk(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(kk(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&kk(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const n=this.attributes.segmentTypes,r=!!t&&this.isClosed(t),{vertexStart:i,geometrySize:o}=e;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}_updatePositions(t,e){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:r,geometrySize:i}=e,o=new Array(3);for(let s=r,a=0;a<i;s++,a++)this.getPointOnPath(t,a,o),n[3*s]=o[0],n[3*s+1]=o[1],n[3*s+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{positionSize:r}=this;e*r>=t.length&&(e+=1-t.length/r);const i=e*r;return n[0]=t[i],n[1]=t[i+1],n[2]=3===r&&t[i+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:e}=this,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}function kk(t){return Array.isArray(t[0])}const Rk=[0,0,0,255],Ik={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:Rk},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Bk={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Lk extends QM{constructor(){super(...arguments),ge(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\n    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\n    geometry.position = vec4(currPosition + offset, 1.0);\n    gl_Position = project_common_position_to_clipspace(geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,KT]})}get wrapLongitude(){return!1}initializeState(){const t=!0;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Bk,accessor:"getPath",update:this.calculatePositions,noAlloc:t,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:t},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Bk,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Bk,defaultValue:Rk},instancePickingColors:{size:3,type:5121,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(t&&t.__source?t.__source.index:n,r)}}}),this.setState({pathTesselator:new Ok({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:e,changeFlags:n}=t,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,i=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:i.getPath,buffers:i,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||r.invalidateAll()}if(n.extensionsChanged){var i;const{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),r.invalidateAll()}}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw(t){let{uniforms:e}=t;const{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:fy[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(t){return new oM(t,{...this.getShaders(),id:this.props.id,geometry:new qT({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}function Dk(t){let{data:e,selected:n,opacity:r}=t;if(e.ABM2&&n){const t="mode"in n?"mode":"profile";return new Lk({id:"ABM",shadowEnabled:!1,data:e.ABM2.trips,getPath:e=>{if(n[t]===e[t])return e.path},getColor:n=>Up(e.ABM2.attr[t][n[t]].color),opacity:r/100,getWidth:t=>{let e=t.path.length?t.path.length:1;return e>30&&(e=30+r),e},updateTriggers:{getPath:n,getWidth:r}})}}ge(Lk,"defaultProps",Ik),ge(Lk,"layerName","PathLayer");class Fk extends QM{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo(t){let{info:e}=t;const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(e.object=n.__source.object,e.index=n.__source.index,e):e}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||e}getSubLayerRow(t,e,n){return t.__source={parent:this,object:e,index:n},t}getSubLayerAccessor(t){if("function"===typeof t){const e={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}return t}getSubLayerProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;const{opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:h,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v,_subLayerProps:b}=this.props,y={id:"",updateTriggers:{},opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:h,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v},x=b&&t.id&&b[t.id],A=x&&x.updateTriggers,_=t.id||"sublayer";if(x){const e=this.props[sg],n=t.type?t.type._propTypes:{};for(const t in x){const r=n[t]||e[t];r&&"accessor"===r.type&&(x[t]=this.getSubLayerAccessor(x[t]))}}Object.assign(y,t,x),y.id="".concat(this.props.id,"-").concat(_),y.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...A};for(const w of g){const t=w.getSubLayerProps.call(this,w);t&&Object.assign(y,t,{updateTriggers:Object.assign(y.updateTriggers,t.updateTriggers)})}return y}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();if(r){n=Dg(this.renderLayers(),Boolean),this.internalState.subLayers=n}Lg("compositeLayer.renderLayers",this,r,n);for(const i of n)i.parent=this}}function Nk(t){let{data:e,getIndex:n,dataRange:r,replace:i}=t;const{startRow:o=0,endRow:s=1/0}=r,a=e.length;let l=a,c=a;for(let h=0;h<a;h++){const t=n(e[h]);if(l>h&&t>=o&&(l=h),t>=s){c=h;break}}let u=l;const d=c-l!==i.length?e.slice(c):void 0;for(let h=0;h<i.length;h++)e[u++]=i[h];if(d){for(let t=0;t<d.length;t++)e[u++]=d[t];e.length=u}return{startRow:l,endRow:l+i.length}}ge(Fk,"layerName","CompositeLayer");const jk=()=>{},zk={10241:9987,10240:9729,10242:33071,10243:33071};function Uk(t,e,n,r){const i=Math.min(n/e.width,r/e.height),o=Math.floor(e.width*i),s=Math.floor(e.height*i);return 1===i?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function Vk(t){return t&&(t.id||t.url)}function Gk(t,e,n,r){const i=t.width,o=t.height,s=new qA(t.gl,{width:e,height:n,parameters:r});return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:l,targetZ:c,width:u,height:d}=n;const{framebuffer:h,deleteFramebuffer:f}=u_(t);xA(h);const{gl:p,handle:g}=h,m="undefined"!==typeof a||"undefined"!==typeof l||"undefined"!==typeof c;a=a||0,l=l||0,c=c||0;const v=p.bindFramebuffer(36160,g);xA(e);let b=null;if(e instanceof KA&&(b=e,u=Number.isFinite(u)?u:b.width,d=Number.isFinite(d)?d:b.height,b.bind(0),e=b.target),m)switch(e){case 3553:case 34067:p.copyTexSubImage2D(e,o,a,l,r,i,u,d);break;case 35866:case 32879:yx(p).copyTexSubImage3D(e,o,a,l,c,r,i,u,d)}else p.copyTexImage2D(e,o,s,r,i,u,d,0);b&&b.unbind(),p.bindFramebuffer(36160,v||null),f&&h.delete()}(t,s,{targetY:0,width:i,height:o}),t.delete(),s}function Wk(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:o}=e[r];t[Vk(i)]={...i,x:o,y:n}}}class Hk{constructor(t,e){let{onUpdate:n=jk,onError:r=jk}=e;ge(this,"gl",void 0),ge(this,"onUpdate",void 0),ge(this,"onError",void 0),ge(this,"_loadOptions",null),ge(this,"_texture",null),ge(this,"_externalTexture",null),ge(this,"_mapping",{}),ge(this,"_textureParameters",null),ge(this,"_pendingCount",0),ge(this,"_autoPacking",!1),ge(this,"_xOffset",0),ge(this,"_yOffset",0),ge(this,"_rowHeight",0),ge(this,"_buffer",4),ge(this,"_canvasWidth",1024),ge(this,"_canvasHeight",0),ge(this,"_canvas",null),this.gl=t,this.onUpdate=n,this.onError=r}finalize(){var t;null===(t=this._texture)||void 0===t||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const e=this._autoPacking?Vk(t):t;return this._mapping[e]||{}}setProps(t){let{loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}=t;var s;(e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),i&&(this._mapping=i),r)&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=r);o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"===typeof document)return;const n=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=pP(t);for(const s of i){o.index++;const t=e(s,o),i=Vk(t);if(!t)throw new Error("Icon is missing.");if(!t.url)throw new Error("Icon url is missing.");r[i]||n[i]&&t.url===n[i].url||(r[i]={...t,source:s,sourceIndex:o.index})}return r}(t,e,this._mapping)||{});if(n.length>0){const{mapping:t,xOffset:e,yOffset:r,rowHeight:i,canvasHeight:o}=function(t){let{icons:e,buffer:n,mapping:r={},xOffset:i=0,yOffset:o=0,rowHeight:s=0,canvasWidth:a}=t,l=[];for(let u=0;u<e.length;u++){const t=e[u];if(!r[Vk(t)]){const{height:e,width:c}=t;i+c+n>a&&(Wk(r,l,o),i=0,o=s+o+n,s=0,l=[]),l.push({icon:t,xOffset:i}),i=i+c+n,s=Math.max(s,e)}}return l.length>0&&Wk(r,l,o),{mapping:r,rowHeight:s,xOffset:i,yOffset:o,canvasWidth:a,canvasHeight:(c=s+o+n,Math.pow(2,Math.ceil(Math.log2(c))))};var c}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=i,this._mapping=t,this._xOffset=e,this._yOffset=r,this._canvasHeight=o,this._texture||(this._texture=new qA(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||zk})),this._texture.height!==this._canvasHeight&&(this._texture=Gk(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||zk)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const e=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of t)this._pendingCount++,yv(n.url,this._loadOptions).then((t=>{const r=Vk(n),i=this._mapping[r],{x:o,y:s,width:a,height:l}=i,{data:c,width:u,height:d}=Uk(e,t,a,l);this._texture.setSubImageData({data:c,x:o+(a-u)/2,y:s+(l-d)/2,width:u,height:d}),i.width=u,i.height=d,this._texture.generateMipmap(),this.onUpdate()})).catch((t=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:t})})).finally((()=>{this._pendingCount--}))}}const Jk=[0,0,0,255],Kk={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:Jk},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class Xk extends QM{constructor(){super(...arguments),ge(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,KT]})}initializeState(){this.state={iconManager:new Hk(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Jk},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:c}=e,{iconManager:u}=this.state,d=o||this.internalState.isAsyncPropLoading("iconAtlas");if(u.setProps({loadOptions:e.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?s:null,textureParameters:c}),d?n.iconMapping!==e.iconMapping&&i.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.packIcons(a,l),r.extensionsChanged){var h;const{gl:t}=this.context;null===(h=this.state.model)||void 0===h||h.delete(),this.state.model=this._getModel(t),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw(t){let{uniforms:e}=t;const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(e).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:fy[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(t){return new oM(t,{...this.getShaders(),id:this.props.id,geometry:new qT({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var e;const n=null===(e=this.getCurrentLayer())||void 0===e?void 0:e.props.onIconError;n?n(t):Rg.error(t.error.message)()}getInstanceOffset(t){const{width:e,height:n,anchorX:r=e/2,anchorY:i=n/2}=this.state.iconManager.getIconMapping(t);return[e/2-r,n/2-i]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:e,y:n,width:r,height:i}=this.state.iconManager.getIconMapping(t);return[e,n,r,i]}}ge(Xk,"defaultProps",Kk),ge(Xk,"layerName","IconLayer");const qk=[0,0,0,255],Yk={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:qk},getLineColor:{type:"accessor",value:qk},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Qk extends QM{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (!filled) {\n    discard;\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,KT]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:fy[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:fy[u],lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}).draw()}_getModel(t){return new oM(t,{...this.getShaders(),id:this.props.id,geometry:new qT({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}ge(Qk,"defaultProps",Yk),ge(Qk,"layerName","ScatterplotLayer");const Zk=.75,$k=[];class tR extends Xk{constructor(){super(...arguments),ge(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(n,r)}}})}updateState(t){super.updateState(t);const{props:e,oldProps:n}=t;let{outlineColor:r}=e;r!==n.outlineColor&&(r=r.map((t=>t/255)),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!e.sdf&&e.outlineWidth&&Rg.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:e,smoothing:n,outlineWidth:r}=this.props,{outlineColor:i}=this.state,o=r?Math.max(n,Zk*(1-r)):-1;if(t.uniforms={...t.uniforms,sdfBuffer:Zk,outlineBuffer:o,gamma:n,sdf:Boolean(e),outlineColor:i},super.draw(t),e&&r){const{iconManager:t}=this.state;t.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:Zk}})}}getInstanceOffset(t){return t?Array.from(t).flatMap((t=>super.getInstanceOffset(t))):$k}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap((t=>super.getInstanceIconFrame(t))):$k}}ge(tR,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),ge(tR,"layerName","MultiIconLayer");const eR=1e20;class nR{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=r,this.radius=n;const a=this.size=t+4*e,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(s," ").concat(o," ").concat(t,"px ").concat(i),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,s+Math.ceil(r)),c=a+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),f={data:h,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===l)return f;const{ctx:p,buffer:g,gridInner:m,gridOuter:v}=this;p.clearRect(g,g,a,l),p.fillText(t,g,g+s);const b=p.getImageData(g,g,a,l);v.fill(eR,0,d),m.fill(0,0,d);for(let y=0;y<l;y++)for(let t=0;t<a;t++){const e=b.data[4*(y*a+t)+3]/255;if(0===e)continue;const n=(y+g)*c+t+g;if(1===e)v[n]=0,m[n]=eR;else{const t=.5-e;v[n]=t>0?t*t:0,m[n]=t<0?t*t:0}}rR(v,0,0,c,u,c,this.f,this.v,this.z),rR(m,g,g,a,l,c,this.f,this.v,this.z);for(let y=0;y<d;y++){const t=Math.sqrt(v[y])-Math.sqrt(m[y]);h[y]=Math.round(255-255*(t/this.radius+this.cutoff))}return f}}function rR(t,e,n,r,i,o,s,a,l){for(let c=e;c<e+r;c++)iR(t,n*o+c,o,i,s,a,l);for(let c=n;c<n+i;c++)iR(t,c*o+e,1,r,s,a,l)}function iR(t,e,n,r,i,o,s){o[0]=0,s[0]=-eR,s[1]=eR,i[0]=t[e];for(let a=1,l=0,c=0;a<r;a++){i[a]=t[e+a*n];const r=a*a;do{const t=o[l];c=(i[a]-i[t]+r-t*t)/(a-t)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=eR}for(let a=0,l=0;a<r;a++){for(;s[l+1]<a;)l++;const r=o[l],c=a-r;t[e+a*n]=i[r]+c*c}}const oR=32,sR=[];function aR(t,e,n,r){let i=0;for(let s=e;s<n;s++){var o;i+=(null===(o=r[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return i}function lR(t,e,n,r,i,o){let s=e,a=0;for(let l=e;l<n;l++){const e=aR(t,l,l+1,i);a+e>r&&(s<l&&o.push(l),s=l,a=0),a+=e}return a}function cR(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=t.length);const s=[];return"break-all"===e?lR(t,i,o,n,r,s):function(t,e,n,r,i,o){let s=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if(" "===t[u]?l=u+1:" "!==t[u+1]&&u+1!==n||(l=u+1),l>a){let e=aR(t,a,l,i);c+e>r&&(s<a&&(o.push(a),s=a,c=0),e>r&&(e=lR(t,a,l,r,i,o),s=o[o.length-1])),a=l,c+=e}}(t,i,o,n,r,s),s}function uR(t,e,n,r,i,o){let s=0,a=0;for(let l=e;l<n;l++){const e=t[l],n=r[e];n?(a||(a=n.layoutHeight),i[l]=s+n.layoutWidth/2,s+=n.layoutWidth):(Rg.warn("Missing character: ".concat(e," (").concat(e.codePointAt(0),")"))(),i[l]=s,s+=oR)}o[0]=s,o[1]=a}class dR{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;ge(this,"limit",void 0),ge(this,"_cache",{}),ge(this,"_order",[]),this.limit=t}get(t){const e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}const hR={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let fR=new dR(3);function pR(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function gR(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class mR{constructor(){ge(this,"props",{...hR}),ge(this,"_key",void 0),ge(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:e}=this.props;return(1.2*t+2*e)/t}setProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.props,t),this._key=this._getKey();const e=function(t,e){let n;n="string"===typeof e?new Set(Array.from(e)):new Set(e);const r=fR.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}(this._key,this.props.characterSet),n=fR.get(this._key);if(n&&0===e.size)return void(this._atlas!==n&&(this._atlas=n));const r=this._generateFontAtlas(e,n);this._atlas=r,fR.set(this._key,r)}_generateFontAtlas(t,e){const{fontFamily:n,fontWeight:r,fontSize:i,buffer:o,sdf:s,radius:a,cutoff:l}=this.props;let c=e&&e.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});gR(u,n,i,r);const{mapping:d,canvasHeight:h,xOffset:f,yOffset:p}=function(t){let{characterSet:e,getFontWidth:n,fontHeight:r,buffer:i,maxCanvasWidth:o,mapping:s={},xOffset:a=0,yOffset:l=0}=t,c=0,u=a;const d=r+2*i;for(const f of e)if(!s[f]){const t=n(f);u+t+2*i>o&&(u=0,c++),s[f]={x:u+i,y:l+c*d+i,width:t,height:d,layoutWidth:t,layoutHeight:r},u+=t+2*i}return{mapping:s,xOffset:u,yOffset:l+c*d,canvasHeight:(h=l+(c+1)*d,Math.pow(2,Math.ceil(Math.log2(h))))};var h}({getFontWidth:t=>u.measureText(t).width,fontHeight:1.2*i,buffer:o,characterSet:t,maxCanvasWidth:1024,...e&&{mapping:e.mapping,xOffset:e.xOffset,yOffset:e.yOffset}});if(c.height!==h){const t=u.getImageData(0,0,c.width,c.height);c.height=h,u.putImageData(t,0,0)}if(gR(u,n,i,r),s){const e=new nR({fontSize:i,buffer:o,radius:a,cutoff:l,fontFamily:n,fontWeight:"".concat(r)});for(const n of t){const{data:t,width:r,height:o,glyphTop:s}=e.draw(n);d[n].width=r,d[n].layoutOffsetY=.9*i-s;const a=u.createImageData(r,o);pR(t,a),u.putImageData(a,d[n].x,d[n].y)}}else for(const g of t)u.fillText(g,d[g].x,d[g].y+o+.9*i);return{xOffset:f,yOffset:p,mapping:d,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:n,buffer:r,sdf:i,radius:o,cutoff:s}=this.props;return i?"".concat(t," ").concat(e," ").concat(n," ").concat(r," ").concat(o," ").concat(s):"".concat(t," ").concat(e," ").concat(n," ").concat(r)}}const vR={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class bR extends QM{constructor(){super(...arguments),ge(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,KT]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){var n;const{gl:t}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:Boolean(a),padding:l,sizeUnits:fy[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(t){return new oM(t,{...this.getShaders(),id:this.props.id,geometry:new qT({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}ge(bR,"defaultProps",vR),ge(bR,"layerName","TextBackgroundLayer");const yR={start:1,middle:0,end:-1},xR={top:1,center:0,bottom:-1},AR=[0,0,0,255],_R={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:AR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:hR.characterSet},fontFamily:hR.fontFamily,fontWeight:hR.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:AR},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:AR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class wR extends Fk{constructor(){super(...arguments),ge(this,"state",void 0),ge(this,"getBoundingRect",((t,e)=>{let{size:[n,r]}=this.transformParagraph(t,e);const{fontSize:i}=this.state.fontAtlasManager.props;n/=i,r/=i;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(yR["function"===typeof o?o(t,e):o]-1)*n/2,(xR["function"===typeof s?s(t,e):s]-1)*r/2,n,r]})),ge(this,"getIconOffsets",((t,e)=>{const{getTextAnchor:n,getAlignmentBaseline:r}=this.props,{x:i,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(t,e),c=yR["function"===typeof n?n(t,e):n],u=xR["function"===typeof r?r(t,e):r],d=i.length,h=new Array(2*d);let f=0;for(let p=0;p<d;p++){const t=(1-c)*(a-s[p])/2;h[f++]=(c-1)*a/2+t+i[p],h[f++]=(u-1)*l/2+o[p]}return h}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new mR},this.props.maxWidth>0&&Rg.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:e,oldProps:n,changeFlags:r}=t;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo(t){let{info:e}=t;return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:t,fontFamily:e,fontWeight:n}=this.props,{fontAtlasManager:r,characterSet:i}=this.state,o={...t,characterSet:i,fontFamily:e,fontWeight:n};if(!r.mapping)return r.setProps(o),!0;for(const s in o)if(o[s]!==r.props[s])return r.setProps(o),!0;return!1}_updateText(){var t;const{data:e,characterSet:n}=this.props,r=null===(t=e.attributes)||void 0===t?void 0:t.getText;let i,{getText:o}=this.props,s=e.startIndices;const a="auto"===n&&new Set;if(r&&s){const{texts:t,characterCount:n}=function(t){let{value:e,length:n,stride:r,offset:i,startIndices:o,characterSet:s}=t;const a=e.BYTES_PER_ELEMENT,l=r?r/a:1,c=i?i/a:0,u=o[n]||Math.ceil((e.length-c)/l),d=s&&new Set,h=new Array(n);let f=e;if(l>1||c>0){f=new(0,e.constructor)(u);for(let t=0;t<u;t++)f[t]=e[t*l+c]}for(let p=0;p<n;p++){const t=o[p],e=o[p+1]||u,n=f.subarray(t,e);h[p]=String.fromCodePoint.apply(null,n),d&&n.forEach(d.add,d)}if(d)for(const p of d)s.add(String.fromCodePoint(p));return{texts:h,characterCount:u}}({...ArrayBuffer.isView(r)?{value:r}:r,length:e.length,startIndices:s,characterSet:a});i=n,o=(e,n)=>{let{index:r}=n;return t[r]}}else{const{iterable:t,objectInfo:n}=pP(e);s=[0],i=0;for(const e of t){n.index++;const t=Array.from(o(e,n)||"");a&&t.forEach(a.add,a),i+=t.length,s.push(i)}}this.setState({getText:o,startIndices:s,numInstances:i,characterSet:a||n})}transformParagraph(t,e){const{fontAtlasManager:n}=this.state,r=n.mapping,i=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(t,e,n,r,i){const o=Array.from(t),s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,d=[0,0],h=[0,0];let f=0,p=0,g=0;for(let v=0;v<=s;v++){const t=o[v];if("\n"!==t&&v!==s||(g=v),g>p){const t=u?cR(o,n,r,i,p,g):sR;for(let n=0;n<=t.length;n++){const r=0===n?p:t[n-1],s=n<t.length?t[n]:g;uR(o,r,s,i,a,h);for(let t=r;t<s;t++){var m;const e=(null===(m=i[o[t]])||void 0===m?void 0:m.layoutOffsetY)||0;l[t]=f+h[1]/2+e,c[t]=h[0]}f+=h[1]*e,d[0]=Math.max(d[0],h[0])}p=g}"\n"===t&&(a[p]=0,l[p]=0,c[p]=0,p++)}return d[1]=f,{x:a,y:l,rowWidth:c,size:d}}(i(t,e)||"",s,o,a*n.props.fontSize,r)}renderLayers(){const{startIndices:t,numInstances:e,getText:n,fontAtlasManager:{scale:r,texture:i,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:l,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,getBackgroundColor:p,getBorderColor:g,getBorderWidth:m,backgroundPadding:v,background:b,billboard:y,fontSettings:x,outlineWidth:A,outlineColor:_,sizeScale:w,sizeUnits:S,sizeMinPixels:C,sizeMaxPixels:E,transitions:P,updateTriggers:M}=this.props,T=this.getSubLayerClass("characters",tR),O=this.getSubLayerClass("background",bR);return[b&&new O({getFillColor:p,getLineColor:g,getLineWidth:m,padding:v,getPosition:c,getSize:d,getAngle:h,getPixelOffset:f,billboard:y,sizeScale:w,sizeUnits:S,sizeMinPixels:C,sizeMaxPixels:E,transitions:P&&{getPosition:P.getPosition,getAngle:P.getAngle,getSize:P.getSize,getFillColor:P.getBackgroundColor,getLineColor:P.getBorderColor,getLineWidth:P.getBorderWidth,getPixelOffset:P.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:M.getPosition,getAngle:M.getAngle,getSize:M.getSize,getFillColor:M.getBackgroundColor,getLineColor:M.getBorderColor,getLineWidth:M.getBorderWidth,getPixelOffset:M.getPixelOffset,getBoundingRect:{getText:M.getText,getTextAnchor:M.getTextAnchor,getAlignmentBaseline:M.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new T({sdf:x.sdf,smoothing:Number.isFinite(x.smoothing)?x.smoothing:hR.smoothing,outlineWidth:A/(x.radius||hR.radius),outlineColor:_,iconAtlas:i,iconMapping:o,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,billboard:y,sizeScale:w*r,sizeUnits:S,sizeMinPixels:C*r,sizeMaxPixels:E*r,transitions:P&&{getPosition:P.getPosition,getAngle:P.getAngle,getColor:P.getColor,getSize:P.getSize,getPixelOffset:P.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:M.getText,getPosition:M.getPosition,getAngle:M.getAngle,getColor:M.getColor,getSize:M.getSize,getPixelOffset:M.getPixelOffset,getIconOffsets:{getTextAnchor:M.getTextAnchor,getAlignmentBaseline:M.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:l,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){!function(t){Rg.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),fR=new dR(t)}(t)}}ge(wR,"defaultProps",_R),ge(wR,"layerName","TextLayer");var SR=n(973),CR=n.n(SR);const ER=ak,PR=lk,MR={isClosed:!0};function TR(t){return"positions"in t?t.positions:t}function OR(t){return"holeIndices"in t?t.holeIndices:null}function kR(t,e,n,r,i){let o=e;const s=n.length;for(let a=0;a<s;a++)for(let e=0;e<r;e++)t[o++]=n[a][e]||0;if(!function(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(let a=0;a<r;a++)t[o++]=n[0][a]||0;return MR.start=e,MR.end=o,MR.size=r,ck(t,i,MR),o}function RR(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;o=o||n.length;const a=o-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!function(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}(n,r,i,o))for(let c=0;c<r;c++)t[l++]=n[i+c];return MR.start=e,MR.end=l,MR.size=r,ck(t,s,MR),l}function IR(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:o}=t;if(o){let t=0;for(let s=0;s<=o.length;s++)t=RR(n,t,i,e,o[s-1],o[s],0===s?ER:PR),r.push(t);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!function(t){return Array.isArray(t[0])}(t))return RR(n,0,t,e,0,n.length,ER),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let i=0;for(const[o,s]of t.entries())i=kR(n,i,s,e,0===o?ER:PR),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return kR(n,0,t,e,ER),n}function BR(t,e,n){const r=t.length/3;let i=0;for(let o=0;o<r;o++){const s=(o+1)%r;i+=t[3*o+e]*t[3*s+n],i-=t[3*s+e]*t[3*o+n]}return Math.abs(i/2)}function LR(t,e,n,r){const i=t.length/3;for(let o=0;o<i;o++){const i=3*o,s=t[i+0],a=t[i+1],l=t[i+2];t[i+e]=s,t[i+n]=a,t[i+r]=l}}class DR extends sk{constructor(t){const{fp64:e,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const e=IR(t,this.positionSize);return this.opts.resolution?yk(TR(e),OR(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n||{};e=e||[];const s=[],a=[];let l=0,c=0;for(let d=0;d<=e.length;d++){const i=e[d]||t.length,o=c,u=Ck(t,r,l,i);for(let e=u;e<i;e++)s[c++]=t[e];for(let e=l;e<u;e++)s[c++]=t[e];Pk(s,r,o,c),Ek(s,r,o,c,null===n||void 0===n?void 0:n.maxLatitude),l=i,a[d]=c}a.pop();const u=yk(s,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const d of u)Mk(d.positions,r);return u}(TR(e),OR(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if(FR(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}return TR(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&FR(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}_updateIndices(t,e){let{geometryIndex:n,vertexStart:r,indexStart:i}=e;const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!t)return;let c=i;const u=function(t,e,n,r){let i=OR(t);i&&(i=i.map((t=>t/e)));let o=TR(t);const s=r&&3===e;if(n){const t=o.length;o=o.slice();const r=[];for(let i=0;i<t;i+=e){r[0]=o[i],r[1]=o[i+1],s&&(r[2]=o[i+2]);const t=n(r);o[i]=t[0],o[i+1]=t[1],s&&(o[i+2]=t[2])}}if(s){const t=BR(o,0,1),e=BR(o,0,2),r=BR(o,1,2);if(!t&&!e&&!r)return[];t>e&&t>r||(e>r?(n||(o=o.slice()),LR(o,0,2,1)):(n||(o=o.slice()),LR(o,2,0,1)))}return CR()(o,i,e)}(t,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let d=0;d<u.length;d++)l[c++]=u[d]+r;s[n+1]=i+u.length,o.indices=l}_updatePositions(t,e){let{vertexStart:n,geometrySize:r}=e;const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const s=TR(t);for(let a=n,l=0;l<r;a++,l++){const t=s[l*o],e=s[l*o+1],n=o>2?s[l*o+2]:0;i[3*a]=t,i[3*a+1]=e,i[3*a+2]=n}}_updateVertexValid(t,e){let{vertexStart:n,geometrySize:r}=e;const{positionSize:i}=this,o=this.attributes.vertexValid,s=t&&OR(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,n):o.fill(1,n,n+r),s)for(let a=0;a<s.length;a++)o[n+s[a]/i-1]=0;o[n+r-1]=0}}function FR(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const NR="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",jR="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(NR,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),zR="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(NR,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),UR=[0,0,0,255],VR={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:UR},getLineColor:{type:"accessor",value:UR},material:!0},GR={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class WR extends QM{constructor(){super(...arguments),ge(this,"state",void 0)}getShaders(t){return super.getShaders({vs:"top"===t?jR:zR,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[LT,GT,KT]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:e}=this.context;let{coordinateSystem:n}=this.props;const{_full3d:r}=this.props;let i;e.isGeospatial&&n===dy.DEFAULT&&(n=dy.LNGLAT),n===dy.LNGLAT&&(i=r?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new DR({preproject:i,fp64:this.use64bitPositions(),IndexType:!t||D_(t,m_)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),s=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:GR,accessor:"getPolygon",update:this.calculatePositions,noAlloc:s,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,transition:GR,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:GR,accessor:"getFillColor",defaultValue:UR,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:GR,accessor:"getLineColor",defaultValue:UR,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(t&&t.__source?t.__source.index:n,r)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw(t){let{uniforms:e}=t;const{extruded:n,filled:r,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:Boolean(n),elevationScale:o};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(l.vertexCount),s.setUniforms(c).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager();var o;(r.extensionsChanged||e.filled!==n.filled||e.extruded!==n.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((t=>t.delete())),this.setState(this._getModels(this.context.gl)),i.invalidateAll())}updateGeometry(t){let{props:e,oldProps:n,changeFlags:r}=t;if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:t}=this.state,n=e.data.attributes||{};t.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:e,filled:n,extruded:r}=this.props;let i,o;if(n){const n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,i=new oM(t,{...n,id:"".concat(e,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return r&&(o=new oM(t,{...this.getShaders("side"),id:"".concat(e,"-side"),geometry:new qT({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,i].filter(Boolean),topModel:i,sideModel:o}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}ge(WR,"defaultProps",VR),ge(WR,"layerName","SolidPolygonLayer");const HR={circle:{type:Qk,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Xk,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:wR,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},JR={type:Lk,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},KR={type:WR,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function XR(t){let{type:e,props:n}=t;const r={};for(const i in n)r[i]=e.defaultProps[n[i]];return r}function qR(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const s=e[o];let a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[s]=r[o],n&&(i.transitions[s]=n[o])),i[s]=a}return i}function YR(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=t.length}=n;for(let s=i;s<o;s++){const n=t[s],{geometry:i}=n;if(i)if("GeometryCollection"===i.type){Rg.assert(Array.isArray(i.geometries),"GeoJSON does not have geometries array");const{geometries:t}=i;for(let i=0;i<t.length;i++){QR(t[i],r,e,n,s)}}else QR(i,r,e,n,s)}return r}function QR(t,e,n,r,i){const{type:o,coordinates:s}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(function(t,e){let n=ZR[t];Rg.assert(n,"Unknown GeoJSON type ".concat(t));for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,s))switch(o){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":s.forEach((t=>{a.push(n({geometry:{type:"Point",coordinates:t}},r,i))}));break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":s.forEach((t=>{l.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"Polygon":c.push(n({geometry:t},r,i)),s.forEach((t=>{u.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"MultiPolygon":s.forEach((t=>{c.push(n({geometry:{type:"Polygon",coordinates:t}},r,i)),t.forEach((t=>{u.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}))}))}else Rg.warn("".concat(o," coordinates are malformed"))()}const ZR={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function $R(t){return t.geometry.coordinates}function tI(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:r,lines:i,polygons:o}=t,s=function(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(3*i.length);const o=[];for(let t=0;t<i.length;t++)e(i[t],o),n[r][3*t+0]=o[0],n[r][3*t+1]=o[1],n[r][3*t+2]=o[2]}return n}(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:s.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const eI=["points","linestrings","polygons"],nI={...XR(HR.circle),...XR(HR.icon),...XR(HR.text),...XR(JR),...XR(KR),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class rI extends Fk{initializeState(){this.state={layerProps:{},features:{}}}updateState(t){let{props:e,changeFlags:n}=t;if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary(t){let{props:e,changeFlags:n}=t;const r=tI(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON(t){let{props:e,changeFlags:n}=t;const r=function(t){if(Array.isArray(t))return t;switch(Rg.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return Rg.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(e.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(n.dataChanged)){const t=this.state.features;for(const e in t)o[e]=t[e].slice(),s[e]=[];for(const e of n.dataChanged){const n=YR(r,i,e);for(const r in t)s[r].push(Nk({data:o[r],getIndex:t=>t.__source.index,dataRange:e,replace:n[r]}))}}else o=YR(r,i);const a=function(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=$R,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=$R,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=$R,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=$R,n}(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n,sourceLayer:r}=e;return e.featureType=eI.find((t=>r.id.startsWith("".concat(this.id,"-").concat(t,"-")))),n>=0&&r.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[n]),e}_updateAutoHighlight(t){const e="".concat(this.id,"-points-"),n="points"===t.featureType;for(const r of this.getSubLayers())r.id.startsWith(e)===n&&r.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:e}=this.props,{layerProps:n}=this.state,r="polygons-fill",i=this.shouldRenderSubLayer(r,n.polygons.data)&&this.getSubLayerClass(r,KR.type);if(i){const o=qR(this,KR.props),s=t&&e;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new i(o,this.getSubLayerProps({id:r,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:e}=this.props,{layerProps:n}=this.state,r="polygons-stroke",i="linestrings",o=!t&&e&&this.shouldRenderSubLayer(r,n.polygonsOutline.data)&&this.getSubLayerClass(r,JR.type),s=this.shouldRenderSubLayer(i,n.lines.data)&&this.getSubLayerClass(i,JR.type);if(o||s){const t=qR(this,JR.props);return[o&&new o(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),n.polygonsOutline),s&&new s(t,this.getSubLayerProps({id:i,updateTriggers:t.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:e,binary:n}=this.state;let{highlightedObjectIndex:r}=this.props;!n&&Number.isFinite(r)&&(r=e.points.data.findIndex((t=>t.__source.index===r)));const i=new Set(t.split("+")),o=[];for(const s of i){const t="points-".concat(s),i=HR[s],a=i&&this.shouldRenderSubLayer(t,e.points.data)&&this.getSubLayerClass(t,i.type);if(a){const l=qR(this,i.props);let c=e.points;if("text"===s&&n){const{instancePickingColors:t,...e}=c.data.attributes;c={...c,data:{...c.data,attributes:e}}}o.push(new a(l,this.getSubLayerProps({id:t,updateTriggers:l.updateTriggers,highlightedObjectIndex:r}),c))}}return o}renderLayers(){const{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){const{binary:e}=this.state;return e&&"function"===typeof t?(e,n)=>{const{data:r,index:i}=n,o=function(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return-1!==n?function(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}(t,r,n):null}(r,i);return t(o,n)}:super.getSubLayerAccessor(t)}}ge(rI,"layerName","GeoJsonLayer"),ge(rI,"defaultProps",nI);const iI=(t,e,n,r,i)=>{const{height:o,color:s,name:a}=e,l=((t,e,n)=>{const r=e,i=t.x-r/2,o=t.y-r/2;return n.current.pickObjects({x:i,y:o,width:r,height:r})})(t,r,i);l.forEach((t=>{const e=t.object.properties;e&&e.interactive&&(e.color=Vp(s)?Up(s):s,e.height=o,e.name=a)})),n(l)},oI=t=>{const e=JSON.parse(JSON.stringify(t.GEOGRID));for(let i=0;i<(null===t||void 0===t||null===(n=t.GEOGRID)||void 0===n||null===(r=n.features)||void 0===r?void 0:r.length);i++){var n,r;e.features[i].properties=t.GEOGRIDDATA[i],e.features[i].properties={...e.features[i].properties,id:i}}return e};function sI(t){let{data:e,editOn:n,state:{selectedType:r,keyDownState:i,selectedCellsState:o,pickingRadius:s,opacity:a},updaters:{setSelectedCellsState:l,setDraggingWhileEditing:c,setHoveredObj:u},deckGLRef:d}=t;return new rI({opacity:a,id:"GRID",data:e,pickable:!0,extruded:!0,wireframe:!0,elevationScale:5,lineWidthScale:1,lineWidthMinPixels:2,getElevation:t=>t.properties.height[1],getFillColor:t=>t.properties.color,onClick:t=>{r&&n&&"Shift"!==i&&iI(t,r,l,s,d)},onDrag:t=>{r&&n&&"Shift"!==i&&iI(t,r,l,s,d)},onDragStart:()=>{r&&n&&"Shift"!==i&&c(!0)},onHover:t=>{t.object&&u(t)},onDragEnd:()=>{c(!1)},updateTriggers:{getFillColor:o,getElevation:o},transitions:{getFillColor:500,getElevation:150}})}function aI(t){let{data:e,coordinates:n,opacity:r}=t;if(!e||!e.text)return;let i=[];return e.text.forEach((t=>{i.push({coordinates:[n.features[t.id].geometry.coordinates[0][0][0],n.features[t.id].geometry.coordinates[0][0][1],100],info:t.info})})),new wR({opacity:r,id:"text-layer",data:i,pickable:!0,getPosition:t=>t.coordinates,getText:t=>t.info,getColor:[255,255,255],getSize:30,getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"center"})}function lI(t){let{data:e,opacity:n}=t;if(e.geojson)return new rI({id:"GeojsonLayer",data:e.geojson,opacity:n,pickable:!0,wireframe:!1,stroked:!0,filled:!0,extruded:!0,lineWidthScale:1,getFillColor:t=>Up(t.properties.fill),getLineColor:t=>Up(t.properties.stroke),lineWidthMinPixels:2,getElevation:t=>t.properties.height,updateTriggers:{getFillColor:e,getElevation:e},transitions:{getFillColor:500,getElevation:500}})}const cI={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class uI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ge(this,"props",void 0),ge(this,"stats",void 0),ge(this,"activeRequestCount",0),ge(this,"requestQueue",[]),ge(this,"requestMap",new Map),ge(this,"deferredUpdate",null),this.props={...cI,...t},this.stats=new Ug({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:e},r=new Promise((t=>(n.resolve=t,n)));return this.requestQueue.push(n),this.requestMap.set(t,r),this._issueNewRequests(),r}_issueRequest(t){const{handle:e,resolve:n}=t;let r=!1;const i=()=>{r||(r=!0,this.requestMap.delete(e),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:i}):Promise.resolve({done:i})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(let e=0;e<t;++e){const t=this.requestQueue.shift();t&&this._issueRequest(t)}}}_updateAllRequests(){const t=this.requestQueue;for(let e=0;e<t.length;++e){const n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort(((t,e)=>t.priority-e.priority))}_updateRequest(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)}}class dI{constructor(t){ge(this,"index",void 0),ge(this,"isVisible",void 0),ge(this,"isSelected",void 0),ge(this,"parent",void 0),ge(this,"children",void 0),ge(this,"content",void 0),ge(this,"state",void 0),ge(this,"layers",void 0),ge(this,"id",void 0),ge(this,"zoom",void 0),ge(this,"userData",void 0),ge(this,"boundingBox",void 0),ge(this,"_abortController",void 0),ge(this,"_loader",void 0),ge(this,"_loaderId",void 0),ge(this,"_isLoaded",void 0),ge(this,"_isCancelled",void 0),ge(this,"_needsReload",void 0),ge(this,"_bbox",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(t){this._bbox||(this._bbox=t,this.boundingBox="west"in t?[[t.west,t.south],[t.east,t.north]]:[[t.left,t.top],[t.right,t.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then((()=>this.data)):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||console.error("byteLength not defined in tile data"),t}async _loadData(t){let{getData:e,requestScheduler:n,onLoad:r,onError:i}=t;const{index:o,id:s,bbox:a,userData:l,zoom:c}=this,u=this._loaderId;this._abortController=new AbortController;const{signal:d}=this._abortController,h=await n.scheduleRequest(this,(t=>t.isSelected?1:-1));if(!h)return void(this._isCancelled=!0);if(this._isCancelled)return void h.done();let f,p=null;try{p=await e({index:o,id:s,bbox:a,userData:l,zoom:c,signal:d})}catch(g$){f=g$||!0}finally{h.done()}u===this._loaderId&&(this._loader=void 0,this.content=p,!this._isCancelled||p?(this._isLoaded=!0,this._isCancelled=!1,f?i(f,this):r(this)):this._isLoaded=!1)}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,null===(t=this._abortController)||void 0===t||t.abort())}}const hI=Math.PI/180,fI=180/Math.PI,pI=6370972,gI=256;function mI(){const t=4018225162502676e-20,e=Math.PI/180*gI;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,24886.609375]}}class vI extends yy{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:r=0,nearZMultiplier:i=.1,farZMultiplier:o=2,resolution:s=10}=t;let{height:a,altitude:l=1.5}=t;a=a||1,l=Math.max(.75,l);const c=(new Mb).lookAt({eye:[0,-l,0],up:[0,0,1]}),u=Math.pow(2,r);c.rotateX(e*hI),c.rotateZ(-n*hI),c.scale(u/a);const d=Math.atan(.5/l),h=512*u/a;super({...t,height:a,viewMatrix:c,longitude:n,latitude:e,zoom:r,distanceScales:mI(),fovyRadians:2*d,focalDistance:l,near:i,far:Math.min(2,1/h+1)*l*o}),ge(this,"longitude",void 0),ge(this,"latitude",void 0),ge(this,"resolution",void 0),this.latitude=e,this.longitude=n,this.resolution=s}get projectionMode(){return hy.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,this.height/2],t),n=this.unproject([this.width/2,0],t),r=this.unproject([this.width,this.height/2],t),i=this.unproject([this.width/2,this.height],t);return r[0]<this.longitude&&(r[0]+=360),e[0]>this.longitude&&(e[0]-=360),[Math.min(e[0],r[0],n[0],i[0]),Math.min(e[1],r[1],n[1],i[1]),Math.max(e[0],r[0],n[0],i[0]),Math.max(e[1],r[1],n[1],i[1])]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=t,s=e?i:this.height-i,{pixelUnprojectionMatrix:a}=this;let l;if(Number.isFinite(o))l=bI(a,[r,s,o,1]);else{const t=bI(a,[r,s,-1,1]),e=bI(a,[r,s,1,1]),i=((n||0)/pI+1)*gI,o=Jv(Wv([],t,e)),c=Jv(t),u=Jv(e),d=4*((4*c*u-(o-c-u)**2)/16)/o;l=function(t,e,n,r){var i=e[0],o=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t}([],t,e,(Math.sqrt(c-d)-Math.sqrt(Math.max(0,i*i-d)))/Math.sqrt(o))}const[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n,r=0]=t,i=e*hI,o=n*hI,s=Math.cos(o),a=(r/pI+1)*gI;return[Math.sin(i)*s*a,-Math.cos(i)*s*a,Math.sin(o)*a]}unprojectPosition(t){const[e,n,r]=t,i=Hv(t),o=Math.asin(r/i);return[Math.atan2(e,-n)*fI,o*fI,(i/gI-1)*pI]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){const n=this.unproject(e);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function bI(t,e){const n=Ab([],e,t);return bb(n,n,1/n[3]),n}const yI=-1,xI=0,AI=1,_I=new Qv,wI=new Qv;class SI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;ge(this,"center",void 0),ge(this,"halfDiagonal",void 0),ge(this,"minimum",void 0),ge(this,"maximum",void 0),n=n||_I.copy(t).add(e).scale(.5),this.center=new Qv(n),this.halfDiagonal=new Qv(e).subtract(this.center),this.minimum=new Qv(t),this.maximum=new Qv(e)}clone(){return new SI(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:e}=this,n=wI.from(t.normal),r=e.x*Math.abs(n.x)+e.y*Math.abs(n.y)+e.z*Math.abs(n.z),i=this.center.dot(n)+t.distance;return i-r>0?AI:i+r<0?yI:xI}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=_I.from(t).subtract(this.center),{halfDiagonal:n}=this;let r,i=0;return r=Math.abs(e.x)-n.x,r>0&&(i+=r*r),r=Math.abs(e.y)-n.y,r>0&&(i+=r*r),r=Math.abs(e.z)-n.z,r>0&&(i+=r*r),i}}const CI=new Qv,EI=new Qv;class PI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(this,"center",void 0),ge(this,"radius",void 0),this.radius=-0,this.center=new Qv,this.fromCenterRadius(t,e)}fromCenterRadius(t,e){return this.center.from(t),this.radius=e,this}fromCornerPoints(t,e){return e=CI.from(e),this.center=(new Qv).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new PI(this.center,this.radius)}union(t){const e=this.center,n=this.radius,r=t.center,i=t.radius,o=CI.copy(r).subtract(e),s=o.magnitude();if(n>=s+i)return this.clone();if(i>=s+n)return t.clone();const a=.5*(n+s+i);return EI.copy(o).scale((-n+a)/s).add(e),this.center.copy(EI),this.radius=a,this}expand(t){const e=CI.from(t).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}transform(t){this.center.transform(t);const e=db(CI,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}distanceSquaredTo(t){const e=this.distanceTo(t);return e*e}distanceTo(t){const e=CI.from(t).subtract(this.center);return Math.max(0,e.len()-this.radius)}intersectPlane(t){const e=this.center,n=this.radius,r=t.normal.dot(e)+t.distance;return r<-n?yI:r<n?xI:AI}}function MI(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=n[0],f=n[1],p=n[2],g=n[3],m=n[4],v=n[5],b=n[6],y=n[7],x=n[8];return t[0]=h*r+f*s+p*c,t[1]=h*i+f*a+p*u,t[2]=h*o+f*l+p*d,t[3]=g*r+m*s+v*c,t[4]=g*i+m*a+v*u,t[5]=g*o+m*l+v*d,t[6]=b*r+y*s+x*c,t[7]=b*i+y*a+x*u,t[8]=b*o+y*l+x*d,t}function TI(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}var OI;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(OI||(OI={}));const kI=Object.freeze([1,0,0,0,1,0,0,0,1]);class RI extends ib{static get IDENTITY(){return function(){BI||(BI=new RI,Object.freeze(BI));return BI}()}static get ZERO(){return function(){II||(II=new RI([0,0,0,0,0,0,0,0,0]),Object.freeze(II));return II}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return OI}constructor(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):n.length>0?this.copy([t,...n]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(kI)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,d=r*a,h=i*s,f=i*a,p=i*l,g=o*s,m=o*a,v=o*l;t[0]=1-d-p,t[3]=u-v,t[6]=h+m,t[1]=u+v,t[4]=1-c-p,t[7]=f-g,t[2]=h-m,t[5]=f+g,t[8]=1-c-d}(this,t),this.check()}set(t,e,n,r,i,o,s,a,l){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this.check()}setRowMajor(t,e,n,r,i,o,s,a,l){return this[0]=t,this[1]=r,this[2]=s,this[3]=e,this[4]=i,this[5]=a,this[6]=n,this[7]=o,this[8]=l,this.check()}determinant(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8];return e*(c*o-s*l)+n*(-c*i+s*a)+r*(l*i-o*a)}(this)}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,h=-u*o+a*l,f=c*o-s*l,p=n*d+r*h+i*f;p&&(p=1/p,t[0]=d*p,t[1]=(-u*r+i*c)*p,t[2]=(a*r-i*s)*p,t[3]=h*p,t[4]=(u*n-i*l)*p,t[5]=(-a*n+i*o)*p,t[6]=f*p,t[7]=(-c*n+r*l)*p,t[8]=(s*n-r*o)*p)}(this,this),this.check()}multiplyLeft(t){return MI(this,t,this),this.check()}multiplyRight(t){return MI(this,this,t),this.check()}rotate(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=Math.sin(n),f=Math.cos(n);t[0]=f*r+h*s,t[1]=f*i+h*a,t[2]=f*o+h*l,t[3]=f*s-h*r,t[4]=f*a-h*i,t[5]=f*l-h*o,t[6]=c,t[7]=u,t[8]=d}(this,this,t),this.check()}scale(t){return Array.isArray(t)?TI(this,this,t):TI(this,this,[t,t]),this.check()}translate(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=n[0],f=n[1];t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=h*r+f*s+c,t[7]=h*i+f*a+u,t[8]=h*o+f*l+d}(this,this,t),this.check()}transform(t,e){let n;switch(t.length){case 2:n=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}(e||[-0,-0],t,this);break;case 3:n=Vv(e||[-0,-0,-0],t,this);break;case 4:n=Xv(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Rv(n,t.length),n}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let II,BI,LI;class DI extends Bv{static get ZERO(){return LI||(LI=new DI(0,0,0,0),Object.freeze(LI)),LI}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(-0,-0,-0,-0),Cv(t)&&1===arguments.length?this.copy(t):(wv.debug&&(kv(t),kv(e),kv(n),kv(r)),this[0]=t,this[1]=e,this[2]=n,this[3]=r)}set(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return wv.debug&&(kv(t.x),kv(t.y),kv(t.z),kv(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=kv(t)}get w(){return this[3]}set w(t){this[3]=kv(t)}transform(t){return Uv(this,this,t),this.check()}transformByMatrix3(t){return Xv(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3]}(this,this,t),this.check()}transformByQuaternion(t){return Gv(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}function FI(){var t=new Dv(4);return Dv!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function NI(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function jI(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+s*a+i*c-o*l,t[1]=i*u+s*l+o*a-r*c,t[2]=o*u+s*c+r*l-i*a,t[3]=s*u-r*a-i*l-o*c,t}function zI(t,e,n,r){var i,o,s,a,l,c=e[0],u=e[1],d=e[2],h=e[3],f=n[0],p=n[1],g=n[2],m=n[3];return(o=c*f+u*p+d*g+h*m)<0&&(o=-o,f=-f,p=-p,g=-g,m=-m),1-o>Lv?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,l=Math.sin(r*i)/s):(a=1-r,l=r),t[0]=a*c+l*f,t[1]=a*u+l*p,t[2]=a*d+l*g,t[3]=a*h+l*m,t}function UI(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*s+s]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+s]-e[3*s+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[s]=(e[3*s+i]+e[3*i+s])*n}return t}var VI=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},GI=bb,WI=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},HI=function(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t[3]=a+r*(n[3]-a),t},JI=yb,KI=xb,XI=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*s,t},qI=function(){var t=Fv(),e=Nv(1,0,0),n=Nv(0,1,0);return function(r,i,o){var s=jv(i,o);return s<-.999999?(zv(t,e,i),Hv(t)<1e-6&&zv(t,n,i),function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(t,t),NI(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(zv(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,XI(r,r))}}();(function(){var t=FI(),e=FI()})(),function(){var t=function(){var t=new Dv(9);return Dv!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}()}();const YI=[0,0,0,1];class QI extends Ov{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,n,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return UI(this,t),this.check()}fromAxisRotation(t,e){return NI(this,t,e),this.check()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=kv(t)}get y(){return this[1]}set y(t){this[1]=kv(t)}get z(){return this[2]}set z(t){this[2]=kv(t)}get w(){return this[3]}set w(t){this[3]=kv(t)}len(){return JI(this)}lengthSquared(){return KI(this)}dot(t){return WI(this,t)}rotationTo(t,e){return qI(this,t,e),this.check()}add(t){return VI(this,this,t),this.check()}calculateW(){return function(t,e){var n=e[0],r=e[1],i=e[2];t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}conjugate(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=o*a}(this,this),this.check()}lerp(t,e,n){return void 0===n?this.lerp(this,t,e):(HI(this,t,e,n),this.check())}multiplyRight(t){return jI(this,this,t),this.check()}multiplyLeft(t){return jI(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=r*l+s*a,t[1]=i*l+o*a,t[2]=o*l-i*a,t[3]=s*l-r*a}(this,this,t),this.check()}rotateY(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=r*l-o*a,t[1]=i*l+s*a,t[2]=o*l+r*a,t[3]=s*l-i*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=r*l+i*a,t[1]=i*l-r*a,t[2]=o*l+s*a,t[3]=s*l-o*a}(this,this,t),this.check()}scale(t){return GI(this,this,t),this.check()}slerp(t,e,n){let r,i,o;switch(arguments.length){case 1:({start:r=YI,target:i,ratio:o}=t);break;case 2:r=this,i=t,o=e;break;default:r=t,i=e,o=n}return zI(this,r,i,o),this.check()}transformVector4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new DI;return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],l=n[2],c=n[3],u=c*r+a*o-l*i,d=c*i+l*r-s*o,h=c*o+s*i-a*r,f=-s*r-a*i-l*o;t[0]=u*c+f*-s+d*-l-h*-a,t[1]=d*c+f*-a+h*-s-u*-l,t[2]=h*c+f*-l+u*-a-d*-s,t[3]=e[3]}(e,t,this),Rv(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const ZI=new Qv,$I=new Qv,tB=new Qv,eB=new Qv,nB=new Qv,rB=new Qv,iB=new Qv,oB=0,sB=1,aB=2,lB=3,cB=4,uB=5,dB=6,hB=7,fB=8;class pB{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];ge(this,"center",void 0),ge(this,"halfAxes",void 0),this.center=(new Qv).from(t),this.halfAxes=new RI(e)}get halfSize(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new Qv(t).len(),new Qv(e).len(),new Qv(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new Qv(t).normalize(),i=new Qv(e).normalize(),o=new Qv(n).normalize();return(new QI).fromMatrix3(new RI([...r,...i,...o]))}fromCenterHalfSizeQuaternion(t,e,n){const r=new QI(n),i=(new RI).fromQuaternion(r);return i[0]=i[0]*e[0],i[1]=i[1]*e[0],i[2]=i[2]*e[0],i[3]=i[3]*e[1],i[4]=i[4]*e[1],i[5]=i[5]*e[1],i[6]=i[6]*e[2],i[7]=i[7]*e[2],i[8]=i[8]*e[2],this.center=(new Qv).from(t),this.halfAxes=i,this}clone(){return new pB(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new PI;const e=this.halfAxes,n=e.getColumn(0,tB),r=e.getColumn(1,eB),i=e.getColumn(2,nB),o=ZI.copy(n).add(r).add(i);return t.center.copy(this.center),t.radius=o.magnitude(),t}intersectPlane(t){const e=this.center,n=t.normal,r=this.halfAxes,i=n.x,o=n.y,s=n.z,a=Math.abs(i*r[oB]+o*r[sB]+s*r[aB])+Math.abs(i*r[lB]+o*r[cB]+s*r[uB])+Math.abs(i*r[dB]+o*r[hB]+s*r[fB]),l=n.dot(e)+t.distance;return l<=-a?yI:l>=a?AI:xI}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=$I.from(t).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,tB),i=n.getColumn(1,eB),o=n.getColumn(2,nB),s=r.magnitude(),a=i.magnitude(),l=o.magnitude();r.normalize(),i.normalize(),o.normalize();let c,u=0;return c=Math.abs(e.dot(r))-s,c>0&&(u+=c*c),c=Math.abs(e.dot(i))-a,c>0&&(u+=c*c),c=Math.abs(e.dot(o))-l,c>0&&(u+=c*c),u}computePlaneDistances(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const o=this.center,s=this.halfAxes,a=s.getColumn(0,tB),l=s.getColumn(1,eB),c=s.getColumn(2,nB),u=rB.copy(a).add(l).add(c).add(o),d=iB.copy(u).subtract(t);let h=e.dot(d);return r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).add(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).subtract(l).add(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).subtract(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).add(l).add(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).add(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).subtract(l).add(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).subtract(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),n[0]=r,n[1]=i,n}transform(t){this.center.transformAsPoint(t);const e=this.halfAxes.getColumn(0,tB);e.transformAsPoint(t);const n=this.halfAxes.getColumn(1,eB);n.transformAsPoint(t);const r=this.halfAxes.getColumn(2,nB);return r.transformAsPoint(t),this.halfAxes=new RI([...e,...n,...r]),this}getTransform(){throw new Error("not implemented")}}const gB=new Qv,mB=new Qv;class vB{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ge(this,"normal",void 0),ge(this,"distance",void 0),this.normal=new Qv,this.distance=-0,this.fromNormalDistance(t,e)}fromNormalDistance(t,e){return Iv(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}fromPointNormal(t,e){t=gB.from(t),this.normal.from(e).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,e,n,r){return this.normal.set(t,e,n),Iv(Mv(this.normal.len(),1)),this.distance=r,this}clone(){return new vB(this.normal,this.distance)}equals(t){return Mv(this.distance,t.distance)&&Mv(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const e=mB.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}projectPointOntoPlane(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=gB.from(t);const n=this.getPointDistance(t),r=mB.copy(this.normal).scale(n);return t.subtract(r).to(e)}}const bB=[new Qv([1,0,0]),new Qv([0,1,0]),new Qv([0,0,1])],yB=new Qv,xB=new Qv;new vB(new Qv(1,0,0),0);class AB{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];ge(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*bB.length;const e=t.center,n=t.radius;let r=0;for(const i of bB){let t=this.planes[r],o=this.planes[r+1];t||(t=this.planes[r]=new vB),o||(o=this.planes[r+1]=new vB);const s=yB.copy(i).scale(-n).add(e);i.dot(s);t.fromPointNormal(s,i);const a=yB.copy(i).scale(n).add(e),l=xB.copy(i).negate();l.dot(a);o.fromPointNormal(a,l),r+=2}return this}computeVisibility(t){let e=AI;for(const n of this.planes){switch(t.intersectPlane(n)){case yI:return yI;case xI:e=xI}}return e}computeVisibilityWithPlaneMask(t,e){if(Iv(Number.isFinite(e),"parentPlaneMask is required."),e===AB.MASK_OUTSIDE||e===AB.MASK_INSIDE)return e;let n=AB.MASK_INSIDE;const r=this.planes;for(let i=0;i<this.planes.length;++i){const o=i<31?1<<i:0;if(i<31&&0===(e&o))continue;const s=r[i],a=t.intersectPlane(s);if(a===yI)return AB.MASK_OUTSIDE;a===xI&&(n|=o)}return n}}ge(AB,"MASK_OUTSIDE",4294967295),ge(AB,"MASK_INSIDE",0),ge(AB,"MASK_INDETERMINATE",2147483647);new Qv,new Qv,new Qv,new Qv,new Qv;new Qv,new Qv,new Qv,new Qv,new Qv,new Qv,new Qv,new Qv,new Qv,new Qv,new Qv,new Qv,Math.PI;const _B={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},wB=new RI,SB=new RI,CB=new RI,EB=new RI,PB=new RI;function MB(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=_B.EPSILON20;let r=0,i=0;const o=SB,s=CB;o.identity(),s.copy(t);const a=n*function(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}(s);for(;i<10&&kB(s)>a;)RB(s,EB),PB.copy(EB).transpose(),s.multiplyRight(EB),s.multiplyLeft(PB),o.multiplyRight(EB),++r>2&&(++i,r=0);return e.unitary=o.toTarget(e.unitary),e.diagonal=s.toTarget(e.diagonal),e}const TB=[1,0,0],OB=[2,2,1];function kB(t){let e=0;for(let n=0;n<3;++n){const r=t[wB.getElementIndex(OB[n],TB[n])];e+=2*r*r}return Math.sqrt(e)}function RB(t,e){const n=_B.EPSILON15;let r=0,i=1;for(let c=0;c<3;++c){const e=Math.abs(t[wB.getElementIndex(OB[c],TB[c])]);e>r&&(i=c,r=e)}const o=TB[i],s=OB[i];let a=1,l=0;if(Math.abs(t[wB.getElementIndex(s,o)])>n){const e=(t[wB.getElementIndex(s,s)]-t[wB.getElementIndex(o,o)])/2/t[wB.getElementIndex(s,o)];let n;n=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),a=1/Math.sqrt(1+n*n),l=n*a}return RI.IDENTITY.to(e),e[wB.getElementIndex(o,o)]=e[wB.getElementIndex(s,s)]=a,e[wB.getElementIndex(s,o)]=l,e[wB.getElementIndex(o,s)]=-l,e}const IB=new Qv,BB=new Qv,LB=new Qv,DB=new Qv,FB=new Qv,NB=new RI,jB={diagonal:new RI,unitary:new RI};const zB=512,UB=3,VB=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],GB=VB.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),WB=GB.concat([[.25,.5],[.75,.5]]);class HB{constructor(t,e,n){ge(this,"x",void 0),ge(this,"y",void 0),ge(this,"z",void 0),ge(this,"childVisible",void 0),ge(this,"selected",void 0),ge(this,"_children",void 0),this.x=t,this.y=e,this.z=n}get children(){if(!this._children){const t=2*this.x,e=2*this.y,n=this.z+1;this._children=[new HB(t,e,n),new HB(t,e+1,n),new HB(t+1,e,n),new HB(t+1,e+1,n)]}return this._children}update(t){const{viewport:e,cullingVolume:n,elevationBounds:r,minZ:i,maxZ:o,bounds:s,offset:a,project:l}=t,c=this.getBoundingVolume(r,a,l);if(s&&!this.insideBounds(s))return!1;if(n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:t}=this;if(t<o&&t>=i){const n=c.distanceTo(e.cameraPosition)*e.scale/e.height;t+=Math.floor(Math.log2(n))}if(t>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const u of this.children)u.update(t);return!0}getSelected(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&t.push(this),this._children)for(const e of this._children)e.getSelected(t);return t}insideBounds(t){let[e,n,r,i]=t;const o=Math.pow(2,this.z),s=zB/o;return this.x*s<r&&this.y*s<i&&(this.x+1)*s>e&&(this.y+1)*s>n}getBoundingVolume(t,e,n){if(n){const e=this.z<1?WB:this.z<2?GB:VB,r=[];for(const i of e){const e=tL(this.x+i[0],this.y+i[1],this.z);e[2]=t[0],r.push(n(e)),t[0]!==t[1]&&(e[2]=t[1],r.push(n(e)))}return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pB;if(!t||0===t.length)return e.halfAxes=new RI([0,0,0,0,0,0,0,0,0]),e.center=new Qv,e;const n=t.length,r=new Qv(0,0,0);for(const C of t)r.add(C);const i=1/n;r.multiplyByScalar(i);let o=0,s=0,a=0,l=0,c=0,u=0;for(const C of t){const t=IB.copy(C).subtract(r);o+=t.x*t.x,s+=t.x*t.y,a+=t.x*t.z,l+=t.y*t.y,c+=t.y*t.z,u+=t.z*t.z}o*=i,s*=i,a*=i,l*=i,c*=i,u*=i;const d=NB;d[0]=o,d[1]=s,d[2]=a,d[3]=s,d[4]=l,d[5]=c,d[6]=a,d[7]=c,d[8]=u;const{unitary:h}=MB(d,jB),f=e.halfAxes.copy(h);let p=f.getColumn(0,LB),g=f.getColumn(1,DB),m=f.getColumn(2,FB),v=-Number.MAX_VALUE,b=-Number.MAX_VALUE,y=-Number.MAX_VALUE,x=Number.MAX_VALUE,A=Number.MAX_VALUE,_=Number.MAX_VALUE;for(const C of t)IB.copy(C),v=Math.max(IB.dot(p),v),b=Math.max(IB.dot(g),b),y=Math.max(IB.dot(m),y),x=Math.min(IB.dot(p),x),A=Math.min(IB.dot(g),A),_=Math.min(IB.dot(m),_);p=p.multiplyByScalar(.5*(x+v)),g=g.multiplyByScalar(.5*(A+b)),m=m.multiplyByScalar(.5*(_+y)),e.center.copy(p).add(g).add(m);const w=BB.set(v-x,b-A,y-_).multiplyByScalar(.5),S=new RI([w[0],0,0,0,w[1],0,0,0,w[2]]);return e.halfAxes.multiplyRight(S),e}(r)}const r=Math.pow(2,this.z),i=zB/r,o=this.x*i+e*zB,s=zB-(this.y+1)*i;return new SI([o,s,t[0]],[o+i,s+i,t[1]])}}const JB=512,KB=[-1/0,-1/0,1/0,1/0],XB={type:"object",value:null,validate:(t,e)=>e.optional&&null===t||"string"===typeof t||Array.isArray(t)&&t.every((t=>"string"===typeof t)),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}};function qB(t,e){const n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])],r=[Math.min(...n.map((t=>t[0]))),Math.min(...n.map((t=>t[1]))),Math.max(...n.map((t=>t[0]))),Math.max(...n.map((t=>t[1])))];return r}function YB(t,e){if(!t||!t.length)return null;const{index:n,id:r}=e;if(Array.isArray(t)){const e=function(t){return Math.abs(t.split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)|0),0))}(r)%t.length;t=t[e]}let i=t;for(const o of Object.keys(n)){const t=new RegExp("{".concat(o,"}"),"g");i=i.replace(t,String(n[o]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),i}function QB(t){let{viewport:e,z:n=0,cullRect:r}=t;return(e.subViewports||[e]).map((t=>ZB(t,n||0,r)))}function ZB(t,e,n){if(!Array.isArray(e)){const r=n.x-t.x,i=n.y-t.y,{width:o,height:s}=n,a={targetZ:e},l=t.unproject([r,i],a),c=t.unproject([r+o,i],a),u=t.unproject([r,i+s],a),d=t.unproject([r+o,i+s],a);return[Math.min(l[0],c[0],u[0],d[0]),Math.min(l[1],c[1],u[1],d[1]),Math.max(l[0],c[0],u[0],d[0]),Math.max(l[1],c[1],u[1],d[1])]}const r=ZB(t,e[0],n),i=ZB(t,e[1],n);return[Math.min(r[0],i[0]),Math.min(r[1],i[1]),Math.max(r[2],i[2]),Math.max(r[3],i[3])]}function $B(t,e){return Math.pow(2,t)*JB/e}function tL(t,e,n){const r=$B(n,JB),i=t/r*360-180,o=Math.PI-2*Math.PI*e/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function eL(t,e,n,r){const i=$B(n,r);return[t/i*JB,e/i*JB]}function nL(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:JB;if(t.isGeospatial){const[t,i]=tL(e,n,r),[o,s]=tL(e+1,n+1,r);return{west:t,north:i,east:o,south:s}}const[o,s]=eL(e,n,r,i),[a,l]=eL(e+1,n+1,r,i);return{left:o,top:s,right:a,bottom:l}}function rL(t,e,n,r,i){const o=function(t,e,n){let r;if(e&&2===e.length){const[n,i]=e,o=t.getBounds({z:n}),s=t.getBounds({z:i});r=[Math.min(o[0],s[0]),Math.min(o[1],s[1]),Math.max(o[2],s[2]),Math.max(o[3],s[3])]}else r=t.getBounds();return t.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}(t,null,r),s=$B(e,n),[a,l,c,u]=function(t,e,n){if(n){const r=qB(t,n).map((t=>t*e/JB));return r}return t.map((t=>t*e/JB))}(o,s,i),d=[];for(let h=Math.floor(a);h<c;h++)for(let t=Math.floor(l);t<u;t++)d.push({x:h,y:t,z:e});return d}function iL(t){let{viewport:e,maxZoom:n,minZoom:r,zRange:i,extent:o,tileSize:s=JB,modelMatrix:a,modelMatrixInverse:l,zoomOffset:c=0}=t,u=e.isGeospatial?Math.round(e.zoom+Math.log2(JB/s))+c:Math.ceil(e.zoom)+c;if("number"===typeof r&&Number.isFinite(r)&&u<r){if(!o)return[];u=r}"number"===typeof n&&Number.isFinite(n)&&u>n&&(u=n);let d=o;return a&&l&&o&&!e.isGeospatial&&(d=qB(o,a)),e.isGeospatial?function(t,e,n,r){const i=t instanceof vI&&t.resolution?t.projectPosition:null,o=Object.values(t.getFrustumPlanes()).map((t=>{let{normal:e,distance:n}=t;return new vB(e.clone().negate(),n)})),s=new AB(o),a=t.distanceScales.unitsPerMeter[2],l=n&&n[0]*a||0,c=n&&n[1]*a||0,u=t instanceof RS&&t.pitch<=60?e:0;if(r){const[t,e,n,i]=r,o=Xb([t,i]),s=Xb([n,e]);r=[o[0],zB-o[1],s[0],zB-s[1]]}const d=new HB(0,0,0),h={viewport:t,project:i,cullingVolume:s,elevationBounds:[l,c],minZ:u,maxZ:e,bounds:r,offset:0};if(d.update(h),t instanceof RS&&t.subViewports&&t.subViewports.length>1){for(h.offset=-1;d.update(h)&&!(--h.offset<-UB););for(h.offset=1;d.update(h)&&!(++h.offset>UB););}return d.getSelected()}(e,u,i,o):rL(e,u,s,d||KB,l)}function oL(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}const sL=2,aL="never",lL="no-overlap",cL="best-available",uL={[cL]:function(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!hL(e)&&fL(e);for(const e of t)e.isVisible=Boolean(e.state&sL)},[lL]:function(t){for(const n of t)n.state=0;for(const n of t)n.isSelected&&hL(n);const e=Array.from(t).sort(((t,e)=>t.zoom-e.zoom));for(const n of e)if(n.isVisible=Boolean(n.state&sL),n.children&&(n.isVisible||1&n.state))for(const t of n.children)t.state=1;else n.isSelected&&fL(n)},[aL]:()=>{}},dL={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};function hL(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=sL,!0;e=e.parent}return!1}function fL(t){for(const e of t.children)e.isLoaded||e.content?e.state|=sL:fL(e)}const pL={TilesetClass:class{constructor(t){ge(this,"opts",void 0),ge(this,"_requestScheduler",void 0),ge(this,"_cache",void 0),ge(this,"_dirty",void 0),ge(this,"_tiles",void 0),ge(this,"_cacheByteSize",void 0),ge(this,"_viewport",void 0),ge(this,"_zRange",void 0),ge(this,"_selectedTiles",void 0),ge(this,"_frameNumber",void 0),ge(this,"_modelMatrix",void 0),ge(this,"_modelMatrixInverse",void 0),ge(this,"_maxZoom",void 0),ge(this,"_minZoom",void 0),ge(this,"onTileLoad",void 0),ge(this,"_getCullBounds",function(t){let e,n={};return r=>{for(const i in r)if(!oL(r[i],n[i])){e=t(r),n=r;break}return e}}(QB)),this.opts={...dL,...t},this.onTileLoad=t=>{var e,n;null===(e=(n=this.opts).onTileLoad)||void 0===e||e.call(n,t),this.opts.maxCacheByteSize&&(this._cacheByteSize+=t.byteLength,this._resizeCache())},this._requestScheduler=new uI({maxRequests:t.maxRequests,throttleRequests:Boolean(t.maxRequests&&t.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Mb,this._modelMatrixInverse=new Mb,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return null!==this._selectedTiles&&this._selectedTiles.every((t=>t.isLoaded))}get needsReload(){return null!==this._selectedTiles&&this._selectedTiles.some((t=>t.needsReload))}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const e=this._cache.get(t);this._selectedTiles&&this._selectedTiles.includes(e)?e.setNeedsReload():this._cache.delete(t)}}update(t){let{zRange:e,modelMatrix:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{zRange:null,modelMatrix:null};const r=n?new Mb(n):new Mb,i=!r.equals(this._modelMatrix);if(this._viewport&&t.equals(this._viewport)&&Mv(this._zRange,e)&&!i)this.needsReload&&(this._selectedTiles=this._selectedTiles.map((t=>this._getTile(t.index,!0))));else{i&&(this._modelMatrixInverse=r.clone().invert(),this._modelMatrix=r),this._viewport=t,this._zRange=e;const n=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:e,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=n.map((t=>this._getTile(t,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(t,e){if(!t.isVisible)return!1;if(e&&this._viewport){const n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:e}),{bbox:r}=t;for(const[t,e,i,o]of n){let n;if("west"in r)n=r.west<i&&r.east>t&&r.south<o&&r.north>e;else{const s=Math.min(r.top,r.bottom),a=Math.max(r.top,r.bottom);n=r.left<i&&r.right>t&&s<o&&a>e}if(n)return!0}return!1}return!0}getTileIndices(t){let{viewport:e,maxZoom:n,minZoom:r,zRange:i,modelMatrix:o,modelMatrixInverse:s}=t;const{tileSize:a,extent:l,zoomOffset:c}=this.opts;return iL({viewport:e,maxZoom:n,minZoom:r,zRange:i,tileSize:a,extent:l,modelMatrix:o,modelMatrixInverse:s,zoomOffset:c})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:e}=this.opts;return{bbox:nL(this._viewport,t.x,t.y,t.z,e)}}getParentIndex(t){return{x:Math.floor(t.x/2),y:Math.floor(t.y/2),z:t.z-1}}updateTileStates(){const t=this.opts.refinementStrategy||cL,e=new Array(this._cache.size);let n=0;for(const r of this._cache.values())e[n++]=r.isVisible,r.isSelected=!1,r.isVisible=!1;for(const r of this._selectedTiles)r.isSelected=!0,r.isVisible=!0;("function"===typeof t?t:uL[t])(Array.from(this._cache.values())),n=0;for(const r of this._cache.values())if(e[n++]!==r.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t=0}=this.opts,e=[];let n=0;for(const r of this._cache.values())r.isLoading&&(n++,r.isSelected||r.isVisible||e.push(r));for(;t>0&&n>t&&e.length>0;){e.shift().abort(),n--}}_rebuildTree(){const{_cache:t}=this;for(const e of t.values())e.parent=null,e.children&&(e.children.length=0);for(const e of t.values()){const t=this._getNearestAncestor(e);e.parent=t,null!==t&&void 0!==t&&t.children&&t.children.push(e)}}_resizeCache(){const{_cache:t,opts:e}=this,n=e.maxCacheSize||(e.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=e.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>r){for(const[s,a]of t){var i,o;if(!a.isVisible&&!a.isSelected)this._cacheByteSize-=e.maxCacheByteSize?a.byteLength:0,t.delete(s),null===(i=(o=this.opts).onTileUnload)||void 0===i||i.call(o,a);if(t.size<=n&&this._cacheByteSize<=r)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((t,e)=>t.zoom-e.zoom)),this._dirty=!1)}_getTile(t,e){const n=this.getTileId(t);let r=this._cache.get(n),i=!1;return!r&&e?(r=new dI(t),Object.assign(r,this.getTileMetadata(r.index)),Object.assign(r,{id:n,zoom:this.getTileZoom(r.index)}),i=!0,this._cache.set(n,r),this._dirty=!0):r&&r.needsReload&&(i=!0),r&&i&&r.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),r}_getNearestAncestor(t){const{_minZoom:e=0}=this;let n=t.index;for(;this.getTileZoom(n)>e;){n=this.getParentIndex(n);const t=this._getTile(n);if(t)return t}return null}},data:{type:"data",value:[]},dataComparator:XB.equal,renderSubLayers:{type:"function",value:t=>new rI(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:cL,zRange:null,maxRequests:6,zoomOffset:0};class gL extends Fk{constructor(){super(...arguments),ge(this,"state",void 0)}initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,e;null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||e.finalize()}get isLoaded(){var t,e,n;return Boolean(null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||null===(n=e.selectedTiles)||void 0===n?void 0:n.every((t=>t.isLoaded&&t.layers&&t.layers.every((t=>t.isLoaded)))))}shouldUpdateState(t){let{changeFlags:e}=t;return e.somethingChanged}updateState(t){let{changeFlags:e}=t,{tileset:n}=this.state;const r=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?r&&(n.setOptions(this._getTilesetOptions()),i?n.reloadAll():n.tiles.forEach((t=>{t.layers=null}))):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:e,maxCacheByteSize:n,refinementStrategy:r,extent:i,maxZoom:o,minZoom:s,maxRequests:a,zoomOffset:l}=this.props;return{maxCacheSize:e,maxCacheByteSize:n,maxZoom:o,minZoom:s,tileSize:t,refinementStrategy:r,extent:i,maxRequests:a,zoomOffset:l,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const t=this.state.tileset,{zRange:e,modelMatrix:n}=this.props,r=t.update(this.context.viewport,{zRange:e,modelMatrix:n}),{isLoaded:i}=t,o=this.state.isLoaded!==i,s=this.state.frameNumber!==r;i&&(o||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:r}),this.state.isLoaded=i}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:e}=this.props;e&&e(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,e){this.props.onTileError(t),e.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:e,getTileData:n,fetch:r}=this.props,{signal:i}=t;return t.url="string"===typeof e||Array.isArray(e)?YB(e,t):null,n?n(t):r&&t.url?r(t.url,{propName:"data",layer:this,signal:i}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo(t){let{info:e,sourceLayer:n}=t;const r=n.props.tile;return e.picked&&(e.tile=r),e.sourceTile=r,e}_updateAutoHighlight(t){const e=t.sourceTile;if(e&&e.layers)for(const n of e.layers)n.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map((t=>{const e=this.getSubLayerPropsByTile(t);if(t.isLoaded||t.content)if(t.layers)e&&t.layers[0]&&Object.keys(e).some((n=>t.layers[0].props[n]!==e[n]))&&(t.layers=t.layers.map((t=>t.clone(e))));else{const n=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:t.id,updateTriggers:this.props.updateTriggers}),data:t.content,_offset:0,tile:t});t.layers=Dg(n,Boolean).map((n=>n.clone({tile:t,...e})))}else;return t.layers}))}filterSubLayer(t){let{layer:e,cullRect:n}=t;const{tile:r}=e.props;return this.state.tileset.isTileVisible(r,n)}}ge(gL,"defaultProps",pL),ge(gL,"layerName","TileLayer");const mL=new Uint16Array([0,2,1,0,3,2]),vL=new Float32Array([0,1,0,0,1,0,1,1]);function bL(t,e){if(!e)return function(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[3*n+0]=t[n][0],e[3*n+1]=t[n][1],e[3*n+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:mL,texCoords:vL}}(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,o=Math.ceil(r/e)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(i*o*2),c=new Float64Array(i*o*3);let u=0,d=0;for(let h=0;h<i;h++){const e=h/(i-1);for(let n=0;n<o;n++){const r=n/(o-1),i=yL(t,e,r);c[3*u+0]=i[0],c[3*u+1]=i[1],c[3*u+2]=i[2]||0,l[2*u+0]=e,l[2*u+1]=1-r,h>0&&n>0&&(a[d++]=u-o,a[d++]=u-o-1,a[d++]=u-1,a[d++]=u-o,a[d++]=u-1,a[d++]=u),u++}}return{vertexCount:s,positions:c,indices:a,texCoords:l}}function yL(t,e,n){return Pv(Pv(t[0],t[1],n),Pv(t[3],t[2],n),e)}const xL="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive && !picking_uAttribute) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),AL={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:dy.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class _L extends QM{constructor(){super(...arguments),ge(this,"state",void 0)}getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:xL,modules:[LT,KT]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const e=!0;t.add({indices:{size:1,isIndexed:!0,update:t=>t.value=this.state.mesh.indices,noAlloc:e},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:t=>t.value=this.state.mesh.positions,noAlloc:e},texCoords:{size:2,update:t=>t.value=this.state.mesh.texCoords,noAlloc:e}})}updateState(t){let{props:e,oldProps:n,changeFlags:r}=t;const i=this.getAttributeManager();if(r.extensionsChanged){var o;const{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),i.invalidateAll()}if(e.bounds!==n.bounds){const t=this.state.mesh,e=this._createMesh();this.state.model.setVertexCount(e.vertexCount);for(const n in e)t&&t[n]!==e[n]&&i.invalidate(n);this.setState({mesh:e,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:e}=this.props,n=t.info;if(!n.color||!e)return n.bitmap=null,n;const{width:r,height:i}=e;n.index=0;const o=function(t){const[e,n,r]=t;return[(e+(15&r)/16)/256,(n+(240&r)/256)/256]}(n.color),s=[Math.floor(o[0]*r),Math.floor(o[1]*i)];return n.bitmap={size:{width:r,height:i},uv:o,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let e=t;return wL(t)&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),bL(e,this.context.viewport.resolution)}_getModel(t){return t?new oM(t,{...this.getShaders(),id:this.props.id,geometry:new qT({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:e,moduleParameters:n}=t,{model:r,coordinateConversion:i,bounds:o,disablePicking:s}=this.state,{image:a,desaturate:l,transparentColor:c,tintColor:u}=this.props;n.pickingActive&&s||a&&r&&r.setUniforms(e).setUniforms({bitmapTexture:a,desaturate:l,transparentColor:c.map((t=>t/255)),tintColor:u.slice(0,3).map((t=>t/255)),coordinateConversion:i,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:e,DEFAULT:n}=dy;let{_imageCoordinateSystem:r}=this.props;if(r!==n){const{bounds:n}=this.props;if(!wL(n))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const i=this.context.viewport.resolution?t:e;if(r=r===t?t:e,r===t&&i===e)return{coordinateConversion:-1,bounds:n};if(r===e&&i===t){const t=Xb([n[0],n[1]]),e=Xb([n[2],n[3]]);return{coordinateConversion:1,bounds:[t[0],t[1],e[0],e[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function wL(t){return Number.isFinite(t[0])}function SL(){const t=yn.map.mapStyles.Dark;return new gL({data:"https://api.mapbox.com/styles/v1/relnox/".concat(t,"/tiles/256/{z}/{x}/{y}?access_token=")+"pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg&attribution=false&logo=false&fresh=true",minZoom:0,maxZoom:21,tileSize:256,id:"OSM",renderSubLayers:t=>{const{bbox:{west:e,south:n,east:r,north:i}}=t.tile;return new _L(t,{data:null,image:t.data,bounds:[e,n,r,i]})}})}function CL(t){let{data:e,opacity:n,setLayerHoveredData:r}=t;if(e.traffic){let t={type:"FeatureCollection",features:e.traffic.features.map((t=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[[t.geometry.coordinates[0][0]-t.properties.lanes/75e3,t.geometry.coordinates[0][1]-t.properties.lanes/75e3,0],[t.geometry.coordinates[0][0]+t.properties.lanes/75e3,t.geometry.coordinates[0][1]+t.properties.lanes/75e3,0],[t.geometry.coordinates[1][0]+t.properties.lanes/75e3,t.geometry.coordinates[1][1]+t.properties.lanes/75e3,0],[t.geometry.coordinates[1][0]-t.properties.lanes/75e3,t.geometry.coordinates[1][1]-t.properties.lanes/75e3,0]]]},properties:{norm_traffic:t.properties.norm_traffic}})))};return new rI({onHover:t=>{t.object&&r("traffic: ".concat(Math.floor(100*t.object.properties.norm_traffic),"%"))},pickable:!0,id:"TRAFFIC_TRIPS",shadowEnabled:!1,data:t,filled:!0,extruded:!0,getFillColor:t=>{const e=Wp((t=>t>0&&t<1?t:t>=1?1:0)(1-t.properties.norm_traffic),0,1);return[e[0],e[1],e[2],200+55*n]},getElevation:t=>100*t.properties.norm_traffic*n,updateTriggers:{getLineColor:e,getLineWidth:n}})}}ge(_L,"layerName","BitmapLayer"),ge(_L,"defaultProps",AL);class EL extends qT{constructor(t){const{id:e=SA("column-geometry")}=t,{indices:n,attributes:r}=function(t){const{radius:e,height:n=1,nradial:r=10}=t;let{vertices:i}=t;i&&(Rg.assert(i.length>=r),i=i.flatMap((t=>[t[0],t[1]])),ck(i,lk));const o=n>0,s=r+1,a=o?3*s+1:r,l=2*Math.PI/r,c=new Uint16Array(o?3*r*2:0),u=new Float32Array(3*a),d=new Float32Array(3*a);let h=0;if(o){for(let t=0;t<s;t++){const o=t*l,s=t%r,a=Math.sin(o),c=Math.cos(o);for(let t=0;t<2;t++)u[h+0]=i?i[2*s]:c*e,u[h+1]=i?i[2*s+1]:a*e,u[h+2]=(.5-t)*n,d[h+0]=i?i[2*s]:c,d[h+1]=i?i[2*s+1]:a,h+=3}u[h+0]=u[h-3],u[h+1]=u[h-2],u[h+2]=u[h-1],h+=3}for(let f=o?0:1;f<s;f++){const t=Math.floor(f/2)*Math.sign(.5-f%2),o=t*l,s=(t+r)%r,a=Math.sin(o),c=Math.cos(o);u[h+0]=i?i[2*s]:c*e,u[h+1]=i?i[2*s+1]:a*e,u[h+2]=n/2,d[h+2]=1,h+=3}if(o){let t=0;for(let e=0;e<r;e++)c[t++]=2*e+0,c[t++]=2*e+2,c[t++]=2*e+0,c[t++]=2*e+1,c[t++]=2*e+1,c[t++]=2*e+3}return{indices:c,attributes:{POSITION:{size:3,value:u},NORMAL:{size:3,value:d}}}}(t);super({...t,id:e,indices:n,attributes:r})}}const PL=[0,0,0,255],ML={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:PL},getLineColor:{type:"accessor",value:PL},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class TL extends QM{getShaders(){const{gl:t}=this.context,e=!vx(t),n={},r=this.props.flatShading&&L_(t,k_);return r&&(n.FLAT_SHADING=1),super.getShaders({vs:"#version 300 es\n\n#define SHADER_NAME column-layer-vertex-shader\n\nin vec3 positions;\nin vec3 normals;\n\nin vec3 instancePositions;\nin float instanceElevations;\nin vec3 instancePositions64Low;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin float instanceStrokeWidths;\n\nin vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool stroked;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int radiusUnits;\nuniform int widthUnits;\nout vec4 vColor;\n#ifdef FLAT_SHADING\nout vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (stroked) {\n    float widthPixels = clamp(\n      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n    if (isStroke) {\n      strokeOffsetRatio -= sign(positions.z) * halfOffset;\n    } else {\n      strokeOffsetRatio -= halfOffset;\n    }\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.pickingColor = instancePickingColors;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;\n  if (radiusUnits == UNIT_METERS) {\n    offset = project_size(offset);\n  }\n  vec3 pos = vec3(offset, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  if (extruded && !isStroke) {\n#ifdef FLAT_SHADING\n    position_commonspace = geometry.position;\n    vColor = vec4(color.rgb, color.a * opacity);\n#else\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n#endif\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nuniform vec3 project_uCameraPosition;\nuniform bool extruded;\nuniform bool isStroke;\n\nout vec4 fragColor;\n\nin vec4 vColor;\n#ifdef FLAT_SHADING\nin vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  fragColor = vColor;\n#ifdef FLAT_SHADING\n  if (extruded && !isStroke && !picking_uActive) {\n    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n  }\n#endif\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:n,transpileToGLSL100:e,modules:[LT,r?WT:GT,KT]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:PL},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:PL},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t,i=r.extensionsChanged||e.flatShading!==n.flatShading;if(i){var o;const{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}(i||e.diskResolution!==n.diskResolution||e.vertices!==n.vertices||(e.extruded||e.stroked)!==(n.extruded||n.stroked))&&this._updateGeometry(e)}getGeometry(t,e,n){const r=new EL({radius:1,height:n?2:0,vertices:e,nradial:t});let i=0;if(e)for(let o=0;o<t;o++){const n=e[o];i+=Math.sqrt(n[0]*n[0]+n[1]*n[1])/t}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/t)*i}),r}_getModel(t){return new oM(t,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry(t){let{diskResolution:e,vertices:n,extruded:r,stroked:i}=t;const o=this.getGeometry(e,n,r||i);this.setState({fillVertexCount:o.attributes.POSITION.value.length/3,wireframeVertexCount:o.indices.value.length}),this.state.model.setProps({geometry:o})}draw(t){let{uniforms:e}=t;const{lineWidthUnits:n,lineWidthScale:r,lineWidthMinPixels:i,lineWidthMaxPixels:o,radiusUnits:s,elevationScale:a,extruded:l,filled:c,stroked:u,wireframe:d,offset:h,coverage:f,radius:p,angle:g}=this.props,{model:m,fillVertexCount:v,wireframeVertexCount:b,edgeDistance:y}=this.state;m.setUniforms(e).setUniforms({radius:p,angle:g/180*Math.PI,offset:h,extruded:l,stroked:u,coverage:f,elevationScale:a,edgeDistance:y,radiusUnits:fy[s],widthUnits:fy[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o}),l&&d&&(m.setProps({isIndexed:!0}),m.setVertexCount(b).setDrawMode(1).setUniforms({isStroke:!0}).draw()),c&&(m.setProps({isIndexed:!1}),m.setVertexCount(v).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!l&&u&&(m.setProps({isIndexed:!1}),m.setVertexCount(2*v/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}ge(TL,"layerName","ColumnLayer"),ge(TL,"defaultProps",ML);const OL={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class kL extends QM{getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float useShortestPath;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvec3 splitLine(vec3 a, vec3 b, float x) {\n  float t = (x - a.x) / (b.x - a.x);\n  return vec3(x, mix(a.yz, b.yz, t));\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;\n  vec3 source_world_64low = instanceSourcePositions64Low;\n  vec3 target_world_64low = instanceTargetPositions64Low;\n\n  if (useShortestPath > 0.5 || useShortestPath < -0.5) {\n    source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n    target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n    float deltaLng = target_world.x - source_world.x;\n\n    if (deltaLng * useShortestPath > 180.) {\n      source_world.x += 360. * useShortestPath;\n      source_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      source_world_64low = vec3(0.0);\n    } else if (deltaLng * useShortestPath < -180.) {\n      target_world.x += 360. * useShortestPath;\n      target_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      target_world_64low = vec3(0.0);\n    } else if (useShortestPath < 0.) {\n      gl_Position = vec4(0.);\n      return;\n    }\n  }\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(p, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[LT,KT]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(e).setUniforms({widthUnits:fy[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){return new oM(t,{...this.getShaders(),id:this.props.id,geometry:new qT({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0})}}ge(kL,"layerName","LineLayer"),ge(kL,"defaultProps",OL);const RL=.5,IL=1/6,BL={N:[0,RL],E:[RL,0],S:[0,-.5],W:[-.5,0],NE:[RL,RL],NW:[-.5,RL],SE:[RL,-.5],SW:[-.5,-.5]},LL=[BL.W,BL.SW,BL.S],DL=[BL.S,BL.SE,BL.E],FL=[BL.E,BL.NE,BL.N],NL=[BL.NW,BL.W,BL.N],jL=[[-.5,IL],[-.5,-IL],[-IL,-.5],[IL,-.5]],zL=[[-IL,-.5],[IL,-.5],[RL,-IL],[RL,IL]],UL=[[RL,-IL],[RL,IL],[IL,RL],[-IL,RL]],VL=[[-.5,IL],[-.5,-IL],[IL,RL],[-IL,RL]],GL=[BL.W,BL.SW,BL.SE,BL.E],WL=[BL.S,BL.SE,BL.NE,BL.N],HL=[BL.NW,BL.W,BL.E,BL.NE],JL=[BL.NW,BL.SW,BL.S,BL.N],KL=[[-.5,IL],[-.5,-IL],[RL,-IL],[RL,IL]],XL=[[-IL,-.5],[IL,-.5],[IL,RL],[-IL,RL]],qL=[BL.NW,BL.SW,BL.SE,BL.NE],YL=[BL.NW,BL.SW,BL.SE,BL.E,BL.N],QL=[BL.W,BL.SW,BL.SE,BL.NE,BL.N],ZL=[BL.NW,BL.W,BL.S,BL.SE,BL.NE],$L=[BL.NW,BL.SW,BL.S,BL.E,BL.NE],tD=[BL.NW,BL.W,[RL,-IL],[RL,IL],BL.N],eD=[[-IL,-.5],[IL,-.5],BL.E,BL.NE,BL.N],nD=[[-.5,IL],[-.5,-IL],BL.S,BL.SE,BL.E],rD=[BL.W,BL.SW,BL.S,[IL,RL],[-IL,RL]],iD=[BL.NW,BL.W,[-IL,-.5],[IL,-.5],BL.N],oD=[[-.5,IL],[-.5,-IL],BL.E,BL.NE,BL.N],sD=[BL.S,BL.SE,BL.E,[IL,RL],[-IL,RL]],aD=[BL.W,BL.SW,BL.S,[RL,-IL],[RL,IL]],lD=[BL.W,BL.SW,BL.SE,BL.E,[IL,RL],[-IL,RL]],cD=[[-.5,IL],[-.5,-IL],BL.S,BL.SE,BL.NE,BL.N],uD=[BL.NW,BL.W,[-IL,-.5],[IL,-.5],BL.E,BL.NE],dD=[BL.NW,BL.SW,BL.S,[RL,-IL],[RL,IL],BL.N],hD=[BL.W,BL.SW,BL.S,BL.E,BL.NE,BL.N],fD=[BL.NW,BL.W,BL.S,BL.SE,BL.E,BL.N],pD=[[-.5,IL],[-.5,-IL],[-IL,-.5],[IL,-.5],BL.E,BL.NE,BL.N],gD=[BL.W,BL.SW,BL.S,[RL,-IL],[RL,IL],[IL,RL],[-IL,RL]],mD=[BL.NW,BL.W,[-IL,-.5],[IL,-.5],[RL,-IL],[RL,IL],BL.N],vD=[[-.5,IL],[-.5,-IL],BL.S,BL.SE,BL.E,[IL,RL],[-IL,RL]],bD=[[-.5,IL],[-.5,-IL],[-IL,-.5],[IL,-.5],[RL,-IL],[RL,IL],[IL,RL],[-IL,RL]],yD={0:[],1:[[BL.W,BL.S]],2:[[BL.S,BL.E]],3:[[BL.W,BL.E]],4:[[BL.N,BL.E]],5:{0:[[BL.W,BL.S],[BL.N,BL.E]],1:[[BL.W,BL.N],[BL.S,BL.E]]},6:[[BL.N,BL.S]],7:[[BL.W,BL.N]],8:[[BL.W,BL.N]],9:[[BL.N,BL.S]],10:{0:[[BL.W,BL.N],[BL.S,BL.E]],1:[[BL.W,BL.S],[BL.N,BL.E]]},11:[[BL.N,BL.E]],12:[[BL.W,BL.E]],13:[[BL.S,BL.E]],14:[[BL.W,BL.S]],15:[]};function xD(t){return parseInt(t,4)}const AD={[xD("0000")]:[],[xD("2222")]:[],[xD("2221")]:[LL],[xD("2212")]:[DL],[xD("2122")]:[FL],[xD("1222")]:[NL],[xD("0001")]:[LL],[xD("0010")]:[DL],[xD("0100")]:[FL],[xD("1000")]:[NL],[xD("2220")]:[jL],[xD("2202")]:[zL],[xD("2022")]:[UL],[xD("0222")]:[VL],[xD("0002")]:[jL],[xD("0020")]:[zL],[xD("0200")]:[UL],[xD("2000")]:[VL],[xD("0011")]:[GL],[xD("0110")]:[WL],[xD("1100")]:[HL],[xD("1001")]:[JL],[xD("2211")]:[GL],[xD("2112")]:[WL],[xD("1122")]:[HL],[xD("1221")]:[JL],[xD("2200")]:[KL],[xD("2002")]:[XL],[xD("0022")]:[KL],[xD("0220")]:[XL],[xD("1111")]:[qL],[xD("1211")]:[YL],[xD("2111")]:[QL],[xD("1112")]:[ZL],[xD("1121")]:[$L],[xD("1011")]:[YL],[xD("0111")]:[QL],[xD("1110")]:[ZL],[xD("1101")]:[$L],[xD("1200")]:[tD],[xD("0120")]:[eD],[xD("0012")]:[nD],[xD("2001")]:[rD],[xD("1022")]:[tD],[xD("2102")]:[eD],[xD("2210")]:[nD],[xD("0221")]:[rD],[xD("1002")]:[iD],[xD("2100")]:[oD],[xD("0210")]:[sD],[xD("0021")]:[aD],[xD("1220")]:[iD],[xD("0122")]:[oD],[xD("2012")]:[sD],[xD("2201")]:[aD],[xD("0211")]:[lD],[xD("2110")]:[cD],[xD("1102")]:[uD],[xD("1021")]:[dD],[xD("2011")]:[lD],[xD("0112")]:[cD],[xD("1120")]:[uD],[xD("1201")]:[dD],[xD("2101")]:[hD],[xD("0121")]:[hD],[xD("1012")]:[fD],[xD("1210")]:[fD],[xD("0101")]:{0:[LL,FL],1:[hD],2:[hD]},[xD("1010")]:{0:[NL,DL],1:[fD],2:[fD]},[xD("2121")]:{0:[hD],1:[hD],2:[LL,FL]},[xD("1212")]:{0:[fD],1:[fD],2:[NL,DL]},[xD("2120")]:{0:[pD],1:[pD],2:[jL,FL]},[xD("2021")]:{0:[gD],1:[gD],2:[LL,UL]},[xD("1202")]:{0:[mD],1:[mD],2:[NL,zL]},[xD("0212")]:{0:[vD],1:[vD],2:[DL,VL]},[xD("0102")]:{0:[jL,FL],1:[pD],2:[pD]},[xD("0201")]:{0:[LL,UL],1:[gD],2:[gD]},[xD("1020")]:{0:[NL,zL],1:[mD],2:[mD]},[xD("2010")]:{0:[DL,VL],1:[vD],2:[vD]},[xD("2020")]:{0:[VL,zL],1:[bD],2:[jL,UL]},[xD("0202")]:{0:[UL,jL],1:[bD],2:[VL,zL]}},_D={ISO_LINES:1,ISO_BANDS:2},wD={zIndex:0,zOffset:.005};function SD(t,e){return Array.isArray(e)?t<e[0]?0:t<e[1]?1:2:t>=e?1:0}function CD(t){const{cellWeights:e,x:n,y:r,width:i,height:o}=t;let s=t.threshold;t.thresholdValue&&(Rg.deprecated("thresholdValue","threshold")(),s=t.thresholdValue);const a=n<0,l=n>=i-1,c=r<0,u=r>=o-1,d=a||l||c||u,h={},f={};a||u?f.top=0:(h.top=e[(r+1)*i+n],f.top=SD(h.top,s)),l||u?f.topRight=0:(h.topRight=e[(r+1)*i+n+1],f.topRight=SD(h.topRight,s)),l||c?f.right=0:(h.right=e[r*i+n+1],f.right=SD(h.right,s)),a||c?f.current=0:(h.current=e[r*i+n],f.current=SD(h.current,s));const{top:p,topRight:g,right:m,current:v}=f;let b=-1;Number.isFinite(s)&&(b=p<<3|g<<2|m<<1|v),Array.isArray(s)&&(b=p<<6|g<<4|m<<2|v);let y=0;return d||(y=SD((h.top+h.topRight+h.right+h.current)/4,s)),{code:b,meanCode:y}}function ED(t){const{gridOrigin:e,cellSize:n,x:r,y:i,code:o,meanCode:s,type:a=_D.ISO_LINES}=t,l={...wD,...t.thresholdData};let c=a===_D.ISO_BANDS?AD[o]:yD[o];Array.isArray(c)||(c=c[s]);const u=l.zIndex*l.zOffset,d=(r+1)*n[0],h=(i+1)*n[1],f=e[0]+d,p=e[1]+h;if(a===_D.ISO_BANDS){const t=[];return c.forEach((e=>{const r=[];e.forEach((t=>{const e=f+t[0]*n[0],i=p+t[1]*n[1];r.push([e,i,u])})),t.push(r)})),t}const g=[];return c.forEach((t=>{t.forEach((t=>{const e=f+t[0]*n[0],r=p+t[1]*n[1];g.push([e,r,u])}))})),g}function PD(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}function MD(t){return t-Math.fround(t)}function TD(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const i=4*n+r;PD(t[4*r+n],e,2*i)}return e}const OD={ONE:1};const kD={name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",fs:null,getUniforms:function(){return OD},fp64ify:PD,fp64LowPart:MD,fp64ifyMatrix4:TD},RD={SUM:1,MEAN:2,MIN:3,MAX:4};function ID(t,e){return t+e}function BD(t,e){return e>t?e:t}function LD(t,e){return e<t?e:t}function DD(t,e,n){const r=RD[t]||RD.SUM;switch(e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Number.isFinite(t))return t;return n=>(e.index=n.index,t(n.source,e))}(e,n),r){case RD.MIN:return t=>function(t,e){if(Number.isFinite(e))return t.length?e:null;const n=t.map(e).filter(Number.isFinite);return n.length?n.reduce(LD,1/0):null}(t,e);case RD.SUM:return t=>function(t,e){if(Number.isFinite(e))return t.length?t.length*e:null;const n=t.map(e).filter(Number.isFinite);return n.length?n.reduce(ID,0):null}(t,e);case RD.MEAN:return t=>function(t,e){if(Number.isFinite(e))return t.length?e:null;const n=t.map(e).filter(Number.isFinite);return n.length?n.reduce(ID,0)/n.length:null}(t,e);case RD.MAX:return t=>function(t,e){if(Number.isFinite(e))return t.length?e:null;const n=t.map(e).filter(Number.isFinite);return n.length?n.reduce(BD,-1/0):null}(t,e);default:return null}}function FD(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>(e.indices=n.map((t=>t.index)),t(n.map((t=>t.source)),e))}const ND={projectPoints:!1,viewport:null,createBufferObjects:!0,moduleSettings:{}},jD=3402823466e29,zD=[32775,32774],UD=[32776,32774],VD=[32776,32775],GD={[RD.SUM]:32774,[RD.MEAN]:32774,[RD.MIN]:zD,[RD.MAX]:UD},WD={size:1,operation:RD.SUM,needMin:!1,needMax:!1,combineMaxMin:!1},HD="#define SHADER_NAME gpu-aggregation-to-grid-vs\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute vec3 weights;\nuniform vec2 cellSize;\nuniform vec2 gridSize;\nuniform bool projectPoints;\nuniform vec2 translation;\nuniform vec3 scaling;\n\nvarying vec3 vWeights;\n\nvec2 project_to_pixel(vec4 pos) {\n  vec4 result;\n  pos.xy = pos.xy/pos.w;\n  result = pos + vec4(translation, 0., 0.);\n  result.xy = scaling.z > 0. ? result.xy * scaling.xy : result.xy;\n  return result.xy;\n}\n\nvoid main(void) {\n\n  vWeights = weights;\n\n  vec4 windowPos = vec4(positions, 1.);\n  if (projectPoints) {\n    windowPos = project_position_to_clipspace(positions, positions64Low, vec3(0));\n  }\n\n  vec2 pos = project_to_pixel(windowPos);\n\n  vec2 pixelXY64[2];\n  pixelXY64[0] = vec2(pos.x, 0.);\n  pixelXY64[1] = vec2(pos.y, 0.);\n  vec2 gridXY64[2];\n  gridXY64[0] = div_fp64(pixelXY64[0], vec2(cellSize.x, 0));\n  gridXY64[1] = div_fp64(pixelXY64[1], vec2(cellSize.y, 0));\n  float x = floor(gridXY64[0].x);\n  float y = floor(gridXY64[1].x);\n  pos = vec2(x, y);\n  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n  gl_PointSize = 1.0;\n}\n",JD="#define SHADER_NAME gpu-aggregation-to-grid-fs\n\nprecision highp float;\n\nvarying vec3 vWeights;\n\nvoid main(void) {\n  gl_FragColor = vec4(vWeights, 1.0);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",KD="#version 300 es\n#define SHADER_NAME gpu-aggregation-all-vs-64\n\nin vec2 position;\nuniform ivec2 gridSize;\nout vec2 vTextureCoord;\n\nvoid main(void) {\n  vec2 pos = vec2(-1.0, -1.0);\n  vec2 offset = 1.0 / vec2(gridSize);\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n\n  int yIndex = gl_InstanceID / gridSize[0];\n  int xIndex = gl_InstanceID - (yIndex * gridSize[0]);\n\n  vec2 yIndexFP64 = vec2(float(yIndex), 0.);\n  vec2 xIndexFP64 = vec2(float(xIndex), 0.);\n  vec2 gridSizeYFP64 = vec2(gridSize[1], 0.);\n  vec2 gridSizeXFP64 = vec2(gridSize[0], 0.);\n\n  vec2 texCoordXFP64 = div_fp64(yIndexFP64, gridSizeYFP64);\n  vec2 texCoordYFP64 = div_fp64(xIndexFP64, gridSizeXFP64);\n\n  vTextureCoord = vec2(texCoordYFP64.x, texCoordXFP64.x);\n  gl_PointSize = 1.0;\n}\n",XD="#version 300 es\n#define SHADER_NAME gpu-aggregation-all-fs\n\nprecision highp float;\n\nin vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform bool combineMaxMin;\nout vec4 fragColor;\nvoid main(void) {\n  vec4 textureColor = texture(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n  if (textureColor.a == 0.) {\n    discard;\n  }\n  fragColor.rgb = textureColor.rgb;\n  fragColor.a = combineMaxMin ? textureColor.r : textureColor.a;\n}\n",qD="#define SHADER_NAME gpu-aggregation-transform-mean-vs\nattribute vec4 aggregationValues;\nvarying vec4 meanValues;\n\nvoid main()\n{\n  bool isCellValid = bool(aggregationValues.w > 0.);\n  meanValues.xyz = isCellValid ? aggregationValues.xyz/aggregationValues.w : vec3(0, 0, 0);\n  meanValues.w = aggregationValues.w;\n  gl_PointSize = 1.0;\n}\n",YD={10240:9728,10241:9728};function QD(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n=1,height:r=1,data:i=null,unpackFlipY:o=!0,parameters:s=YD}=e;return new qA(t,{data:i,format:vx(t)?34836:6408,type:5126,border:0,mipmaps:!1,parameters:s,dataFormat:6408,width:n,height:r,unpackFlipY:o})}function ZD(t,e){const{id:n,width:r=1,height:i=1,texture:o}=e;return new j_(t,{id:n,width:r,height:i,attachments:{36064:o}})}const $D=["aggregationBuffer","maxMinBuffer","minBuffer","maxBuffer"],tF={maxData:"maxBuffer",minData:"minBuffer",maxMinData:"maxMinBuffer"},eF=[d_,E_,v_,b_,A_];class nF{static getAggregationData(t){let{aggregationData:e,maxData:n,minData:r,maxMinData:i,pixelIndex:o}=t;const s=4*o,a={};return e&&(a.cellCount=e[s+3],a.cellWeight=e[s]),i?(a.maxCellWieght=i[0],a.minCellWeight=i[3]):(n&&(a.maxCellWieght=n[0],a.totalCount=n[3]),r&&(a.minCellWeight=r[0],a.totalCount=n[3])),a}static getCellData(t){let{countsData:e,size:n=1}=t;const r=e.length/4,i=new Float32Array(r*n),o=new Uint32Array(r);for(let s=0;s<r;s++){for(let t=0;t<n;t++)i[s*n+t]=e[4*s+t];o[s]=e[4*s+3]}return{cellCounts:o,cellWeights:i}}static isSupported(t){return D_(t,eF)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=e.id||"gpu-grid-aggregator",this.gl=t,this.state={weightAttributes:{},textures:{},meanTextures:{},buffers:{},framebuffers:{},maxMinFramebuffers:{},minFramebuffers:{},maxFramebuffers:{},equations:{},resources:{},results:{}},this._hasGPUSupport=vx(t)&&D_(this.gl,v_),this._hasGPUSupport&&this._setupModels()}delete(){const{gridAggregationModel:t,allAggregationModel:e,meanTransform:n}=this,{textures:r,framebuffers:i,maxMinFramebuffers:o,minFramebuffers:s,maxFramebuffers:a,meanTextures:l,resources:c}=this.state;null===t||void 0===t||t.delete(),null===e||void 0===e||e.delete(),null===n||void 0===n||n.delete(),function(t){t=Array.isArray(t)?t:[t],t.forEach((t=>{for(const e in t)t[e].delete()}))}([i,r,o,s,a,l,c])}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({results:{}});const e=this._normalizeAggregationParams(t);return this._hasGPUSupport||Rg.log(1,"GPUGridAggregator: not supported")(),this._runAggregation(e)}getData(t){const e={},n=this.state.results;n[t].aggregationData||(n[t].aggregationData=n[t].aggregationBuffer.getData()),e.aggregationData=n[t].aggregationData;for(const r in tF){const i=tF[r];(n[t][r]||n[t][i])&&(n[t][r]=n[t][r]||n[t][i].getData(),e[r]=n[t][r])}return e}updateShaders(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({shaderOptions:t,modelDirty:!0})}_normalizeAggregationParams(t){const e={...ND,...t},{weights:n}=e;return n&&(e.weights=function(t){const e={};for(const n in t)e[n]={...WD,...t[n]};return e}(n)),e}setState(t){Object.assign(this.state,t)}_getAggregateData(t){const e={},{textures:n,framebuffers:r,maxMinFramebuffers:i,minFramebuffers:o,maxFramebuffers:s,resources:a}=this.state,{weights:l}=t;for(const c in l){e[c]={};const{needMin:t,needMax:u,combineMaxMin:d}=l[c];e[c].aggregationTexture=n[c],e[c].aggregationBuffer=l_(r[c],{target:l[c].aggregationBuffer,sourceType:5126}),t&&u&&d?(e[c].maxMinBuffer=l_(i[c],{target:l[c].maxMinBuffer,sourceType:5126}),e[c].maxMinTexture=a["".concat(c,"-maxMinTexture")]):(t&&(e[c].minBuffer=l_(o[c],{target:l[c].minBuffer,sourceType:5126}),e[c].minTexture=a["".concat(c,"-minTexture")]),u&&(e[c].maxBuffer=l_(s[c],{target:l[c].maxBuffer,sourceType:5126}),e[c].maxTexture=a["".concat(c,"-maxTexture")]))}return this._trackGPUResultBuffers(e,l),e}_renderAggregateData(t){const{cellSize:e,projectPoints:n,attributes:r,moduleSettings:i,numCol:o,numRow:s,weights:a,translation:l,scaling:c}=t,{maxMinFramebuffers:u,minFramebuffers:d,maxFramebuffers:h}=this.state,f=[o,s],p={blend:!0,depthTest:!1,blendFunc:[1,1]},g={cellSize:e,gridSize:f,projectPoints:n,translation:l,scaling:c};for(const m in a){const{needMin:t,needMax:e}=a[m],n=t&&e&&a[m].combineMaxMin;this._renderToWeightsTexture({id:m,parameters:p,moduleSettings:i,uniforms:g,gridSize:f,attributes:r,weights:a}),n?this._renderToMaxMinTexture({id:m,parameters:{...p,blendEquation:VD},gridSize:f,minOrMaxFb:u[m],clearParams:{clearColor:[0,0,0,jD]},combineMaxMin:n}):(t&&this._renderToMaxMinTexture({id:m,parameters:{...p,blendEquation:zD},gridSize:f,minOrMaxFb:d[m],clearParams:{clearColor:[jD,jD,jD,0]},combineMaxMin:n}),e&&this._renderToMaxMinTexture({id:m,parameters:{...p,blendEquation:UD},gridSize:f,minOrMaxFb:h[m],clearParams:{clearColor:[0,0,0,0]},combineMaxMin:n}))}}_renderToMaxMinTexture(t){const{id:e,parameters:n,gridSize:r,minOrMaxFb:i,combineMaxMin:o,clearParams:s={}}=t,{framebuffers:a}=this.state,{gl:l,allAggregationModel:c}=this;aA(l,{...s,framebuffer:i,viewport:[0,0,r[0],r[1]]},(()=>{l.clear(16384),c.draw({parameters:n,uniforms:{uSampler:a[e].texture,gridSize:r,combineMaxMin:o}})}))}_renderToWeightsTexture(t){const{id:e,parameters:n,moduleSettings:r,uniforms:i,gridSize:o,weights:s}=t,{framebuffers:a,equations:l,weightAttributes:c}=this.state,{gl:u,gridAggregationModel:d}=this,{operation:h}=s[e],f=h===RD.MIN?[jD,jD,jD,0]:[0,0,0,0];if(aA(u,{framebuffer:a[e],viewport:[0,0,o[0],o[1]],clearColor:f},(()=>{u.clear(16384);const t={weights:c[e]};d.draw({parameters:{...n,blendEquation:l[e]},moduleSettings:r,uniforms:i,attributes:t})})),h===RD.MEAN){const{meanTextures:t,textures:n}=this.state,r={_sourceTextures:{aggregationValues:t[e]},_targetTexture:n[e],elementCount:n[e].width*n[e].height};this.meanTransform?this.meanTransform.update(r):this.meanTransform=function(t,e){return new sM(t,{vs:qD,_targetTextureVarying:"meanValues",...e})}(u,r),this.meanTransform.run({parameters:{blend:!1,depthTest:!1}}),a[e].attach({36064:n[e]})}}_runAggregation(t){this._updateModels(t),this._setupFramebuffers(t),this._renderAggregateData(t);const e=this._getAggregateData(t);return this.setState({results:e}),e}_setupFramebuffers(t){const{textures:e,framebuffers:n,maxMinFramebuffers:r,minFramebuffers:i,maxFramebuffers:o,meanTextures:s,equations:a}=this.state,{weights:l}=t,{numCol:c,numRow:u}=t,d={width:c,height:u};for(const h in l){const{needMin:t,needMax:f,combineMaxMin:p,operation:g}=l[h];e[h]=l[h].aggregationTexture||e[h]||QD(this.gl,{id:"".concat(h,"-texture"),width:c,height:u}),e[h].resize(d);let m=e[h];g===RD.MEAN&&(s[h]=s[h]||QD(this.gl,{id:"".concat(h,"-mean-texture"),width:c,height:u}),s[h].resize(d),m=s[h]),n[h]?n[h].attach({36064:m}):n[h]=ZD(this.gl,{id:"".concat(h,"-fb"),width:c,height:u,texture:m}),n[h].resize(d),a[h]=GD[g]||GD.SUM,(t||f)&&(t&&f&&p?r[h]||(m=l[h].maxMinTexture||this._getMinMaxTexture("".concat(h,"-maxMinTexture")),r[h]=ZD(this.gl,{id:"".concat(h,"-maxMinFb"),texture:m})):(t&&(i[h]||(m=l[h].minTexture||this._getMinMaxTexture("".concat(h,"-minTexture")),i[h]=ZD(this.gl,{id:"".concat(h,"-minFb"),texture:m}))),f&&(o[h]||(m=l[h].maxTexture||this._getMinMaxTexture("".concat(h,"-maxTexture")),o[h]=ZD(this.gl,{id:"".concat(h,"-maxFb"),texture:m})))))}}_getMinMaxTexture(t){const{resources:e}=this.state;return e[t]||(e[t]=QD(this.gl,{id:"resourceName"})),e[t]}_setupModels(){let{numCol:t=0,numRow:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n;const{gl:r}=this,{shaderOptions:i}=this.state;if(null===(n=this.gridAggregationModel)||void 0===n||n.delete(),this.gridAggregationModel=function(t,e){const n=SM({vs:HD,fs:JD,modules:[kD,LT]},e);return new oM(t,{id:"Gird-Aggregation-Model",vertexCount:1,drawMode:0,...n})}(r,i),!this.allAggregationModel){const n=t*e;this.allAggregationModel=function(t,e){return new oM(t,{id:"All-Aggregation-Model",vs:KD,fs:XD,modules:[kD],vertexCount:1,drawMode:0,isInstanced:!0,instanceCount:e,attributes:{position:[0,0]}})}(r,n)}}_setupWeightAttributes(t){const{weightAttributes:e}=this.state,{weights:n}=t;for(const r in n)e[r]=t.attributes[r]}_trackGPUResultBuffers(t,e){const{resources:n}=this.state;for(const r in t)if(t[r])for(const i of $D)if(t[r][i]&&e[r][i]!==t[r][i]){const e="gpu-result-".concat(r,"-").concat(i);n[e]&&n[e].delete(),n[e]=t[r][i]}}_updateModels(t){const{vertexCount:e,attributes:n,numCol:r,numRow:i}=t,{modelDirty:o}=this.state;o&&(this._setupModels(t),this.setState({modelDirty:!1})),this._setupWeightAttributes(t),this.gridAggregationModel.setVertexCount(e),this.gridAggregationModel.setAttributes(n),this.allAggregationModel.setInstanceCount(r*i)}}const rF=6378e3;function iF(t){return Number.isFinite(t)?t:0}function oF(t,e){const n=t.positions.value;let r,i,o=1/0,s=-1/0,a=1/0,l=-1/0;for(let c=0;c<e;c++)i=n[3*c],r=n[3*c+1],o=r<o?r:o,s=r>s?r:s,a=i<a?i:a,l=i>l?i:l;return{xMin:iF(a),xMax:iF(l),yMin:iF(o),yMax:iF(s)}}function sF(t,e){const n=t<0?-1:1;let r=n<0?Math.abs(t)+e:Math.abs(t);return r=Math.floor(r/e)*e,r*n}function aF(t,e){if(!(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]))return{xOffset:e,yOffset:e};const{yMin:n,yMax:r}=t;return function(t,e){const n=(s=t,s/rF*(180/Math.PI)),r=(i=e,o=t,o/rF*(180/Math.PI)/Math.cos(i*Math.PI/180));var i,o;var s;return{yOffset:n,xOffset:r}}(e,(n+r)/2)}function lF(t,e,n,r){const i=aF(t,e,r!==dy.CARTESIAN),o=function(t,e,n,r){const{width:i,height:o}=r,s=n===dy.CARTESIAN?[-i/2,-o/2]:[-180,-90];Rg.assert(n===dy.CARTESIAN||n===dy.LNGLAT||n===dy.DEFAULT);const{xMin:a,yMin:l}=t;return[-1*(sF(a-s[0],e.xOffset)+s[0]),-1*(sF(l-s[1],e.yOffset)+s[1])]}(t,i,r,n),{xMin:s,yMin:a,xMax:l,yMax:c}=t,u=l-s+i.xOffset,d=c-a+i.yOffset;return{gridOffset:i,translation:o,width:u,height:d,numCol:Math.ceil(u/i.xOffset),numRow:Math.ceil(d/i.yOffset)}}function cF(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}class uF extends Fk{constructor(){super(...arguments),ge(this,"state",void 0)}initializeAggregationLayer(t){super.initializeState(this.context),this.setState({ignoreProps:cF(this.constructor._propTypes,t.data.props),dimensions:t})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){const t=this.getShaders({});t&&t.defines&&(t.defines.NON_INSTANCED_MODEL=1),this.updateShaders(t)}this._updateAttributes()}updateAttributes(t){this.setState({changedAttributes:t})}getAttributes(){return this.getAttributeManager().getShaderAttributes()}getModuleSettings(){const{viewport:t,mousePosition:e,gl:n}=this.context;return Object.assign(Object.create(this.props),{viewport:t,mousePosition:e,pickingActive:0,devicePixelRatio:lA(n)})}updateShaders(t){}isAggregationDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{props:n,oldProps:r,changeFlags:i}=t,{compareAll:o=!1,dimension:s}=e,{ignoreProps:a}=this.state,{props:l,accessors:c=[]}=s,{updateTriggersChanged:u}=i;if(i.dataChanged)return!0;if(u){if(u.all)return!0;for(const t of c)if(u[t])return!0}if(o)return!!i.extensionsChanged||yM({oldProps:r,newProps:n,ignoreProps:a,propTypes:this.constructor._propTypes});for(const d of l)if(n[d]!==r[d])return!0;return!1}isAttributeChanged(t){const{changedAttributes:e}=this.state;return t?e&&void 0!==e[t]:!function(t){let e=!0;for(const n in t){e=!1;break}return e}(e)}_getAttributeManager(){return new dM(this.context.gl,{id:this.props.id,stats:this.context.stats})}}function dF(t,e,n){const r=n;return r.domain=()=>t,r.range=()=>e,r}function hF(t,e){return dF(t,e,(n=>function(t,e,n){const r=t[1]-t[0];if(r<=0)return Rg.warn("quantizeScale: invalid domain, returning range[0]")(),e[0];const i=r/e.length,o=Math.floor((n-t[0])/i),s=Math.max(Math.min(o,e.length-1),0);return e[s]}(t,e,n)))}function fF(t,e){return dF(t,e,(n=>function(t,e,n){return(n-t[0])/(t[1]-t[0])*(e[1]-e[0])+e[0]}(t,e,n)))}function pF(t,e){const n=t.sort(gF);let r=0;const i=Math.max(1,e.length),o=new Array(i-1);for(;++r<i;)o[r-1]=mF(n,r/i);const s=t=>function(t,e,n){return e[function(t,e){let n=0,r=t.length;for(;n<r;){const i=n+r>>>1;gF(t[i],e)>0?r=i:n=i+1}return n}(t,n)]}(o,e,t);return s.thresholds=()=>o,dF(t,e,s)}function gF(t,e){return t-e}function mF(t,e){const n=t.length;if(e<=0||n<2)return t[0];if(e>=1)return t[n-1];const r=(n-1)*e,i=Math.floor(r),o=t[i];return o+(t[i+1]-o)*(r-i)}function vF(t,e){const n=new Map,r=[];for(const i of t){const t="".concat(i);n.has(t)||n.set(t,r.push(i))}return dF(t,e,(t=>function(t,e,n,r){const i="".concat(r);let o=e.get(i);return void 0===o&&(o=t.push(r),e.set(i,o)),n[(o-1)%n.length]}(r,n,e,t)))}function bF(t){return void 0!==t&&null!==t}function yF(t,e){return("function"===typeof e?t.map(e):t).filter(bF)}function xF(t,e){return yF(t,e)}function AF(t,e){return function(t){const e=[];return t.forEach((t=>{!e.includes(t)&&bF(t)&&e.push(t)})),e}(yF(t,e))}ge(uF,"layerName","AggregationLayer");const _F=t=>t.length,wF=t=>t.points,SF=t=>t.index,CF=(t,e)=>t<e?-1:t>e?1:t>=e?0:NaN,EF={getValue:_F,getPoints:wF,getIndex:SF,filterData:null};class PF{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EF;ge(this,"maxCount",void 0),ge(this,"maxValue",void 0),ge(this,"minValue",void 0),ge(this,"totalCount",void 0),ge(this,"aggregatedBins",void 0),ge(this,"sortedBins",void 0),ge(this,"binMap",void 0),this.aggregatedBins=this.getAggregatedBins(t,e),this._updateMinMaxValues(),this.binMap=this.getBinMap()}getAggregatedBins(t,e){const{getValue:n=_F,getPoints:r=wF,getIndex:i=SF,filterData:o}=e,s="function"===typeof o,a=t.length,l=[];let c=0;for(let u=0;u<a;u++){const e=t[u],a=r(e),d=i(e),h=s?a.filter(o):a;e.filteredPoints=s?h:null;const f=h.length?n(h):null;null!==f&&void 0!==f&&(l[c]={i:Number.isFinite(d)?d:u,value:f,counts:h.length},c++)}return l}_percentileToIndex(t){const e=this.sortedBins.length;if(e<2)return[0,0];const[n,r]=t.map((t=>function(t,e,n){return Math.max(e,Math.min(n,t))}(t,0,100)));return[Math.ceil(n/100*(e-1)),Math.floor(r/100*(e-1))]}getBinMap(){const t={};for(const e of this.aggregatedBins)t[e.i]=e;return t}_updateMinMaxValues(){let t=0,e=0,n=3402823466e29,r=0;for(const i of this.aggregatedBins)t=t>i.counts?t:i.counts,e=e>i.value?e:i.value,n=n<i.value?n:i.value,r+=i.counts;this.maxCount=t,this.maxValue=e,this.minValue=n,this.totalCount=r}getValueRange(t){if(this.sortedBins||(this.sortedBins=this.aggregatedBins.sort(((t,e)=>CF(t.value,e.value)))),!this.sortedBins.length)return[];let e=0,n=this.sortedBins.length-1;if(Array.isArray(t)){const r=this._percentileToIndex(t);e=r[0],n=r[1]}return[this.sortedBins[e].value,this.sortedBins[n].value]}getValueDomainByScale(t){let[e=0,n=100]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.sortedBins||(this.sortedBins=this.aggregatedBins.sort(((t,e)=>CF(t.value,e.value)))),!this.sortedBins.length)return[];const r=this._percentileToIndex([e,n]);return this._getScaleDomain(t,r)}_getScaleDomain(t,e){let[n,r]=e;const i=this.sortedBins;switch(t){case"quantize":case"linear":default:return[i[n].value,i[r].value];case"quantile":return xF(i.slice(n,r+1),(t=>t.value));case"ordinal":return AF(i,(t=>t.value))}}}function MF(t,e){const n=function(t,e){const{data:n=[],cellSize:r}=t,{attributes:i,viewport:o,projectPoints:s,numInstances:a}=e,l=i.positions.value,{size:c}=i.positions.getAccessor(),u=e.boundingBox||function(t,e){const n=t.value,{size:r}=t.getAccessor();let i,o,s=1/0,a=-1/0,l=1/0,c=-1/0;for(let u=0;u<e;u++)o=n[u*r],i=n[u*r+1],Number.isFinite(o)&&Number.isFinite(i)&&(s=i<s?i:s,a=i>a?i:a,l=o<l?o:l,c=o>c?o:c);return{xMin:l,xMax:c,yMin:s,yMax:a}}(i.positions,a),d=e.posOffset||[180,90],h=e.gridOffset||aF(u,r);if(h.xOffset<=0||h.yOffset<=0)return{gridHash:{},gridOffset:h};const{width:f,height:p}=o,g=Math.ceil(f/h.xOffset),m=Math.ceil(p/h.yOffset),v={},{iterable:b,objectInfo:y}=pP(n),x=new Array(3);for(const A of b){y.index++,x[0]=l[y.index*c],x[1]=l[y.index*c+1],x[2]=c>=3?l[y.index*c+2]:0;const[t,e]=s?o.project(x):x;if(Number.isFinite(t)&&Number.isFinite(e)){const n=Math.floor((e+d[1])/h.yOffset),r=Math.floor((t+d[0])/h.xOffset);if(!s||r>=0&&r<g&&n>=0&&n<m){const t="".concat(n,"-").concat(r);v[t]=v[t]||{count:0,points:[],lonIdx:r,latIdx:n},v[t].count+=1,v[t].points.push({source:A,index:y.index})}}}return{gridHash:v,gridOffset:h,offsets:[-1*d[0],-1*d[1]]}}(t,e),r=function(t){let{gridHash:e,gridOffset:n,offsets:r}=t;const i=new Array(Object.keys(e).length);let o=0;for(const s in e){const t=s.split("-"),a=parseInt(t[0],10),l=parseInt(t[1],10),c=o++;i[c]={index:c,position:[r[0]+n.xOffset*l,r[1]+n.yOffset*a],...e[s]}}return i}(n);return{gridHash:n.gridHash,gridOffset:n.gridOffset,data:r}}class TF extends uF{constructor(){super(...arguments),ge(this,"state",void 0)}initializeAggregationLayer(t){let{dimensions:e}=t;const{gl:n}=this.context;super.initializeAggregationLayer(e),this.setState({layerData:{},gpuGridAggregator:new nF(n,{id:"".concat(this.id,"-gpu-aggregator")}),cpuGridAggregator:MF})}updateState(t){super.updateState(t),this.updateAggregationState(t);const{aggregationDataDirty:e,aggregationWeightsDirty:n,gpuAggregation:r}=this.state;if(this.getNumInstances()<=0)return;let i=!1;(e||r&&n)&&(this._updateAggregation(t),i=!0),r||!e&&!n||(this._updateWeightBins(),this._uploadAggregationResults(),i=!0),this.setState({aggregationDirty:i})}finalizeState(t){var e;const{count:n}=this.state.weights;n&&n.aggregationBuffer&&n.aggregationBuffer.delete(),null===(e=this.state.gpuGridAggregator)||void 0===e||e.delete(),super.finalizeState(t)}updateShaders(t){this.state.gpuAggregation&&this.state.gpuGridAggregator.updateShaders(t)}updateAggregationState(t){Rg.assert(!1)}allocateResources(t,e){if(this.state.numRow!==t||this.state.numCol!==e){const n=e*t*4*4,r=this.context.gl,{weights:i}=this.state;for(const t in i){const e=i[t];e.aggregationBuffer&&e.aggregationBuffer.delete(),e.aggregationBuffer=new UA(r,{byteLength:n,accessor:{size:4,type:5126,divisor:1}})}}}updateResults(t){let{aggregationData:e,maxMinData:n,maxData:r,minData:i}=t;const{count:o}=this.state.weights;o&&(o.aggregationData=e,o.maxMinData=n,o.maxData=r,o.minData=i)}_updateAggregation(t){const{cpuGridAggregator:e,gpuGridAggregator:n,gridOffset:r,posOffset:i,translation:o=[0,0],scaling:s=[0,0,0],boundingBox:a,projectPoints:l,gpuAggregation:c,numCol:u,numRow:d}=this.state,{props:h}=t,{viewport:f}=this.context,p=this.getAttributes(),g=this.getNumInstances();if(c){const{weights:t}=this.state;n.run({weights:t,cellSize:[r.xOffset,r.yOffset],numCol:u,numRow:d,translation:o,scaling:s,vertexCount:g,projectPoints:l,attributes:p,moduleSettings:this.getModuleSettings()})}else{const t=e(h,{gridOffset:r,projectPoints:l,attributes:p,viewport:f,posOffset:i,boundingBox:a});this.setState({layerData:t})}}_updateWeightBins(){const{getValue:t}=this.state,e=new PF(this.state.layerData.data||[],{getValue:t});this.setState({sortedBins:e})}_uploadAggregationResults(){const{numCol:t,numRow:e}=this.state,{data:n}=this.state.layerData,{aggregatedBins:r,minValue:i,maxValue:o,totalCount:s}=this.state.sortedBins,a=new Float32Array(t*e*4).fill(0);for(const d of r){const{lonIdx:e,latIdx:r}=n[d.i],{value:i,counts:o}=d,s=4*(e+r*t);a[s]=i,a[s+4-1]=o}const l=new Float32Array([o,0,0,i]),c=new Float32Array([o,0,0,s]),u=new Float32Array([i,0,0,s]);this.updateResults({aggregationData:a,maxMinData:l,maxData:c,minData:u})}}ge(TF,"layerName","GridAggregationLayer");const OF=[255,255,255,255],kF={cellSize:{type:"number",min:1,max:1e3,value:1e3},getPosition:{type:"accessor",value:t=>t.position},getWeight:{type:"accessor",value:1},gpuAggregation:!0,aggregation:"SUM",contours:{type:"object",value:[{threshold:1}],optional:!0,compare:3},zOffset:.005},RF="positions",IF={data:{props:["cellSize"]},weights:{props:["aggregation"],accessors:["getWeight"]}};class BF extends TF{initializeState(){super.initializeAggregationLayer({dimensions:IF}),this.setState({contourData:{},projectPoints:!1,weights:{count:{size:1,operation:RD.SUM}}});this.getAttributeManager().add({[RF]:{size:3,accessor:"getPosition",type:5130,fp64:this.use64bitPositions()},count:{size:3,accessor:"getWeight"}})}updateState(t){super.updateState(t);let e=!1;const{oldProps:n,props:r}=t,{aggregationDirty:i}=this.state;n.contours===r.contours&&n.zOffset===r.zOffset||(e=!0,this._updateThresholdData(t.props)),this.getNumInstances()>0&&(i||e)&&this._generateContours()}renderLayers(){const{contourSegments:t,contourPolygons:e}=this.state.contourData,n=this.getSubLayerClass("lines",kL),r=this.getSubLayerClass("bands",WR),i=t&&t.length>0&&new n(this.getSubLayerProps({id:"lines"}),{data:this.state.contourData.contourSegments,getSourcePosition:t=>t.start,getTargetPosition:t=>t.end,getColor:t=>t.contour.color||OF,getWidth:t=>t.contour.strokeWidth||1}),o=e&&e.length>0&&new r(this.getSubLayerProps({id:"bands"}),{data:this.state.contourData.contourPolygons,getPolygon:t=>t.vertices,getFillColor:t=>t.contour.color||OF});return[i,o]}updateAggregationState(t){const{props:e,oldProps:n}=t,{cellSize:r,coordinateSystem:i}=e,{viewport:o}=this.context,s=n.cellSize!==r;let a=e.gpuAggregation;this.state.gpuAggregation!==e.gpuAggregation&&a&&!nF.isSupported(this.context.gl)&&(Rg.warn("GPU Grid Aggregation not supported, falling back to CPU")(),a=!1);const l=a!==this.state.gpuAggregation;this.setState({gpuAggregation:a});const{dimensions:c}=this.state,u=this.isAttributeChanged(RF),{data:d,weights:h}=c;let{boundingBox:f}=this.state;if(u&&(f=oF(this.getAttributes(),this.getNumInstances()),this.setState({boundingBox:f})),u||s){const{gridOffset:t,translation:e,width:n,height:s,numCol:a,numRow:l}=lF(f,r,o,i);this.allocateResources(l,a),this.setState({gridOffset:t,boundingBox:f,translation:e,posOffset:e.slice(),gridOrigin:[-1*e[0],-1*e[1]],width:n,height:s,numCol:a,numRow:l})}const p=u||l||this.isAggregationDirty(t,{dimension:d,compareAll:a}),g=this.isAggregationDirty(t,{dimension:h});g&&this._updateAccessors(t),(p||g)&&this._resetResults(),this.setState({aggregationDataDirty:p,aggregationWeightsDirty:g})}_updateAccessors(t){const{getWeight:e,aggregation:n,data:r}=t.props,{count:i}=this.state.weights;i&&(i.getWeight=e,i.operation=RD[n]),this.setState({getValue:DD(n,e,{data:r})})}_resetResults(){const{count:t}=this.state.weights;t&&(t.aggregationData=null)}_generateContours(){const{numCol:t,numRow:e,gridOrigin:n,gridOffset:r,thresholdData:i}=this.state,{count:o}=this.state.weights;let{aggregationData:s}=o;s||(s=o.aggregationBuffer.getData(),o.aggregationData=s);const{cellWeights:a}=nF.getCellData({countsData:s}),l=function(t){let{thresholdData:e,cellWeights:n,gridSize:r,gridOrigin:i,cellSize:o}=t;const s=[],a=[],l=r[0],c=r[1];let u=0,d=0;for(const h of e){const{contour:t}=h,{threshold:e}=t;for(let r=-1;r<l;r++)for(let f=-1;f<c;f++){const{code:p,meanCode:g}=CD({cellWeights:n,threshold:e,x:r,y:f,width:l,height:c}),m={type:_D.ISO_BANDS,gridOrigin:i,cellSize:o,x:r,y:f,width:l,height:c,code:p,meanCode:g,thresholdData:h};if(Array.isArray(e)){m.type=_D.ISO_BANDS;const e=ED(m);for(const n of e)a[d++]={vertices:n,contour:t}}else{m.type=_D.ISO_LINES;const e=ED(m);for(let n=0;n<e.length;n+=2)s[u++]={start:e[n],end:e[n+1],contour:t}}}}return{contourSegments:s,contourPolygons:a}}({thresholdData:i,cellWeights:a,gridSize:[t,e],gridOrigin:n,cellSize:[r.xOffset,r.yOffset]});this.setState({contourData:l})}_updateThresholdData(t){const{contours:e,zOffset:n}=t,r=e.length,i=new Array(r);for(let o=0;o<r;o++){const t=e[o];i[o]={contour:t,zIndex:t.zIndex||o,zOffset:n}}this.setState({thresholdData:i})}}ge(BF,"layerName","ContourLayer"),ge(BF,"defaultProps",kF);const LF=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function DF(t){let e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array;if(Number.isFinite(t[0]))e=new r(t);else{e=new r(4*t.length);let n=0;for(let r=0;r<t.length;r++){const i=t[r];e[n++]=i[0],e[n++]=i[1],e[n++]=i[2],e[n++]=Number.isFinite(i[3])?i[3]:255}}if(n)for(let i=0;i<e.length;i++)e[i]/=255;return e}const FF={colorDomain:null,colorRange:LF,elevationDomain:null,elevationRange:[0,1e3],elevationScale:{type:"number",min:0,value:1},gridSize:{type:"array",value:[1,1]},gridOrigin:{type:"array",value:[0,0]},gridOffset:{type:"array",value:[0,0]},cellSize:{type:"number",min:0,max:1e3,value:1e3},offset:{type:"array",value:[1,1]},coverage:{type:"number",min:0,max:1,value:1},extruded:!0,material:!0};class NF extends QM{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME gpu-grid-cell-layer-vertex-shader\n#define RANGE_COUNT 6\n\nin vec3 positions;\nin vec3 normals;\n\nin vec4 colors;\nin vec4 elevations;\nin vec3 instancePickingColors;\nuniform vec2 offset;\nuniform bool extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\nuniform ivec2 gridSize;\nuniform vec2 gridOrigin;\nuniform vec2 gridOriginLow;\nuniform vec2 gridOffset;\nuniform vec2 gridOffsetLow;\nuniform vec4 colorRange[RANGE_COUNT];\nuniform vec2 elevationRange;\nuniform vec2 colorDomain;\nuniform bool colorDomainValid;\nuniform vec2 elevationDomain;\nuniform bool elevationDomainValid;\n\nlayout(std140) uniform;\nuniform ColorData\n{\n  vec4 maxMinCount;\n} colorData;\nuniform ElevationData\n{\n  vec4 maxMinCount;\n} elevationData;\n\n#define EPSILON 0.00001\nout vec4 vColor;\n\nvec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {\n  vec4 outColor = vec4(0., 0., 0., 0.);\n  if (value >= (domain.x - EPSILON) && value <= (domain.y + EPSILON)) {\n    float domainRange = domain.y - domain.x;\n    if (domainRange <= 0.) {\n      outColor = colorRange[0];\n    } else {\n      float rangeCount = float(RANGE_COUNT);\n      float rangeStep = domainRange / rangeCount;\n      float idx = floor((value - domain.x) / rangeStep);\n      idx = clamp(idx, 0., rangeCount - 1.);\n      int intIdx = int(idx);\n      outColor = colorRange[intIdx];\n    }\n  }\n  return outColor;\n}\n\nfloat linearScale(vec2 domain, vec2 range, float value) {\n  if (value >= (domain.x - EPSILON) && value <= (domain.y + EPSILON)) {\n    return ((value - domain.x) / (domain.y - domain.x)) * (range.y - range.x) + range.x;\n  }\n  return -1.;\n}\n\nvoid main(void) {\n  vec2 clrDomain = colorDomainValid ? colorDomain : vec2(colorData.maxMinCount.a, colorData.maxMinCount.r);\n  vec4 color = quantizeScale(clrDomain, colorRange, colors.r);\n\n  float elevation = 0.0;\n\n  if (extruded) {\n    vec2 elvDomain = elevationDomainValid ? elevationDomain : vec2(elevationData.maxMinCount.a, elevationData.maxMinCount.r);\n    elevation = linearScale(elvDomain, elevationRange, elevations.r);\n    elevation = elevation  * (positions.z + 1.0) / 2.0 * elevationScale;\n  }\n  float shouldRender = float(color.r > 0.0 && elevations.r >= 0.0);\n  float dotRadius = cellSize / 2. * coverage * shouldRender;\n\n  int yIndex = (gl_InstanceID / gridSize[0]);\n  int xIndex = gl_InstanceID - (yIndex * gridSize[0]);\n\n  vec2 instancePositionXFP64 = mul_fp64(vec2(gridOffset[0], gridOffsetLow[0]), vec2(float(xIndex), 0.));\n  instancePositionXFP64 = sum_fp64(instancePositionXFP64, vec2(gridOrigin[0], gridOriginLow[0]));\n  vec2 instancePositionYFP64 = mul_fp64(vec2(gridOffset[1], gridOffsetLow[1]), vec2(float(yIndex), 0.));\n  instancePositionYFP64 = sum_fp64(instancePositionYFP64, vec2(gridOrigin[1], gridOriginLow[1]));\n\n  vec3 centroidPosition = vec3(instancePositionXFP64[0], instancePositionYFP64[0], elevation);\n  vec3 centroidPosition64Low = vec3(instancePositionXFP64[1], instancePositionYFP64[1], 0.0);\n  geometry.worldPosition = centroidPosition;\n  vec3 pos = vec3(project_size(positions.xy + offset) * dotRadius, 0.);\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n\n  vec3 normals_commonspace = project_normal(normals);\n\n   if (extruded) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, normals_commonspace);\n    vColor = vec4(lightColor, color.a * opacity) / 255.;\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity) / 255.;\n  }\n}\n",fs:"#version 300 es\n#define SHADER_NAME gpu-grid-cell-layer-fragment-shader\n\nprecision highp float;\n\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  fragColor = vColor;\n  fragColor = picking_filterColor(fragColor);\n}\n",modules:[LT,GT,KT,kD]})}initializeState(t){let{gl:e}=t;this.getAttributeManager().addInstanced({colors:{size:4,noAlloc:!0},elevations:{size:4,noAlloc:!0}});const n=this._getModel(e);this._setupUniformBuffer(n),this.setState({model:n})}_getModel(t){return new oM(t,{...this.getShaders(),id:this.props.id,geometry:new fO,isInstanced:!0})}draw(t){let{uniforms:e}=t;const{cellSize:n,offset:r,extruded:i,elevationScale:o,coverage:s,gridSize:a,gridOrigin:l,gridOffset:c,elevationRange:u,colorMaxMinBuffer:d,elevationMaxMinBuffer:h}=this.props,f=[tb(l[0]),tb(l[1])],p=[tb(c[0]),tb(c[1])],g=this.getDomainUniforms(),m=DF(this.props.colorRange);this.bindUniformBuffers(d,h),this.state.model.setUniforms(e).setUniforms(g).setUniforms({cellSize:n,offset:r,extruded:i,elevationScale:o,coverage:s,gridSize:a,gridOrigin:l,gridOriginLow:f,gridOffset:c,gridOffsetLow:p,colorRange:m,elevationRange:u}).draw(),this.unbindUniformBuffers(d,h)}bindUniformBuffers(t,e){t.bind({target:35345,index:0}),e.bind({target:35345,index:1})}unbindUniformBuffers(t,e){t.unbind({target:35345,index:0}),e.unbind({target:35345,index:1})}getDomainUniforms(){const{colorDomain:t,elevationDomain:e}=this.props,n={};return null!==t?(n.colorDomainValid=!0,n.colorDomain=t):n.colorDomainValid=!1,null!==e?(n.elevationDomainValid=!0,n.elevationDomain=e):n.elevationDomainValid=!1,n}_setupUniformBuffer(t){const e=this.context.gl,n=t.program.handle,r=e.getUniformBlockIndex(n,"ColorData"),i=e.getUniformBlockIndex(n,"ElevationData");e.uniformBlockBinding(n,r,0),e.uniformBlockBinding(n,i,1)}}ge(NF,"layerName","GPUGridCellLayer"),ge(NF,"defaultProps",FF);const jF={colorDomain:null,colorRange:LF,getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",elevationDomain:null,elevationRange:[0,1e3],getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationScale:{type:"number",min:0,value:1},cellSize:{type:"number",min:1,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:{type:"accessor",value:t=>t.position},extruded:!1,material:!0},zF={data:{props:["cellSize","colorAggregation","elevationAggregation"]}},UF="positions";class VF extends TF{initializeState(t){let{gl:e}=t;const n=nF.isSupported(e);n||Rg.error("GPUGridLayer is not supported on this browser, use GridLayer instead")(),super.initializeAggregationLayer({dimensions:zF}),this.setState({gpuAggregation:!0,projectPoints:!1,isSupported:n,weights:{color:{needMin:!0,needMax:!0,combineMaxMin:!0,maxMinBuffer:new UA(e,{byteLength:16,accessor:{size:4,type:5126,divisor:1}})},elevation:{needMin:!0,needMax:!0,combineMaxMin:!0,maxMinBuffer:new UA(e,{byteLength:16,accessor:{size:4,type:5126,divisor:1}})}},positionAttributeName:"positions"});this.getAttributeManager().add({[UF]:{size:3,accessor:"getPosition",type:5130,fp64:this.use64bitPositions()},color:{size:3,accessor:"getColorWeight"},elevation:{size:3,accessor:"getElevationWeight"}})}updateState(t){if(!1===this.state.isSupported)return;super.updateState(t);const{aggregationDirty:e}=this.state;e&&this.setState({gridHash:null})}getHashKeyForIndex(t){const{numRow:e,numCol:n,boundingBox:r,gridOffset:i}=this.state,o=[n,e],s=[r.xMin,r.yMin],a=[i.xOffset,i.yOffset],l=Math.floor(t/o[0]),c=t-l*o[0],u=Math.floor((l*a[1]+s[1]+90+a[1]/2)/a[1]),d=Math.floor((c*a[0]+s[0]+180+a[0]/2)/a[0]);return"".concat(u,"-").concat(d)}getPositionForIndex(t){const{numRow:e,numCol:n,boundingBox:r,gridOffset:i}=this.state,o=[n,e],s=[r.xMin,r.yMin],a=[i.xOffset,i.yOffset],l=Math.floor(t/o[0]);return[(t-l*o[0])*a[0]+s[0],l*a[1]+s[1]]}getPickingInfo(t){let{info:e,mode:n}=t;const{index:r}=e;let i=null;if(r>=0){const{gpuGridAggregator:t}=this.state,e=this.getPositionForIndex(r),o=nF.getAggregationData({pixelIndex:r,...t.getData("color")}),s=nF.getAggregationData({pixelIndex:r,...t.getData("elevation")});if(i={colorValue:o.cellWeight,elevationValue:s.cellWeight,count:o.cellCount||s.cellCount,position:e,totalCount:o.totalCount||s.totalCount},"hover"!==n){const{props:t}=this;let{gridHash:e}=this.state;if(!e){const{gridOffset:n,translation:r,boundingBox:i}=this.state,{viewport:o}=this.context;e=MF(t,{gridOffset:n,attributes:this.getAttributes(),viewport:o,translation:r,boundingBox:i}).gridHash,this.setState({gridHash:e})}const n=e[this.getHashKeyForIndex(r)];Object.assign(i,n)}}return e.picked=Boolean(i),e.object=i,e}renderLayers(){if(!this.state.isSupported)return null;const{elevationScale:t,extruded:e,cellSize:n,coverage:r,material:i,elevationRange:o,colorDomain:s,elevationDomain:a}=this.props,{weights:l,numRow:c,numCol:u,gridOrigin:d,gridOffset:h}=this.state,{color:f,elevation:p}=l,g=DF(this.props.colorRange);return new(this.getSubLayerClass("gpu-grid-cell",NF))({gridSize:[u,c],gridOrigin:d,gridOffset:[h.xOffset,h.yOffset],colorRange:g,elevationRange:o,colorDomain:s,elevationDomain:a,cellSize:n,coverage:r,material:i,elevationScale:t,extruded:e},this.getSubLayerProps({id:"gpu-grid-cell"}),{data:{attributes:{colors:f.aggregationBuffer,elevations:p.aggregationBuffer}},colorMaxMinBuffer:f.maxMinBuffer,elevationMaxMinBuffer:p.maxMinBuffer,numInstances:u*c})}finalizeState(t){const{color:e,elevation:n}=this.state.weights;[e,n].forEach((t=>{const{aggregationBuffer:e,maxMinBuffer:n}=t;n.delete(),null===e||void 0===e||e.delete()})),super.finalizeState(t)}updateAggregationState(t){const{props:e,oldProps:n}=t,{cellSize:r,coordinateSystem:i}=e,{viewport:o}=this.context,s=n.cellSize!==r,{dimensions:a}=this.state,l=this.isAttributeChanged(UF),c=l||this.isAttributeChanged();let{boundingBox:u}=this.state;if(l&&(u=oF(this.getAttributes(),this.getNumInstances()),this.setState({boundingBox:u})),l||s){const{gridOffset:t,translation:e,width:n,height:s,numCol:a,numRow:l}=lF(u,r,o,i);this.allocateResources(l,a),this.setState({gridOffset:t,translation:e,gridOrigin:[-1*e[0],-1*e[1]],width:n,height:s,numCol:a,numRow:l})}const d=c||this.isAggregationDirty(t,{dimension:a.data,compareAll:!0});d&&this._updateAccessors(t),this.setState({aggregationDataDirty:d})}_updateAccessors(t){const{colorAggregation:e,elevationAggregation:n}=t.props,{color:r,elevation:i}=this.state.weights;r.operation=RD[e],i.operation=RD[n]}}ge(VF,"layerName","GPUGridLayer"),ge(VF,"defaultProps",jF);class GF extends TL{getGeometry(t){return new fO}draw(t){let{uniforms:e}=t;const{elevationScale:n,extruded:r,offset:i,coverage:o,cellSize:s,angle:a,radiusUnits:l}=this.props;this.state.model.setUniforms(e).setUniforms({radius:s/2,radiusUnits:fy[l],angle:a,offset:i,extruded:r,coverage:o,elevationScale:n,edgeDistance:1,isWireframe:!1}).draw()}}function WF(){}ge(GF,"layerName","GridCellLayer"),ge(GF,"defaultProps",{cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}});const HF=["getBins","getDomain","getScaleFunc"],JF=[{key:"fillColor",accessor:"getFillColor",pickingInfo:"colorValue",getBins:{triggers:{value:{prop:"getColorValue",updateTrigger:"getColorValue"},weight:{prop:"getColorWeight",updateTrigger:"getColorWeight"},aggregation:{prop:"colorAggregation"},filterData:{prop:"_filterData",updateTrigger:"_filterData"}}},getDomain:{triggers:{lowerPercentile:{prop:"lowerPercentile"},upperPercentile:{prop:"upperPercentile"},scaleType:{prop:"colorScaleType"}}},getScaleFunc:{triggers:{domain:{prop:"colorDomain"},range:{prop:"colorRange"}},onSet:{props:"onSetColorDomain"}},nullValue:[0,0,0,0]},{key:"elevation",accessor:"getElevation",pickingInfo:"elevationValue",getBins:{triggers:{value:{prop:"getElevationValue",updateTrigger:"getElevationValue"},weight:{prop:"getElevationWeight",updateTrigger:"getElevationWeight"},aggregation:{prop:"elevationAggregation"},filterData:{prop:"_filterData",updateTrigger:"_filterData"}}},getDomain:{triggers:{lowerPercentile:{prop:"elevationLowerPercentile"},upperPercentile:{prop:"elevationUpperPercentile"},scaleType:{prop:"elevationScaleType"}}},getScaleFunc:{triggers:{domain:{prop:"elevationDomain"},range:{prop:"elevationRange"}},onSet:{props:"onSetElevationDomain"}},nullValue:-1}],KF=t=>t.cellSize;class XF{constructor(t){this.state={layerData:{},dimensions:{}},this.changeFlags={},this.dimensionUpdaters={},this._getCellSize=t.getCellSize||KF,this._getAggregator=t.getAggregator,this._addDimension(t.dimensions||JF)}static defaultDimensions(){return JF}updateState(t,e){const{oldProps:n,props:r,changeFlags:i}=t;this.updateGetValueFuncs(n,r,i);const o=this.needsReProjectPoints(n,r,i);let s=!1;if(i.dataChanged||o)this.getAggregatedData(r,e),s=!0;else{(this.getDimensionChanges(n,r,i)||[]).forEach((t=>"function"===typeof t&&t())),s=!0}return this.setState({aggregationDirty:s}),this.state}setState(t){this.state={...this.state,...t}}setDimensionState(t,e){this.setState({dimensions:{...this.state.dimensions,[t]:{...this.state.dimensions[t],...e}}})}normalizeResult(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.hexagons?{data:t.hexagons,...t}:t.layerData?{data:t.layerData,...t}:t}getAggregatedData(t,e){const n=this._getAggregator(t)(t,e);this.setState({layerData:this.normalizeResult(n)}),this.changeFlags={layerData:!0},this.getSortedBins(t)}updateGetValueFuncs(t,e,n){for(const r in this.dimensionUpdaters){const{value:i,weight:o,aggregation:s}=this.dimensionUpdaters[r].getBins.triggers;let a=e[i.prop];this.needUpdateDimensionStep(this.dimensionUpdaters[r].getBins,t,e,n)&&(a=a?FD(a,{data:e.data}):DD(e[s.prop],e[o.prop],{data:e.data})),a&&this.setDimensionState(r,{getValue:a})}}needsReProjectPoints(t,e,n){return this._getCellSize(t)!==this._getCellSize(e)||this._getAggregator(t)!==this._getAggregator(e)||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPosition)}addDimension(t){this._addDimension(t)}_addDimension(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{const{key:e}=t;this.dimensionUpdaters[e]=this.getDimensionUpdaters(t),this.state.dimensions[e]={getValue:null,domain:null,sortedBins:null,scaleFunc:WF}}))}getDimensionUpdaters(t){let{key:e,accessor:n,pickingInfo:r,getBins:i,getDomain:o,getScaleFunc:s,nullValue:a}=t;return{key:e,accessor:n,pickingInfo:r,getBins:{updater:this.getDimensionSortedBins,...i},getDomain:{updater:this.getDimensionValueDomain,...o},getScaleFunc:{updater:this.getDimensionScale,...s},attributeAccessor:this.getSubLayerDimensionAttribute(e,a)}}needUpdateDimensionStep(t,e,n,r){return Object.values(t.triggers).some((t=>t.updateTrigger?r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged[t.updateTrigger]):e[t.prop]!==n[t.prop]))}getDimensionChanges(t,e,n){const r=[];for(const i in this.dimensionUpdaters){const o=HF.find((r=>this.needUpdateDimensionStep(this.dimensionUpdaters[i][r],t,e,n)));o&&r.push(this.dimensionUpdaters[i][o].updater.bind(this,e,this.dimensionUpdaters[i]))}return r.length?r:null}getUpdateTriggers(t){const e=t.updateTriggers||{},n={};for(const r in this.dimensionUpdaters){const{accessor:i}=this.dimensionUpdaters[r];n[i]={},HF.forEach((o=>{Object.values(this.dimensionUpdaters[r][o].triggers).forEach((r=>{let{prop:o,updateTrigger:s}=r;if(s){const t=e[s];"object"!==typeof t||Array.isArray(t)?void 0!==t&&(n[i][o]=t):Object.assign(n[i],t)}else n[i][o]=t[o]}))}))}return n}getSortedBins(t){for(const e in this.dimensionUpdaters)this.getDimensionSortedBins(t,this.dimensionUpdaters[e])}getDimensionSortedBins(t,e){const{key:n}=e,{getValue:r}=this.state.dimensions[n],i=new PF(this.state.layerData.data||[],{getValue:r,filterData:t._filterData});this.setDimensionState(n,{sortedBins:i}),this.getDimensionValueDomain(t,e)}getDimensionValueDomain(t,e){const{getDomain:n,key:r}=e,{triggers:{lowerPercentile:i,upperPercentile:o,scaleType:s}}=n,a=this.state.dimensions[r].sortedBins.getValueDomainByScale(t[s.prop],[t[i.prop],t[o.prop]]);this.setDimensionState(r,{valueDomain:a}),this.getDimensionScale(t,e)}getDimensionScale(t,e){const{key:n,getScaleFunc:r,getDomain:i}=e,{domain:o,range:s}=r.triggers,{scaleType:a}=i.triggers,{onSet:l}=r,c=t[s.prop],u=t[o.prop]||this.state.dimensions[n].valueDomain,d=function(t){switch(t){case"quantize":default:return hF;case"linear":return fF;case"quantile":return pF;case"ordinal":return vF}}(a&&t[a.prop]),h=d(u,c);"object"===typeof l&&"function"===typeof t[l.props]&&t[l.props](h.domain()),this.setDimensionState(n,{scaleFunc:h})}getSubLayerDimensionAttribute(t,e){return n=>{const{sortedBins:r,scaleFunc:i}=this.state.dimensions[t],o=r.binMap[n.index];if(o&&0===o.counts)return e;const s=o&&o.value,a=i.domain();return s>=a[0]&&s<=a[a.length-1]?i(s):e}}getSubLayerAccessors(t){const e={};for(const n in this.dimensionUpdaters){const{accessor:r}=this.dimensionUpdaters[n];e[r]=this.getSubLayerDimensionAttribute(t,n)}return e}getPickingInfo(t){let{info:e}=t;let n=null;if(e.picked&&e.index>-1){const t=this.state.layerData.data[e.index],r={};for(const e in this.dimensionUpdaters){const{pickingInfo:n}=this.dimensionUpdaters[e],{sortedBins:i}=this.state.dimensions[e],o=i.binMap[t.index]&&i.binMap[t.index].value;r[n]=o}n=Object.assign(r,t,{points:t.filteredPoints||t.points})}return e.picked=Boolean(n),e.object=n,e}getAccessor(t){return this.dimensionUpdaters.hasOwnProperty(t)?this.dimensionUpdaters[t].attributeAccessor:WF}}function qF(){}const YF={colorDomain:null,colorRange:LF,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",lowerPercentile:{type:"number",min:0,max:100,value:0},upperPercentile:{type:"number",min:0,max:100,value:100},colorScaleType:"quantize",onSetColorDomain:qF,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",min:0,max:100,value:0},elevationUpperPercentile:{type:"number",min:0,max:100,value:100},elevationScale:{type:"number",min:0,value:1},elevationScaleType:"linear",onSetElevationDomain:qF,gridAggregator:MF,cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:{type:"accessor",value:t=>t.position},extruded:!1,material:!0,_filterData:{type:"function",value:null,optional:!0}};class QF extends uF{initializeState(){const t=new XF({getAggregator:t=>t.gridAggregator,getCellSize:t=>t.cellSize});this.state={cpuAggregator:t,aggregatorState:t.state};this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"}})}updateState(t){super.updateState(t),this.setState({aggregatorState:this.state.cpuAggregator.updateState(t,{viewport:this.context.viewport,attributes:this.getAttributes(),numInstances:this.getNumInstances()})})}getPickingInfo(t){let{info:e}=t;return this.state.cpuAggregator.getPickingInfo({info:e})}_onGetSublayerColor(t){return this.state.cpuAggregator.getAccessor("fillColor")(t)}_onGetSublayerElevation(t){return this.state.cpuAggregator.getAccessor("elevation")(t)}_getSublayerUpdateTriggers(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}renderLayers(){const{elevationScale:t,extruded:e,cellSize:n,coverage:r,material:i,transitions:o}=this.props,{cpuAggregator:s}=this.state,a=this.getSubLayerClass("grid-cell",GF),l=this._getSublayerUpdateTriggers();return new a({cellSize:n,coverage:r,material:i,elevationScale:t,extruded:e,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:o&&{getFillColor:o.getColorValue||o.getColorWeight,getElevation:o.getElevationValue||o.getElevationWeight}},this.getSubLayerProps({id:"grid-cell",updateTriggers:l}),{data:s.state.layerData.data})}}ge(QF,"layerName","CPUGridLayer"),ge(QF,"defaultProps",YF);const ZF={...VF.defaultProps,...QF.defaultProps,gpuAggregation:!1};class $F extends Fk{constructor(){super(...arguments),ge(this,"state",void 0)}initializeState(){this.state={useGPUAggregation:!0}}updateState(t){let{props:e}=t;this.setState({useGPUAggregation:this.canUseGPUAggregation(e)})}renderLayers(){const{data:t,updateTriggers:e}=this.props,n=this.state.useGPUAggregation?"GPU":"CPU";return new(this.state.useGPUAggregation?this.getSubLayerClass("GPU",VF):this.getSubLayerClass("CPU",QF))(this.props,this.getSubLayerProps({id:n,updateTriggers:e}),{data:t})}canUseGPUAggregation(t){const{gpuAggregation:e,lowerPercentile:n,upperPercentile:r,getColorValue:i,getElevationValue:o,colorScaleType:s}=t;return!!e&&(!!nF.isSupported(this.context.gl)&&(0===n&&100===r&&(null===i&&null===o&&("quantile"!==s&&"ordinal"!==s))))}}ge($F,"layerName","GridLayer"),ge($F,"defaultProps",ZF);const tN=new Float32Array(12);function eN(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0;for(const r of t)for(let t=0;t<e;t++)tN[n++]=r[t]||0;return tN}class nN extends QM{getShaders(){return{vs:"#define SHADER_NAME heatp-map-layer-vertex-shader\n\nuniform sampler2D maxTexture;\nuniform float intensity;\nuniform vec2 colorDomain;\nuniform float threshold;\nuniform float aggregationMode;\n\nattribute vec3 positions;\nattribute vec2 texCoords;\n\nvarying vec2 vTexCoords;\nvarying float vIntensityMin;\nvarying float vIntensityMax;\n\nvoid main(void) {\n  gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));\n  vTexCoords = texCoords;\n  vec4 maxTexture = texture2D(maxTexture, vec2(0.5));\n  float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;\n  float minValue = maxValue * threshold;\n  if (colorDomain[1] > 0.) {\n    maxValue = colorDomain[1];\n    minValue = colorDomain[0];\n  }\n  vIntensityMax = intensity / maxValue;\n  vIntensityMin = intensity / minValue;\n}\n",fs:"#define SHADER_NAME triangle-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D texture;\nuniform sampler2D colorTexture;\nuniform float aggregationMode;\n\nvarying vec2 vTexCoords;\nvarying float vIntensityMin;\nvarying float vIntensityMax;\n\nvec4 getLinearColor(float value) {\n  float factor = clamp(value * vIntensityMax, 0., 1.);\n  vec4 color = texture2D(colorTexture, vec2(factor, 0.5));\n  color.a *= min(value * vIntensityMin, 1.0);\n  return color;\n}\n\nvoid main(void) {\n  vec4 weights = texture2D(texture, vTexCoords);\n  float weight = weights.r;\n\n  if (aggregationMode > 0.5) {\n    weight /= max(1.0, weights.a);\n  }\n  if (weight <= 0.) {\n     discard;\n  }\n\n  vec4 linearColor = getLinearColor(weight);\n  linearColor.a *= opacity;\n  gl_FragColor =linearColor;\n}\n",modules:[LT]}}initializeState(t){let{gl:e}=t;this.getAttributeManager().add({positions:{size:3,noAlloc:!0},texCoords:{size:2,noAlloc:!0}}),this.setState({model:this._getModel(e)})}_getModel(t){const{vertexCount:e}=this.props;return new oM(t,{...this.getShaders(),id:this.props.id,geometry:new qT({drawMode:6,vertexCount:e})})}draw(t){let{uniforms:e}=t;const{model:n}=this.state,{texture:r,maxTexture:i,colorTexture:o,intensity:s,threshold:a,aggregationMode:l,colorDomain:c}=this.props;n.setUniforms({...e,texture:r,maxTexture:i,colorTexture:o,intensity:s,threshold:a,aggregationMode:l,colorDomain:c}).draw()}}ge(nN,"layerName","TriangleLayer");const rN={mipmaps:!1,parameters:{10240:9729,10241:9729,10242:33071,10243:33071},dataFormat:6408},iN=[0,0],oN={SUM:0,MEAN:1},sN={getPosition:{type:"accessor",value:t=>t.position},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:LF,threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},aN=[v_,A_],lN=[E_,b_],cN={data:{props:["radiusPixels"]}};class uN extends uF{constructor(){super(...arguments),ge(this,"state",void 0)}initializeState(){const{gl:t}=this.context;if(!D_(t,aN))return this.setState({supported:!1}),void Rg.error("HeatmapLayer: ".concat(this.id," is not supported on this browser"))();super.initializeAggregationLayer(cN),this.setState({supported:!0,colorDomain:iN}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState(t){let{changeFlags:e}=t;return e.somethingChanged}updateState(t){this.state.supported&&(super.updateState(t),this._updateHeatmapState(t))}_updateHeatmapState(t){const{props:e,oldProps:n}=t,r=this._getChangeFlags(t);(r.dataChanged||r.viewportChanged)&&(r.boundsChanged=this._updateBounds(r.dataChanged),this._updateTextureRenderingBounds()),r.dataChanged||r.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):r.viewportZoomChanged&&this._debouncedUpdateWeightmap(),e.colorRange!==n.colorRange&&this._updateColorTexture(t),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:t.context.viewport.zoom})}renderLayers(){if(!this.state.supported)return[];const{weightsTexture:t,triPositionBuffer:e,triTexCoordBuffer:n,maxWeightsTexture:r,colorTexture:i,colorDomain:o}=this.state,{updateTriggers:s,intensity:a,threshold:l,aggregation:c}=this.props;return new(this.getSubLayerClass("triangle",nN))(this.getSubLayerProps({id:"triangle-layer",updateTriggers:s}),{coordinateSystem:dy.DEFAULT,data:{attributes:{positions:e,texCoords:n}},vertexCount:4,maxTexture:r,colorTexture:i,aggregationMode:oN[c]||0,texture:t,intensity:a,threshold:l,colorDomain:o})}finalizeState(t){super.finalizeState(t);const{weightsTransform:e,weightsTexture:n,maxWeightTransform:r,maxWeightsTexture:i,triPositionBuffer:o,triTexCoordBuffer:s,colorTexture:a,updateTimer:l}=this.state;null===e||void 0===e||e.delete(),null===n||void 0===n||n.delete(),null===r||void 0===r||r.delete(),null===i||void 0===i||i.delete(),null===o||void 0===o||o.delete(),null===s||void 0===s||s.delete(),null===a||void 0===a||a.delete(),l&&clearTimeout(l)}_getAttributeManager(){return new dM(this.context.gl,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(t){const e={},{dimensions:n}=this.state;e.dataChanged=this.isAttributeChanged()||this.isAggregationDirty(t,{compareAll:!0,dimension:n.data}),e.viewportChanged=t.changeFlags.viewportChanged;const{zoom:r}=this.state;return t.context.viewport&&t.context.viewport.zoom===r||(e.viewportZoomChanged=!0),e}_createTextures(){const{gl:t}=this.context,{textureSize:e,format:n,type:r}=this.state;this.setState({weightsTexture:new qA(t,{width:e,height:e,format:n,type:r,...rN}),maxWeightsTexture:new qA(t,{format:n,type:r,...rN})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}_setupTextureParams(){const{gl:t}=this.context,{weightsTextureSize:e}=this.props,n=Math.min(e,sA(t,3379)),r=D_(t,lN),{format:i,type:o}=function(t){let{gl:e,floatTargetSupport:n}=t;return n?{format:vx(e)?34836:6408,type:5126}:{format:6408,type:5121}}({gl:t,floatTargetSupport:r}),s=r?1:1/255;this.setState({textureSize:n,format:i,type:o,weightsScale:s}),r||Rg.warn("HeatmapLayer: ".concat(this.id," rendering to float texture not supported, fallingback to low precession format"))()}getShaders(t){return super.getShaders("max-weights-transform"===t?{vs:"attribute vec4 inTexture;\nvarying vec4 outTexture;\n\nvoid main()\n{\noutTexture = inTexture;\ngl_Position = vec4(0, 0, 0, 1.);\ngl_PointSize = 1.0;\n}\n",_fs:"varying vec4 outTexture;\nvoid main() {\n  gl_FragColor = outTexture;\n  gl_FragColor.g = outTexture.r / max(1.0, outTexture.a);\n}\n"}:{vs:"attribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float weights;\nvarying vec4 weightsTexture;\nuniform float radiusPixels;\nuniform float textureWidth;\nuniform vec4 commonBounds;\nuniform float weightsScale;\nvoid main()\n{\n  weightsTexture = vec4(weights * weightsScale, 0., 0., 1.);\n\n  float radiusTexels  = project_pixel_size(radiusPixels) * textureWidth / (commonBounds.z - commonBounds.x);\n  gl_PointSize = radiusTexels * 2.;\n\n  vec3 commonPosition = project_position(positions, positions64Low);\n  gl_Position.xy = (commonPosition.xy - commonBounds.xy) / (commonBounds.zw - commonBounds.xy) ;\n  gl_Position.xy = (gl_Position.xy * 2.) - (1.);\n}\n",_fs:"varying vec4 weightsTexture;\nfloat gaussianKDE(float u){\n  return pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);\n}\nvoid main()\n{\n  float dist = length(gl_PointCoord - vec2(0.5, 0.5));\n  if (dist > 0.5) {\n    discard;\n  }\n  gl_FragColor = weightsTexture * gaussianKDE(2. * dist);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}_createWeightsTransform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;const{gl:n}=this.context;let{weightsTransform:r}=this.state;const{weightsTexture:i}=this.state;null===(e=r)||void 0===e||e.delete(),r=new sM(n,{id:"".concat(this.id,"-weights-transform"),elementCount:1,_targetTexture:i,_targetTextureVarying:"weightsTexture",...t}),this.setState({weightsTransform:r})}_setupResources(){const{gl:t}=this.context;this._createTextures();const{textureSize:e,weightsTexture:n,maxWeightsTexture:r}=this.state,i=this.getShaders("weights-transform");this._createWeightsTransform(i);const o=this.getShaders("max-weights-transform"),s=new sM(t,{id:"".concat(this.id,"-max-weights-transform"),_sourceTextures:{inTexture:n},_targetTexture:r,_targetTextureVarying:"outTexture",...o,elementCount:e*e});this.setState({weightsTexture:n,maxWeightsTexture:r,maxWeightTransform:s,zoom:null,triPositionBuffer:new UA(t,{byteLength:48,accessor:{size:3}}),triTexCoordBuffer:new UA(t,{byteLength:48,accessor:{size:2}})})}updateShaders(t){this._createWeightsTransform(t)}_updateMaxWeightValue(){const{maxWeightTransform:t}=this.state;t.run({parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32776}})}_updateBounds(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{viewport:e}=this.context,n=[e.unproject([0,0]),e.unproject([e.width,0]),e.unproject([e.width,e.height]),e.unproject([0,e.height])].map((t=>t.map(Math.fround))),r=function(t){const e=t.map((t=>t[0])),n=t.map((t=>t[1])),r=Math.min.apply(null,e),i=Math.max.apply(null,e);return[r,Math.min.apply(null,n),i,Math.max.apply(null,n)]}(n),i={visibleWorldBounds:r,viewportCorners:n};let o=!1;if(t||!this.state.worldBounds||(s=this.state.worldBounds,!((a=r)[0]>=s[0]&&a[2]<=s[2]&&a[1]>=s[1]&&a[3]<=s[3]))){const t=this._worldToCommonBounds(r),e=this._commonToWorldBounds(t);this.props.coordinateSystem===dy.LNGLAT&&(e[1]=Math.max(e[1],-85.051129),e[3]=Math.min(e[3],85.051129),e[0]=Math.max(e[0],-360),e[2]=Math.min(e[2],360));const n=this._worldToCommonBounds(e);i.worldBounds=e,i.normalizedCommonBounds=n,o=!0}var s,a;return this.setState(i),o}_updateTextureRenderingBounds(){const{triPositionBuffer:t,triTexCoordBuffer:e,normalizedCommonBounds:n,viewportCorners:r}=this.state,{viewport:i}=this.context;t.subData(eN(r,3));const o=r.map((t=>function(t,e){const[n,r,i,o]=e;return[(t[0]-n)/(i-n),(t[1]-r)/(o-r)]}(i.projectPosition(t),n)));e.subData(eN(o,2))}_updateColorTexture(t){const{colorRange:e}=t.props;let{colorTexture:n}=this.state;const r=DF(e,!1,Uint8Array);n?n.setImageData({data:r,width:e.length}):n=new qA(this.context.gl,{data:r,width:e.length,height:1,...rN}),this.setState({colorTexture:n})}_updateWeightmap(){const{radiusPixels:t,colorDomain:e,aggregation:n}=this.props,{weightsTransform:r,worldBounds:i,textureSize:o,weightsTexture:s,weightsScale:a}=this.state;this.state.isWeightMapDirty=!1;const l=this._worldToCommonBounds(i,{useLayerCoordinateSystem:!0});if(e&&"SUM"===n){const{viewport:t}=this.context,n=t.distanceScales.metersPerUnit[2]*(l[2]-l[0])/o;this.state.colorDomain=e.map((t=>t*n*a))}else this.state.colorDomain=e||iN;const c={radiusPixels:t,commonBounds:l,textureWidth:o,weightsScale:a};r.update({elementCount:this.getNumInstances()}),aA(this.context.gl,{clearColor:[0,0,0,0]},(()=>{r.run({uniforms:c,parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32774},clearRenderTarget:!0,attributes:this.getAttributes(),moduleSettings:this.getModuleSettings()})})),this._updateMaxWeightValue(),s.setParameters({10240:9729,10241:9729})}_debouncedUpdateWeightmap(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{updateTimer:e}=this.state;const{debounceTimeout:n}=this.props;t?(e=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(e),e=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),n)),this.setState({updateTimer:e})}_worldToCommonBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{useLayerCoordinateSystem:n=!1}=e,[r,i,o,s]=t,{viewport:a}=this.context,{textureSize:l}=this.state,{coordinateSystem:c}=this.props,u=n&&(c===dy.LNGLAT_OFFSETS||c===dy.METER_OFFSETS),d=u?a.projectPosition(this.props.coordinateOrigin):[0,0],h=2*l/a.scale;let f,p;return n&&!u?(f=this.projectPosition([r,i,0]),p=this.projectPosition([o,s,0])):(f=a.projectPosition([r,i,0]),p=a.projectPosition([o,s,0])),function(t,e,n){const[r,i,o,s]=t,a=o-r,l=s-i;let c=a,u=l;a/l<e/n?c=e/n*l:u=n/e*a,c<e&&(c=e,u=n);const d=(o+r)/2,h=(s+i)/2;return[d-c/2,h-u/2,d+c/2,h+u/2]}([f[0]-d[0],f[1]-d[1],p[0]-d[0],p[1]-d[1]],h,h)}_commonToWorldBounds(t){const[e,n,r,i]=t,{viewport:o}=this.context,s=o.unprojectPosition([e,n]),a=o.unprojectPosition([r,i]);return s.slice(0,2).concat(a.slice(0,2))}}ge(uN,"layerName","HeatmapLayer"),ge(uN,"defaultProps",sN);var dN=Math.PI/3,hN=[0,dN,2*dN,3*dN,4*dN,5*dN];function fN(t){return t[0]}function pN(t){return t[1]}function gN(){}const mN={colorDomain:null,colorRange:LF,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},colorScaleType:"quantize",onSetColorDomain:gN,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},elevationScaleType:"linear",onSetElevationDomain:gN,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function(t,e){const{data:n,radius:r}=t,{viewport:i,attributes:o}=e,s=n.length?function(t,e){const{attributes:n}=e,r=n.positions.value,{size:i}=n.positions.getAccessor();let o,s=1/0,a=1/0,l=-1/0,c=-1/0;for(o=0;o<i*t.length;o+=i){const t=r[o],e=r[o+1];Number.isFinite(t)&&Number.isFinite(e)&&(s=Math.min(t,s),l=Math.max(t,l),a=Math.min(e,a),c=Math.max(e,c))}return[s,a,l,c].every(Number.isFinite)?[(s+l)/2,(a+c)/2]:null}(n,e):null,a=function(t,e,n){const{unitsPerMeter:r}=e.getDistanceScales(n);return t*r[0]}(r,i,s),l=[],{iterable:c,objectInfo:u}=pP(n),d=o.positions.value,{size:h}=o.positions.getAccessor();for(const p of c){u.index++;const t=u.index*h,e=[d[t],d[t+1]];Number.isFinite(e[0])&&Number.isFinite(e[1])?l.push({screenCoord:i.projectFlat(e),source:p,index:u.index}):Rg.warn("HexagonLayer: invalid position")()}const f=function(){var t,e,n,r=0,i=0,o=1,s=1,a=fN,l=pN;function c(t){var r,i={},o=[],s=t.length;for(r=0;r<s;++r)if(!isNaN(u=+a.call(null,c=t[r],r,t))&&!isNaN(d=+l.call(null,c,r,t))){var c,u,d,h=Math.round(d/=n),f=Math.round(u=u/e-(1&h)/2),p=d-h;if(3*Math.abs(p)>1){var g=u-f,m=f+(u<f?-1:1)/2,v=h+(d<h?-1:1),b=u-m,y=d-v;g*g+p*p>b*b+y*y&&(f=m+(1&h?1:-1)/2,h=v)}var x=f+"-"+h,A=i[x];A?A.push(c):(o.push(A=i[x]=[c]),A.x=(f+(1&h)/2)*e,A.y=h*n)}return o}function u(t){var e=0,n=0;return hN.map((function(r){var i=Math.sin(r)*t,o=-Math.cos(r)*t,s=i-e,a=o-n;return e=i,n=o,[s,a]}))}return c.hexagon=function(e){return"m"+u(null==e?t:+e).join("l")+"z"},c.centers=function(){for(var a=[],l=Math.round(i/n),c=Math.round(r/e),u=l*n;u<s+t;u+=n,++l)for(var d=c*e+(1&l)*e/2;d<o+e/2;d+=e)a.push([d,u]);return a},c.mesh=function(){var e=u(t).slice(0,4).join("l");return c.centers().map((function(t){return"M"+t+"m"+e})).join("")},c.x=function(t){return arguments.length?(a=t,c):a},c.y=function(t){return arguments.length?(l=t,c):l},c.radius=function(r){return arguments.length?(e=2*(t=+r)*Math.sin(dN),n=1.5*t,c):t},c.size=function(t){return arguments.length?(r=i=0,o=+t[0],s=+t[1],c):[o-r,s-i]},c.extent=function(t){return arguments.length?(r=+t[0][0],i=+t[0][1],o=+t[1][0],s=+t[1][1],c):[[r,i],[o,s]]},c.radius(1)}().radius(a).x((t=>t.screenCoord[0])).y((t=>t.screenCoord[1]));return{hexagons:f(l).map(((t,e)=>({position:i.unprojectFlat([t.x,t.y]),points:t,index:e}))),radiusCommon:a}},getPosition:{type:"accessor",value:t=>t.position},material:!0,_filterData:{type:"function",value:null,optional:!0}};class vN extends uF{constructor(){super(...arguments),ge(this,"state",void 0)}initializeState(){const t=new XF({getAggregator:t=>t.hexagonAggregator,getCellSize:t=>t.radius});this.state={cpuAggregator:t,aggregatorState:t.state,vertices:null};this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"}})}updateState(t){if(super.updateState(t),t.changeFlags.propsOrDataChanged){const e=this.state.cpuAggregator.updateState(t,{viewport:this.context.viewport,attributes:this.getAttributes()});if(this.state.aggregatorState.layerData!==e.layerData){const{hexagonVertices:t}=e.layerData||{};this.setState({vertices:t&&this.convertLatLngToMeterOffset(t)})}this.setState({aggregatorState:e})}}convertLatLngToMeterOffset(t){const{viewport:e}=this.context;if(Array.isArray(t)&&6===t.length){const n=t[0],r=t[3],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],o=e.projectFlat(i),{metersPerUnit:s}=e.getDistanceScales(i);return t.map((t=>{const n=e.projectFlat(t);return[(n[0]-o[0])*s[0],(n[1]-o[1])*s[1]]}))}return Rg.error("HexagonLayer: hexagonVertices needs to be an array of 6 points")(),null}getPickingInfo(t){let{info:e}=t;return this.state.cpuAggregator.getPickingInfo({info:e})}_onGetSublayerColor(t){return this.state.cpuAggregator.getAccessor("fillColor")(t)}_onGetSublayerElevation(t){return this.state.cpuAggregator.getAccessor("elevation")(t)}_getSublayerUpdateTriggers(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}renderLayers(){const{elevationScale:t,extruded:e,coverage:n,material:r,transitions:i}=this.props,{aggregatorState:o,vertices:s}=this.state,a=this.getSubLayerClass("hexagon-cell",TL),l=this._getSublayerUpdateTriggers();return new a({...s?{vertices:s,radius:1}:{radius:o.layerData.radiusCommon||1,radiusUnits:"common",angle:90},diskResolution:6,elevationScale:t,extruded:e,coverage:n,material:r,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:i&&{getFillColor:i.getColorValue||i.getColorWeight,getElevation:i.getElevationValue||i.getElevationWeight}},this.getSubLayerProps({id:"hexagon-cell",updateTriggers:l}),{data:o.layerData.data})}}ge(vN,"layerName","HexagonLayer"),ge(vN,"defaultProps",mN);const bN={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[jT]};class yN{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e}=t;this.id=e||SA(this.constructor.name),this.display=!0,this.position=new Qv,this.rotation=new Qv,this.scale=new Qv(1,1,1),this.matrix=new Mb,this.userData={},this.props={},this._setScenegraphNodeProps(t)}delete(){}setProps(t){return this._setScenegraphNodeProps(t),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(t){return xA(3===t.length,"setPosition requires vector argument"),this.position=t,this}setRotation(t){return xA(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}setScale(t){return xA(3===t.length,"setScale requires vector argument"),this.scale=t,this}setMatrix(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.matrix.copy(t):this.matrix=t}setMatrixComponents(t){let{position:e,rotation:n,scale:r,update:i=!0}=t;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),i&&this.updateMatrix(),this}updateMatrix(){const t=this.position,e=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(n),this}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:e,rotation:n,scale:r}=t;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(t,e){xA(t),e=e||this.matrix;const n=new Mb(t).multiplyRight(e),r=n.invert(),i=r.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}_setScenegraphNodeProps(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}class xN extends yN{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Array.isArray(t)?{children:t}:t;const{children:e=[]}=t;hx.assert(e.every((t=>t instanceof yN)),"every child must an instance of ScenegraphNode"),super(t),this.children=e}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(t){const e=this.children,n=e.indexOf(t);return n>-1&&e.splice(n,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach((t=>t.delete())),this.removeAll(),super.delete()}getBounds(){const t=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse(((e,n)=>{let{worldMatrix:r}=n;const i=e.getBounds();if(!i)return;const[o,s]=i,a=new Qv(o).add(s).divide([2,2,2]);r.transformAsPoint(a,a);const l=new Qv(s).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let c=0;c<8;c++){const e=new Qv(1&c?-1:1,2&c?-1:1,4&c?-1:1).multiply(l).add(a);for(let n=0;n<3;n++)t[0][n]=Math.min(t[0][n],e[n]),t[1][n]=Math.max(t[1][n],e[n])}})),Number.isFinite(t[0][0])?t:null}traverse(t){let{worldMatrix:e=new Mb}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Mb(e).multiplyRight(this.matrix);for(const r of this.children)r instanceof xN?r.traverse(t,{worldMatrix:n}):t(r,{worldMatrix:n})}}const AN={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_N={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function wN(t){if(!t._animation){const e=_N[t.componentType],n=AN[t.type],r=n*t.count,{buffer:i,byteOffset:o}=t.bufferView.data,s=new e(i,o+(t.byteOffset||0),r);if(1===n)t._animation=Array.from(s);else{const e=[];for(let t=0;t<s.length;t+=n)e.push(Array.from(s.slice(t,t+n)));t._animation=e}}return t._animation}const SN=new Mb;const CN=new QI;function EN(t,e,n,r){let{input:i,interpolation:o,output:s}=e;const a=t%i[i.length-1],l=i.findIndex((t=>t>=a)),c=Math.max(0,l-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:hx.warn("Bad animation path ".concat(r))()}xA(n[r].length===s[c].length);const u=i[c],d=i[l];switch(o){case"STEP":!function(t,e,n){for(let r=0;r<n.length;r++)t[e][r]=n[r]}(n,r,s[c]);break;case"LINEAR":if(d>u){const t=(a-u)/(d-u);!function(t,e,n,r,i){if("rotation"===e){CN.slerp({start:n,target:r,ratio:i});for(let n=0;n<CN.length;n++)t[e][n]=CN[n]}else for(let o=0;o<n.length;o++)t[e][o]=i*r[o]+(1-i)*n[o]}(n,r,s[c],s[l],t)}break;case"CUBICSPLINE":if(d>u){const t=(a-u)/(d-u),e=d-u;!function(t,e,n){let{p0:r,outTangent0:i,inTangent1:o,p1:s,tDiff:a,ratio:l}=n;for(let c=0;c<t[e].length;c++){const n=i[c]*a,u=o[c]*a;t[e][c]=(2*Math.pow(l,3)-3*Math.pow(l,2)+1)*r[c]+(Math.pow(l,3)-2*Math.pow(l,2)+l)*n+(-2*Math.pow(l,3)+3*Math.pow(l,2))*s[c]+(Math.pow(l,3)-Math.pow(l,2))*u}}(n,r,{p0:s[3*c+1],outTangent0:s[3*c+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:e,ratio:t})}break;default:hx.warn("Interpolation ".concat(o," not supported"))()}}class PN{constructor(t){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,t)}animate(t){if(!this.playing)return;const e=(t/1e3-this.startTime)*this.speed;this.channels.forEach((t=>{let{sampler:n,target:r,path:i}=t;EN(e,n,r,i),function(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=SN.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(r,r._node)}))}}class MN{constructor(t){this.animations=t.animations.map(((e,n)=>{const r=e.name||"Animation-".concat(n),i=e.samplers.map((e=>{let{input:n,interpolation:r="LINEAR",output:i}=e;return{input:wN(t.accessors[n]),interpolation:r,output:wN(t.accessors[i])}})),o=e.channels.map((e=>{let{sampler:n,target:r}=e;return{sampler:i[n],target:t.nodes[r.node],path:r.path}}));return new PN({name:r,channels:o})}))}animate(t){this.setTime(t)}setTime(t){this.animations.forEach((e=>e.animate(t)))}getAnimations(){return this.animations}}class TN extends yN{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.onBeforeRender=null,this.AfterRender=null,t instanceof oM?(this.model=t,this._setModelNodeProps(e)):this.model=new oM(t,e),this.bounds=null,this.managedResources=e.managedResources||[]}setProps(t){return super.setProps(t),this._setModelNodeProps(t),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach((t=>t.delete())),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(t){this.model.setProps(t)}}class ON{constructor(t,e){let{attributes:n,material:r,pbrDebug:i,imageBasedLightingEnvironment:o,lights:s,useTangents:a}=e;this.gl=t,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},L_(t,R_)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),i&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(n.NORMAL,"HAS_NORMALS"),this.defineIfPresent(n.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(n.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(s,"USE_LIGHTS"),this.defineIfPresent(i,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(t,e){t&&(this.defines[e]=1)}parseTexture(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},i=t.texture.source.image;let o,s={};i.compressed?(o=i,s={[this.gl.TEXTURE_MIN_FILTER]:i.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:i};const a=new qA(this.gl,{id:t.name||t.id,parameters:{...r,...s},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[e]=a,this.defineIfPresent(n,n),this.generatedTextures.push(a)}parsePbrMetallicRoughness(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:e=1,roughnessFactor:n=1}=t;this.uniforms.u_MetallicRoughnessValues=[e,n]}parseMaterial(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:e=1}=t.normalTexture;this.uniforms.u_NormalScale=e}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:e=1}=t.occlusionTexture;this.uniforms.u_OcclusionStrength=e}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){const{alphaCutoff:e=.5}=t;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=e}else"BLEND"===t.alphaMode&&(hx.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach((t=>t.delete()))}}function kN(t,e){return vx(t)?"#version 300 es\n".concat(e):e}const RN={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},IN={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class BN{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.options=Object.assign({},IN,e)}instantiate(t){this.gltf=t;return(t.scenes||[]).map((t=>this.createScene(t)))}createAnimator(){return Array.isArray(this.gltf.animations)?new MN(this.gltf):null}createScene(t){const e=(t.nodes||[]).map((t=>this.createNode(t)));return new xN({id:t.name||t.id,children:e})}createNode(t){if(!t._node){const e=(t.children||[]).map((t=>this.createNode(t)));t.mesh&&e.push(this.createMesh(t.mesh));const n=new xN({id:t.name||t.id,children:e});if(t.matrix)n.setMatrix(t.matrix);else{if(n.matrix.identity(),t.translation&&n.matrix.translate(t.translation),t.rotation){const e=(new Mb).fromQuaternion(t.rotation);n.matrix.multiplyRight(e)}t.scale&&n.matrix.scale(t.scale)}t._node=n}return t._node}createMesh(t){if(!t._mesh){const e=(t.primitives||[]).map(((e,n)=>this.createPrimitive(e,n,t))),n=new xN({id:t.name||t.id,children:e});t._mesh=n}return t._mesh}getVertexCount(t){hx.warn("getVertexCount() not found")()}createPrimitive(t,e,n){const r=function(t,e){const{id:n,drawMode:r,vertexCount:i,attributes:o,modelOptions:s}=e,a=new ON(t,e);hx.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(o).map((t=>t.buffer)));const c=new TN(t,{id:n,drawMode:r,vertexCount:i,modules:[bN],parameters:a.parameters,vs:kN(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:kN(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l,...s,defines:{...a.defines,...s.defines}});return c.setProps({attributes:o}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:t.name||"".concat(n.name||n.id,"-primitive-").concat(e),drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options));return r.bounds=[t.attributes.POSITION.min,t.attributes.POSITION.max],r}createAttributes(t,e){const n={};return Object.keys(t).forEach((e=>{n[e]=this.createAccessor(t[e],this.createBuffer(t[e],this.gl.ARRAY_BUFFER))})),e&&(n.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),hx.info(4,"glTF Attributes",{attributes:t,indices:e,generated:n})(),n}createBuffer(t,e){t.bufferView||(t.bufferView={});const{bufferView:n}=t;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[e]||(n.lumaBuffers[e]=new UA(this.gl,{id:"from-".concat(n.id),data:n.data||t.value,target:e})),n.lumaBuffers[e]}createAccessor(t,e){return new FA({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:RN[t.type]})}createSampler(t){return t}needsPOT(){return!1}}const LN=null,DN=null,FN=null,NN=null,jN="3.4.15",zN={};async function UN(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n&&(e=function(t,e,n){if(t.startsWith("http"))return t;const r=n.modules||{};if(r[t])return r[t];if(!Om)return"modules/".concat(e,"/dist/libs/").concat(t);if(n.CDN)return Em(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(jN,"/dist/libs/").concat(t);if(km)return"../src/libs/".concat(t);return"modules/".concat(e,"/src/libs/").concat(t)}(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),zN[e]=zN[e]||async function(e){if(e.endsWith("wasm")){const t=await fetch(e);return await t.arrayBuffer()}if(!Om)try{return t&&FN&&await FN(e)}catch{return null}if(km)return importScripts(e);const n=await fetch(e);return function(t,e){if(!Om)return NN&&NN(t,e);if(km)return eval.call(Tm,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch(r){n.text=t}return document.body.appendChild(n),null}(await n.text(),e)}(e),await zN[e]}const VN="3.4.15",GN="https://unpkg.com/@loaders.gl/textures@".concat(VN,"/dist/libs/basis_encoder.wasm"),WN="https://unpkg.com/@loaders.gl/textures@".concat(VN,"/dist/libs/basis_encoder.js");let HN,JN;async function KN(t){const e=t.modules||{};return e.basis?e.basis:(HN=HN||async function(t){let e=null,n=null;return[e,n]=await Promise.all([await UN("basis_transcoder.js","textures",t),await UN("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,await function(t,e){const n={};e&&(n.wasmBinary=e);return new Promise((e=>{t(n).then((t=>{const{BasisFile:n,initializeBasis:r}=t;r(),e({BasisFile:n})}))}))}(e,n)}(t),await HN)}async function XN(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(JN=JN||async function(t){let e=null,n=null;return[e,n]=await Promise.all([await UN(WN,"textures",t),await UN(GN,"textures",t)]),e=e||globalThis.BASIS,await function(t,e){const n={};e&&(n.wasmBinary=e);return new Promise((e=>{t(n).then((t=>{const{BasisFile:n,KTX2File:r,initializeBasis:i,BasisEncoder:o}=t;i(),e({BasisFile:n,KTX2File:r,BasisEncoder:o})}))}))}(e,n)}(t),await JN)}const qN=33776,YN=33779,QN=35840,ZN=35842,$N=36196,tj=37808,ej=["","WEBKIT_","MOZ_"],nj={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let rj=null;function ij(t){if(!rj){t=t||function(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}()||void 0,rj=new Set;for(const e of ej)for(const n in nj)if(t&&t.getExtension("".concat(e).concat(n))){const t=nj[n];rj.add(t)}}return rj}new Uint8Array([0]);var oj,sj,aj,lj,cj,uj,dj,hj;!function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(oj||(oj={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(sj||(sj={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(aj||(aj={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(lj||(lj={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(cj||(cj={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(uj||(uj={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(dj||(dj={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(hj||(hj={}));const fj=[171,75,84,88,32,50,48,187,13,10,26,10];const pj={etc1:{basisFormat:0,compressed:!0,format:$N},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:qN},bc3:{basisFormat:3,compressed:!0,format:YN},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:QN},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:ZN},"astc-4x4":{basisFormat:10,compressed:!0,format:tj},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function gj(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");const t=r.getNumImages(),e=[];for(let i=0;i<t;i++){const t=r.getNumLevels(i),o=[];for(let e=0;e<t;e++)o.push(mj(r,i,e,n));e.push(o)}return e}finally{r.close(),r.delete()}}function mj(t,e,n,r){const i=t.getImageWidth(e,n),o=t.getImageHeight(e,n),s=t.getHasAlpha(),{compressed:a,format:l,basisFormat:c}=yj(r,s),u=t.getImageTranscodedSizeInBytes(e,n,c),d=new Uint8Array(u);if(!t.transcodeImage(d,e,n,c,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:o,data:d,compressed:a,format:l,hasAlpha:s}}function vj(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");const t=r.getLevels(),e=[];for(let i=0;i<t;i++){e.push(bj(r,i,n));break}return[e]}finally{r.close(),r.delete()}}function bj(t,e,n){const{alphaFlag:r,height:i,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:l}=yj(n,r),c=t.getImageTranscodedSizeInBytes(e,0,0,l),u=new Uint8Array(c);if(!t.transcodeImage(u,e,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:i,data:u,compressed:s,levelSize:c,hasAlpha:r,format:a}}function yj(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=xj()),"object"===typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),pj[n]}function xj(){const t=ij();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const Aj={name:"Basis",id:Om?"basis":"basis-nodejs",module:"textures",version:"3.4.15",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},_j={...Aj,parse:async function(t,e){if("auto"===e.basis.containerFormat){if(function(t){const e=new Uint8Array(t);return!(e.byteLength<fj.length||e[0]!==fj[0]||e[1]!==fj[1]||e[2]!==fj[2]||e[3]!==fj[3]||e[4]!==fj[4]||e[5]!==fj[5]||e[6]!==fj[6]||e[7]!==fj[7]||e[8]!==fj[8]||e[9]!==fj[9]||e[10]!==fj[10]||e[11]!==fj[11])}(t)){return vj((await XN(e)).KTX2File,t,e)}const{BasisFile:n}=await KN(e);return gj(n,t,e)}if("encoder"===e.basis.module){const n=await XN(e);return"ktx2"===e.basis.containerFormat?vj(n.KTX2File,t,e):gj(n.BasisFile,t,e)}{const{BasisFile:n}=await KN(e);return gj(n,t,e)}}};function wj(t,e,n){if(t.byteLength<=e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}function Sj(t){try{return JSON.parse(t)}catch(Ot){throw new Error('Failed to parse JSON from data starting with "'.concat(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return wj(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer)return wj(t,0,e);return""}(t),'"'))}}function Cj(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function Ej(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const n=e.baseUri||e.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return n.substr(0,n.lastIndexOf("/")+1)+t}function Pj(t,e,n){const r=t.bufferViews[n];Cj(r);const i=e[r.buffer];Cj(i);const o=(r.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,o,r.byteLength)}function Mj(t,e){return Zg(t>=0),Zg(e>0),t+(e-1)&~(e-1)}function Tj(t,e,n){let r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{const e=t.byteOffset,n=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,e,n)}return e.set(r,n),n+Mj(r.byteLength,4)}const Oj=["SCALAR","VEC2","VEC3","VEC4"],kj=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Rj=new Map(kj),Ij={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Bj={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Lj={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Dj(t){return Oj[t-1]||Oj[0]}function Fj(t){const e=Rj.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function Nj(t,e){const n=Lj[t.componentType],r=Ij[t.type],i=Bj[t.componentType],o=t.count*r,s=t.count*r*i;return Cj(s>=0&&s<=e.byteLength),{ArrayType:n,length:o,byteLength:s}}const jj={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class zj{constructor(t){ge(this,"gltf",void 0),ge(this,"sourceBuffers",void 0),ge(this,"byteLength",void 0),this.gltf=t||{json:{...jj},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(t){return this.json[t]}getExtraData(t){return(this.json.extras||{})[t]}getExtension(t){const e=this.getUsedExtensions().find((e=>e===t)),n=this.json.extensions||{};return e?n[t]||!0:null}getRequiredExtension(t){return this.getRequiredExtensions().find((e=>e===t))?this.getExtension(t):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(t,e){return(t.extensions||{})[e]}getScene(t){return this.getObject("scenes",t)}getNode(t){return this.getObject("nodes",t)}getSkin(t){return this.getObject("skins",t)}getMesh(t){return this.getObject("meshes",t)}getMaterial(t){return this.getObject("materials",t)}getAccessor(t){return this.getObject("accessors",t)}getTexture(t){return this.getObject("textures",t)}getSampler(t){return this.getObject("samplers",t)}getImage(t){return this.getObject("images",t)}getBufferView(t){return this.getObject("bufferViews",t)}getBuffer(t){return this.getObject("buffers",t)}getObject(t,e){if("object"===typeof e)return e;const n=this.json[t]&&this.json[t][e];if(!n)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(e,"]"));return n}getTypedArrayForBufferView(t){const e=(t=this.getBufferView(t)).buffer,n=this.gltf.buffers[e];Cj(n);const r=(t.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,r,t.byteLength)}getTypedArrayForAccessor(t){t=this.getAccessor(t);const e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,{ArrayType:r,length:i}=Nj(t,e);return new r(n,e.byteOffset+t.byteOffset,i)}getTypedArrayForImageData(t){t=this.getAccessor(t);const e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,r=e.byteOffset||0;return new Uint8Array(n,r,e.byteLength)}addApplicationData(t,e){return this.json[t]=e,this}addExtraData(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}addObjectExtension(t,e,n){return t.extensions=t.extensions||{},t.extensions[e]=n,this.registerUsedExtension(e),this}setObjectExtension(t,e,n){(t.extensions||{})[e]=n}removeObjectExtension(t,e){const n=t.extensions||{},r=n[e];return delete n[e],r}addExtension(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cj(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}addRequiredExtension(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cj(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}registerUsedExtension(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((e=>e===t))||this.json.extensionsUsed.push(t)}registerRequiredExtension(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((e=>e===t))||this.json.extensionsRequired.push(t)}removeExtension(t){if(!this.getExtension(t))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const e=this.json.extensionsRemoved;e.includes(t)||e.push(t)}setDefaultScene(t){this.json.scene=t}addScene(t){const{nodeIndices:e}=t;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:e}),this.json.scenes.length-1}addNode(t){const{meshIndex:e,matrix:n}=t;this.json.nodes=this.json.nodes||[];const r={mesh:e};return n&&(r.matrix=n),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(t){const{attributes:e,indices:n,material:r,mode:i=4}=t,o={primitives:[{attributes:this._addAttributes(e),mode:i}]};if(n){const t=this._addIndices(n);o.primitives[0].indices=t}return Number.isFinite(r)&&(o.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(o),this.json.meshes.length-1}addPointCloud(t){const e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}addImage(t,e){const n=sE(t),r=e||(null===n||void 0===n?void 0:n.mimeType),i={bufferView:this.addBufferView(t),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(i),this.json.images.length-1}addBufferView(t){const e=t.byteLength;Cj(Number.isFinite(e)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);const n={buffer:0,byteOffset:this.byteLength,byteLength:e};return this.byteLength+=Mj(e,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}addAccessor(t,e){const n={bufferView:t,type:Dj(e.size),componentType:e.componentType,count:e.count,max:e.max,min:e.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(n),this.json.accessors.length-1}addBinaryBuffer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const n=this.addBufferView(t);let r={min:e.min,max:e.max};r.min&&r.max||(r=this._getAccessorMinMax(t,e.size));const i={size:e.size,componentType:Fj(t),count:Math.round(t.length/e.size),min:r.min,max:r.max};return this.addAccessor(n,Object.assign(i,e))}addTexture(t){const{imageIndex:e}=t,n={source:e};return this.json.textures=this.json.textures||[],this.json.textures.push(n),this.json.textures.length-1}addMaterial(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}createBinaryChunk(){var t,e;this.gltf.buffers=[];const n=this.byteLength,r=new ArrayBuffer(n),i=new Uint8Array(r);let o=0;for(const s of this.sourceBuffers||[])o=Tj(s,i,o);null!==(t=this.json)&&void 0!==t&&null!==(e=t.buffers)&&void 0!==e&&e[0]?this.json.buffers[0].byteLength=n:this.json.buffers=[{byteLength:n}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(t,e){let n=!0;for(;n;){const r=t.indexOf(e);r>-1?t.splice(r,1):n=!1}}_addAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={};for(const n in t){const r=t[n],i=this._getGltfAttributeName(n),o=this.addBinaryBuffer(r.value,r);e[i]=o}return e}_addIndices(t){return this.addBinaryBuffer(t,{size:1})}_getGltfAttributeName(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}_getAccessorMinMax(t,e){const n={min:null,max:null};if(t.length<e)return n;n.min=[],n.max=[];const r=t.subarray(0,e);for(const i of r)n.min.push(i),n.max.push(i);for(let i=e;i<t.length;i+=e)for(let r=0;r<e;r++)n.min[0+r]=Math.min(n.min[0+r],t[i+r]),n.max[0+r]=Math.max(n.max[0+r],t[i+r]);return n}}const Uj="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Vj="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Gj=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Wj=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),Hj={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Jj={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};let Kj;async function Xj(){return Kj||(Kj=async function(){let t=Uj;WebAssembly.validate(Gj)&&(t=Vj,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=await WebAssembly.instantiate(function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);e[r]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let n=0;for(let r=0;r<t.length;++r)e[n++]=e[r]<60?Wj[e[r]]:64*(e[r]-60)+e[++r];return e.buffer.slice(0,n)}(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}()),Kj}function qj(t,e,n,r,i,o,s){const a=t.exports.sbrk,l=r+3&-4,c=a(l*i),u=a(o.length),d=new Uint8Array(t.exports.memory.buffer);d.set(o,u);const h=e(c,r,i,u,o.length);if(0===h&&s&&s(c,l,i),n.set(d.subarray(c,c+r*i)),a(c-a(0)),0!==h)throw new Error("Malformed buffer data: ".concat(h))}const Yj="EXT_meshopt_compression",Qj=Yj;async function Zj(t,e){var n;const r=new zj(t);if(null===e||void 0===e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const i=[];for(const o of t.json.bufferViews||[])i.push($j(r,o));await Promise.all(i),r.removeExtension(Yj)}async function $j(t,e){const n=t.getObjectExtension(e,Yj);if(n){const{byteOffset:r=0,byteLength:i=0,byteStride:o,count:s,mode:a,filter:l="NONE",buffer:c}=n,u=t.gltf.buffers[c],d=new Uint8Array(u.arrayBuffer,u.byteOffset+r,i),h=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return await async function(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const s=await Xj();qj(s,s.exports[Jj[i]],t,e,n,r,s.exports[Hj[o||"NONE"]])}(h,s,o,d,a,l),h}return null}const tz={};function ez(t){if(void 0===tz[t]){const e=pm?function(t){switch(t){case"image/avif":case"image/webp":return function(t){try{const e=document.createElement("canvas");return 0===e.toDataURL(t).indexOf("data:".concat(t))}catch{return!1}}(t);default:return!0}}(t):nz(t);tz[t]=e}return tz[t]}function nz(t){const e=["image/png","image/jpeg","image/gif"],{_parseImageNode:n,_imageFormatsNode:r=e}=globalThis;return Boolean(n)&&r.includes(t)}const rz="EXT_texture_webp",iz=rz;function oz(t,e){const n=new zj(t);if(!ez("image/webp")){if(n.getRequiredExtensions().includes(rz))throw new Error("gltf: Required extension ".concat(rz," not supported by browser"));return}const{json:r}=n;for(const i of r.textures||[]){const t=n.getObjectExtension(i,rz);t&&(i.source=t.source),n.removeObjectExtension(i,rz)}n.removeExtension(rz)}const sz="KHR_texture_basisu",az=sz;function lz(t,e){const n=new zj(t),{json:r}=n;for(const i of r.textures||[]){const t=n.getObjectExtension(i,sz);t&&(i.source=t.source),n.removeObjectExtension(i,sz)}n.removeExtension(sz)}const cz="3.4.15",uz={draco:{decoderType:"object"===typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},dz={name:"Draco",id:Om?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:cz,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:uz};function hz(t,e,n){const r=HO(e.value),i=n||function(t){const e=new Map;"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10));"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10));"normalized"in t&&e.set("normalized",t.normalized.toString());return e}(e);return new JO(t,new WO(e.size,new JO("value",r)),!1,i)}function fz(t,e,n){return hz(t,e,n?pz(n.metadata):void 0)}function pz(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const gz={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},mz={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class vz{constructor(t){ge(this,"draco",void 0),ge(this,"decoder",void 0),ge(this,"metadataQuerier",void 0),this.draco=t,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new this.draco.DecoderBuffer;n.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);const r=this.decoder.GetEncodedGeometryType(n),i=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let t;switch(r){case this.draco.TRIANGULAR_MESH:t=this.decoder.DecodeBufferToMesh(n,i);break;case this.draco.POINT_CLOUD:t=this.decoder.DecodeBufferToPointCloud(n,i);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!t.ok()||!i.ptr){const e="DRACO decompression failed: ".concat(t.error_msg());throw new Error(e)}const o=this._getDracoLoaderData(i,r,e),s=this._getMeshData(i,o,e),a=rO(s.attributes),l=function(t,e,n){const r=pz(e.metadata),i=[],o=function(t){const e={};for(const n in t){const r=t[n];e[r.name||"undefined"]=r}return e}(e.attributes);for(const s in t){const e=fz(s,t[s],o[s]);i.push(e)}if(n){const t=fz("indices",n);i.push(t)}return new xO(i,r)}(s.attributes,o,s.indices);return{loader:"draco",loaderData:o,header:{vertexCount:i.num_points(),boundingBox:a},...s,schema:l}}finally{this.draco.destroy(n),i&&this.draco.destroy(i)}}_getDracoLoaderData(t,e,n){const r=this._getTopLevelMetadata(t),i=this._getDracoAttributes(t,n);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:r,attributes:i}}_getDracoAttributes(t,e){const n={};for(let r=0;r<t.num_attributes();r++){const i=this.decoder.GetAttribute(t,r),o=this._getAttributeMetadata(t,r);n[i.unique_id()]={unique_id:i.unique_id(),attribute_type:i.attribute_type(),data_type:i.data_type(),num_components:i.num_components(),byte_offset:i.byte_offset(),byte_stride:i.byte_stride(),normalized:i.normalized(),attribute_index:r,metadata:o};const s=this._getQuantizationTransform(i,e);s&&(n[i.unique_id()].quantization_transform=s);const a=this._getOctahedronTransform(i,e);a&&(n[i.unique_id()].octahedron_transform=a)}return n}_getMeshData(t,e,n){const r=this._getMeshAttributes(e,t,n);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return t instanceof this.draco.Mesh?"triangle-strip"===n.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(t),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(t),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(t,e,n){const r={};for(const i of Object.values(t.attributes)){const t=this._deduceAttributeName(i,n);i.name=t;const{value:o,size:s}=this._getAttributeValues(e,i);r[t]={value:o,size:s,byteOffset:i.byte_offset,byteStride:i.byte_stride,normalized:i.normalized}}return r}_getTriangleListIndices(t){const e=3*t.num_faces(),n=4*e,r=this.draco._malloc(n);try{return this.decoder.GetTrianglesUInt32Array(t,n,r),new Uint32Array(this.draco.HEAPF32.buffer,r,e).slice()}finally{this.draco._free(r)}}_getTriangleStripIndices(t){const e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}(e)}finally{this.draco.destroy(e)}}_getAttributeValues(t,e){const n=mz[e.data_type],r=e.num_components,i=t.num_points()*r,o=i*n.BYTES_PER_ELEMENT,s=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,n);let a;const l=this.draco._malloc(o);try{const r=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,r,s,o,l),a=new n(this.draco.HEAPF32.buffer,l,i).slice()}finally{this.draco._free(l)}return{value:a,size:r}}_deduceAttributeName(t,e){const n=t.unique_id;for(const[o,s]of Object.entries(e.extraAttributes||{}))if(s===n)return o;const r=t.attribute_type;for(const o in gz){if(this.draco[o]===r)return gz[o]}const i=e.attributeNameEntry||"name";return t.metadata[i]?t.metadata[i].string:"CUSTOM_ATTRIBUTE_".concat(n)}_getTopLevelMetadata(t){const e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}_getAttributeMetadata(t,e){const n=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(n)}_getDracoMetadata(t){if(!t||!t.ptr)return{};const e={},n=this.metadataQuerier.NumEntries(t);for(let r=0;r<n;r++){const n=this.metadataQuerier.GetEntryName(t,r);e[n]=this._getDracoMetadataField(t,n)}return e}_getDracoMetadataField(t,e){const n=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,n);const r=function(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}(n);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:r}}finally{this.draco.destroy(n)}}_disableAttributeTransforms(t){const{quantizedAttributes:e=[],octahedronAttributes:n=[]}=t,r=[...e,...n];for(const i of r)this.decoder.SkipAttributeTransform(this.draco[i])}_getQuantizationTransform(t,e){const{quantizedAttributes:n=[]}=e,r=t.attribute_type();if(n.map((t=>this.decoder[t])).includes(r)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits(),range:e.range(),min_values:new Float32Array([1,2,3]).map((t=>e.min_value(t)))}}finally{this.draco.destroy(e)}}return null}_getOctahedronTransform(t,e){const{octahedronAttributes:n=[]}=e,r=t.attribute_type();if(n.map((t=>this.decoder[t])).includes(r)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits()}}finally{this.draco.destroy(e)}}return null}}const bz="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),yz="".concat(bz,"/draco_decoder.js"),xz="".concat(bz,"/draco_wasm_wrapper.js"),Az="".concat(bz,"/draco_decoder.wasm");"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");let _z;async function wz(t){const e=t.modules||{};return _z=e.draco3d?_z||e.draco3d.createDecoderModule({}).then((t=>({draco:t}))):_z||async function(t){let e,n;if("js"===(t.draco&&t.draco.decoderType))e=await UN(yz,"draco",t);else[e,n]=await Promise.all([await UN(xz,"draco",t),await UN(Az,"draco",t)]);return e=e||globalThis.DracoDecoderModule,await function(t,e){const n={};e&&(n.wasmBinary=e);return new Promise((e=>{t({...n,onModuleLoaded:t=>e({draco:t})})}))}(e,n)}(t),await _z}const Sz={...dz,parse:async function(t,e){const{draco:n}=await wz(e),r=new vz(n);try{return r.parseSync(t,null===e||void 0===e?void 0:e.draco)}finally{r.destroy()}}};function Cz(t){const{buffer:e,size:n,count:r}=function(t){let e=t,n=1,r=0;t&&t.value&&(e=t.value,n=t.size||1);e&&(ArrayBuffer.isView(e)||(e=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return null;if(Array.isArray(t))return new e(t);if(n&&!(t instanceof e))return new e(t);return t}(e,Float32Array)),r=e.length/n);return{buffer:e,size:n,count:r}}(t);return{value:e,size:n,byteOffset:0,count:r,type:Dj(n),componentType:Fj(e)}}const Ez="KHR_draco_mesh_compression",Pz=Ez;function Mz(t,e,n){const r=new zj(t);for(const i of Iz(r))r.getObjectExtension(i,Ez)}async function Tz(t,e,n){var r;if(null===e||void 0===e||null===(r=e.gltf)||void 0===r||!r.decompressMeshes)return;const i=new zj(t),o=[];for(const s of Iz(i))i.getObjectExtension(s,Ez)&&o.push(kz(i,s,e,n));await Promise.all(o),i.removeExtension(Ez)}function Oz(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new zj(t);for(const r of n.json.meshes||[])Rz(r,e),n.addRequiredExtension(Ez)}async function kz(t,e,n,r){const i=t.getObjectExtension(e,Ez);if(!i)return;const o=t.getTypedArrayForBufferView(i.bufferView),s=qm(o.buffer,o.byteOffset),{parse:a}=r,l={...n};delete l["3d-tiles"];const c=await a(s,Sz,l,r),u=function(t){const e={};for(const n in t){const r=t[n];if("indices"!==n){const t=Cz(r);e[n]=t}}return e}(c.attributes);for(const[d,h]of Object.entries(u))if(d in e.attributes){const n=e.attributes[d],r=t.getAccessor(n);null!==r&&void 0!==r&&r.min&&null!==r&&void 0!==r&&r.max&&(h.min=r.min,h.max=r.max)}e.attributes=u,c.indices&&(e.indices=Cz(c.indices)),function(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}function Rz(t,e){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=i.DracoWriter.encodeSync({attributes:t}),a=null===o||void 0===o||null===(n=o.parseSync)||void 0===n?void 0:n.call(o,{attributes:t}),l=i._addFauxAttributes(a.attributes),c=i.addBufferView(s);return{primitives:[{attributes:l,mode:r,extensions:{[Ez]:{bufferView:c,attributes:l}}}]}}function*Iz(t){for(const e of t.json.meshes||[])for(const t of e.primitives)yield t}const Bz={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Lz={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};const Dz="KHR_texture_transform",Fz=Dz,Nz=new Qv,jz=new RI,zz=new RI;async function Uz(t,e){if(!new zj(t).getExtension(Dz))return;const n=t.json.materials||[];for(let r=0;r<n.length;r++)Vz(r,t)}function Vz(t,e){var n,r,i;const o=[],s=null===(n=e.json.materials)||void 0===n?void 0:n[t],a=null===s||void 0===s||null===(r=s.pbrMetallicRoughness)||void 0===r?void 0:r.baseColorTexture;a&&Gz(e,t,a,o);const l=null===s||void 0===s?void 0:s.emissiveTexture;l&&Gz(e,t,l,o);const c=null===s||void 0===s?void 0:s.normalTexture;c&&Gz(e,t,c,o);const u=null===s||void 0===s?void 0:s.occlusionTexture;u&&Gz(e,t,u,o);const d=null===s||void 0===s||null===(i=s.pbrMetallicRoughness)||void 0===i?void 0:i.metallicRoughnessTexture;d&&Gz(e,t,d,o)}function Gz(t,e,n,r){const i=function(t,e){var n;const r=null===(n=t.extensions)||void 0===n?void 0:n[Dz],{texCoord:i=0}=t,{texCoord:o=i}=r,s=-1!==e.findIndex((t=>{let[e,n]=t;return e===i&&n===o}));if(!s){const n=function(t){const{offset:e=[0,0],rotation:n=0,scale:r=[1,1]}=t,i=(new RI).set(1,0,0,0,1,0,e[0],e[1],1),o=jz.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),s=zz.set(r[0],0,0,0,r[1],0,0,0,1);return i.multiplyRight(o).multiplyRight(s)}(r);return i!==o&&(t.texCoord=o),e.push([i,o]),{originalTexCoord:i,texCoord:o,matrix:n}}return null}(n,r);if(!i)return;const o=t.json.meshes||[];for(const s of o)for(const n of s.primitives){const r=n.material;Number.isFinite(r)&&e===r&&Wz(t,n,i)}}function Wz(t,e,n){const{originalTexCoord:r,texCoord:i,matrix:o}=n,s=e.attributes["TEXCOORD_".concat(r)];if(Number.isFinite(s)){var a;const n=null===(a=t.json.accessors)||void 0===a?void 0:a[s];if(n&&n.bufferView){var l;const s=null===(l=t.json.bufferViews)||void 0===l?void 0:l[n.bufferView];if(s){const{arrayBuffer:a,byteOffset:l}=t.buffers[s.buffer],c=(l||0)+(n.byteOffset||0)+(s.byteOffset||0),{ArrayType:u,length:d}=Nj(n,s),h=Lz[n.componentType],f=Bz[n.type],p=s.byteStride||h*f,g=new Float32Array(d);for(let t=0;t<n.count;t++){const e=new u(a,c+t*p,2);Nz.set(e[0],e[1],1),Nz.transformByMatrix3(o),g.set([Nz[0],Nz[1]],t*f)}r===i?function(t,e,n,r){t.componentType=5126,n.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=r.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(n,s,t.buffers,g):function(t,e,n,r,i){r.buffers.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength});const o=r.json.bufferViews;if(!o)return;o.push({buffer:r.buffers.length-1,byteLength:i.buffer.byteLength,byteOffset:0});const s=r.json.accessors;if(!s)return;s.push({bufferView:(null===o||void 0===o?void 0:o.length)-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes["TEXCOORD_".concat(t)]=s.length-1}(i,n,e,t,g)}}}}const Hz="KHR_lights_punctual",Jz=Hz;async function Kz(t){const e=new zj(t),{json:n}=e,r=e.getExtension(Hz);r&&(e.json.lights=r.lights,e.removeExtension(Hz));for(const i of n.nodes||[]){const t=e.getObjectExtension(i,Hz);t&&(i.light=t.light),e.removeObjectExtension(i,Hz)}}async function Xz(t){const e=new zj(t),{json:n}=e;if(n.lights){const t=e.addExtension(Hz);Cj(!t.lights),t.lights=n.lights,delete n.lights}if(e.json.lights){for(const t of e.json.lights){const n=t.node;e.addObjectExtension(n,Hz,t)}delete e.json.lights}}const qz="KHR_materials_unlit",Yz=qz;async function Qz(t){const e=new zj(t),{json:n}=e;for(const r of n.materials||[]){r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),e.removeObjectExtension(r,qz)}e.removeExtension(qz)}function Zz(t){const e=new zj(t),{json:n}=e;if(e.materials)for(const r of n.materials||[])r.unlit&&(delete r.unlit,e.addObjectExtension(r,qz,{}),e.addExtension(qz))}const $z="KHR_techniques_webgl",tU=$z;async function eU(t){const e=new zj(t),{json:n}=e,r=e.getExtension($z);if(r){const t=function(t,e){const{programs:n=[],shaders:r=[],techniques:i=[]}=t,o=new TextDecoder;return r.forEach((t=>{if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=o.decode(e.getTypedArrayForBufferView(t.bufferView))})),n.forEach((t=>{t.fragmentShader=r[t.fragmentShader],t.vertexShader=r[t.vertexShader]})),i.forEach((t=>{t.program=n[t.program]})),i}(r,e);for(const r of n.materials||[]){const n=e.getObjectExtension(r,$z);n&&(r.technique=Object.assign({},n,t[n.technique]),r.technique.values=rU(r.technique,e)),e.removeObjectExtension(r,$z)}e.removeExtension($z)}}async function nU(t,e){}function rU(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach((e=>{t.uniforms[e].value&&!(e in n)&&(n[e]=t.uniforms[e].value)})),Object.keys(n).forEach((t=>{"object"===typeof n[t]&&void 0!==n[t].index&&(n[t].texture=e.getTexture(n[t].index))})),n}const iU="EXT_feature_metadata",oU=iU;async function sU(t){!function(t){var e;const n=t.getExtension(iU),r=null===n||void 0===n||null===(e=n.schema)||void 0===e?void 0:e.classes,i=null===n||void 0===n?void 0:n.featureTables;(null===n||void 0===n?void 0:n.featureTextures)&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.');if(r&&i)for(const o in r){const e=r[o],n=cU(i,o);n&&aU(t,n,e)}}(new zj(t))}function aU(t,e,n){for(const i in n.properties){var r;const o=n.properties[i],s=null===e||void 0===e||null===(r=e.properties)||void 0===r?void 0:r[i],a=e.count;if(s){const e=lU(t,o,a,s);s.data=e}}}function lU(t,e,n,r){const i=r.bufferView;let o=t.getTypedArrayForBufferView(i);switch(e.type){case"STRING":{const e=r.stringOffsetBufferView;o=function(t,e,n){const r=[],i=new TextDecoder("utf8");let o=0;const s=4;for(let a=0;a<n;a++){const n=e[(a+1)*s]-e[a*s],l=t.subarray(o,n+o),c=i.decode(l);r.push(c),o+=n}return r}(o,t.getTypedArrayForBufferView(e),n);break}}return o}function cU(t,e){for(const n in t){const r=t[n];if(r.class===e)return r}return null}const uU=[e,r,i,o,a,l,c,s,u];function dU(t,e){var n;const r=(null===e||void 0===e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in r&&!r[t])}const hU="KHR_binary_glTF";const fU={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},pU={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class gU{constructor(){ge(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),ge(this,"json",void 0)}normalize(t,e){this.json=t.json;const n=t.json;switch(n.asset&&n.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(n.asset.version))}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(n),this._convertTopLevelObjectsToArrays(n),function(t){const e=new zj(t),{json:n}=e;for(const r of n.images||[]){const t=e.getObjectExtension(r,hU);t&&Object.assign(r,t),e.removeObjectExtension(r,hU)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(hU)}(t),this._convertObjectIdsToArrayIndices(n),this._updateObjects(n),this._updateMaterial(n)}_addAsset(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(t){for(const e in fU)this._convertTopLevelObjectToArray(t,e)}_convertTopLevelObjectToArray(t,e){const n=t[e];if(n&&!Array.isArray(n)){t[e]=[];for(const r in n){const i=n[r];i.id=i.id||r;const o=t[e].length;t[e].push(i),this.idToIndexMap[e][r]=o}}}_convertObjectIdsToArrayIndices(t){for(const e in fU)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));for(const e of t.textures)this._convertTextureIds(e);for(const e of t.meshes)this._convertMeshIds(e);for(const e of t.nodes)this._convertNodeIds(e);for(const e of t.scenes)this._convertSceneIds(e)}_convertTextureIds(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}_convertMeshIds(t){for(const e of t.primitives){const{attributes:t,indices:n,material:r}=e;for(const e in t)t[e]=this._convertIdToIndex(t[e],"accessor");n&&(e.indices=this._convertIdToIndex(n,"accessor")),r&&(e.material=this._convertIdToIndex(r,"material"))}}_convertNodeIds(t){t.children&&(t.children=t.children.map((t=>this._convertIdToIndex(t,"node")))),t.meshes&&(t.meshes=t.meshes.map((t=>this._convertIdToIndex(t,"mesh"))))}_convertSceneIds(t){t.nodes&&(t.nodes=t.nodes.map((t=>this._convertIdToIndex(t,"node"))))}_convertIdsToIndices(t,e){t[e]||(console.warn("gltf v1: json doesn't contain attribute ".concat(e)),t[e]=[]);for(const n of t[e])for(const t in n){const e=n[t],r=this._convertIdToIndex(e,t);n[t]=r}}_convertIdToIndex(t,e){const n=pU[e];if(n in this.idToIndexMap){const r=this.idToIndexMap[n][t];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(e," with id ").concat(t));return r}return t}_updateObjects(t){for(const e of this.json.buffers)delete e.type}_updateMaterial(t){for(const i of t.materials){var e,n,r;i.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(e=i.values)||void 0===e?void 0:e.tex)||(null===(n=i.values)||void 0===n?void 0:n.texture2d_0)||(null===(r=i.values)||void 0===r?void 0:r.diffuseTex),s=t.textures.findIndex((t=>t.id===o));-1!==s&&(i.pbrMetallicRoughness.baseColorTexture={index:s})}}}const mU={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vU={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},bU=10240,yU=10241,xU=10242,AU=10243,_U=10497,wU=9729,SU=9986,CU={magFilter:bU,minFilter:yU,wrapS:xU,wrapT:AU},EU={[bU]:wU,[yU]:SU,[xU]:_U,[AU]:_U};class PU{constructor(){ge(this,"baseUri",""),ge(this,"json",{}),ge(this,"buffers",[]),ge(this,"images",[])}postProcess(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{json:n,buffers:r=[],images:i=[],baseUri:o=""}=t;return Cj(n),this.baseUri=o,this.json=n,this.buffers=r,this.images=i,this._resolveTree(this.json,e),this.json}_resolveTree(t){t.bufferViews&&(t.bufferViews=t.bufferViews.map(((t,e)=>this._resolveBufferView(t,e)))),t.images&&(t.images=t.images.map(((t,e)=>this._resolveImage(t,e)))),t.samplers&&(t.samplers=t.samplers.map(((t,e)=>this._resolveSampler(t,e)))),t.textures&&(t.textures=t.textures.map(((t,e)=>this._resolveTexture(t,e)))),t.accessors&&(t.accessors=t.accessors.map(((t,e)=>this._resolveAccessor(t,e)))),t.materials&&(t.materials=t.materials.map(((t,e)=>this._resolveMaterial(t,e)))),t.meshes&&(t.meshes=t.meshes.map(((t,e)=>this._resolveMesh(t,e)))),t.nodes&&(t.nodes=t.nodes.map(((t,e)=>this._resolveNode(t,e)))),t.skins&&(t.skins=t.skins.map(((t,e)=>this._resolveSkin(t,e)))),t.scenes&&(t.scenes=t.scenes.map(((t,e)=>this._resolveScene(t,e)))),void 0!==t.scene&&(t.scene=t.scenes[this.json.scene])}getScene(t){return this._get("scenes",t)}getNode(t){return this._get("nodes",t)}getSkin(t){return this._get("skins",t)}getMesh(t){return this._get("meshes",t)}getMaterial(t){return this._get("materials",t)}getAccessor(t){return this._get("accessors",t)}getCamera(t){return null}getTexture(t){return this._get("textures",t)}getSampler(t){return this._get("samplers",t)}getImage(t){return this._get("images",t)}getBufferView(t){return this._get("bufferViews",t)}getBuffer(t){return this._get("buffers",t)}_get(t,e){if("object"===typeof e)return e;const n=this.json[t]&&this.json[t][e];return n||console.warn("glTF file error: Could not find ".concat(t,"[").concat(e,"]")),n}_resolveScene(t,e){return t.id=t.id||"scene-".concat(e),t.nodes=(t.nodes||[]).map((t=>this.getNode(t))),t}_resolveNode(t,e){return t.id=t.id||"node-".concat(e),t.children&&(t.children=t.children.map((t=>this.getNode(t)))),void 0!==t.mesh?t.mesh=this.getMesh(t.mesh):void 0!==t.meshes&&t.meshes.length&&(t.mesh=t.meshes.reduce(((t,e)=>{const n=this.getMesh(e);return t.id=n.id,t.primitives=t.primitives.concat(n.primitives),t}),{primitives:[]})),void 0!==t.camera&&(t.camera=this.getCamera(t.camera)),void 0!==t.skin&&(t.skin=this.getSkin(t.skin)),t}_resolveSkin(t,e){return t.id=t.id||"skin-".concat(e),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}_resolveMesh(t,e){return t.id=t.id||"mesh-".concat(e),t.primitives&&(t.primitives=t.primitives.map((t=>{const e=(t={...t}).attributes;t.attributes={};for(const n in e)t.attributes[n]=this.getAccessor(e[n]);return void 0!==t.indices&&(t.indices=this.getAccessor(t.indices)),void 0!==t.material&&(t.material=this.getMaterial(t.material)),t}))),t}_resolveMaterial(t,e){if(t.id=t.id||"material-".concat(e),t.normalTexture&&(t.normalTexture={...t.normalTexture},t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture={...t.occlustionTexture},t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture={...t.emmisiveTexture},t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.emissiveFactor||(t.emissiveFactor=t.emmisiveTexture?[1,1,1]:[0,0,0]),t.pbrMetallicRoughness){t.pbrMetallicRoughness={...t.pbrMetallicRoughness};const e=t.pbrMetallicRoughness;e.baseColorTexture&&(e.baseColorTexture={...e.baseColorTexture},e.baseColorTexture.texture=this.getTexture(e.baseColorTexture.index)),e.metallicRoughnessTexture&&(e.metallicRoughnessTexture={...e.metallicRoughnessTexture},e.metallicRoughnessTexture.texture=this.getTexture(e.metallicRoughnessTexture.index))}return t}_resolveAccessor(t,e){var n,r;if(t.id=t.id||"accessor-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=(n=t.componentType,vU[n]),t.components=(r=t.type,mU[r]),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){const e=t.bufferView.buffer,{ArrayType:n,byteLength:r}=Nj(t,t.bufferView),i=(t.bufferView.byteOffset||0)+(t.byteOffset||0)+e.byteOffset;let o=e.arrayBuffer.slice(i,i+r);t.bufferView.byteStride&&(o=this._getValueFromInterleavedBuffer(e,i,t.bufferView.byteStride,t.bytesPerElement,t.count)),t.value=new n(o)}return t}_getValueFromInterleavedBuffer(t,e,n,r,i){const o=new Uint8Array(i*r);for(let s=0;s<i;s++){const i=e+s*n;o.set(new Uint8Array(t.arrayBuffer.slice(i,i+r)),s*r)}return o.buffer}_resolveTexture(t,e){return t.id=t.id||"texture-".concat(e),t.sampler="sampler"in t?this.getSampler(t.sampler):EU,t.source=this.getImage(t.source),t}_resolveSampler(t,e){t.id=t.id||"sampler-".concat(e),t.parameters={};for(const n in t){const e=this._enumSamplerParameter(n);void 0!==e&&(t.parameters[e]=t[n])}return t}_enumSamplerParameter(t){return CU[t]}_resolveImage(t,e){t.id=t.id||"image-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView));const n=this.images[e];return n&&(t.image=n),t}_resolveBufferView(t,e){const n=t.buffer,r={id:"bufferView-".concat(e),...t,buffer:this.buffers[n]},i=this.buffers[n].arrayBuffer;let o=this.buffers[n].byteOffset||0;return"byteOffset"in t&&(o+=t.byteOffset),r.data=new Uint8Array(i,o,t.byteLength),r}_resolveCamera(t,e){return t.id=t.id||"camera-".concat(e),t.perspective,t.orthographic,t}}const MU=1735152710,TU=12,OU=8,kU=1313821514,RU=5130562,IU=0,BU=1,LU=0,DU=!0;function FU(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=new DataView(e),o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(i,n+0),s=i.getUint32(n+4,DU),a=i.getUint32(n+8,DU);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),n+=TU,t.version){case 1:return function(t,e,n){Zg(t.header.byteLength>TU+OU);const r=e.getUint32(n+0,DU),i=e.getUint32(n+4,DU);return n+=OU,Zg(i===LU),NU(t,e,n,r),n+=r,n+=jU(t,e,n,t.header.byteLength),n}(t,i,n);case 2:return function(t,e,n,r){return Zg(t.header.byteLength>TU+OU),function(t,e,n,r){for(;n+8<=t.header.byteLength;){const i=e.getUint32(n+0,DU),o=e.getUint32(n+4,DU);switch(n+=OU,o){case kU:NU(t,e,n,i);break;case RU:jU(t,e,n,i);break;case IU:r.strict||NU(t,e,n,i);break;case BU:r.strict||jU(t,e,n,i)}n+=Mj(i,4)}}(t,e,n,r),n+t.header.byteLength}(t,i,n,r={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}function NU(t,e,n,r){const i=new Uint8Array(e.buffer,n,r),o=new TextDecoder("utf8").decode(i);return t.json=JSON.parse(o),Mj(r,4)}function jU(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),Mj(r,4)}async function zU(t,e){var n,r,i,o;let s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;!function(t,e,n,r){r.uri&&(t.baseUri=r.uri);if(e instanceof ArrayBuffer&&!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new DataView(t),{magic:i=MU}=n,o=r.getUint32(e,!1);return o===i||o===MU}(e,n,r)){e=(new TextDecoder).decode(e)}if("string"===typeof e)t.json=Sj(e);else if(e instanceof ArrayBuffer){const i={};n=FU(i,e,n,r.glb),Cj("glTF"===i.type,"Invalid GLB magic string ".concat(i.type)),t._glb=i,t.json=i.json}else Cj(!1,"GLTF: must be ArrayBuffer or string");const i=t.json.buffers||[];if(t.buffers=new Array(i.length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:e}=t._glb;t.buffers[0]={arrayBuffer:e[0].arrayBuffer,byteOffset:e[0].byteOffset,byteLength:e[0].byteLength}}const o=t.json.images||[];t.images=new Array(o.length).fill({})}(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(new gU).normalize(t,e)}(t,{normalize:null===s||void 0===s||null===(n=s.gltf)||void 0===n?void 0:n.normalize}),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=uU.filter((t=>dU(t.name,e)));for(const o of r){var i;null===(i=o.preprocess)||void 0===i||i.call(o,t,e,n)}}(t,s,a);const l=[];if(null!==s&&void 0!==s&&null!==(r=s.gltf)&&void 0!==r&&r.loadBuffers&&t.json.buffers&&await async function(t,e,n){const r=t.json.buffers||[];for(let s=0;s<r.length;++s){const a=r[s];if(a.uri){var i,o;const{fetch:r}=n;Cj(r);const l=Ej(a.uri,e),c=await(null===n||void 0===n||null===(i=n.fetch)||void 0===i?void 0:i.call(n,l)),u=await(null===c||void 0===c||null===(o=c.arrayBuffer)||void 0===o?void 0:o.call(c));t.buffers[s]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete a.uri}else null===t.buffers[s]&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}(t,s,a),null!==s&&void 0!==s&&null!==(i=s.gltf)&&void 0!==i&&i.loadImages){const e=async function(t,e,n){const r=function(t){const e=new Set,n=t.json.textures||[];for(const r of n)void 0!==r.source&&e.add(r.source);return Array.from(e).sort()}(t),i=t.json.images||[],o=[];for(const s of r)o.push(UU(t,i[s],s,e,n));return await Promise.all(o)}(t,s,a);l.push(e)}const c=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=uU.filter((t=>dU(t.name,e)));for(const o of r){var i;await(null===(i=o.decode)||void 0===i?void 0:i.call(o,t,e,n))}}(t,s,a);return l.push(c),await Promise.all(l),null!==s&&void 0!==s&&null!==(o=s.gltf)&&void 0!==o&&o.postProcess?function(t,e){return(new PU).postProcess(t,e)}(t,s):t}async function UU(t,e,n,r,i){const{fetch:o,parse:s}=i;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const t=Ej(e.uri,r),n=await o(t);a=await n.arrayBuffer(),e.bufferView={data:a}}if(Number.isFinite(e.bufferView)){const n=Pj(t.json,t.buffers,e.bufferView);a=qm(n.buffer,n.byteOffset,n.byteLength)}Cj(a,"glTF image has no data");let l=await s(a,[lE,_j],{mimeType:e.mimeType,basis:r.basis||{format:xj()}},i);l&&l[0]&&(l={compressed:!0,mipmaps:!1,width:l[0].width,height:l[0].height,data:l[0]}),t.images=t.images||[],t.images[n]=l}const VU={name:"glTF",id:"gltf",module:"gltf",version:"3.4.15",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;e={...VU.options,...e},e.gltf={...VU.options.gltf,...e.gltf};const{byteOffset:r=0}=e;return await zU({},t,r,e,n)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};async function GU(t){const e=[];return t.scenes.forEach((t=>{t.traverse((t=>{Object.values(t.model.getUniforms()).forEach((t=>{!1===t.loaded&&e.push(t)}))}))})),await async function(t){for(;t();)await new Promise((t=>requestAnimationFrame(t)))}((()=>e.some((t=>!t.loaded))))}const WU=[255,255,255,255],HU={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"===typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:WU},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[VU]};class JU extends QM{constructor(){super(...arguments),ge(this,"state",void 0)}getShaders(){const t=[LT,KT];return"pbr"===this.props._lighting&&t.push(bN),super.getShaders({vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    geometry.normal = project_normal(normal);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:WU,transition:!0},instanceModelMatrix:eO})}updateState(t){super.updateState(t);const{props:e,oldProps:n}=t;e.scenegraph!==n.scenegraph?this._updateScenegraph():e._animations!==n._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,e._animations)}finalizeState(t){super.finalizeState(t),this._deleteScenegraph()}get isLoaded(){var t;return(null===(t=this.state)||void 0===t?void 0:t.scenegraph)&&super.isLoaded}_updateScenegraph(){const t=this.props,{gl:e}=this.context;let n=null;if(t.scenegraph instanceof yN)n={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){const r=t.scenegraph,i=function(t,e,n){const r=new BN(t,n);return{scenes:r.instantiate(e),animator:r.createAnimator()}}(e,r,this._getModelOptions());n={gltf:r,...i},GU(i).then((()=>this.setNeedsRedraw()))}else t.scenegraph&&(Rg.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),n=t.scenegraph);const r={layer:this,gl:e},i=t.getScene(n,r),o=t.getAnimator(n,r);i instanceof yN?(this._deleteScenegraph(),this._applyAllAttributes(i),this._applyAnimationsProp(i,o,t._animations),this.setState({scenegraph:i,animator:o})):null!==i&&Rg.warn("invalid scenegraph:",i)()}_applyAllAttributes(t){if(this.state.attributesAvailable){const e=this.getAttributeManager().getAttributes();t.traverse((t=>{this._setModelAttributes(t.model,e)}))}}_applyAnimationsProp(t,e,n){if(!t||!e||!n)return;const r=e.getAnimations();Object.keys(n).sort().forEach((t=>{const e=n[t];if("*"===t)r.forEach((t=>{Object.assign(t,e)}));else if(Number.isFinite(Number(t))){const n=Number(t);n>=0&&n<r.length?Object.assign(r[n],e):Rg.warn("animation ".concat(t," not found"))()}else{const n=r.find((e=>{let{name:n}=e;return n===t}));n?Object.assign(n,e):Rg.warn("animation ".concat(t," not found"))()}}))}_deleteScenegraph(){const{scenegraph:t}=this.state;t instanceof yN&&t.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:t}=this.props;let e=null;return t&&(e="function"===typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:e,modelOptions:{isInstanced:!0,transpileToGLSL100:!vx(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(t){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse((e=>{this._setModelAttributes(e.model,t)}))}draw(t){let{moduleParameters:e=null,parameters:n={},context:r}=t;if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());const{viewport:i}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:l,coordinateSystem:c}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse(((t,r)=>{let{worldMatrix:d}=r;t.model.setInstanceCount(u),t.updateModuleSettings(e),t.draw({parameters:n,uniforms:{sizeScale:o,opacity:l,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:nO(i,c),sceneModelMatrix:d,u_Camera:t.model.getUniforms().project_uCameraPosition}})}))}}function KU(){var t;const e=et((t=>t.cityIOdataState.cityIOdata)),n=et((t=>t.menuState)),[r,i]=(0,h.useState)(!1),[o,s]=(0,h.useState)(),[a,l]=(0,h.useState)(null),[c,u]=(0,h.useState)(),[d,f]=(0,h.useState)(),[p,g]=(0,h.useState)(),[m,b]=(0,h.useState)(),[y,x]=(0,h.useState)(),[A,_]=(0,h.useState)(),w=n.editMenuState.EDIT_BUTTON,S=n.typesMenuState.SELECTED_TYPE,C=n.layersMenuState,E=null===n||void 0===n||null===(t=n.viewSettingsMenuState)||void 0===t?void 0:t.ROTATE_CHECKBOX,{sendJsonMessage:P}=(0,_n.Ay)(bn.cityIO.websocketURL,{share:!0,shouldReconnect:()=>!0});(0,h.useEffect)((()=>{if(!w&&y){let t=[];for(let e=0;e<y.features.length;e++)t[e]=y.features[e].properties;P({type:"UPDATE_GRID",content:{geogriddata:t}})}}),[w]),(0,h.useEffect)((()=>{x(oI(e))}),[e.GEOGRIDDATA]);const M={TILE_MAP:SL(),ABM:Dk({data:e,selected:C&&C.ABM_LAYER_CHECKBOX&&C.ABM_LAYER_CHECKBOX.selected,opacity:C&&C.ABM_LAYER_CHECKBOX&&C.ABM_LAYER_CHECKBOX.slider}),AGGREGATED_TRIPS:ok({data:e,selected:C&&C.ABM_LAYER_CHECKBOX&&C.ABM_LAYER_CHECKBOX.selected,opacity:C&&C.AGGREGATED_TRIPS_LAYER_CHECKBOX&&.01*C.AGGREGATED_TRIPS_LAYER_CHECKBOX.slider}),GRID:sI({data:y,editOn:w,state:{selectedType:S,keyDownState:c,selectedCellsState:o,pickingRadius:40,opacity:C&&C.GRID_LAYER_CHECKBOX&&.01*C.GRID_LAYER_CHECKBOX.slider},updaters:{setSelectedCellsState:s,setDraggingWhileEditing:i,setHoveredObj:b},deckGLRef:a}),ACCESS:ek({setLayerHoveredData:_,data:e,selected:C&&C.ACCESS_LAYER_CHECKBOX&&C.ACCESS_LAYER_CHECKBOX.selected,intensity:C&&C.ACCESS_LAYER_CHECKBOX&&C.ACCESS_LAYER_CHECKBOX.slider}),TEXTUAL:aI({data:e,coordinates:y&&y,opacity:C&&C.TEXTUAL_LAYER_CHECKBOX&&.01*C.TEXTUAL_LAYER_CHECKBOX.slider}),GEOJSON:lI({data:e,opacity:C&&C.GEOJSON_LAYER_CHECKBOX&&.01*C.GEOJSON_LAYER_CHECKBOX.slider}),TRAFFIC:CL({setLayerHoveredData:_,data:e,opacity:C&&C.TRAFFIC_LAYER_CHECKBOX&&.01*C.TRAFFIC_LAYER_CHECKBOX.slider})};function T(t,e){return"text"===t?function(t){let{data:e,opacity:n}=t;return new wR({id:e.id,data:e.data,pickable:e.properties.pickable||!0,getPosition:t=>[t.coordinates[0],t.coordinates[1],20],getText:t=>t.text,getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"center",background:!0,backgroundPadding:[3,3,3,3],getBackgroundColor:[255,255,255,200],getBorderWidth:1,billboard:!0,getSize:5,sizeScale:2,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"arc"===t?function(t){let{data:e,opacity:n}=t;return new ik({id:e.id,data:e.data,pickable:!0,getWidth:e.properties.width||12,getSourcePosition:t=>t.from.coordinates,getTargetPosition:t=>t.to.coordinates,getSourceColor:t=>t.sourceColor||[255,140,0],getTargetColor:t=>t.targetColor||[55,140,0],opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"heatmap"===t?function(t){let{data:e,opacity:n}=t;return new uN({id:e.id,data:e.data,getPosition:t=>t.coordinates,getWeight:t=>t.weight,aggregation:"SUM",colorRange:e.properties.colorRange||[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]],opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"column"===t?function(t){let{data:e,opacity:n}=t;return new TL({id:e.id,data:e.data,diskResolution:e.properties.resolution||12,radius:e.properties.radius||30,extruded:e.properties.extruded||!0,pickable:e.properties.pickable||!0,elevationScale:e.properties.elevationScale||1,getPosition:t=>t.centroid,getFillColor:t=>[48,128,255*t.value,255],getLineColor:[0,0,0],getElevation:t=>t.value,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"contour"===t?function(t){let{data:e,opacity:n}=t;return new BF({id:e.id,contours:e.data,cellSize:e.properties.cellSize||200,getPosition:t=>t.coordinates,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"geojson"===t?function(t){let{data:e,opacity:n}=t;return new rI({id:e.id,data:e.data,pickable:e.properties.pickable||!0,stroked:e.properties.stroked||!1,filled:e.properties.filled||!0,extruded:e.properties.extruded||!0,pointType:e.properties.pointType||"circle",lineWidthScale:e.properties.lineWidthScale||20,lineWidthMinPixels:e.properties.lineWidthMinPixels||2,getFillColor:[160,160,180,200],getLineColor:t=>t.properties.color,getPointRadius:e.properties.pointRadius||100,getLineWidth:e.properties.lineWidth||1,getElevation:e.properties.elevation||30,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"grid"===t?function(t){let{data:e,opacity:n}=t;return new $F({id:e.id,data:e.data,pickable:e.properties.pickable||!0,extruded:e.properties.extruded||!0,cellSize:e.properties.cellSize||200,elevationScale:e.properties.elevationScale||4,getPosition:t=>t.coordinates,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"gridCell"===t?function(t){let{data:e,opacity:n}=t;return new GF({id:e.id,data:e.data,pickable:e.properties.pickable||!0,extruded:e.properties.extruded||!0,cellSize:e.properties.cellSize||200,elevationScale:e.properties.elevationScale||5e3,getPosition:t=>t.centroid,getFillColor:t=>[48,128,255*t.value,255],getElevation:t=>t.value,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"hexagon"===t?function(t){let{data:e,opacity:n}=t;return new vN({id:e.id,data:e.data,pickable:e.properties.pickable||!0,extruded:e.properties.extruded||!0,radius:e.properties.radius||200,elevationScale:e.properties.elevationScale||4,getPosition:t=>t.coordinates,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"icon"===t?function(t){let{data:e,opacity:n}=t;return new Xk({id:e.id,data:e.data,pickable:e.properties.pickable||!0,getIcon:t=>({url:t.icon,width:t.width||128,height:t.height||128,anchorY:t.anchorY||128}),sizeScale:e.properties.sizeScale||10,sizeMaxPixels:e.properties.sizeMaxPixels||10,getPosition:t=>[t.coordinates[0],t.coordinates[1],t.elevation||30],opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"line"===t?function(t){let{data:e,opacity:n}=t;return new kL({id:e.id,data:e.data,pickable:e.properties.pickable||!0,getWidth:e.properties.width||50,getSourcePosition:t=>t.from.coordinates,getTargetPosition:t=>t.to.coordinates,getColor:t=>t.color||[200,140,0],opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"path"===t?function(t){let{data:e,opacity:n}=t;return new Lk({id:e.id,data:e.data,pickable:e.properties.pickable||!0,widthScale:e.properties.widthScale||20,widthMinPixels:e.properties.widthMinPixels||2,getPath:t=>t.path,getColor:t=>t.color||[255,0,0],getWidth:t=>t.width||5,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"scatterplot"===t?function(t){let{data:e,opacity:n}=t;return new Qk({id:e.id,data:e.data,pickable:e.path.properties.pickable||!0,stroked:e.path.properties.stroked||!0,filled:e.path.properties.filled||!0,radiusScale:e.path.properties.radiusScale||6,radiusMinPixels:e.path.properties.radiusMinPixels||1,radiusMaxPixels:e.path.properties.radiusMaxPixels||100,lineWidthMinPixels:e.path.properties.lineWidthMinPixels||1,getPosition:t=>t.coordinates,getRadius:t=>Math.sqrt(t.exits),getFillColor:t=>[255,140,0],getLineColor:t=>[0,0,0],opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"scenegraph"===t?function(t){let{data:e,opacity:n}=t;return new JU({id:e.id,data:e.data,pickable:e.properties.pickable||!0,scenegraph:e.properties.scenegraph||"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BoxAnimated/glTF-Binary/BoxAnimated.glb",getPosition:t=>t.coordinates,getOrientation:t=>[0,180*Math.random(),90],_animations:{"*":{speed:5}},sizeScale:e.properties.sizeScale||500,_lighting:"pbr",opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):"simpleMesh"===t?function(t){let{data:e,opacity:n}=t;return new aO({id:e.id,data:e.data,mesh:e.properties.mesh||"https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/humanoid_quad.obj",getPosition:t=>[t.position[0],t.position[1],0],getColor:t=>t.color,getOrientation:t=>[0,t.angle,0],loaders:[tk],sizeScale:e.properties.sizeScale||1,opacity:n})}({data:e,opacity:C&&C[e.id]&&.01*C[e.id].slider}):void 0}const O=["TEXT","ICON","MESH","SCENEGRAPH","SCATTERPLOT","PATH","LINE","GRID_CELL","GRID_BASE","GEOJSON_BASE","CONTOUR","COLUMN","ARC","ABM","AGGREGATED_TRIPS","TILE_MAP","GRID","TEXTUAL","GEOJSON","ACCESS","TRAFFIC","HEATMAP","HEXAGON"];return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{onKeyDown:t=>{u(t.nativeEvent.key)},onKeyUp:()=>u(null),onMouseMove:t=>f(t.nativeEvent),onMouseUp:()=>g(!1),onMouseDown:()=>g(!0),children:[A&&(0,v.jsx)(qp,{layerHoveredData:A,mousePos:d}),C.GRID_LAYER_CHECKBOX&&C.GRID_LAYER_CHECKBOX.isOn&&(0,v.jsx)(Xp,{editOn:w,mousePos:d,selectedType:S,pickingRadius:40,mouseDown:p,hoveredObj:m}),(0,v.jsx)(BT,{setDeckGLRef:l,layers:(()=>{let t=[];for(var n of O)C&&C[n+"_LAYER_CHECKBOX"]&&C[n+"_LAYER_CHECKBOX"].isOn&&t.push(M[n]);if(e.layers)for(let r=0;r<e.layers.length;r++){const n=e.layers[r].id,i=e.layers[r].type;C&&C[n]&&C[n].isOn&&t.push(T(i,e.layers[r]))}return t})(),draggingWhileEditing:r,toggleRotateCamera:E})]})})}function XU(){}ge(JU,"defaultProps",HU),ge(JU,"layerName","ScenegraphLayer");const qU=function(){let t=0;return function(){return t++}}();function YU(t){return null===t||"undefined"===typeof t}function QU(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function ZU(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const $U=t=>("number"===typeof t||t instanceof Number)&&isFinite(+t);function tV(t,e){return $U(t)?t:e}function eV(t,e){return"undefined"===typeof t?e:t}const nV=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function rV(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function iV(t,e,n,r){let i,o,s;if(QU(t))if(o=t.length,r)for(i=o-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<o;i++)e.call(n,t[i],i);else if(ZU(t))for(s=Object.keys(t),o=s.length,i=0;i<o;i++)e.call(n,t[s[i]],s[i])}function oV(t,e){let n,r,i,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],o=e[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function sV(t){if(QU(t))return t.map(sV);if(ZU(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=sV(t[n[i]]);return e}return t}function aV(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function lV(t,e,n,r){if(!aV(t))return;const i=e[t],o=n[t];ZU(i)&&ZU(o)?cV(i,o,r):e[t]=sV(o)}function cV(t,e,n){const r=QU(e)?e:[e],i=r.length;if(!ZU(t))return t;const o=(n=n||{}).merger||lV;for(let s=0;s<i;++s){if(!ZU(e=r[s]))continue;const i=Object.keys(e);for(let r=0,s=i.length;r<s;++r)o(i[r],t,e,n)}return t}function uV(t,e){return cV(t,e,{merger:dV})}function dV(t,e,n){if(!aV(t))return;const r=e[t],i=n[t];ZU(r)&&ZU(i)?uV(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=sV(i))}const hV={"":t=>t,x:t=>t.x,y:t=>t.y};function fV(t,e){const n=hV[e]||(hV[e]=function(t){const e=function(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function pV(t){return t.charAt(0).toUpperCase()+t.slice(1)}const gV=t=>"undefined"!==typeof t,mV=t=>"function"===typeof t,vV=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const bV=Math.PI,yV=2*bV,xV=yV+bV,AV=Number.POSITIVE_INFINITY,_V=bV/180,wV=bV/2,SV=bV/4,CV=2*bV/3,EV=Math.log10,PV=Math.sign;function MV(t){const e=Math.round(t);t=OV(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(EV(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function TV(t){return!isNaN(parseFloat(t))&&isFinite(t)}function OV(t,e,n){return Math.abs(t-e)<n}function kV(t,e,n){let r,i,o;for(r=0,i=t.length;r<i;r++)o=t[r][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function RV(t){return t*(bV/180)}function IV(t){return t*(180/bV)}function BV(t){if(!$U(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function LV(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*bV&&(o+=yV),{angle:o,distance:i}}function DV(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function FV(t,e){return(t-e+xV)%yV-bV}function NV(t){return(t%yV+yV)%yV}function jV(t,e,n,r){const i=NV(t),o=NV(e),s=NV(n),a=NV(o-i),l=NV(s-i),c=NV(i-o),u=NV(i-s);return i===o||i===s||r&&o===s||a>l&&c<u}function zV(t,e,n){return Math.max(e,Math.min(n,t))}function UV(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function VV(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const GV=(t,e,n,r)=>VV(t,n,r?r=>t[r][e]<=n:r=>t[r][e]<n),WV=(t,e,n)=>VV(t,n,(r=>t[r][e]>=n));const HV=["push","pop","shift","splice","unshift"];function JV(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(HV.forEach((e=>{delete t[e]})),delete t._chartjs)}function KV(t){const e=new Set;let n,r;for(n=0,r=t.length;n<r;++n)e.add(t[n]);return e.size===r?t:Array.from(e)}const XV="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function qV(t,e,n){const r=n||(t=>Array.prototype.slice.call(t));let i=!1,o=[];return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];o=r(s),i||(i=!0,XV.call(window,(()=>{i=!1,t.apply(e,o)})))}}const YV=t=>"start"===t?"left":"end"===t?"right":"center",QV=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function ZV(t,e,n){const r=e.length;let i=0,o=r;if(t._sorted){const{iScale:s,_parsed:a}=t,l=s.axis,{min:c,max:u,minDefined:d,maxDefined:h}=s.getUserBounds();d&&(i=zV(Math.min(GV(a,s.axis,c).lo,n?r:GV(e,l,s.getPixelForValue(c)).lo),0,r-1)),o=h?zV(Math.max(GV(a,s.axis,u,!0).hi+1,n?0:GV(e,l,s.getPixelForValue(u),!0).hi+1),i,r)-i:r-i}return{start:i,count:o}}function $V(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const tG=t=>0===t||1===t,eG=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*yV/n),nG=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*yV/n)+1,rG={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*wV),easeOutSine:t=>Math.sin(t*wV),easeInOutSine:t=>-.5*(Math.cos(bV*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>tG(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>tG(t)?t:eG(t,.075,.3),easeOutElastic:t=>tG(t)?t:nG(t,.075,.3),easeInOutElastic(t){const e=.1125;return tG(t)?t:t<.5?.5*eG(2*t,e,.45):.5+.5*nG(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-rG.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*rG.easeInBounce(2*t):.5*rG.easeOutBounce(2*t-1)+.5};function iG(t){return t+.5|0}const oG=(t,e,n)=>Math.max(Math.min(t,n),e);function sG(t){return oG(iG(2.55*t),0,255)}function aG(t){return oG(iG(255*t),0,255)}function lG(t){return oG(iG(t/2.55)/100,0,1)}function cG(t){return oG(iG(100*t),0,100)}const uG={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},dG=[..."0123456789ABCDEF"],hG=t=>dG[15&t],fG=t=>dG[(240&t)>>4]+dG[15&t],pG=t=>(240&t)>>4===(15&t);function gG(t){var e=(t=>pG(t.r)&&pG(t.g)&&pG(t.b)&&pG(t.a))(t)?hG:fG;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const mG=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vG(t,e,n){const r=e*Math.min(n,1-n),i=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function bG(t,e,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+t/60)%6;return n-n*e*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function yG(t,e,n){const r=vG(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function xG(t){const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),o=Math.min(e,n,r),s=(i+o)/2;let a,l,c;return i!==o&&(c=i-o,l=s>.5?c/(2-i-o):c/(i+o),a=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(e,n,r,c,i),a=60*a+.5),[0|a,l||0,s]}function AG(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(aG)}function _G(t,e,n){return AG(vG,t,e,n)}function wG(t){return(t%360+360)%360}function SG(t){const e=mG.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?sG(+e[5]):aG(+e[5]));const i=wG(+e[2]),o=+e[3]/100,s=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return AG(yG,t,e,n)}(i,o,s):"hsv"===e[1]?function(t,e,n){return AG(bG,t,e,n)}(i,o,s):_G(i,o,s),{r:n[0],g:n[1],b:n[2],a:r}}const CG={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},EG={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let PG;function MG(t){PG||(PG=function(){const t={},e=Object.keys(EG),n=Object.keys(CG);let r,i,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],i=0;i<n.length;i++)o=n[i],a=a.replace(o,CG[o]);o=parseInt(EG[s],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),PG.transparent=[0,0,0,0]);const e=PG[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const TG=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const OG=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,kG=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function RG(t,e,n){if(t){let r=xG(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=_G(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function IG(t,e){return t?Object.assign(e||{},t):t}function BG(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=aG(t[3]))):(e=IG(t,{r:0,g:0,b:0,a:1})).a=aG(e.a),e}function LG(t){return"r"===t.charAt(0)?function(t){const e=TG.exec(t);let n,r,i,o=255;if(e){if(e[7]!==n){const t=+e[7];o=e[8]?sG(t):oG(255*t,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?sG(n):oG(n,0,255)),r=255&(e[4]?sG(r):oG(r,0,255)),i=255&(e[6]?sG(i):oG(i,0,255)),{r:n,g:r,b:i,a:o}}}(t):SG(t)}class DG{constructor(t){if(t instanceof DG)return t;const e=typeof t;let n;"object"===e?n=BG(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*uG[t[1]],g:255&17*uG[t[2]],b:255&17*uG[t[3]],a:5===n?17*uG[t[4]]:255}:7!==n&&9!==n||(e={r:uG[t[1]]<<4|uG[t[2]],g:uG[t[3]]<<4|uG[t[4]],b:uG[t[5]]<<4|uG[t[6]],a:9===n?uG[t[7]]<<4|uG[t[8]]:255})),e}(t)||MG(t)||LG(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=IG(this._rgb);return t&&(t.a=lG(t.a)),t}set rgb(t){this._rgb=BG(t)}rgbString(){return this._valid?function(t){return t&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(lG(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"))}(this._rgb):void 0}hexString(){return this._valid?gG(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=xG(t),n=e[0],r=cG(e[1]),i=cG(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(lG(t.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const o=e===i?.5:e,s=2*o-1,a=n.a-r.a,l=((s*a===-1?s:(s+a)/(1+s*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const r=kG(lG(t.r)),i=kG(lG(t.g)),o=kG(lG(t.b));return{r:aG(OG(r+n*(kG(lG(e.r))-r))),g:aG(OG(i+n*(kG(lG(e.g))-i))),b:aG(OG(o+n*(kG(lG(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new DG(this.rgb)}alpha(t){return this._rgb.a=aG(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=iG(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return RG(this._rgb,2,t),this}darken(t){return RG(this._rgb,2,-t),this}saturate(t){return RG(this._rgb,1,t),this}desaturate(t){return RG(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=xG(t);n[0]=wG(n[0]+e),n=_G(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function FG(t){return new DG(t)}function NG(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function jG(t){return NG(t)?t:FG(t)}function zG(t){return NG(t)?t:FG(t).saturate(.5).darken(.1).hexString()}const UG=Object.create(null),VG=Object.create(null);function GG(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const e=n[r];t=t[e]||(t[e]=Object.create(null))}return t}function WG(t,e,n){return"string"===typeof e?cV(GG(t,e),n):cV(GG(t,""),e)}var HG=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>zG(e.backgroundColor),this.hoverBorderColor=(t,e)=>zG(e.borderColor),this.hoverColor=(t,e)=>zG(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return WG(this,t,e)}get(t){return GG(this,t)}describe(t,e){return WG(VG,t,e)}override(t,e){return WG(UG,t,e)}route(t,e,n,r){const i=GG(this,t),o=GG(this,n),s="_"+e;Object.defineProperties(i,{[s]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=o[r];return ZU(t)?Object.assign({},e,t):eV(t,e)},set(t){this[s]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function JG(t,e,n,r,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,n.push(i)),o>r&&(r=o),r}function KG(t,e,n,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let s=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],void 0!==d&&null!==d&&!0!==QU(d))s=JG(t,i,o,s,d);else if(QU(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||QU(h)||(s=JG(t,i,o,s,h));t.restore();const f=o.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[o[l]];o.splice(0,f)}return s}function XG(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function qG(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function YG(t,e,n,r){QG(t,e,n,r,null)}function QG(t,e,n,r,i){let o,s,a,l,c,u;const d=e.pointStyle,h=e.rotation,f=e.radius;let p=(h||0)*_V;if(d&&"object"===typeof d&&(o=d.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,r),t.rotate(p),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void t.restore();if(!(isNaN(f)||f<=0)){switch(t.beginPath(),d){default:i?t.ellipse(n,r,i/2,f,0,0,yV):t.arc(n,r,f,0,yV),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(p)*f,r-Math.cos(p)*f),p+=CV,t.lineTo(n+Math.sin(p)*f,r-Math.cos(p)*f),p+=CV,t.lineTo(n+Math.sin(p)*f,r-Math.cos(p)*f),t.closePath();break;case"rectRounded":c=.516*f,l=f-c,s=Math.cos(p+SV)*l,a=Math.sin(p+SV)*l,t.arc(n-s,r-a,c,p-bV,p-wV),t.arc(n+a,r-s,c,p-wV,p),t.arc(n+s,r+a,c,p,p+wV),t.arc(n-a,r+s,c,p+wV,p+bV),t.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*f,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}p+=SV;case"rectRot":s=Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(n-s,r-a),t.lineTo(n+a,r-s),t.lineTo(n+s,r+a),t.lineTo(n-a,r+s),t.closePath();break;case"crossRot":p+=SV;case"cross":s=Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(n-s,r-a),t.lineTo(n+s,r+a),t.moveTo(n+a,r-s),t.lineTo(n-a,r+s);break;case"star":s=Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(n-s,r-a),t.lineTo(n+s,r+a),t.moveTo(n+a,r-s),t.lineTo(n-a,r+s),p+=SV,s=Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(n-s,r-a),t.lineTo(n+s,r+a),t.moveTo(n+a,r-s),t.lineTo(n-a,r+s);break;case"line":s=i?i/2:Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(n-s,r-a),t.lineTo(n+s,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(p)*f,r+Math.sin(p)*f)}t.fill(),e.borderWidth>0&&t.stroke()}}function ZG(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function $G(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function tW(t){t.restore()}function eW(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!==!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function nW(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function rW(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=QU(e)?e:[e],a=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);YU(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<s.length;++l)c=s[l],a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),YU(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,n,r,o.maxWidth)),t.fillText(c,n,r,o.maxWidth),iW(t,n,r,c,o),r+=i.lineHeight;t.restore()}function iW(t,e,n,r,i){if(i.strikethrough||i.underline){const o=t.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,u),t.lineTo(a,u),t.stroke()}}function oW(t,e){const{x:n,y:r,w:i,h:o,radius:s}=e;t.arc(n+s.topLeft,r+s.topLeft,s.topLeft,-wV,bV,!0),t.lineTo(n,r+o-s.bottomLeft),t.arc(n+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,bV,wV,!0),t.lineTo(n+i-s.bottomRight,r+o),t.arc(n+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,wV,0,!0),t.lineTo(n+i,r+s.topRight),t.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-wV,!0),t.lineTo(n+s.topLeft,r)}const sW=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),aW=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function lW(t,e){const n=(""+t).match(sW);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const cW=t=>+t||0;function uW(t,e){const n={},r=ZU(e),i=r?Object.keys(e):e,o=ZU(t)?r?n=>eV(t[n],t[e[n]]):e=>t[e]:()=>t;for(const s of i)n[s]=cW(o(s));return n}function dW(t){return uW(t,{top:"y",right:"x",bottom:"y",left:"x"})}function hW(t){return uW(t,["topLeft","topRight","bottomLeft","bottomRight"])}function fW(t){const e=dW(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function pW(t,e){t=t||{},e=e||HG.font;let n=eV(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let r=eV(t.style,e.style);r&&!(""+r).match(aW)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const i={family:eV(t.family,e.family),lineHeight:lW(eV(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:eV(t.weight,e.weight),string:""};return i.string=function(t){return!t||YU(t.size)||YU(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function gW(t,e,n,r){let i,o,s,a=!0;for(i=0,o=t.length;i<o;++i)if(s=t[i],void 0!==s&&(void 0!==e&&"function"===typeof s&&(s=s(e),a=!1),void 0!==n&&QU(s)&&(s=s[n%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function mW(t,e){return Object.assign(Object.create(t),e)}function vW(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>t[0];gV(r)||(r=MW("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:r,_getTarget:i,override:i=>vW([i,...t],e,n,r)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,r)=>_W(n,r,(()=>function(t,e,n,r){let i;for(const o of e)if(i=MW(xW(o,t),n),gV(i))return AW(t,i)?EW(n,r,t,i):i}(r,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>TW(t).includes(e),ownKeys:t=>TW(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function bW(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:yW(t,r),setContext:e=>bW(t,e,n,r),override:i=>bW(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>_W(t,e,(()=>function(t,e,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=t;let a=r[e];mV(a)&&s.isScriptable(e)&&(a=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t),e=e(o,s||r),a.delete(t),AW(t,e)&&(e=EW(i._scopes,i,t,e));return e}(e,a,t,n));QU(a)&&a.length&&(a=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=n;if(gV(o.index)&&r(t))e=e[o.index%e.length];else if(ZU(e[0])){const n=e,r=i._scopes.filter((t=>t!==n));e=[];for(const l of n){const n=EW(r,i,t,l);e.push(bW(n,o,s&&s[t],a))}}return e}(e,a,t,s.isIndexable));AW(e,a)&&(a=bW(a,i,o&&o[e],s));return a}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,r)=>(t[n]=r,delete e[n],!0)})}function yW(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:mV(n)?n:()=>n,isIndexable:mV(r)?r:()=>r}}const xW=(t,e)=>t?t+pV(e):e,AW=(t,e)=>ZU(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function _W(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function wW(t,e,n){return mV(t)?t(e,n):t}const SW=(t,e)=>!0===t?e:"string"===typeof t?fV(e,t):void 0;function CW(t,e,n,r,i){for(const o of e){const e=SW(n,o);if(e){t.add(e);const o=wW(e._fallback,n,i);if(gV(o)&&o!==n&&o!==r)return o}else if(!1===e&&gV(r)&&n!==r)return null}return!1}function EW(t,e,n,r){const i=e._rootScopes,o=wW(e._fallback,n,r),s=[...t,...i],a=new Set;a.add(r);let l=PW(a,s,n,o||n,r);return null!==l&&((!gV(o)||o===n||(l=PW(a,s,o,l,r),null!==l))&&vW(Array.from(a),[""],i,o,(()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];if(QU(i)&&ZU(n))return n;return i}(e,n,r))))}function PW(t,e,n,r,i){for(;n;)n=CW(t,e,n,r,i);return n}function MW(t,e){for(const n of e){if(!n)continue;const e=n[t];if(gV(e))return e}}function TW(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function OW(t,e,n,r){const{iScale:i}=t,{key:o="r"}=this._parsing,s=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],s[a]={r:i.parse(fV(u,o),c)};return s}const kW=Number.EPSILON||1e-14,RW=(t,e)=>e<t.length&&!t[e].skip&&t[e],IW=t=>"x"===t?"y":"x";function BW(t,e,n,r){const i=t.skip?e:t,o=e,s=n.skip?e:n,a=DV(o,i),l=DV(s,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:o.x-d*(s.x-i.x),y:o.y-d*(s.y-i.y)},next:{x:o.x+h*(s.x-i.x),y:o.y+h*(s.y-i.y)}}}function LW(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=IW(e),r=t.length,i=Array(r).fill(0),o=Array(r);let s,a,l,c=RW(t,0);for(s=0;s<r;++s)if(a=l,l=c,c=RW(t,s+1),l){if(c){const t=c[e]-l[e];i[s]=0!==t?(c[n]-l[n])/t:0}o[s]=a?c?PV(i[s-1])!==PV(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(t,e,n){const r=t.length;let i,o,s,a,l,c=RW(t,0);for(let u=0;u<r-1;++u)l=c,c=RW(t,u+1),l&&c&&(OV(e[u],0,kW)?n[u]=n[u+1]=0:(i=n[u]/e[u],o=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[u]=i*s*e[u],n[u+1]=o*s*e[u])))}(t,i,o),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=IW(n),i=t.length;let o,s,a,l=RW(t,0);for(let c=0;c<i;++c){if(s=a,a=l,l=RW(t,c+1),!a)continue;const i=a[n],u=a[r];s&&(o=(i-s[n])/3,a["cp1".concat(n)]=i-o,a["cp1".concat(r)]=u-o*e[c]),l&&(o=(l[n]-i)/3,a["cp2".concat(n)]=i+o,a["cp2".concat(r)]=u+o*e[c])}}(t,o,e)}function DW(t,e,n){return Math.max(Math.min(t,n),e)}function FW(t,e,n,r,i){let o,s,a,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)LW(t,i);else{let n=r?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)a=t[o],l=BW(n,a,t[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,r,i,o,s,a=ZG(t[0],e);for(n=0,r=t.length;n<r;++n)s=o,o=a,a=n<r-1&&ZG(t[n+1],e),o&&(i=t[n],s&&(i.cp1x=DW(i.cp1x,e.left,e.right),i.cp1y=DW(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=DW(i.cp2x,e.left,e.right),i.cp2y=DW(i.cp2y,e.top,e.bottom)))}(t,n)}function NW(){return"undefined"!==typeof window&&"undefined"!==typeof document}function jW(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function zW(t,e,n){let r;return"string"===typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const UW=t=>window.getComputedStyle(t,null);const VW=["top","right","bottom","left"];function GW(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=VW[i];r[o]=parseFloat(t[e+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const WW=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function HW(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=UW(n),o="border-box"===i.boxSizing,s=GW(i,"padding"),a=GW(i,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:o}=r;let s,a,l=!1;if(WW(i,o,t.target))s=i,a=o;else{const t=e.getBoundingClientRect();s=r.clientX-t.left,a=r.clientY-t.top,l=!0}return{x:s,y:a,box:l}}(t,n),d=s.left+(u&&a.left),h=s.top+(u&&a.top);let{width:f,height:p}=e;return o&&(f-=s.width+a.width,p-=s.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const JW=t=>Math.round(10*t)/10;function KW(t,e,n,r){const i=UW(t),o=GW(i,"margin"),s=zW(i.maxWidth,t,"clientWidth")||AV,a=zW(i.maxHeight,t,"clientHeight")||AV,l=function(t,e,n){let r,i;if(void 0===e||void 0===n){const o=jW(t);if(o){const t=o.getBoundingClientRect(),s=UW(o),a=GW(s,"border","width"),l=GW(s,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,r=zW(s.maxWidth,o,"clientWidth"),i=zW(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||AV,maxHeight:i||AV}}(t,e,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const t=GW(i,"border","width"),e=GW(i,"padding");c-=e.width+t.width,u-=e.height+t.height}return c=Math.max(0,c-o.width),u=Math.max(0,r?Math.floor(c/r):u-o.height),c=JW(Math.min(c,s,l.maxWidth)),u=JW(Math.min(u,a,l.maxHeight)),c&&!u&&(u=JW(c/2)),{width:c,height:u}}function XW(t,e,n){const r=e||1,i=Math.floor(t.height*r),o=Math.floor(t.width*r);t.height=i/r,t.width=o/r;const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height="".concat(t.height,"px"),s.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==r||s.height!==i||s.width!==o)&&(t.currentDevicePixelRatio=r,s.height=i,s.width=o,t.ctx.setTransform(r,0,0,r,0,0),!0)}const qW=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return t}();function YW(t,e){const n=function(t,e){return UW(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function QW(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ZW(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function $W(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=QW(t,i,n),a=QW(i,o,n),l=QW(o,e,n),c=QW(s,a,n),u=QW(a,l,n);return QW(c,u,n)}const tH=new Map;function eH(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let r=tH.get(n);return r||(r=new Intl.NumberFormat(t,e),tH.set(n,r)),r}(e,n).format(t)}function nH(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function rH(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function iH(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function oH(t){return"angle"===t?{between:jV,compare:FV,normalize:NV}:{between:UV,compare:(t,e)=>t-e,normalize:t=>t}}function sH(t){let{start:e,end:n,count:r,loop:i,style:o}=t;return{start:e%r,end:n%r,loop:i&&(n-e+1)%r===0,style:o}}function aH(t,e,n){if(!n)return[t];const{property:r,start:i,end:o}=n,s=e.length,{compare:a,between:l,normalize:c}=oH(r),{start:u,end:d,loop:h,style:f}=function(t,e,n){const{property:r,start:i,end:o}=n,{between:s,normalize:a}=oH(r),l=e.length;let c,u,{start:d,end:h,loop:f}=t;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&s(a(e[d%l][r]),i,o);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:t.style}}(t,e,n),p=[];let g,m,v,b=!1,y=null;const x=()=>b||l(i,v,g)&&0!==a(i,v),A=()=>!b||0===a(o,g)||l(o,v,g);for(let _=u,w=u;_<=d;++_)m=e[_%s],m.skip||(g=c(m[r]),g!==v&&(b=l(g,i,o),null===y&&x()&&(y=0===a(g,i)?_:w),null!==y&&A()&&(p.push(sH({start:y,end:_,loop:h,count:s,style:f})),y=null),w=_,v=g));return null!==y&&p.push(sH({start:y,end:d,loop:h,count:s,style:f})),p}function lH(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const o=aH(r[i],t.points,e);o.length&&n.push(...o)}return n}function cH(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){const i=t._chart.getContext(),o=uH(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=n.length,c=[];let u=o,d=e[0].start,h=d;function f(t,e,r,i){const o=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=o;for(;n[e%l].skip;)e+=o;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:r,style:i}),u=i,d=e%l)}}for(const p of e){d=a?d:p.start;let t,e=n[d%l];for(h=d+1;h<=p.end;h++){const o=n[h%l];t=uH(r.setContext(mW(i,{type:"segment",p0:e,p1:o,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),dH(t,u)&&f(d,h-1,p.loop,u),e=o,u=t}d<h-1&&f(d,h-1,p.loop,u)}return c}(t,e,n,r):e}function uH(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function dH(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var hH=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],o=e.duration;i.forEach((r=>r({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=XV.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,s=i.length-1,a=!1;for(;s>=0;--s)o=i[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),a=!0):(i[s]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const fH="transparent",pH={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const r=jG(t||fH),i=r.valid&&jG(e||fH);return i&&i.valid?i.mix(r,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class gH{constructor(t,e,n,r){const i=e[n];r=gW([t.to,r,i,t.from]);const o=gW([t.from,i,r]);this._active=!0,this._fn=t.fn||pH[t.type||typeof o],this._easing=rG[t.easing]||rG.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=gW([t.to,e,r,t.from]),this._from=gW([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,s=this._to;let a;if(this._active=i!==s&&(o||e<n),!this._active)return this._target[r]=s,void this._notify(!0);e<0?this._target[r]=i:(a=e/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}HG.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const mH=Object.keys(HG.animation);HG.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),HG.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),HG.describe("animations",{_fallback:"animation"}),HG.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class vH{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!ZU(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((n=>{const r=t[n];if(!ZU(r))return;const i={};for(const t of mH)i[t]=r[t];(QU(r.properties)&&r.properties||[n]).forEach((t=>{t!==n&&e.has(t)||e.set(t,i)}))}))}_animateOptions(t,e){const n=e.options,r=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const e=t[r[i]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(t,e));continue}const c=e[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(i[l]=u=new gH(d,t,l,c),r.push(u)):t[l]=c}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(hH.add(this._chart,n),!0):void 0}}function bH(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:r?o:i,end:r?i:o}}function yH(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function xH(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.keys,o="single"===r.mode;let s,a,l,c;if(null!==e){for(s=0,a=i.length;s<a;++s){if(l=+i[s],l===n){if(r.all)continue;break}c=t.values[l],$U(c)&&(o||0===e||PV(e)===PV(c))&&(e+=c)}return e}}function AH(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function _H(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function wH(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function SH(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=r,l=o.axis,c=s.axis,u=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(o,s,r),d=e.length;let h;for(let f=0;f<d;++f){const t=e[f],{[l]:n,[c]:o}=t;h=(t._stacks||(t._stacks={}))[c]=_H(i,u,n),h[a]=o,h._top=wH(h,s,!0,r.type),h._bottom=wH(h,s,!1,r.type)}}function CH(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function EH(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n]}}}const PH=t=>"reset"===t||"none"===t,MH=(t,e)=>e?t:Object.assign({},t);class TH{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=AH(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&EH(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,i=e.xAxisID=eV(n.xAxisID,CH(t,"x")),o=e.yAxisID=eV(n.yAxisID,CH(t,"y")),s=e.rAxisID=eV(n.rAxisID,CH(t,"r")),a=e.indexAxis,l=e.iAxisID=r(a,i,o,s),c=e.vAxisID=r(a,o,i,s);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(s),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&JV(this._data,this),t._stacked&&EH(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(ZU(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let r,i,o;for(r=0,i=e.length;r<i;++r)o=e[r],n[r]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){JV(n,this);const t=this._cachedMeta;EH(t),t._parsed=[]}e&&Object.isExtensible(e)&&function(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),HV.forEach((e=>{const n="_onData"+pV(e),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];const s=r.apply(this,i);return t._chartjs.listeners.forEach((t=>{"function"===typeof t[n]&&t[n](...i)})),s}})})))}(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=AH(e.vScale,e),e.stack!==n.stack&&(r=!0,EH(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&SH(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,s=i.axis;let a,l,c,u=0===t&&e===r.length||n._sorted,d=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=QU(r[t])?this.parseArrayData(n,r,t,e):ZU(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const i=()=>null===l[s]||d&&l[s]<d[s];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(i()&&(u=!1),d=l);n._sorted=u}o&&SH(this,c)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:o}=t,s=i.axis,a=o.axis,l=i.getLabels(),c=i===o,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[s]:c||i.parse(l[f],f),[a]:o.parse(e[f],f)};return u}parseArrayData(t,e,n,r){const{xScale:i,yScale:o}=t,s=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],s[a]={x:i.parse(u[0],c),y:o.parse(u[1],c)};return s}parseObjectData(t,e,n,r){const{xScale:i,yScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=e[d],l[c]={x:i.parse(fV(h,s),d),y:o.parse(fV(h,a),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,o=e[t.axis];return xH({keys:yH(r,!0),values:e._stacks[t.axis]},o,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let o=null===i?NaN:i;const s=r&&n._stacks[e.axis];r&&s&&(r.values=s,o=xH(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,o=r.length,s=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:yH(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(s);let d,h;function f(){h=r[d];const e=h[s.axis];return!$U(h[t.axis])||c>e||u<e}for(d=0;d<o&&(f()||(this.updateRangeFromParsed(l,t,h,a),!i));++d);if(i)for(d=o-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,t,h,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=e.length;r<i;++r)o=e[r][t.axis],$U(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,r,i;return ZU(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(eV(this.options.clip,function(t,e,n){if(!1===n)return!1;const r=bH(t,n),i=bH(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,i,s,a),c=s;c<s+a;++c){const e=r[c];e.hidden||(e.active&&l?o.push(e):e.draw(t,i))}for(c=0;c<o.length;++c)o[c].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=function(t,e,n){return mW(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=function(t,e){return mW(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===e,i=this._cachedDataOpts,o=t+"-"+e,s=i[o],a=this.enableOptionSharing&&gV(n);if(s)return MH(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=r?["".concat(t,"Hover"),"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(HG.elements[t]),f=l.resolveNamedOptions(d,h,(()=>this.getContext(n,r)),u);return f.$shared&&(f.$shared=a,i[o]=Object.freeze(MH(f,a))),f}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,o="animation-".concat(e),s=i[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),o=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(o,this.getContext(t,n,e))}const l=new vH(r,a&&a.animations);return a&&a._cacheable&&(i[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||PH(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:o}}updateElement(t,e,n,r){PH(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!PH(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[s,a,l]of this._syncList)this[s](a,l);this._syncList=[];const r=n.length,i=e.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,o=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]};for(a(i),s=t;s<o;++s)i[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&EH(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function OH(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,i=n.length;e<i;e++)r=r.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=KV(r.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let r,i,o,s,a=e._length;const l=()=>{32767!==o&&-32768!==o&&(gV(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),l();for(s=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),l();return a}function kH(t,e,n,r){return QU(t)?function(t,e,n,r){const i=n.parse(t[0],r),o=n.parse(t[1],r),s=Math.min(i,o),a=Math.max(i,o);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:o,min:s,max:a}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function RH(t,e,n,r){const i=t.iScale,o=t.vScale,s=i.getLabels(),a=i===o,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=e[c],d={},d[i.axis]=a||i.parse(s[c],c),l.push(kH(h,d,o,c));return l}function IH(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function BH(t,e,n,r){let i=e.borderSkipped;const o={};if(!i)return void(t.borderSkipped=o);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:u}=function(t){let e,n,r,i,o;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:e,top:i,bottom:o}}(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(o[LH(u,s,a,l)]=!0,i=c)),o[LH(i,s,a,l)]=!0,t.borderSkipped=o}function LH(t,e,n,r){var i,o,s;return r?(s=n,t=DH(t=(i=t)===(o=e)?s:i===s?o:i,n,e)):t=DH(t,e,n),t}function DH(t,e,n){return"start"===t?e:"end"===t?n:t}function FH(t,e,n){let{inflateAmount:r}=e;t.inflateAmount="auto"===r?1===n?.33:0:r}TH.defaults={},TH.prototype.datasetElementType=null,TH.prototype.dataElementType=null;class NH extends TH{parsePrimitiveData(t,e,n,r){return RH(t,e,n,r)}parseArrayData(t,e,n,r){return RH(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:i,vScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?s:a,c="x"===o.axis?s:a,u=[];let d,h,f,p;for(d=n,h=n+r;d<h;++d)p=e[d],f={},f[i.axis]=i.parse(fV(p,l),d),u.push(kH(fV(p,c),f,o,d));return u}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),o=i._custom,s=IH(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const i="reset"===r,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,r);for(let h=e;h<e+n;h++){const e=this.getParsed(h),n=i||YU(e[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(e._stacks||{})[s.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||IH(e._custom)||o===p._top||o===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(g.options=u||this.resolveDataElementOptions(h,t[h].active?"active":r));const m=g.options||t[h].options;BH(g,m,p,o),FH(g,m,c.ratio),this.updateElement(t[h],h,g,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),i=n.options.stacked,o=[],s=t=>{const n=t.controller.getParsed(e),r=n&&n[t.vScale.axis];if(YU(r)||isNaN(r))return!0};for(const a of r)if((void 0===e||!s(a))&&((!1===i||-1===o.indexOf(a.stack)||void 0===i&&void 0===a.stack)&&o.push(a.stack),a.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,o;for(i=0,o=e.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const s=t.barThickness;return{min:s||OH(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n},options:{base:r,minBarLength:i}}=this,o=r||0,s=this.getParsed(t),a=s._custom,l=IH(a);let c,u,d=s[e.axis],h=0,f=n?this.applyStack(e,s,n):d;f!==d&&(h=f-d,f=d),l&&(d=a.barStart,f=a.barEnd-a.barStart,0!==d&&PV(d)!==PV(a.barEnd)&&(h=0),h+=d);const p=YU(r)||l?h:r;let g=e.getPixelForValue(p);if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(h+f):g,u=c-g,Math.abs(u)<i){u=function(t,e,n){return 0!==t?PV(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(u,e,o)*i,d===o&&(g-=u/2);const t=e.getPixelForDecimal(0),n=e.getPixelForDecimal(1),r=Math.min(t,n),s=Math.max(t,n);g=Math.max(Math.min(g,s),r),c=g+u}if(g===e.getPixelForValue(o)){const t=PV(u)*e.getLineWidthForValue(o)/2;g+=t,u-=t}return{size:u,base:g,head:c,center:c+u/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,i=r.skipNull,o=eV(r.maxBarThickness,1/0);let s,a;if(e.grouped){const n=i?this._getStackCount(t):e.stackCount,l="flex"===r.barThickness?function(t,e,n,r){const i=e.pixels,o=i[t];let s=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;null===s&&(s=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-s);const c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/r,ratio:n.barPercentage,start:c}}(t,e,r,n):function(t,e,n,r){const i=n.barThickness;let o,s;return YU(i)?(o=e.min*n.categoryPercentage,s=n.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:e.pixels[t]-o/2}}(t,e,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0);s=l.start+l.chunk*c+l.chunk/2,a=Math.min(o,l.chunk*l.ratio)}else s=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(o,e.min*e.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[e.axis]&&n[i].draw(this._ctx)}}NH.id="bar",NH.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},NH.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class jH extends TH{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+n).radius;return i}parseArrayData(t,e,n,r){const i=super.parseArrayData(t,e,n,r);for(let o=0;o<i.length;o++){const t=e[n+o];i[o]._custom=eV(t[2],this.resolveDataElementOptions(o+n).radius)}return i}parseObjectData(t,e,n,r){const i=super.parseObjectData(t,e,n,r);for(let o=0;o<i.length;o++){const t=e[n+o];i[o]._custom=eV(t&&t.r&&+t.r,this.resolveDataElementOptions(o+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:n,yScale:r}=e,i=this.getParsed(t),o=n.getLabelForValue(i.x),s=r.getLabelForValue(i.y),a=i._custom;return{label:e.label,value:"("+o+", "+s+(a?", "+a:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,r),c=o.axis,u=s.axis;for(let d=e;d<e+n;d++){const e=t[d],n=!i&&this.getParsed(d),h={},f=h[c]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),p=h[u]=i?s.getBasePixel():s.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=a||this.resolveDataElementOptions(d,e.active?"active":r),i&&(h.options.radius=0)),this.updateElement(e,d,h,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==e&&(r.radius=0),r.radius+=eV(n&&n._custom,i),r}}jH.id="bubble",jH.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},jH.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class zH extends TH{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,o,s=t=>+n[t];if(ZU(n[t])){const{key:t="value"}=this._parsing;s=e=>+fV(n[e],t)}for(i=t,o=t+e;i<o;++i)r._parsed[i]=s(i)}}_getRotation(){return RV(this.options.rotation-90)}_getCircumference(){return RV(this.options.circumference)}_getRotationExtents(){let t=yV,e=-yV;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-o)/2,0),a=Math.min((l=this.options.cutout,c=s,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let r=1,i=1,o=0,s=0;if(e<yV){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(t,e,r)=>jV(t,a,l,!0)?1:Math.max(e,e*n,r,r*n),p=(t,e,r)=>jV(t,a,l,!0)?-1:Math.min(e,e*n,r,r*n),g=f(0,c,d),m=f(wV,u,h),v=p(bV,c,d),b=p(bV+wV,u,h);r=(g-v)/2,i=(m-b)/2,o=-(g+v)/2,s=-(m+b)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}(h,d,a),v=(n.width-o)/f,b=(n.height-o)/p,y=Math.max(Math.min(v,b)/2,0),x=nV(this.options.radius,y),A=(x-Math.max(x*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,r.total=this.calculateTotal(),this.outerRadius=x-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/yV)}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,u=i&&a.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,r);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,i);for(g=e;g<e+n;++g){const e=this._circumference(g,i),n=t[g],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:h,innerRadius:d};p&&(o.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=e,this.updateElement(n,g,o,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?yV*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=eH(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,o,s,a;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),t=o.data,s=o.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)a=s.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(eV(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}zH.id="doughnut",zH.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},zH.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},zH.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,r)=>{const i=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return QU(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class UH extends TH{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=e,o=this.chart._animationsDisabled;let{start:s,count:a}=ZV(e,r,o);this._drawStart=s,this._drawCount=a,$V(e)&&(s=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},t),this.updateElements(r,s,a,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,r),d=o.axis,h=s.axis,{spanGaps:f,segment:p}=this.options,g=TV(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r;let v=e>0&&this.getParsed(e-1);for(let b=e;b<e+n;++b){const e=t[b],n=this.getParsed(b),f=m?e:{},y=YU(n[h]),x=f[d]=o.getPixelForValue(n[d],b),A=f[h]=i||y?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[h],b);f.skip=isNaN(x)||isNaN(A)||y,f.stop=b>0&&Math.abs(n[d]-v[d])>g,p&&(f.parsed=n,f.raw=l.data[b]),u&&(f.options=c||this.resolveDataElementOptions(b,e.active?"active":r)),m||this.updateElement(e,b,f,r),v=n}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}UH.id="line",UH.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},UH.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class VH extends TH{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=eH(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,e,n,r){return OW.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*bV;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<e;++d)h+=this._computeAngle(d,r,f);for(d=e;d<e+n;d++){const e=t[d];let n=h,p=h+this._computeAngle(d,r,f),g=o.getDataVisibility(d)?a.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,i&&(s.animateScale&&(g=0),s.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,e.active?"active":r)};this.updateElement(e,d,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?RV(this.resolveDataElementOptions(t,e).angle||n):0}}VH.id="polarArea",VH.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},VH.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,r)=>{const i=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class GH extends zH{}GH.id="pie",GH.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class WH extends TH{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,r){return OW.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let s=e;s<e+n;s++){const e=t[s],n=this.resolveDataElementOptions(s,e.active?"active":r),a=i.getPointPositionForValue(s,this.getParsed(s).r),l=o?i.xCenter:a.x,c=o?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,s,u,r)}}}WH.id="radar",WH.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},WH.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class HH{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return TV(this.x)&&TV(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach((t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),r}}HH.defaults={},HH.defaultRoutes=void 0;const JH={values:t=>QU(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const s=EV(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),eH(t,r,l)},logarithmic(t,e,n){if(0===t)return"0";const r=t/Math.pow(10,Math.floor(EV(t)));return 1===r||2===r||5===r?JH.numeric.call(this,t,e,n):""}};var KH={formatters:JH};function XH(t,e){const n=t.options.ticks,r=n.maxTicksLimit||function(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=n.major.enabled?function(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}(e):[],o=i.length,s=i[0],a=i[o-1],l=[];if(o>r)return function(t,e,n,r){let i,o=0,s=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===s&&(e.push(t[i]),o++,s=n[o*r])}(e,l,i,o/r),l;const c=function(t,e,n){const r=function(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(t),i=e.length/n;if(!r)return Math.max(i,1);const o=function(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(r);for(let s=0,a=o.length-1;s<a;s++){const t=o[s];if(t>i)return t}return Math.max(i,1)}(i,e,r);if(o>0){let t,n;const r=o>1?Math.round((a-s)/(o-1)):null;for(qH(e,l,c,YU(r)?0:s-r,s),t=0,n=o-1;t<n;t++)qH(e,l,c,i[t],i[t+1]);return qH(e,l,c,a,YU(r)?e.length:a+r),l}return qH(e,l,c),l}function qH(t,e,n,r,i){const o=eV(r,0),s=Math.min(eV(i,t.length),t.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=o;c<0;)u++,c=Math.round(o+u*n);for(l=Math.max(o,0);l<s;l++)l===c&&(e.push(t[l]),u++,c=Math.round(o+u*n))}HG.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:KH.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),HG.route("scale.ticks","color","","color"),HG.route("scale.grid","color","","borderColor"),HG.route("scale.grid","borderColor","","borderColor"),HG.route("scale.title","color","","color"),HG.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),HG.describe("scales",{_fallback:"scale"}),HG.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const YH=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function QH(t,e){const n=[],r=t.length/e,i=t.length;let o=0;for(;o<i;o+=r)n.push(t[Math.floor(o)]);return n}function ZH(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),o=t._startPixel,s=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-o,s-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<o-a||c>s+a)))return c}function $H(t){return t.drawTicks?t.tickLength:0}function tJ(t,e){if(!t.display)return 0;const n=pW(t.font,e),r=fW(t.padding);return(QU(t.text)?t.text.length:1)*n.lineHeight+r.height}function eJ(t,e,n){let r=YV(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class nJ extends HH{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=tV(t,Number.POSITIVE_INFINITY),e=tV(e,Number.NEGATIVE_INFINITY),n=tV(n,Number.POSITIVE_INFINITY),r=tV(r,Number.NEGATIVE_INFINITY),{min:tV(t,n),max:tV(e,r),minDefined:$U(t),maxDefined:$U(e)}}getMinMax(t){let e,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)e=s[a].controller.getMinMax(this,t),i||(n=Math.min(n,e.min)),o||(r=Math.max(r,e.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:tV(n,tV(r,n)),max:tV(r,tV(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rV(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:r,max:i}=t,o=nV(e,(i-r)/2),s=(t,e)=>n&&0===t?0:t+e;return{min:s(r,-Math.abs(o)),max:s(i,o)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?QH(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=XH(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rV(this.options.afterUpdate,[this])}beforeSetDimensions(){rV(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rV(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),rV(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rV(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=rV(e.callback,[i.value,n,t],this)}afterTickToLabelConversion(){rV(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rV(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,r=e.minRotation||0,i=e.maxRotation;let o,s,a,l=r;if(!this._isVisible()||!e.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=zV(this.chart.width-u,0,this.maxWidth);o=t.offset?this.maxWidth/n:h/(n-1),u+6>o&&(o=h/(n-(t.offset?.5:1)),s=this.maxHeight-$H(t.grid)-e.padding-tJ(t.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=IV(Math.min(Math.asin(zV((c.highest.height+6)/o,-1,1)),Math.asin(zV(s/a,-1,1))-Math.asin(zV(d/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){rV(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rV(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=tJ(r,e.options.font);if(s?(t.width=this.maxWidth,t.height=$H(i)+o):(t.height=this.maxHeight,t.width=$H(i)+o),n.display&&this.ticks.length){const{first:e,last:r,widest:i,highest:o}=this._getLabelSizes(),a=2*n.padding,l=RV(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const e=n.mirror?0:u*i.width+c*o.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*i.width+u*o.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,r,u,c)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=r*t.width,d=n*e.height):(u=n*t.height,d=r*e.width):"start"===i?d=e.width:"end"===i?u=t.width:"inner"!==i&&(u=t.width/2,d=e.width/2),this.paddingLeft=Math.max((u-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+o)*this.width/(this.width-c),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rV(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)YU(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=QH(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:r}=this,i=[],o=[];let s,a,l,c,u,d,h,f,p,g,m,v=0,b=0;for(s=0;s<e;++s){if(c=t[s].label,u=this._resolveTickFontOptions(s),n.font=d=u.string,h=r[d]=r[d]||{data:{},gc:[]},f=u.lineHeight,p=g=0,YU(c)||QU(c)){if(QU(c))for(a=0,l=c.length;a<l;++a)m=c[a],YU(m)||QU(m)||(p=JG(n,h.data,h.gc,p,m),g+=f)}else p=JG(n,h.data,h.gc,p,c),g=f;i.push(p),o.push(g),v=Math.max(p,v),b=Math.max(g,b)}!function(t,e){iV(t,(t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}}))}(r,e);const y=i.indexOf(v),x=o.indexOf(b),A=t=>({width:i[t]||0,height:o[t]||0});return{first:A(0),last:A(e-1),widest:A(y),highest:A(x),widths:i,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return zV(this._alignToPixels?XG(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return mW(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function(t,e){return mW(t,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=RV(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,s=i?i.widest.width+o:0,a=i?i.highest.height+o:0;return this.isHorizontal()?a*n>s*r?s/n:a/r:a*r<s*n?a/n:s/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:i,position:o}=r,s=i.offset,a=this.isHorizontal(),l=this.ticks.length+(s?1:0),c=$H(i),u=[],d=i.setContext(this.getContext()),h=d.drawBorder?d.borderWidth:0,f=h/2,p=function(t){return XG(n,t,h)};let g,m,v,b,y,x,A,_,w,S,C,E;if("top"===o)g=p(this.bottom),x=this.bottom-c,_=g-f,S=p(t.top)+f,E=t.bottom;else if("bottom"===o)g=p(this.top),S=t.top,E=p(t.bottom)-f,x=g+f,_=this.top+c;else if("left"===o)g=p(this.right),y=this.right-c,A=g-f,w=p(t.left)+f,C=t.right;else if("right"===o)g=p(this.left),w=t.left,C=p(t.right)-f,y=g+f,A=this.left+c;else if("x"===e){if("center"===o)g=p((t.top+t.bottom)/2+.5);else if(ZU(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}S=t.top,E=t.bottom,x=g+f,_=x+c}else if("y"===e){if("center"===o)g=p((t.left+t.right)/2);else if(ZU(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}y=g-f,A=y-c,w=t.left,C=t.right}const P=eV(r.ticks.maxTicksLimit,l),M=Math.max(1,Math.ceil(l/P));for(m=0;m<l;m+=M){const t=i.setContext(this.getContext(m)),e=t.lineWidth,r=t.color,o=t.borderDash||[],l=t.borderDashOffset,c=t.tickWidth,d=t.tickColor,h=t.tickBorderDash||[],f=t.tickBorderDashOffset;v=ZH(this,m,s),void 0!==v&&(b=XG(n,v,e),a?y=A=w=C=b:x=_=S=E=b,u.push({tx1:y,ty1:x,tx2:A,ty2:_,x1:w,y1:S,x2:C,y2:E,width:e,color:r,borderDash:o,borderDashOffset:l,tickWidth:c,tickColor:d,tickBorderDash:h,tickBorderDashOffset:f}))}return this._ticksLength=l,this._borderValue=g,u}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,d=$H(n.grid),h=d+c,f=u?-c:h,p=-RV(this.labelRotation),g=[];let m,v,b,y,x,A,_,w,S,C,E,P,M="middle";if("top"===r)A=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)A=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(d);_=t.textAlign,x=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(d);_=t.textAlign,x=t.x}else if("x"===e){if("center"===r)A=(t.top+t.bottom)/2+h;else if(ZU(r)){const t=Object.keys(r)[0],e=r[t];A=this.chart.scales[t].getPixelForValue(e)+h}_=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)x=(t.left+t.right)/2-h;else if(ZU(r)){const t=Object.keys(r)[0],e=r[t];x=this.chart.scales[t].getPixelForValue(e)}_=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===a?M="top":"end"===a&&(M="bottom"));const T=this._getLabelSizes();for(m=0,v=s.length;m<v;++m){b=s[m],y=b.label;const t=i.setContext(this.getContext(m));w=this.getPixelForTick(m)+i.labelOffset,S=this._resolveTickFontOptions(m),C=S.lineHeight,E=QU(y)?y.length:1;const e=E/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let d,h=_;if(o?(x=w,"inner"===_&&(h=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),P="top"===r?"near"===l||0!==p?-E*C+C/2:"center"===l?-T.highest.height/2-e*C+C:-T.highest.height+C/2:"near"===l||0!==p?C/2:"center"===l?T.highest.height/2-e*C:T.highest.height-E*C,u&&(P*=-1)):(A=w,P=(1-E)*C/2),t.showLabelBackdrop){const e=fW(t.backdropPadding),n=T.heights[m],r=T.widths[m];let i=A+P-e.top,o=x-e.left;switch(M){case"middle":i-=n/2;break;case"bottom":i-=n}switch(_){case"center":o-=r/2;break;case"right":o-=r}d={left:o,top:i,width:r+e.width,height:n+e.height,color:t.backdropColor}}g.push({rotation:p,label:y,font:S,color:n,strokeColor:a,strokeWidth:c,textOffset:P,textAlign:h,textBaseline:M,translation:[x,A],backdrop:d})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-RV(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=t+i,s=this._getLabelSizes().widest.width;let a,l;return"left"===e?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l=this.left)):"right"===e?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const s=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,o=r.length;i<o;++i){const t=r[i];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,r=n.setContext(this.getContext()),i=n.drawBorder?r.borderWidth:0;if(!i)return;const o=n.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let a,l,c,u;this.isHorizontal()?(a=XG(t,this.left,i)-i/2,l=XG(t,this.right,o)+o/2,c=u=s):(c=XG(t,this.top,i)-i/2,u=XG(t,this.bottom,o)+o/2,a=l=s),e.save(),e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(a,c),e.lineTo(l,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&$G(e,n);const r=this._labelItems||(this._labelItems=this._computeLabelItems(t));let i,o;for(i=0,o=r.length;i<o;++i){const t=r[i],n=t.font,o=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),rW(e,o,0,t.textOffset,n,t)}n&&tW(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const i=pW(n.font),o=fW(n.padding),s=n.align;let a=i.lineHeight/2;"bottom"===e||"center"===e||ZU(e)?(a+=o.bottom,QU(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(t,e,n,r){const{top:i,left:o,bottom:s,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d,h,f,p=0;const g=s-i,m=a-o;if(t.isHorizontal()){if(h=QV(r,o,a),ZU(n)){const t=Object.keys(n)[0],r=n[t];f=u[t].getPixelForValue(r)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:YH(t,n,e);d=a-o}else{if(ZU(n)){const t=Object.keys(n)[0],r=n[t];h=u[t].getPixelForValue(r)-m+e}else h="center"===n?(c.left+c.right)/2-m+e:YH(t,n,e);f=QV(r,s,i),p="left"===n?-wV:wV}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,a,e,s);rW(t,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:eJ(s,e,r),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=eV(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===nJ.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];o[n]!==this.id||t&&o.type!==t||r.push(o)}return r}_resolveTickFontOptions(t){return pW(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class rJ{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){const r=cV(Object.create(null),[n?HG.get(n):{},HG.get(e),t.defaults]);HG.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const r=n.split("."),i=r.pop(),o=[t].concat(r).join("."),s=e[n].split("."),a=s.pop(),l=s.join(".");HG.route(o,i,l,a)}))}(e,t.defaultRoutes);t.descriptors&&HG.describe(e,t.descriptors)}(t,o,n),this.override&&HG.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in HG[r]&&(delete HG[r][n],this.override&&delete UG[n])}}var iJ=new class{constructor(){this.controllers=new rJ(TH,"datasets",!0),this.elements=new rJ(HH,"elements"),this.plugins=new rJ(Object,"plugins"),this.scales=new rJ(nJ,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}addControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}addElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}addPlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}addScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}removeElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}removePlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}removeScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}_each(t,e,n){[...e].forEach((e=>{const r=n||this._getRegistryForType(e);n||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):iV(e,(e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)}))}))}_exec(t,e,n){const r=pV(t);rV(n["before"+r],[],n),e[t](n),rV(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}};class oJ extends TH{update(t){const e=this._cachedMeta,{data:n=[]}=e,r=this.chart._animationsDisabled;let{start:i,count:o}=ZV(e,n,r);if(this._drawStart=i,this._drawCount=o,$V(e)&&(i=0,o=n.length),this.options.showLine){const{dataset:i,_dataset:o}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const s=this.resolveDatasetElementOptions(t);s.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:s},t)}this.updateElements(n,i,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=iJ.getElement("line")),super.addElements()}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=o.axis,f=s.axis,{spanGaps:p,segment:g}=this.options,m=TV(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let b=e>0&&this.getParsed(e-1);for(let y=e;y<e+n;++y){const e=t[y],n=this.getParsed(y),c=v?e:{},p=YU(n[f]),x=c[h]=o.getPixelForValue(n[h],y),A=c[f]=i||p?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[f],y);c.skip=isNaN(x)||isNaN(A)||p,c.stop=y>0&&Math.abs(n[h]-b[h])>m,g&&(c.parsed=n,c.raw=l.data[y]),d&&(c.options=u||this.resolveDataElementOptions(y,e.active?"active":r)),v||this.updateElement(e,y,c,r),b=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,o)/2}}oJ.id="scatter",oJ.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},oJ.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function sJ(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class aJ{constructor(t){this.options=t||{}}init(t){}formats(){return sJ()}parse(t,e){return sJ()}format(t,e){return sJ()}add(t,e,n){return sJ()}diff(t,e,n){return sJ()}startOf(t,e,n){return sJ()}endOf(t,e){return sJ()}}aJ.override=function(t){Object.assign(aJ.prototype,t)};var lJ={_date:aJ};function cJ(t,e,n,r){const{controller:i,data:o,_sorted:s}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&s&&o.length){const t=a._reversePixels?WV:GV;if(!r)return t(o,e,n);if(i._sharedOptions){const r=o[0],i="function"===typeof r.getRange&&r.getRange(e);if(i){const r=t(o,e,n-i),s=t(o,e,n+i);return{lo:r.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function uJ(t,e,n,r,i){const o=t.getSortedVisibleDatasetMetas(),s=n[e];for(let a=0,l=o.length;a<l;++a){const{index:t,data:n}=o[a],{lo:l,hi:c}=cJ(o[a],e,s,i);for(let e=l;e<=c;++e){const i=n[e];i.skip||r(i,t,e)}}}function dJ(t,e,n,r,i){const o=[];if(!i&&!t.isPointInArea(e))return o;return uJ(t,n,e,(function(n,s,a){(i||ZG(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&o.push({element:n,datasetIndex:s,index:a})}),!0),o}function hJ(t,e,n,r,i,o){let s=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,o=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return uJ(t,n,e,(function(n,c,u){const d=n.inRange(e.x,e.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!o||t.isPointInArea(h))&&!d)return;const f=a(e,h);f<l?(s=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&s.push({element:n,datasetIndex:c,index:u})})),s}function fJ(t,e,n,r,i,o){return o||t.isPointInArea(e)?"r"!==n||r?hJ(t,e,n,r,i,o):function(t,e,n,r){let i=[];return uJ(t,n,e,(function(t,n,o){const{startAngle:s,endAngle:a}=t.getProps(["startAngle","endAngle"],r),{angle:l}=LV(t,{x:e.x,y:e.y});jV(l,s,a)&&i.push({element:t,datasetIndex:n,index:o})})),i}(t,e,n,i):[]}function pJ(t,e,n,r,i){const o=[],s="x"===n?"inXRange":"inYRange";let a=!1;return uJ(t,n,e,((t,r,l)=>{t[s](e[n],i)&&(o.push({element:t,datasetIndex:r,index:l}),a=a||t.inRange(e.x,e.y,i))})),r&&!a?[]:o}var gJ={evaluateInteractionItems:uJ,modes:{index(t,e,n,r){const i=HW(e,t),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?dJ(t,i,o,r,s):fJ(t,i,o,!1,r,s),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,n,r){const i=HW(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?dJ(t,i,o,r,s):fJ(t,i,o,!1,r,s);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,r)=>dJ(t,HW(e,t),n.axis||"xy",r,n.includeInvisible||!1),nearest(t,e,n,r){const i=HW(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;return fJ(t,i,o,n.intersect,r,s)},x:(t,e,n,r)=>pJ(t,HW(e,t),"x",n.intersect,r),y:(t,e,n,r)=>pJ(t,HW(e,t),"y",n.intersect,r)}};const mJ=["left","top","right","bottom"];function vJ(t,e){return t.filter((t=>t.pos===e))}function bJ(t,e){return t.filter((t=>-1===mJ.indexOf(t.pos)&&t.box.axis===e))}function yJ(t,e){return t.sort(((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function xJ(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!mJ.includes(r))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];const{fullSize:s}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:s&&e.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:s&&e.availableHeight)}return n}function AJ(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function _J(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function wJ(t,e,n,r){const{pos:i,box:o}=n,s=t.maxPadding;if(!ZU(i)){n.size&&(t[i]-=n.size);const e=r[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[i]+=n.size}o.getPadding&&_J(s,o.getPadding());const a=Math.max(0,e.outerWidth-AJ(s,t,"left","right")),l=Math.max(0,e.outerHeight-AJ(s,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function SJ(t,e){const n=e.maxPadding;function r(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function CJ(t,e,n,r){const i=[];let o,s,a,l,c,u;for(o=0,s=t.length,c=0;o<s;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,SJ(a.horizontal,e));const{same:s,other:d}=wJ(e,n,a,r);c|=s&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&CJ(i,e,n,r)||u}function EJ(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function PJ(t,e,n,r){const i=n.padding;let{x:o,y:s}=e;for(const a of t){const t=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=e.w*c,o=l.size||t.height;gV(l.start)&&(s=l.start),t.fullSize?EJ(t,i.left,s,n.outerWidth-i.right-i.left,o):EJ(t,e.left+l.placed,s,r,o),l.start=s,l.placed+=r,s=t.bottom}else{const r=e.h*c,s=l.size||t.width;gV(l.start)&&(o=l.start),t.fullSize?EJ(t,o,i.top,s,n.outerHeight-i.bottom-i.top):EJ(t,o,e.top+l.placed,s,r),l.start=o,l.placed+=r,o=t.right}}e.x=o,e.y=s}HG.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var MJ={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=fW(t.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(n-i.height,0),a=function(t){const e=function(t){const e=[];let n,r,i,o,s,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:o,options:{stack:s,stackWeight:a=1}}=i),e.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}(t),n=yJ(e.filter((t=>t.box.fullSize)),!0),r=yJ(vJ(e,"left"),!0),i=yJ(vJ(e,"right")),o=yJ(vJ(e,"top"),!0),s=yJ(vJ(e,"bottom")),a=bJ(e,"x"),l=bJ(e,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(s).concat(a),chartArea:vJ(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(s).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;iV(t.boxes,(t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()}));const u=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},i);_J(h,fW(r));const f=Object.assign({maxPadding:h,w:o,h:s,x:i.left,y:i.top},i),p=xJ(l.concat(c),d);CJ(a.fullSize,f,d,p),CJ(l,f,d,p),CJ(c,f,d,p)&&CJ(l,f,d,p),function(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),PJ(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,PJ(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},iV(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class TJ{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class OJ extends TJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const kJ="$chartjs",RJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},IJ=t=>null===t||""===t;const BJ=!!qW&&{passive:!0};function LJ(t,e,n){t.canvas.removeEventListener(e,n,BJ)}function DJ(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function FJ(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||DJ(n.addedNodes,r),e=e&&!DJ(n.removedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function NJ(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||DJ(n.removedNodes,r),e=e&&!DJ(n.addedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const jJ=new Map;let zJ=0;function UJ(){const t=window.devicePixelRatio;t!==zJ&&(zJ=t,jJ.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function VJ(t,e,n){const r=t.canvas,i=r&&jW(r);if(!i)return;const o=qV(((t,e)=>{const r=i.clientWidth;n(t,e),r<i.clientWidth&&n()}),window),s=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||o(n,r)}));return s.observe(i),function(t,e){jJ.size||window.addEventListener("resize",UJ),jJ.set(t,e)}(t,o),s}function GJ(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){jJ.delete(t),jJ.size||window.removeEventListener("resize",UJ)}(t)}function WJ(t,e,n){const r=t.canvas,i=qV((e=>{null!==t.ctx&&n(function(t,e){const n=RJ[t.type]||t.type,{x:r,y:i}=HW(t,e);return{type:n,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==i?i:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,n){t.addEventListener(e,n,BJ)}(r,e,i),i}class HJ extends TJ{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[kJ]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",IJ(i)){const e=YW(t,"width");void 0!==e&&(t.width=e)}if(IJ(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=YW(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[kJ])return!1;const n=e[kJ].initial;["height","width"].forEach((t=>{const r=n[t];YU(r)?e.removeAttribute(t):e.setAttribute(t,r)}));const r=n.style||{};return Object.keys(r).forEach((t=>{e.style[t]=r[t]})),e.width=e.width,delete e[kJ],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:FJ,detach:NJ,resize:VJ}[e]||WJ;r[e]=i(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:GJ,detach:GJ,resize:GJ}[e]||LJ)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return KW(t,e,n,r)}isAttached(t){const e=jW(t);return!(!e||!e.isConnected)}}class JJ{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(const i of t){const t=i.plugin;if(!1===rV(t[n],[e,r,i.options],t)&&r.cancelable)return!1}return!0}invalidate(){YU(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=eV(n.options&&n.options.plugins,{}),i=function(t){const e={},n=[],r=Object.keys(iJ.plugins.items);for(let o=0;o<r.length;o++)n.push(iJ.getPlugin(r[o]));const i=t.plugins||[];for(let o=0;o<i.length;o++){const t=i[o];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,e,n,r){let{plugins:i,localIds:o}=e;const s=[],a=t.getContext();for(const l of i){const e=l.id,i=KJ(n[e],r);null!==i&&s.push({plugin:l,options:XJ(t.config,{plugin:l,local:o[e]},i,a)})}return s}(t,i,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function KJ(t,e){return e||!1!==t?!0===t?{}:t:null}function XJ(t,e,n,r){let{plugin:i,local:o}=e;const s=t.pluginScopeKeys(i),a=t.getOptionScopes(n,s);return o&&i.defaults&&a.push(i.defaults),t.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qJ(t,e){const n=HG.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function YJ(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.charAt(0).toLowerCase();var n}function QJ(t){const e=t.options||(t.options={});e.plugins=eV(e.plugins,{}),e.scales=function(t,e){const n=UG[t.type]||{scales:{}},r=e.scales||{},i=qJ(t.type,e),o=Object.create(null),s=Object.create(null);return Object.keys(r).forEach((t=>{const e=r[t];if(!ZU(e))return console.error("Invalid scale configuration for scale: ".concat(t));if(e._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=YJ(t,e),l=function(t,e){return t===e?"_index_":"_value_"}(a,i),c=n.scales||{};o[a]=o[a]||t,s[t]=uV(Object.create(null),[{axis:a},e,c[a],c[l]])})),t.data.datasets.forEach((n=>{const i=n.type||t.type,a=n.indexAxis||qJ(i,e),l=(UG[i]||{}).scales||{};Object.keys(l).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),i=n[e+"AxisID"]||o[e]||e;s[i]=s[i]||Object.create(null),uV(s[i],[{axis:e},r[i],l[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t];uV(e,[HG.scales[e.type],HG.scale])})),s}(t,e)}function ZJ(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const $J=new Map,tK=new Set;function eK(t,e){let n=$J.get(t);return n||(n=e(),$J.set(t,n),tK.add(n)),n}const nK=(t,e,n)=>{const r=fV(e,n);void 0!==r&&t.add(r)};class rK{constructor(t){this._config=function(t){return(t=t||{}).data=ZJ(t.data),QJ(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ZJ(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),QJ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return eK(t,(()=>[["datasets.".concat(t),""]]))}datasetAnimationScopeKeys(t,e){return eK("".concat(t,".transition.").concat(e),(()=>[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]]))}datasetElementScopeKeys(t,e){return eK("".concat(t,"-").concat(e),(()=>[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]]))}pluginScopeKeys(t){const e=t.id,n=this.type;return eK("".concat(n,"-plugin-").concat(e),(()=>[["plugins.".concat(e),...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:i}=this,o=this._cachedScopes(t,n),s=o.get(e);if(s)return s;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>nK(a,t,e)))),e.forEach((t=>nK(a,r,t))),e.forEach((t=>nK(a,UG[i]||{},t))),e.forEach((t=>nK(a,HG,t))),e.forEach((t=>nK(a,VG,t)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),tK.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,UG[e]||{},HG.datasets[e]||{},{type:e},HG,VG]}resolveNamedOptions(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:o,subPrefixes:s}=iK(this._resolverCache,t,r);let a=o;if(function(t,e){const{isScriptable:n,isIndexable:r}=yW(t);for(const i of e){const e=n(i),o=r(i),s=(o||e)&&t[i];if(e&&(mV(s)||oK(s))||o&&QU(s))return!0}return!1}(o,e)){i.$shared=!1;a=bW(o,n=mV(n)?n():n,this.createResolver(t,n,s))}for(const l of e)i[l]=a[l];return i}createResolver(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=iK(this._resolverCache,t,n);return ZU(e)?bW(i,e,void 0,r):i}}function iK(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let o=r.get(i);if(!o){o={resolver:vW(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},r.set(i,o)}return o}const oK=t=>ZU(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||mV(t[n])),!1);const sK=["top","bottom","left","right","chartArea"];function aK(t,e){return"top"===t||"bottom"===t||-1===sK.indexOf(t)&&"x"===e}function lK(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function cK(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),rV(n&&n.onComplete,[t],e)}function uK(t){const e=t.chart,n=e.options.animation;rV(n&&n.onProgress,[t],e)}function dK(t){return NW()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const hK={},fK=t=>{const e=dK(t);return Object.values(hK).filter((t=>t.canvas===e)).pop()};function pK(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const o=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=o)}}}class gK{constructor(t,e){const n=this.config=new rK(e),r=dK(t),i=fK(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!NW()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?OJ:HJ}(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=qU(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new JJ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],hK[this.id]=this,s&&a?(hH.listen(this,"complete",cK),hH.listen(this,"progress",uK),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:i}=this;return YU(t)?e&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():XW(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qG(this.canvas,this.ctx),this}stop(){return hH.stop(this),this}resize(t,e){hH.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,i),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,XW(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),rV(n.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){iV(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let i=[];e&&(i=i.concat(Object.keys(e).map((t=>{const n=e[t],r=YJ(t,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),iV(i,(e=>{const i=e.options,o=i.id,s=YJ(o,i),a=eV(i.type,e.dtype);void 0!==i.position&&aK(i.position,s)===aK(e.dposition)||(i.position=e.dposition),r[o]=!0;let l=null;if(o in n&&n[o].type===a)l=n[o];else{l=new(iJ.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,t)})),iV(r,((t,e)=>{t||delete n[e]})),iV(n,(t=>{MJ.configure(this,t,t.options),MJ.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(lK("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const r=e[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||qJ(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const e=iJ.getController(o),{datasetElementType:r,dataElementType:s}=HG.datasets[o];Object.assign(e.prototype,{dataElementType:iJ.getElement(s),datasetElementType:r&&iJ.getElement(r)}),i.controller=new e(this,n),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){iV(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!r&&-1===i.indexOf(t);t.buildOrUpdateElements(e),o=Math.max(+t.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||iV(i,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(lK("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){iV(this.scales,(t=>{MJ.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);vV(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e){pK(t,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),r=n(0);for(let i=1;i<e;i++)if(!vV(r,n(i)))return;return Array.from(r).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;MJ.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],iV(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,mV(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(hH.has(this)?this.attached&&!hH.running(this)&&hH.start(this):(this.draw(),cK({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,i=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&$G(e,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),t.controller.draw(),r&&tW(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ZG(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=gJ.modes[e];return"function"===typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter((t=>t&&t._dataset===e)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=mW(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);gV(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update((e=>e.datasetIndex===t?r:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),hH.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),qG(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete hK[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};iV(this.options.events,(t=>n(t,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},e.isAttached(this.canvas)?s():o()}unbindEvents(){iV(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},iV(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,o,s,a;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){o=t[s];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((t=>{let{datasetIndex:e,index:n}=t;const r=this.getDatasetMeta(e);if(!r)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:r.data[n],index:n}}));!oV(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=i(e,t),s=n?t:i(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:i}=this,o=e,s=this._getActiveElements(t,r,n,o),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,rV(i.onHover,[t,s,this],this),a&&rV(i.onClick,[t,s,this],this));const c=!oV(s,r);return(c||e)&&(this._active=s,this._updateHoverStyles(s,r,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}const mK=()=>iV(gK.instances,(t=>t._plugins.invalidate())),vK=!0;function bK(t,e,n){const{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(o,s,a,r-c,n+c),l>i?(c=i/l,t.arc(o,s,l,n+c,r-c,!0)):t.arc(o,s,i,n+wV,r-wV),t.closePath(),t.clip()}function yK(t,e,n,r){const i=uW(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-e)/2,s=Math.min(o,r*e/2),a=t=>{const e=(n-Math.min(o,t))*r/2;return zV(t,0,Math.min(o,e))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:zV(i.innerStart,0,s),innerEnd:zV(i.innerEnd,0,s)}}function xK(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function AK(t,e,n,r,i,o){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const t=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(p-(0!==t?p*t/(t+r):p))/2}const g=(p-Math.max(.001,p*d-n/bV)/d)/2,m=l+g+f,v=i-g-f,{outerStart:b,outerEnd:y,innerStart:x,innerEnd:A}=yK(e,h,d,v-m),_=d-b,w=d-y,S=m+b/_,C=v-y/w,E=h+x,P=h+A,M=m+x/E,T=v-A/P;if(t.beginPath(),o){if(t.arc(s,a,d,S,C),y>0){const e=xK(w,C,s,a);t.arc(e.x,e.y,y,C,v+wV)}const e=xK(P,v,s,a);if(t.lineTo(e.x,e.y),A>0){const e=xK(P,T,s,a);t.arc(e.x,e.y,A,v+wV,T+Math.PI)}if(t.arc(s,a,h,v-A/h,m+x/h,!0),x>0){const e=xK(E,M,s,a);t.arc(e.x,e.y,x,M+Math.PI,m-wV)}const n=xK(_,m,s,a);if(t.lineTo(n.x,n.y),b>0){const e=xK(_,S,s,a);t.arc(e.x,e.y,b,m-wV,S)}}else{t.moveTo(s,a);const e=Math.cos(S)*d+s,n=Math.sin(S)*d+a;t.lineTo(e,n);const r=Math.cos(C)*d+s,i=Math.sin(C)*d+a;t.lineTo(r,i)}t.closePath()}function _K(t,e,n,r,i,o){const{options:s}=e,{borderWidth:a,borderJoinStyle:l}=s,c="inner"===s.borderAlign;a&&(c?(t.lineWidth=2*a,t.lineJoin=l||"round"):(t.lineWidth=a,t.lineJoin=l||"bevel"),e.fullCircles&&function(t,e,n){const{x:r,y:i,startAngle:o,pixelMargin:s,fullCircles:a}=e,l=Math.max(e.outerRadius-s,0),c=e.innerRadius+s;let u;for(n&&bK(t,e,o+yV),t.beginPath(),t.arc(r,i,c,o+yV,o,!0),u=0;u<a;++u)t.stroke();for(t.beginPath(),t.arc(r,i,l,o,o+yV),u=0;u<a;++u)t.stroke()}(t,e,c),c&&bK(t,e,i),AK(t,e,n,r,i,o),t.stroke())}Object.defineProperties(gK,{defaults:{enumerable:vK,value:HG},instances:{enumerable:vK,value:hK},overrides:{enumerable:vK,value:UG},registry:{enumerable:vK,value:iJ},version:{enumerable:vK,value:"3.9.1"},getChart:{enumerable:vK,value:fK},register:{enumerable:vK,value:function(){iJ.add(...arguments),mK()}},unregister:{enumerable:vK,value:function(){iJ.remove(...arguments),mK()}}});class wK extends HH{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=LV(r,{x:t,y:e}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=this.options.spacing/2,h=eV(u,a-s)>=yV||jV(i,s,a),f=UV(o,l+d,c+d);return h&&f}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(o+s+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/2,i=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>yV?Math.floor(n/yV):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let s=0;if(r){s=r/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*s,Math.sin(e)*s),this.circumference>=bV&&(s=r)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const a=function(t,e,n,r,i){const{fullCircles:o,startAngle:s,circumference:a}=e;let l=e.endAngle;if(o){AK(t,e,n,r,s+yV,i);for(let e=0;e<o;++e)t.fill();isNaN(a)||(l=s+a%yV,a%yV===0&&(l+=yV))}return AK(t,e,n,r,l,i),t.fill(),l}(t,this,s,i,o);_K(t,this,s,i,a,o),t.restore()}}function SK(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=eV(n.borderCapStyle,e.borderCapStyle),t.setLineDash(eV(n.borderDash,e.borderDash)),t.lineDashOffset=eV(n.borderDashOffset,e.borderDashOffset),t.lineJoin=eV(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=eV(n.borderWidth,e.borderWidth),t.strokeStyle=eV(n.borderColor,e.borderColor)}function CK(t,e,n){t.lineTo(n.x,n.y)}function EK(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.length,{start:i=0,end:o=r-1}=n,{start:s,end:a}=e,l=Math.max(i,s),c=Math.min(o,a),u=i<s&&o<s||i>a&&o>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function PK(t,e,n,r){const{points:i,options:o}=e,{count:s,start:a,loop:l,ilen:c}=EK(i,n,r),u=function(t){return t.stepped?eW:t.tension||"monotone"===t.cubicInterpolationMode?nW:CK}(o);let d,h,f,{move:p=!0,reverse:g}=r||{};for(d=0;d<=c;++d)h=i[(a+(g?c-d:d))%s],h.skip||(p?(t.moveTo(h.x,h.y),p=!1):u(t,f,h,g,o.stepped),f=h);return l&&(h=i[(a+(g?c:0))%s],u(t,f,h,g,o.stepped)),!!l}function MK(t,e,n,r){const i=e.points,{count:o,start:s,ilen:a}=EK(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,p,g,m=0,v=0;const b=t=>(s+(c?a-t:t))%o,y=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(d=i[b(0)],t.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=i[b(u)],d.skip)continue;const e=d.x,n=d.y,r=0|e;r===h?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(y(),t.lineTo(e,n),h=r,v=0,f=p=n),g=n}y()}function TK(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?MK:PK}wK.id="arc",wK.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},wK.defaultRoutes={backgroundColor:"backgroundColor"};const OK="function"===typeof Path2D;function kK(t,e,n,r){OK&&!e.options.segment?function(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),SK(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){const{segments:i,options:o}=e,s=TK(e);for(const a of i)SK(t,o,a.style),t.beginPath(),s(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(t,e,n,r)}class RK extends HH{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;FW(this._points,n,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const o=!!t._loop,{start:s,end:a}=function(t,e,n,r){let i=0,o=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}(n,i,o,r);return cH(t,!0===r?[{start:s,end:a,loop:o}]:function(t,e,n,r){const i=t.length,o=[];let s,a=e,l=t[e];for(s=e+1;s<=n;++s){const n=t[s%i];n.skip||n.stop?l.skip||(r=!1,o.push({start:e%i,end:(s-1)%i,loop:r}),e=a=n.stop?s:null):(a=s,l.skip&&(e=s)),l=n}return null!==a&&o.push({start:e%i,end:a%i,loop:r}),o}(n,s,a<s?a+i:a,!!t._fullLoop&&0===s&&a===i-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,r=t[e],i=this.points,o=lH(this,{property:e,start:r,end:r});if(!o.length)return;const s=[],a=function(t){return t.stepped?ZW:t.tension||"monotone"===t.cubicInterpolationMode?$W:QW}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],d=i[c],h=i[u];if(d===h){s.push(d);continue}const f=a(d,h,Math.abs((r-d[e])/(h[e]-d[e])),n.stepped);f[e]=t[e],s.push(f)}return 1===s.length?s[0]:s}pathSegment(t,e,n){return TK(this)(t,this,e,n)}path(t,e,n){const r=this.segments,i=TK(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const s of r)o&=i(t,this,s,{start:e,end:e+n-1});return!!o}draw(t,e,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),kK(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function IK(t,e,n,r){const i=t.options,{[n]:o}=t.getProps([n],r);return Math.abs(e-o)<i.radius+i.hitRadius}RK.id="line",RK.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},RK.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},RK.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class BK extends HH{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return IK(this,t,"x",e)}inYRange(t,e){return IK(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!ZG(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,YG(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function LK(t,e){const{x:n,y:r,base:i,width:o,height:s}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=s/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=o/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function DK(t,e,n,r){return t?0:zV(e,n,r)}function FK(t){const e=LK(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,o=dW(r);return{t:DK(i.top,o.top,0,n),r:DK(i.right,o.right,0,e),b:DK(i.bottom,o.bottom,0,n),l:DK(i.left,o.left,0,e)}}(t,n/2,r/2),o=function(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=hW(i),s=Math.min(e,n),a=t.borderSkipped,l=r||ZU(i);return{topLeft:DK(!l||a.top||a.left,o.topLeft,0,s),topRight:DK(!l||a.top||a.right,o.topRight,0,s),bottomLeft:DK(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:DK(!l||a.bottom||a.right,o.bottomRight,0,s)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function NK(t,e,n,r){const i=null===e,o=null===n,s=t&&!(i&&o)&&LK(t,r);return s&&(i||UV(e,s.left,s.right))&&(o||UV(n,s.top,s.bottom))}function jK(t,e){t.rect(e.x,e.y,e.w,e.h)}function zK(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-r,s=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+o,h:t.h+s,radius:t.radius}}BK.id="point",BK.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},BK.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class UK extends HH{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=FK(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?oW:jK;var a;t.save(),o.w===i.w&&o.h===i.h||(t.beginPath(),s(t,zK(o,e,i)),t.clip(),s(t,zK(i,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),s(t,zK(i,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return NK(this,t,e,n)}inXRange(t,e){return NK(this,t,null,e)}inYRange(t,e){return NK(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}UK.id="bar",UK.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},UK.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function VK(t,e,n,r){if(r)return;let i=e[t],o=n[t];return"angle"===t&&(i=NV(i),o=NV(o)),{property:t,start:i,end:o}}function GK(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function WK(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function HK(t,e){let n=[],r=!1;return QU(t)?(r=!0,n=t):n=function(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,o=[];return e.segments.forEach((t=>{let{start:e,end:s}=t;s=GK(e,s,i);const a=i[e],l=i[s];null!==r?(o.push({x:a.x,y:r}),o.push({x:l.x,y:r})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:l.y}))})),o}(t,e),n.length?new RK({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function JK(t){return t&&!1!==t.fill}function KK(t,e,n){let r=t[e].fill;const i=[e];let o;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!$U(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function XK(t,e,n){const r=function(t){const e=t.options,n=e.fill;let r=eV(n&&n.target,n);void 0===r&&(r=!!e.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(t);if(ZU(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return $U(i)&&Math.floor(i)===i?function(t,e,n,r){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=r)return!1;return n}(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function qK(t,e,n){const r=[];for(let i=0;i<n.length;i++){const o=n[i],{first:s,last:a,point:l}=YK(o,e,"x");if(!(!l||s&&a))if(s)r.unshift(l);else if(t.push(l),!a)break}t.push(...r)}function YK(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],o=t.segments,s=t.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const t=o[c],e=s[t.start][n],r=s[t.end][n];if(UV(i,e,r)){a=i===e,l=i===r;break}}return{first:a,last:l,point:r}}class QK{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:i,radius:o}=this;return e=e||{start:0,end:yV},t.arc(r,i,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function ZK(t){const{chart:e,fill:n,line:r}=t;if($U(n))return function(t,e){const n=t.getDatasetMeta(e),r=n&&t.isDatasetVisible(e);return r?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:r}=t,i=[],o=r.segments,s=r.points,a=function(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const t=r[i];if(t.index===e)break;t.hidden||n.unshift(t.dataset)}return n}(e,n);a.push(HK({x:null,y:e.bottom},r));for(let l=0;l<o.length;l++){const t=o[l];for(let e=t.start;e<=t.end;e++)qK(i,s[e],a)}return new RK({points:i,options:{}})}(t);if("shape"===n)return!0;const i=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,s=function(t,e,n){let r;return r="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:ZU(t)?t.value:e.getBaseValue(),r}(n,e,o),a=[];if(r.grid.circular){const t=e.getPointPositionForValue(0,o);return new QK({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,s));return a}(t);return function(t){const{scale:e={},fill:n}=t,r=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:ZU(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if($U(r)){const t=e.isHorizontal();return{x:t?r:null,y:t?null:r}}return null}(t)}(t);return i instanceof QK?i:HK(i,r)}function $K(t,e,n){const r=ZK(e),{line:i,scale:o,axis:s}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};r&&i.points.length&&($G(t,n),function(t,e){const{line:n,target:r,above:i,below:o,area:s,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&o!==i&&(tX(t,r,s.top),eX(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),tX(t,r,s.bottom));eX(t,{line:n,target:r,color:o,scale:a,property:l}),t.restore()}(t,{line:i,target:r,above:u,below:d,area:n,scale:o,axis:s}),tW(t))}function tX(t,e,n){const{segments:r,points:i}=e;let o=!0,s=!1;t.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],u=i[GK(r,l,i)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function eX(t,e){const{line:n,target:r,property:i,color:o,scale:s}=e,a=function(t,e,n){const r=t.segments,i=t.points,o=e.points,s=[];for(const a of r){let{start:t,end:r}=a;r=GK(t,r,i);const l=VK(n,i[t],i[r],a.loop);if(!e.segments){s.push({source:a,target:l,start:i[t],end:i[r]});continue}const c=lH(e,l);for(const e of c){const t=VK(n,o[e.start],o[e.end],e.loop),r=aH(a,i,t);for(const i of r)s.push({source:i,target:e,start:{[n]:WK(l,t,"start",Math.max)},end:{[n]:WK(l,t,"end",Math.min)}})}}return s}(n,r,i);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:e=o}={}}=l,a=!0!==r;t.save(),t.fillStyle=e,nX(t,s,a&&VK(i,u,d)),t.beginPath();const h=!!n.pathSegment(t,l);let f;if(a){h?t.closePath():rX(t,r,d,i);const e=!!r.pathSegment(t,c,{move:h,reverse:!0});f=h&&e,f||rX(t,r,u,i)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function nX(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:o,start:s,end:a}=n||{};"x"===o&&(t.beginPath(),t.rect(s,r,a-s,i-r),t.clip())}function rX(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var iX={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let o,s,a,l;for(s=0;s<r;++s)o=t.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof RK&&(l={visible:t.isDatasetVisible(s),index:s,fill:XK(a,s,r),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(s=0;s<r;++s)l=i[s],l&&!1!==l.fill&&(l.fill=KK(i,s,n.propagate))},beforeDraw(t,e,n){const r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let s=i.length-1;s>=0;--s){const e=i[s].$filler;e&&(e.line.updateControlPoints(o,e.axis),r&&e.fill&&$K(t.ctx,e,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const e=r[i].$filler;JK(e)&&$K(t.ctx,e,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;JK(r)&&"beforeDatasetDraw"===n.drawTime&&$K(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const oX=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}};class sX extends HH{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=rV(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=pW(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=oX(n,i);let l,c;e.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,i,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,i,s,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+s;let u=t;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+i.measureText(t.text).width;(0===f||l[l.length-1]+p+2*s>o)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:p,height:r},l[l.length-1]+=p+s})),u}_fitCols(t,e,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-t;let u=s,d=0,h=0,f=0,p=0;return this.legendItems.forEach(((t,o)=>{const g=n+e/2+i.measureText(t.text).width;o>0&&h+r+2*s>c&&(u+=d+s,l.push({width:d,height:h}),f+=d+s,p++,d=h=0),a[o]={left:f,top:h,col:p,width:g,height:r},d=Math.max(d,g),h+=r+s})),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:i}}=this,o=nH(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=QV(n,this.left+r,this.right-this.lineWidths[i]);for(const a of e)i!==a.row&&(i=a.row,s=QV(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+t+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let i=0,s=QV(n,this.top+t+r,this.bottom-this.columnSizes[i].height);for(const a of e)a.col!==i&&(i=a.col,s=QV(n,this.top+t+r,this.bottom-this.columnSizes[i].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;$G(t,this),this._draw(),tW(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:i,labels:o}=t,s=HG.color,a=nH(t.rtl,this.left,this.width),l=pW(o.font),{color:c,padding:u}=o,d=l.size,h=d/2;let f;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=oX(o,d),v=this.isHorizontal(),b=this._computeTitleHeight();f=v?{x:QV(i,this.left+u,this.right-n[0]),y:this.top+u+b,line:0}:{x:this.left+u,y:QV(i,this.top+b+u,this.bottom-e[0].height),line:0},rH(this.ctx,t.textDirection);const y=m+u;this.legendItems.forEach(((x,A)=>{r.strokeStyle=x.fontColor||c,r.fillStyle=x.fontColor||c;const _=r.measureText(x.text).width,w=a.textAlign(x.textAlign||(x.textAlign=o.textAlign)),S=p+h+_;let C=f.x,E=f.y;a.setWidth(this.width),v?A>0&&C+S+u>this.right&&(E=f.y+=y,f.line++,C=f.x=QV(i,this.left+u,this.right-n[f.line])):A>0&&E+y>this.bottom&&(C=f.x=C+e[f.line].width+u,f.line++,E=f.y=QV(i,this.top+b+u,this.bottom-e[f.line].height));!function(t,e,n){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;r.save();const i=eV(n.lineWidth,1);if(r.fillStyle=eV(n.fillStyle,s),r.lineCap=eV(n.lineCap,"butt"),r.lineDashOffset=eV(n.lineDashOffset,0),r.lineJoin=eV(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=eV(n.strokeStyle,s),r.setLineDash(eV(n.lineDash,[])),o.usePointStyle){const s={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(t,p/2);QG(r,s,l,e+h,o.pointStyleWidth&&p)}else{const o=e+Math.max((d-g)/2,0),s=a.leftForLtr(t,p),l=hW(n.borderRadius);r.beginPath(),Object.values(l).some((t=>0!==t))?oW(r,{x:s,y:o,w:p,h:g,radius:l}):r.rect(s,o,p,g),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(C),E,x),C=((t,e,n,r)=>t===(r?"left":"right")?n:"center"===t?(e+n)/2:e)(w,C+p+h,v?C+S:this.right,t.rtl),function(t,e,n){rW(r,n.text,t,e+m/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(C),E,x),v?f.x+=S+u:f.y+=y})),iH(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=pW(e.font),r=fW(e.padding);if(!e.display)return;const i=nH(t.rtl,this.left,this.width),o=this.ctx,s=e.position,a=n.size/2,l=r.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=QV(t.align,u,this.right-d);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);c=l+QV(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const h=QV(s,u,u+d);o.textAlign=i.textAlign(YV(s)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,rW(o,e.text,h,c,n)}_computeTitleHeight(){const t=this.options.title,e=pW(t.font),n=fW(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,i;if(UV(t,this.left,this.right)&&UV(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],UV(t,r.left,r.left+r.width)&&UV(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,i=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(r,n);r&&!i&&rV(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!i&&rV(e.onHover,[t,n,this],this)}else n&&rV(e.onClick,[t,n,this],this)}}var aX={id:"legend",_element:sX,start(t,e,n){const r=t.legend=new sX({ctx:t.ctx,options:n,chart:t});MJ.configure(t,r,n),MJ.addBox(t,r)},stop(t){MJ.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;MJ.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const s=t.controller.getStyle(n?0:void 0),a=fW(s.borderWidth);return{text:e[t.index].label,fillStyle:s.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:s.borderCapStyle,lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:s.borderColor,pointStyle:r||s.pointStyle,rotation:s.rotation,textAlign:i||s.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lX extends HH{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=QU(n.text)?n.text.length:1;this._padding=fW(n.padding);const i=r*pW(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:i,options:o}=this,s=o.align;let a,l,c,u=0;return this.isHorizontal()?(l=QV(s,n,i),c=e+t,a=i-n):("left"===o.position?(l=n+t,c=QV(s,r,e),u=-.5*bV):(l=i-t,c=QV(s,e,r),u=.5*bV),a=r-e),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=pW(e.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);rW(t,e.text,0,0,n,{color:e.color,maxWidth:s,rotation:a,textAlign:YV(e.align),textBaseline:"middle",translation:[i,o]})}}var cX={id:"title",_element:lX,start(t,e,n){!function(t,e){const n=new lX({ctx:t.ctx,options:e,chart:t});MJ.configure(t,n,e),MJ.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;MJ.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;MJ.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const uX={average(t){if(!t.length)return!1;let e,n,r=0,i=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r+=t.x,i+=t.y,++o}}return{x:r/o,y:i/o}},nearest(t,e){if(!t.length)return!1;let n,r,i,o=e.x,s=e.y,a=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){const r=t[n].element;if(r&&r.hasValue()){const t=DV(e,r.getCenterPoint());t<a&&(a=t,i=r)}}if(i){const t=i.tooltipPosition();o=t.x,s=t.y}return{x:o,y:s}}};function dX(t,e){return e&&(QU(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function hX(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function fX(t,e){const{element:n,datasetIndex:r,index:i}=e,o=t.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:t,label:s,parsed:o.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function pX(t,e){const n=t.chart.ctx,{body:r,footer:i,title:o}=t,{boxWidth:s,boxHeight:a}=e,l=pW(e.bodyFont),c=pW(e.titleFont),u=pW(e.footerFont),d=o.length,h=i.length,f=r.length,p=fW(e.padding);let g=p.height,m=0,v=r.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let b=0;const y=function(t){m=Math.max(m,n.measureText(t).width+b)};return n.save(),n.font=c.string,iV(t.title,y),n.font=l.string,iV(t.beforeBody.concat(t.afterBody),y),b=e.displayColors?s+2+e.boxPadding:0,iV(r,(t=>{iV(t.before,y),iV(t.lines,y),iV(t.after,y)})),b=0,n.font=u.string,iV(t.footer,y),n.restore(),m+=p.width,{width:m,height:g}}function gX(t,e,n,r){const{x:i,width:o}=n,{width:s,chartArea:{left:a,right:l}}=t;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=s-o/2&&(c="right"),function(t,e,n,r){const{x:i,width:o}=r,s=n.caretSize+n.caretPadding;return"left"===t&&i+o+s>e.width||"right"===t&&i-o-s<0||void 0}(c,t,e,n)&&(c="center"),c}function mX(t,e,n){const r=n.yAlign||e.yAlign||function(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||gX(t,e,n,r),yAlign:r}}function vX(t,e,n,r){const{caretSize:i,caretPadding:o,cornerRadius:s}=t,{xAlign:a,yAlign:l}=n,c=i+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=hW(s);let p=function(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,a);const g=function(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,h)+i:"right"===a&&(p+=Math.max(d,f)+i),{x:zV(p,0,r.width-e.width),y:zV(g,0,r.height-e.height)}}function bX(t,e,n){const r=fW(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function yX(t){return dX([],hX(t))}function xX(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class AX extends HH{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new vH(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,mW(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,r=n.beforeTitle.apply(this,[t]),i=n.title.apply(this,[t]),o=n.afterTitle.apply(this,[t]);let s=[];return s=dX(s,hX(r)),s=dX(s,hX(i)),s=dX(s,hX(o)),s}getBeforeBody(t,e){return yX(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:n}=e,r=[];return iV(t,(t=>{const e={before:[],lines:[],after:[]},i=xX(n,t);dX(e.before,hX(i.beforeLabel.call(this,t))),dX(e.lines,i.label.call(this,t)),dX(e.after,hX(i.afterLabel.call(this,t))),r.push(e)})),r}getAfterBody(t,e){return yX(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:n}=e,r=n.beforeFooter.apply(this,[t]),i=n.footer.apply(this,[t]),o=n.afterFooter.apply(this,[t]);let s=[];return s=dX(s,hX(r)),s=dX(s,hX(i)),s=dX(s,hX(o)),s}_createItems(t){const e=this._active,n=this.chart.data,r=[],i=[],o=[];let s,a,l=[];for(s=0,a=e.length;s<a;++s)l.push(fX(this.chart,e[s]));return t.filter&&(l=l.filter(((e,r,i)=>t.filter(e,r,i,n)))),t.itemSort&&(l=l.sort(((e,r)=>t.itemSort(e,r,n)))),iV(l,(e=>{const n=xX(t.callbacks,e);r.push(n.labelColor.call(this,e)),i.push(n.labelPointStyle.call(this,e)),o.push(n.labelTextColor.call(this,e))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const t=uX[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=pX(this,n),s=Object.assign({},t,e),a=mX(this.chart,n,s),l=vX(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:s}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=hW(s),{x:d,y:h}=t,{width:f,height:p}=e;let g,m,v,b,y,x;return"center"===i?(y=h+p/2,"left"===r?(g=d,m=g-o,b=y+o,x=y-o):(g=d+f,m=g+o,b=y-o,x=y+o),v=g):(m="left"===r?d+Math.max(a,c)+o:"right"===r?d+f-Math.max(l,u)-o:this.caretX,"top"===i?(b=h,y=b-o,g=m-o,v=m+o):(b=h+p,y=b+o,g=m+o,v=m-o),x=b),{x1:g,x2:m,x3:v,y1:b,y2:y,y3:x}}drawTitle(t,e,n){const r=this.title,i=r.length;let o,s,a;if(i){const l=nH(n.rtl,this.x,this.width);for(t.x=bX(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",o=pW(n.titleFont),s=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,a=0;a<i;++a)e.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s,a+1===i&&(t.y+=n.titleMarginBottom-s)}}_drawColorBox(t,e,n,r,i){const o=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:l,boxPadding:c}=i,u=pW(i.bodyFont),d=bX(this,"left",i),h=r.x(d),f=a<u.lineHeight?(u.lineHeight-a)/2:0,p=e.y+f;if(i.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=p+a/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,YG(t,e,n,c),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,YG(t,e,n,c)}else{t.lineWidth=ZU(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=r.leftForLtr(h,l-c),n=r.leftForLtr(r.xPlus(h,1),l-c-2),s=hW(o.borderRadius);Object.values(s).some((t=>0!==t))?(t.beginPath(),t.fillStyle=i.multiKeyBackground,oW(t,{x:e,y:p,w:l,h:a,radius:s}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),oW(t,{x:n,y:p+1,w:l-2,h:a-2,radius:s}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,p,l,a),t.strokeRect(e,p,l,a),t.fillStyle=o.backgroundColor,t.fillRect(n,p+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=pW(n.bodyFont);let d=u.lineHeight,h=0;const f=nH(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+h),t.y+d/2),t.y+=d+i},g=f.textAlign(o);let m,v,b,y,x,A,_;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=bX(this,g,n),e.fillStyle=n.bodyColor,iV(this.beforeBody,p),h=s&&"right"!==g?"center"===o?l/2+c:l+2+c:0,y=0,A=r.length;y<A;++y){for(m=r[y],v=this.labelTextColors[y],e.fillStyle=v,iV(m.before,p),b=m.lines,s&&b.length&&(this._drawColorBox(e,t,y,f,n),d=Math.max(u.lineHeight,a)),x=0,_=b.length;x<_;++x)p(b[x]),d=u.lineHeight;iV(m.after,p)}h=0,d=u.lineHeight,iV(this.afterBody,p),t.y-=i}drawFooter(t,e,n){const r=this.footer,i=r.length;let o,s;if(i){const a=nH(n.rtl,this.x,this.width);for(t.x=bX(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",o=pW(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,s=0;s<i;++s)e.fillText(r[s],a.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:i,yAlign:o}=this,{x:s,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=hW(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(s+u,a),"top"===o&&this.drawCaret(t,e,n,r),e.lineTo(s+l-d,a),e.quadraticCurveTo(s+l,a,s+l,a+d),"center"===o&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(s+l,a+c-f),e.quadraticCurveTo(s+l,a+c,s+l-f,a+c),"bottom"===o&&this.drawCaret(t,e,n,r),e.lineTo(s+h,a+c),e.quadraticCurveTo(s,a+c,s,a+c-h),"center"===o&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(s,a+u),e.quadraticCurveTo(s,a,s+u,a),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=uX[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=pX(this,t),s=Object.assign({},n,this._size),a=mX(e,t,s),l=vX(t,s,a,e);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=fW(e.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&s&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),rH(t,e.textDirection),i.y+=o.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),iH(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map((t=>{let{datasetIndex:e,index:n}=t;const r=this.chart.getDatasetMeta(e);if(!r)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:r.data[n],index:n}})),i=!oV(n,r),o=this._positionChanged(r,e);(i||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,e,n),s=this._positionChanged(o,t),a=e||!oV(o,i)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e;const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,o=uX[i.position].call(this,t,e);return!1!==o&&(n!==o.x||r!==o.y)}}AX.positioners=uX;var _X={id:"tooltip",_element:AX,positioners:uX,afterInit(t,e,n){n&&(t.tooltip=new AX({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",n))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:XU,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:XU,beforeBody:XU,beforeLabel:XU,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return YU(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:XU,afterBody:XU,beforeFooter:XU,footer:XU,afterFooter:XU}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function wX(t,e,n,r){const i=t.indexOf(e);if(-1===i)return((t,e,n,r)=>("string"===typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,r);return i!==t.lastIndexOf(e)?n:i}class SX extends nJ{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(YU(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:zV(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:wX(n,t,eV(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function CX(t,e){const n=[],{bounds:r,step:i,min:o,max:s,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=t,h=i||1,f=c-1,{min:p,max:g}=e,m=!YU(o),v=!YU(s),b=!YU(l),y=(g-p)/(u+1);let x,A,_,w,S=MV((g-p)/f/h)*h;if(S<1e-14&&!m&&!v)return[{value:p},{value:g}];w=Math.ceil(g/S)-Math.floor(p/S),w>f&&(S=MV(w*S/f/h)*h),YU(a)||(x=Math.pow(10,a),S=Math.ceil(S*x)/x),"ticks"===r?(A=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(A=p,_=g),m&&v&&i&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((s-o)/i,S/1e3)?(w=Math.round(Math.min((s-o)/S,c)),S=(s-o)/w,A=o,_=s):b?(A=m?o:A,_=v?s:_,w=l-1,S=(_-A)/w):(w=(_-A)/S,w=OV(w,Math.round(w),S/1e3)?Math.round(w):Math.ceil(w));const C=Math.max(BV(S),BV(A));x=Math.pow(10,YU(a)?C:a),A=Math.round(A*x)/x,_=Math.round(_*x)/x;let E=0;for(m&&(d&&A!==o?(n.push({value:o}),A<o&&E++,OV(Math.round((A+E*S)*x)/x,o,EX(o,y,t))&&E++):A<o&&E++);E<w;++E)n.push({value:Math.round((A+E*S)*x)/x});return v&&d&&_!==s?n.length&&OV(n[n.length-1].value,s,EX(s,y,t))?n[n.length-1].value=s:n.push({value:s}):v&&_!==s||n.push({value:_}),n}function EX(t,e,n){let{horizontal:r,minRotation:i}=n;const o=RV(i),s=(r?Math.sin(o):Math.cos(o))||.001,a=.75*e*(""+t).length;return Math.min(e/s,a)}SX.id="category",SX.defaults={ticks:{callback:SX.prototype.getLabelForValue}};class PX extends nJ{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return YU(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=t=>r=e?r:t,s=t=>i=n?i:t;if(t){const t=PV(r),e=PV(i);t<0&&e<0?s(0):t>0&&e>0&&o(0)}if(r===i){let e=1;(i>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*i)),s(i+e),t||o(r-e)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=CX({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&kV(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return eH(t,this.chart.options.locale,this.options.ticks.format)}}class MX extends PX{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=$U(t)?t:0,this.max=$U(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=RV(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function TX(t){return 1===t/Math.pow(10,Math.floor(EV(t)))}MX.id="linear",MX.defaults={ticks:{callback:KH.formatters.numeric}};class OX extends nJ{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=PX.prototype.parse.apply(this,[t,e]);if(0!==n)return $U(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=$U(t)?Math.max(0,t):null,this.max=$U(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,o=t=>r=e?r:t,s=(t,e)=>Math.pow(10,Math.floor(EV(t))+e);n===r&&(n<=0?(i(1),o(10)):(i(s(n,-1)),o(s(r,1)))),n<=0&&i(s(r,-1)),r<=0&&o(s(n,1)),this._zero&&this.min!==this._suggestedMin&&n===s(this.min,0)&&i(s(n,-1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e=function(t,e){const n=Math.floor(EV(e.max)),r=Math.ceil(e.max/Math.pow(10,n)),i=[];let o=tV(t.min,Math.pow(10,Math.floor(EV(e.min)))),s=Math.floor(EV(o)),a=Math.floor(o/Math.pow(10,s)),l=s<0?Math.pow(10,Math.abs(s)):1;do{i.push({value:o,major:TX(o)}),++a,10===a&&(a=1,++s,l=s>=0?1:l),o=Math.round(a*Math.pow(10,s)*l)/l}while(s<n||s===n&&a<r);const c=tV(t.max,o);return i.push({value:c,major:TX(o)}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&kV(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":eH(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=EV(t),this._valueRange=EV(this.max)-EV(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(EV(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function kX(t){const e=t.ticks;if(e.display&&t.display){const t=fW(e.backdropPadding);return eV(e.font&&e.font.size,HG.font.size)+t.height}return 0}function RX(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function IX(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],o=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?bV/o:0;for(let d=0;d<o;d++){const o=s.setContext(t.getPointLabelContext(d));i[d]=o.padding;const h=t.getPointPosition(d,t.drawingArea+i[d],a),f=pW(o.font),p=(l=t.ctx,c=f,u=QU(u=t._pointLabels[d])?u:[u],{w:KG(l,c.string,u),h:u.length*c.lineHeight});r[d]=p;const g=NV(t.getIndexAngle(d)+a),m=Math.round(IV(g));BX(n,e,g,RX(m,h.x,p.w,0,180),RX(m,h.y,p.h,90,270))}var l,c,u;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const r=[],i=t._pointLabels.length,o=t.options,s=kX(o)/2,a=t.drawingArea,l=o.pointLabels.centerPointLabels?bV/i:0;for(let c=0;c<i;c++){const i=t.getPointPosition(c,a+s+n[c],l),o=Math.round(IV(NV(i.angle+wV))),u=e[c],d=FX(i.y,u.h,o),h=LX(o),f=DX(i.x,u.w,h);r.push({x:i.x,y:d,textAlign:h,left:f,top:d,right:f+u.w,bottom:d+u.h})}return r}(t,r,i)}function BX(t,e,n,r,i){const o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/o,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/s,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function LX(t){return 0===t||180===t?"center":t<180?"left":"right"}function DX(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function FX(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function NX(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,yV);else{let n=t.getPointPosition(0,e);i.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=t.getPointPosition(o,e),i.lineTo(n.x,n.y)}}OX.id="logarithmic",OX.defaults={ticks:{callback:KH.formatters.logarithmic,major:{enabled:!0}}};class jX extends PX{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=fW(kX(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=$U(t)&&!isNaN(t)?t:0,this.max=$U(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/kX(this.options))}generateTickLabels(t){PX.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=rV(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?IX(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return NV(t*(yV/(this._pointLabels.length||1))+RV(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(YU(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(YU(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return mW(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(t)-wV+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),NX(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r}=e,i=this._pointLabels.length;let o,s,a;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const e=r.setContext(t.getPointLabelContext(i)),o=pW(e.font),{x:s,y:a,textAlign:l,left:c,top:u,right:d,bottom:h}=t._pointLabelItems[i],{backdropColor:f}=e;if(!YU(f)){const t=hW(e.borderRadius),r=fW(e.backdropPadding);n.fillStyle=f;const i=c-r.left,o=u-r.top,s=d-c+r.width,a=h-u+r.height;Object.values(t).some((t=>0!==t))?(n.beginPath(),oW(n,{x:i,y:o,w:s,h:a,radius:t}),n.fill()):n.fillRect(i,o,s,a)}rW(n,t._pointLabels[i],s,a+o.lineHeight/2,o,{color:e.color,textAlign:l,textBaseline:"middle"})}}(this,i),r.display&&this.ticks.forEach(((t,e)=>{if(0!==e){s=this.getDistanceFromCenterForValue(t.value);!function(t,e,n,r){const i=t.ctx,o=e.circular,{color:s,lineWidth:a}=e;!o&&!r||!s||!a||n<0||(i.save(),i.strokeStyle=s,i.lineWidth=a,i.setLineDash(e.borderDash),i.lineDashOffset=e.borderDashOffset,i.beginPath(),NX(t,n,o,r),i.closePath(),i.stroke(),i.restore())}(this,r.setContext(this.getContext(e-1)),s,i)}})),n.display){for(t.save(),o=i-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:l}=r;l&&i&&(t.lineWidth=l,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,s=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),a=this.getPointPosition(o,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(a.x,a.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((r,s)=>{if(0===s&&!e.reverse)return;const a=n.setContext(this.getContext(s)),l=pW(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){t.font=l.string,o=t.measureText(r.label).width,t.fillStyle=a.backdropColor;const e=fW(a.backdropPadding);t.fillRect(-o/2-e.left,-i-l.size/2-e.top,o+e.width,l.size+e.height)}rW(t,r.label,0,-i,l,{color:a.color})})),t.restore()}drawTitle(){}}jX.id="radialLinear",jX.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:KH.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},jX.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},jX.descriptors={angleLines:{_fallback:"grid"}};const zX={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UX=Object.keys(zX);function VX(t,e){return t-e}function GX(t,e){if(YU(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:o}=t._parseOpts;let s=e;return"function"===typeof r&&(s=r(s)),$U(s)||(s="string"===typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&(s="week"!==i||!TV(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function WX(t,e,n,r){const i=UX.length;for(let o=UX.indexOf(t);o<i-1;++o){const t=zX[UX[o]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return UX[o]}return UX[i-1]}function HX(t,e,n){if(n){if(n.length){const{lo:r,hi:i}=VV(n,e);t[n[r]>=e?n[r]:n[i]]=!0}}else t[e]=!0}function JX(t,e,n){const r=[],i={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,r.push({value:a,major:!1});return 0!==o&&n?function(t,e,n,r){const i=t._adapter,o=+i.startOf(e[0].value,r),s=e[e.length-1].value;let a,l;for(a=o;a<=s;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}(t,r,i,n):r}class KX extends nJ{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const n=t.time||(t.time={}),r=this._adapter=new lJ._date(t.adapters.date);r.init(e),uV(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:GX(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();function a(t){o||isNaN(t.min)||(r=Math.min(r,t.min)),s||isNaN(t.max)||(i=Math.max(i,t.max))}o&&s||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),r=$U(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),i=$U(i)&&!isNaN(i)?i:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=function(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?WX(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(let o=UX.length-1;o>=UX.indexOf(n);o--){const n=UX[o];if(zX[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return UX[n?UX.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=UX.indexOf(t)+1,n=UX.length;e<n;++e)if(zX[UX[e]].common)return UX[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&o.reverse(),JX(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t){let e,n,r=0,i=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),i=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=zV(r,0,o),i=zV(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||WX(i.minUnit,e,n,this._getLabelCapacity(e)),s=eV(i.stepSize,1),a="week"===o&&i.isoWeekday,l=TV(a)||!0===a,c={};let u,d,h=e;if(l&&(h=+t.startOf(h,"isoWeek",a)),h=+t.startOf(h,l?"day":o),t.diff(n,e,o)>1e5*s)throw new Error(e+" and "+n+" are too far apart with stepSize of "+s+" "+o);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+t.add(u,s,o),d++)HX(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||HX(c,u,f),Object.keys(c).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}_tickFormatFunction(t,e,n,r){const i=this.options,o=i.time.displayFormats,s=this._unit,a=this._majorUnit,l=s&&o[s],c=a&&o[a],u=n[e],d=a&&c&&u&&u.major,h=this._adapter.format(t,r||(d?c:l)),f=i.ticks.callback;return f?rV(f,[h,e,n],this):h}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=RV(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:n*i+s*o,h:n*o+s*i}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,JX(this,[t],this._majorUnit),r),o=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(GX(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return KV(t.sort(VX))}}function XX(t,e,n){let r,i,o,s,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=GV(t,"pos",e)),({pos:r,time:o}=t[a]),({pos:i,time:s}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=GV(t,"time",e)),({time:r,pos:o}=t[a]),({time:i,pos:s}=t[l]));const c=i-r;return c?o+(s-o)*(e-r)/c:o}KX.id="time",KX.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class qX extends KX{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=XX(e,this.min),this._tableRange=XX(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let o,s,a,l,c;for(o=0,s=t.length;o<s;++o)l=t[o],l>=e&&l<=n&&r.push(l);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,s=r.length;o<s;++o)c=r[o+1],a=r[o-1],l=r[o],Math.round((c+a)/2)!==l&&i.push({time:l,pos:o/(s-1)});return i}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(XX(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return XX(this._table,n*this._tableRange+this._minPos,!0)}}qX.id="timeseries",qX.defaults=KX.defaults;const YX="label";function QX(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function ZX(t,e){t.labels=e}function $X(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:YX;const r=[];t.datasets=e.map((e=>{const i=t.datasets.find((t=>t[n]===e[n]));return i&&e.data&&!r.includes(i)?(r.push(i),Object.assign(i,e),i):{...e}}))}function tq(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:YX;const n={labels:[],datasets:[]};return ZX(n,t.labels),$X(n,t.datasets,e),n}function eq(t,e){let{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:o,type:s,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t;const p=(0,h.useRef)(null),g=(0,h.useRef)(),m=()=>{p.current&&(g.current=new gK(p.current,{type:s,data:tq(a,o),options:l&&{...l},plugins:c}),QX(e,g.current))},v=()=>{QX(e,null),g.current&&(g.current.destroy(),g.current=null)};return(0,h.useEffect)((()=>{var t,e;!i&&g.current&&l&&(t=g.current,e=l,Object.assign(t.options,e))}),[i,l]),(0,h.useEffect)((()=>{!i&&g.current&&ZX(g.current.config.data,a.labels)}),[i,a.labels]),(0,h.useEffect)((()=>{!i&&g.current&&a.datasets&&$X(g.current.config.data,a.datasets,o)}),[i,a.datasets]),(0,h.useEffect)((()=>{g.current&&(i?(v(),setTimeout(m)):g.current.update(d))}),[i,l,a.labels,a.datasets,d]),(0,h.useEffect)((()=>{g.current&&(v(),setTimeout(m))}),[s]),(0,h.useEffect)((()=>(m(),()=>v())),[]),h.createElement("canvas",Object.assign({ref:p,role:"img",height:n,width:r},f),u)}const nq=(0,h.forwardRef)(eq);function rq(t,e){return gK.register(e),(0,h.forwardRef)(((e,n)=>h.createElement(nq,Object.assign({},e,{ref:n,type:t}))))}const iq=rq("bar",NH),oq=rq("radar",WH),sq=rq("doughnut",zH),aq={plugins:{tooltip:{callbacks:{label:t=>{const e="".concat((100*t.parsed.r).toFixed(2)||0,"%");if(!t.dataset.descriptions||void 0===t.dataset.descriptions[t.dataIndex])return["".concat(e)];const n=t.dataset.descriptions[t.dataIndex];if(n.length>30){const t=n.lastIndexOf(" ",30);return["".concat(e),"".concat(n.slice(0,t)),"".concat(n.slice(t+1))]}return["".concat(e),"".concat(n)]}}},datalabels:{display:!1}},scales:{r:{ticks:{display:!1,backdropColor:"rgba(0, 0, 0, 0)"},angleLines:{color:"#696969"},suggestedMin:0,suggestedMax:1,grid:{color:"#959595",circular:!0},pointLabels:{color:"#bcbcbc",font:function(t){var e=Math.round((t.chart.height+t.chart.width)/2),n=Math.round(e/80);return{size:n>8?n:8}}}}}},lq={scales:{r:{angleLines:{color:"#363636"},grid:{color:"#363636",circular:!0},pointLabels:{color:"#363636"},ticks:{color:"#363636",backdropColor:"rgba(0, 0, 0, 0)"}}}},cq={labels:[null,null,null],datasets:[{label:"Waiting for data...",data:[null,null,null],backgroundColor:"#00000000",borderColor:"#00000000",borderWidth:1}]};function uq(){gK.register(jX,BK,RK,iX,_X,aX);const t=et((t=>t.cityIOdataState.cityIOdata)),[e,n]=(0,h.useState)();return(0,h.useEffect)((()=>{if(t.indicators){const e=(e=>{let n={labels:[],datasets:[{label:"Project Values",data:[],backgroundColor:"#42a4f573",borderColor:"#42a5f5",borderWidth:1.5,descriptions:[]},{label:"reference",data:[],backgroundColor:"#55555581",borderColor:"#b4b4b4",borderWidth:1,descriptions:[]}]};for(let r=0;r<e.length;r++)"radar"===e[r].viz_type&&(n.labels.push(e[r].name),n.datasets[0].data.push(e[r].value),n.datasets[0].label=null===t||void 0===t?void 0:t.tableName,e[r].description?n.datasets[0].descriptions.push(e[r].description):n.datasets[0].descriptions.push("No description available"),n.datasets[1].data.push(e[r].ref_value));return n})(t.indicators);n(e)}else n(cq)}),[t]),(0,v.jsx)(v.Fragment,{children:e&&(0,v.jsx)(oq,{data:e,options:t.indicators?aq:lq})})}gK.register(SX,MX,UK,cX,_X,aX);const dq={plugins:{tooltip:{callbacks:{label:function(t){const e="".concat((100*t.parsed.y).toFixed(2)||0,"%");if(!t.dataset.descriptions||void 0===t.dataset.descriptions[t.dataIndex])return["".concat(e)];const n=t.dataset.descriptions[t.dataIndex];if(n.length>30){const t=n.lastIndexOf(" ",30);return["".concat(e),"".concat(n.slice(0,t)),"".concat(n.slice(t+1))]}return["".concat(e),"".concat(n)]}}},legend:{display:!1},datalabels:{display:!1}},maintainAspectRatio:!0,aspectRatio:1,scales:{y:{suggestedMin:0,suggestedMax:1,grid:{color:"#414141"},pointLabels:{color:"#414141"},ticks:{color:"#414141",format:{style:"percent"}}}},responsive:!0},hq={labels:["no data..."],datasets:[{label:"No indicator data...",data:[0],backgroundColor:"#696969"}]};function fq(){const t=et((t=>t.cityIOdataState.cityIOdata)),[e,n]=(0,h.useState)();(0,h.useEffect)((()=>{if(t.indicators){const e=r(t.indicators);n(e)}else n(hq)}),[t]);const r=t=>{let e={labels:[],datasets:[{descriptions:[],label:"Chart Data",data:[],backgroundColor:[],borderColor:[],borderWidth:1}]};for(let r=0;r<t.length;r++)if("bar"===t[r].viz_type){e.labels.push(t[r].name),e.datasets[0].data.push(t[r].value);var n=Wp(t[r].value,0,1);e.datasets[0].backgroundColor.push("rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", 0.5)")),e.datasets[0].borderColor.push("rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", 1)")),t[r].description?e.datasets[0].descriptions.push(t[r].description):e.datasets[0].descriptions.push("No description available")}return e};return(0,v.jsx)(v.Fragment,{children:e&&(0,v.jsx)(iq,{options:dq,data:e||hq})})}var pq=function(){if("undefined"!==typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),gq=function(t){var e,n=[];for(t=[].concat(t);t.length;)"string"===typeof(e=t.pop())?n.unshift.apply(n,e.split("\n")):Array.isArray(e)?t.push.apply(t,e):YU(t)||n.unshift(""+e);return n},mq=function(t,e,n){var r,i=[].concat(e),o=i.length,s=t.font,a=0;for(t.font=n.string,r=0;r<o;++r)a=Math.max(t.measureText(i[r]).width,a);return t.font=s,{height:o*n.lineHeight,width:a}},vq=function(t,e,n){return Math.max(t,Math.min(e,n))},bq=function(t,e){var n,r,i,o,s=t.slice(),a=[];for(n=0,i=e.length;n<i;++n)o=e[n],-1===(r=s.indexOf(o))?a.push([o,1]):s.splice(r,1);for(n=0,i=s.length;n<i;++n)a.push([s[n],-1]);return a},yq=function(t){return Math.round(t*pq)/pq};function xq(t,e){var n=e.x,r=e.y;if(null===n)return{x:0,y:-1};if(null===r)return{x:1,y:0};var i=t.x-n,o=t.y-r,s=Math.sqrt(i*i+o*o);return{x:s?i/s:0,y:s?o/s:-1}}var Aq=0,_q=1,wq=2,Sq=4,Cq=8;function Eq(t,e,n){var r=Aq;return t<n.left?r|=_q:t>n.right&&(r|=wq),e<n.top?r|=Cq:e>n.bottom&&(r|=Sq),r}function Pq(t,e){var n,r,i=e.anchor,o=t;return e.clamp&&(o=function(t,e){for(var n,r,i,o=t.x0,s=t.y0,a=t.x1,l=t.y1,c=Eq(o,s,e),u=Eq(a,l,e);c|u&&!(c&u);)(n=c||u)&Cq?(r=o+(a-o)*(e.top-s)/(l-s),i=e.top):n&Sq?(r=o+(a-o)*(e.bottom-s)/(l-s),i=e.bottom):n&wq?(i=s+(l-s)*(e.right-o)/(a-o),r=e.right):n&_q&&(i=s+(l-s)*(e.left-o)/(a-o),r=e.left),n===c?c=Eq(o=r,s=i,e):u=Eq(a=r,l=i,e);return{x0:o,x1:a,y0:s,y1:l}}(o,e.area)),"start"===i?(n=o.x0,r=o.y0):"end"===i?(n=o.x1,r=o.y1):(n=(o.x0+o.x1)/2,r=(o.y0+o.y1)/2),function(t,e,n,r,i){switch(i){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:i*=Math.PI/180,n=Math.cos(i),r=Math.sin(i)}return{x:t,y:e,vx:n,vy:r}}(n,r,t.vx,t.vy,e.align)}var Mq=function(t,e){var n=(t.startAngle+t.endAngle)/2,r=Math.cos(n),i=Math.sin(n),o=t.innerRadius,s=t.outerRadius;return Pq({x0:t.x+r*o,y0:t.y+i*o,x1:t.x+r*s,y1:t.y+i*s,vx:r,vy:i},e)},Tq=function(t,e){var n=xq(t,e.origin),r=n.x*t.options.radius,i=n.y*t.options.radius;return Pq({x0:t.x-r,y0:t.y-i,x1:t.x+r,y1:t.y+i,vx:n.x,vy:n.y},e)},Oq=function(t,e){var n=xq(t,e.origin),r=t.x,i=t.y,o=0,s=0;return t.horizontal?(r=Math.min(t.x,t.base),o=Math.abs(t.base-t.x)):(i=Math.min(t.y,t.base),s=Math.abs(t.base-t.y)),Pq({x0:r,y0:i+s,x1:r+o,y1:i,vx:n.x,vy:n.y},e)},kq=function(t,e){var n=xq(t,e.origin);return Pq({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:n.x,vy:n.y},e)},Rq=yq;function Iq(t,e){var n=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!n)return null;if(void 0!==n.xCenter&&void 0!==n.yCenter)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return t.horizontal?{x:r,y:null}:{x:null,y:r}}function Bq(t,e,n){var r=n.backgroundColor,i=n.borderColor,o=n.borderWidth;(r||i&&o)&&(t.beginPath(),function(t,e,n,r,i,o){var s=Math.PI/2;if(o){var a=Math.min(o,i/2,r/2),l=e+a,c=n+a,u=e+r-a,d=n+i-a;t.moveTo(e,c),l<u&&c<d?(t.arc(l,c,a,-Math.PI,-s),t.arc(u,c,a,-s,0),t.arc(u,d,a,0,s),t.arc(l,d,a,s,Math.PI)):l<u?(t.moveTo(l,n),t.arc(u,c,a,-s,s),t.arc(l,c,a,s,Math.PI+s)):c<d?(t.arc(l,c,a,-Math.PI,0),t.arc(l,d,a,0,Math.PI)):t.arc(l,c,a,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,r,i)}(t,Rq(e.x)+o/2,Rq(e.y)+o/2,Rq(e.w)-o,Rq(e.h)-o,n.borderRadius),t.closePath(),r&&(t.fillStyle=r,t.fill()),i&&o&&(t.strokeStyle=i,t.lineWidth=o,t.lineJoin="miter",t.stroke()))}function Lq(t,e,n){var r=t.shadowBlur,i=n.stroked,o=Rq(n.x),s=Rq(n.y),a=Rq(n.w);i&&t.strokeText(e,o,s,a),n.filled&&(r&&i&&(t.shadowBlur=0),t.fillText(e,o,s,a),r&&i&&(t.shadowBlur=r))}var Dq=function(t,e,n,r){var i=this;i._config=t,i._index=r,i._model=null,i._rects=null,i._ctx=e,i._el=n};cV(Dq.prototype,{_modelize:function(t,e,n,r){var i,o=this,s=o._index,a=pW(gW([n.font,{}],r,s)),l=gW([n.color,HG.color],r,s);return{align:gW([n.align,"center"],r,s),anchor:gW([n.anchor,"center"],r,s),area:r.chart.chartArea,backgroundColor:gW([n.backgroundColor,null],r,s),borderColor:gW([n.borderColor,null],r,s),borderRadius:gW([n.borderRadius,0],r,s),borderWidth:gW([n.borderWidth,0],r,s),clamp:gW([n.clamp,!1],r,s),clip:gW([n.clip,!1],r,s),color:l,display:t,font:a,lines:e,offset:gW([n.offset,4],r,s),opacity:gW([n.opacity,1],r,s),origin:Iq(o._el,r),padding:fW(gW([n.padding,4],r,s)),positioner:(i=o._el,i instanceof wK?Mq:i instanceof BK?Tq:i instanceof UK?Oq:kq),rotation:gW([n.rotation,0],r,s)*(Math.PI/180),size:mq(o._ctx,e,a),textAlign:gW([n.textAlign,"start"],r,s),textShadowBlur:gW([n.textShadowBlur,0],r,s),textShadowColor:gW([n.textShadowColor,l],r,s),textStrokeColor:gW([n.textStrokeColor,l],r,s),textStrokeWidth:gW([n.textStrokeWidth,0],r,s)}},update:function(t){var e,n,r,i=this,o=null,s=null,a=i._index,l=i._config,c=gW([l.display,!0],t,a);c&&(e=t.dataset.data[a],(r=YU(n=eV(rV(l.formatter,[e,t]),e))?[]:gq(n)).length&&(s=function(t){var e=t.borderWidth||0,n=t.padding,r=t.size.height,i=t.size.width,o=-i/2,s=-r/2;return{frame:{x:o-n.left-e,y:s-n.top-e,w:i+n.width+2*e,h:r+n.height+2*e},text:{x:o,y:s,w:i,h:r}}}(o=i._modelize(c,r,l,t)))),i._model=o,i._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var n,r=t.ctx,i=this._model,o=this._rects;this.visible()&&(r.save(),i.clip&&(n=i.area,r.beginPath(),r.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),r.clip()),r.globalAlpha=vq(0,i.opacity,1),r.translate(Rq(e.x),Rq(e.y)),r.rotate(i.rotation),Bq(r,o.frame,i),function(t,e,n,r){var i,o=r.textAlign,s=r.color,a=!!s,l=r.font,c=e.length,u=r.textStrokeColor,d=r.textStrokeWidth,h=u&&d;if(c&&(a||h))for(n=function(t,e,n){var r=n.lineHeight,i=t.w,o=t.x;return"center"===e?o+=i/2:"end"!==e&&"right"!==e||(o+=i),{h:r,w:i,x:o,y:t.y+r/2}}(n,o,l),t.font=l.string,t.textAlign=o,t.textBaseline="middle",t.shadowBlur=r.textShadowBlur,t.shadowColor=r.textShadowColor,a&&(t.fillStyle=s),h&&(t.lineJoin="round",t.lineWidth=d,t.strokeStyle=u),i=0,c=e.length;i<c;++i)Lq(t,e[i],{stroked:h,filled:a,w:n.w,x:n.x,y:n.y+n.h*i})}(r,i.lines,o.text,i),r.restore())}});var Fq=Number.MIN_SAFE_INTEGER||-9007199254740991,Nq=Number.MAX_SAFE_INTEGER||9007199254740991;function jq(t,e,n){var r=Math.cos(n),i=Math.sin(n),o=e.x,s=e.y;return{x:o+r*(t.x-o)-i*(t.y-s),y:s+i*(t.x-o)+r*(t.y-s)}}function zq(t,e){var n,r,i,o,s,a=Nq,l=Fq,c=e.origin;for(n=0;n<t.length;++n)i=(r=t[n]).x-c.x,o=r.y-c.y,s=e.vx*i+e.vy*o,a=Math.min(a,s),l=Math.max(l,s);return{min:a,max:l}}function Uq(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);return{vx:(e.x-t.x)/i,vy:(e.y-t.y)/i,origin:t,ln:i}}var Vq=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function Gq(t,e,n){var r=e.positioner(t,e),i=r.vx,o=r.vy;if(!i&&!o)return{x:r.x,y:r.y};var s=n.w,a=n.h,l=e.rotation,c=Math.abs(s/2*Math.cos(l))+Math.abs(a/2*Math.sin(l)),u=Math.abs(s/2*Math.sin(l))+Math.abs(a/2*Math.cos(l)),d=1/Math.max(Math.abs(i),Math.abs(o));return c*=i*d,u*=o*d,c+=e.offset*i,u+=e.offset*o,{x:r.x+c,y:r.y+u}}cV(Vq.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,n){this._rotation=n,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,n=e._rect;return!((t=jq(t,e.center(),-e._rotation)).x<n.x-1||t.y<n.y-1||t.x>n.x+n.w+2||t.y>n.y+n.h+2)},intersects:function(t){var e,n,r,i=this._points(),o=t._points(),s=[Uq(i[0],i[1]),Uq(i[0],i[3])];for(this._rotation!==t._rotation&&s.push(Uq(o[0],o[1]),Uq(o[0],o[3])),e=0;e<s.length;++e)if(n=zq(i,s[e]),r=zq(o,s[e]),n.max<r.min||r.max<n.min)return!1;return!0},_points:function(){var t=this,e=t._rect,n=t._rotation,r=t.center();return[jq({x:e.x,y:e.y},r,n),jq({x:e.x+e.w,y:e.y},r,n),jq({x:e.x+e.w,y:e.y+e.h},r,n),jq({x:e.x,y:e.y+e.h},r,n)]}});var Wq={prepare:function(t){var e,n,r,i,o,s=[];for(e=0,r=t.length;e<r;++e)for(n=0,i=t[e].length;n<i;++n)o=t[e][n],s.push(o),o.$layout={_box:new Vq,_hidable:!1,_visible:!0,_set:e,_idx:o._index};return s.sort((function(t,e){var n=t.$layout,r=e.$layout;return n._idx===r._idx?r._set-n._set:r._idx-n._idx})),this.update(s),s},update:function(t){var e,n,r,i,o,s=!1;for(e=0,n=t.length;e<n;++e)i=(r=t[e]).model(),(o=r.$layout)._hidable=i&&"auto"===i.display,o._visible=r.visible(),s|=o._hidable;s&&function(t){var e,n,r,i,o,s,a;for(e=0,n=t.length;e<n;++e)(i=(r=t[e]).$layout)._visible&&(a=new Proxy(r._el,{get:(t,e)=>t.getProps([e],!0)[e]}),o=r.geometry(),s=Gq(a,r.model(),o),i._box.update(s,o,r.rotation()));(function(t,e){var n,r,i,o;for(n=t.length-1;n>=0;--n)for(i=t[n].$layout,r=n-1;r>=0&&i._visible;--r)(o=t[r].$layout)._visible&&i._box.intersects(o._box)&&e(i,o)})(t,(function(t,e){var n=t._hidable,r=e._hidable;n&&r||r?e._visible=!1:n&&(t._visible=!1)}))}(t)},lookup:function(t,e){var n,r;for(n=t.length-1;n>=0;--n)if((r=t[n].$layout)&&r._visible&&r._box.contains(e))return t[n];return null},draw:function(t,e){var n,r,i,o,s,a;for(n=0,r=e.length;n<r;++n)(o=(i=e[n]).$layout)._visible&&(s=i.geometry(),a=Gq(i._el,i.model(),s),o._box.update(a,s,i.rotation()),i.draw(t,a))}},Hq={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(YU(t))return null;var e,n,r,i=t;if(ZU(t))if(YU(t.label))if(YU(t.r))for(i="",r=0,n=(e=Object.keys(t)).length;r<n;++r)i+=(0!==r?", ":"")+e[r]+": "+t[e[r]];else i=t.r;else i=t.label;return""+i},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Jq="$datalabels",Kq="$default";function Xq(t,e,n,r){if(e){var i,o=n.$context,s=n.$groups;e[s._set]&&(i=e[s._set][s._key])&&!0===rV(i,[o,r])&&(t[Jq]._dirty=!0,n.update(o))}}function qq(t,e){var n,r,i=t[Jq],o=i._listeners;if(o.enter||o.leave){if("mousemove"===e.type)r=Wq.lookup(i._labels,e);else if("mouseout"!==e.type)return;n=i._hovered,i._hovered=r,function(t,e,n,r,i){var o,s;(n||r)&&(n?r?n!==r&&(s=o=!0):s=!0:o=!0,s&&Xq(t,e.leave,n,i),o&&Xq(t,e.enter,r,i))}(t,o,n,r,e)}}var Yq={id:"datalabels",defaults:Hq,beforeInit:function(t){t[Jq]={_actives:[]}},beforeUpdate:function(t){var e=t[Jq];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,n){var r,i,o,s,a,l,c,u,d=e.index,h=t[Jq],f=h._datasets[d]=[],p=t.isDatasetVisible(d),g=t.data.datasets[d],m=function(t,e){var n,r,i,o=t.datalabels,s=[];return!1===o?null:(!0===o&&(o={}),e=cV({},[e,o]),r=e.labels||{},i=Object.keys(r),delete e.labels,i.length?i.forEach((function(t){r[t]&&s.push(cV({},[e,r[t],{_key:t}]))})):s.push(e),n=s.reduce((function(t,e){return iV(e.listeners||{},(function(n,r){t[r]=t[r]||{},t[r][e._key||Kq]=n})),delete e.listeners,t}),{}),{labels:s,listeners:n})}(g,n),v=e.meta.data||[],b=t.ctx;for(b.save(),r=0,o=v.length;r<o;++r)if((c=v[r])[Jq]=[],p&&c&&t.getDataVisibility(r)&&!c.skip)for(i=0,s=m.labels.length;i<s;++i)l=(a=m.labels[i])._key,(u=new Dq(a,b,c,r)).$groups={_set:d,_key:l||Kq},u.$context={active:!1,chart:t,dataIndex:r,dataset:g,datasetIndex:d},u.update(u.$context),c[Jq].push(u),f.push(u);b.restore(),cV(h._listeners,m.listeners,{merger:function(t,n,r){n[t]=n[t]||{},n[t][e.index]=r[t],h._listened=!0}})},afterUpdate:function(t){t[Jq]._labels=Wq.prepare(t[Jq]._datasets)},afterDatasetsDraw:function(t){Wq.draw(t,t[Jq]._labels)},beforeEvent:function(t,e){if(t[Jq]._listened){var n=e.event;switch(n.type){case"mousemove":case"mouseout":qq(t,n);break;case"click":!function(t,e){var n=t[Jq],r=n._listeners.click,i=r&&Wq.lookup(n._labels,e);i&&Xq(t,r,i,e)}(t,n)}}},afterEvent:function(t){var e,n,r,i,o,s,a,l=t[Jq],c=l._actives,u=l._actives=t.getActiveElements(),d=bq(c,u);for(e=0,n=d.length;e<n;++e)if((o=d[e])[1])for(r=0,i=(a=o[0].element[Jq]||[]).length;r<i;++r)(s=a[r]).$context.active=1===o[1],s.update(s.$context);(l._dirty||d.length)&&(Wq.update(l._labels),t.render()),delete l._dirty}};function Qq(t){return(0,Fn.Ay)("MuiSwitch",t)}const Zq=(0,Tn.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),$q=["className","color","edge","size","sx"],tY=jo(),eY=(0,Ln.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e["edge".concat((0,Dn.A)(n.edge))],e["size".concat((0,Dn.A)(n.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(Zq.thumb)]:{width:16,height:16},["& .".concat(Zq.switchBase)]:{padding:4,["&.".concat(Zq.checked)]:{transform:"translateX(16px)"}}}}]}),nY=(0,Ln.Ay)($s,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{["& .".concat(Zq.input)]:e.input},"default"!==n.color&&e["color".concat((0,Dn.A)(n.color))]]}})((t=>{let{theme:e}=t;return{position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:"".concat("light"===e.palette.mode?e.palette.common.white:e.palette.grey[300]),transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),["&.".concat(Zq.checked)]:{transform:"translateX(20px)"},["&.".concat(Zq.disabled)]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:"".concat("light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[600])},["&.".concat(Zq.checked," + .").concat(Zq.track)]:{opacity:.5},["&.".concat(Zq.disabled," + .").concat(Zq.track)]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:"".concat("light"===e.palette.mode?.12:.2)},["& .".concat(Zq.input)]:{left:"-100%",width:"300%"}}}),(t=>{let{theme:e}=t;return{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter((t=>{let[,e]=t;return e.main&&e.light})).map((t=>{let[n]=t;return{props:{color:n},style:{["&.".concat(Zq.checked)]:{color:(e.vars||e).palette[n].main,"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)(e.palette[n].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Zq.disabled)]:{color:e.vars?e.vars.palette.Switch["".concat(n,"DisabledColor")]:"".concat("light"===e.palette.mode?(0,Kn.a)(e.palette[n].main,.62):(0,Kn.e$)(e.palette[n].main,.55))}},["&.".concat(Zq.checked," + .").concat(Zq.track)]:{backgroundColor:(e.vars||e).palette[n].main}}}}))]}})),rY=(0,Ln.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,e)=>e.track})((t=>{let{theme:e}=t;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:"".concat("light"===e.palette.mode?e.palette.common.black:e.palette.common.white),opacity:e.vars?e.vars.opacity.switchTrack:"".concat("light"===e.palette.mode?.38:.3)}})),iY=(0,Ln.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})((t=>{let{theme:e}=t;return{boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),oY=h.forwardRef((function(t,e){const n=tY({props:t,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:s="medium",sx:a}=n,l=(0,C.A)(n,$q),c=(0,f.A)({},n,{color:i,edge:o,size:s}),u=(t=>{const{classes:e,edge:n,size:r,color:i,checked:o,disabled:s}=t,a={root:["root",n&&"edge".concat((0,Dn.A)(n)),"size".concat((0,Dn.A)(r))],switchBase:["switchBase","color".concat((0,Dn.A)(i)),o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,Bn.A)(a,Qq,e);return(0,f.A)({},e,l)})(c),d=(0,v.jsx)(iY,{className:u.thumb,ownerState:c});return(0,v.jsxs)(eY,{className:(0,wn.A)(u.root,r),sx:a,ownerState:c,children:[(0,v.jsx)(nY,(0,f.A)({type:"checkbox",icon:d,checkedIcon:d,ref:e,ownerState:c},l,{classes:(0,f.A)({},u,{root:u.switchBase})})),(0,v.jsx)(rY,{className:u.track,ownerState:c})]})})),sY=oY,aY={plugins:{legend:{display:!0,position:"left",align:"center",textDirection:"ltr",labels:{usePointStyle:!0,font:function(t){var e=Math.round((t.chart.height+t.chart.width)/2),n=Math.round(e/40);return{size:n>8?n:8}}}},tooltip:{callbacks:{label:t=>{const e=t.label,n="".concat(t.parsed.toFixed(0)||0," m\xb2"),r="".concat(Math.floor(10.7639*t.parsed)||0," ft\xb2");return"".concat(e," [").concat(n,"] [").concat(r,"]")}}},datalabels:{anchor:"center",rotation:function(t){const e=t.dataset.data.slice(0,t.dataIndex).reduce(((t,e)=>t+e),0),n=t.dataset.data.reduce(((t,e)=>t+e),0),r=(e+t.dataset.data[t.dataIndex]/2)/n*360;return r<180?r-90:r+90},color:t=>t.dataset.borderColor[t.dataIndex],formatter:(t,e)=>{const n=e.chart.data.labels[e.dataIndex].slice(0,10),r=t.toFixed(0),i=Math.floor(10.7639*r);return"".concat(n,"..\n").concat(r," m\xb2 \n").concat(i," ft\xb2")},font:t=>{var e=Math.round((t.chart.height+t.chart.width)/2),n=Math.round(e/80);return{size:n>5?n:0}}}}};function lY(){const t=et((t=>t.cityIOdataState.cityIOdata)),[e,n]=(0,h.useState)({labels:[],datasets:[]}),[r,i]=(0,h.useState)(!1);gK.register(wK,_X,aX,Yq);(0,h.useEffect)((()=>{t.GEOGRIDDATA&&(e=>{var i,o,s;const a=null===t||void 0===t||null===(i=t.GEOGRID)||void 0===i||null===(o=i.properties)||void 0===o||null===(s=o.header)||void 0===s?void 0:s.cellSize,l=a*a,c={labels:[],datasets:[{label:"Area Calculation",data:[],backgroundColor:[],borderColor:[],borderWidth:1}]};e.forEach((t=>{if(r&&!t.interactive)return;const e=t.name;if(!e||"None"===e||"none"===e||""===e)return;const n=Array.isArray(t.height)?t.height[1]:t.height?t.height:0,i=(t,e,n)=>{const r=c.labels.indexOf(t);c.datasets[0].data[r]+=e>0?n*e:n};c.labels.includes(e)||(c.labels.push(e),c.datasets[0].data.push(0),c.datasets[0].backgroundColor.push("rgba(".concat(t.color[0],", ").concat(t.color[1],", ").concat(t.color[2],", 0.2)")),c.datasets[0].borderColor.push("rgba(".concat(t.color[0],", ").concat(t.color[1],", ").concat(t.color[2],", 0.8)"))),i(e,n,l)})),n(c)})(t.GEOGRIDDATA)}),[t,r]);return(0,v.jsx)(v.Fragment,{children:t.GEOGRIDDATA&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(sq,{data:e,options:aY}),(0,v.jsx)(Ap,{children:(0,v.jsx)(Ks,{control:(0,v.jsx)(sY,{onChange:t=>{i(t.target.checked)},size:"small"}),label:(0,v.jsx)(Wn,{variant:"caption",component:"div",children:r?"display only interactive cells":"display all cells"})})})]})})}const cY=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(Yf,{direction:"right",width:window.innerWidth/5,children:(0,v.jsx)(In,{p:1,children:(0,v.jsxs)(Ir,{container:!0,spacing:1,children:[(0,v.jsx)(Ir,{item:!0,xs:12,md:12,lg:12,xl:12,children:(0,v.jsx)(Dp,{collapse:!0,variant:"outlined",title:"Land-use",subheader:"Land-uses Area",toolTipInfo:"Land use distribution and area. Each cell is calculated for its area (square meter ^ 2 per cell) times its floors (4.5 meters per floor)",children:(0,v.jsx)(lY,{})})}),(0,v.jsx)(Ir,{item:!0,xs:12,md:12,lg:12,xl:12,children:(0,v.jsx)(Dp,{collapse:!0,variant:"outlined",title:"Radar Chart",subheader:"Metrics and KPIs",children:(0,v.jsx)(uq,{})})}),(0,v.jsx)(Ir,{item:!0,xs:12,md:12,lg:12,xl:12,children:(0,v.jsx)(Dp,{collapse:!0,variant:"outlined",title:"Bar Chart",subheader:"Metrics and KPIs",children:(0,v.jsx)(fq,{})})})]})})})})};function uY(){const t=et((t=>t.cityIOdataState.cityIOisDone)),e=et((t=>t.cityIOdataState.cityIOtableName));return(0,v.jsxs)(v.Fragment,{children:[e&&(0,v.jsx)(yr,{tableName:e}),t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(KU,{}),(0,v.jsx)(zp,{}),(0,v.jsx)(cY,{})]})]})}function dY(){const[t,e]=(0,h.useState)(0),n=(0,Ln.Ay)(vr)((t=>{let{theme:e}=t;return{height:10}}));return(0,h.useEffect)((()=>{const t=setInterval((()=>{e((t=>{if(100===t)return 0;const e=10*Math.random();return Math.min(t+e,100)}))}),500);return()=>{clearInterval(t)}}),[]),(0,v.jsx)(In,{sx:{width:"100%",position:"fixed",bottom:"0px"},children:(0,v.jsx)(n,{variant:"determinate",value:t})})}function hY(t,e){return function(){return t.apply(e,arguments)}}const{toString:fY}=Object.prototype,{getPrototypeOf:pY}=Object,gY=(t=>e=>{const n=fY.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),mY=t=>(t=t.toLowerCase(),e=>gY(e)===t),vY=t=>e=>typeof e===t,{isArray:bY}=Array,yY=vY("undefined");const xY=mY("ArrayBuffer");const AY=vY("string"),_Y=vY("function"),wY=vY("number"),SY=t=>null!==t&&"object"===typeof t,CY=t=>{if("object"!==gY(t))return!1;const e=pY(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},EY=mY("Date"),PY=mY("File"),MY=mY("Blob"),TY=mY("FileList"),OY=mY("URLSearchParams");function kY(t,e){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),bY(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{const r=i?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let s;for(n=0;n<o;n++)s=r[n],e.call(null,t[s],s,t)}}function RY(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const IY="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,BY=t=>!yY(t)&&t!==IY;const LY=(DY="undefined"!==typeof Uint8Array&&pY(Uint8Array),t=>DY&&t instanceof DY);var DY;const FY=mY("HTMLFormElement"),NY=(t=>{let{hasOwnProperty:e}=t;return(t,n)=>e.call(t,n)})(Object.prototype),jY=mY("RegExp"),zY=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};kY(n,((n,i)=>{let o;!1!==(o=e(n,i,t))&&(r[i]=o||n)})),Object.defineProperties(t,r)},UY="abcdefghijklmnopqrstuvwxyz",VY="0123456789",GY={DIGIT:VY,ALPHA:UY,ALPHA_DIGIT:UY+UY.toUpperCase()+VY};const WY=mY("AsyncFunction"),HY={isArray:bY,isArrayBuffer:xY,isBuffer:function(t){return null!==t&&!yY(t)&&null!==t.constructor&&!yY(t.constructor)&&_Y(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||_Y(t.append)&&("formdata"===(e=gY(t))||"object"===e&&_Y(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&xY(t.buffer),e},isString:AY,isNumber:wY,isBoolean:t=>!0===t||!1===t,isObject:SY,isPlainObject:CY,isUndefined:yY,isDate:EY,isFile:PY,isBlob:MY,isRegExp:jY,isFunction:_Y,isStream:t=>SY(t)&&_Y(t.pipe),isURLSearchParams:OY,isTypedArray:LY,isFileList:TY,forEach:kY,merge:function t(){const{caseless:e}=BY(this)&&this||{},n={},r=(r,i)=>{const o=e&&RY(n,i)||i;CY(n[o])&&CY(r)?n[o]=t(n[o],r):CY(r)?n[o]=t({},r):bY(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&kY(arguments[i],r);return n},extend:function(t,e,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return kY(e,((e,r)=>{n&&_Y(e)?t[r]=hY(e,n):t[r]=e}),{allOwnKeys:r}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let i,o,s;const a={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],r&&!r(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==n&&pY(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:gY,kindOfTest:mY,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(bY(t))return t;let e=t.length;if(!wY(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:FY,hasOwnProperty:NY,hasOwnProp:NY,reduceDescriptors:zY,freezeMethods:t=>{zY(t,((e,n)=>{if(_Y(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];_Y(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return bY(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:RY,global:IY,isContextDefined:BY,ALPHABET:GY,generateString:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GY.ALPHA_DIGIT,n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&_Y(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(SY(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=bY(t)?[]:{};return kY(t,((t,e)=>{const o=n(t,r+1);!yY(o)&&(i[e]=o)})),e[r]=void 0,i}}return t};return n(t,0)},isAsyncFn:WY,isThenable:t=>t&&(SY(t)||_Y(t))&&_Y(t.then)&&_Y(t.catch)};function JY(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}HY.inherits(JY,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:HY.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const KY=JY.prototype,XY={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{XY[t]={value:t}})),Object.defineProperties(JY,XY),Object.defineProperty(KY,"isAxiosError",{value:!0}),JY.from=(t,e,n,r,i,o)=>{const s=Object.create(KY);return HY.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),JY.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};const qY=JY;function YY(t){return HY.isPlainObject(t)||HY.isArray(t)}function QY(t){return HY.endsWith(t,"[]")?t.slice(0,-2):t}function ZY(t,e,n){return t?t.concat(e).map((function(t,e){return t=QY(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const $Y=HY.toFlatObject(HY,{},null,(function(t){return/^is[A-Z]/.test(t)}));const tQ=function(t,e,n){if(!HY.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=HY.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!HY.isUndefined(e[t])}));const r=n.metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&HY.isSpecCompliantForm(e);if(!HY.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(HY.isDate(t))return t.toISOString();if(!a&&HY.isBlob(t))throw new qY("Blob is not supported. Use a Buffer instead.");return HY.isArrayBuffer(t)||HY.isTypedArray(t)?a&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,n,i){let a=t;if(t&&!i&&"object"===typeof t)if(HY.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(HY.isArray(t)&&function(t){return HY.isArray(t)&&!t.some(YY)}(t)||(HY.isFileList(t)||HY.endsWith(n,"[]"))&&(a=HY.toArray(t)))return n=QY(n),a.forEach((function(t,r){!HY.isUndefined(t)&&null!==t&&e.append(!0===s?ZY([n],r,o):null===s?n:n+"[]",l(t))})),!1;return!!YY(t)||(e.append(ZY(i,n,o),l(t)),!1)}const u=[],d=Object.assign($Y,{defaultVisitor:c,convertValue:l,isVisitable:YY});if(!HY.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!HY.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),HY.forEach(n,(function(n,o){!0===(!(HY.isUndefined(n)||null===n)&&i.call(e,n,HY.isString(o)?o.trim():o,r,d))&&t(n,r?r.concat(o):[o])})),u.pop()}}(t),e};function eQ(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function nQ(t,e){this._pairs=[],t&&tQ(t,this,e)}const rQ=nQ.prototype;rQ.append=function(t,e){this._pairs.push([t,e])},rQ.toString=function(t){const e=t?function(e){return t.call(this,e,eQ)}:eQ;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const iQ=nQ;function oQ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sQ(t,e,n){if(!e)return t;const r=n&&n.encode||oQ,i=n&&n.serialize;let o;if(o=i?i(e,n):HY.isURLSearchParams(e)?e.toString():new iQ(e,n).toString(r),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}const aQ=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){HY.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},lQ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cQ={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:iQ,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},uQ="undefined"!==typeof window&&"undefined"!==typeof document,dQ=(hQ="undefined"!==typeof navigator&&navigator.product,uQ&&["ReactNative","NativeScript","NS"].indexOf(hQ)<0);var hQ;const fQ="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pQ={...d,...cQ};const gQ=function(t){function e(t,n,r,i){let o=t[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=t.length;if(o=!o&&HY.isArray(r)?r.length:o,a)return HY.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&HY.isObject(r[o])||(r[o]=[]);return e(t,n,r[o],i)&&HY.isArray(r[o])&&(r[o]=function(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}(r[o])),!s}if(HY.isFormData(t)&&HY.isFunction(t.entries)){const n={};return HY.forEachEntry(t,((t,r)=>{e(function(t){return HY.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null};const mQ={transitional:lQ,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=HY.isObject(t);i&&HY.isHTMLForm(t)&&(t=new FormData(t));if(HY.isFormData(t))return r?JSON.stringify(gQ(t)):t;if(HY.isArrayBuffer(t)||HY.isBuffer(t)||HY.isStream(t)||HY.isFile(t)||HY.isBlob(t))return t;if(HY.isArrayBufferView(t))return t.buffer;if(HY.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return tQ(t,new pQ.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return pQ.isNode&&HY.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=HY.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return tQ(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),function(t,e,n){if(HY.isString(t))try{return(e||JSON.parse)(t),HY.trim(t)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||mQ.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&HY.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(i){if(n){if("SyntaxError"===i.name)throw qY.from(i,qY.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pQ.classes.FormData,Blob:pQ.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};HY.forEach(["delete","get","head","post","put","patch"],(t=>{mQ.headers[t]={}}));const vQ=mQ,bQ=HY.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yQ=Symbol("internals");function xQ(t){return t&&String(t).trim().toLowerCase()}function AQ(t){return!1===t||null==t?t:HY.isArray(t)?t.map(AQ):String(t)}function _Q(t,e,n,r,i){return HY.isFunction(r)?r.call(this,e,n):(i&&(e=n),HY.isString(e)?HY.isString(r)?-1!==e.indexOf(r):HY.isRegExp(r)?r.test(e):void 0:void 0)}class wQ{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=xQ(e);if(!i)throw new Error("header name must be a non-empty string");const o=HY.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||e]=AQ(t))}const o=(t,e)=>HY.forEach(t,((t,n)=>i(t,n,e)));return HY.isPlainObject(t)||t instanceof this.constructor?o(t,e):HY.isString(t)&&(t=t.trim())&&!(t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))(t)?o((t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&bQ[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&i(e,t,n),this}get(t,e){if(t=xQ(t)){const n=HY.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(HY.isFunction(e))return e.call(this,t,n);if(HY.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=xQ(t)){const n=HY.findKey(this,t);return!(!n||void 0===this[n]||e&&!_Q(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=xQ(t)){const i=HY.findKey(n,t);!i||e&&!_Q(0,n[i],i,e)||(delete n[i],r=!0)}}return HY.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const i=e[n];t&&!_Q(0,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return HY.forEach(this,((r,i)=>{const o=HY.findKey(n,i);if(o)return e[o]=AQ(r),void delete e[i];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete e[i],e[s]=AQ(r),n[s]=!0})),this}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return HY.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&HY.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((t=>{let[e,n]=t;return e+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((t=>e.set(t))),e}static accessor(t){const e=(this[yQ]=this[yQ]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=xQ(t);e[r]||(!function(t,e){const n=HY.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[r]=!0)}return HY.isArray(t)?t.forEach(r):r(t),this}}wQ.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),HY.reduceDescriptors(wQ.prototype,((t,e)=>{let{value:n}=t,r=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(t){this[r]=t}}})),HY.freezeMethods(wQ);const SQ=wQ;function CQ(t,e){const n=this||vQ,r=e||n,i=SQ.from(r.headers);let o=r.data;return HY.forEach(t,(function(t){o=t.call(n,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function EQ(t){return!(!t||!t.__CANCEL__)}function PQ(t,e,n){qY.call(this,null==t?"canceled":t,qY.ERR_CANCELED,e,n),this.name="CanceledError"}HY.inherits(PQ,qY,{__CANCEL__:!0});const MQ=PQ;const TQ=pQ.hasStandardBrowserEnv?{write(t,e,n,r,i,o){const s=[t+"="+encodeURIComponent(e)];HY.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),HY.isString(r)&&s.push("path="+r),HY.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function OQ(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const kQ=pQ.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=HY.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};const RQ=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,o=0,s=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),c=r[s];i||(i=l),n[o]=a,r[o]=l;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),l-i<e)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};function IQ(t,e){let n=0;const r=RQ(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,l=r(a);n=o;const c={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const BQ="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const i=SQ.from(t.headers).normalize();let o,s,{responseType:a,withXSRFToken:l}=t;function c(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}if(HY.isFormData(r))if(pQ.hasStandardBrowserEnv||pQ.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[t,...e]=s?s.split(";").map((t=>t.trim())).filter(Boolean):[];i.setContentType([t||"multipart/form-data",...e].join("; "))}let u=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const d=OQ(t.baseURL,t.url);function h(){if(!u)return;const r=SQ.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new qY("Request failed with status code "+n.status,[qY.ERR_BAD_REQUEST,qY.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),c()}),(function(t){n(t),c()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:t,request:u}),u=null}if(u.open(t.method.toUpperCase(),sQ(d,t.params,t.paramsSerializer),!0),u.timeout=t.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new qY("Request aborted",qY.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new qY("Network Error",qY.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||lQ;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new qY(e,r.clarifyTimeoutError?qY.ETIMEDOUT:qY.ECONNABORTED,t,u)),u=null},pQ.hasStandardBrowserEnv&&(l&&HY.isFunction(l)&&(l=l(t)),l||!1!==l&&kQ(d))){const e=t.xsrfHeaderName&&t.xsrfCookieName&&TQ.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&HY.forEach(i.toJSON(),(function(t,e){u.setRequestHeader(e,t)})),HY.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),a&&"json"!==a&&(u.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&u.addEventListener("progress",IQ(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",IQ(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=e=>{u&&(n(!e||e.type?new MQ(null,t,u):e),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const f=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(d);f&&-1===pQ.protocols.indexOf(f)?n(new qY("Unsupported protocol "+f+":",qY.ERR_BAD_REQUEST,t)):u.send(r||null)}))},LQ={http:null,xhr:BQ};HY.forEach(LQ,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}}));const DQ=t=>"- ".concat(t),FQ=t=>HY.isFunction(t)||null===t||!1===t,NQ=t=>{t=HY.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let o=0;o<e;o++){let e;if(n=t[o],r=n,!FQ(n)&&(r=LQ[(e=String(n)).toLowerCase()],void 0===r))throw new qY("Unknown adapter '".concat(e,"'"));if(r)break;i[e||"#"+o]=r}if(!r){const t=Object.entries(i).map((t=>{let[e,n]=t;return"adapter ".concat(e," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=e?t.length>1?"since :\n"+t.map(DQ).join("\n"):" "+DQ(t[0]):"as no adapter specified";throw new qY("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function jQ(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new MQ(null,t)}function zQ(t){jQ(t),t.headers=SQ.from(t.headers),t.data=CQ.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return NQ(t.adapter||vQ.adapter)(t).then((function(e){return jQ(t),e.data=CQ.call(t,t.transformResponse,e),e.headers=SQ.from(e.headers),e}),(function(e){return EQ(e)||(jQ(t),e&&e.response&&(e.response.data=CQ.call(t,t.transformResponse,e.response),e.response.headers=SQ.from(e.response.headers))),Promise.reject(e)}))}const UQ=t=>t instanceof SQ?{...t}:t;function VQ(t,e){e=e||{};const n={};function r(t,e,n){return HY.isPlainObject(t)&&HY.isPlainObject(e)?HY.merge.call({caseless:n},t,e):HY.isPlainObject(e)?HY.merge({},e):HY.isArray(e)?e.slice():e}function i(t,e,n){return HY.isUndefined(e)?HY.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function o(t,e){if(!HY.isUndefined(e))return r(void 0,e)}function s(t,e){return HY.isUndefined(e)?HY.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(n,i,o){return o in e?r(n,i):o in t?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>i(UQ(t),UQ(e),!0)};return HY.forEach(Object.keys(Object.assign({},t,e)),(function(r){const o=l[r]||i,s=o(t[r],e[r],r);HY.isUndefined(s)&&o!==a||(n[r]=s)})),n}const GQ="1.6.8",WQ={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{WQ[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const HQ={};WQ.transitional=function(t,e,n){function r(t,e){return"[Axios v1.6.8] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,o)=>{if(!1===t)throw new qY(r(i," has been removed"+(e?" in "+e:"")),qY.ERR_DEPRECATED);return e&&!HQ[i]&&(HQ[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}};const JQ={assertOptions:function(t,e,n){if("object"!==typeof t)throw new qY("options must be an object",qY.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],s=e[o];if(s){const e=t[o],n=void 0===e||s(e,o,t);if(!0!==n)throw new qY("option "+o+" must be "+n,qY.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new qY("Unknown option "+o,qY.ERR_BAD_OPTION)}},validators:WQ},KQ=JQ.validators;class XQ{constructor(t){this.defaults=t,this.interceptors={request:new aQ,response:new aQ}}async request(t,e){try{return await this._request(t,e)}catch(g$){if(g$ instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const n=e.stack?e.stack.replace(/^.+\n/,""):"";g$.stack?n&&!String(g$.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(g$.stack+="\n"+n):g$.stack=n}throw g$}}_request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=VQ(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;void 0!==n&&JQ.assertOptions(n,{silentJSONParsing:KQ.transitional(KQ.boolean),forcedJSONParsing:KQ.transitional(KQ.boolean),clarifyTimeoutError:KQ.transitional(KQ.boolean)},!1),null!=r&&(HY.isFunction(r)?e.paramsSerializer={serialize:r}:JQ.assertOptions(r,{encode:KQ.function,serialize:KQ.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=i&&HY.merge(i.common,i[e.method]);i&&HY.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=SQ.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let u,d=0;if(!a){const t=[zQ.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,l),u=t.length,c=Promise.resolve(e);d<u;)c=c.then(t[d++],t[d++]);return c}u=s.length;let h=e;for(d=0;d<u;){const t=s[d++],e=s[d++];try{h=t(h)}catch(f){e.call(this,f);break}}try{c=zQ.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(t){return sQ(OQ((t=VQ(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}HY.forEach(["delete","get","head","options"],(function(t){XQ.prototype[t]=function(e,n){return this.request(VQ(n||{},{method:t,url:e,data:(n||{}).data}))}})),HY.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(VQ(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}XQ.prototype[t]=e(),XQ.prototype[t+"Form"]=e(!0)}));const qQ=XQ;class YQ{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new MQ(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;const e=new YQ((function(e){t=e}));return{token:e,cancel:t}}}const QQ=YQ;const ZQ={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ZQ).forEach((t=>{let[e,n]=t;ZQ[n]=e}));const $Q=ZQ;const tZ=function t(e){const n=new qQ(e),r=hY(qQ.prototype.request,n);return HY.extend(r,qQ.prototype,n,{allOwnKeys:!0}),HY.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(VQ(e,n))},r}(vQ);tZ.Axios=qQ,tZ.CanceledError=MQ,tZ.CancelToken=QQ,tZ.isCancel=EQ,tZ.VERSION=GQ,tZ.toFormData=tQ,tZ.AxiosError=qY,tZ.Cancel=tZ.CanceledError,tZ.all=function(t){return Promise.all(t)},tZ.spread=function(t){return function(e){return t.apply(null,e)}},tZ.isAxiosError=function(t){return HY.isObject(t)&&!0===t.isAxiosError},tZ.mergeConfig=VQ,tZ.AxiosHeaders=SQ,tZ.formToJSON=t=>gQ(HY.isHTMLForm(t)?new FormData(t):t),tZ.getAdapter=NQ,tZ.HttpStatusCode=$Q,tZ.default=tZ;const eZ=tZ;function nZ(t){const e=t.getTablesList,[n,r]=(0,h.useState)([]),[i,o]=(0,h.useState)(!0);(0,h.useEffect)((()=>{n&&e(n)}),[n]);return(0,h.useEffect)((()=>{(async()=>{const t=bn.cityIO.baseURL+bn.cityIO.headers;let e=await eZ.get(t);e=e.data.map((t=>{const e="".concat(bn.cityIO.baseURL,"table/").concat(t.tableName,"/");return{...t,tableURL:e}})),r((t=>[...e])),o(!1)})()}),[]),(0,v.jsx)(v.Fragment,{children:i&&(0,v.jsx)(dY,{})})}function rZ(t){return"undefined"!==typeof t.normalize?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):t}function iZ(t,e){for(let n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}const oZ=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:e=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:s=!1}=t;return(t,a)=>{let{inputValue:l,getOptionLabel:c}=a,u=s?l.trim():l;n&&(u=u.toLowerCase()),e&&(u=rZ(u));const d=u?t.filter((t=>{let r=(o||c)(t);return n&&(r=r.toLowerCase()),e&&(r=rZ(r)),"start"===i?0===r.indexOf(u):r.indexOf(u)>-1})):t;return"number"===typeof r?d.slice(0,r):d}}(),sZ=t=>{var e;return null!==t.current&&(null==(e=t.current.parentElement)?void 0:e.contains(document.activeElement))};function aZ(t){const{unstable_isActiveElementInListbox:e=sZ,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:o=!1,blurOnSelect:s=!1,clearOnBlur:a=!t.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=(t.multiple?[]:null),disableClearable:d=!1,disableCloseOnSelect:p=!1,disabled:g,disabledItemsFocusable:m=!1,disableListWrap:v=!1,filterOptions:b=oZ,filterSelectedOptions:y=!1,freeSolo:x=!1,getOptionDisabled:A,getOptionKey:_,getOptionLabel:w=(t=>{var e;return null!=(e=t.label)?e:t}),groupBy:S,handleHomeEndKeys:C=!t.freeSolo,id:E,includeInputInList:P=!1,inputValue:M,isOptionEqualToValue:T=((t,e)=>t===e),multiple:O=!1,onChange:k,onClose:R,onHighlightChange:I,onInputChange:B,onOpen:L,open:D,openOnFocus:F=!1,options:N,readOnly:j=!1,selectOnFocus:z=!t.freeSolo,value:U}=t,V=(0,$c.A)(E);let G=w;G=t=>{const e=w(t);return"string"!==typeof e?String(e):e};const W=h.useRef(!1),H=h.useRef(!0),J=h.useRef(null),K=h.useRef(null),[X,q]=h.useState(null),[Y,Q]=h.useState(-1),Z=i?0:-1,$=h.useRef(Z),[tt,et]=(0,xo.A)({controlled:U,default:u,name:c}),[nt,rt]=(0,xo.A)({controlled:M,default:"",name:c,state:"inputValue"}),[it,ot]=h.useState(!1),st=h.useCallback(((t,e)=>{if(!(O?tt.length<e.length:null!==e)&&!a)return;let n;if(O)n="";else if(null==e)n="";else{const t=G(e);n="string"===typeof t?t:""}nt!==n&&(rt(n),B&&B(t,n,"reset"))}),[G,nt,O,B,rt,a,tt]),[at,lt]=(0,xo.A)({controlled:D,default:!1,name:c,state:"open"}),[ct,ut]=h.useState(!0),dt=!O&&null!=tt&&nt===G(tt),ht=at&&!j,ft=ht?b(N.filter((t=>!y||!(O?tt:[tt]).some((e=>null!==e&&T(t,e))))),{inputValue:dt&&ct?"":nt,getOptionLabel:G}):[],pt=Wc({filteredOptions:ft,value:tt,inputValue:nt});h.useEffect((()=>{const t=tt!==pt.value;it&&!t||x&&!t||st(null,tt)}),[tt,st,it,pt.value,x]);const gt=at&&ft.length>0&&!j;const mt=(0,So.A)((t=>{-1===t?J.current.focus():X.querySelector('[data-tag-index="'.concat(t,'"]')).focus()}));h.useEffect((()=>{O&&Y>tt.length-1&&(Q(-1),mt(-1))}),[tt,O,Y,mt]);const vt=(0,So.A)((t=>{let{event:e,index:r,reason:i="auto"}=t;if($.current=r,-1===r?J.current.removeAttribute("aria-activedescendant"):J.current.setAttribute("aria-activedescendant","".concat(V,"-option-").concat(r)),I&&I(e,-1===r?null:ft[r],i),!K.current)return;const o=K.current.querySelector('[role="option"].'.concat(n,"-focused"));o&&(o.classList.remove("".concat(n,"-focused")),o.classList.remove("".concat(n,"-focusVisible")));let s=K.current;if("listbox"!==K.current.getAttribute("role")&&(s=K.current.parentElement.querySelector('[role="listbox"]')),!s)return;if(-1===r)return void(s.scrollTop=0);const a=K.current.querySelector('[data-option-index="'.concat(r,'"]'));if(a&&(a.classList.add("".concat(n,"-focused")),"keyboard"===i&&a.classList.add("".concat(n,"-focusVisible")),s.scrollHeight>s.clientHeight&&"mouse"!==i&&"touch"!==i)){const t=a,e=s.clientHeight+s.scrollTop,n=t.offsetTop+t.offsetHeight;n>e?s.scrollTop=n-s.clientHeight:t.offsetTop-t.offsetHeight*(S?1.3:0)<s.scrollTop&&(s.scrollTop=t.offsetTop-t.offsetHeight*(S?1.3:0))}})),bt=(0,So.A)((t=>{let{event:e,diff:n,direction:i="next",reason:o="auto"}=t;if(!ht)return;const s=function(t,e){if(!K.current||t<0||t>=ft.length)return-1;let n=t;for(;;){const r=K.current.querySelector('[data-option-index="'.concat(n,'"]')),i=!m&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(r&&r.hasAttribute("tabindex")&&!i)return n;if(n="next"===e?(n+1)%ft.length:(n-1+ft.length)%ft.length,n===t)return-1}}((()=>{const t=ft.length-1;if("reset"===n)return Z;if("start"===n)return 0;if("end"===n)return t;const e=$.current+n;return e<0?-1===e&&P?-1:v&&-1!==$.current||Math.abs(n)>1?0:t:e>t?e===t+1&&P?-1:v||Math.abs(n)>1?t:0:e})(),i);if(vt({index:s,reason:o,event:e}),r&&"reset"!==n)if(-1===s)J.current.value=nt;else{const t=G(ft[s]);J.current.value=t;0===t.toLowerCase().indexOf(nt.toLowerCase())&&nt.length>0&&J.current.setSelectionRange(nt.length,t.length)}})),yt=h.useCallback((()=>{if(!ht)return;const t=(()=>{if(-1!==$.current&&pt.filteredOptions&&pt.filteredOptions.length!==ft.length&&pt.inputValue===nt&&(O?tt.length===pt.value.length&&pt.value.every(((t,e)=>G(tt[e])===G(t))):(t=pt.value,e=tt,(t?G(t):"")===(e?G(e):"")))){const t=pt.filteredOptions[$.current];if(t)return iZ(ft,(e=>G(e)===G(t)))}var t,e;return-1})();if(-1!==t)return void($.current=t);const e=O?tt[0]:tt;if(0!==ft.length&&null!=e){if(K.current)if(null==e)$.current>=ft.length-1?vt({index:ft.length-1}):vt({index:$.current});else{const t=ft[$.current];if(O&&t&&-1!==iZ(tt,(e=>T(t,e))))return;const n=iZ(ft,(t=>T(t,e)));-1===n?bt({diff:"reset"}):vt({index:n})}}else bt({diff:"reset"})}),[ft.length,!O&&tt,y,bt,vt,ht,nt,O]),xt=(0,So.A)((t=>{(0,ic.A)(K,t),t&&yt()}));h.useEffect((()=>{yt()}),[yt]);const At=t=>{at||(lt(!0),ut(!0),L&&L(t))},_t=(t,e)=>{at&&(lt(!1),R&&R(t,e))},wt=(t,e,n,r)=>{if(O){if(tt.length===e.length&&tt.every(((t,n)=>t===e[n])))return}else if(tt===e)return;k&&k(t,e,n,r),et(e)},St=h.useRef(!1),Ct=function(t,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",i=e;if(O){i=Array.isArray(tt)?tt.slice():[];const t=iZ(i,(t=>T(e,t)));-1===t?i.push(e):"freeSolo"!==n&&(i.splice(t,1),r="removeOption")}st(t,i),wt(t,i,r,{option:e}),p||t&&(t.ctrlKey||t.metaKey)||_t(t,r),(!0===s||"touch"===s&&St.current||"mouse"===s&&!St.current)&&J.current.blur()};const Et=(t,e)=>{if(!O)return;""===nt&&_t(t,"toggleInput");let n=Y;-1===Y?""===nt&&"previous"===e&&(n=tt.length-1):(n+="next"===e?1:-1,n<0&&(n=0),n===tt.length&&(n=-1)),n=function(t,e){if(-1===t)return-1;let n=t;for(;;){if("next"===e&&n===tt.length||"previous"===e&&-1===n)return-1;const t=X.querySelector('[data-tag-index="'.concat(n,'"]'));if(t&&t.hasAttribute("tabindex")&&!t.disabled&&"true"!==t.getAttribute("aria-disabled"))return n;n+="next"===e?1:-1}}(n,e),Q(n),mt(n)},Pt=t=>{W.current=!0,rt(""),B&&B(t,"","clear"),wt(t,O?[]:null,"clear")},Mt=t=>e=>{if(t.onKeyDown&&t.onKeyDown(e),!e.defaultMuiPrevented&&(-1!==Y&&-1===["ArrowLeft","ArrowRight"].indexOf(e.key)&&(Q(-1),mt(-1)),229!==e.which))switch(e.key){case"Home":ht&&C&&(e.preventDefault(),bt({diff:"start",direction:"next",reason:"keyboard",event:e}));break;case"End":ht&&C&&(e.preventDefault(),bt({diff:"end",direction:"previous",reason:"keyboard",event:e}));break;case"PageUp":e.preventDefault(),bt({diff:-5,direction:"previous",reason:"keyboard",event:e}),At(e);break;case"PageDown":e.preventDefault(),bt({diff:5,direction:"next",reason:"keyboard",event:e}),At(e);break;case"ArrowDown":e.preventDefault(),bt({diff:1,direction:"next",reason:"keyboard",event:e}),At(e);break;case"ArrowUp":e.preventDefault(),bt({diff:-1,direction:"previous",reason:"keyboard",event:e}),At(e);break;case"ArrowLeft":Et(e,"previous");break;case"ArrowRight":Et(e,"next");break;case"Enter":if(-1!==$.current&&ht){const t=ft[$.current],n=!!A&&A(t);if(e.preventDefault(),n)return;Ct(e,t,"selectOption"),r&&J.current.setSelectionRange(J.current.value.length,J.current.value.length)}else x&&""!==nt&&!1===dt&&(O&&e.preventDefault(),Ct(e,nt,"createOption","freeSolo"));break;case"Escape":ht?(e.preventDefault(),e.stopPropagation(),_t(e,"escape")):l&&(""!==nt||O&&tt.length>0)&&(e.preventDefault(),e.stopPropagation(),Pt(e));break;case"Backspace":if(O&&!j&&""===nt&&tt.length>0){const t=-1===Y?tt.length-1:Y,n=tt.slice();n.splice(t,1),wt(e,n,"removeOption",{option:tt[t]})}break;case"Delete":if(O&&!j&&""===nt&&tt.length>0&&-1!==Y){const t=Y,n=tt.slice();n.splice(t,1),wt(e,n,"removeOption",{option:tt[t]})}}},Tt=t=>{ot(!0),F&&!W.current&&At(t)},Ot=t=>{e(K)?J.current.focus():(ot(!1),H.current=!0,W.current=!1,o&&-1!==$.current&&ht?Ct(t,ft[$.current],"blur"):o&&x&&""!==nt?Ct(t,nt,"blur","freeSolo"):a&&st(t,tt),_t(t,"blur"))},kt=t=>{const e=t.target.value;nt!==e&&(rt(e),ut(!1),B&&B(t,e,"input")),""===e?d||O||wt(t,null,"clear"):At(t)},Rt=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));$.current!==e&&vt({event:t,index:e,reason:"mouse"})},It=t=>{vt({event:t,index:Number(t.currentTarget.getAttribute("data-option-index")),reason:"touch"}),St.current=!0},Bt=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));Ct(t,ft[e],"selectOption"),St.current=!1},Lt=t=>e=>{const n=tt.slice();n.splice(t,1),wt(e,n,"removeOption",{option:tt[t]})},Dt=t=>{at?_t(t,"toggleInput"):At(t)},Ft=t=>{t.currentTarget.contains(t.target)&&t.target.getAttribute("id")!==V&&t.preventDefault()},Nt=t=>{t.currentTarget.contains(t.target)&&(J.current.focus(),z&&H.current&&J.current.selectionEnd-J.current.selectionStart===0&&J.current.select(),H.current=!1)},jt=t=>{g||""!==nt&&at||Dt(t)};let zt=x&&nt.length>0;zt=zt||(O?tt.length>0:null!==tt);let Ut=ft;if(S){new Map;Ut=ft.reduce(((t,e,n)=>{const r=S(e);return t.length>0&&t[t.length-1].group===r?t[t.length-1].options.push(e):t.push({key:n,index:n,group:r,options:[e]}),t}),[])}return g&&it&&Ot(),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.A)({"aria-owns":gt?"".concat(V,"-listbox"):null},t,{onKeyDown:Mt(t),onMouseDown:Ft,onClick:Nt})},getInputLabelProps:()=>({id:"".concat(V,"-label"),htmlFor:V}),getInputProps:()=>({id:V,value:nt,onBlur:Ot,onFocus:Tt,onChange:kt,onMouseDown:jt,"aria-activedescendant":ht?"":null,"aria-autocomplete":r?"both":"list","aria-controls":gt?"".concat(V,"-listbox"):void 0,"aria-expanded":gt,autoComplete:"off",ref:J,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:g}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Pt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Dt}),getTagProps:t=>{let{index:e}=t;return(0,f.A)({key:e,"data-tag-index":e,tabIndex:-1},!j&&{onDelete:Lt(e)})},getListboxProps:()=>({role:"listbox",id:"".concat(V,"-listbox"),"aria-labelledby":"".concat(V,"-label"),ref:xt,onMouseDown:t=>{t.preventDefault()}}),getOptionProps:t=>{let{index:e,option:n}=t;var r;const i=(O?tt:[tt]).some((t=>null!=t&&T(n,t))),o=!!A&&A(n);return{key:null!=(r=null==_?void 0:_(n))?r:G(n),tabIndex:-1,role:"option",id:"".concat(V,"-option-").concat(e),onMouseMove:Rt,onClick:Bt,onTouchStart:It,"data-option-index":e,"aria-disabled":o,"aria-selected":i}},id:V,inputValue:nt,value:tt,dirty:zt,expanded:ht&&X,popupOpen:ht,focused:it||-1!==Y,anchorEl:X,setAnchorEl:q,focusedTag:Y,groupedOptions:Ut}}function lZ(t){return(0,Fn.Ay)("MuiListSubheader",t)}(0,Tn.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const cZ=["className","color","component","disableGutters","disableSticky","inset"],uZ=(0,Ln.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"default"!==n.color&&e["color".concat((0,Dn.A)(n.color))],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===n.color&&{color:(e.vars||e).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})})),dZ=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiListSubheader"}),{className:r,color:i="default",component:o="li",disableGutters:s=!1,disableSticky:a=!1,inset:l=!1}=n,c=(0,C.A)(n,cZ),u=(0,f.A)({},n,{color:i,component:o,disableGutters:s,disableSticky:a,inset:l}),d=(t=>{const{classes:e,color:n,disableGutters:r,inset:i,disableSticky:o}=t,s={root:["root","default"!==n&&"color".concat((0,Dn.A)(n)),!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,Bn.A)(s,lZ,e)})(u);return(0,v.jsx)(uZ,(0,f.A)({as:o,className:(0,wn.A)(d.root,r),ref:e,ownerState:u},c))}));dZ.muiSkipListHighlight=!0;const hZ=dZ,fZ=(0,ta.A)((0,v.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function pZ(t){return(0,Fn.Ay)("MuiChip",t)}const gZ=(0,Tn.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),mZ=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],vZ=(0,Ln.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:o,onDelete:s,size:a,variant:l}=n;return[{["& .".concat(gZ.avatar)]:e.avatar},{["& .".concat(gZ.avatar)]:e["avatar".concat((0,Dn.A)(a))]},{["& .".concat(gZ.avatar)]:e["avatarColor".concat((0,Dn.A)(r))]},{["& .".concat(gZ.icon)]:e.icon},{["& .".concat(gZ.icon)]:e["icon".concat((0,Dn.A)(a))]},{["& .".concat(gZ.icon)]:e["iconColor".concat((0,Dn.A)(i))]},{["& .".concat(gZ.deleteIcon)]:e.deleteIcon},{["& .".concat(gZ.deleteIcon)]:e["deleteIcon".concat((0,Dn.A)(a))]},{["& .".concat(gZ.deleteIcon)]:e["deleteIconColor".concat((0,Dn.A)(r))]},{["& .".concat(gZ.deleteIcon)]:e["deleteIcon".concat((0,Dn.A)(l),"Color").concat((0,Dn.A)(r))]},e.root,e["size".concat((0,Dn.A)(a))],e["color".concat((0,Dn.A)(r))],o&&e.clickable,o&&"default"!==r&&e["clickableColor".concat((0,Dn.A)(r),")")],s&&e.deletable,s&&"default"!==r&&e["deletableColor".concat((0,Dn.A)(r))],e[l],e["".concat(l).concat((0,Dn.A)(r))]]}})((t=>{let{theme:e,ownerState:n}=t;const r="light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300];return(0,f.A)({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",["&.".concat(gZ.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},["& .".concat(gZ.avatar)]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:r,fontSize:e.typography.pxToRem(12)},["& .".concat(gZ.avatarColorPrimary)]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},["& .".concat(gZ.avatarColorSecondary)]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},["& .".concat(gZ.avatarSmall)]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},["& .".concat(gZ.icon)]:(0,f.A)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,f.A)({color:e.vars?e.vars.palette.Chip.defaultIconColor:r},"default"!==n.color&&{color:"inherit"})),["& .".concat(gZ.deleteIcon)]:(0,f.A)({WebkitTapHighlightColor:"transparent",color:e.vars?"rgba(".concat(e.vars.palette.text.primaryChannel," / 0.26)"):(0,Kn.X4)(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?"rgba(".concat(e.vars.palette.text.primaryChannel," / 0.4)"):(0,Kn.X4)(e.palette.text.primary,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:e.vars?"rgba(".concat(e.vars.palette[n.color].contrastTextChannel," / 0.7)"):(0,Kn.X4)(e.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(e.vars||e).palette[n.color].main,color:(e.vars||e).palette[n.color].contrastText},n.onDelete&&{["&.".concat(gZ.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.selectedChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,Kn.X4)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{["&.".concat(gZ.focusVisible)]:{backgroundColor:(e.vars||e).palette[n.color].dark}})}),(t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.selectedChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,Kn.X4)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},["&.".concat(gZ.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.selectedChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,Kn.X4)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},n.clickable&&"default"!==n.color&&{["&:hover, &.".concat(gZ.focusVisible)]:{backgroundColor:(e.vars||e).palette[n.color].dark}})}),(t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:e.vars?"1px solid ".concat(e.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[700]),["&.".concat(gZ.clickable,":hover")]:{backgroundColor:(e.vars||e).palette.action.hover},["&.".concat(gZ.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["& .".concat(gZ.avatar)]:{marginLeft:4},["& .".concat(gZ.avatarSmall)]:{marginLeft:2},["& .".concat(gZ.icon)]:{marginLeft:4},["& .".concat(gZ.iconSmall)]:{marginLeft:2},["& .".concat(gZ.deleteIcon)]:{marginRight:5},["& .".concat(gZ.deleteIconSmall)]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:(e.vars||e).palette[n.color].main,border:"1px solid ".concat(e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / 0.7)"):(0,Kn.X4)(e.palette[n.color].main,.7)),["&.".concat(gZ.clickable,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,Kn.X4)(e.palette[n.color].main,e.palette.action.hoverOpacity)},["&.".concat(gZ.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.focusOpacity,")"):(0,Kn.X4)(e.palette[n.color].main,e.palette.action.focusOpacity)},["& .".concat(gZ.deleteIcon)]:{color:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / 0.7)"):(0,Kn.X4)(e.palette[n.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n.color].main}}})})),bZ=(0,Ln.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e["label".concat((0,Dn.A)(r))]]}})((t=>{let{ownerState:e}=t;return(0,f.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===e.variant&&{paddingLeft:11,paddingRight:11},"small"===e.size&&{paddingLeft:8,paddingRight:8},"small"===e.size&&"outlined"===e.variant&&{paddingLeft:7,paddingRight:7})}));function yZ(t){return"Backspace"===t.key||"Delete"===t.key}const xZ=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiChip"}),{avatar:r,className:i,clickable:o,color:s="default",component:a,deleteIcon:l,disabled:c=!1,icon:u,label:d,onClick:g,onDelete:m,onKeyDown:b,onKeyUp:y,size:x="medium",variant:A="filled",tabIndex:_,skipFocusWhenDisabled:w=!1}=n,S=(0,C.A)(n,mZ),E=h.useRef(null),P=(0,Lr.A)(E,e),M=t=>{t.stopPropagation(),m&&m(t)},T=!(!1===o||!g)||o,O=T||m?mi:a||"div",k=(0,f.A)({},n,{component:O,disabled:c,size:x,color:s,iconColor:h.isValidElement(u)&&u.props.color||s,onDelete:!!m,clickable:T,variant:A}),R=(t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:o,onDelete:s,clickable:a,variant:l}=t,c={root:["root",l,n&&"disabled","size".concat((0,Dn.A)(r)),"color".concat((0,Dn.A)(i)),a&&"clickable",a&&"clickableColor".concat((0,Dn.A)(i)),s&&"deletable",s&&"deletableColor".concat((0,Dn.A)(i)),"".concat(l).concat((0,Dn.A)(i))],label:["label","label".concat((0,Dn.A)(r))],avatar:["avatar","avatar".concat((0,Dn.A)(r)),"avatarColor".concat((0,Dn.A)(i))],icon:["icon","icon".concat((0,Dn.A)(r)),"iconColor".concat((0,Dn.A)(o))],deleteIcon:["deleteIcon","deleteIcon".concat((0,Dn.A)(r)),"deleteIconColor".concat((0,Dn.A)(i)),"deleteIcon".concat((0,Dn.A)(l),"Color").concat((0,Dn.A)(i))]};return(0,Bn.A)(c,pZ,e)})(k),I=O===mi?(0,f.A)({component:a||"div",focusVisibleClassName:R.focusVisible},m&&{disableRipple:!0}):{};let B=null;m&&(B=l&&h.isValidElement(l)?h.cloneElement(l,{className:(0,wn.A)(l.props.className,R.deleteIcon),onClick:M}):(0,v.jsx)(fZ,{className:(0,wn.A)(R.deleteIcon),onClick:M}));let L=null;r&&h.isValidElement(r)&&(L=h.cloneElement(r,{className:(0,wn.A)(R.avatar,r.props.className)}));let D=null;return u&&h.isValidElement(u)&&(D=h.cloneElement(u,{className:(0,wn.A)(R.icon,u.props.className)})),(0,v.jsxs)(vZ,(0,f.A)({as:O,className:(0,wn.A)(R.root,i),disabled:!(!T||!c)||void 0,onClick:g,onKeyDown:t=>{t.currentTarget===t.target&&yZ(t)&&t.preventDefault(),b&&b(t)},onKeyUp:t=>{t.currentTarget===t.target&&(m&&yZ(t)?m(t):"Escape"===t.key&&E.current&&E.current.blur()),y&&y(t)},ref:P,tabIndex:w&&c?-1:_,ownerState:k},I,S,{children:[L||D,(0,v.jsx)(bZ,{className:(0,wn.A)(R.label),ownerState:k,children:d}),B]}))})),AZ=xZ,_Z=(0,ta.A)((0,v.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function wZ(t){return(0,Fn.Ay)("MuiAutocomplete",t)}const SZ=(0,Tn.A)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var CZ,EZ;const PZ=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],MZ=["ref"],TZ=jo(),OZ=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:s,size:a}=n;return[{["& .".concat(SZ.tag)]:e.tag},{["& .".concat(SZ.tag)]:e["tagSize".concat((0,Dn.A)(a))]},{["& .".concat(SZ.inputRoot)]:e.inputRoot},{["& .".concat(SZ.input)]:e.input},{["& .".concat(SZ.input)]:s&&e.inputFocused},e.root,r&&e.fullWidth,o&&e.hasPopupIcon,i&&e.hasClearIcon]}})({["&.".concat(SZ.focused," .").concat(SZ.clearIndicator)]:{visibility:"visible"},"@media (pointer: fine)":{["&:hover .".concat(SZ.clearIndicator)]:{visibility:"visible"}},["& .".concat(SZ.tag)]:{margin:3,maxWidth:"calc(100% - 6px)"},["& .".concat(SZ.inputRoot)]:{flexWrap:"wrap",[".".concat(SZ.hasPopupIcon,"&, .").concat(SZ.hasClearIcon,"&")]:{paddingRight:30},[".".concat(SZ.hasPopupIcon,".").concat(SZ.hasClearIcon,"&")]:{paddingRight:56},["& .".concat(SZ.input)]:{width:0,minWidth:30}},["& .".concat(md.root)]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},["& .".concat(md.root,".").concat(sd.sizeSmall)]:{["& .".concat(md.input)]:{padding:"2px 4px 3px 0"}},["& .".concat(Bd.root)]:{padding:9,[".".concat(SZ.hasPopupIcon,"&, .").concat(SZ.hasClearIcon,"&")]:{paddingRight:39},[".".concat(SZ.hasPopupIcon,".").concat(SZ.hasClearIcon,"&")]:{paddingRight:65},["& .".concat(SZ.input)]:{padding:"7.5px 4px 7.5px 5px"},["& .".concat(SZ.endAdornment)]:{right:9}},["& .".concat(Bd.root,".").concat(sd.sizeSmall)]:{paddingTop:6,paddingBottom:6,paddingLeft:6,["& .".concat(SZ.input)]:{padding:"2.5px 4px 2.5px 8px"}},["& .".concat(wd.root)]:{paddingTop:19,paddingLeft:8,[".".concat(SZ.hasPopupIcon,"&, .").concat(SZ.hasClearIcon,"&")]:{paddingRight:39},[".".concat(SZ.hasPopupIcon,".").concat(SZ.hasClearIcon,"&")]:{paddingRight:65},["& .".concat(wd.input)]:{padding:"7px 4px"},["& .".concat(SZ.endAdornment)]:{right:9}},["& .".concat(wd.root,".").concat(sd.sizeSmall)]:{paddingBottom:1,["& .".concat(wd.input)]:{padding:"2.5px 4px"}},["& .".concat(sd.hiddenLabel)]:{paddingTop:8},["& .".concat(wd.root,".").concat(sd.hiddenLabel)]:{paddingTop:0,paddingBottom:0,["& .".concat(SZ.input)]:{paddingTop:16,paddingBottom:17}},["& .".concat(wd.root,".").concat(sd.hiddenLabel,".").concat(sd.sizeSmall)]:{["& .".concat(SZ.input)]:{paddingTop:8,paddingBottom:9}},["& .".concat(SZ.input)]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{["& .".concat(SZ.tag)]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{["& .".concat(SZ.input)]:{opacity:1}}}]}),kZ=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(t,e)=>e.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),RZ=(0,Ln.Ay)(Gc,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(t,e)=>e.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),IZ=(0,Ln.Ay)(Gc,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,f.A)({},e.popupIndicator,n.popupOpen&&e.popupIndicatorOpen)}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),BZ=(0,Ln.Ay)(Sc,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(SZ.option)]:e.option},e.popper,n.disablePortal&&e.popperDisablePortal]}})((t=>{let{theme:e}=t;return{zIndex:(e.vars||e).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}})),LZ=(0,Ln.Ay)(Qi,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(t,e)=>e.paper})((t=>{let{theme:e}=t;return(0,f.A)({},e.typography.body1,{overflow:"auto"})})),DZ=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(t,e)=>e.loading})((t=>{let{theme:e}=t;return{color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}})),FZ=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(t,e)=>e.noOptions})((t=>{let{theme:e}=t;return{color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}})),NZ=(0,Ln.Ay)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(t,e)=>e.listbox})((t=>{let{theme:e}=t;return{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",["& .".concat(SZ.option)]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},["&.".concat(SZ.focused)]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},["&.".concat(SZ.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,Kn.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(SZ.focused)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,Kn.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},["&.".concat(SZ.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,Kn.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}}})),jZ=(0,Ln.Ay)(hZ,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(t,e)=>e.groupLabel})((t=>{let{theme:e}=t;return{backgroundColor:(e.vars||e).palette.background.paper,top:-8}})),zZ=(0,Ln.Ay)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(t,e)=>e.groupUl})({padding:0,["& .".concat(SZ.option)]:{paddingLeft:24}}),UZ=h.forwardRef((function(t,e){var n,r,i,o;const s=TZ({props:t,name:"MuiAutocomplete"}),{autoComplete:a=!1,autoHighlight:l=!1,autoSelect:c=!1,blurOnSelect:u=!1,ChipProps:d,className:p,clearIcon:g=CZ||(CZ=(0,v.jsx)(_Z,{fontSize:"small"})),clearOnBlur:m=!s.freeSolo,clearOnEscape:b=!1,clearText:y="Clear",closeText:x="Close",componentsProps:A={},defaultValue:_=(s.multiple?[]:null),disableClearable:w=!1,disableCloseOnSelect:S=!1,disabled:E=!1,disabledItemsFocusable:P=!1,disableListWrap:M=!1,disablePortal:T=!1,filterSelectedOptions:O=!1,forcePopupIcon:k="auto",freeSolo:R=!1,fullWidth:I=!1,getLimitTagsText:B=(t=>"+".concat(t)),getOptionLabel:L,groupBy:D,handleHomeEndKeys:F=!s.freeSolo,includeInputInList:N=!1,limitTags:j=-1,ListboxComponent:z="ul",ListboxProps:U,loading:V=!1,loadingText:G="Loading\u2026",multiple:W=!1,noOptionsText:H="No options",openOnFocus:J=!1,openText:K="Open",PaperComponent:X=Qi,PopperComponent:q=Sc,popupIcon:Y=EZ||(EZ=(0,v.jsx)(uf,{})),readOnly:Q=!1,renderGroup:Z,renderInput:$,renderOption:tt,renderTags:et,selectOnFocus:nt=!s.freeSolo,size:rt="medium",slotProps:it={}}=s,ot=(0,C.A)(s,PZ),{getRootProps:st,getInputProps:at,getInputLabelProps:lt,getPopupIndicatorProps:ct,getClearProps:ut,getTagProps:dt,getListboxProps:ht,getOptionProps:ft,value:pt,dirty:gt,expanded:mt,id:vt,popupOpen:bt,focused:yt,focusedTag:xt,anchorEl:At,setAnchorEl:_t,inputValue:wt,groupedOptions:St}=aZ((0,f.A)({},s,{componentName:"Autocomplete"})),Ct=!w&&!E&&gt&&!Q,Et=(!R||!0===k)&&!1!==k,{onMouseDown:Pt}=at(),{ref:Mt}=null!=U?U:{},Tt=ht(),{ref:Ot}=Tt,kt=(0,C.A)(Tt,MZ),Rt=(0,Lr.A)(Ot,Mt),It=L||(t=>{var e;return null!=(e=t.label)?e:t}),Bt=(0,f.A)({},s,{disablePortal:T,expanded:mt,focused:yt,fullWidth:I,getOptionLabel:It,hasClearIcon:Ct,hasPopupIcon:Et,inputFocused:-1===xt,popupOpen:bt,size:rt}),Lt=(t=>{const{classes:e,disablePortal:n,expanded:r,focused:i,fullWidth:o,hasClearIcon:s,hasPopupIcon:a,inputFocused:l,popupOpen:c,size:u}=t,d={root:["root",r&&"expanded",i&&"focused",o&&"fullWidth",s&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag","tagSize".concat((0,Dn.A)(u))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,Bn.A)(d,wZ,e)})(Bt);let Dt;if(W&&pt.length>0){const t=t=>(0,f.A)({className:Lt.tag,disabled:E},dt(t));Dt=et?et(pt,t,Bt):pt.map(((e,n)=>(0,v.jsx)(AZ,(0,f.A)({label:It(e),size:rt},t({index:n}),d))))}if(j>-1&&Array.isArray(Dt)){const t=Dt.length-j;!yt&&t>0&&(Dt=Dt.splice(0,j),Dt.push((0,v.jsx)("span",{className:Lt.tag,children:B(t)},Dt.length)))}const Ft=Z||(t=>(0,v.jsxs)("li",{children:[(0,v.jsx)(jZ,{className:Lt.groupLabel,ownerState:Bt,component:"div",children:t.group}),(0,v.jsx)(zZ,{className:Lt.groupUl,ownerState:Bt,children:t.children})]},t.key)),Nt=tt||((t,e)=>(0,h.createElement)("li",(0,f.A)({},t,{key:t.key}),It(e))),jt=(t,e)=>{const n=ft({option:t,index:e});return Nt((0,f.A)({},n,{className:Lt.option}),t,{selected:n["aria-selected"],index:e,inputValue:wt},Bt)},zt=null!=(n=it.clearIndicator)?n:A.clearIndicator,Ut=null!=(r=it.paper)?r:A.paper,Vt=null!=(i=it.popper)?i:A.popper,Gt=null!=(o=it.popupIndicator)?o:A.popupIndicator,Wt=t=>(0,v.jsx)(BZ,(0,f.A)({as:q,disablePortal:T,style:{width:At?At.clientWidth:null},ownerState:Bt,role:"presentation",anchorEl:At,open:bt},Vt,{className:(0,wn.A)(Lt.popper,null==Vt?void 0:Vt.className),children:(0,v.jsx)(LZ,(0,f.A)({ownerState:Bt,as:X},Ut,{className:(0,wn.A)(Lt.paper,null==Ut?void 0:Ut.className),children:t}))}));let Ht=null;return St.length>0?Ht=Wt((0,v.jsx)(NZ,(0,f.A)({as:z,className:Lt.listbox,ownerState:Bt},kt,U,{ref:Rt,children:St.map(((t,e)=>D?Ft({key:t.key,group:t.group,children:t.options.map(((e,n)=>jt(e,t.index+n)))}):jt(t,e)))}))):V&&0===St.length?Ht=Wt((0,v.jsx)(DZ,{className:Lt.loading,ownerState:Bt,children:G})):0!==St.length||R||V||(Ht=Wt((0,v.jsx)(FZ,{className:Lt.noOptions,ownerState:Bt,role:"presentation",onMouseDown:t=>{t.preventDefault()},children:H}))),(0,v.jsxs)(h.Fragment,{children:[(0,v.jsx)(OZ,(0,f.A)({ref:e,className:(0,wn.A)(Lt.root,p),ownerState:Bt},st(ot),{children:$({id:vt,disabled:E,fullWidth:!0,size:"small"===rt?"small":void 0,InputLabelProps:lt(),InputProps:(0,f.A)({ref:_t,className:Lt.inputRoot,startAdornment:Dt,onClick:t=>{t.target===t.currentTarget&&Pt(t)}},(Ct||Et)&&{endAdornment:(0,v.jsxs)(kZ,{className:Lt.endAdornment,ownerState:Bt,children:[Ct?(0,v.jsx)(RZ,(0,f.A)({},ut(),{"aria-label":y,title:y,ownerState:Bt},zt,{className:(0,wn.A)(Lt.clearIndicator,null==zt?void 0:zt.className),children:g})):null,Et?(0,v.jsx)(IZ,(0,f.A)({},ct(),{disabled:E,"aria-label":bt?x:K,title:bt?x:K,ownerState:Bt},Gt,{className:(0,wn.A)(Lt.popupIndicator,null==Gt?void 0:Gt.className),children:Y})):null]})}),inputProps:(0,f.A)({className:Lt.input,disabled:E,readOnly:Q},at())})})),At?Ht:null]})})),VZ=UZ;function GZ(t){return(0,Fn.Ay)("MuiLink",t)}const WZ=(0,Tn.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var HZ=n(7162);const JZ={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},KZ=t=>{let{theme:e,ownerState:n}=t;const r=(t=>JZ[t]||t)(n.color),i=(0,HZ.Yn)(e,"palette.".concat(r),!1)||n.color,o=(0,HZ.Yn)(e,"palette.".concat(r,"Channel"));return"vars"in e&&o?"rgba(".concat(o," / 0.4)"):(0,Kn.X4)(i,.4)},XZ=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],qZ=(0,Ln.Ay)(Wn,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["underline".concat((0,Dn.A)(n.underline))],"button"===n.component&&e.button]}})((t=>{let{theme:e,ownerState:n}=t;return(0,f.A)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,f.A)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:KZ({theme:e,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(WZ.focusVisible)]:{outline:"auto"}})})),YZ=h.forwardRef((function(t,e){const n=(0,p.A)({props:t,name:"MuiLink"}),{className:r,color:i="primary",component:o="a",onBlur:s,onFocus:a,TypographyClasses:l,underline:c="always",variant:u="inherit",sx:d}=n,g=(0,C.A)(n,XZ),{isFocusVisibleRef:m,onBlur:b,onFocus:y,ref:x}=(0,Fr.A)(),[A,_]=h.useState(!1),w=(0,Lr.A)(e,x),S=(0,f.A)({},n,{color:i,component:o,focusVisible:A,underline:c,variant:u}),E=(t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,o={root:["root","underline".concat((0,Dn.A)(i)),"button"===n&&"button",r&&"focusVisible"]};return(0,Bn.A)(o,GZ,e)})(S);return(0,v.jsx)(qZ,(0,f.A)({color:i,className:(0,wn.A)(E.root,r),classes:l,component:o,onBlur:t=>{b(t),!1===m.current&&_(!1),s&&s(t)},onFocus:t=>{y(t),!0===m.current&&_(!0),a&&a(t)},ref:w,ownerState:S,variant:u,sx:[...Object.keys(JZ).includes(i)?[]:[{color:i}],...Array.isArray(d)?d:[d]]},g))})),QZ=YZ;function ZZ(t){const e=t.clicked,n=vn.csjsURL+"/?cityscope=",r=vn.csjsURL+"_projection_mapping/?cityscope=",[i,o]=(0,h.useState)(!1);(0,h.useEffect)((()=>{o(!0)}),[e]);return(0,v.jsx)(Fu,{open:i,onClose:()=>{o(!1)},"aria-labelledby":"table-select-dialog-title","aria-describedby":"table-select-dialog-description",sx:{background:"rgba(0, 0, 0, 0.5)","& .MuiPaper-root":{background:"rgba(0, 0, 0, .8)",outline:"1px solid white"},"& .MuiBackdrop-root":{backgroundColor:"transparent"}},children:(0,v.jsxs)(Ju,{children:[(0,v.jsx)(Wn,{id:"table-select-dialog-title",variant:"h2",children:e.tableName}),(0,v.jsxs)(Wn,{children:[(0,v.jsx)(QZ,{href:n+e.tableName.toLowerCase(),children:"Go to project"}),", ",(0,v.jsx)(QZ,{href:r+e.tableName.toLowerCase(),children:"project this table to TUI"})," ","or"," ",(0,v.jsx)(QZ,{target:"blank",href:e.tableURL,children:"view raw data on cityIO."})]})]})})}function $Z(t){const e=t.tablesList,[n,r]=(0,h.useState)(null),i={options:e,getOptionLabel:t=>t.tableName};return(0,v.jsxs)(v.Fragment,{children:[n&&(0,v.jsx)(ZZ,{clicked:n}),(0,v.jsx)(VZ,{...i,disablePortal:!0,id:"combo-box-demo",options:e,sx:{width:300},renderInput:t=>(0,v.jsx)(Sf,{...t,label:"Search CityScope Project..."}),onChange:(t,e)=>{r(e)}})]})}var t$=n(6191);class e$ extends eC{applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=Ev(r,n,e);const{longitude:i,latitude:o}=t;return(i<-180||i>180)&&(t.longitude=function(t,e){const n=t%e;return n<0?e+n:n}(i+180,360)-180),t.latitude=Ev(o,-89,89),t}}class n$ extends $S{constructor(){super(...arguments),ge(this,"ControllerState",e$),ge(this,"transition",{transitionDuration:300,transitionInterpolator:new GS(["longitude","latitude","zoom"])}),ge(this,"dragMode","pan")}setProps(t){super.setProps(t),this.dragRotate=!1,this.touchRotate=!1}}class r$ extends kS{get ViewportType(){return vI}get ControllerType(){return n$}}ge(r$,"displayName","GlobeView");const i$={bearing:0,pitch:0,position:[0,0,0]},o$={speed:1.2,curve:1.414};class s$ extends zS{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),ge(this,"opts",void 0),this.opts={...o$,...t}}interpolateProps(t,e,n){const r=function(t,e,n,r){const{startZoom:i,startCenterXY:o,uDelta:s,w0:a,u1:l,S:c,rho:u,rho2:d,r0:h}=uy(t,e,r);if(l<ay){const r={};for(const i of ly){const o=t[i],s=e[i];r[i]=Bb(o,s,n)}return r}const f=n*c,p=Math.cosh(h)/Math.cosh(h+u*f),g=a*((Math.cosh(h)*Math.tanh(h+u*f)-Math.sinh(h))/d)/l,m=i+Kb(1/p),v=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}([],s,g);pb(v,v,o);const b=qb(v);return{longitude:b[0],latitude:b[1],zoom:m}}(t,e,n,this.opts);for(const i in i$)r[i]=Pv(t[i]||i$[i],e[i]||i$[i],n);return r}getDuration(t,e){let{transitionDuration:n}=e;return"auto"===n&&(n=function(t,e,n){const r={...cy,...n},{screenSpeed:i,speed:o,maxDuration:s}=r,{S:a,rho:l}=uy(t,e,r),c=1e3*a;let u;return u=Number.isFinite(i)?c/(i/l):c/o,Number.isFinite(s)&&u>s?0:u}(t,e,this.opts)),n}}const a$=n.p+"static/media/legoio.148c5ab6b7715f0e6c55.png";function l$(t){const[e,n]=(0,h.useState)([]),[r,i]=(0,h.useState)(),[o,s]=(0,h.useState)(),a={longitude:-71.060929,latitude:42.3545259,zoom:1,pitch:0,bearing:0,zHeight:2e6},[l,c]=(0,h.useState)(a),[u,d]=(0,h.useState)(l),[f,p]=(0,h.useState)(null);let g=!1;const m=()=>{let t=Math.floor(Math.random()*e.length);d({longitude:e[t].coord.to[0],latitude:e[t].coord.to[1],zoom:3,pitch:0,bearing:0,transitionDuration:8e3,transitionInterpolator:new s$,transitionEasing:t=>t<.5?2*t*t:(4-2*t)*t-1})};(0,h.useEffect)((()=>{if(0===e.length)return;m();let t=setInterval((()=>{m()}),1e4);return p(t),()=>clearInterval(t)}),[e]),(0,h.useEffect)((()=>{r&&clearInterval(f)}),[r]),(0,h.useEffect)((()=>{s(a.zoom),document.getElementById("deckgl-wrapper").addEventListener("contextmenu",(t=>t.preventDefault())),document.getElementById("deckgl-wrapper").style.backgroundColor="black"}),[a.zoom]),(0,h.useEffect)((()=>{let e=[];t.cityIOdata.forEach(((t,n)=>{e.push({tableURL:t.tableURL,tableName:t.tableName,index:n,tableHeader:t.tableHeader,coord:{from:[t.tableHeader.longitude,t.tableHeader.latitude],to:[t.tableHeader.longitude+n/10,t.tableHeader.latitude+n/10,a.zHeight]}})})),n(e)}),[t,a.zHeight]);const b=[new gL({data:"https://api.mapbox.com/styles/v1/relnox/cjlu6w5sc1dy12rmn4kl2zljn/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicmVsbm94IiwiYSI6ImNqd2VwOTNtYjExaHkzeXBzYm1xc3E3dzQifQ.X8r8nj4-baZXSsFgctQMsg&attribution=false&logo=false&fresh=true",minZoom:0,maxZoom:19,tileSize:96,renderSubLayers:t=>{const{bbox:{west:e,south:n,east:r,north:i}}=t.tile;return new _L(t,{data:null,image:t.data,_imageCoordinateSystem:dy.CARTESIAN,bounds:[e,n,r,i]})}}),new kL({id:"LineLayer",data:e,pickable:!0,getWidth:o<2?.3:.1,getSourcePosition:t=>t.coord.from,getTargetPosition:t=>t.coord.to,getColor:[255,255,255,100]}),new wR({id:"text-layer",data:e,pickable:!0,getPosition:t=>t.coord.to,getText:t=>t.tableName,getColor:[255,255,255],getSize:o<2?0:5,getAngle:0,getPixelOffset:[10,5],getTextAnchor:"start",getAlignmentBaseline:"center"}),new Xk({id:"icon-layer",data:e,pickable:!0,iconAtlas:a$,onClick:t=>{d({longitude:t.object.coord.to[0],latitude:t.object.coord.to[1],zoom:3,pitch:0,bearing:0,transitionDuration:1e3,transitionInterpolator:new s$}),i(t)},iconMapping:{marker:{x:0,y:0,width:768,height:768,mask:!1}},getIcon:t=>"marker",sizeScale:1,getSize:o<5?20:5,getPosition:t=>[t.coord.to[0],t.coord.to[1],a.zHeight]})];return(0,v.jsxs)("div",{style:{backgroundColor:"black"},width:"100%",height:"100%",children:[r&&r.object&&(0,v.jsx)(ZZ,{clicked:r.object,onClose:()=>i(null)}),(0,v.jsx)(oT,{views:new r$,onHover:t=>{let{object:e}=t;return g=Boolean(e)},getCursor:t=>{let{isDragging:e}=t;return e?"grabbing":g?"crosshair":"grab"},layers:b,controller:!0,initialViewState:u,onViewportChange:c,onViewStateChange:t=>s(t.viewState.zoom)})]})}function c$(){const[t,e]=(0,h.useState)([]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l$,{cityIOdata:t}),(0,v.jsxs)(In,{sx:{width:"100%",padding:10},children:[(0,v.jsx)(nZ,{getTablesList:e}),(0,v.jsxs)(Ir,{container:!0,spacing:5,justifyContent:"center",children:[(0,v.jsx)(Ir,{item:!0,xs:12,lg:4,zIndex:10,children:(0,v.jsx)(Wn,{variant:"h1",children:"MIT CityScope"})}),(0,v.jsx)(Ir,{item:!0,xs:12,lg:4,zIndex:10,children:(0,v.jsxs)(Wn,{variant:"h4",children:["MIT CityScope is an open-source urban modeling and simulation platform project developed by the City Science group at the MIT Media Lab","  ",(0,v.jsx)(QZ,{href:"https://github.com/CityScope",target:"blank",children:(0,v.jsx)(t$.A,{fontSize:"small"})})]})}),(0,v.jsx)(Ir,{item:!0,xs:12,lg:4,zIndex:10,children:(0,v.jsx)($Z,{tablesList:t})})]})]})]})}const u$=()=>{const t=ut(),[e,n]=(0,h.useState)();(0,h.useEffect)((()=>{document.title=e?"CityScopeJS | ".concat(e):"CityScopeJS"}),[e]);const[r,i]=(0,h.useState)();return(0,h.useEffect)((()=>{const e=window.location,r=fn.parse(e.search);Object.keys(r).includes("cityscope")?((e,r)=>{const o=r&&r.toLowerCase();o&&""!==o?(n(o),t(dn(o)),i(e)):i("cityio")})("cityscopejs",r.cityscope):i("cityio")}),[]),(0,v.jsxs)(z,{theme:mn,children:[(0,v.jsx)(S,{}),(0,v.jsxs)(v.Fragment,{children:["cityscopejs"===r&&(0,v.jsx)(uY,{}),"cityio"===r&&(0,v.jsx)(c$,{})]})]})},d$=Se({cityIOdataState:hn,menuState:fs});var h$=n(4391);const f$=function(t){var e,n=qe(),r=t||{},i=r.reducer,o=void 0===i?void 0:i,s=r.middleware,a=void 0===s?n():s,l=r.devTools,c=void 0===l||l,u=r.preloadedState,d=void 0===u?void 0:u,h=r.enhancers,f=void 0===h?void 0:h;if("function"===typeof o)e=o;else{if(!We(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=Se(o)}var p=a;"function"===typeof p&&(p=p(n));var g=Ee.apply(void 0,p),m=Ce;c&&(m=Ge(ze({trace:!1},"object"===typeof c&&c)));var v=new Ke(g),b=v;return Array.isArray(f)?b=Re([g],f):"function"===typeof f&&(b=f(v)),we(e,d,m.apply(void 0,b))}({reducer:d$}),p$=document.getElementById("root");(0,h$.H)(p$).render((0,v.jsx)(h.StrictMode,{children:(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(st,{store:f$,children:(0,v.jsx)(u$,{})})})}))})()})();
//# sourceMappingURL=main.e4d6eed9.js.map